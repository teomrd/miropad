{
  "version": 3,
  "sources": ["../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/options.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/attributes.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/find.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/inline.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/block.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/ast.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/parse.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/html.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/filter.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/pandoc.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/djot-renderer.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/version.js", "../node_modules/.deno/@djot+djot@0.3.1/node_modules/@djot/djot/lib/index.js", "../node_modules/.deno/textarea-caret@3.1.0/node_modules/textarea-caret/index.js", "../src/js/utils/isArray.ts", "../src/js/utils/dom.js", "../src/js/components/molecules/notify.ts", "../src/js/components/molecules/welcome.js", "../src/js/utils/localstorage.js", "../src/configuration.ts", "../src/js/utils/github/api.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/bytes.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/vendor/base-x.js", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/bases/base.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/bases/base32.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/bases/base36.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/bases/base58.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/vendor/varint.js", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/varint.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/hashes/digest.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/cid.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/codecs/json.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/hashes/hasher.ts", "../node_modules/.deno/multiformats@13.3.1/node_modules/multiformats/src/hashes/sha2-browser.ts", "../src/js/utils/hashBrowser.ts", "../src/js/utils/isJSON.ts", "../src/js/utils/pageTitle.js", "../src/js/utils/urlManager.ts", "../src/js/ui/functions/savedState.ts", "../src/js/components/organisms/noteManager/noteManager.ts", "../src/js/utils/isUserLoggedIn.js", "../src/js/components/molecules/commands/command.js", "../src/js/components/atoms/div/wordParts.ts", "../src/js/components/atoms/div/div.js", "../src/js/utils/github/actions.js", "../src/js/utils/fileSystem/fileSystem.ts", "../src/js/components/organisms/markdown/mdToHtml.ts", "../src/js/utils/mail.js", "../src/js/utils/copyToClipboard.ts", "../src/js/components/atoms/button/button.js", "../src/js/components/organisms/markdown/markDownViewer.js", "../src/js/utils/prettifyJSON.js", "../src/js/utils/sleep.js", "../src/js/components/atoms/icon/icon.js", "../src/js/utils/webShare.js", "../src/js/components/organisms/commander/commands.ts", "../src/js/utils/keyListener.js", "../src/js/components/atoms/link/link.js", "../src/js/utils/dates.js", "../src/js/utils/isArraySorted.ts", "../src/js/components/organisms/commander/smartFilter.ts", "../src/js/registerServiceWorker.js", "../src/js/components/organisms/commander/commander.ts", "../node_modules/.deno/nanoid@5.0.8/node_modules/nanoid/url-alphabet/index.js", "../node_modules/.deno/nanoid@5.0.8/node_modules/nanoid/index.browser.js", "../src/js/features/autoComplete.ts", "../src/js/utils/text/index.ts", "../src/js/utils/text/autoCompleteCheckboxes.js", "../src/js/features/inter-linking/renderInterNotes.ts", "../src/js/components/organisms/terminal.ts", "../src/js/isSyncEnabled.js", "../src/js/utils/Trie/Trie.ts", "../src/js/utils/errorHandler.js", "../src/js/listeners/urlChange.ts", "../src/js/ui/markdown/preview/autoMagicallyCheckBoxes.js", "../src/js/main.js", "../src/index.ts"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Warning = void 0;\nclass Warning {\n    constructor(message, pos) {\n        this.message = message;\n        if (typeof pos === \"number\") {\n            this.offset = pos;\n        }\n        else if (pos && \"line\" in pos) {\n            this.sourceLoc = pos;\n            this.offset = pos.offset;\n        }\n    }\n    render() {\n        let result = this.message;\n        if (this.sourceLoc) {\n            result += ` at line ${this.sourceLoc.line}, col ${this.sourceLoc.col}`;\n        }\n        else if (this.offset) {\n            result += ` at offset ${this.offset}`;\n        }\n        return result;\n    }\n}\nexports.Warning = Warning;\n", "\"use strict\";\n/* Parser for attributes, implemented as a state machine.\n *\n * attributes { id = \"foo\", class = \"bar baz\",\n *              key1 = \"val1\", key2 = \"val2\" }\n * syntax:\n *\n * attributes <- '{' whitespace* attribute (whitespace attribute)* whitespace* '}'\n * attribute <- identifier | class | keyval\n * identifier <- '#' name\n * class <- '.' name\n * name <- (nonspace, nonpunctuation other than ':', '_', '-')+\n * keyval <- key '=' val\n * key <- (ASCII_ALPHANUM | ':' | '_' | '-')+\n * val <- bareval | quotedval\n * bareval <- (ASCII_ALPHANUM | ':' | '_' | '-')+\n * quotedval <- '\"' ([^\"] | '\\\"') '\"'\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeParser = void 0;\n// states\nvar State;\n(function (State) {\n    State[State[\"SCANNING\"] = 0] = \"SCANNING\";\n    State[State[\"SCANNING_ID\"] = 1] = \"SCANNING_ID\";\n    State[State[\"SCANNING_CLASS\"] = 2] = \"SCANNING_CLASS\";\n    State[State[\"SCANNING_KEY\"] = 3] = \"SCANNING_KEY\";\n    State[State[\"SCANNING_VALUE\"] = 4] = \"SCANNING_VALUE\";\n    State[State[\"SCANNING_BARE_VALUE\"] = 5] = \"SCANNING_BARE_VALUE\";\n    State[State[\"SCANNING_QUOTED_VALUE\"] = 6] = \"SCANNING_QUOTED_VALUE\";\n    State[State[\"SCANNING_QUOTED_VALUE_CONTINUATION\"] = 7] = \"SCANNING_QUOTED_VALUE_CONTINUATION\";\n    State[State[\"SCANNING_ESCAPED\"] = 8] = \"SCANNING_ESCAPED\";\n    State[State[\"SCANNING_ESCAPED_IN_CONTINUATION\"] = 9] = \"SCANNING_ESCAPED_IN_CONTINUATION\";\n    State[State[\"SCANNING_COMMENT\"] = 10] = \"SCANNING_COMMENT\";\n    State[State[\"FAIL\"] = 11] = \"FAIL\";\n    State[State[\"DONE\"] = 12] = \"DONE\";\n    State[State[\"START\"] = 13] = \"START\";\n})(State || (State = {}));\nconst reKeyChar = /^[a-zA-Z0-9_:-]/;\nconst isKeyChar = function (c) {\n    return reKeyChar.exec(c) !== null;\n};\nconst handlers = [];\nhandlers[State.START] = function (parser, pos) {\n    if (parser.subject.charAt(pos) === '{') {\n        return State.SCANNING;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.FAIL] = function (parser, pos) {\n    return State.FAIL;\n};\nhandlers[State.DONE] = function (parser, pos) {\n    return State.DONE;\n};\nhandlers[State.SCANNING] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (c === '\\n' || c === '\\r') {\n        return State.SCANNING;\n    }\n    else if (c === ' ' || c === '\\t') {\n        parser.addEvent(pos, pos, \"attr_space\");\n        return State.SCANNING;\n    }\n    else if (c === '}') {\n        return State.DONE;\n    }\n    else if (c === '#') {\n        parser.begin = pos;\n        parser.addEvent(pos, pos, \"attr_id_marker\");\n        return State.SCANNING_ID;\n    }\n    else if (c === '%') {\n        parser.begin = pos;\n        return State.SCANNING_COMMENT;\n    }\n    else if (c === '.') {\n        parser.begin = pos;\n        parser.addEvent(pos, pos, \"attr_class_marker\");\n        return State.SCANNING_CLASS;\n    }\n    else if (isKeyChar(c)) {\n        parser.begin = pos;\n        return State.SCANNING_KEY;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_COMMENT] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (c === '%') {\n        if (parser.begin && pos > parser.begin) {\n            parser.addEvent(parser.begin, pos, \"comment\");\n        }\n        return State.SCANNING;\n    }\n    else if (c == '}') {\n        return State.DONE;\n    }\n    else {\n        return State.SCANNING_COMMENT;\n    }\n};\nhandlers[State.SCANNING_ID] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if ((/^[^\\]\\[~!@#$%^&*(){}`,.<>\\\\|=+/?\\s]/.exec(c) !== null)) {\n        return State.SCANNING_ID;\n    }\n    else if (c === '}') {\n        if (parser.begin && parser.lastpos && parser.lastpos > parser.begin) {\n            parser.addEvent(parser.begin + 1, parser.lastpos, \"id\");\n        }\n        parser.begin = null;\n        return State.DONE;\n    }\n    else if (/^\\s/.exec(c) !== null) {\n        if (parser.begin && parser.lastpos && parser.lastpos > parser.begin) {\n            parser.addEvent(parser.begin + 1, parser.lastpos, \"id\");\n        }\n        if (!(c === '\\r' || c === '\\n')) {\n            parser.addEvent(pos, pos, \"attr_space\");\n        }\n        parser.begin = null;\n        return State.SCANNING;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_CLASS] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if ((/^\\w/.exec(c) !== null) || c === '_' || c === '-' || c === ':') {\n        return State.SCANNING_CLASS;\n    }\n    else if (c === '}') {\n        if (parser.begin && parser.lastpos && parser.lastpos > parser.begin) {\n            parser.addEvent(parser.begin + 1, parser.lastpos, \"class\");\n        }\n        parser.begin = null;\n        return State.DONE;\n    }\n    else if (/^\\s/.exec(c) !== null) {\n        if (parser.begin && parser.lastpos && parser.lastpos > parser.begin) {\n            parser.addEvent(parser.begin + 1, parser.lastpos, \"class\");\n        }\n        if (!(c === '\\r' || c === '\\n')) {\n            parser.addEvent(pos, pos, \"attr_space\");\n        }\n        parser.begin = null;\n        return State.SCANNING;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_KEY] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (c === '=' && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin, parser.lastpos, \"key\");\n        parser.addEvent(pos, pos, \"attr_equal_marker\");\n        parser.begin = null;\n        return State.SCANNING_VALUE;\n    }\n    else if (/^[a-zA-Z0-9_:-]/.exec(c) !== null) {\n        return State.SCANNING_KEY;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_VALUE] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (c === '\"') {\n        parser.begin = pos;\n        parser.addEvent(pos, pos, \"attr_quote_marker\");\n        return State.SCANNING_QUOTED_VALUE;\n    }\n    else if (/^[a-zA-Z0-9_:-]/.exec(c) !== null) {\n        parser.begin = pos;\n        return State.SCANNING_BARE_VALUE;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_BARE_VALUE] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (/^[a-zA-Z0-9_:-]/.exec(c) !== null) {\n        return State.SCANNING_BARE_VALUE;\n    }\n    else if (c === '}' && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin, parser.lastpos, \"value\");\n        parser.begin = null;\n        return State.DONE;\n    }\n    else if (/^\\s/.exec(c) && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin, parser.lastpos, \"value\");\n        if (!(c === '\\r' || c === '\\n')) {\n            parser.addEvent(pos, pos, \"attr_space\");\n        }\n        parser.begin = null;\n        return State.SCANNING;\n    }\n    else {\n        return State.FAIL;\n    }\n};\nhandlers[State.SCANNING_ESCAPED] = function (parser, pos) {\n    return State.SCANNING_QUOTED_VALUE;\n};\nhandlers[State.SCANNING_ESCAPED_IN_CONTINUATION] = function (parser, pos) {\n    return State.SCANNING_QUOTED_VALUE_CONTINUATION;\n};\nhandlers[State.SCANNING_QUOTED_VALUE] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (c === '\"' && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin + 1, parser.lastpos, \"value\");\n        parser.addEvent(pos, pos, \"attr_quote_marker\");\n        parser.begin = null;\n        return State.SCANNING;\n    }\n    else if (c === \"\\n\" && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin + 1, pos, \"value\");\n        parser.begin = null;\n        return State.SCANNING_QUOTED_VALUE_CONTINUATION;\n    }\n    else if (c === \"\\\\\") {\n        return State.SCANNING_ESCAPED;\n    }\n    else {\n        return State.SCANNING_QUOTED_VALUE;\n    }\n};\nhandlers[State.SCANNING_QUOTED_VALUE_CONTINUATION] = function (parser, pos) {\n    const c = parser.subject.charAt(pos);\n    if (parser.begin === null) {\n        parser.begin = pos;\n    }\n    if (c === '\"' && parser.begin && parser.lastpos) {\n        parser.addEvent(pos, pos, \"attr_quote_marker\");\n        parser.addEvent(parser.begin, parser.lastpos, \"value\");\n        parser.begin = null;\n        return State.SCANNING;\n    }\n    else if (c === \"\\n\" && parser.begin && parser.lastpos) {\n        parser.addEvent(parser.begin, pos, \"value\");\n        parser.begin = null;\n        return State.SCANNING_QUOTED_VALUE_CONTINUATION;\n    }\n    else if (c === \"\\\\\") {\n        return State.SCANNING_ESCAPED_IN_CONTINUATION;\n    }\n    else {\n        return State.SCANNING_QUOTED_VALUE_CONTINUATION;\n    }\n};\nclass AttributeParser {\n    constructor(subject) {\n        this.subject = subject;\n        this.state = State.START;\n        this.begin = null;\n        this.lastpos = null;\n        this.matches = [];\n    }\n    addEvent(startpos, endpos, annot) {\n        this.matches.push({ startpos: startpos, endpos: endpos, annot: annot });\n    }\n    /* Feed parser a slice of text from the subject, between\n     * startpos and endpos inclusive.  Return object with\n     * status and position,\n     * where status is either \"done\" (position should point to\n     * final '}'), \"fail\" (position should point to first character\n     * that could not be parsed), or \"continue\" (position should\n     * point to last character parsed). */\n    feed(startpos, endpos) {\n        let pos = startpos;\n        while (pos <= endpos) {\n            this.state = handlers[this.state](this, pos);\n            if (this.state === State.DONE) {\n                return { status: \"done\", position: pos };\n            }\n            else if (this.state === State.FAIL) {\n                this.lastpos = pos;\n                return { status: \"fail\", position: pos };\n            }\n            else {\n                this.lastpos = pos;\n                pos = pos + 1;\n            }\n        }\n        return { status: \"continue\", position: endpos };\n    }\n}\nexports.AttributeParser = AttributeParser;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.find = exports.pattern = void 0;\nconst pattern = function (patt) {\n    return new RegExp(patt, 'yd');\n};\nexports.pattern = pattern;\nconst find = function (subject, patt, startpos, endpos) {\n    patt.lastIndex = startpos;\n    let subj;\n    if (endpos !== undefined) {\n        subj = subject.substring(0, endpos + 1);\n    }\n    else {\n        subj = subject;\n    }\n    const result = patt.exec(subj);\n    if (result !== null) {\n        let idx = 1;\n        const capts = [];\n        if (result.indices.length > 1) {\n            for (let i = 1; i < result.indices.length; i++) {\n                const [sp, ep] = result.indices[i];\n                capts.push(subj.substring(sp, ep));\n            }\n        }\n        return { startpos: result.indices[0][0],\n            endpos: result.indices[0][1] - 1,\n            captures: capts };\n    }\n    else {\n        return null;\n    }\n};\nexports.find = find;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineParser = void 0;\nconst attributes_1 = require(\"./attributes\");\nconst options_1 = require(\"./options\");\nconst find_1 = require(\"./find\");\nconst C_TAB = 9;\nconst C_LF = 10;\nconst C_CR = 13;\nconst C_SPACE = 32;\nconst C_BANG = 33;\nconst C_DOUBLE_QUOTE = 34;\nconst C_DOLLARS = 36;\nconst C_SINGLE_QUOTE = 39;\nconst C_LEFT_PAREN = 40;\nconst C_RIGHT_PAREN = 41;\nconst C_ASTERISK = 42;\nconst C_PLUS = 43;\nconst C_HYPHEN = 45;\nconst C_PERIOD = 46;\nconst C_COLON = 58;\nconst C_LESSTHAN = 60;\nconst C_EQUALS = 61;\nconst C_LEFT_BRACKET = 91;\nconst C_BACKSLASH = 92;\nconst C_RIGHT_BRACKET = 93;\nconst C_HAT = 94;\nconst C_UNDERSCORE = 95;\nconst C_BACKTICK = 96;\nconst C_LEFT_BRACE = 123;\nconst C_RIGHT_BRACE = 125;\nconst C_TILDE = 126;\nconst reSpecial = /[\\r\\n\"'()*+.:<=[\\\\\\]^_`${}~-]/g;\n// find first special character starting from startpos, and not\n// going beyond endpos, or null if none found.\nconst findSpecial = function (s, startpos, endpos) {\n    reSpecial.lastIndex = startpos;\n    const result = reSpecial.exec(s);\n    if (result && result.index <= endpos) {\n        return result.index;\n    }\n    else {\n        return null;\n    }\n};\nconst pattNonspace = (0, find_1.pattern)(\"[^ \\t\\r\\n]\");\nconst pattLineEnd = (0, find_1.pattern)(\"[ \\\\t]*\\\\r?\\\\n\");\nconst pattPunctuation = (0, find_1.pattern)(\"['!\\\"#$%&\\\\\\\\'()\\\\*+,\\\\-\\\\.\\\\/:;<=>?@\\\\[\\\\]\\\\^_`{|}~']\");\nconst pattAutolink = (0, find_1.pattern)(\"\\\\<([^<>\\\\s]+)\\\\>\");\nconst pattDelim = (0, find_1.pattern)(\"[_*~^+='\\\"-]\");\nconst pattSymbol = (0, find_1.pattern)(\":[\\\\w_+-]+:\");\nconst pattTwoPeriods = (0, find_1.pattern)(\"\\\\.\\\\.\");\nconst pattBackticks0 = (0, find_1.pattern)(\"`*\");\nconst pattBackticks1 = (0, find_1.pattern)(\"`+\");\nconst pattDoubleDollars = (0, find_1.pattern)(\"\\\\$\\\\$\");\nconst pattSingleDollar = (0, find_1.pattern)(\"\\\\$\");\nconst pattBackslash = (0, find_1.pattern)(\"\\\\\\\\\");\nconst pattRawAttribute = (0, find_1.pattern)(\"\\\\{=[^\\\\s{}`]+\\\\}\");\nconst pattNoteReference = (0, find_1.pattern)(\"\\\\^([^\\\\]]+)\\\\]\");\nconst hasBrace = function (self, pos) {\n    return ((pos > 0 && self.subject.codePointAt(pos - 1) === C_LEFT_BRACE) ||\n        self.subject.codePointAt(pos + 1) === C_RIGHT_BRACE);\n};\nconst alwaysTrue = function () { return true; };\nconst betweenMatched = function (c, annotation, defaultmatch, opentest) {\n    return function (self, pos, endpos) {\n        const subject = self.subject;\n        let can_open = (0, find_1.find)(subject, pattNonspace, pos + 1) !== null &&\n            opentest(self, pos);\n        let can_close = (0, find_1.find)(subject, pattNonspace, pos - 1) !== null;\n        const lastmatch = self.matches[self.matches.length - 1];\n        const has_open_marker = lastmatch && lastmatch.annot === \"open_marker\";\n        const has_close_marker = pos + 1 <= endpos &&\n            subject.codePointAt(pos + 1) === C_RIGHT_BRACE;\n        let endcloser = pos;\n        let startopener = pos;\n        // Allow explicit open/close markers to override:\n        if (has_open_marker) {\n            can_open = true;\n            can_close = false;\n            startopener = pos - 1;\n        }\n        if (!has_open_marker && has_close_marker) {\n            can_close = true;\n            can_open = false;\n            endcloser = pos + 1;\n        }\n        if (has_open_marker && defaultmatch.match(/^right/)) {\n            defaultmatch = defaultmatch.replace(/^right/, \"left\");\n        }\n        else if (has_close_marker && defaultmatch.match(/^left/)) {\n            defaultmatch = defaultmatch.replace(/^left/, \"right\");\n        }\n        let d = c;\n        if (has_close_marker) {\n            d = \"{\" + d;\n        }\n        const openers = self.openers[d];\n        if (can_close && openers && openers.length > 0) {\n            // check openers for a match\n            const opener = openers[openers.length - 1];\n            if (opener.endpos !== pos - 1) { // exclude empty emph\n                self.clearOpeners(opener.startpos, pos);\n                self.addMatch(opener.startpos, opener.endpos, \"+\" + annotation, opener.matchIndex);\n                self.addMatch(pos, endcloser, \"-\" + annotation);\n                return endcloser + 1;\n            }\n        }\n        // If we get here, we didn't match an opener:\n        if (can_open) {\n            let e = c;\n            if (has_open_marker) {\n                e = \"{\" + e;\n            }\n            self.addOpener(e, startopener, pos, defaultmatch);\n            return pos + 1;\n        }\n        else {\n            self.addMatch(pos, endcloser, defaultmatch);\n            return endcloser + 1;\n        }\n    };\n};\n// handlers for specific code points:\nconst matchers = {\n    [C_BACKTICK]: function (self, pos, endpos) {\n        const subject = self.subject;\n        const m = (0, find_1.find)(subject, pattBackticks0, pos, endpos);\n        if (m === null) {\n            return null;\n        }\n        const endchar = m.endpos;\n        if ((0, find_1.find)(subject, pattDoubleDollars, pos - 2) &&\n            !(0, find_1.find)(subject, pattBackslash, pos - 3)) {\n            self.matches.pop(); // remove first $\n            self.matches.pop(); // remove second $\n            self.addMatch(pos - 2, endchar, \"+display_math\");\n            self.verbatimType = \"display_math\";\n        }\n        else if ((0, find_1.find)(subject, pattSingleDollar, pos - 1)) {\n            self.matches.pop(); // remove $\n            self.addMatch(pos - 1, endchar, \"+inline_math\");\n            self.verbatimType = \"inline_math\";\n        }\n        else {\n            self.addMatch(pos, endchar, \"+verbatim\");\n            self.verbatimType = \"verbatim\";\n        }\n        self.verbatim = endchar - pos + 1;\n        return endchar + 1;\n    },\n    [C_BACKSLASH]: function (self, pos, endpos) {\n        const subject = self.subject;\n        const mLineEnd = (0, find_1.find)(subject, pattLineEnd, pos + 1, endpos);\n        if (mLineEnd !== null) {\n            // see if there were preceding spaces and remove them\n            if (self.matches.length > 0) {\n                const lastmatch = self.matches[self.matches.length - 1];\n                if (lastmatch.annot === \"str\") {\n                    let ep = lastmatch.endpos;\n                    const sp = lastmatch.startpos;\n                    while (ep >= sp &&\n                        (subject.codePointAt(ep) === C_SPACE ||\n                            subject.codePointAt(ep) === C_TAB)) {\n                        ep = ep - 1;\n                    }\n                    if (ep < sp) {\n                        self.matches.pop();\n                    }\n                    else {\n                        lastmatch.endpos = ep;\n                    }\n                }\n            }\n            self.addMatch(pos, pos, \"escape\");\n            self.addMatch(pos + 1, mLineEnd.endpos, \"hard_break\");\n            return mLineEnd.endpos + 1;\n        }\n        else {\n            const mPunct = (0, find_1.find)(subject, pattPunctuation, pos + 1, endpos);\n            if (mPunct !== null) {\n                self.addMatch(pos, pos, \"escape\");\n                self.addMatch(mPunct.startpos, mPunct.endpos, \"str\");\n                return mPunct.endpos + 1;\n            }\n            else if (pos + 1 <= endpos &&\n                subject.codePointAt(pos + 1) === C_SPACE) {\n                self.addMatch(pos, pos, \"escape\");\n                self.addMatch(pos + 1, pos + 1, \"non_breaking_space\");\n                return pos + 2;\n            }\n            else {\n                self.addMatch(pos, pos, \"str\");\n                return pos + 1;\n            }\n        }\n    },\n    [C_LESSTHAN]: function (self, pos, endpos) {\n        const subject = self.subject;\n        const m = (0, find_1.find)(subject, pattAutolink, pos, endpos);\n        if (m === null) {\n            return null;\n        }\n        const endurl = m.endpos;\n        const starturl = m.startpos;\n        const url = m.captures[0];\n        if (url.match(/[^:]@/)) { // email\n            self.addMatch(starturl, starturl, \"+email\");\n            self.addMatch(starturl + 1, endurl - 1, \"str\");\n            self.addMatch(endurl, endurl, \"-email\");\n            return endurl + 1;\n        }\n        else if (url.match(/[a-zA-Z]:/)) { /// url\n            self.addMatch(starturl, starturl, \"+url\");\n            self.addMatch(starturl + 1, endurl - 1, \"str\");\n            self.addMatch(endurl, endurl, \"-url\");\n            return endurl + 1;\n        }\n        return null;\n    },\n    [C_TILDE]: betweenMatched('~', 'subscript', 'str', alwaysTrue),\n    [C_HAT]: betweenMatched('^', 'superscript', 'str', alwaysTrue),\n    [C_UNDERSCORE]: betweenMatched('_', 'emph', 'str', alwaysTrue),\n    [C_ASTERISK]: betweenMatched('*', 'strong', 'str', alwaysTrue),\n    [C_PLUS]: betweenMatched(\"+\", \"insert\", \"str\", hasBrace),\n    [C_EQUALS]: betweenMatched(\"=\", \"mark\", \"str\", hasBrace),\n    [C_SINGLE_QUOTE]: betweenMatched(\"'\", \"single_quoted\", \"right_single_quote\", function (self, pos) {\n        if (pos === 0) {\n            return true;\n        }\n        else {\n            const cp = self.subject.codePointAt(pos - 1);\n            return (cp === C_SPACE ||\n                cp === C_TAB ||\n                cp === C_CR ||\n                cp === C_LF ||\n                cp === C_DOUBLE_QUOTE ||\n                cp === C_SINGLE_QUOTE ||\n                cp === C_HYPHEN ||\n                cp === C_LEFT_PAREN ||\n                cp === C_LEFT_BRACKET);\n        }\n    }),\n    [C_DOUBLE_QUOTE]: betweenMatched('\"', \"double_quoted\", \"left_double_quote\", alwaysTrue),\n    [C_LEFT_BRACE]: function (self, pos, endpos) {\n        if ((0, find_1.find)(self.subject, pattDelim, pos + 1, endpos)) {\n            self.addMatch(pos, pos, \"open_marker\");\n            return pos + 1;\n        }\n        else if (self.allowAttributes) {\n            self.attributeParser = new attributes_1.AttributeParser(self.subject);\n            self.attributeStart = pos;\n            self.attributeSlices = [];\n            return pos;\n        }\n        else {\n            self.addMatch(pos, pos, \"str\");\n            return pos + 1;\n        }\n    },\n    [C_COLON]: function (self, pos, endpos) {\n        const m = (0, find_1.find)(self.subject, pattSymbol, pos, endpos);\n        if (m) {\n            self.addMatch(m.startpos, m.endpos, \"symb\");\n            return m.endpos + 1;\n        }\n        else {\n            self.addMatch(pos, pos, \"str\");\n            return pos + 1;\n        }\n    },\n    [C_PERIOD]: function (self, pos, endpos) {\n        if ((0, find_1.find)(self.subject, pattTwoPeriods, pos + 1, endpos)) {\n            self.addMatch(pos, pos + 2, \"ellipses\");\n            return pos + 3;\n        }\n        else {\n            return null;\n        }\n    },\n    [C_LEFT_BRACKET]: function (self, pos, endpos) {\n        const m = (0, find_1.find)(self.subject, pattNoteReference, pos + 1, endpos);\n        if (m) { // footnote ref\n            self.addMatch(pos, m.endpos, \"footnote_reference\");\n            return m.endpos + 1;\n        }\n        else {\n            self.addOpener(\"[\", pos, pos, \"str\");\n            return pos + 1;\n        }\n    },\n    [C_RIGHT_BRACKET]: function (self, pos, endpos) {\n        const openers = self.openers[\"[\"];\n        const subject = self.subject;\n        if (openers && openers.length > 0) {\n            const opener = openers[openers.length - 1];\n            if (opener.annot === \"reference_link\") {\n                // found a reference link\n                // convert all matches inside reference to str\n                self.strMatches((opener.subendpos || opener.endpos) + 1, pos - 1);\n                // add the matches\n                const isImage = subject.codePointAt(opener.startpos - 1) === C_BANG &&\n                    subject.codePointAt(opener.startpos - 2) !== C_BACKSLASH;\n                if (isImage) {\n                    self.addMatch(opener.startpos - 1, opener.startpos - 1, \"image_marker\", opener.matchIndex - 1);\n                    self.addMatch(opener.startpos, opener.endpos, \"+imagetext\", opener.matchIndex);\n                    self.addMatch(opener.substartpos || opener.startpos, opener.substartpos || opener.startpos, \"-imagetext\", opener.subMatchIndex);\n                }\n                else {\n                    self.addMatch(opener.startpos, opener.endpos, \"+linktext\", opener.matchIndex);\n                    self.addMatch(opener.substartpos || opener.startpos, opener.substartpos || opener.startpos, \"-linktext\", opener.subMatchIndex);\n                }\n                self.addMatch(opener.subendpos || opener.endpos, opener.subendpos || opener.endpos, \"+reference\", opener.subMatchIndex + 1);\n                self.addMatch(pos, pos, \"-reference\");\n                // remove from openers\n                self.clearOpeners(opener.startpos, pos);\n                return pos + 1;\n            }\n            else if (pos + 1 <= endpos &&\n                subject.codePointAt(pos + 1) === C_LEFT_BRACKET) {\n                opener.annot = \"reference_link\";\n                self.addMatch(pos, pos, \"str\");\n                opener.subMatchIndex = self.matches.length - 1;\n                self.addMatch(pos + 1, pos + 1, \"str\");\n                opener.substartpos = pos; // intermediate ]\n                opener.subendpos = pos + 1; // intermediate [\n                // remove any openers between [ and ]\n                self.clearOpeners(opener.startpos + 1, pos - 1);\n                return pos + 2;\n            }\n            else if (pos + 1 <= endpos &&\n                subject.codePointAt(pos + 1) === C_LEFT_PAREN) {\n                self.openers[\"(\"] = []; // clear ( openers\n                opener.annot = \"explicit_link\";\n                self.addMatch(pos, pos, \"str\"); // ]\n                opener.subMatchIndex = self.matches.length - 1;\n                self.addMatch(pos + 1, pos + 1, \"str\"); // (\n                opener.substartpos = pos; // intermediate ]\n                opener.subendpos = pos + 1; // intermediate (\n                self.destination = true;\n                // remove any openers between [ and ]\n                self.clearOpeners(opener.startpos + 1, pos - 1);\n                return pos + 2;\n            }\n            else if (pos + 1 <= endpos &&\n                subject.codePointAt(pos + 1) === C_LEFT_BRACE) {\n                // assume this is attributes, bracketed span\n                self.addMatch(opener.startpos, opener.endpos, \"+span\", opener.matchIndex);\n                self.addMatch(pos, pos, \"-span\");\n                // remove any openers between [ and ]\n                self.clearOpeners(opener.startpos, pos);\n                return pos + 1;\n            }\n        }\n        return null;\n    },\n    [C_LEFT_PAREN]: function (self, pos, endpos) {\n        if (!self.destination) {\n            return null;\n        }\n        self.addOpener(\"(\", pos, pos, \"str\");\n        return pos + 1;\n    },\n    [C_RIGHT_PAREN]: function (self, pos, endpos) {\n        if (!self.destination) {\n            return null;\n        }\n        const parens = self.openers[\"(\"];\n        if (parens && parens.length > 0) {\n            parens.pop(); // clear opener\n            self.addMatch(pos, pos, \"str\");\n            return pos + 1;\n        }\n        else {\n            const subject = self.subject;\n            const openers = self.openers[\"[\"];\n            const opener = openers[openers.length - 1];\n            if (openers && openers.length > 0 && opener.annot === \"explicit_link\") {\n                // we have inline link\n                // convert all matches inside destination to str\n                self.strMatches((opener.subendpos || opener.endpos) + 1, pos - 1);\n                const isImage = subject.codePointAt(opener.startpos - 1) === C_BANG &&\n                    subject.codePointAt(opener.startpos - 2) !== C_BACKSLASH;\n                if (isImage) {\n                    self.addMatch(opener.startpos - 1, opener.startpos - 1, \"image_marker\", opener.matchIndex - 1);\n                    self.addMatch(opener.startpos, opener.endpos, \"+imagetext\", opener.matchIndex);\n                    self.addMatch(opener.substartpos || opener.startpos, opener.substartpos || opener.startpos, \"-imagetext\", opener.subMatchIndex);\n                }\n                else {\n                    self.addMatch(opener.startpos, opener.endpos, \"+linktext\", opener.matchIndex);\n                    self.addMatch(opener.substartpos || opener.startpos, opener.substartpos || opener.startpos, \"-linktext\", opener.subMatchIndex);\n                }\n                self.addMatch(opener.subendpos || opener.endpos, opener.subendpos || opener.endpos, \"+destination\", opener.subMatchIndex + 1);\n                self.addMatch(pos, pos, \"-destination\");\n                self.destination = false;\n                // remove from openers\n                self.clearOpeners(opener.startpos, pos);\n                return pos + 1;\n            }\n        }\n        return null;\n    },\n    [C_HYPHEN]: function (self, pos, endpos) {\n        const subject = self.subject;\n        if (subject.codePointAt(pos - 1) === C_LEFT_BRACE ||\n            subject.codePointAt(pos + 1) === C_RIGHT_BRACE) {\n            const newpos = betweenMatched(\"-\", \"delete\", \"str\", hasBrace)(self, pos, endpos);\n            if (newpos) {\n                return newpos;\n            }\n        }\n        // didn't match a del, try for smart hyphens:\n        let ep = pos;\n        let hyphens = 0;\n        while (ep <= endpos && subject.codePointAt(ep) === C_HYPHEN) {\n            ep++;\n            hyphens++;\n        }\n        if (subject.codePointAt(ep) === C_RIGHT_BRACE) {\n            hyphens--; // last hyphen is close del\n        }\n        if (hyphens === 0) { // this means we have '-}'\n            self.addMatch(pos, pos + 1, \"str\");\n            return pos + 2;\n        }\n        // Try to construct a homogeneous sequence of dashes\n        const all_em = hyphens % 3 === 0;\n        const all_en = hyphens % 2 === 0;\n        while (hyphens > 0) {\n            if (all_em) {\n                self.addMatch(pos, pos + 2, \"em_dash\");\n                pos = pos + 3;\n                hyphens = hyphens - 3;\n            }\n            else if (all_en) {\n                self.addMatch(pos, pos + 1, \"en_dash\");\n                pos = pos + 2;\n                hyphens = hyphens - 2;\n            }\n            else if (hyphens >= 3 && (hyphens % 2 !== 0 || hyphens > 4)) {\n                self.addMatch(pos, pos + 2, \"em_dash\");\n                pos = pos + 3;\n                hyphens = hyphens - 3;\n            }\n            else if (hyphens >= 2) {\n                self.addMatch(pos, pos + 1, \"en_dash\");\n                pos = pos + 2;\n                hyphens = hyphens - 2;\n            }\n            else {\n                self.addMatch(pos, pos, \"str\");\n                pos = pos + 1;\n                hyphens = hyphens - 1;\n            }\n        }\n        return pos;\n    }\n};\nclass InlineParser {\n    constructor(subject, options = {}) {\n        this.options = options;\n        this.warn = options.warn || (() => { });\n        this.subject = subject;\n        this.matches = []; // array of matches\n        this.openers = {};\n        this.verbatim = 0;\n        this.verbatimType = \"\";\n        this.destination = false;\n        this.firstpos = -1;\n        this.lastpos = 0;\n        this.allowAttributes = true;\n        this.attributeParser = null;\n        this.attributeStart = null;\n        this.attributeSlices = null;\n        this.matchers = matchers;\n    }\n    addMatch(startpos, endpos, annot, matchIndex) {\n        const match = { startpos: startpos, endpos: endpos, annot: annot };\n        if (matchIndex !== undefined) {\n            // insert into the proper place, replacing placeholder\n            this.matches.splice(matchIndex, 1, match);\n        }\n        else {\n            this.matches.push(match);\n        }\n    }\n    inVerbatim() {\n        return (this.verbatim > 0);\n    }\n    singleChar(pos) {\n        this.addMatch(pos, pos, \"str\");\n        return pos + 1;\n    }\n    reparseAttributes() {\n        // Reparse attributeSlices that we tried to parse as an attribute\n        const slices = this.attributeSlices;\n        if (slices === null) {\n            return;\n        }\n        this.allowAttributes = false;\n        this.attributeParser = null;\n        this.attributeStart = null;\n        if (slices !== null) {\n            for (const slice of slices) {\n                this.feed(slice.startpos, slice.endpos);\n            }\n        }\n        this.allowAttributes = true;\n        this.attributeSlices = null;\n    }\n    getMatches() {\n        const subject = this.subject;\n        if (this.attributeParser) {\n            // we're still in an attribute parse\n            this.reparseAttributes();\n        }\n        let i = this.matches.length - 1;\n        // remove trailing softbreak and any spaces\n        if (this.matches[i] && this.matches[i].annot === \"soft_break\") {\n            this.matches.pop();\n            const match = this.matches[this.matches.length - 1];\n            if (match && match.annot === \"str\" &&\n                subject.codePointAt(match.endpos) === 32) {\n                while (match.endpos >= match.startpos &&\n                    subject.codePointAt(match.endpos) === 32) {\n                    match.endpos = match.endpos - 1;\n                }\n                if (match.endpos < match.startpos) {\n                    this.matches.pop();\n                }\n            }\n        }\n        // add -verbatim if needed\n        if (this.matches.length > 0 && this.verbatim > 0) { // unclosed verbatim\n            const last = this.matches[this.matches.length - 1];\n            this.warn(new options_1.Warning(\"Unclosed verbatim\", last.endpos));\n            this.matches.push({\n                startpos: last.endpos,\n                endpos: last.endpos,\n                annot: \"-\" + this.verbatimType\n            });\n        }\n        return this.matches;\n    }\n    addOpener(name, startpos, endpos, defaultAnnot) {\n        if (!this.openers[name]) {\n            this.openers[name] = [];\n        }\n        this.openers[name].push({ matchIndex: this.matches.length,\n            startpos: startpos,\n            endpos: endpos,\n            annot: null,\n            subMatchIndex: this.matches.length,\n            substartpos: null,\n            subendpos: null });\n        // add default match (to be used if we don't match the opener)\n        this.addMatch(startpos, endpos, defaultAnnot);\n    }\n    clearOpeners(startpos, endpos) {\n        // Remove other openers in between the matches\n        for (const k in this.openers) {\n            const v = this.openers[k];\n            let i = v.length - 1;\n            while (v[i]) {\n                const opener = v[i];\n                if (opener.startpos >= startpos && opener.endpos <= endpos) {\n                    v.splice(i, 1);\n                }\n                else if ((opener.substartpos && opener.substartpos >= startpos) &&\n                    (opener.subendpos && opener.subendpos <= endpos)) {\n                    v[i].substartpos = null;\n                    v[i].subendpos = null;\n                    v[i].annot = null;\n                }\n                else {\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    strMatches(startpos, endpos) {\n        // convert matches between startpos and endpos to str\n        let i = this.matches.length - 1;\n        // backup to startpos\n        while (i > 0 && this.matches[i].startpos >= startpos) {\n            i--;\n        }\n        if (this.matches[i].startpos < startpos) {\n            i++;\n        }\n        while (this.matches[i] && this.matches[i].endpos <= endpos) {\n            const m = this.matches[i];\n            if (m.annot !== \"escape\" && m.annot !== \"str\") {\n                m.annot = \"str\";\n            }\n            i++;\n        }\n    }\n    feed(startpos, endpos) {\n        // Feed a slice to the parser, updating state.\n        const subject = this.subject;\n        if (this.firstpos === -1 || startpos < this.firstpos) {\n            this.firstpos = startpos;\n        }\n        if (this.lastpos === 0 || endpos > this.lastpos) {\n            this.lastpos = endpos;\n        }\n        let pos = startpos;\n        while (pos <= endpos) {\n            if (this.attributeParser !== null) {\n                const sp = pos;\n                const nextSpecial = findSpecial(subject, pos, endpos);\n                let ep2;\n                if (nextSpecial === null) {\n                    ep2 = endpos;\n                }\n                else {\n                    ep2 = nextSpecial;\n                }\n                const result = this.attributeParser.feed(sp, ep2);\n                const ep = result.position;\n                if (result.status === \"done\") {\n                    const attributeStart = this.attributeStart;\n                    // add attribute matches\n                    if (attributeStart !== null) {\n                        this.addMatch(attributeStart, attributeStart, \"+attributes\");\n                    }\n                    const attrMatches = this.attributeParser.matches;\n                    // add attribute matches\n                    for (const match of attrMatches) {\n                        this.addMatch(match.startpos, match.endpos, match.annot);\n                    }\n                    this.addMatch(ep, ep, \"-attributes\");\n                    // restore state to prior to adding attribute parser\n                    this.attributeParser = null;\n                    this.attributeStart = null;\n                    this.attributeSlices = null;\n                    pos = ep + 1;\n                }\n                else if (result.status === \"fail\") {\n                    this.reparseAttributes();\n                    pos = sp;\n                    // as no slice was added for it\n                }\n                else if (result.status === \"continue\") {\n                    if (this.attributeSlices === null) {\n                        this.attributeSlices = [];\n                    }\n                    this.attributeSlices.push({ startpos: sp, endpos: ep });\n                    pos = ep + 1;\n                }\n            }\n            else {\n                // find next interesting character:\n                const nextSpecial = findSpecial(subject, pos, endpos);\n                let newpos;\n                if (nextSpecial === null) {\n                    newpos = endpos + 1;\n                }\n                else {\n                    newpos = nextSpecial;\n                }\n                if (newpos > pos) {\n                    this.addMatch(pos, newpos - 1, \"str\");\n                    pos = newpos;\n                    if (pos > endpos) {\n                        break; // otherwise, fall through:\n                    }\n                }\n                // if we get here, then newpos = pos,\n                // i.e. we have something interesting at pos\n                const c = subject.codePointAt(pos);\n                if (c === undefined) {\n                    throw (new Error(\"Code point at \" + pos + \" is undefined.\"));\n                }\n                if (c === C_CR || c === C_LF) { // cr or lf\n                    if (c === C_CR && subject.codePointAt(pos + 1) === C_LF &&\n                        pos + 1 <= endpos) {\n                        this.addMatch(pos, pos + 1, \"soft_break\");\n                        pos = pos + 2;\n                    }\n                    else {\n                        this.addMatch(pos, pos, \"soft_break\");\n                        pos = pos + 1;\n                    }\n                }\n                else if (this.verbatim > 0) {\n                    if (c === 96) {\n                        const m = (0, find_1.find)(subject, pattBackticks1, pos, endpos);\n                        if (m) {\n                            const endchar = m.endpos;\n                            if (m.endpos - pos + 1 === this.verbatim) {\n                                // check for raw attribute\n                                const m2 = (0, find_1.find)(subject, pattRawAttribute, endchar + 1, endpos);\n                                if (m2 && this.verbatimType === \"verbatim\") { // raw\n                                    this.addMatch(pos, endchar, \"-\" + this.verbatimType);\n                                    this.addMatch(m2.startpos, m2.endpos, \"raw_format\");\n                                    pos = m2.endpos + 1;\n                                }\n                                else {\n                                    this.addMatch(pos, endchar, \"-\" + this.verbatimType);\n                                    pos = endchar + 1;\n                                }\n                                this.verbatim = 0;\n                                this.verbatimType = \"verbatim\";\n                            }\n                            else {\n                                this.addMatch(pos, endchar, \"str\");\n                                pos = endchar + 1;\n                            }\n                        }\n                        else {\n                            this.addMatch(pos, endpos, \"str\");\n                            pos = endpos + 1;\n                        }\n                    }\n                    else {\n                        this.addMatch(pos, pos, \"str\");\n                        pos = pos + 1;\n                    }\n                }\n                else {\n                    const matcher = this.matchers[c];\n                    if (matcher) {\n                        const res = matcher(this, pos, endpos);\n                        if (res === null) {\n                            pos = this.singleChar(pos);\n                        }\n                        else {\n                            pos = res;\n                        }\n                    }\n                    else {\n                        pos = this.singleChar(pos);\n                    }\n                }\n            }\n        }\n        return;\n    }\n}\nexports.InlineParser = InlineParser;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseEvents = void 0;\nconst options_1 = require(\"./options\");\nconst attributes_1 = require(\"./attributes\");\nconst find_1 = require(\"./find\");\nconst inline_1 = require(\"./inline\");\n// Return array of list styles that match a marker.\n// In ambiguous cases we return multiple values.\nconst getListStyles = function (marker) {\n    if (marker === \"+\" || marker === \"-\" || marker === \"*\" || marker === \":\") {\n        return [marker];\n    }\n    else if (/^[+*-] \\[[Xx ]\\]/.exec(marker)) {\n        return [\"X\"]; // task list\n    }\n    else if (/^[(]?[0-9]+[).]/.exec(marker)) {\n        return [marker.replace(/[0-9]+/, \"1\")];\n    }\n    else if (/^[(]?[ivxlcdm][).]/.exec(marker)) {\n        return [marker.replace(/[a-z]+/, \"i\"), marker.replace(/[a-z]+/, \"a\")];\n    }\n    else if (/^[(]?[IVXLCDM][).]/.exec(marker)) {\n        return [marker.replace(/[A-Z]+/, \"I\"), marker.replace(/[A-Z]+/, \"A\")];\n    }\n    else if (/^[(]?[ivxlcdm]+[).]/.exec(marker)) {\n        return [marker.replace(/[a-z]+/, \"i\")];\n    }\n    else if (/^[(]?[IVXLCDM]+[).]/.exec(marker)) {\n        return [marker.replace(/[A-Z]+/, \"I\")];\n    }\n    else if (/^[(]?[a-z][).]/.exec(marker)) {\n        return [marker.replace(/[a-z]/, \"a\")];\n    }\n    else if (/^[(]?[A-Z][).]/.exec(marker)) {\n        return [marker.replace(/[A-Z]/, \"A\")];\n    }\n    else { // doesn't match any list style\n        return [];\n    }\n};\nconst isSpaceOrTab = function (cp) {\n    return (cp === 32 || cp === 9);\n};\nconst isEolChar = function (cp) {\n    return (cp === 10 || cp === 13);\n};\nconst pattEndline = (0, find_1.pattern)(\"[ \\\\t]*\\\\r?\\\\n\");\nconst pattWord = (0, find_1.pattern)(\"^\\\\w+\\\\s\");\nconst pattWhitespace = (0, find_1.pattern)(\"[ \\\\t\\\\r\\\\n]\");\nconst pattNonWhitespace = (0, find_1.pattern)(\"[^ \\\\t\\\\r\\\\n]+\");\nconst pattBlockquotePrefix = (0, find_1.pattern)(\"[>][ \\\\t\\\\r\\\\n]\");\nconst pattBangs = (0, find_1.pattern)(\"#+\");\nconst pattCodeFence = (0, find_1.pattern)(\"(~~~~*|````*)([ \\\\t]*)([^ \\\\t\\\\r\\\\n`]*)[ \\\\t]*\\\\r?\\\\n\");\nconst pattRowSep = (0, find_1.pattern)(\"(:?)--*(:?)([ \\\\t]*\\\\|[ \\\\t]*)\");\nconst pattNextBarOrTicks = (0, find_1.pattern)(\"[^`|\\\\r\\\\n]*(?:[|]|`+)\");\nconst pattCaptionStart = (0, find_1.pattern)(\"\\\\^[ \\\\t]+\");\nconst pattFootnoteStart = (0, find_1.pattern)(\"\\\\[\\\\^([^\\\\]]+)\\\\]:[ \\\\t\\\\r\\\\n]\");\nconst pattThematicBreak = (0, find_1.pattern)(\"[-*][ \\t]*[-*][ \\\\t]*[-*][-* \\\\t]*\\\\r?\\\\n\");\nconst pattDivFence = (0, find_1.pattern)(\"(::::*)[ \\\\t]*\\\\r?\\\\n\");\nconst pattDivFenceStart = (0, find_1.pattern)(\"(::::*)[ \\\\t]*\");\nconst pattDivFenceEnd = (0, find_1.pattern)(\"([\\\\w_-]*)[ \\\\t]*\\\\r?\\\\n\");\nconst pattReferenceDefinition = (0, find_1.pattern)(\"\\\\[([^\\\\]\\\\r\\\\n]*)\\\\]:[ \\\\t]*([^ \\\\t\\\\r\\\\n]*)[\\\\r\\\\n]\");\nconst pattTableRow = (0, find_1.pattern)(\"(\\\\|[^\\\\r\\\\n]*\\\\|)[ \\\\t]*\\\\r?\\\\n\");\nconst pattListMarker = (0, find_1.pattern)(\"(:?[-*+:]|\\\\([0-9]+\\\\)|[0-9]+[.)]|[ivxlcdmIVXLCDM]+[.)]|\\\\([ivxlcdmIVXLCDM]+\\\\)|[a-zA-Z][.)]|\\\\([a-zA-Z]\\\\))[ \\\\t\\\\r\\\\n]\");\nconst pattTaskListMarker = (0, find_1.pattern)(\"[*+-] \\\\[[Xx ]\\\\][ \\\\t\\\\r\\\\n]\");\nvar ContentType;\n(function (ContentType) {\n    ContentType[ContentType[\"None\"] = 0] = \"None\";\n    ContentType[ContentType[\"Inline\"] = 1] = \"Inline\";\n    ContentType[ContentType[\"Block\"] = 2] = \"Block\";\n    ContentType[ContentType[\"Text\"] = 3] = \"Text\";\n    ContentType[ContentType[\"Cells\"] = 4] = \"Cells\";\n    ContentType[ContentType[\"Attributes\"] = 5] = \"Attributes\";\n    ContentType[ContentType[\"ListItem\"] = 6] = \"ListItem\";\n})(ContentType || (ContentType = {}));\nclass Container {\n    constructor(spec, extra) {\n        this.name = spec.name;\n        this.type = spec.type;\n        this.content = spec.content;\n        this.continue = spec.continue;\n        this.close = spec.close;\n        this.indent = 0;\n        this.inlineParser = null;\n        this.attributeParser = null;\n        this.extra = extra;\n    }\n}\nclass EventParser {\n    constructor(subject, options = {}) {\n        // Ensure the subject ends with a newline character\n        if (subject.charAt(subject.length - 1) !== '\\n') {\n            subject = subject + \"\\n\";\n        }\n        this.subject = subject;\n        this.maxoffset = subject.length - 1;\n        this.options = options;\n        this.warn = options.warn || (() => { });\n        this.indent = 0;\n        this.startline = 0;\n        this.starteol = 0;\n        this.endeol = 0;\n        this.matches = [];\n        this.containers = [];\n        this.pos = 0;\n        this.lastMatchedContainer = 0;\n        this.finishedLine = false;\n        this.returned = 0;\n        this.paraSpec =\n            {\n                name: \"para\",\n                type: ContentType.Block,\n                content: ContentType.Inline,\n                continue: (container) => {\n                    if (this.find(pattWhitespace) === null) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    this.addContainer(new Container(spec, {}));\n                    this.addMatch(this.pos, this.pos, \"+para\");\n                    return true;\n                },\n                close: () => {\n                    this.getInlineMatches();\n                    this.containers.pop();\n                    const last = this.matches[this.matches.length - 1];\n                    const ep = (last && last.endpos + 1) || this.pos;\n                    this.addMatch(ep, ep, \"-para\");\n                }\n            };\n        this.specs = [\n            {\n                name: \"block_quote\",\n                type: ContentType.Block,\n                content: ContentType.Block,\n                continue: (container) => {\n                    if (this.find(pattBlockquotePrefix) !== null) {\n                        this.pos = this.pos + 1;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    if (this.find(pattBlockquotePrefix) !== null) {\n                        this.addContainer(new Container(spec, {}));\n                        this.addMatch(this.pos, this.pos, \"+block_quote\");\n                        this.pos = this.pos + 1;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-block_quote\");\n                }\n            },\n            {\n                name: \"heading\",\n                type: ContentType.Block,\n                content: ContentType.Inline,\n                continue: (container) => {\n                    const m = this.find(pattBangs);\n                    if (m && container.extra.level === (m.endpos - m.startpos + 1) &&\n                        (0, find_1.find)(this.subject, pattWhitespace, m.endpos + 1)) {\n                        this.pos = m.endpos + 1;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    const m = this.find(pattBangs);\n                    if (m && (0, find_1.find)(this.subject, pattWhitespace, m.endpos + 1)) {\n                        const level = m.endpos - m.startpos + 1;\n                        this.addContainer(new Container(spec, { level: level }));\n                        this.addMatch(m.startpos, m.endpos, \"+heading\");\n                        this.pos = m.endpos + 1;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.getInlineMatches();\n                    this.containers.pop();\n                    const last = this.matches[this.matches.length - 1];\n                    const ep = (last && last.endpos + 1) || this.pos;\n                    this.addMatch(ep, ep, \"-heading\");\n                }\n            },\n            {\n                name: \"caption\",\n                type: ContentType.Block,\n                content: ContentType.Inline,\n                continue: (container) => {\n                    return ((0, find_1.find)(this.subject, pattWhitespace, this.pos) === null);\n                },\n                open: (spec) => {\n                    const m = this.find(pattCaptionStart);\n                    if (m) {\n                        this.pos = m.endpos + 1;\n                        this.addContainer(new Container(spec, {}));\n                        this.addMatch(this.pos, this.pos, \"+caption\");\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.getInlineMatches();\n                    this.containers.pop();\n                    this.addMatch(this.pos - 1, this.pos - 1, \"-caption\");\n                }\n            },\n            // should go before reference definitions\n            {\n                name: \"footnote\",\n                type: ContentType.Block,\n                content: ContentType.Block,\n                continue: (container) => {\n                    if (this.indent > (container.extra.indent || 0) ||\n                        this.pos === this.starteol) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    const m = this.find(pattFootnoteStart);\n                    if (m) {\n                        const sp = m.startpos;\n                        const ep = m.endpos;\n                        const label = m.captures[0];\n                        // adding container will close others\n                        this.addContainer(new Container(spec, {\n                            note_label: label,\n                            indent: this.indent\n                        }));\n                        this.addMatch(sp, sp, \"+footnote\");\n                        this.addMatch(sp + 2, ep - 3, \"note_label\");\n                        this.pos = ep;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-footnote\");\n                }\n            },\n            {\n                name: \"reference_definition\",\n                type: ContentType.Block,\n                content: ContentType.None,\n                continue: (container) => {\n                    if (container.extra.indent >= this.indent) {\n                        return false;\n                    }\n                    const nws = this.find(pattNonWhitespace);\n                    if (this.pos < this.starteol &&\n                        nws && nws.endpos === this.starteol - 1) {\n                        this.addMatch(this.pos, this.starteol - 1, \"reference_value\");\n                        this.pos = this.starteol;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    const m = this.find(pattReferenceDefinition);\n                    if (m) {\n                        const label = m.captures[0];\n                        const value = m.captures[1];\n                        this.addContainer(new Container(spec, { key: label, indent: this.indent }));\n                        this.addMatch(m.startpos, m.startpos, \"+reference_definition\");\n                        this.addMatch(m.startpos, m.startpos + label.length + 1, \"reference_key\");\n                        if (value.length > 0) {\n                            this.addMatch(this.starteol - value.length, this.starteol - 1, \"reference_value\");\n                        }\n                        this.pos = this.starteol - 1;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-reference_definition\");\n                }\n            },\n            // should go before list_item_spec\n            {\n                name: \"thematic_break\",\n                type: ContentType.Block,\n                content: ContentType.None,\n                continue: (container) => {\n                    return false;\n                },\n                open: (spec) => {\n                    const m = this.find(pattThematicBreak);\n                    if (m) {\n                        this.addContainer(new Container(spec, {}));\n                        this.addMatch(m.startpos, m.endpos, \"thematic_break\");\n                        this.pos = m.endpos;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.containers.pop();\n                }\n            },\n            {\n                name: \"list\",\n                type: ContentType.Block,\n                content: ContentType.ListItem,\n                continue: (container) => {\n                    // TODO remove code duplication btw list and list_item\n                    if (this.indent > container.extra.indent ||\n                        this.pos === this.starteol) {\n                        return true;\n                    }\n                    else { // match a list item of the correct type\n                        const m = this.find(pattListMarker);\n                        if (m === null) {\n                            return false;\n                        }\n                        let marker = this.subject.substring(m.startpos, m.endpos);\n                        const mtask = this.find(pattTaskListMarker);\n                        if (mtask !== null) {\n                            marker = this.subject.substring(mtask.startpos, mtask.startpos + 5);\n                        }\n                        const styles = getListStyles(marker);\n                        const newstyles = [];\n                        for (const style of container.extra.styles) {\n                            if (styles.includes(style)) {\n                                newstyles.push(style);\n                            }\n                        }\n                        if (newstyles.length > 0) {\n                            // narrow styles\n                            container.extra.styles = newstyles;\n                            return true;\n                        }\n                    }\n                    return false;\n                },\n                open: (spec) => {\n                    const m = this.find(pattListMarker);\n                    if (m === null) {\n                        return false;\n                    }\n                    const sp = m.startpos;\n                    const ep = m.endpos;\n                    let marker = this.subject.substring(sp, ep);\n                    const mtask = this.find(pattTaskListMarker);\n                    if (mtask !== null) {\n                        marker = this.subject.substring(mtask.startpos, mtask.startpos + 5);\n                    }\n                    // some items have ambiguous style\n                    const styles = getListStyles(marker);\n                    if (styles.length === 0) {\n                        return false;\n                    }\n                    const data = { styles: styles, indent: this.indent };\n                    // adding container will close others\n                    this.addContainer(new Container(spec, data));\n                    let annot = \"+list\";\n                    for (const style of styles) {\n                        annot = annot + \"|\" + style;\n                    }\n                    this.addMatch(sp, ep - 1, annot);\n                    return true;\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-list\");\n                }\n            },\n            {\n                name: \"list_item\",\n                type: ContentType.ListItem,\n                content: ContentType.Block,\n                continue: (container) => {\n                    return (this.indent > container.extra.indent ||\n                        this.pos === this.starteol);\n                },\n                open: (spec) => {\n                    const m = this.find(pattListMarker);\n                    if (m === null) {\n                        return false;\n                    }\n                    const sp = m.startpos;\n                    const ep = m.endpos;\n                    let marker = this.subject.substring(sp, ep);\n                    let checkbox = null;\n                    const mtask = this.find(pattTaskListMarker);\n                    if (mtask !== null) {\n                        marker = this.subject.substring(mtask.startpos, mtask.startpos + 5);\n                        checkbox = this.subject.substring(mtask.startpos + 3, mtask.startpos + 4);\n                    }\n                    // some items have ambiguous style\n                    const styles = getListStyles(marker);\n                    if (styles.length === 0) {\n                        return false;\n                    }\n                    const data = { styles: styles, indent: this.indent };\n                    // adding container will close others\n                    this.addContainer(new Container(spec, data));\n                    let annot = \"+list_item\";\n                    for (const style of styles) {\n                        annot = annot + \"|\" + style;\n                    }\n                    this.addMatch(sp, ep - 1, annot);\n                    this.pos = ep;\n                    if (checkbox) {\n                        if (checkbox === \" \") {\n                            this.addMatch(sp + 2, sp + 4, \"checkbox_unchecked\");\n                        }\n                        else {\n                            this.addMatch(sp + 2, sp + 4, \"checkbox_checked\");\n                        }\n                        this.pos = sp + 5;\n                    }\n                    return true;\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-list_item\");\n                }\n            },\n            {\n                name: \"table\",\n                type: ContentType.Block,\n                content: ContentType.Cells,\n                continue: (container) => {\n                    const m = this.find(pattTableRow);\n                    if (m) {\n                        const rawrow = m.captures[0];\n                        return this.parseTableRow(m.startpos, m.startpos + rawrow.length - 1);\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                open: (spec) => {\n                    const m = this.find(pattTableRow);\n                    if (m) {\n                        this.addContainer(new Container(spec, { columns: 0 }));\n                        const rawrow = m.captures[0];\n                        this.addMatch(m.startpos, m.startpos, \"+table\");\n                        if (this.parseTableRow(m.startpos, m.startpos + rawrow.length - 1)) {\n                            return true;\n                        }\n                        else {\n                            this.matches.pop(); // remove \"+table\" match\n                            this.containers.pop();\n                            return false;\n                        }\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    this.containers.pop();\n                    this.addMatch(this.pos, this.pos, \"-table\");\n                }\n            },\n            {\n                name: \"attributes\",\n                type: ContentType.Block,\n                content: ContentType.Attributes,\n                open: (spec) => {\n                    if (this.subject.codePointAt(this.pos) === 123) { // {\n                        const attributeParser = new attributes_1.AttributeParser(this.subject);\n                        const res = attributeParser.feed(this.pos, this.starteol);\n                        if (res.status === \"fail\") {\n                            return false;\n                        }\n                        else if (res.status === \"done\" &&\n                            (0, find_1.find)(this.subject, pattEndline, res.position + 1)\n                                === null) {\n                            return false;\n                        }\n                        else {\n                            const container = this.addContainer(new Container(spec, {\n                                status: res.status,\n                                indent: this.indent,\n                                startpos: this.pos,\n                                slices: []\n                            }));\n                            container.attributeParser = attributeParser;\n                            container.extra.slices =\n                                [{ startpos: this.pos, endpos: this.starteol }];\n                            this.pos = this.starteol;\n                            return true;\n                        }\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                continue: (container) => {\n                    if (container.extra.status === \"done\") {\n                        return false;\n                    }\n                    if (container.attributeParser && this.indent > container.extra.indent) {\n                        container.extra.slices.push({\n                            startpos: this.pos,\n                            endpos: this.starteol\n                        });\n                        const res = container.attributeParser.feed(this.pos, this.endeol);\n                        container.extra.status = res.status;\n                        if (res.status !== \"fail\" ||\n                            !(0, find_1.find)(this.subject, pattEndline, res.position + 1)) {\n                            this.pos = this.starteol;\n                            return true;\n                        }\n                    }\n                    // if we get to here, we don't continue; either we\n                    // reached the end of indentation or we failed in\n                    // parsing attributes\n                    // attribute parsing failed; convert to para and continue with that\n                    this.addMatch(container.extra.startpos, container.extra.startpos, \"+para\");\n                    const attrContainer = this.containers.pop(); // remove attribute contain\n                    // add para container\n                    const para = this.addContainer(new Container(this.paraSpec, {}));\n                    // reparse the text we couldn't parse as a block attribute:\n                    if (!para.inlineParser || !attrContainer) {\n                        throw (new Error(\"Missing inlineParser or attrContainer\"));\n                        return false;\n                    }\n                    para.inlineParser.attributeSlices = attrContainer.extra.slices;\n                    para.inlineParser.reparseAttributes();\n                    this.pos = para.inlineParser.lastpos + 1;\n                    return true;\n                },\n                close: () => {\n                    const container = this.containers.pop();\n                    if (!container)\n                        return;\n                    if (container.extra.status === \"continue\") {\n                        // attribute parsing failed; convert to para\n                        this.addMatch(container.extra.startpos, container.extra.startpos, \"+para\");\n                        // add para container\n                        const para = this.addContainer(new Container(this.paraSpec, {}), true);\n                        if (!para || !para.inlineParser) {\n                            throw (new Error(\"Could not add paragraph\"));\n                        }\n                        // reparse the text we couldn't parse as a block attribute:\n                        para.inlineParser.attributeSlices = container.extra.slices;\n                        para.inlineParser.reparseAttributes();\n                        para.close();\n                    }\n                    else {\n                        this.addMatch(container.extra.startpos, container.extra.startpos, \"+block_attributes\");\n                        if (container.attributeParser) { // should always be true\n                            const attrMatches = container.attributeParser.matches;\n                            for (const match of attrMatches) {\n                                this.matches.push(match);\n                            }\n                        }\n                        this.addMatch(this.pos, this.pos, \"-block_attributes\");\n                    }\n                }\n            },\n            {\n                name: \"fenced_div\",\n                type: ContentType.Block,\n                content: ContentType.Block,\n                continue: (container) => {\n                    const tip = this.tip();\n                    if (tip && tip.name === \"code_block\") {\n                        return true; // see #109\n                    }\n                    const m = this.find(pattDivFence);\n                    if (m && container.extra.colons) {\n                        const colons = m.captures[0];\n                        if (colons.length >= container.extra.colons) {\n                            container.extra.endFenceStartpos = m.startpos;\n                            container.extra.endFenceEndpos = m.startpos + colons.length - 1;\n                            this.pos = m.endpos; // before newline\n                            return false;\n                        }\n                    }\n                    return true;\n                },\n                open: (spec) => {\n                    const m = this.find(pattDivFenceStart);\n                    if (!m) {\n                        return false;\n                    }\n                    const colons = m.captures[0];\n                    const m2 = (0, find_1.find)(this.subject, pattDivFenceEnd, m.endpos + 1);\n                    if (!m2) {\n                        return false;\n                    }\n                    const clsp = m2.startpos;\n                    const lang = m2.captures[0];\n                    this.addContainer(new Container(spec, { colons: colons.length }));\n                    this.addMatch(m.startpos, m.endpos, \"+div\");\n                    if (lang.length > 0) {\n                        this.addMatch(clsp, clsp + lang.length - 1, \"class\");\n                    }\n                    this.pos = m2.endpos + 1;\n                    this.finishedLine = true;\n                    return true;\n                },\n                close: () => {\n                    const container = this.containers.pop();\n                    if (!container)\n                        return;\n                    const sp = container.extra.endFenceStartpos || this.pos;\n                    const ep = container.extra.endFenceEndpos || this.pos;\n                    // check to make sure the match is in order\n                    this.addMatch(sp, ep, \"-div\");\n                    if (sp === ep) {\n                        this.warn(new options_1.Warning(\"Unclosed div\", this.pos));\n                    }\n                }\n            },\n            {\n                name: \"code_block\",\n                type: ContentType.Block,\n                content: ContentType.Text,\n                continue: (container) => {\n                    const m = this.find(container.extra.closePattern);\n                    if (m) {\n                        container.extra.endFenceStartpos = m.startpos;\n                        container.extra.endFenceEndpos = m.startpos + m.captures[0].length - 1;\n                        this.pos = m.endpos; // before newline\n                        this.finishedLine = true;\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                },\n                open: (spec) => {\n                    const m = this.find(pattCodeFence);\n                    if (m) {\n                        const [border, ws, lang] = m.captures;\n                        const isRaw = lang.charAt(0) === \"=\" && true || false;\n                        const closePattern = (0, find_1.pattern)(\"(\" + border +\n                            border.substring(0, 1) + \"*)[ \\\\t]*[\\\\r\\\\n]\");\n                        const cont = this.addContainer(new Container(spec, { closePattern: closePattern }));\n                        cont.indent = this.indent;\n                        this.addMatch(m.startpos, m.startpos + border.length - 1, \"+code_block\");\n                        if (lang.length > 0) {\n                            const langstart = m.startpos + border.length + ws.length;\n                            if (isRaw) {\n                                this.addMatch(langstart, langstart + lang.length - 1, \"raw_format\");\n                            }\n                            else {\n                                this.addMatch(langstart, langstart + lang.length - 1, \"code_language\");\n                            }\n                        }\n                        this.pos = m.endpos; // before newline;\n                        this.finishedLine = true;\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                },\n                close: () => {\n                    const container = this.containers.pop();\n                    if (!container)\n                        return;\n                    const sp = container.extra.endFenceStartpos || this.pos;\n                    const ep = container.extra.endFenceEndpos || this.pos;\n                    this.addMatch(sp, ep, \"-code_block\");\n                    if (sp === ep) {\n                        this.warn(new options_1.Warning(\"Unclosed code block\", this.pos));\n                    }\n                }\n            }\n        ];\n    }\n    find(patt) {\n        return (0, find_1.find)(this.subject, patt, this.pos);\n    }\n    tip() {\n        if (this.containers.length >= 1) {\n            return this.containers[this.containers.length - 1];\n        }\n        else {\n            return null;\n        }\n    }\n    addMatch(startpos, endpos, annot) {\n        this.matches.push({\n            startpos: Math.min(startpos, this.maxoffset),\n            endpos: Math.min(endpos, this.maxoffset),\n            annot: annot\n        });\n    }\n    getInlineMatches() {\n        var _a;\n        const ilparser = (_a = this.tip()) === null || _a === void 0 ? void 0 : _a.inlineParser;\n        if (ilparser) {\n            let last;\n            for (const match of ilparser.getMatches()) {\n                if (last && last.annot === \"str\" && match.annot === \"str\" &&\n                    match.startpos === last.endpos + 1) {\n                    // just extend last str:\n                    this.matches[this.matches.length - 1].endpos = match.endpos;\n                }\n                else {\n                    this.matches.push(match);\n                }\n                last = match;\n            }\n        }\n    }\n    closeUnmatchedContainers() {\n        const lastMatched = this.lastMatchedContainer;\n        // close unmatched containers\n        let tip = this.tip();\n        while (tip &&\n            this.containers.length - 1 > lastMatched) {\n            tip.close();\n            tip = this.tip();\n        }\n    }\n    addContainer(container, skipCloseUnmatched) {\n        if (!skipCloseUnmatched) {\n            this.closeUnmatchedContainers();\n        }\n        // close containers that can't contain this one:\n        let tip = this.tip();\n        while (tip && tip.content !== container.type) {\n            tip.close();\n            tip = this.tip();\n        }\n        if (container.content === ContentType.Inline) {\n            container.inlineParser =\n                new inline_1.InlineParser(this.subject, { warn: this.warn });\n        }\n        this.containers.push(container);\n        return container;\n    }\n    // move parser position to first nonspace, adjusting indent\n    skipSpace() {\n        const subject = this.subject;\n        let newpos = this.pos;\n        while (isSpaceOrTab(subject.codePointAt(newpos)))\n            newpos++;\n        this.indent = newpos - this.startline;\n        this.pos = newpos;\n    }\n    // set this.starteol, this.endeol\n    getEol() {\n        const subject = this.subject;\n        let i = this.pos;\n        while (!isEolChar(subject.codePointAt(i))) {\n            i++;\n        }\n        this.starteol = i;\n        if (subject.codePointAt(i) === 13 && subject.codePointAt(i + 1) === 10) {\n            this.endeol = i + 1;\n        }\n        else {\n            this.endeol = i;\n        }\n    }\n    parseTableCell() {\n        const inlineParser = new inline_1.InlineParser(this.subject, { warn: this.warn });\n        let cellComplete = false;\n        const sp = this.pos - 1; // we start on char after |\n        let ep = sp; // for now\n        this.skipSpace();\n        while (!cellComplete) {\n            const m = this.find(pattNextBarOrTicks);\n            if (m === null) {\n                cellComplete = false;\n                break;\n            }\n            else { // we matched a | or `+\n                const nextbar = m.endpos;\n                if (this.subject.charAt(nextbar) === \"`\" ||\n                    inlineParser.inVerbatim()) {\n                    inlineParser.feed(this.pos, nextbar);\n                }\n                else if (this.subject.charAt(nextbar - 1) === \"\\\\\") { // escaped |\n                    inlineParser.feed(this.pos, nextbar);\n                }\n                else {\n                    inlineParser.feed(this.pos, nextbar - 1);\n                    ep = nextbar;\n                    cellComplete = true;\n                }\n                this.pos = nextbar + 1;\n            }\n        }\n        if (cellComplete) {\n            const cellMatches = inlineParser.getMatches();\n            return { startpos: sp, endpos: ep, matches: cellMatches };\n        }\n        else {\n            return null;\n        }\n    }\n    // Parameters are start and end position\n    parseTableRow(sp, ep) {\n        const origMatches = this.matches.length; // so we can rewind\n        const startpos = this.pos;\n        this.addMatch(sp, sp, \"+row\");\n        // skip | and any initial space in the cell:\n        this.pos++;\n        // check to see if we have a separator line\n        const seps = [];\n        let p = this.pos;\n        let sepfound = false;\n        while (!sepfound) {\n            const m = (0, find_1.find)(this.subject, pattRowSep, p);\n            if (m !== null) {\n                const [left, right, trailing] = m.captures;\n                let st = \"separator_default\";\n                if (left.length > 0 && right.length > 0) {\n                    st = \"separator_center\";\n                }\n                else if (right.length > 0) {\n                    st = \"separator_right\";\n                }\n                else if (left.length > 0) {\n                    st = \"separator_left\";\n                }\n                seps.push({\n                    startpos: m.startpos, endpos: m.endpos - trailing.length,\n                    annot: st\n                });\n                p = m.endpos + 1;\n                if (p === this.starteol) {\n                    sepfound = true;\n                    break;\n                }\n            }\n            else {\n                break;\n            }\n        }\n        if (sepfound) {\n            for (const match of seps) {\n                this.addMatch(match.startpos, match.endpos, match.annot);\n            }\n            this.addMatch(this.starteol - 1, this.starteol - 1, \"-row\");\n            this.pos = this.starteol;\n            this.finishedLine = true;\n            return true;\n        }\n        // if we get here, we're parsing a regular row\n        while (this.pos <= ep) {\n            const cell = this.parseTableCell();\n            if (cell !== null) {\n                // add matches for cell\n                this.addMatch(cell.startpos, cell.startpos, \"+cell\");\n                const cellMatches = cell.matches;\n                cellMatches.forEach((match, i) => {\n                    const s = match.startpos;\n                    let e = match.endpos;\n                    if (i === cellMatches.length - 1 && match.annot === \"str\") {\n                        // strip trailing space\n                        while (this.subject.codePointAt(e) === 32 && e >= s) {\n                            e = e - 1;\n                        }\n                    }\n                    this.addMatch(s, e, match.annot);\n                });\n                this.addMatch(cell.endpos, cell.endpos, \"-cell\");\n            }\n            else {\n                // rewind, this is not a valid table row\n                this.pos = startpos;\n                while (this.matches.length > origMatches) {\n                    this.matches.pop();\n                }\n                return false;\n            }\n        }\n        // if we get here, we've parsed a table row\n        this.addMatch(this.pos, this.pos, \"-row\");\n        this.pos = this.starteol;\n        this.finishedLine = true;\n        return true;\n    }\n    // Returns an iterator over events.  At each iteration, the iterator\n    // returns three values: start byte position, end byte position,\n    // and annotation.\n    [Symbol.iterator]() {\n        const specs = this.specs;\n        const subjectlen = this.subject.length;\n        this.returned = 0;\n        const self = this;\n        return {\n            next() {\n                while (self.pos < subjectlen) {\n                    // return any accumulated matches\n                    if (self.matches.length > 0 && self.returned < self.matches.length) {\n                        self.returned = self.returned + 1;\n                        return {\n                            value: self.matches[self.returned - 1],\n                            done: false\n                        };\n                    }\n                    self.indent = 0;\n                    self.startline = self.pos;\n                    self.finishedLine = false;\n                    self.getEol();\n                    // check open containers for continuation\n                    self.lastMatchedContainer = -1;\n                    let idx = 0;\n                    while (idx < self.containers.length) {\n                        const container = self.containers[idx];\n                        // skip any indentation\n                        self.skipSpace();\n                        if (container.continue(container)) {\n                            self.lastMatchedContainer = idx;\n                        }\n                        else {\n                            break;\n                        }\n                        idx = idx + 1;\n                    }\n                    // if we hit a close fence, we can move to next line\n                    if (self.finishedLine) {\n                        while (self.containers.length > 0 &&\n                            self.lastMatchedContainer < self.containers.length - 1) {\n                            const tip = self.tip();\n                            if (tip) {\n                                tip.close();\n                            }\n                        }\n                    }\n                    if (!self.finishedLine) {\n                        // check for new containers\n                        self.skipSpace();\n                        let isBlank = (self.pos === self.starteol);\n                        let newStarts = false;\n                        let lastMatch = self.containers[self.lastMatchedContainer];\n                        let checkStarts = !isBlank &&\n                            (!lastMatch ||\n                                lastMatch.content === ContentType.Block ||\n                                lastMatch.content === ContentType.ListItem) &&\n                            !self.find(pattWord); // optimization\n                        while (checkStarts) {\n                            checkStarts = false;\n                            for (const spec of specs) {\n                                if ((!lastMatch && spec.type === ContentType.Block) ||\n                                    (lastMatch && lastMatch.content === spec.type)) {\n                                    if (spec.open(spec)) {\n                                        const tip = self.tip();\n                                        if (tip) {\n                                            self.lastMatchedContainer = self.containers.length - 1;\n                                            lastMatch = self.containers[self.lastMatchedContainer];\n                                            if (self.finishedLine) {\n                                                checkStarts = false;\n                                            }\n                                            else {\n                                                self.skipSpace();\n                                                newStarts = true;\n                                                checkStarts = spec.content === ContentType.Block ||\n                                                    spec.content === ContentType.ListItem;\n                                            }\n                                        }\n                                        else {\n                                            throw (new Error(\"No tip after opening container\"));\n                                        }\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        if (!self.finishedLine) {\n                            // handle remaining content\n                            self.skipSpace();\n                            isBlank = (self.pos === self.starteol);\n                            let tip = self.tip();\n                            const isLazy = !isBlank &&\n                                !newStarts &&\n                                self.lastMatchedContainer < self.containers.length - 1 &&\n                                tip &&\n                                tip.content === ContentType.Inline;\n                            if (!isLazy) {\n                                self.closeUnmatchedContainers();\n                            }\n                            tip = self.tip();\n                            // add para by default if there's text\n                            if (!tip || tip.content === ContentType.Block) {\n                                if (isBlank) {\n                                    if (!newStarts) {\n                                        // need to track these for tight/loose lists\n                                        self.addMatch(self.pos, self.endeol, \"blankline\");\n                                    }\n                                }\n                                else {\n                                    self.paraSpec.open(self.paraSpec);\n                                    tip = self.tip();\n                                    if (tip) {\n                                        tip.inlineParser = new inline_1.InlineParser(self.subject, self.options);\n                                    }\n                                }\n                            }\n                            if (tip && tip.content === ContentType.Text) {\n                                let startpos = self.pos;\n                                if (tip.indent !== null && self.indent > tip.indent) {\n                                    // get back the leading spaces we gobbled\n                                    startpos = startpos - (self.indent - tip.indent);\n                                }\n                                self.addMatch(startpos, self.endeol, \"str\");\n                            }\n                            else if (tip && tip.content === ContentType.Inline &&\n                                !isBlank && tip.inlineParser) {\n                                tip.inlineParser.feed(self.pos, self.endeol);\n                            }\n                        }\n                    }\n                    self.pos = (self.endeol || self.pos) + 1;\n                }\n                // close all remaining containers\n                self.lastMatchedContainer = -1;\n                self.closeUnmatchedContainers();\n                // return any accumulated matches\n                if (self.matches.length > 0 && self.returned < self.matches.length) {\n                    self.returned = self.returned + 1;\n                    return { value: self.matches[self.returned - 1], done: false };\n                }\n                // catch-all (should not be needed)\n                return {\n                    value: { startpos: self.pos, endpos: self.pos, annot: \"\" },\n                    done: true\n                };\n            }\n        };\n    }\n}\nconst parseEvents = function (input, options = {}) {\n    return new EventParser(input, options);\n};\nexports.parseEvents = parseEvents;\n", "\"use strict\";\n// Types defining the AST\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isCaption = exports.isRow = exports.isBlock = exports.isInline = void 0;\n/* Type predicates */\nconst blockTags = {\n    para: true,\n    heading: true,\n    block_quote: true,\n    thematic_break: true,\n    section: true,\n    div: true,\n    code_block: true,\n    raw_block: true,\n    bullet_list: true,\n    ordered_list: true,\n    task_list: true,\n    definition_list: true,\n    table: true,\n    reference: true,\n    footnote: true\n};\nfunction isBlock(node) {\n    return blockTags[node.tag] || false;\n}\nexports.isBlock = isBlock;\nconst inlineTags = {\n    str: true,\n    soft_break: true,\n    hard_break: true,\n    non_breaking_space: true,\n    symb: true,\n    verbatim: true,\n    raw_inline: true,\n    inline_math: true,\n    display_math: true,\n    url: true,\n    email: true,\n    footnote_reference: true,\n    smart_punctuation: true,\n    emph: true,\n    strong: true,\n    link: true,\n    image: true,\n    span: true,\n    mark: true,\n    superscript: true,\n    subscript: true,\n    insert: true,\n    delete: true,\n    double_quoted: true,\n    single_quoted: true,\n};\nfunction isInline(node) {\n    return inlineTags[node.tag] || false;\n}\nexports.isInline = isInline;\nfunction isRow(node) {\n    return (\"head\" in node);\n}\nexports.isRow = isRow;\nfunction isCaption(node) {\n    return (!(\"head\" in node));\n}\nexports.isCaption = isCaption;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isInline = exports.isCaption = exports.isRow = exports.isBlock = exports.getStringContent = exports.renderAST = exports.parse = void 0;\nconst block_1 = require(\"./block\");\nconst options_1 = require(\"./options\");\nconst ast_1 = require(\"./ast\");\nObject.defineProperty(exports, \"isRow\", { enumerable: true, get: function () { return ast_1.isRow; } });\nObject.defineProperty(exports, \"isBlock\", { enumerable: true, get: function () { return ast_1.isBlock; } });\nObject.defineProperty(exports, \"isCaption\", { enumerable: true, get: function () { return ast_1.isCaption; } });\nObject.defineProperty(exports, \"isInline\", { enumerable: true, get: function () { return ast_1.isInline; } });\nconst getStringContent = function (node) {\n    const buffer = [];\n    addStringContent(node, buffer);\n    return buffer.join(\"\");\n};\nexports.getStringContent = getStringContent;\nconst addStringContent = function (node, buffer) {\n    if (\"text\" in node) {\n        buffer.push(node.text);\n    }\n    else if (\"tag\" in node &&\n        (node.tag === \"soft_break\" || node.tag === \"hard_break\")) {\n        buffer.push(\"\\n\");\n    }\n    else if (\"children\" in node) {\n        for (const child of node.children) {\n            addStringContent(child, buffer);\n        }\n    }\n};\n// in verbatim text, trim one space next to ` at beginning or end:\nconst trimVerbatim = function (s) {\n    return s\n        .replace(/^ `/, \"`\")\n        .replace(/` $/, \"`\");\n};\nconst romanDigits = {\n    i: 1,\n    v: 5,\n    x: 10,\n    l: 50,\n    c: 100,\n    d: 500,\n    m: 1000,\n    I: 1,\n    V: 5,\n    X: 10,\n    L: 50,\n    C: 100,\n    D: 500,\n    M: 1000\n};\nconst romanToNumber = function (s) {\n    // go backwards through the digits\n    let total = 0;\n    let prevdigit = 0;\n    let i = s.length - 1;\n    while (i >= 0) {\n        const c = s.charAt(i);\n        const n = romanDigits[c];\n        if (!n) {\n            throw (new Error(\"Encountered bad character in roman numeral \" + s));\n        }\n        if (n < prevdigit) { // e.g. ix\n            total = total - n;\n        }\n        else {\n            total = total + n;\n        }\n        prevdigit = n;\n        i = i - 1;\n    }\n    return total;\n};\nconst getListStart = function (marker, style) {\n    const numtype = style.replace(/[().]/g, \"\");\n    const s = marker.replace(/[().]/g, \"\");\n    switch (numtype) {\n        case \"1\": return parseInt(s, 10);\n        case \"A\": return ((s.codePointAt(0) || 65) - 65 + 1); // 65 = \"A\"\n        case \"a\": return ((s.codePointAt(0) || 97) - 97 + 1); // 97 = \"a\"\n        case \"I\": return romanToNumber(s);\n        case \"i\": return romanToNumber(s);\n    }\n    return undefined;\n};\n// Parsing ocntext:\nvar Context;\n(function (Context) {\n    Context[Context[\"Normal\"] = 0] = \"Normal\";\n    Context[Context[\"Verbatim\"] = 1] = \"Verbatim\";\n    Context[Context[\"Literal\"] = 2] = \"Literal\"; // gather str, soft_break, hard_break in accumulatedText\n})(Context || (Context = {}));\nconst normalizeLabel = function (label) {\n    return label.trim().replace(/[ \\t\\r\\n]+/g, \" \");\n};\nconst parse = function (input, options = {}) {\n    const linestarts = [-1];\n    if (options.sourcePositions) { // construct map of newline positions\n        for (let i = 0; i < input.length; i++) {\n            if (input[i] === \"\\n\") {\n                linestarts.push(i);\n            }\n        }\n    }\n    // use binary search on linestarts to find line number and col\n    const getSourceLoc = function (pos) {\n        const numlines = linestarts.length;\n        let bottom = 0;\n        let top = numlines - 1;\n        let line = 0;\n        let col = 0;\n        while (!line) {\n            const mid = bottom + ~~((top - bottom) / 2);\n            if (linestarts[mid] > pos) {\n                top = mid;\n            }\n            else if (linestarts[mid] <= pos) {\n                if (mid === top || linestarts[mid + 1] > pos) {\n                    line = mid + 1;\n                    col = pos - linestarts[mid];\n                }\n                else {\n                    if (bottom === mid && bottom < top) {\n                        bottom = mid + 1;\n                    }\n                    else {\n                        bottom = mid;\n                    }\n                }\n            }\n        }\n        return { line: line, col: col, offset: pos };\n    };\n    let context = Context.Normal;\n    let accumulatedText = \"\";\n    const references = {};\n    const autoReferences = {};\n    const footnotes = {};\n    const identifiers = {}; // identifiers used\n    const blockAttributes = {}; // accumulated block attributes\n    let listDepth = 0;\n    const parser = (0, block_1.parseEvents)(input, options);\n    const warn = options.warn || (() => { });\n    const addBlockAttributes = function (container) {\n        if (Object.keys(blockAttributes).length > 0) {\n            container.attributes = container.attributes || {};\n            for (const k in blockAttributes) {\n                container.attributes[k] = blockAttributes[k];\n                delete blockAttributes[k];\n            }\n        }\n    };\n    const getUniqueIdentifier = function (s) {\n        const base = s.replace(/[\\]\\[~!@#$%^&*(){}`,.<>\\\\|=+/?\\s]+/g, \" \")\n            .trim()\n            .replace(/ +/g, \"-\");\n        let i = 0;\n        let ident = base;\n        // generate unique id\n        while (!ident || identifiers[ident]) {\n            i = i + 1;\n            ident = (base || \"s\") + \"-\" + i;\n        }\n        return ident;\n    };\n    const pushContainer = function (pos) {\n        const container = {\n            children: [],\n            data: {},\n            pos: pos,\n            attributes: undefined\n        };\n        addBlockAttributes(container);\n        containers.push(container);\n    };\n    const popContainer = function (pos) {\n        const node = containers.pop();\n        if (!node) {\n            throw (new Error(\"Container stack is empty (popContainer)\"));\n        }\n        if (pos && node.pos) {\n            node.pos.end = pos.end;\n        }\n        return node;\n    };\n    const topContainer = function () {\n        if (containers.length > 0) {\n            return containers[containers.length - 1];\n        }\n        else {\n            throw (new Error(\"Container stack is empty (topContainer)\"));\n        }\n    };\n    // points to last child of top container, or top container if\n    // it doesn't have children\n    const getTip = function () {\n        const top = topContainer();\n        if (top.children.length > 0) {\n            return top.children[top.children.length - 1];\n        }\n        else {\n            return top;\n        }\n    };\n    const addChildToTip = function (child) {\n        if (containers.length > 0) {\n            const tip = containers[containers.length - 1];\n            tip.children.push(child);\n        }\n    };\n    const handlers = { str: (suffixes, startpos, endpos, pos) => {\n            const txt = input.substring(startpos, endpos + 1);\n            if (context === Context.Normal) {\n                addChildToTip({ tag: \"str\", text: txt, pos: pos });\n            }\n            else {\n                accumulatedText += txt;\n            }\n        },\n        soft_break: (suffixes, startpos, endpos, pos) => {\n            if (context === Context.Normal) {\n                addChildToTip({ tag: \"soft_break\", pos: pos });\n            }\n            else {\n                accumulatedText += \"\\n\";\n            }\n        },\n        escape: (suffixes, startpos, endpos, pos) => {\n            if (context === Context.Verbatim) {\n                accumulatedText += \"\\\\\";\n            }\n        },\n        hard_break: (suffixes, startpos, endpos, pos) => {\n            if (context === Context.Normal) {\n                addChildToTip({ tag: \"hard_break\", pos: pos });\n            }\n            else {\n                accumulatedText += \"\\n\";\n            }\n        },\n        non_breaking_space: (suffixes, startpos, endpos, pos) => {\n            if (context === Context.Verbatim) {\n                accumulatedText += \"\\\\ \";\n            }\n            else {\n                addChildToTip({ tag: \"non_breaking_space\", pos: pos });\n            }\n        },\n        symb: (suffixes, startpos, endpos, pos) => {\n            if (context === Context.Normal) {\n                const alias = input.substring(startpos + 1, endpos);\n                addChildToTip({ tag: \"symb\", alias: alias, pos: pos });\n            }\n            else {\n                const txt = input.substring(startpos, endpos + 1);\n                accumulatedText += txt;\n            }\n        },\n        footnote_reference: (suffixes, startpos, endpos, pos) => {\n            const fnref = input.substring(startpos + 2, endpos);\n            addChildToTip({ tag: \"footnote_reference\",\n                text: normalizeLabel(fnref), pos: pos });\n        },\n        [\"+reference_definition\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-reference_definition\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            const lab = normalizeLabel(node.data.key);\n            const r = {\n                tag: \"reference\",\n                label: lab,\n                destination: node.data.value || \"\",\n                attributes: node.attributes,\n                pos: node.pos,\n            };\n            if (node.data.key) {\n                references[lab] = r;\n            }\n        },\n        reference_key: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.key = input.substring(startpos + 1, endpos);\n            topContainer().data.value = \"\";\n        },\n        reference_value: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.value =\n                topContainer().data.value + input.substring(startpos, endpos + 1);\n        },\n        [\"+emph\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-emph\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"emph\", children: node.children, pos: node.pos });\n        },\n        [\"+strong\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-strong\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"strong\", children: node.children, pos: node.pos });\n        },\n        [\"+span\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-span\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"span\", children: node.children, pos: node.pos });\n        },\n        [\"+mark\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-mark\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"mark\", children: node.children, pos: node.pos });\n        },\n        [\"+superscript\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-superscript\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"superscript\", children: node.children, pos: node.pos });\n        },\n        [\"+subscript\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-subscript\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"subscript\", children: node.children, pos: node.pos });\n        },\n        [\"+delete\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-delete\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"delete\", children: node.children, pos: node.pos });\n        },\n        [\"+insert\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-insert\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"insert\", children: node.children, pos: node.pos });\n        },\n        [\"+double_quoted\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-double_quoted\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"double_quoted\", children: node.children, pos: node.pos });\n        },\n        [\"+single_quoted\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-single_quoted\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"single_quoted\", children: node.children, pos: node.pos });\n        },\n        [\"+attributes\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-attributes\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.attributes && containers.length > 0) {\n                if (node.attributes.id) {\n                    identifiers[node.attributes.id] = true;\n                }\n                let tip = getTip();\n                if (tip === topContainer()) {\n                    // no inline children to add the attribute to...\n                    return;\n                }\n                let endsWithSpace = false;\n                if (\"tag\" in tip && tip.tag === \"str\") { // bare word\n                    // split off last consecutive word of string\n                    // and attach attributes to it\n                    const m = tip.text.match(/[^\\s]+$/);\n                    if (m && m.index && m.index > 0) {\n                        let wordpos;\n                        if (tip.pos) {\n                            const origend = tip.pos.end;\n                            tip.pos.end = {\n                                line: origend.line,\n                                col: origend.col - m[0].length,\n                                offset: origend.offset - m[0].length\n                            };\n                            wordpos = {\n                                start: {\n                                    line: origend.line,\n                                    col: origend.col - m[0].length + 1,\n                                    offset: origend.offset - m[0].length + 1\n                                },\n                                end: origend\n                            };\n                        }\n                        tip.text = tip.text.substring(0, m.index);\n                        addChildToTip({ tag: \"str\", text: m[0], pos: wordpos });\n                    }\n                    else if (!m) {\n                        endsWithSpace = true;\n                    }\n                }\n                tip = getTip(); // get new tip, which may be the new element\n                if (endsWithSpace) {\n                    warn(new options_1.Warning(\"Ignoring unattached attribute\", options.sourcePositions ?\n                        getSourceLoc(startpos) : startpos));\n                    return;\n                }\n                if (!tip.attributes) {\n                    tip.attributes = {};\n                }\n                for (const k in node.attributes) {\n                    if (k === \"class\") {\n                        if (tip.attributes[k]) {\n                            tip.attributes[k] = tip.attributes[k] +\n                                \" \" + node.attributes[k];\n                        }\n                        else {\n                            tip.attributes[k] = node.attributes[k];\n                        }\n                    }\n                    else {\n                        tip.attributes[k] = node.attributes[k];\n                    }\n                }\n            }\n        },\n        [\"+block_attributes\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-block_attributes\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.attributes && containers.length > 0) {\n                if (node.attributes.id) {\n                    identifiers[node.attributes.id] = true;\n                }\n                for (const k in node.attributes) {\n                    if (k === \"class\") {\n                        if (blockAttributes[k]) {\n                            blockAttributes[k] = blockAttributes[k] +\n                                \" \" + node.attributes[k];\n                        }\n                        else {\n                            blockAttributes[k] = node.attributes[k];\n                        }\n                    }\n                    else {\n                        blockAttributes[k] = node.attributes[k];\n                    }\n                }\n            }\n        },\n        class: (suffixes, startpos, endpos, pos) => {\n            const top = topContainer();\n            const cl = input.substring(startpos, endpos + 1);\n            if (!top.attributes) {\n                top.attributes = {};\n            }\n            if (top.attributes.class) {\n                top.attributes.class = top.attributes.class + \" \" + cl;\n            }\n            else {\n                top.attributes.class = cl;\n            }\n        },\n        id: (suffixes, startpos, endpos, pos) => {\n            const top = topContainer();\n            const id = input.substring(startpos, endpos + 1);\n            if (!top.attributes) {\n                top.attributes = { id: id };\n            }\n            else {\n                top.attributes.id = id;\n            }\n        },\n        key: (suffixes, startpos, endpos, pos) => {\n            const top = topContainer();\n            const key = input.substring(startpos, endpos + 1);\n            top.data.key = key;\n            if (!top.attributes) {\n                top.attributes = {};\n            }\n            top.attributes[top.data.key] = \"\";\n        },\n        value: (suffixes, startpos, endpos, pos) => {\n            const top = topContainer();\n            const val = input.substring(startpos, endpos + 1)\n                .replace(/[ \\r\\n]+/g, \" \") // collapse interior whitespace\n                .replace(/\\\\([.,\\\\/#!$%^&*;:{}=\\-_`~+[\\]()'\"?|])/g, \"$1\");\n            // resolve backslash escapes\n            if (!top.attributes) {\n                top.attributes = {};\n            }\n            if (top.data.key) {\n                top.attributes[top.data.key] = // append multiple values to key\n                    top.attributes[top.data.key] + val;\n            }\n            else {\n                throw (new Error(\"Encountered value without key\"));\n            }\n        },\n        [\"+linktext\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.isimage = false;\n        },\n        [\"-linktext\"]: (suffixes, startpos, endpos, pos) => {\n            // we don't pop yet, but wait for -destination\n        },\n        [\"+imagetext\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.isimage = true;\n        },\n        [\"-imagetext\"]: (suffixes, startpos, endpos, pos) => {\n            // we don't pop yet, but wait for -destination\n        },\n        [\"+destination\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Literal;\n        },\n        [\"-destination\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos); // the container added by +linktext/+imagetext\n            addChildToTip({\n                tag: node.data.isimage ? \"image\" : \"link\",\n                destination: accumulatedText.replace(/[\\r\\n]/g, \"\"),\n                children: node.children,\n                pos: node.pos\n            });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"+reference\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Literal;\n        },\n        [\"-reference\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos); // the container added by +linktext\n            let ref = accumulatedText;\n            if (ref.length === 0) {\n                ref = getStringContent(node);\n            }\n            addChildToTip({\n                tag: node.data.isimage ? \"image\" : \"link\",\n                reference: normalizeLabel(ref),\n                children: node.children,\n                pos: node.pos\n            });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"+verbatim\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Verbatim;\n            pushContainer(pos);\n        },\n        [\"-verbatim\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"verbatim\",\n                text: trimVerbatim(accumulatedText),\n                pos: node.pos\n            });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        raw_format: (suffixes, startpos, endpos, pos) => {\n            const format = input.substring(startpos, endpos + 1)\n                .replace(/^\\{?=/, \"\")\n                .replace(/\\}$/, \"\");\n            const top = topContainer();\n            if (context === Context.Verbatim) { // in a code block\n                top.data.format = format;\n            }\n            else {\n                const tip = top.children[top.children.length - 1];\n                if (tip && \"tag\" in tip && tip.tag === \"verbatim\") {\n                    tip.tag = \"raw_inline\";\n                    tip.format = format;\n                }\n                else {\n                    throw (new Error(\"raw_format is not after verbatim or code_block.\"));\n                }\n            }\n        },\n        [\"+display_math\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Verbatim;\n            pushContainer(pos);\n        },\n        [\"+inline_math\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Verbatim;\n            pushContainer(pos);\n        },\n        [\"-display_math\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"display_math\",\n                text: trimVerbatim(accumulatedText),\n                pos: node.pos\n            });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"-inline_math\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"inline_math\",\n                text: trimVerbatim(accumulatedText),\n                pos: node.pos\n            });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"+url\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Literal;\n            pushContainer(pos);\n        },\n        [\"-url\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"url\",\n                text: accumulatedText.replace(/[\\r\\n]/g, \"\"),\n                pos: node.pos });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"+email\"]: (suffixes, startpos, endpos, pos) => {\n            context = Context.Literal;\n            pushContainer(pos);\n        },\n        [\"-email\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({ tag: \"email\",\n                text: accumulatedText.replace(/[\\r\\n]/g, \"\"),\n                pos: node.pos });\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        [\"+para\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-para\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"para\",\n                children: node.children,\n                attributes: node.attributes,\n                pos: node.pos\n            });\n        },\n        [\"+heading\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.level = 1 + endpos - startpos;\n        },\n        [\"-heading\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (!node.attributes) {\n                node.attributes = {};\n            }\n            if (!node.autoAttributes) {\n                node.autoAttributes = {};\n            }\n            const headingStr = getStringContent(node).trim();\n            if (!node.attributes.id) {\n                node.autoAttributes.id = getUniqueIdentifier(headingStr);\n                identifiers[node.autoAttributes.id] = true;\n            }\n            // add implicit heading reference\n            const lab = normalizeLabel(headingStr);\n            if (!references[lab] && !autoReferences[lab]) {\n                autoReferences[lab] = {\n                    tag: \"reference\",\n                    label: lab,\n                    destination: \"#\" + (node.attributes.id || node.autoAttributes.id)\n                };\n            }\n            // add section structure\n            let pnode = topContainer();\n            if (pnode.data.headinglevel !== undefined) { // doc or section\n                while (pnode && pnode.data.headinglevel !== undefined &&\n                    pnode.data.headinglevel >= node.data.level) {\n                    // close sections til we get to the right level\n                    pnode = popContainer(pos);\n                    addChildToTip({\n                        tag: \"section\",\n                        children: pnode.children,\n                        attributes: pnode.attributes,\n                        autoAttributes: pnode.autoAttributes,\n                        pos: pnode.pos\n                    });\n                    pnode = topContainer();\n                }\n                // now we know that pnode.data.headinglevel is either\n                // undefined or < node.data.level\n                pushContainer(pos);\n                topContainer().data.headinglevel = node.data.level;\n                // move id attribute from heading to section\n                if (node.autoAttributes && node.autoAttributes.id) {\n                    topContainer().autoAttributes = node.autoAttributes;\n                    delete node.autoAttributes;\n                }\n                if (node.attributes && node.attributes.id) {\n                    topContainer().attributes = node.attributes;\n                    delete node.attributes;\n                }\n            }\n            addChildToTip({\n                tag: \"heading\",\n                level: node.data.level,\n                children: node.children,\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            });\n        },\n        [\"+list\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.styles = suffixes;\n            topContainer().data.blanklines = false;\n            topContainer().data.tight = true;\n            listDepth++;\n        },\n        [\"-list\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            // take first if ambiguous\n            const listStyle = node.data.styles[0];\n            if (!listStyle) {\n                throw (new Error(\"No style defined for list\"));\n            }\n            const listStart = getListStart(node.data.firstMarker, listStyle);\n            if (listStyle === \":\") {\n                addChildToTip({\n                    tag: \"definition_list\",\n                    children: node.children,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            else if (listStyle === \"X\") {\n                addChildToTip({\n                    tag: \"task_list\",\n                    tight: node.data.tight,\n                    children: node.children,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            else if (listStyle === \"+\" || listStyle === \"*\" ||\n                listStyle === \"-\") {\n                addChildToTip({\n                    tag: \"bullet_list\",\n                    tight: node.data.tight,\n                    style: listStyle,\n                    children: node.children,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            else {\n                addChildToTip({\n                    tag: \"ordered_list\",\n                    style: listStyle,\n                    children: node.children,\n                    start: listStart,\n                    tight: node.data.tight,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            listDepth--;\n        },\n        [\"+list_item\"]: (suffixes, startpos, endpos, pos) => {\n            // narrow styles\n            if (suffixes.length < topContainer().data.styles.length) {\n                topContainer().data.styles = suffixes;\n            }\n            if (!topContainer().data.firstMarker) {\n                topContainer().data.firstMarker =\n                    input.substring(startpos, endpos + 1);\n            }\n            pushContainer(pos);\n            if (suffixes.length === 1 && suffixes[0] === \":\") {\n                topContainer().data.definitionList = true;\n            }\n        },\n        [\"-list_item\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.data.definitionList) {\n                if (node.children[0] && node.children[0].tag === \"para\") {\n                    const term = {\n                        tag: \"term\",\n                        children: node.children[0].children\n                    };\n                    node.children.shift();\n                    const definition = {\n                        tag: \"definition\",\n                        children: node.children\n                    };\n                    addChildToTip({\n                        tag: \"definition_list_item\",\n                        children: [term, definition],\n                        attributes: node.attributes,\n                        autoAttributes: node.autoAttributes,\n                        pos: node.pos\n                    });\n                }\n                else {\n                    const term = { tag: \"term\", children: [] };\n                    const definition = {\n                        tag: \"definition\",\n                        children: node.children\n                    };\n                    addChildToTip({\n                        tag: \"definition_list_item\",\n                        children: [term, definition],\n                        attributes: node.attributes,\n                        autoAttributes: node.autoAttributes,\n                        pos: node.pos\n                    });\n                }\n            }\n            else if (node.data.checkbox) {\n                addChildToTip({\n                    tag: \"task_list_item\",\n                    children: node.children,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    checkbox: node.data.checkbox,\n                    pos: node.pos\n                });\n            }\n            else {\n                addChildToTip({\n                    tag: \"list_item\",\n                    children: node.children,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n        },\n        checkbox_checked: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.checkbox = \"checked\";\n        },\n        checkbox_unchecked: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.checkbox = \"unchecked\";\n        },\n        [\"+block_quote\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-block_quote\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"block_quote\",\n                children: node.children,\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            });\n        },\n        [\"+table\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.aligns = [];\n        },\n        [\"-table\"]: (suffixes, startpos, endpos, pos) => {\n            var _a;\n            const node = popContainer(pos);\n            const rows = node.children;\n            let caption = {\n                tag: \"caption\",\n                children: []\n            };\n            if (((_a = rows[0]) === null || _a === void 0 ? void 0 : _a.tag) === \"caption\") {\n                caption = rows.shift();\n            }\n            addChildToTip({\n                tag: \"table\",\n                children: [caption, ...rows],\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            });\n        },\n        [\"+row\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            topContainer().data.aligns = [];\n        },\n        [\"-row\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.children.length === 0) { // a separator line\n                // set table aligns, so they can be propagated to future rows\n                topContainer().data.aligns = node.data.aligns;\n                const tip = getTip();\n                if (tip && \"tag\" in tip && tip.tag === \"row\") { // prev row of table\n                    tip.head = true;\n                    for (let i = 0; i < tip.children.length; i++) {\n                        tip.children[i].head = true;\n                        tip.children[i].align = node.data.aligns[i] || \"default\";\n                    }\n                }\n            }\n            else {\n                // get aligns from table\n                node.data.aligns = [];\n                for (let i = 0; i < node.children.length; i++) {\n                    node.children[i].align = topContainer().data.aligns[i] || \"default\";\n                }\n                addChildToTip({\n                    tag: \"row\",\n                    children: node.children,\n                    head: false,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n        },\n        separator_default: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.aligns.push(\"default\");\n        },\n        separator_left: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.aligns.push(\"left\");\n        },\n        separator_right: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.aligns.push(\"right\");\n        },\n        separator_center: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.aligns.push(\"center\");\n        },\n        [\"+cell\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-cell\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"cell\",\n                children: node.children,\n                head: false,\n                align: \"default\",\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            });\n        },\n        [\"+caption\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-caption\"]: (suffixes, startpos, endpos, pos) => {\n            var _a;\n            const node = popContainer(pos);\n            const tip = getTip();\n            if (!tip || (\"tag\" in tip && tip.tag !== \"table\")) {\n                return;\n            }\n            const capt = {\n                tag: \"caption\",\n                children: node.children,\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            };\n            if (((_a = tip.children[0]) === null || _a === void 0 ? void 0 : _a.tag) === \"caption\") {\n                tip.children[0] = capt;\n            }\n        },\n        [\"+footnote\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-footnote\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.data.label) {\n                const lab = normalizeLabel(node.data.label);\n                footnotes[lab] =\n                    {\n                        tag: \"footnote\",\n                        label: lab || \"\",\n                        children: node.children,\n                        attributes: node.attributes,\n                        autoAttributes: node.autoAttributes,\n                        pos: node.pos\n                    };\n            }\n            else {\n                warn(new options_1.Warning(\"Ignoring footnote without a label.\", options.sourcePositions ?\n                    getSourceLoc(endpos) : endpos));\n            }\n        },\n        note_label: (suffixes, startpos, endpos, pos) => {\n            topContainer().data.label =\n                input.substring(startpos, endpos + 1);\n        },\n        [\"+code_block\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n            context = Context.Verbatim;\n        },\n        [\"-code_block\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            if (node.data.format) {\n                addChildToTip({\n                    tag: \"raw_block\",\n                    format: node.data.format,\n                    text: accumulatedText,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            else {\n                addChildToTip({\n                    tag: \"code_block\",\n                    text: accumulatedText,\n                    lang: node.data.lang,\n                    attributes: node.attributes,\n                    autoAttributes: node.autoAttributes,\n                    pos: node.pos\n                });\n            }\n            context = Context.Normal;\n            accumulatedText = \"\";\n        },\n        code_language: (suffixes, startpos, endpos, pos) => {\n            const top = topContainer();\n            top.data.lang = input.substring(startpos, endpos + 1);\n        },\n        [\"+div\"]: (suffixes, startpos, endpos, pos) => {\n            pushContainer(pos);\n        },\n        [\"-div\"]: (suffixes, startpos, endpos, pos) => {\n            const node = popContainer(pos);\n            addChildToTip({\n                tag: \"div\",\n                children: node.children,\n                attributes: node.attributes,\n                autoAttributes: node.autoAttributes,\n                pos: node.pos\n            });\n        },\n        thematic_break: (suffixes, startpos, endpos, pos) => {\n            const tb = { tag: \"thematic_break\", pos: pos };\n            addBlockAttributes(tb);\n            addChildToTip(tb);\n        },\n        left_single_quote: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"left_single_quote\",\n                text: \"'\", pos: pos });\n        },\n        right_single_quote: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"right_single_quote\",\n                text: \"'\", pos: pos });\n        },\n        left_double_quote: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"left_double_quote\",\n                text: '\"', pos });\n        },\n        right_double_quote: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"right_double_quote\",\n                text: '\"', pos });\n        },\n        ellipses: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"ellipses\",\n                text: \"...\", pos });\n        },\n        en_dash: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"en_dash\",\n                text: \"--\", pos });\n        },\n        em_dash: (suffixes, startpos, endpos, pos) => {\n            addChildToTip({ tag: \"smart_punctuation\",\n                type: \"em_dash\",\n                text: \"---\", pos });\n        },\n        // We set the blanklines property of a parent list or\n        // sublist to aid with tight/loose list determination.\n        blankline: (suffixes, startpos, endpos, pos) => {\n            let listnode;\n            if (\"tight\" in topContainer().data) {\n                listnode = topContainer();\n            }\n            else if (containers.length >= 2 &&\n                \"tight\" in containers[containers.length - 2].data) {\n                listnode = containers[containers.length - 2];\n            }\n            if (listnode) {\n                listnode.data.blanklines = true;\n            }\n        } };\n    const handleEvent = function (containers, event) {\n        let sp;\n        let ep;\n        let pos;\n        if (options.sourcePositions) {\n            sp = getSourceLoc(event.startpos);\n            ep = getSourceLoc(event.endpos);\n            pos = { start: sp, end: ep };\n        }\n        let annot = event.annot;\n        let suffixes = [];\n        if (event.annot.includes(\"|\")) {\n            const parts = event.annot.split(\"|\");\n            annot = parts[0];\n            suffixes = parts.slice(1);\n        }\n        // The following is for tight/loose determination.\n        // If blanklines have already been seen, and we're\n        // about to process something other than a blankline,\n        // the end of a list or list item, or the start of\n        // a list, then it's a loose list.\n        if (listDepth > 0 && annot !== \"blankline\") {\n            let ln;\n            const top = topContainer();\n            if (top) {\n                if (top.data && \"tight\" in top.data) {\n                    ln = top;\n                }\n                else if (containers.length >= 2 &&\n                    \"tight\" in containers[containers.length - 2].data) {\n                    ln = containers[containers.length - 2];\n                }\n            }\n            if (ln) {\n                if (!/^[+-]list/.test(annot) && ln.data.blanklines) {\n                    ln.data.tight = false;\n                }\n                if (!/^[-+]list_item$/.test(annot)) {\n                    ln.data.blanklines = false;\n                }\n            }\n        }\n        const fn = handlers[annot];\n        if (fn) {\n            fn(suffixes, event.startpos, event.endpos, pos);\n        }\n    };\n    const containers = [{\n            children: [],\n            data: { headinglevel: 0 },\n            pos: {\n                start: { line: 0, col: 0, offset: 0 },\n                end: { line: 0, col: 0, offset: 0 }\n            }\n        }];\n    let lastpos = 0;\n    for (const event of parser) {\n        handleEvent(containers, event);\n        lastpos = event.endpos;\n    }\n    let lastloc;\n    if (options.sourcePositions) {\n        lastloc = getSourceLoc(lastpos);\n    }\n    // close any open sections:\n    let pnode = topContainer();\n    while (pnode && pnode.data.headinglevel > 0) {\n        // close sections til we get to the doc level\n        popContainer(lastloc && { start: lastloc, end: lastloc });\n        addChildToTip({\n            tag: \"section\",\n            children: pnode.children,\n            attributes: pnode.attributes,\n            autoAttributes: pnode.autoAttributes,\n            pos: pnode.pos\n        });\n        pnode = topContainer();\n    }\n    const doc = {\n        tag: \"doc\",\n        references: references,\n        autoReferences: autoReferences,\n        footnotes: footnotes,\n        children: containers[0].children,\n    };\n    if (containers[0].autoAttributes) {\n        doc.autoAttributes = containers[0].autoAttributes;\n    }\n    if (containers[0].attributes) {\n        doc.attributes = containers[0].attributes;\n    }\n    return doc;\n};\nexports.parse = parse;\nconst omitFields = {\n    children: true,\n    tag: true,\n    pos: true,\n    attributes: true,\n    autoAttributes: true,\n    references: true,\n    autoReferences: true,\n    footnotes: true\n};\nconst stringify = function (x) {\n    return JSON.stringify(x).replace(/\\\\\\n/g, \"\\\\n\");\n};\nconst renderAstNode = function (node, buff, indent) {\n    buff.push(\" \".repeat(indent));\n    if (indent > 128) {\n        buff.push(\"(((DEEPLY NESTED CONTENT OMITTED)))\\n\");\n        return;\n    }\n    buff.push(node.tag);\n    if (node.pos) {\n        buff.push(` (${node.pos.start.line}:${node.pos.start.col}:${node.pos.start.offset}-${node.pos.end.line}:${node.pos.end.col}:${node.pos.end.offset})`);\n    }\n    for (const k in node) {\n        if (!omitFields[k]) {\n            const v = node[k];\n            if (v !== undefined && v !== null) {\n                buff.push(` ${k}=${stringify(v)}`);\n            }\n        }\n    }\n    if (node.attributes) {\n        for (const k in node.attributes) {\n            buff.push(` ${k}=${stringify(node.attributes[k])}`);\n        }\n    }\n    buff.push(\"\\n\");\n    if (node.children) {\n        for (const child of node.children) {\n            renderAstNode(child, buff, indent + 2);\n        }\n    }\n};\n// Render an AST in human-readable form, with indentation\n// showing the hierarchy.\nconst renderAST = function (doc) {\n    const buff = [];\n    renderAstNode(doc, buff, 0);\n    if (Object.keys(doc.references).length > 0) {\n        buff.push(\"references\\n\");\n        for (const k in doc.references) {\n            buff.push(`  [${stringify(k)}] =\\n`);\n            renderAstNode(doc.references[k], buff, 4);\n        }\n    }\n    if (Object.keys(doc.footnotes).length > 0) {\n        buff.push(\"footnotes\\n\");\n        for (const k in doc.footnotes) {\n            buff.push(`  [${stringify(k)}] =\\n`);\n            renderAstNode(doc.footnotes[k], buff, 4);\n        }\n    }\n    return buff.join(\"\");\n};\nexports.renderAST = renderAST;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTMLRenderer = exports.renderHTML = void 0;\nconst parse_1 = require(\"./parse\");\nconst options_1 = require(\"./options\");\nconst reNeedsEscape = /[&<>]/;\nconst reNeedsEscapeAttr = /[&<>\"]/;\nclass HTMLRenderer {\n    constructor(options) {\n        this.smartPunctuationMap = {\n            right_single_quote: \"\u2019\",\n            left_single_quote: \"\u2018\",\n            right_double_quote: \"\u201D\",\n            left_double_quote: \"\u201C\",\n            ellipses: \"\u2026\",\n            em_dash: \"\u2014\",\n            en_dash: \"\u2013\"\n        };\n        this.warn = options.warn || (() => { });\n        this.options = options || {};\n        this.tight = false;\n        this.footnoteIndex = {};\n        this.nextFootnoteIndex = 1;\n        this.references = {};\n        this.autoReferences = {};\n    }\n    escape(s) {\n        if (reNeedsEscape.test(s)) {\n            return s\n                .replace(/&/g, \"&amp;\")\n                .replace(/</g, \"&lt;\")\n                .replace(/>/g, \"&gt;\");\n        }\n        else {\n            return s;\n        }\n    }\n    escapeAttribute(s) {\n        if (reNeedsEscapeAttr.test(s)) {\n            return s\n                .replace(/&/g, \"&amp;\")\n                .replace(/</g, \"&lt;\")\n                .replace(/>/g, \"&gt;\")\n                .replace(/\"/g, \"&quot;\");\n        }\n        else {\n            return s;\n        }\n    }\n    renderAttributes(node, extraAttrs) {\n        let result = \"\";\n        if (extraAttrs) {\n            for (const k in extraAttrs) {\n                if (k === \"class\") {\n                    let v = extraAttrs[k];\n                    if (node.attributes && node.attributes.class) {\n                        v = `${v} ${node.attributes.class}`;\n                    }\n                    result += ` ${k}=\"${this.escapeAttribute(v)}\"`;\n                }\n                else {\n                    result += ` ${k}=\"${this.escapeAttribute(extraAttrs[k])}\"`;\n                }\n            }\n        }\n        const attributes = Object.assign(Object.assign({}, node.autoAttributes), node.attributes);\n        if (attributes) {\n            for (const k in attributes) {\n                const v = attributes[k];\n                if (!(k === \"class\" && extraAttrs && extraAttrs.class)) {\n                    result += ` ${k}=\"${this.escapeAttribute(v)}\"`;\n                }\n            }\n        }\n        if (node.pos) {\n            const sp = node.pos.start;\n            const ep = node.pos.end;\n            result += ` data-startpos=\"${sp.line}:${sp.col}:${sp.offset}\" data-endpos=\"${ep.line}:${ep.col}:${ep.offset}\"`;\n        }\n        return result;\n    }\n    renderTag(tag, node, extraAttrs) {\n        let attributes = \"\";\n        if (node.attributes || node.autoAttributes || extraAttrs || node.pos) {\n            attributes = this.renderAttributes(node, extraAttrs);\n        }\n        return `<${tag}${attributes}>`;\n    }\n    renderCloseTag(tag) {\n        return `</${tag}>`;\n    }\n    inTags(tag, node, newlines, extraAttrs) {\n        const afterOpenSpace = newlines >= 2 ? \"\\n\" : \"\";\n        const afterCloseSpace = newlines >= 1 ? \"\\n\" : \"\";\n        return `${this.renderTag(tag, node, extraAttrs)}${afterOpenSpace}${this.renderChildren(node)}</${tag}>${afterCloseSpace}`;\n    }\n    addBacklink(note, ident) {\n        const backlink = `<a href=\"#fnref${ident}\" role=\"doc-backlink\">\\u21A9\\uFE0E</a>`;\n        if (/\\<\\/p\\>[\\r\\n]*$/.test(note)) {\n            return note.replace(/\\<\\/p\\>([\\r\\n]*)$/, backlink + \"</p>$1\");\n        }\n        else {\n            return note + `<p>${backlink}</p>\\n`;\n        }\n    }\n    renderChildren(node) {\n        let result = \"\";\n        const oldtight = this.tight;\n        if (\"tight\" in node) {\n            this.tight = !!node.tight;\n        }\n        for (const child of node.children) {\n            result += this.renderAstNode(child);\n        }\n        if (\"tight\" in node) {\n            this.tight = oldtight;\n        }\n        return result;\n    }\n    renderAstNode(node) {\n        var _a;\n        const override = (_a = this.options.overrides) === null || _a === void 0 ? void 0 : _a[node.tag];\n        if (override) {\n            return override(node, this);\n        }\n        return this.renderAstNodeDefault(node);\n    }\n    renderNotes(notes) {\n        let result = \"\";\n        const orderedFootnotes = [];\n        const renderedNotes = {};\n        for (const k in notes) {\n            renderedNotes[k] = this.renderChildren(notes[k]);\n        }\n        // now this.footnoteIndex includes notes only indexed in other notes (#37)\n        for (const k in this.footnoteIndex) {\n            const index = this.footnoteIndex[k];\n            if (index) {\n                orderedFootnotes[index] = renderedNotes[k];\n            }\n        }\n        result += `<section role=\"doc-endnotes\">\\n<hr>\\n<ol>\\n`;\n        for (let i = 1; i < orderedFootnotes.length; i++) {\n            // note: there can be gaps in the sequence, so we\n            // want to insert a dummy note in that case\n            const note = orderedFootnotes[i] || \"\";\n            result += `<li id=\"fn${i}\">\\n`;\n            result += this.addBacklink(note, i);\n            result += `</li>\\n`;\n        }\n        result += `</ol>\\n</section>\\n`;\n        return result;\n    }\n    renderAstNodeDefault(node) {\n        var _a;\n        switch (node.tag) {\n            case \"doc\": {\n                let result = \"\";\n                result += this.renderChildren(node);\n                if (this.nextFootnoteIndex > 1) {\n                    // render notes\n                    result += this.renderNotes(node.footnotes);\n                }\n                return result;\n            }\n            case \"para\": {\n                if (this.tight) {\n                    return `${this.renderChildren(node)}\\n`;\n                }\n                else {\n                    return this.inTags(\"p\", node, 1);\n                }\n            }\n            case \"block_quote\":\n                return this.inTags(\"blockquote\", node, 2);\n            case \"div\":\n                return this.inTags(\"div\", node, 2);\n            case \"section\":\n                return this.inTags(\"section\", node, 2);\n            case \"list_item\":\n                return this.inTags(\"li\", node, 2);\n            case \"task_list_item\":\n                return this.inTags(\"li\", node, 2, { class: node.checkbox === \"checked\"\n                        ? \"checked\" : \"unchecked\" });\n            case \"definition_list_item\":\n                return this.renderChildren(node);\n            case \"definition\":\n                return this.inTags(\"dd\", node, 2);\n            case \"term\":\n                return this.inTags(\"dt\", node, 1);\n            case \"definition_list\":\n                return this.inTags(\"dl\", node, 2);\n            case \"bullet_list\":\n                return this.inTags(\"ul\", node, 2);\n            case \"task_list\":\n                return this.inTags(\"ul\", node, 2, { class: \"task-list\" });\n            case \"ordered_list\": {\n                const extraAttr = {};\n                if (node.start && node.start !== 1) {\n                    extraAttr.start = node.start.toString();\n                }\n                if (node.style && !/1/.test(node.style)) {\n                    extraAttr.type = node.style.replace(/[().]/g, \"\");\n                }\n                return this.inTags(\"ol\", node, 2, extraAttr);\n            }\n            case \"heading\":\n                return this.inTags(`h${node.level}`, node, 1);\n            case \"footnote_reference\": {\n                let result = \"\";\n                const label = node.text;\n                let index = this.footnoteIndex[label];\n                if (!index) {\n                    index = this.nextFootnoteIndex;\n                    this.footnoteIndex[label] = index;\n                    this.nextFootnoteIndex++;\n                }\n                result += this.renderTag(\"a\", node, {\n                    id: \"fnref\" + index,\n                    href: \"#fn\" + index,\n                    role: \"doc-noteref\"\n                });\n                result += \"<sup>\";\n                result += this.escape(index.toString());\n                result += \"</sup></a>\";\n                return result;\n            }\n            case \"table\":\n                return this.inTags(\"table\", node, 2);\n            case \"caption\": {\n                let result = \"\";\n                // AST always has at least a dummy caption, no\n                // need to render that.\n                if (node.children.length > 0) {\n                    result += this.inTags(\"caption\", node, 1);\n                }\n                return result;\n            }\n            case \"row\":\n                return this.inTags(\"tr\", node, 2);\n            case \"cell\": {\n                const cellAttr = {};\n                if (node.align && node.align !== \"default\") {\n                    cellAttr.style = `text-align: ${node.align};`;\n                }\n                return this.inTags(node.head ? \"th\" : \"td\", node, 1, cellAttr);\n            }\n            case \"thematic_break\": {\n                let result = \"\";\n                result += this.renderTag(\"hr\", node);\n                result += \"\\n\";\n                return result;\n            }\n            case \"code_block\": {\n                let result = \"\";\n                result += this.renderTag(\"pre\", node);\n                result += \"<code\";\n                if (node.lang) {\n                    result += ` class=\"language-${this.escapeAttribute(node.lang)}\"`;\n                }\n                result += \">\";\n                result += this.escape(node.text);\n                result += this.renderCloseTag(\"code\");\n                result += this.renderCloseTag(\"pre\");\n                result += \"\\n\";\n                return result;\n            }\n            case \"raw_block\": {\n                let result = \"\";\n                if (node.format === \"html\") {\n                    result += node.text;\n                }\n                return result;\n            }\n            case \"str\": {\n                if (node.attributes || node.autoAttributes) {\n                    return `${this.renderTag(\"span\", node)}${this.escape(node.text)}</span>`;\n                }\n                else {\n                    return this.escape(node.text);\n                }\n            }\n            case \"smart_punctuation\":\n                return this.smartPunctuationMap[node.type] || node.text;\n            case \"double_quoted\": {\n                let result = \"\";\n                result += this.smartPunctuationMap.left_double_quote || '\"';\n                result += this.renderChildren(node);\n                result += this.smartPunctuationMap.right_double_quote || '\"';\n                return result;\n            }\n            case \"single_quoted\": {\n                let result = \"\";\n                result += this.smartPunctuationMap.left_single_quote || \"'\";\n                result += this.renderChildren(node);\n                result += this.smartPunctuationMap.right_single_quote || \"'\";\n                return result;\n            }\n            case \"symb\":\n                return this.escape(`:${node.alias}:`);\n            case \"inline_math\": {\n                let result = \"\";\n                result += this.renderTag(\"span\", node, { class: \"math inline\" });\n                result += `\\\\(${this.escape(node.text)}\\\\)`;\n                result += this.renderCloseTag(\"span\");\n                return result;\n            }\n            case \"display_math\": {\n                let result = \"\";\n                result += this.renderTag(\"span\", node, { class: \"math display\" });\n                result += `\\\\[${this.escape(node.text)}\\\\]`;\n                result += this.renderCloseTag(\"span\");\n                return result;\n            }\n            case \"verbatim\": {\n                let result = \"\";\n                result += this.renderTag(\"code\", node);\n                result += this.escape(node.text);\n                result += this.renderCloseTag(\"code\");\n                return result;\n            }\n            case \"raw_inline\": {\n                let result = \"\";\n                if (node.format === \"html\") {\n                    result += node.text;\n                }\n                return result;\n            }\n            case \"soft_break\":\n                return \"\\n\";\n            case \"hard_break\":\n                return \"<br>\\n\";\n            case \"non_breaking_space\":\n                return \"&nbsp;\";\n            case \"link\":\n            case \"image\": {\n                const extraAttr = {};\n                let dest = node.destination;\n                if (node.reference) {\n                    const ref = this.references[node.reference] || this.autoReferences[node.reference];\n                    if (ref) {\n                        dest = ref.destination;\n                        if (node.tag === \"image\") {\n                            extraAttr.alt = (0, parse_1.getStringContent)(node);\n                            extraAttr.src = dest;\n                        }\n                        else {\n                            extraAttr.href = dest;\n                        }\n                        if (ref.attributes) {\n                            for (const k in ref.attributes) {\n                                if (!node.attributes || !node.attributes[k]) {\n                                    // attribs on link take priority over attribs on reference\n                                    extraAttr[k] = ref.attributes[k];\n                                }\n                            }\n                        }\n                        if (ref.autoAttributes) {\n                            for (const k in ref.autoAttributes) {\n                                if (!node.autoAttributes || !node.autoAttributes[k]) {\n                                    // attribs on link take priority over attribs on reference\n                                    extraAttr[k] = ref.autoAttributes[k];\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        this.warn(new options_1.Warning(`Reference ${JSON.stringify(node.reference)} not found`, (_a = node === null || node === void 0 ? void 0 : node.pos) === null || _a === void 0 ? void 0 : _a.end));\n                    }\n                }\n                else {\n                    if (node.tag === \"image\") {\n                        extraAttr.alt = (0, parse_1.getStringContent)(node);\n                        if (dest !== undefined) {\n                            extraAttr.src = dest;\n                        }\n                    }\n                    else {\n                        if (dest !== undefined) {\n                            extraAttr.href = dest;\n                        }\n                    }\n                }\n                if (node.tag === \"image\") {\n                    return this.renderTag(\"img\", node, extraAttr);\n                }\n                else {\n                    return this.inTags(\"a\", node, 0, extraAttr);\n                }\n            }\n            case \"url\":\n            case \"email\": {\n                let result = \"\";\n                const extraAttr = {};\n                if (node.tag === \"email\") {\n                    extraAttr.href = \"mailto:\" + node.text;\n                }\n                else {\n                    extraAttr.href = node.text;\n                }\n                result += this.renderTag(\"a\", node, extraAttr);\n                result += this.escape(node.text);\n                result += this.renderCloseTag(\"a\");\n                return result;\n            }\n            case \"strong\":\n                return this.inTags(\"strong\", node, 0);\n            case \"emph\":\n                return this.inTags(\"em\", node, 0);\n            case \"span\":\n                return this.inTags(\"span\", node, 0);\n            case \"mark\":\n                return this.inTags(\"mark\", node, 0);\n            case \"insert\":\n                return this.inTags(\"ins\", node, 0);\n            case \"delete\":\n                return this.inTags(\"del\", node, 0);\n            case \"superscript\":\n                return this.inTags(\"sup\", node, 0);\n            case \"subscript\":\n                return this.inTags(\"sub\", node, 0);\n            default:\n                return \"\";\n        }\n    }\n    render(doc) {\n        this.references = doc.references;\n        this.autoReferences = doc.autoReferences;\n        return this.renderAstNode(doc);\n    }\n}\nexports.HTMLRenderer = HTMLRenderer;\nconst renderHTML = function (ast, options = {}) {\n    const renderer = new HTMLRenderer(options);\n    return renderer.render(ast);\n};\nexports.renderHTML = renderHTML;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyFilter = void 0;\nclass Walker {\n    constructor(node) {\n        this.finished = false;\n        this.stack = [];\n        this.enter = true;\n        this.top = node;\n        this.current = node;\n    }\n    walk(callback) {\n        while (!this.finished) {\n            callback(this); // apply the action to current this state\n            const topStack = this.stack && this.stack[this.stack.length - 1];\n            if (this.enter) {\n                if (\"children\" in this.current &&\n                    this.current.children.length > 0) {\n                    // move to first child\n                    this.stack.push({ node: this.current, childIndex: 0 });\n                    this.current = this.current.children[0];\n                    this.enter = true;\n                }\n                else {\n                    // no children, set to exit\n                    this.enter = false;\n                }\n            }\n            else { // exit\n                if (topStack) {\n                    // try next sibling\n                    topStack.childIndex++;\n                    const nextChild = topStack.node.children[topStack.childIndex];\n                    if (nextChild) {\n                        this.current = nextChild;\n                        this.enter = true;\n                    }\n                    else {\n                        this.stack.pop();\n                        // go up to parent\n                        this.current = topStack.node;\n                        this.enter = false;\n                    }\n                }\n                else {\n                    this.finished = true;\n                }\n            }\n        }\n    }\n}\nconst applyFilterPartToNode = function (node, enter, filterpart) {\n    if (!node || !node.tag) {\n        throw (new Error(\"Filter called on a non-node.\"));\n    }\n    const trans = filterpart[node.tag];\n    if (!trans) {\n        return false;\n    }\n    let transform;\n    if (enter) {\n        if (\"enter\" in trans && trans.enter) {\n            transform = trans.enter;\n        }\n    }\n    else {\n        if (\"exit\" in trans && trans.exit) {\n            transform = trans.exit;\n        }\n        else {\n            transform = trans;\n        }\n    }\n    if (typeof transform === \"function\") {\n        return transform(node);\n    }\n};\n// Returns the node for convenience (but modifies it in place).\nconst traverse = function (node, filterpart) {\n    new Walker(node).walk((walker) => {\n        let result = applyFilterPartToNode(walker.current, walker.enter, filterpart);\n        const stackTop = walker.stack[walker.stack.length - 1];\n        if (typeof result === \"object\" && \"stop\" in result && result.stop) {\n            result = result.stop;\n            walker.enter = false; // set to exit, which stops traversal of children\n        }\n        if (result) {\n            if (Array.isArray(result)) {\n                if (stackTop) {\n                    stackTop.node.children.splice(stackTop.childIndex, 1, ...result);\n                    // next line is needed for cases where we delete an element\n                    walker.current = stackTop.node.children[stackTop.childIndex];\n                    // adjust childIndex to skip multiple items added;\n                    if (result.length > 1) {\n                        stackTop.childIndex += result.length - 1;\n                    }\n                }\n                else {\n                    throw (Error(\"Cannot replace top node with multiple nodes\"));\n                }\n            }\n            else if (typeof result === \"object\" && \"tag\" in result && result.tag) {\n                if (stackTop) {\n                    stackTop.node.children[stackTop.childIndex] = result;\n                }\n                else {\n                    return result;\n                }\n            }\n        }\n    });\n    return node;\n};\n// Apply a filter to a document.\nconst applyFilter = function (doc, filter) {\n    const f = filter();\n    let filterparts;\n    if (Array.isArray(f)) {\n        filterparts = f;\n    }\n    else {\n        filterparts = [f];\n    }\n    for (const f of filterparts) {\n        traverse(doc, f);\n        for (const i in doc.footnotes) {\n            traverse(doc.footnotes[i], f);\n        }\n        for (const i in doc.references) {\n            traverse(doc.references[i], f);\n        }\n    }\n};\nexports.applyFilter = applyFilter;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fromPandoc = exports.toPandoc = void 0;\nconst options_1 = require(\"./options\");\nconst styleMap = { Decimal: { Period: \"1.\",\n        OneParen: \"1)\",\n        TwoParens: \"(1)\" },\n    LowerAlpha: { Period: \"a.\",\n        OneParen: \"a)\",\n        TwoParens: \"(a)\" },\n    UpperAlpha: { Period: \"A.\",\n        OneParen: \"A)\",\n        TwoParens: \"(A)\" },\n    LowerRoman: { Period: \"i.\",\n        OneParen: \"i)\",\n        TwoParens: \"(i)\" },\n    UpperRoman: { Period: \"I.\",\n        OneParen: \"I)\",\n        TwoParens: \"(I)\" } };\nconst reverseStyleMap = {};\nfor (const i in styleMap) {\n    for (const j in styleMap[i]) {\n        reverseStyleMap[styleMap[i][j]] = [i, j];\n    }\n}\nconst paraToPlain = function (elt) {\n    if (elt.t === \"Para\") {\n        elt.t = \"Plain\";\n    }\n    return elt;\n};\nconst toPandocAttr = function (node) {\n    const attributes = Object.assign(Object.assign({}, node.autoAttributes), node.attributes);\n    if (attributes) {\n        const id = attributes.id || \"\";\n        const classes = (attributes.class && attributes.class.split(\" \")) || [];\n        const kvs = [];\n        for (const k in attributes) {\n            if (k !== id && k !== \"class\") {\n                kvs.push([k, attributes[k]]);\n            }\n        }\n        return [id, classes, kvs];\n    }\n    else {\n        return [\"\", [], []];\n    }\n};\nclass PandocRenderer {\n    constructor(options = {}) {\n        this.references = {};\n        this.footnotes = {};\n        this.options = options;\n        this.smartPunctuationMap = this.options.smartPunctuationMap ||\n            { right_single_quote: \"\u2019\",\n                left_single_quote: \"\u2018\",\n                right_double_quote: \"\u201D\",\n                left_double_quote: \"\u201C\",\n                ellipses: \"\u2026\",\n                em_dash: \"\u2014\",\n                en_dash: \"\u2013\"\n            };\n        this.warn || (this.warn = () => { });\n    }\n    toPandocChildren(node) {\n        if (\"children\" in node) {\n            const children = [];\n            node.children.forEach((child) => {\n                this.addToPandocElts(children, child);\n            });\n            return children;\n        }\n        else {\n            return [];\n        }\n    }\n    toPandocDefinitionListItem(list) {\n        const self = this;\n        return function (item) {\n            if (!(\"children\" in item)) {\n                return [];\n            }\n            const [term, definition] = item.children;\n            return [\n                self.toPandocChildren(term),\n                [self.toPandocChildren(definition)],\n            ];\n        };\n    }\n    toPandocListItem(list) {\n        const self = this;\n        return function (item) {\n            let elts = self.toPandocChildren(item);\n            if (\"checkbox\" in item && item.checkbox && elts[0].t === \"Para\") {\n                if (item.checkbox === \"checked\") {\n                    elts[0].c.unshift({ t: \"Str\", c: \"\u2612\" }, { t: \"Space\" });\n                }\n                else {\n                    elts[0].c.unshift({ t: \"Str\", c: \"\u2610\" }, { t: \"Space\" });\n                }\n            }\n            if (\"tight\" in list && list.tight) {\n                elts = elts.map(paraToPlain);\n            }\n            return elts;\n        };\n    }\n    addToPandocElts(elts, node) {\n        switch (node.tag) {\n            case \"section\":\n            case \"div\": {\n                const attrs = toPandocAttr(node);\n                if (node.tag === \"section\") {\n                    attrs[1].unshift(\"section\");\n                }\n                elts.push({ t: \"Div\", c: [attrs, this.toPandocChildren(node)] });\n                break;\n            }\n            case \"block_quote\":\n                elts.push({ t: \"BlockQuote\", c: this.toPandocChildren(node) });\n                break;\n            case \"definition_list\": {\n                const items = node.children.map(this.toPandocDefinitionListItem(node));\n                elts.push({ t: \"DefinitionList\", c: items });\n                break;\n            }\n            case \"task_list\":\n            case \"bullet_list\": {\n                let items;\n                items = node.children.map(this.toPandocListItem(node));\n                elts.push({ t: \"BulletList\", c: items });\n                break;\n            }\n            case \"ordered_list\": {\n                const items = node.children.map(this.toPandocListItem(node));\n                const [style, delim] = reverseStyleMap[node.style];\n                const start = node.start || 1;\n                elts.push({ t: \"OrderedList\", c: [[start, { t: style }, { t: delim }],\n                        items] });\n                break;\n            }\n            case \"task_list_item\": // should be handled at \"list\" above\n            case \"list_item\": // should be handled at \"list\" above\n                break;\n            case \"para\":\n                elts.push({ t: \"Para\", c: this.toPandocChildren(node) });\n                break;\n            case \"heading\":\n                elts.push({ t: \"Header\", c: [node.level, toPandocAttr(node),\n                        this.toPandocChildren(node)] });\n                break;\n            case \"code_block\": {\n                const attrs = toPandocAttr(node);\n                if (node.lang) {\n                    attrs[1].unshift(node.lang);\n                }\n                elts.push({ t: \"CodeBlock\", c: [attrs, node.text] });\n                break;\n            }\n            case \"raw_block\":\n                elts.push({ t: \"RawBlock\", c: [node.format, node.text] });\n                break;\n            case \"thematic_break\":\n                elts.push({ t: \"HorizontalRule\" });\n                break;\n            case \"table\": {\n                const attrs = toPandocAttr(node);\n                const nullattr = [\"\", [], []];\n                let caption = [];\n                let colspecs = [];\n                let theadrows = [];\n                const tbodies = [];\n                const tfoot = [nullattr, []];\n                let curheads = [];\n                let currows = [];\n                const alignMap = { left: \"AlignLeft\",\n                    right: \"AlignRight\",\n                    center: \"AlignCenter\",\n                    default: \"AlignDefault\" };\n                const toColSpec = function (cell) {\n                    return [{ t: alignMap[cell.align] || \"AlignDefault\" },\n                        { t: \"ColWidthDefault\" }];\n                };\n                const self = this;\n                const toPandocCell = function (cell) {\n                    if (\"children\" in cell) {\n                        return [toPandocAttr(cell),\n                            { t: (\"align\" in cell && alignMap[cell.align]) ||\n                                    \"AlignDefault\" },\n                            1,\n                            1,\n                            [{ t: \"Plain\", c: self.toPandocChildren(cell) }]];\n                    }\n                };\n                const toPandocRow = function (row) {\n                    if (\"children\" in row) {\n                        return [toPandocAttr(row), row.children.map(toPandocCell)];\n                    }\n                };\n                for (let i = 0; i < node.children.length; i++) {\n                    const row = node.children[i];\n                    if (!(\"children\" in row)) {\n                        break;\n                    }\n                    if (colspecs.length === 0) {\n                        colspecs = row.children.map(toColSpec);\n                    }\n                    if (row.tag === \"caption\") {\n                        if (row.children.length) {\n                            caption = this.toPandocChildren(row);\n                        }\n                    }\n                    else if (row.head) {\n                        if (currows.length === 0) {\n                            curheads.push(toPandocRow(row));\n                        }\n                        else {\n                            tbodies.push([nullattr, 0, curheads, currows]);\n                            currows = [];\n                            curheads = [toPandocRow(row)];\n                        }\n                    }\n                    else {\n                        if (tbodies.length === 0 && currows.length === 0) {\n                            theadrows = curheads;\n                            curheads = [];\n                        }\n                        currows.push(toPandocRow(row));\n                    }\n                }\n                if (curheads.length > 0 || currows.length > 0) {\n                    tbodies.push([nullattr, 0, curheads, currows]);\n                }\n                elts.push({ t: \"Table\", c: [attrs,\n                        [null, [{ t: \"Plain\",\n                                    c: caption }]],\n                        colspecs,\n                        [nullattr, theadrows],\n                        tbodies,\n                        tfoot] });\n                break;\n            }\n            case \"raw_inline\":\n                elts.push({ t: \"RawInline\", c: [node.format, node.text] });\n                break;\n            case \"soft_break\":\n                elts.push({ t: \"SoftBreak\" });\n                break;\n            case \"hard_break\":\n                elts.push({ t: \"LineBreak\" });\n                break;\n            case \"str\":\n                node.text.split(/ +/).forEach((s, i) => {\n                    if (i > 0) {\n                        elts.push({ t: \"Space\" });\n                    }\n                    if (s.length > 0) {\n                        elts.push({ t: \"Str\", c: s });\n                    }\n                });\n                break;\n            case \"verbatim\":\n                elts.push({ t: \"Code\", c: [toPandocAttr(node), node.text] });\n                break;\n            case \"inline_math\":\n                elts.push({ t: \"Math\",\n                    c: [{ t: \"InlineMath\" }, node.text] });\n                break;\n            case \"display_math\":\n                elts.push({ t: \"Math\",\n                    c: [{ t: \"DisplayMath\" }, node.text] });\n                break;\n            case \"non_breaking_space\":\n                elts.push({ t: \"Str\", c: \"\\u00A0\" });\n                break;\n            case \"smart_punctuation\":\n                elts.push({ t: \"Str\", c: this.smartPunctuationMap[node.type] ||\n                        node.text });\n                break;\n            case \"symb\":\n                elts.push({ t: \"Span\", c: [[\"\", [\"symbol\"], [[\"alias\", node.alias]]],\n                        [{ t: \"Str\", c: \":\" + node.alias + \":\" }]] });\n                break;\n            case \"single_quoted\":\n            case \"double_quoted\": {\n                const quoteType = { t: node.tag === \"single_quoted\" ? \"SingleQuote\"\n                        : \"DoubleQuote\" };\n                elts.push({ t: \"Quoted\", c: [quoteType, this.toPandocChildren(node)] });\n                break;\n            }\n            case \"email\":\n            case \"url\": {\n                let url = node.text;\n                if (node.tag === \"email\") {\n                    url = \"mailto:\" + url;\n                }\n                const attr = toPandocAttr(node);\n                attr[1].unshift(node.tag === \"email\" ? \"email\" : \"uri\");\n                elts.push({ t: \"Link\",\n                    c: [attr,\n                        [{ t: \"Str\", c: node.text }],\n                        [url, \"\"]] });\n                break;\n            }\n            case \"image\":\n            case \"link\": {\n                let destination = node.destination || \"\";\n                const linkAttrs = {};\n                if (node.reference) {\n                    const ref = this.references[node.reference];\n                    if (ref) {\n                        destination = ref.destination || \"\";\n                        const attributes = Object.assign(Object.assign({}, ref.autoAttributes), ref.attributes);\n                        if (attributes) {\n                            for (const k in attributes) {\n                                linkAttrs[k] = attributes[k];\n                            }\n                        }\n                    }\n                    else {\n                        this.warn(new options_1.Warning(\"Reference \" + node.reference + \" not found.\"));\n                    }\n                }\n                const attributes = Object.assign(Object.assign({}, node.autoAttributes), node.attributes);\n                if (attributes) {\n                    for (const k in attributes) {\n                        if (linkAttrs[k] && k === \"class\") {\n                            linkAttrs[k] += \" \" + attributes[k];\n                        }\n                        else if (!linkAttrs[k]) {\n                            linkAttrs[k] = attributes[k];\n                        }\n                    }\n                }\n                const attrs = toPandocAttr({ tag: \"link\", attributes: linkAttrs,\n                    children: [] });\n                const url = destination || \"\";\n                const title = (node.attributes && node.attributes.title) || (node.autoAttributes && node.autoAttributes.title) || \"\";\n                if (title) {\n                    attrs[2] = attrs[2].filter(([k, v]) => k !== \"title\");\n                }\n                elts.push({ t: node.tag === \"link\" ? \"Link\" : \"Image\",\n                    c: [attrs, this.toPandocChildren(node), [url, title]] });\n                break;\n            }\n            case \"emph\":\n                elts.push({ t: \"Emph\", c: this.toPandocChildren(node) });\n                break;\n            case \"strong\":\n                elts.push({ t: \"Strong\", c: this.toPandocChildren(node) });\n                break;\n            case \"superscript\":\n                elts.push({ t: \"Superscript\", c: this.toPandocChildren(node) });\n                break;\n            case \"subscript\":\n                elts.push({ t: \"Subscript\", c: this.toPandocChildren(node) });\n                break;\n            case \"span\":\n                elts.push({ t: \"Span\", c: [toPandocAttr(node),\n                        this.toPandocChildren(node)] });\n                break;\n            case \"mark\":\n                elts.push({ t: \"Span\", c: [[\"\", [\"mark\"], []], this.toPandocChildren(node)] });\n                break;\n            case \"insert\":\n                elts.push({ t: \"Underline\", c: this.toPandocChildren(node) });\n                break;\n            case \"delete\":\n                elts.push({ t: \"Strikeout\", c: this.toPandocChildren(node) });\n                break;\n            case \"footnote_reference\": {\n                const note = this.footnotes[node.text];\n                if (note) {\n                    elts.push({ t: \"Note\", c: this.toPandocChildren(note) });\n                }\n                else {\n                    elts.push({ t: \"Superscript\", c: [{ t: \"Str\", c: node.text }] });\n                }\n                break;\n            }\n            default:\n                this.warn(new options_1.Warning(\"Skipping unhandled node \" + node.tag));\n        }\n    }\n    toPandoc(doc) {\n        this.references = doc.references;\n        this.footnotes = doc.footnotes;\n        return { [\"pandoc-api-version\"]: [1, 23],\n            meta: {},\n            blocks: this.toPandocChildren(doc) };\n    }\n}\nconst fromPandocAttr = function (pattr) {\n    const attr = {};\n    if (pattr[0]) {\n        attr.id = pattr[0];\n    }\n    if (pattr[1].length > 0) {\n        attr.class = pattr[1].join(\" \");\n    }\n    for (let i = 0; i < pattr[2].length; i++) {\n        attr[pattr[2][i][0].toString()] = pattr[2][i][1];\n    }\n    if (Object.keys(attr).length === 0) {\n        return null;\n    }\n    else {\n        return attr;\n    }\n};\nconst isPlainOrPara = function (x) {\n    return (x.t === \"Plain\" || x.t === \"Para\");\n};\nconst hasCheckbox = function (elt) {\n    if (!elt[0]) {\n        return null;\n    }\n    const x = elt[0];\n    if (!isPlainOrPara(x)) {\n        return null;\n    }\n    if (x.c.length >= 2 && x.c[0].t === \"Str\" && x.c[1].t === \"Space\") {\n        if (x.c[0].c === \"\u2612\") {\n            x.c.shift(); // remove the checkbox\n            x.c.shift();\n            return \"checked\";\n        }\n        else if (x.c[0].c === \"\u2610\") {\n            x.c.shift(); // remove the checkbox\n            x.c.shift();\n            return \"unchecked\";\n        }\n        else {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n};\nclass PandocParser {\n    constructor(options = {}) {\n        this.footnotes = {};\n        this.footnoteIndex = 0;\n        this.options = options;\n        this.warn = options.warn || (() => { });\n    }\n    fromPandocInlines(elts) {\n        let accum = [];\n        const inlines = [];\n        for (let i = 0; i < elts.length; i++) {\n            const elt = elts[i];\n            if (elt.t === \"Str\") {\n                accum.push(elt.c);\n            }\n            else if (elt.t === \"Space\") {\n                accum.push(\" \");\n            }\n            else {\n                if (accum.length > 0) {\n                    inlines.push({ tag: \"str\", text: accum.join(\"\") });\n                    accum = [];\n                }\n                switch (elt.t) {\n                    case \"SoftBreak\":\n                        inlines.push({ tag: \"soft_break\" });\n                        break;\n                    case \"LineBreak\":\n                        inlines.push({ tag: \"hard_break\" });\n                        break;\n                    case \"Emph\":\n                        inlines.push({ tag: \"emph\", children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Strong\":\n                        inlines.push({ tag: \"strong\", children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Superscript\":\n                        inlines.push({ tag: \"superscript\", children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Subscript\":\n                        inlines.push({ tag: \"subscript\", children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Strikeout\":\n                        inlines.push({ tag: \"delete\", children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Span\": {\n                        const span = { tag: \"span\",\n                            children: this.fromPandocInlines(elt.c[1]) };\n                        const attr = fromPandocAttr(elt.c[0]);\n                        if (attr) {\n                            span.attributes = attr;\n                        }\n                        inlines.push(span);\n                        break;\n                    }\n                    case \"Underline\":\n                        inlines.push({ tag: \"span\",\n                            attributes: { class: \"underline\" },\n                            children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"SmallCaps\":\n                        inlines.push({ tag: \"span\",\n                            attributes: { class: \"smallcaps\" },\n                            children: this.fromPandocInlines(elt.c) });\n                        break;\n                    case \"Math\":\n                        inlines.push({ tag: elt.c[0].t === \"DisplayMath\"\n                                ? \"display_math\" : \"inline_math\",\n                            text: elt.c[1] });\n                        break;\n                    case \"Quoted\":\n                        if (elt.c[0].t === \"SingleQuote\") {\n                            inlines.push({ tag: \"single_quoted\",\n                                children: this.fromPandocInlines(elt.c[1]) });\n                        }\n                        else {\n                            inlines.push({ tag: \"double_quoted\",\n                                children: this.fromPandocInlines(elt.c[1]) });\n                        }\n                        break;\n                    case \"RawInline\":\n                        inlines.push({ tag: \"raw_inline\", format: elt.c[0], text: elt.c[1] });\n                        break;\n                    case \"Code\": {\n                        const attr = fromPandocAttr(elt.c[0]);\n                        const code = ({ tag: \"verbatim\",\n                            text: elt.c[1] });\n                        if (attr) {\n                            code.attributes = attr;\n                        }\n                        inlines.push(code);\n                        break;\n                    }\n                    case \"Image\":\n                    case \"Link\": {\n                        let attr = fromPandocAttr(elt.c[0]);\n                        if (elt.c[2][1]) {\n                            attr = attr || {};\n                            attr.title = elt.c[2][1];\n                        }\n                        const dest = elt.c[2][0];\n                        const children = this.fromPandocInlines(elt.c[1]);\n                        if (elt.t === \"Image\") {\n                            const img = { tag: \"image\",\n                                destination: dest,\n                                children: children };\n                            if (attr) {\n                                img.attributes = attr;\n                            }\n                            inlines.push(img);\n                        }\n                        else {\n                            const link = { tag: \"link\",\n                                destination: dest,\n                                children: children };\n                            if (attr) {\n                                link.attributes = attr;\n                            }\n                            inlines.push(link);\n                        }\n                        break;\n                    }\n                    case \"Cite\":\n                        inlines.push({ tag: \"span\",\n                            attributes: { class: \"cite\" },\n                            children: this.fromPandocInlines(elt.c[1]) });\n                        break;\n                    case \"Note\": {\n                        this.footnoteIndex++;\n                        const label = this.footnoteIndex.toString();\n                        const note = elt.c.map((b) => {\n                            return this.fromPandocBlock(b);\n                        });\n                        this.footnotes[this.footnoteIndex.toString()] =\n                            { tag: \"footnote\", label: label, children: note };\n                        inlines.push({ tag: \"footnote_reference\",\n                            text: label });\n                        break;\n                    }\n                    default:\n                }\n            }\n        }\n        if (accum.length > 0) {\n            inlines.push({ tag: \"str\", text: accum.join(\"\") });\n        }\n        return inlines;\n    }\n    fromPandocBlock(block) {\n        switch (block.t) {\n            case \"Plain\":\n            case \"Para\":\n                return { tag: \"para\", children: this.fromPandocInlines(block.c) };\n            case \"BlockQuote\":\n                return { tag: \"block_quote\",\n                    children: block.c.map((b) => {\n                        return this.fromPandocBlock(b);\n                    }) };\n            case \"Div\": {\n                let attr = fromPandocAttr(block.c[0]);\n                const tag = /\\bsection\\b/.test((attr && attr.class) || \"\")\n                    ? \"section\" : \"div\";\n                const blocks = block.c[1].map((b) => {\n                    return this.fromPandocBlock(b);\n                });\n                if (tag === \"section\") {\n                    attr = attr || {};\n                    attr.class = attr.class.replace(/section */, \"\");\n                    if (!attr.class) {\n                        delete attr.class;\n                    }\n                    return { tag: \"section\", attributes: attr, children: blocks };\n                }\n                else {\n                    const div = { tag: \"div\", children: blocks };\n                    if (attr) {\n                        div.attributes = attr;\n                    }\n                    return div;\n                }\n            }\n            case \"Header\": {\n                const attr = fromPandocAttr(block.c[1]);\n                const heading = { tag: \"heading\",\n                    level: block.c[0],\n                    children: this.fromPandocInlines(block.c[2]) };\n                if (attr) {\n                    heading.attributes = attr;\n                }\n                return heading;\n            }\n            case \"HorizontalRule\":\n                return { tag: \"thematic_break\" };\n            case \"RawBlock\":\n                return { tag: \"raw_block\", format: block.c[0], text: block.c[1] };\n            case \"CodeBlock\": {\n                const attr = fromPandocAttr(block.c[0]);\n                let lang;\n                if (attr && attr.class) {\n                    const classes = attr.class.split(/  */);\n                    lang = classes[0];\n                    classes.shift();\n                    if (classes.length > 0) {\n                        attr.class = classes.join(\" \");\n                    }\n                    else {\n                        delete attr.class;\n                    }\n                }\n                const res = { tag: \"code_block\",\n                    lang: lang,\n                    text: block.c[1] };\n                if (attr) {\n                    res.attributes = attr;\n                }\n                if (!lang) {\n                    delete res.lang;\n                }\n                return res;\n            }\n            case \"DefinitionList\": {\n                const items = [];\n                const tight = false;\n                for (let i = 0; i < block.c.length; i++) {\n                    const rawterm = block.c[i][0];\n                    const rawdefs = block.c[i][1];\n                    const term = this.fromPandocInlines(rawterm);\n                    const def = [];\n                    for (let j = 0; j < rawdefs.length; j++) {\n                        rawdefs[j].map((b) => {\n                            def.push(this.fromPandocBlock(b));\n                        });\n                    }\n                    items.push({ tag: \"definition_list_item\",\n                        children: [{ tag: \"term\", children: term },\n                            { tag: \"definition\", children: def }] });\n                }\n                return { tag: \"definition_list\", children: items };\n            }\n            case \"OrderedList\":\n            case \"BulletList\": {\n                const items = [];\n                const taskListItems = [];\n                let tight = false;\n                let rawitems;\n                if (block.t === \"BulletList\") {\n                    rawitems = block.c;\n                }\n                else {\n                    rawitems = block.c[1];\n                }\n                for (let i = 0; i < rawitems.length; i++) {\n                    const checkbox = hasCheckbox(rawitems[i]);\n                    const children = rawitems[i].map((b) => {\n                        if (b.t === \"Plain\") {\n                            tight = true;\n                        }\n                        else if (b.t === \"Para\") {\n                            tight = false;\n                        }\n                        return this.fromPandocBlock(b);\n                    });\n                    if (checkbox !== null) {\n                        taskListItems.push({ tag: \"task_list_item\",\n                            checkbox: checkbox,\n                            children: children });\n                    }\n                    else {\n                        items.push({ tag: \"list_item\",\n                            children: children });\n                    }\n                }\n                if (block.t === \"BulletList\") {\n                    if (taskListItems.length > 0) {\n                        return { tag: \"task_list\",\n                            tight: tight,\n                            children: taskListItems };\n                    }\n                    else {\n                        return { tag: \"bullet_list\",\n                            style: \"-\",\n                            tight: tight,\n                            children: items };\n                    }\n                }\n                else if (block.t === \"OrderedList\") {\n                    const start = block.c[0][0];\n                    let pandocStyle = block.c[0][1].t;\n                    if (pandocStyle === \"DefaultStyle\") {\n                        pandocStyle = \"Decimal\";\n                    }\n                    let pandocDelim = block.c[0][2].t;\n                    if (pandocDelim === \"DefaultDelim\") {\n                        pandocDelim = \"Period\";\n                    }\n                    const style = styleMap[pandocStyle][pandocDelim];\n                    return { tag: \"ordered_list\",\n                        style: style,\n                        start: start,\n                        tight: tight,\n                        children: items };\n                }\n            }\n            case \"Table\": {\n                const attr = fromPandocAttr(block.c[0]);\n                const rawcaption = block.c[1][1];\n                const caption = { tag: \"caption\", children: [] };\n                if (rawcaption.length > 1 ||\n                    (rawcaption.length === 1 && !isPlainOrPara(rawcaption[0]))) {\n                    this.warn(new options_1.Warning(\"Skipping block-level content in table caption.\"));\n                }\n                else if (rawcaption[0] && \"c\" in rawcaption[0]) {\n                    caption.children = this.fromPandocInlines(rawcaption[0].c);\n                }\n                const rawcolspecs = block.c[2];\n                const aligns = [];\n                for (const i in rawcolspecs) {\n                    aligns.push(rawcolspecs[i][0].t.slice(5).toLowerCase());\n                }\n                const rows = [];\n                const rawtheadrows = block.c[3][1];\n                for (const i in rawtheadrows) {\n                    rows.push(this.fromPandocRow(rawtheadrows[i], true, 0, aligns));\n                }\n                const tbodies = block.c[4];\n                for (const i in tbodies) {\n                    const rowheadcolumns = tbodies[i][1];\n                    const rawsubheadrows = tbodies[i][2];\n                    for (const i in rawsubheadrows) {\n                        rows.push(this.fromPandocRow(rawsubheadrows[i], true, rowheadcolumns, aligns));\n                    }\n                    const rawbodyrows = tbodies[i][3];\n                    for (const i in rawbodyrows) {\n                        rows.push(this.fromPandocRow(rawbodyrows[i], false, rowheadcolumns, aligns));\n                    }\n                }\n                const rawfootrows = block.c[5][1];\n                for (const i in rawfootrows) {\n                    rows.push(this.fromPandocRow(rawfootrows[i], false, 0, aligns));\n                }\n                const table = { tag: \"table\", children: [caption, ...rows] };\n                if (attr) {\n                    table.attributes = attr;\n                }\n                return table;\n            }\n            case \"Figure\": {\n                const attr = fromPandocAttr(block.c[0]);\n                const tag = /\\bsection\\b/.test((attr && attr.class) || \"\")\n                    ? \"section\" : \"div\";\n                const blocks = block.c[2].map((b) => {\n                    return this.fromPandocBlock(b);\n                });\n                const rawcapt = block.c[1][1];\n                if (rawcapt.length > 0) {\n                    const capt = rawcapt.map((b) => {\n                        return this.fromPandocBlock(b);\n                    });\n                    blocks.push(...capt);\n                }\n                const div = { tag: \"div\", children: blocks };\n                if (attr) {\n                    div.attributes = attr;\n                }\n                return div;\n            }\n            case \"LineBlock\": {\n                const ils = [];\n                for (let i = 0; i < block.c.length; i++) {\n                    if (i > 0) {\n                        ils.push({ tag: \"hard_break\" });\n                    }\n                    ils.push(...this.fromPandocInlines(block.c[i]));\n                }\n                return { tag: \"para\", children: ils };\n            }\n            case \"Null\": // better options?\n                return { tag: \"raw_block\", format: \"none\", text: \"\" };\n            default:\n        }\n        return { tag: \"raw_block\", format: \"error\",\n            text: \"Could not convert \" + block.t };\n    }\n    fromPandocRow(rawrow, head, rowheadcols, aligns) {\n        const attr = fromPandocAttr(rawrow[0]);\n        const rawcells = rawrow[1];\n        const cells = [];\n        for (let i = 0; i < rawcells.length; i++) {\n            cells.push(this.fromPandocCell(rawcells[i], head || i < rowheadcols, aligns[i]));\n        }\n        const row = { tag: \"row\", head: head, children: cells };\n        if (attr) {\n            row.attributes = attr;\n        }\n        return row;\n    }\n    fromPandocCell(rawcell, head, defaultAlign) {\n        let cs = [];\n        const attr = fromPandocAttr(rawcell[0]);\n        let align = rawcell[1].t.slice(5).toLowerCase();\n        if (align === \"default\") {\n            align = defaultAlign;\n        }\n        const rawblocks = rawcell[4];\n        if (rawblocks.length > 1 || (rawblocks.length === 1 &&\n            !isPlainOrPara(rawblocks[0]))) {\n            this.warn(new options_1.Warning(\"Skipping table cell with block-level content.\"));\n            cs = [{ tag: \"str\", text: \"((content omitted))\" }];\n        }\n        else if (rawblocks[0]) {\n            cs = this.fromPandocInlines(rawblocks[0].c);\n        }\n        const cell = { tag: \"cell\", head: head, align: align, children: cs };\n        if (attr) {\n            cell.attributes = attr;\n        }\n        return cell;\n    }\n    fromPandoc(pandoc) {\n        if (typeof pandoc !== \"object\") {\n            throw (Error(\"Pandoc document must be an object\"));\n        }\n        else if (!pandoc[\"pandoc-api-version\"]) {\n            throw (Error(\"Pandoc document lacks pandoc-api-version\"));\n        }\n        else if (!pandoc.blocks) {\n            throw (Error(\"Pandoc document lacks blocks\"));\n        }\n        else if (!pandoc.meta) {\n            throw (Error(\"Pandoc document lacks meta\"));\n        }\n        const blocks = pandoc.blocks;\n        const docblocks = blocks.map((b) => {\n            return this.fromPandocBlock(b);\n        });\n        return { tag: \"doc\",\n            children: docblocks,\n            footnotes: this.footnotes,\n            references: {},\n            autoReferences: {} };\n    }\n}\nconst toPandoc = function (doc, options) {\n    return new PandocRenderer(options).toPandoc(doc);\n};\nexports.toPandoc = toPandoc;\nconst fromPandoc = function (pandoc, options) {\n    return new PandocParser(options).fromPandoc(pandoc);\n};\nexports.fromPandoc = fromPandoc;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.renderDjot = void 0;\nconst ast_1 = require(\"./ast\");\nconst parse_1 = require(\"./parse\");\nconst isWhitespace = function (node) {\n    const tag = node.tag;\n    return (tag === \"space\" || tag === \"soft_break\" || tag === \"hard_break\");\n};\nconst beginsWithWhitespace = function (node) {\n    return (node.children[0] && isWhitespace(node.children[0]));\n};\nconst endsWithWhitespace = function (node) {\n    return (node.children[0] &&\n        isWhitespace(node.children[node.children.length - 1]));\n};\nconst verbatimDelim = function (node, minticks) {\n    const backtickGroups = node.text.match(/(`+)/g);\n    const backtickGroupLens = {};\n    if (backtickGroups) {\n        for (const i in backtickGroups) {\n            backtickGroupLens[backtickGroups[i].length] = true;\n        }\n    }\n    let numticks = minticks;\n    while (backtickGroupLens[numticks]) {\n        numticks++;\n    }\n    return \"`\".repeat(numticks);\n};\nconst toRoman = function (x) {\n    if (x < 0 || x >= 4000) {\n        return \"?\";\n    }\n    let rom = \"\";\n    while (x > 0) {\n        if (x >= 1000) {\n            rom += \"M\";\n            x -= 1000;\n        }\n        else if (x >= 900) {\n            rom += \"CM\";\n            x -= 900;\n        }\n        else if (x >= 500) {\n            rom += \"D\";\n            x -= 500;\n        }\n        else if (x >= 400) {\n            rom += \"CD\";\n            x -= 400;\n        }\n        else if (x >= 100) {\n            rom += \"C\";\n            x -= 100;\n        }\n        else if (x >= 90) {\n            rom += \"XC\";\n            x -= 90;\n        }\n        else if (x >= 50) {\n            rom += \"L\";\n            x -= 50;\n        }\n        else if (x >= 40) {\n            rom += \"XL\";\n            x -= 40;\n        }\n        else if (x >= 10) {\n            rom += \"X\";\n            x -= 10;\n        }\n        else if (x == 9) {\n            rom += \"IX\";\n            x -= 9;\n        }\n        else if (x >= 5) {\n            rom += \"V\";\n            x -= 5;\n        }\n        else if (x == 4) {\n            rom += \"IV\";\n            x -= 4;\n        }\n        else if (x >= 1) {\n            rom += \"I\";\n            x -= 1;\n        }\n        else {\n            throw (new Error(\"toRoman encountered x = \" + x));\n        }\n    }\n    return rom;\n};\nconst formatNumber = function (num, style) {\n    const delimPattern = style.replace(/[a-zA-Z0-9]+/g, \"$\");\n    const numFormat = style.replace(/[.()]/g, \"\");\n    let numStr;\n    switch (numFormat) {\n        case \"1\":\n            numStr = num.toString();\n            break;\n        case \"a\":\n            numStr = String.fromCodePoint(96 + (num % 26));\n            break;\n        case \"A\":\n            numStr = String.fromCodePoint(64 + (num % 26));\n            break;\n        case \"i\":\n            numStr = toRoman(num).toLowerCase();\n            break;\n        case \"I\":\n            numStr = toRoman(num);\n            break;\n        default:\n            throw (new Error(\"formatNumber encountered unknown style \" + style));\n    }\n    return delimPattern.replace(\"$\", numStr);\n};\nclass DjotRenderer {\n    constructor(doc, options = {}) {\n        this.prefixes = [];\n        this.buffer = [];\n        this.startOfLine = true;\n        this.endOfPrefix = 0;\n        this.column = 0;\n        this.needsBlankLine = false;\n        this.handlers = {\n            doc: (node) => {\n                this.renderChildren(node.children);\n                this.prefixes = [];\n                this.cr();\n                const hasReferences = Object.keys(node.references).length > 0;\n                if (hasReferences) {\n                    this.cr();\n                    this.newline();\n                }\n                for (const k in node.references) {\n                    this.renderNode(node.references[k]);\n                }\n                const hasFootnotes = Object.keys(node.footnotes).length > 0;\n                for (const k in node.footnotes) {\n                    this.renderNode(node.footnotes[k]);\n                }\n                this.prefixes = [];\n                this.cr();\n            },\n            footnote: (node) => {\n                this.lit(\"[^\" + node.label + \"]:\");\n                this.space();\n                this.needsBlankLine = false;\n                this.prefixes.push(\"  \");\n                this.renderChildren(node.children);\n                this.prefixes.pop();\n                this.blankline();\n            },\n            reference: (node) => {\n                this.lit(\"[\");\n                this.lit(node.label);\n                this.lit(\"]:\");\n                this.prefixes.push(\"  \");\n                this.space();\n                this.lit(node.destination);\n                this.wrap();\n                this.prefixes.pop();\n                this.blankline();\n            },\n            para: (node) => {\n                this.renderChildren(node.children);\n                this.blankline();\n            },\n            thematic_break: () => {\n                this.lit(\"* * * * *\");\n                this.blankline();\n            },\n            div: (node) => {\n                this.lit(\":::\");\n                this.cr();\n                this.renderChildren(node.children);\n                this.cr();\n                this.lit(\":::\");\n                this.blankline();\n            },\n            heading: (node) => {\n                const hashes = \"#\".repeat(node.level);\n                this.lit(hashes + \" \");\n                this.prefixes.push(hashes + \" \");\n                this.renderChildren(node.children);\n                this.prefixes.pop();\n                this.blankline();\n            },\n            block_quote: (node) => {\n                this.prefixes.push(\"> \");\n                this.lit(\"> \");\n                this.renderChildren(node.children);\n                this.prefixes.pop();\n                this.blankline();\n            },\n            section: (node) => {\n                this.renderChildren(node.children);\n            },\n            code_block: (node) => {\n                const ticks = verbatimDelim(node, 3);\n                this.lit(ticks);\n                if (node.lang) {\n                    this.lit(\" \" + node.lang);\n                }\n                this.cr();\n                this.litlines(node.text);\n                this.cr();\n                this.lit(ticks);\n                this.blankline();\n            },\n            raw_block: (node) => {\n                const ticks = verbatimDelim(node, 3);\n                this.lit(ticks);\n                this.lit(\" =\" + node.format);\n                this.cr();\n                this.litlines(node.text);\n                this.cr();\n                this.lit(ticks);\n                this.blankline();\n            },\n            definition_list: (node) => {\n                const items = node.children;\n                for (let i = 0; i < items.length; i++) {\n                    const item = items[i];\n                    if (i > 0) {\n                        this.newline();\n                    }\n                    this.lit(\":\");\n                    this.needsBlankLine = false;\n                    this.space();\n                    this.prefixes.push(\" \".repeat(2));\n                    this.renderChildren(item.children);\n                    this.prefixes.pop();\n                }\n            },\n            ordered_list: (node) => {\n                const style = node.style;\n                const start = node.start || 1;\n                const items = node.children;\n                const tight = node.tight;\n                for (let i = 0; i < items.length; i++) {\n                    const item = items[i];\n                    if (i > 0) {\n                        this.cr();\n                        if (!tight) {\n                            this.newline();\n                        }\n                    }\n                    const marker = formatNumber(start + i, style);\n                    this.lit(marker);\n                    this.needsBlankLine = false;\n                    this.space();\n                    this.prefixes.push(\" \".repeat(marker.length + 1));\n                    this.renderChildren(item.children);\n                    this.prefixes.pop();\n                }\n                if (tight) { // otherwise we already have a blankline\n                    this.blankline();\n                }\n            },\n            bullet_list: (node) => {\n                const items = node.children;\n                const tight = node.tight;\n                for (let i = 0; i < items.length; i++) {\n                    const item = items[i];\n                    if (i > 0) {\n                        this.cr();\n                        if (!tight) {\n                            this.newline();\n                        }\n                    }\n                    const marker = node.style;\n                    this.lit(marker);\n                    this.needsBlankLine = false;\n                    this.space();\n                    this.prefixes.push(\" \".repeat(marker.length + 1));\n                    this.renderChildren(item.children);\n                    this.prefixes.pop();\n                }\n                if (tight) { // otherwise we already have a blankline\n                    this.blankline();\n                }\n            },\n            task_list: (node) => {\n                const items = node.children;\n                const tight = node.tight;\n                for (let i = 0; i < items.length; i++) {\n                    const item = items[i];\n                    if (i > 0) {\n                        this.cr();\n                        if (!tight) {\n                            this.newline();\n                        }\n                    }\n                    this.needsBlankLine = false;\n                    this.lit(`- [${item.checkbox === \"checked\" ? \"X\" : \" \"}]`);\n                    this.space();\n                    this.prefixes.push(\" \".repeat(6));\n                    this.renderChildren(item.children);\n                    this.prefixes.pop();\n                }\n                if (tight) { // otherwise we already have a blankline\n                    this.blankline();\n                }\n            },\n            term: (node) => {\n                this.renderChildren(node.children);\n                this.blankline();\n            },\n            definition: (node) => {\n                this.renderChildren(node.children);\n            },\n            table: (node) => {\n                const captions = node.children.filter(ast_1.isCaption);\n                const rows = node.children.filter(ast_1.isRow);\n                for (let i = 0; i < rows.length; i++) {\n                    const row = rows[i];\n                    // if last row was head and this is not, add separator line\n                    if (\"head\" in row && !row.head && i > 0 &&\n                        rows[i - 1].head) {\n                        const lastRow = rows[i - 1];\n                        for (let j = 0; j < lastRow.children.length; j++) {\n                            if (j === 0) {\n                                this.lit(\"|\");\n                            }\n                            switch (lastRow && lastRow.children[j].align) {\n                                case \"left\":\n                                    this.lit(\":--\");\n                                    break;\n                                case \"right\":\n                                    this.lit(\"--:\");\n                                    break;\n                                case \"center\":\n                                    this.lit(\":-:\");\n                                    break;\n                                default:\n                                    this.lit(\"---\");\n                            }\n                            this.lit(\"|\");\n                        }\n                        this.cr();\n                    }\n                    // now add the proper row\n                    for (let j = 0; j < row.children.length; j++) {\n                        const cell = row.children[j];\n                        if (j === 0) {\n                            this.lit(\"|\");\n                        }\n                        this.noWrap(() => {\n                            // this awkward test is needed because a Caption can\n                            // be a child of Table; revisit this?\n                            if (cell.tag === \"cell\") {\n                                this.renderChildren(cell.children);\n                            }\n                        });\n                        this.lit(\"|\");\n                    }\n                    this.cr();\n                }\n                if (captions.length > 0 && captions[0].children.length > 0) {\n                    this.newline();\n                    this.lit(\"^ \");\n                    this.needsBlankLine = false;\n                    this.prefixes.push(\"  \");\n                    this.renderChildren(captions[0].children);\n                    this.prefixes.pop();\n                    this.blankline();\n                }\n                this.blankline();\n            },\n            str: (node) => {\n                node.text.split(/  */).forEach((s, i) => {\n                    if (i > 0) {\n                        this.space();\n                    }\n                    this.out(s);\n                });\n            },\n            space: () => { this.space(); },\n            soft_break: () => { this.soft_break(); },\n            smart_punctuation: (node) => { this.lit(node.text); },\n            non_breaking_space: () => { this.lit(\"\\\\ \"); },\n            single_quoted: this.inlineContainer(\"'\"),\n            double_quoted: this.inlineContainer(\"\\\"\"),\n            emph: this.inlineContainer(\"_\"),\n            strong: this.inlineContainer(\"*\"),\n            superscript: this.inlineContainer(\"^\"),\n            subscript: this.inlineContainer(\"~\"),\n            mark: this.inlineContainer(\"=\", true),\n            delete: this.inlineContainer(\"-\", true),\n            insert: this.inlineContainer(\"+\", true),\n            footnote_reference: (node) => {\n                this.lit(\"[^\" + node.text + \"]\");\n            },\n            symb: (node) => {\n                this.lit(\":\" + node.alias + \":\");\n            },\n            email: (node) => {\n                this.lit(\"<\" + node.text + \">\");\n            },\n            url: (node) => {\n                this.lit(\"<\" + node.text + \">\");\n            },\n            span: (node) => {\n                this.lit(\"[\");\n                this.renderChildren(node.children);\n                this.lit(\"]\");\n            },\n            link: (node) => {\n                this.lit(\"[\");\n                this.renderChildren(node.children);\n                this.lit(\"]\");\n                if (node.reference) {\n                    this.lit(\"[\");\n                    if (node.reference !== (0, parse_1.getStringContent)(node)) {\n                        this.lit(node.reference);\n                    }\n                    this.lit(\"]\");\n                }\n                else if (node.destination) {\n                    this.lit(\"(\");\n                    this.lit(node.destination);\n                    this.lit(\")\");\n                }\n                else { // should not happen\n                    this.lit(\"()\");\n                }\n            },\n            image: (node) => {\n                this.lit(\"![\");\n                this.renderChildren(node.children);\n                this.lit(\"]\");\n                if (node.reference) {\n                    this.lit(\"[\");\n                    if (node.reference !== (0, parse_1.getStringContent)(node)) {\n                        this.lit(node.reference);\n                    }\n                    this.lit(\"]\");\n                }\n                else if (node.destination) {\n                    this.lit(\"(\");\n                    this.lit(node.destination);\n                    this.lit(\")\");\n                }\n                else { // should not happen\n                    this.lit(\"()\");\n                }\n            },\n            raw_inline: (node) => {\n                this.verbatimNode(node);\n                this.lit(\"{=\" + node.format + \"}\");\n            },\n            verbatim: (node) => {\n                this.verbatimNode(node);\n            },\n            inline_math: (node) => {\n                this.lit(\"$\");\n                this.verbatimNode(node);\n            },\n            display_math: (node) => {\n                this.lit(\"$$\");\n                this.verbatimNode(node);\n            }\n        };\n        this.doc = doc;\n        this.wrapWidth = (options === null || options === void 0 ? void 0 : options.wrapWidth) || 0;\n    }\n    escape(s) {\n        s = s.replace(/([~`'\"${}[\\]^<>\\\\*_]|-(?=-)|!(=\\[)|\\.(?=\\.))/g, \"\\\\$1\");\n        if (this.column === 0 || this.column === this.endOfPrefix) {\n            s = s.replace(/^#/, \"\\\\#\");\n        }\n        return s;\n    }\n    out(s) {\n        this.lit(this.escape(s));\n    }\n    doBlankLines() {\n        if (this.needsBlankLine) {\n            this.cr();\n            this.newline();\n            this.needsBlankLine = false;\n        }\n    }\n    lit(s) {\n        this.buffer.push(s);\n        this.column += s.length;\n        this.startOfLine = false;\n    }\n    blankline() {\n        this.needsBlankLine = true;\n    }\n    newline() {\n        if (this.endOfPrefix === this.column) {\n            // remove spaces after prefix\n            while (/  *$|^$/.test(this.buffer[this.buffer.length - 1])) {\n                this.buffer[this.buffer.length - 1] =\n                    this.buffer[this.buffer.length - 1].replace(/  *$/, \"\");\n                if (this.buffer[this.buffer.length - 1] === \"\") {\n                    this.buffer.pop();\n                }\n            }\n        }\n        this.endOfPrefix = 0;\n        this.column = 0;\n        this.buffer.push(\"\\n\");\n        if (this.prefixes.length > 0) {\n            for (let i = 0, len = this.prefixes.length; i < len; i++) {\n                this.buffer.push(this.prefixes[i]);\n                this.column += this.prefixes[i].length;\n            }\n            this.endOfPrefix = this.column;\n        }\n        this.startOfLine = true;\n    }\n    cr() {\n        if (!this.startOfLine) {\n            this.newline();\n        }\n    }\n    wrap() {\n        if (this.wrapWidth <= 0) {\n            return;\n        }\n        let idx = this.buffer.length - 1;\n        if (!this.startOfLine && this.buffer.length > 0 &&\n            this.column > this.wrapWidth) {\n            // backup to last space:\n            let lastbuff;\n            while (idx >= 0) {\n                lastbuff = this.buffer[idx];\n                if (lastbuff === \" \") {\n                    break;\n                }\n                else if (/^[ \\r\\n]+$/.test(lastbuff)) { // e.g. indentation\n                    return; // can't wrap\n                }\n                idx--;\n            }\n        }\n        if (idx < this.buffer.length - 1) {\n            const excessOnLine = this.buffer.splice(idx + 1);\n            if (this.buffer[this.buffer.length - 1] === \" \") {\n                this.buffer.pop(); // pop space at end of line\n            }\n            // put the content on next line:\n            this.newline();\n            this.startOfLine = true;\n            for (let i = 0; i < excessOnLine.length; i++) {\n                this.buffer.push(excessOnLine[i]);\n                this.column += excessOnLine[i].length;\n                this.startOfLine = false;\n            }\n        }\n    }\n    space() {\n        this.wrap();\n        this.lit(\" \");\n    }\n    soft_break() {\n        if (this.wrapWidth === 0) {\n            this.newline();\n        }\n        else {\n            this.space();\n        }\n    }\n    needsBraces(node) {\n        return (beginsWithWhitespace(node) ||\n            endsWithWhitespace(node) ||\n            (this.buffer.length > 0 &&\n                /\\w$/.test(this.buffer[this.buffer.length - 1])));\n    }\n    noWrap(action) {\n        const oldWrapWidth = this.wrapWidth;\n        this.wrapWidth = -1; // no wrap + soft breaks are spaces\n        action();\n        this.wrapWidth = oldWrapWidth;\n    }\n    inlineContainer(delim, needsBraces) {\n        const self = this;\n        return function (node) {\n            needsBraces = needsBraces || self.needsBraces(node);\n            if (needsBraces)\n                self.lit(\"{\");\n            self.lit(delim);\n            self.renderChildren(node.children);\n            self.lit(delim);\n            if (needsBraces)\n                self.lit(\"}\");\n        };\n    }\n    litlines(s) {\n        const lns = s.split(/\\r?\\n/);\n        if (lns[lns.length - 1] === \"\") {\n            lns.pop();\n        }\n        for (const ln of lns) {\n            this.lit(ln);\n            this.cr();\n        }\n    }\n    verbatimNode(node) {\n        const ticks = verbatimDelim(node, 1);\n        this.lit(ticks);\n        if (/^`/.test(node.text)) {\n            this.lit(\" \");\n        }\n        this.lit(node.text);\n        if (/`$/.test(node.text)) {\n            this.lit(\" \");\n        }\n        this.lit(ticks);\n    }\n    renderChildren(children) {\n        for (let i = 0, len = children.length; i < len; i++) {\n            this.renderNode(children[i]);\n        }\n        if (children[0] && !(0, ast_1.isBlock)(children[0])) {\n            this.wrap();\n        }\n    }\n    renderNode(node) {\n        this.doBlankLines();\n        const handler = this.handlers[node.tag];\n        if (handler) {\n            if (node.attributes && (0, ast_1.isBlock)(node)) {\n                this.renderAttributes(node);\n                this.cr();\n            }\n            handler(node);\n            if (node.attributes && (0, ast_1.isInline)(node)) {\n                this.renderAttributes(node);\n            }\n        }\n        else {\n            throw (new Error(\"No renderer defined for node type \" + node.tag));\n        }\n    }\n    renderAttributes(node) {\n        if (!node.attributes || Object.keys(node.attributes).length === 0) {\n            return;\n        }\n        const attr = node.attributes;\n        this.lit(\"{\");\n        let isfirst = true;\n        if ((0, ast_1.isBlock)(node)) {\n            this.prefixes.push(\" \");\n        }\n        for (const k in attr) {\n            if (!isfirst) {\n                this.space();\n            }\n            if (k === \"id\") {\n                this.lit(\"#\");\n                this.lit(attr[k]);\n            }\n            else if (k === \"class\") {\n                const classes = attr[k].split(/  */);\n                for (let i = 0; i < classes.length; i++) {\n                    if (i > 0) {\n                        this.space();\n                    }\n                    this.lit(\".\");\n                    this.lit(classes[i]);\n                }\n            }\n            else {\n                this.lit(k);\n                this.lit(\"=\\\"\");\n                this.out(attr[k]);\n                this.lit(\"\\\"\");\n            }\n            isfirst = false;\n        }\n        if ((0, ast_1.isBlock)(node)) {\n            this.prefixes.pop();\n        }\n        this.lit(\"}\");\n    }\n    render() {\n        this.renderNode(this.doc);\n        return this.buffer.join(\"\");\n    }\n}\nconst renderDjot = function (doc, options = {}) {\n    return new DjotRenderer(doc, options).render();\n};\nexports.renderDjot = renderDjot;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.version = void 0;\nexports.version = \"0.3.1\";\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isInline = exports.isBlock = exports.version = exports.renderDjot = exports.toPandoc = exports.fromPandoc = exports.applyFilter = exports.HTMLRenderer = exports.renderHTML = exports.parseEvents = exports.renderAST = exports.parse = void 0;\nvar parse_1 = require(\"./parse\");\nObject.defineProperty(exports, \"parse\", { enumerable: true, get: function () { return parse_1.parse; } });\nObject.defineProperty(exports, \"renderAST\", { enumerable: true, get: function () { return parse_1.renderAST; } });\nvar block_1 = require(\"./block\");\nObject.defineProperty(exports, \"parseEvents\", { enumerable: true, get: function () { return block_1.parseEvents; } });\nvar html_1 = require(\"./html\");\nObject.defineProperty(exports, \"renderHTML\", { enumerable: true, get: function () { return html_1.renderHTML; } });\nObject.defineProperty(exports, \"HTMLRenderer\", { enumerable: true, get: function () { return html_1.HTMLRenderer; } });\nvar filter_1 = require(\"./filter\");\nObject.defineProperty(exports, \"applyFilter\", { enumerable: true, get: function () { return filter_1.applyFilter; } });\nvar pandoc_1 = require(\"./pandoc\");\nObject.defineProperty(exports, \"fromPandoc\", { enumerable: true, get: function () { return pandoc_1.fromPandoc; } });\nObject.defineProperty(exports, \"toPandoc\", { enumerable: true, get: function () { return pandoc_1.toPandoc; } });\nvar djot_renderer_1 = require(\"./djot-renderer\");\nObject.defineProperty(exports, \"renderDjot\", { enumerable: true, get: function () { return djot_renderer_1.renderDjot; } });\nvar version_1 = require(\"./version\");\nObject.defineProperty(exports, \"version\", { enumerable: true, get: function () { return version_1.version; } });\nvar ast_1 = require(\"./ast\");\nObject.defineProperty(exports, \"isBlock\", { enumerable: true, get: function () { return ast_1.isBlock; } });\nObject.defineProperty(exports, \"isInline\", { enumerable: true, get: function () { return ast_1.isInline; } });\n", "/* jshint browser: true */\n\n(function () {\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if (el) el.parentNode.removeChild(el);\n  }\n\n  // The mirror div will replicate the textarea's style\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n  var isInput = element.nodeName === 'INPUT';\n\n  // Default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (!isInput)\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // Position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // Transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      // Special case for <input>s because text is rendered centered and line height may be != height\n      style.lineHeight = computed.height;\n    } else {\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // The second special handling for input type=\"text\" vs textarea:\n  // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (isInput)\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // For inputs, just '.' would be enough, but no need to bother.\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\n    height: parseInt(computed['lineHeight'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser) {\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n", "export const isArray = (what: unknown): boolean => Array.isArray(what);\n", "import { isArray } from \"./isArray.ts\";\n\nconst select = (selector) => ({\n  el: document.querySelector(selector),\n  elements: document.querySelectorAll(selector),\n  placeholder(what) {\n    this.el.placeholder = what;\n    return this;\n  },\n  getValue() {\n    return this.el.value;\n  },\n  insertAtCaret(text) {\n    this.el.setRangeText(\n      text,\n      this.el.selectionStart,\n      this.el.selectionEnd,\n      \"end\",\n    );\n    return this;\n  },\n  setValue(value) {\n    this.el.value = value;\n    const event = new Event(\"input\", {\n      bubbles: true,\n      cancelable: true,\n    });\n    this.el.dispatchEvent(event);\n    return this;\n  },\n  innerHTML(htmlString) {\n    this.el.innerHTML = htmlString;\n    return this;\n  },\n  html(content) {\n    this.el.innerHTML = \"\";\n    this.append(content);\n    return this;\n  },\n  append(el) {\n    const elements = isArray(el) ? el : [el];\n    elements.forEach((e) => {\n      const newContent = isElement(e) ? e : document.createTextNode(e);\n      this.el.appendChild(newContent);\n    });\n    return this;\n  },\n  appendListElement(text) {\n    const li = document.createElement(\"LI\");\n    li.appendChild(document.createTextNode(text));\n    this.el.appendChild(li);\n    return this;\n  },\n  removeClass(className) {\n    this.el.classList.remove(className);\n    return this;\n  },\n  removeClasses(classes = []) {\n    classes.map((className) => this.removeClass(className));\n    return this;\n  },\n  addClass(className) {\n    this.el.classList.add(className);\n    return this;\n  },\n  hasClass(cls) {\n    return (\" \" + this.el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n  },\n  show(shouldShow = true) {\n    if (shouldShow) {\n      this.removeClass(\"hidden\");\n    } else {\n      this.hide();\n    }\n    return this;\n  },\n  hide() {\n    this.addClass(\"hidden\");\n    return this;\n  },\n  toggle(className = \"hidden\") {\n    if (this.hasClass(className)) this.removeClass(className);\n    else this.addClass(className);\n    return this;\n  },\n  focus() {\n    this.el.focus();\n    return this;\n  },\n  listenAll(event, fn) {\n    const elements = Array.prototype.slice.call(this.elements);\n    elements.map((el) => {\n      el.addEventListener(event, (e) => fn(e.srcElement));\n    });\n    return this;\n  },\n  listen(event, fn) {\n    this.el.addEventListener(event, (e) => fn(e, this));\n    return this;\n  },\n  click() {\n    if (this.el) {\n      this.el.click();\n    }\n  },\n  checked(value) {\n    this.el.checked = !!value;\n    return this;\n  },\n  disable(shouldDisable = true) {\n    this.el.disabled = shouldDisable;\n    return this;\n  },\n});\n\nexport const isElement = (obj) => {\n  try {\n    return obj instanceof HTMLElement;\n  } catch (_e) {\n    //Browsers not supporting W3 DOM2 don't have HTMLElement and\n    //an exception is thrown and we end up here. Testing some\n    //properties that all elements have (works on IE7)\n    return (\n      typeof obj === \"object\" &&\n      obj.nodeType === 1 &&\n      typeof obj.style === \"object\" &&\n      typeof obj.ownerDocument === \"object\"\n    );\n  }\n};\n\nexport default select;\n", "import select from \"../../utils/dom.js\";\n\ntype NotificationType = \"info\" | \"success\" | \"error\" | \"warning\";\n\nconst notificationTypes: Record<NotificationType, NotificationType> = {\n  info: \"info\",\n  success: \"success\",\n  error: \"error\",\n  warning: \"warning\",\n};\n\nconst notification = select(\"#notification\");\n\nconst cleanNotificationClasses = (): void => {\n  notification.removeClasses(Object.values(notificationTypes));\n};\n\nnotification.el.onclick = () => cleanNotificationClasses();\n\nconst notificationFactory = () =>\n  Object.values(notificationTypes).reduce(\n    (acc, notificationType) => ({\n      ...acc,\n      [notificationType](message: string): void {\n        // @ts-ignore fix later\n        this.showNotification(message, notificationType);\n      },\n    }),\n    {} as Record<NotificationType, (message: string) => void>,\n  );\n\ninterface Notification {\n  autohideDuration: number;\n  timer?: number;\n  removeAfter(): void;\n  showNotification(message: string, type?: NotificationType): void;\n  info(message: string): void;\n  success(message: string): void;\n  error(message: string): void;\n  warning(message: string): void;\n}\n\nconst Notification = (autohideDuration = 5): Notification => ({\n  autohideDuration,\n  timer: undefined,\n  removeAfter() {\n    this.timer = self.setTimeout(() => {\n      cleanNotificationClasses();\n    }, this.autohideDuration * 1000);\n  },\n  showNotification(message, type = notificationTypes.info) {\n    cleanNotificationClasses();\n    notification.innerHTML(message).addClass(type);\n    clearTimeout(this.timer);\n    this.removeAfter();\n  },\n  ...notificationFactory(),\n});\n\nconst notify = Notification();\nexport default notify;\n", "import notify from \"./notify.ts\";\n\nconst welcomeUser = () => {\n  const lastVisit = localStorage.getItem(\"miropad.user\");\n  if (lastVisit) {\n    notify.info(`\uD83E\uDD17 Happy to see you again from ${lastVisit}`);\n  } else {\n    notify.info(\n      `<h1>Welcome \uD83D\uDC4B \uD83D\uDE03 </h1>\n       <p>Use  Ctrl+S:  to save your note<p/>\n       <p>& Ctrl+P: to format a JSON doc<p/>\n      `,\n      100,\n    );\n  }\n  localStorage.setItem(\"miropad.user\", new Date().toLocaleDateString());\n};\n\nexport default welcomeUser;\n", "import notify from \"../components/molecules/notify.ts\";\nimport { isArray } from \"./isArray.ts\";\n\nconst storage = (() => {\n  return {\n    set: function (key, what) {\n      localStorage.setItem(key, what);\n      return this;\n    },\n    update: function (key, attr) {\n      const current = JSON.parse(this.get(key));\n      localStorage.setItem(\n        key,\n        JSON.stringify({\n          ...current,\n          ...attr,\n        }),\n      );\n      return this;\n    },\n    remove: function (key) {\n      localStorage.removeItem(key);\n      return this;\n    },\n    get: function (key) {\n      if (isArray(key)) {\n        return key.reduce((acc, k) => {\n          return {\n            ...acc,\n            [k]: this.get(k),\n          };\n        }, {});\n      }\n\n      return localStorage.getItem(key);\n    },\n    parse: function (key) {\n      const value = this.get(key);\n      return JSON.parse(value);\n    },\n    getDictionary: function () {\n      const savedTxt = localStorage.getItem(\"__dictionary__\");\n      return savedTxt ? JSON.parse(savedTxt) : [];\n    },\n    removeFromDictionary: function (word) {\n      const currentDictionary = this.getDictionary();\n      const newDictionary = currentDictionary.filter((w) => {\n        return w !== word;\n      });\n\n      localStorage.setItem(\"__dictionary__\", JSON.stringify(newDictionary));\n    },\n    saveToDictionary: async function (what) {\n      if (what.length) {\n        try {\n          const cleanText = what.toLowerCase().replace(/[^a-zA-Z\u03AC-\u03CE\u0391-\u03A9]/g, \" \");\n          const current = await this.getDictionary();\n          const words = [\n            ...cleanText.split(\" \").filter((w) => w.length > 3),\n            ...current,\n          ];\n          const distinctWords = [...new Set(words)];\n          localStorage.setItem(\"__dictionary__\", JSON.stringify(distinctWords));\n        } catch (e) {\n          notify.error(\n            `\uD83D\uDE31 Something went wrong while trying to save to local storage ${e}`,\n          );\n        }\n      } else {\n        notify.warning(\"\uD83D\uDE15 Nothing to save!\");\n      }\n      return this;\n    },\n  };\n})();\n\nexport default storage;\n", "export const configuration = {\n  github: {\n    client_id: \"70c1955dfe4914c52c10\",\n    request_state: \"miro-pad\",\n  },\n  auth_service: \"https://vercel-api-phi.vercel.app/api/auth\",\n  mail_service: {\n    api: \"https://vercel-api-phi.vercel.app/api/mail\",\n    signature: `Theo Mironidis <br/>\n    Software Engineer <br/>\n    https://teomrd.github.io`,\n  },\n  file_service: {\n    api: \"https://vercel-api-phi.vercel.app/api/upload\",\n  },\n} as const;\n", "import storage from \"../localstorage.js\";\nimport {\n  getNotes,\n  Note,\n} from \"../../components/organisms/noteManager/noteManager.ts\";\nimport notify from \"../../components/molecules/notify.ts\";\nimport { configuration } from \"../../../configuration.ts\";\n\nexport const getGist = (id: string, token = storage.get(\"authToken\")) =>\n  fetch(`https://api.github.com/gists/${id}`, {\n    headers: {\n      Authorization: `token ${token}`,\n    },\n  }).then((response) => {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response.json();\n  });\n\nexport const getAuthenticatedUsersGists = (token = storage.get(\"authToken\")) =>\n  fetch(\"https://api.github.com/gists\", {\n    headers: {\n      Authorization: `token ${token}`,\n    },\n  }).then((response) => {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response.json();\n  });\n\nexport const deleteFileOnGist = async (\n  fileName: string,\n  gistId = storage.get(\"gistId\"),\n  token = storage.get(\"authToken\"),\n) => {\n  const response = await fetch(`https://api.github.com/gists/${gistId}`, {\n    method: \"PATCH\",\n    headers: {\n      Authorization: `token ${token}`,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      files: {\n        [fileName]: null,\n      },\n      description: \"MiroPad Gist\",\n      public: false,\n    }),\n  });\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  const responseAsJson = await response.json();\n  notify.info(`${fileName} deleted on Gist!`);\n  return responseAsJson;\n};\n\nexport const updateGist = (\n  notes = getNotes(),\n  gistId = storage.get(\"gistId\"),\n  token = storage.get(\"authToken\"),\n) => {\n  if (gistId && token) {\n    const noteToFiles = notes.reduce((acc, { id, text, deleted }) => {\n      return {\n        ...acc,\n        [id]: deleted ? null : { content: text },\n      };\n    }, {});\n    return fetch(`https://api.github.com/gists/${gistId}`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `token ${token}`,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        files: noteToFiles,\n        description: \"MiroPad Gist\",\n        public: false,\n      }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then((responseAsJson) => {\n        notes.map(({ id, deleted }) => {\n          if (deleted) localStorage.removeItem(id);\n        });\n        return responseAsJson;\n      });\n  }\n};\n\nexport const createNewGist = async (token = storage.get(\"authToken\")) => {\n  const notes = getNotes();\n  const noteToFiles = notes.reduce((acc, note) => {\n    return {\n      ...acc,\n      [note.id]: {\n        content: note.text,\n      },\n    };\n  }, {});\n  const response = await fetch(\"https://api.github.com/gists\", {\n    method: \"POST\",\n    headers: {\n      Authorization: `token ${token}`,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      files: noteToFiles,\n      description: \"MiroPad Gist\",\n      public: false,\n    }),\n  });\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  const responseAsJson = await response.json();\n  return responseAsJson;\n};\n\nexport const getAuthToken = (code: string, state: string) =>\n  fetch(`${configuration.auth_service}?state=${state}&code=${code}`, {\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n  })\n    .then((response) => {\n      if (!response.ok) {\n        throw Error(response.statusText);\n      }\n      return response.json();\n    })\n    .then((responseAsJson) => {\n      return responseAsJson;\n    });\n\nexport const publishGist = async ({\n  note,\n  token = storage.get(\"authToken\"),\n}: {\n  note: Note;\n  token?: string;\n}) => {\n  const response = await fetch(\"https://api.github.com/gists\", {\n    method: \"POST\",\n    headers: {\n      Authorization: `token ${token}`,\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      files: {\n        [note.id]: {\n          content: note.text,\n        },\n      },\n      description: \"MiroPad Gist\",\n      public: true,\n    }),\n  });\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  const responseAsJson = await response.json();\n  return responseAsJson;\n};\n", "export const empty = new Uint8Array(0)\n\nexport function toHex (d: Uint8Array): string {\n  return d.reduce((hex, byte) => hex + byte.toString(16).padStart(2, '0'), '')\n}\n\nexport function fromHex (hex: string): Uint8Array {\n  const hexes = hex.match(/../g)\n  return hexes != null ? new Uint8Array(hexes.map(b => parseInt(b, 16))) : empty\n}\n\nexport function equals (aa: Uint8Array, bb: Uint8Array): boolean {\n  if (aa === bb) return true\n  if (aa.byteLength !== bb.byteLength) {\n    return false\n  }\n\n  for (let ii = 0; ii < aa.byteLength; ii++) {\n    if (aa[ii] !== bb[ii]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function coerce (o: ArrayBufferView | ArrayBuffer | Uint8Array): Uint8Array {\n  if (o instanceof Uint8Array && o.constructor.name === 'Uint8Array') return o\n  if (o instanceof ArrayBuffer) return new Uint8Array(o)\n  if (ArrayBuffer.isView(o)) {\n    return new Uint8Array(o.buffer, o.byteOffset, o.byteLength)\n  }\n  throw new Error('Unknown type, must be binary type')\n}\n\nexport function isBinary (o: unknown): o is ArrayBuffer | ArrayBufferView {\n  return o instanceof ArrayBuffer || ArrayBuffer.isView(o)\n}\n\nexport function fromString (str: string): Uint8Array {\n  return new TextEncoder().encode(str)\n}\n\nexport function toString (b: Uint8Array): string {\n  return new TextDecoder().decode(b)\n}\n", "/* eslint-disable */\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\n/**\n * @param {string} ALPHABET\n * @param {any} name\n */\nfunction base (ALPHABET, name) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256);\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i);\n    var xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i;\n  }\n  var BASE = ALPHABET.length;\n  var LEADER = ALPHABET.charAt(0);\n  var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  /**\n   * @param {any[] | Iterable<number>} source\n   */\n  function encode (source) {\n    // @ts-ignore\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0;\n    var length = 0;\n    var pbegin = 0;\n    var pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;\n    var b58 = new Uint8Array(size);\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin];\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0;\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0;\n        b58[it1] = (carry % BASE) >>> 0;\n        carry = (carry / BASE) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      pbegin++;\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]); }\n    return str\n  }\n  /**\n   * @param {string | string[]} source\n   */\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0;\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0;\n    var length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size);\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)];\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0;\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0;\n        b256[it3] = (carry % 256) >>> 0;\n        carry = (carry / 256) >>> 0;\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i;\n      psz++;\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    var vch = new Uint8Array(zeroes + (size - it4));\n    var j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch\n  }\n  /**\n   * @param {string | string[]} string\n   */\n  function decode (string) {\n    var buffer = decodeUnsafe(string);\n    if (buffer) { return buffer }\n    throw new Error(`Non-${name} character`)\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nvar src = base;\n\nvar _brrp__multiformats_scope_baseX = src;\n\nexport default _brrp__multiformats_scope_baseX;\n", "import { coerce } from '../bytes.js'\nimport basex from '../vendor/base-x.js'\nimport type { BaseCodec, BaseDecoder, BaseEncoder, CombobaseDecoder, Multibase, MultibaseCodec, MultibaseDecoder, MultibaseEncoder, UnibaseDecoder } from './interface.js'\n\ninterface EncodeFn { (bytes: Uint8Array): string }\ninterface DecodeFn { (text: string): Uint8Array }\n\n/**\n * Class represents both BaseEncoder and MultibaseEncoder meaning it\n * can be used to encode to multibase or base encode without multibase\n * prefix.\n */\nclass Encoder<Base extends string, Prefix extends string> implements MultibaseEncoder<Prefix>, BaseEncoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseEncode: EncodeFn\n\n  constructor (name: Base, prefix: Prefix, baseEncode: EncodeFn) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n  }\n\n  encode (bytes: Uint8Array): Multibase<Prefix> {\n    if (bytes instanceof Uint8Array) {\n      return `${this.prefix}${this.baseEncode(bytes)}`\n    } else {\n      throw Error('Unknown type, must be binary type')\n    }\n  }\n}\n\n/**\n * Class represents both BaseDecoder and MultibaseDecoder so it could be used\n * to decode multibases (with matching prefix) or just base decode strings\n * with corresponding base encoding.\n */\nclass Decoder<Base extends string, Prefix extends string> implements MultibaseDecoder<Prefix>, UnibaseDecoder<Prefix>, BaseDecoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseDecode: DecodeFn\n  private readonly prefixCodePoint: number\n\n  constructor (name: Base, prefix: Prefix, baseDecode: DecodeFn) {\n    this.name = name\n    this.prefix = prefix\n    const prefixCodePoint = prefix.codePointAt(0)\n    /* c8 ignore next 3 */\n    if (prefixCodePoint === undefined) {\n      throw new Error('Invalid prefix character')\n    }\n    this.prefixCodePoint = prefixCodePoint\n    this.baseDecode = baseDecode\n  }\n\n  decode (text: string): Uint8Array {\n    if (typeof text === 'string') {\n      if (text.codePointAt(0) !== this.prefixCodePoint) {\n        throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)\n      }\n      return this.baseDecode(text.slice(this.prefix.length))\n    } else {\n      throw Error('Can only multibase decode strings')\n    }\n  }\n\n  or<OtherPrefix extends string> (decoder: UnibaseDecoder<OtherPrefix> | ComposedDecoder<OtherPrefix>): ComposedDecoder<Prefix | OtherPrefix> {\n    return or(this, decoder)\n  }\n}\n\ntype Decoders<Prefix extends string> = Record<Prefix, UnibaseDecoder<Prefix>>\n\nclass ComposedDecoder<Prefix extends string> implements MultibaseDecoder<Prefix>, CombobaseDecoder<Prefix> {\n  readonly decoders: Decoders<Prefix>\n\n  constructor (decoders: Decoders<Prefix>) {\n    this.decoders = decoders\n  }\n\n  or <OtherPrefix extends string> (decoder: UnibaseDecoder<OtherPrefix> | ComposedDecoder<OtherPrefix>): ComposedDecoder<Prefix | OtherPrefix> {\n    return or(this, decoder)\n  }\n\n  decode (input: string): Uint8Array {\n    const prefix = input[0] as Prefix\n    const decoder = this.decoders[prefix]\n    if (decoder != null) {\n      return decoder.decode(input)\n    } else {\n      throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)\n    }\n  }\n}\n\nexport function or <L extends string, R extends string> (left: UnibaseDecoder<L> | CombobaseDecoder<L>, right: UnibaseDecoder<R> | CombobaseDecoder<R>): ComposedDecoder<L | R> {\n  // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n  return new ComposedDecoder({\n    ...(left.decoders ?? { [(left as UnibaseDecoder<L>).prefix]: left }),\n    ...(right.decoders ?? { [(right as UnibaseDecoder<R>).prefix]: right })\n  } as Decoders<L | R>)\n}\n\nexport class Codec<Base extends string, Prefix extends string> implements MultibaseCodec<Prefix>, MultibaseEncoder<Prefix>, MultibaseDecoder<Prefix>, BaseCodec, BaseEncoder, BaseDecoder {\n  readonly name: Base\n  readonly prefix: Prefix\n  readonly baseEncode: EncodeFn\n  readonly baseDecode: DecodeFn\n  readonly encoder: Encoder<Base, Prefix>\n  readonly decoder: Decoder<Base, Prefix>\n\n  constructor (name: Base, prefix: Prefix, baseEncode: EncodeFn, baseDecode: DecodeFn) {\n    this.name = name\n    this.prefix = prefix\n    this.baseEncode = baseEncode\n    this.baseDecode = baseDecode\n    this.encoder = new Encoder(name, prefix, baseEncode)\n    this.decoder = new Decoder(name, prefix, baseDecode)\n  }\n\n  encode (input: Uint8Array): string {\n    return this.encoder.encode(input)\n  }\n\n  decode (input: string): Uint8Array {\n    return this.decoder.decode(input)\n  }\n}\n\nexport function from <Base extends string, Prefix extends string> ({ name, prefix, encode, decode }: { name: Base, prefix: Prefix, encode: EncodeFn, decode: DecodeFn }): Codec<Base, Prefix> {\n  return new Codec(name, prefix, encode, decode)\n}\n\nexport function baseX <Base extends string, Prefix extends string> ({ name, prefix, alphabet }: { name: Base, prefix: Prefix, alphabet: string }): Codec<Base, Prefix> {\n  const { encode, decode } = basex(alphabet, name)\n  return from({\n    prefix,\n    name,\n    encode,\n    decode: (text: string): Uint8Array => coerce(decode(text))\n  })\n}\n\nfunction decode (string: string, alphabet: string, bitsPerChar: number, name: string): Uint8Array {\n  // Build the character lookup table:\n  const codes: Record<string, number> = {}\n  for (let i = 0; i < alphabet.length; ++i) {\n    codes[alphabet[i]] = i\n  }\n\n  // Count the padding bytes:\n  let end = string.length\n  while (string[end - 1] === '=') {\n    --end\n  }\n\n  // Allocate the output:\n  const out = new Uint8Array((end * bitsPerChar / 8) | 0)\n\n  // Parse the data:\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  let written = 0 // Next byte to write\n  for (let i = 0; i < end; ++i) {\n    // Read one character from the string:\n    const value = codes[string[i]]\n    if (value === undefined) {\n      throw new SyntaxError(`Non-${name} character`)\n    }\n\n    // Append the bits to the buffer:\n    buffer = (buffer << bitsPerChar) | value\n    bits += bitsPerChar\n\n    // Write out some bits if the buffer has a byte's worth:\n    if (bits >= 8) {\n      bits -= 8\n      out[written++] = 0xff & (buffer >> bits)\n    }\n  }\n\n  // Verify that we have received just enough bits:\n  if (bits >= bitsPerChar || (0xff & (buffer << (8 - bits))) !== 0) {\n    throw new SyntaxError('Unexpected end of data')\n  }\n\n  return out\n}\n\nfunction encode (data: Uint8Array, alphabet: string, bitsPerChar: number): string {\n  const pad = alphabet[alphabet.length - 1] === '='\n  const mask = (1 << bitsPerChar) - 1\n  let out = ''\n\n  let bits = 0 // Number of bits currently in the buffer\n  let buffer = 0 // Bits waiting to be written out, MSB first\n  for (let i = 0; i < data.length; ++i) {\n    // Slurp data into the buffer:\n    buffer = (buffer << 8) | data[i]\n    bits += 8\n\n    // Write out as much as we can:\n    while (bits > bitsPerChar) {\n      bits -= bitsPerChar\n      out += alphabet[mask & (buffer >> bits)]\n    }\n  }\n\n  // Partial character:\n  if (bits !== 0) {\n    out += alphabet[mask & (buffer << (bitsPerChar - bits))]\n  }\n\n  // Add padding characters until we hit a byte boundary:\n  if (pad) {\n    while (((out.length * bitsPerChar) & 7) !== 0) {\n      out += '='\n    }\n  }\n\n  return out\n}\n\n/**\n * RFC4648 Factory\n */\nexport function rfc4648 <Base extends string, Prefix extends string> ({ name, prefix, bitsPerChar, alphabet }: { name: Base, prefix: Prefix, bitsPerChar: number, alphabet: string }): Codec<Base, Prefix> {\n  return from({\n    prefix,\n    name,\n    encode (input: Uint8Array): string {\n      return encode(input, alphabet, bitsPerChar)\n    },\n    decode (input: string): Uint8Array {\n      return decode(input, alphabet, bitsPerChar, name)\n    }\n  })\n}\n", "import { rfc4648 } from './base.js'\n\nexport const base32 = rfc4648({\n  prefix: 'b',\n  name: 'base32',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567',\n  bitsPerChar: 5\n})\n\nexport const base32upper = rfc4648({\n  prefix: 'B',\n  name: 'base32upper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n  bitsPerChar: 5\n})\n\nexport const base32pad = rfc4648({\n  prefix: 'c',\n  name: 'base32pad',\n  alphabet: 'abcdefghijklmnopqrstuvwxyz234567=',\n  bitsPerChar: 5\n})\n\nexport const base32padupper = rfc4648({\n  prefix: 'C',\n  name: 'base32padupper',\n  alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=',\n  bitsPerChar: 5\n})\n\nexport const base32hex = rfc4648({\n  prefix: 'v',\n  name: 'base32hex',\n  alphabet: '0123456789abcdefghijklmnopqrstuv',\n  bitsPerChar: 5\n})\n\nexport const base32hexupper = rfc4648({\n  prefix: 'V',\n  name: 'base32hexupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV',\n  bitsPerChar: 5\n})\n\nexport const base32hexpad = rfc4648({\n  prefix: 't',\n  name: 'base32hexpad',\n  alphabet: '0123456789abcdefghijklmnopqrstuv=',\n  bitsPerChar: 5\n})\n\nexport const base32hexpadupper = rfc4648({\n  prefix: 'T',\n  name: 'base32hexpadupper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUV=',\n  bitsPerChar: 5\n})\n\nexport const base32z = rfc4648({\n  prefix: 'h',\n  name: 'base32z',\n  alphabet: 'ybndrfg8ejkmcpqxot1uwisza345h769',\n  bitsPerChar: 5\n})\n", "import { baseX } from './base.js'\n\nexport const base36 = baseX({\n  prefix: 'k',\n  name: 'base36',\n  alphabet: '0123456789abcdefghijklmnopqrstuvwxyz'\n})\n\nexport const base36upper = baseX({\n  prefix: 'K',\n  name: 'base36upper',\n  alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n})\n", "import { baseX } from './base.js'\n\nexport const base58btc = baseX({\n  name: 'base58btc',\n  prefix: 'z',\n  alphabet: '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n})\n\nexport const base58flickr = baseX({\n  name: 'base58flickr',\n  prefix: 'Z',\n  alphabet: '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ'\n})\n", "/* eslint-disable */\nvar encode_1 = encode;\n\nvar MSB = 0x80\n  , REST = 0x7F\n  , MSBALL = ~REST\n  , INT = Math.pow(2, 31);\n\n/**\n * @param {number} num\n * @param {number[]} out\n * @param {number} offset\n */\nfunction encode(num, out, offset) {\n  out = out || [];\n  offset = offset || 0;\n  var oldOffset = offset;\n\n  while(num >= INT) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num /= 128;\n  }\n  while(num & MSBALL) {\n    out[offset++] = (num & 0xFF) | MSB;\n    num >>>= 7;\n  }\n  out[offset] = num | 0;\n  \n  // @ts-ignore\n  encode.bytes = offset - oldOffset + 1;\n  \n  return out\n}\n\nvar decode = read;\n\nvar MSB$1 = 0x80\n  , REST$1 = 0x7F;\n\n/**\n * @param {string | any[]} buf\n * @param {number} offset\n */\nfunction read(buf, offset) {\n  var res    = 0\n    , offset = offset || 0\n    , shift  = 0\n    , counter = offset\n    , b\n    , l = buf.length;\n\n  do {\n    if (counter >= l) {\n      // @ts-ignore\n      read.bytes = 0;\n      throw new RangeError('Could not decode varint')\n    }\n    b = buf[counter++];\n    res += shift < 28\n      ? (b & REST$1) << shift\n      : (b & REST$1) * Math.pow(2, shift);\n    shift += 7;\n  } while (b >= MSB$1)\n\n  // @ts-ignore\n  read.bytes = counter - offset;\n\n  return res\n}\n\nvar N1 = Math.pow(2,  7);\nvar N2 = Math.pow(2, 14);\nvar N3 = Math.pow(2, 21);\nvar N4 = Math.pow(2, 28);\nvar N5 = Math.pow(2, 35);\nvar N6 = Math.pow(2, 42);\nvar N7 = Math.pow(2, 49);\nvar N8 = Math.pow(2, 56);\nvar N9 = Math.pow(2, 63);\n\nvar length = function (/** @type {number} */ value) {\n  return (\n    value < N1 ? 1\n  : value < N2 ? 2\n  : value < N3 ? 3\n  : value < N4 ? 4\n  : value < N5 ? 5\n  : value < N6 ? 6\n  : value < N7 ? 7\n  : value < N8 ? 8\n  : value < N9 ? 9\n  :              10\n  )\n};\n\nvar varint = {\n    encode: encode_1\n  , decode: decode\n  , encodingLength: length\n};\n\nvar _brrp_varint = varint;\n\nexport default _brrp_varint;\n", "import varint from './vendor/varint.js'\n\nexport function decode (data: Uint8Array, offset = 0): [number, number] {\n  const code = varint.decode(data, offset)\n  return [code, varint.decode.bytes]\n}\n\nexport function encodeTo (int: number, target: Uint8Array, offset = 0): Uint8Array {\n  varint.encode(int, target, offset)\n  return target\n}\n\nexport function encodingLength (int: number): number {\n  return varint.encodingLength(int)\n}\n", "import { coerce, equals as equalBytes } from '../bytes.js'\nimport * as varint from '../varint.js'\nimport type { MultihashDigest } from './interface.js'\n\n/**\n * Creates a multihash digest.\n */\nexport function create <Code extends number> (code: Code, digest: Uint8Array): Digest<Code, number> {\n  const size = digest.byteLength\n  const sizeOffset = varint.encodingLength(code)\n  const digestOffset = sizeOffset + varint.encodingLength(size)\n\n  const bytes = new Uint8Array(digestOffset + size)\n  varint.encodeTo(code, bytes, 0)\n  varint.encodeTo(size, bytes, sizeOffset)\n  bytes.set(digest, digestOffset)\n\n  return new Digest(code, size, digest, bytes)\n}\n\n/**\n * Turns bytes representation of multihash digest into an instance.\n */\nexport function decode (multihash: Uint8Array): MultihashDigest {\n  const bytes = coerce(multihash)\n  const [code, sizeOffset] = varint.decode(bytes)\n  const [size, digestOffset] = varint.decode(bytes.subarray(sizeOffset))\n  const digest = bytes.subarray(sizeOffset + digestOffset)\n\n  if (digest.byteLength !== size) {\n    throw new Error('Incorrect length')\n  }\n\n  return new Digest(code, size, digest, bytes)\n}\n\nexport function equals (a: MultihashDigest, b: unknown): b is MultihashDigest {\n  if (a === b) {\n    return true\n  } else {\n    const data = b as { code?: unknown, size?: unknown, bytes?: unknown }\n\n    return (\n      a.code === data.code &&\n      a.size === data.size &&\n      data.bytes instanceof Uint8Array &&\n      equalBytes(a.bytes, data.bytes)\n    )\n  }\n}\n\n/**\n * Represents a multihash digest which carries information about the\n * hashing algorithm and an actual hash digest.\n */\nexport class Digest<Code extends number, Size extends number> implements MultihashDigest {\n  readonly code: Code\n  readonly size: Size\n  readonly digest: Uint8Array\n  readonly bytes: Uint8Array\n\n  /**\n   * Creates a multihash digest.\n   */\n  constructor (code: Code, size: Size, digest: Uint8Array, bytes: Uint8Array) {\n    this.code = code\n    this.size = size\n    this.digest = digest\n    this.bytes = bytes\n  }\n}\n\n/**\n * Used to check that the passed multihash has the passed code\n */\nexport function hasCode <T extends number> (digest: MultihashDigest, code: T): digest is MultihashDigest<T> {\n  return digest.code === code\n}\n", "import { base32 } from './bases/base32.js'\nimport { base36 } from './bases/base36.js'\nimport { base58btc } from './bases/base58.js'\nimport { coerce } from './bytes.js'\nimport * as Digest from './hashes/digest.js'\nimport * as varint from './varint.js'\nimport type * as API from './link/interface.js'\n\n// This way TS will also expose all the types from module\nexport * from './link/interface.js'\n\nexport function format <T extends API.Link<unknown, number, number, API.Version>, Prefix extends string> (link: T, base?: API.MultibaseEncoder<Prefix>): API.ToString<T, Prefix> {\n  const { bytes, version } = link\n  switch (version) {\n    case 0:\n      return toStringV0(\n        bytes,\n        baseCache(link),\n        base as API.MultibaseEncoder<'z'> ?? base58btc.encoder\n      )\n    default:\n      return toStringV1(\n        bytes,\n        baseCache(link),\n        (base ?? base32.encoder) as API.MultibaseEncoder<Prefix>\n      )\n  }\n}\n\nexport function toJSON <Link extends API.UnknownLink> (link: Link): API.LinkJSON<Link> {\n  return {\n    '/': format(link)\n  }\n}\n\nexport function fromJSON <Link extends API.UnknownLink> (json: API.LinkJSON<Link>): CID<unknown, number, number, API.Version> {\n  return CID.parse(json['/'])\n}\n\nconst cache = new WeakMap<API.UnknownLink, Map<string, string>>()\n\nfunction baseCache (cid: API.UnknownLink): Map<string, string> {\n  const baseCache = cache.get(cid)\n  if (baseCache == null) {\n    const baseCache = new Map()\n    cache.set(cid, baseCache)\n    return baseCache\n  }\n  return baseCache\n}\n\nexport class CID<Data = unknown, Format extends number = number, Alg extends number = number, Version extends API.Version = API.Version> implements API.Link<Data, Format, Alg, Version> {\n  readonly code: Format\n  readonly version: Version\n  readonly multihash: API.MultihashDigest<Alg>\n  readonly bytes: Uint8Array\n  readonly '/': Uint8Array\n\n  /**\n   * @param version - Version of the CID\n   * @param code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param multihash - (Multi)hash of the of the content.\n   */\n  constructor (version: Version, code: Format, multihash: API.MultihashDigest<Alg>, bytes: Uint8Array) {\n    this.code = code\n    this.version = version\n    this.multihash = multihash\n    this.bytes = bytes\n\n    // flag to serializers that this is a CID and\n    // should be treated specially\n    this['/'] = bytes\n  }\n\n  /**\n   * Signalling `cid.asCID === cid` has been replaced with `cid['/'] === cid.bytes`\n   * please either use `CID.asCID(cid)` or switch to new signalling mechanism\n   *\n   * @deprecated\n   */\n  get asCID (): this {\n    return this\n  }\n\n  // ArrayBufferView\n  get byteOffset (): number {\n    return this.bytes.byteOffset\n  }\n\n  // ArrayBufferView\n  get byteLength (): number {\n    return this.bytes.byteLength\n  }\n\n  toV0 (): CID<Data, API.DAG_PB, API.SHA_256, 0> {\n    switch (this.version) {\n      case 0: {\n        return this as CID<Data, API.DAG_PB, API.SHA_256, 0>\n      }\n      case 1: {\n        const { code, multihash } = this\n\n        if (code !== DAG_PB_CODE) {\n          throw new Error('Cannot convert a non dag-pb CID to CIDv0')\n        }\n\n        // sha2-256\n        if (multihash.code !== SHA_256_CODE) {\n          throw new Error('Cannot convert non sha2-256 multihash CID to CIDv0')\n        }\n\n        return (\n          CID.createV0(\n            multihash as API.MultihashDigest<API.SHA_256>\n          )\n        )\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 0. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  toV1 (): CID<Data, Format, Alg, 1> {\n    switch (this.version) {\n      case 0: {\n        const { code, digest } = this.multihash\n        const multihash = Digest.create(code, digest)\n        return (\n          CID.createV1(this.code, multihash)\n        )\n      }\n      case 1: {\n        return this as CID<Data, Format, Alg, 1>\n      }\n      default: {\n        throw Error(\n          `Can not convert CID version ${this.version} to version 1. This is a bug please report`\n        )\n      }\n    }\n  }\n\n  equals (other: unknown): other is CID<Data, Format, Alg, Version> {\n    return CID.equals(this, other)\n  }\n\n  static equals <Data, Format extends number, Alg extends number, Version extends API.Version>(self: API.Link<Data, Format, Alg, Version>, other: unknown): other is CID {\n    const unknown = other as { code?: unknown, version?: unknown, multihash?: unknown }\n    return (\n      unknown != null &&\n      self.code === unknown.code &&\n      self.version === unknown.version &&\n      Digest.equals(self.multihash, unknown.multihash)\n    )\n  }\n\n  toString (base?: API.MultibaseEncoder<string>): string {\n    return format(this, base)\n  }\n\n  toJSON (): API.LinkJSON<this> {\n    return { '/': format(this) }\n  }\n\n  link (): this {\n    return this\n  }\n\n  readonly [Symbol.toStringTag] = 'CID';\n\n  // Legacy\n\n  [Symbol.for('nodejs.util.inspect.custom')] (): string {\n    return `CID(${this.toString()})`\n  }\n\n  /**\n   * Takes any input `value` and returns a `CID` instance if it was\n   * a `CID` otherwise returns `null`. If `value` is instanceof `CID`\n   * it will return value back. If `value` is not instance of this CID\n   * class, but is compatible CID it will return new instance of this\n   * `CID` class. Otherwise returns null.\n   *\n   * This allows two different incompatible versions of CID library to\n   * co-exist and interop as long as binary interface is compatible.\n   */\n  static asCID <Data, Format extends number, Alg extends number, Version extends API.Version, U>(input: API.Link<Data, Format, Alg, Version> | U): CID<Data, Format, Alg, Version> | null {\n    if (input == null) {\n      return null\n    }\n\n    const value = input as any\n    if (value instanceof CID) {\n      // If value is instance of CID then we're all set.\n      return value\n    } else if ((value['/'] != null && value['/'] === value.bytes) || value.asCID === value) {\n      // If value isn't instance of this CID class but `this.asCID === this` or\n      // `value['/'] === value.bytes` is true it is CID instance coming from a\n      // different implementation (diff version or duplicate). In that case we\n      // rebase it to this `CID` implementation so caller is guaranteed to get\n      // instance with expected API.\n      const { version, code, multihash, bytes } = value\n      return new CID(\n        version,\n        code,\n        multihash as API.MultihashDigest<Alg>,\n        bytes ?? encodeCID(version, code, multihash.bytes)\n      )\n    } else if (value[cidSymbol] === true) {\n      // If value is a CID from older implementation that used to be tagged via\n      // symbol we still rebase it to the this `CID` implementation by\n      // delegating that to a constructor.\n      const { version, multihash, code } = value\n      const digest = Digest.decode(multihash) as API.MultihashDigest<Alg>\n      return CID.create(version, code, digest)\n    } else {\n      // Otherwise value is not a CID (or an incompatible version of it) in\n      // which case we return `null`.\n      return null\n    }\n  }\n\n  /**\n   * @param version - Version of the CID\n   * @param code - Code of the codec content is encoded in, see https://github.com/multiformats/multicodec/blob/master/table.csv\n   * @param digest - (Multi)hash of the of the content.\n   */\n  static create <Data, Format extends number, Alg extends number, Version extends API.Version>(version: Version, code: Format, digest: API.MultihashDigest<Alg>): CID<Data, Format, Alg, Version> {\n    if (typeof code !== 'number') {\n      throw new Error('String codecs are no longer supported')\n    }\n\n    if (!(digest.bytes instanceof Uint8Array)) {\n      throw new Error('Invalid digest')\n    }\n\n    switch (version) {\n      case 0: {\n        if (code !== DAG_PB_CODE) {\n          throw new Error(\n            `Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`\n          )\n        } else {\n          return new CID(version, code, digest, digest.bytes)\n        }\n      }\n      case 1: {\n        const bytes = encodeCID(version, code, digest.bytes)\n        return new CID(version, code, digest, bytes)\n      }\n      default: {\n        throw new Error('Invalid version')\n      }\n    }\n  }\n\n  /**\n   * Simplified version of `create` for CIDv0.\n   */\n  static createV0 <T = unknown>(digest: API.MultihashDigest<typeof SHA_256_CODE>): CID<T, typeof DAG_PB_CODE, typeof SHA_256_CODE, 0> {\n    return CID.create(0, DAG_PB_CODE, digest)\n  }\n\n  /**\n   * Simplified version of `create` for CIDv1.\n   *\n   * @param code - Content encoding format code.\n   * @param digest - Multihash of the content.\n   */\n  static createV1 <Data, Code extends number, Alg extends number>(code: Code, digest: API.MultihashDigest<Alg>): CID<Data, Code, Alg, 1> {\n    return CID.create(1, code, digest)\n  }\n\n  /**\n   * Decoded a CID from its binary representation. The byte array must contain\n   * only the CID with no additional bytes.\n   *\n   * An error will be thrown if the bytes provided do not contain a valid\n   * binary representation of a CID.\n   */\n  static decode <Data, Code extends number, Alg extends number, Version extends API.Version>(bytes: API.ByteView<API.Link<Data, Code, Alg, Version>>): CID<Data, Code, Alg, Version> {\n    const [cid, remainder] = CID.decodeFirst(bytes)\n    if (remainder.length !== 0) {\n      throw new Error('Incorrect length')\n    }\n    return cid\n  }\n\n  /**\n   * Decoded a CID from its binary representation at the beginning of a byte\n   * array.\n   *\n   * Returns an array with the first element containing the CID and the second\n   * element containing the remainder of the original byte array. The remainder\n   * will be a zero-length byte array if the provided bytes only contained a\n   * binary CID representation.\n   */\n  static decodeFirst <T, C extends number, A extends number, V extends API.Version>(bytes: API.ByteView<API.Link<T, C, A, V>>): [CID<T, C, A, V>, Uint8Array] {\n    const specs = CID.inspectBytes(bytes)\n    const prefixSize = specs.size - specs.multihashSize\n    const multihashBytes = coerce(\n      bytes.subarray(prefixSize, prefixSize + specs.multihashSize)\n    )\n    if (multihashBytes.byteLength !== specs.multihashSize) {\n      throw new Error('Incorrect length')\n    }\n    const digestBytes = multihashBytes.subarray(\n      specs.multihashSize - specs.digestSize\n    )\n    const digest = new Digest.Digest(\n      specs.multihashCode,\n      specs.digestSize,\n      digestBytes,\n      multihashBytes\n    )\n    const cid =\n      specs.version === 0\n        ? CID.createV0(digest as API.MultihashDigest<API.SHA_256>)\n        : CID.createV1(specs.codec, digest)\n    return [cid as CID<T, C, A, V>, bytes.subarray(specs.size)]\n  }\n\n  /**\n   * Inspect the initial bytes of a CID to determine its properties.\n   *\n   * Involves decoding up to 4 varints. Typically this will require only 4 to 6\n   * bytes but for larger multicodec code values and larger multihash digest\n   * lengths these varints can be quite large. It is recommended that at least\n   * 10 bytes be made available in the `initialBytes` argument for a complete\n   * inspection.\n   */\n  static inspectBytes <T, C extends number, A extends number, V extends API.Version>(initialBytes: API.ByteView<API.Link<T, C, A, V>>): { version: V, codec: C, multihashCode: A, digestSize: number, multihashSize: number, size: number } {\n    let offset = 0\n    const next = (): number => {\n      const [i, length] = varint.decode(initialBytes.subarray(offset))\n      offset += length\n      return i\n    }\n\n    let version = next() as V\n    let codec = DAG_PB_CODE as C\n    if (version as number === 18) {\n      // CIDv0\n      version = 0 as V\n      offset = 0\n    } else {\n      codec = next() as C\n    }\n\n    if (version !== 0 && version !== 1) {\n      throw new RangeError(`Invalid CID version ${version}`)\n    }\n\n    const prefixSize = offset\n    const multihashCode = next() as A // multihash code\n    const digestSize = next() // multihash length\n    const size = offset + digestSize\n    const multihashSize = size - prefixSize\n\n    return { version, codec, multihashCode, digestSize, multihashSize, size }\n  }\n\n  /**\n   * Takes cid in a string representation and creates an instance. If `base`\n   * decoder is not provided will use a default from the configuration. It will\n   * throw an error if encoding of the CID is not compatible with supplied (or\n   * a default decoder).\n   */\n  static parse <Prefix extends string, Data, Code extends number, Alg extends number, Version extends API.Version>(source: API.ToString<API.Link<Data, Code, Alg, Version>, Prefix>, base?: API.MultibaseDecoder<Prefix>): CID<Data, Code, Alg, Version> {\n    const [prefix, bytes] = parseCIDtoBytes(source, base)\n\n    const cid = CID.decode(bytes)\n\n    if (cid.version === 0 && source[0] !== 'Q') {\n      throw Error('Version 0 CID string must not include multibase prefix')\n    }\n\n    // Cache string representation to avoid computing it on `this.toString()`\n    baseCache(cid).set(prefix, source)\n\n    return cid\n  }\n}\n\nfunction parseCIDtoBytes <Prefix extends string, Data, Code extends number, Alg extends number, Version extends API.Version> (source: API.ToString<API.Link<Data, Code, Alg, Version>, Prefix>, base?: API.MultibaseDecoder<Prefix>): [Prefix, API.ByteView<API.Link<Data, Code, Alg, Version>>] {\n  switch (source[0]) {\n    // CIDv0 is parsed differently\n    case 'Q': {\n      const decoder = base ?? base58btc\n      return [\n        base58btc.prefix as Prefix,\n        decoder.decode(`${base58btc.prefix}${source}`)\n      ]\n    }\n    case base58btc.prefix: {\n      const decoder = base ?? base58btc\n      return [base58btc.prefix as Prefix, decoder.decode(source)]\n    }\n    case base32.prefix: {\n      const decoder = base ?? base32\n      return [base32.prefix as Prefix, decoder.decode(source)]\n    }\n    case base36.prefix: {\n      const decoder = base ?? base36\n      return [base36.prefix as Prefix, decoder.decode(source)]\n    }\n    default: {\n      if (base == null) {\n        throw Error(\n          'To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided'\n        )\n      }\n      return [source[0] as Prefix, base.decode(source)]\n    }\n  }\n}\n\nfunction toStringV0 (bytes: Uint8Array, cache: Map<string, string>, base: API.MultibaseEncoder<'z'>): string {\n  const { prefix } = base\n  if (prefix !== base58btc.prefix) {\n    throw Error(`Cannot string encode V0 in ${base.name} encoding`)\n  }\n\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes).slice(1)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nfunction toStringV1 <Prefix extends string> (bytes: Uint8Array, cache: Map<string, string>, base: API.MultibaseEncoder<Prefix>): string {\n  const { prefix } = base\n  const cid = cache.get(prefix)\n  if (cid == null) {\n    const cid = base.encode(bytes)\n    cache.set(prefix, cid)\n    return cid\n  } else {\n    return cid\n  }\n}\n\nconst DAG_PB_CODE = 0x70\nconst SHA_256_CODE = 0x12\n\nfunction encodeCID (version: API.Version, code: number, multihash: Uint8Array): Uint8Array {\n  const codeOffset = varint.encodingLength(version)\n  const hashOffset = codeOffset + varint.encodingLength(code)\n  const bytes = new Uint8Array(hashOffset + multihash.byteLength)\n  varint.encodeTo(version, bytes, 0)\n  varint.encodeTo(code, bytes, codeOffset)\n  bytes.set(multihash, hashOffset)\n  return bytes\n}\n\nconst cidSymbol = Symbol.for('@ipld/js-cid/CID')\n", "import type { ArrayBufferView, ByteView } from './interface.js'\n\nconst textEncoder = new TextEncoder()\nconst textDecoder = new TextDecoder()\n\nexport const name = 'json'\nexport const code = 0x0200\n\nexport function encode <T> (node: T): ByteView<T> {\n  return textEncoder.encode(JSON.stringify(node))\n}\n\nexport function decode <T> (data: ByteView<T> | ArrayBufferView<T>): T {\n  return JSON.parse(textDecoder.decode(data))\n}\n", "import * as Digest from './digest.js'\nimport type { MultihashHasher } from './interface.js'\n\ntype Await<T> = Promise<T> | T\n\nexport function from <Name extends string, Code extends number> ({ name, code, encode }: { name: Name, code: Code, encode(input: Uint8Array): Await<Uint8Array> }): Hasher<Name, Code> {\n  return new Hasher(name, code, encode)\n}\n\n/**\n * Hasher represents a hashing algorithm implementation that produces as\n * `MultihashDigest`.\n */\nexport class Hasher<Name extends string, Code extends number> implements MultihashHasher<Code> {\n  readonly name: Name\n  readonly code: Code\n  readonly encode: (input: Uint8Array) => Await<Uint8Array>\n\n  constructor (name: Name, code: Code, encode: (input: Uint8Array) => Await<Uint8Array>) {\n    this.name = name\n    this.code = code\n    this.encode = encode\n  }\n\n  digest (input: Uint8Array): Await<Digest.Digest<Code, number>> {\n    if (input instanceof Uint8Array) {\n      const result = this.encode(input)\n      return result instanceof Uint8Array\n        ? Digest.create(this.code, result)\n        /* c8 ignore next 1 */\n        : result.then(digest => Digest.create(this.code, digest))\n    } else {\n      throw Error('Unknown type, must be binary type')\n      /* c8 ignore next 1 */\n    }\n  }\n}\n", "/* global crypto */\n\nimport { from } from './hasher.js'\n\nfunction sha (name: AlgorithmIdentifier): (data: Uint8Array) => Promise<Uint8Array> {\n  return async data => new Uint8Array(await crypto.subtle.digest(name, data))\n}\n\nexport const sha256 = from({\n  name: 'sha2-256',\n  code: 0x12,\n  encode: sha('SHA-256')\n})\n\nexport const sha512 = from({\n  name: 'sha2-512',\n  code: 0x13,\n  encode: sha('SHA-512')\n})\n", "import { CID } from \"multiformats/cid\";\nimport * as json from \"multiformats/codecs/json\";\nimport { sha256 } from \"multiformats/hashes/sha2\";\n\nconst hashBrowser = async (val: string) => {\n  const bytes = json.encode(val);\n\n  const hash = await sha256.digest(bytes);\n  const cid = CID.create(1, json.code, hash);\n\n  return cid.toString();\n};\n\nexport default hashBrowser;\n", "const isJSON = (str: string) => {\n  try {\n    JSON.parse(str);\n  } catch (_e) {\n    return false;\n  }\n  return true;\n};\n\nexport default isJSON;\n", "import select from \"./dom.js\";\n\nconst _getBasePageTitle = () => {\n  const titleSections = document.title.split(\"|\");\n  const baseTitle = titleSections[0];\n  return baseTitle;\n};\n\nconst setPageTitle = (what) => {\n  const baseTitle = _getBasePageTitle();\n  document.title = baseTitle.trim() + \" | \" + what.trim();\n  select(\".title h3\").html(what.trim());\n};\n\nconst resetPageTitle = () => {\n  const baseTitle = _getBasePageTitle();\n  document.title = baseTitle;\n  select(\"title\").innerHTML(`${TITLE_NAME} ${VERSION}`);\n  select(\".title h3\").innerHTML(\n    `${TITLE_NAME} <span class=\"version\">${VERSION}</span>`,\n  );\n};\n\nexport { resetPageTitle, setPageTitle };\n", "export const url = {\n  baseUrl: `${globalThis.location.origin}${globalThis.location.pathname}`,\n  get: function () {\n    return globalThis.location.href;\n  },\n  getPageId: function (url = globalThis.location.href) {\n    const URLObject = new URL(url);\n    const hash = URLObject.hash.slice(1);\n    const hashWithVersion = hash.split(\"?\");\n    const pageId = hashWithVersion[0] || null;\n    return pageId;\n  },\n  getSearchParams: function (url = globalThis.location.href) {\n    const URLObject = new URL(url);\n    const urlParts = URLObject.href.split(\"?\");\n    const currentParams = urlParts[1] || \"\";\n    const searchParams = new URLSearchParams(currentParams);\n    return searchParams;\n  },\n  getParamsObject: function (\n    url = globalThis.location.href,\n  ): Record<string, string> {\n    const params = this.getSearchParams(url);\n    let parametersObject = {};\n    for (const key of params.keys()) {\n      parametersObject = {\n        ...parametersObject,\n        [key]: this.getSearchParam(key, url),\n      };\n    }\n    return parametersObject;\n  },\n  getSearchParam(param: string, url = globalThis.location.href) {\n    const params = this.getSearchParams(url);\n    const paramValue = params.get(param);\n    return paramValue;\n  },\n  deleteParam: function (param: string | Array<string>) {\n    const searchParams = this.getSearchParams();\n    if (Array.isArray(param)) {\n      param.forEach((p) => {\n        searchParams.delete(p);\n      });\n    } else {\n      searchParams.delete(param);\n    }\n    const { pathname } = globalThis.location;\n    const hash = this.getPageId();\n    return globalThis.location.assign(\n      `${hash ? `#${hash}` : pathname}${\n        searchParams.toString() ? `?${searchParams.toString()}` : \"\"\n      }`,\n    );\n  },\n  // @ts-ignore as this is not ideal here along with TS\n  set: function (pageId = this.getPageId(), params = this.getParamsObject()) {\n    const allParams = {\n      ...this.getParamsObject(),\n      ...params,\n    };\n    const newParams = new URLSearchParams(allParams);\n    return globalThis.location.assign(`#${pageId}?${newParams.toString()}`);\n  },\n};\n", "import select from \"../../utils/dom.js\";\n\nexport const setSavedState = (saved = true) => {\n  if (saved) {\n    select(\"#save\").removeClass(\"unsaved\");\n    select(\"#logo\").removeClass(\"unsaved\");\n  } else {\n    select(\"#save\").addClass(\"unsaved\");\n    select(\"#logo\").addClass(\"unsaved\");\n  }\n};\n", "import select from \"../../../utils/dom.js\";\nimport { deleteFileOnGist } from \"../../../utils/github/api.ts\";\nimport hashBrowser from \"../../../utils/hashBrowser.ts\";\nimport isJSON from \"../../../utils/isJSON.ts\";\nimport storage from \"../../../utils/localstorage.js\";\nimport { resetPageTitle, setPageTitle } from \"../../../utils/pageTitle.js\";\nimport { url } from \"../../../utils/urlManager.ts\";\nimport notify from \"../../molecules/notify.ts\";\nimport commander from \"../commander/commander.ts\";\nimport { setSavedState } from \"../../../ui/functions/savedState.ts\";\n\nconst encodeTitle = (title: string) => {\n  const encodedTitle = encodeURIComponent(title);\n  if (encodedTitle.length === 0) {\n    throw new Error(\"You need to start with a valid title for your note!\");\n  }\n  return encodedTitle;\n};\n\nexport const getDateCreatedFromTitle = (title: string): number => {\n  const titleID = getTitleId(title);\n  const note = getNote(titleID);\n  if (note) {\n    const { dateCreated } = note;\n    return dateCreated;\n  }\n  throw new Error(`Note \"${title}\" cannot found!`);\n};\n\nexport const markNoteForDeletion = (id: string) => {\n  const note = getNote(id);\n  if (note) {\n    localStorage.setItem(\n      id,\n      JSON.stringify({\n        title: note.title,\n        deleted: true,\n        revisions: note.revisions,\n      }),\n    );\n  }\n};\n\nexport type Note = {\n  id: string;\n  title: string;\n  text: string;\n  dateCreated: number;\n  deleted: boolean;\n  lines: Array<string>;\n  numberOfRevisions: number;\n  disableSync: boolean;\n  revisions: {\n    [key: string]: {\n      text: string;\n      dateCreated: number;\n    };\n  };\n};\n\nexport const getNote = (\n  titleID = url.getPageId(),\n  revision?: string,\n): Note | null => {\n  let doc;\n  try {\n    doc = JSON.parse(storage.get(titleID));\n    if (!doc.revisions) {\n      throw new Error(\"This is not a note!\");\n    }\n  } catch (_e) {\n    return null;\n  }\n\n  const newerNote = doc\n    ? Object.values(doc.revisions).reduce(\n      // deno-lint-ignore no-explicit-any\n      (acc: any, note: any) => note.dateCreated > acc.dateCreated ? note : acc,\n      { dateCreated: 0 },\n    )\n    : {};\n\n  const noteToReturn = revision ? doc.revisions[revision] : newerNote;\n\n  return titleID\n    ? {\n      ...doc,\n      id: titleID,\n      ...(noteToReturn ? noteToReturn : {}),\n      numberOfRevisions: doc && doc.revisions\n        ? Object.keys(doc.revisions).length\n        : undefined,\n      title: doc.title,\n    }\n    : null;\n};\n\nexport const disableSyncOnCurrentNote = (value: boolean) => {\n  const note = getNote();\n  if (note) {\n    storage.update(note.id, {\n      disableSync: value,\n    });\n    notify.info(\n      `\"${note.title}\" cloud sync ${value ? \"disabled \uD83D\uDE36\" : \"enabled \u26A1\uFE0F\"}`,\n    );\n  }\n};\n\nexport const setNoteFromHash = (hash = url.getPageId()) => {\n  if (hash) {\n    const version = url.getSearchParam(\"v\") || undefined;\n    const note = getNote(undefined, version);\n    if (note) {\n      select(\"#revisions\").html(\n        `${note.numberOfRevisions} revision${\n          note.numberOfRevisions > 1 ? \"s\" : \"\"\n        }`,\n      );\n      setPageTitle(note.title);\n      select(\".terminal\").setValue(note.text);\n    }\n\n    if (!note) {\n      notify.error(\"404 Note not found \uD83E\uDD37\u200D\u2642\uFE0F\");\n    }\n  }\n};\n\nexport const resetNoteManager = () => {\n  location.hash = \"\";\n  resetPageTitle();\n  select(\"#revisions\").html(\"\");\n  select(\".terminal\").setValue(\"\").focus();\n  setSavedState();\n};\n\nexport const getTitle = (note = \"\") =>\n  note.split(\"\\n\")[0].trim().replace(\"#\", \"\").trim();\n\nexport const getTitleId = (note: string) => {\n  const title = getTitle(note);\n  return encodeTitle(title);\n};\n\nexport const updateNote = async (what: string) => {\n  if (what.length) {\n    const titleID = getTitleId(what);\n    const title = getTitle(what);\n    const existingNote = getNote(titleID);\n    if (existingNote === null) {\n      // new existingNote\n      return saveNote(what);\n    }\n    const { text } = existingNote;\n    const hashOfIncomingNote = await hashBrowser(what);\n    const hashOfCurrentNote = await hashBrowser(text);\n\n    if (hashOfIncomingNote === hashOfCurrentNote) {\n      return;\n    }\n\n    const currentNote = storage.get(titleID);\n    const note = JSON.parse(currentNote);\n    storage.set(\n      titleID,\n      JSON.stringify({\n        ...note,\n        title,\n        revisions: {\n          ...((note && note.revisions) || {}),\n          [hashOfIncomingNote]: {\n            dateCreated: Date.now(),\n            text: what,\n          },\n        },\n      }),\n    );\n  }\n};\n\nexport const saveNote = async (\n  what = select(\".terminal\").getValue(),\n) => {\n  await storage.saveToDictionary(what);\n  if (what.length) {\n    const hash = await hashBrowser(what);\n    try {\n      const title = what.split(\"\\n\")[0].trim().replace(\"#\", \"\").trim();\n\n      setPageTitle(title);\n\n      const titleID = encodeTitle(title);\n      const currentNote = storage.get(titleID);\n      const note = JSON.parse(currentNote);\n      storage.set(\n        titleID,\n        JSON.stringify({\n          ...note,\n          title,\n          lines: what.split(\"\\n\"),\n          revisions: {\n            ...((note && note.revisions) || {}),\n            [hash]: {\n              dateCreated: Date.now(),\n              text: what,\n            },\n          },\n        }),\n      );\n      url.set(titleID, {\n        v: hash,\n      });\n      storage.set(\"lastLocalUpdate\", new Date());\n      notify.success(\"\uD83D\uDC4C Note saved!\");\n      setSavedState();\n    } catch (e) {\n      notify.error(\n        `\uD83D\uDE31 Something went wrong while trying to save to local storage ${e}`,\n      );\n    }\n  } else {\n    notify.warning(\"\uD83D\uDE15 Nothing to save!\"); // eslint-disable-line\n  }\n};\n\nexport const getNotes = ({\n  includeDeleted = false,\n}: {\n  includeDeleted?: boolean;\n} = {}): Array<Note> =>\n  Object.entries(localStorage)\n    .filter(([, body]) => typeof body === \"string\")\n    .filter(([id, body]) => !id.startsWith(\"__\") && isJSON(body))\n    .map(([id, body]) => [id, JSON.parse(body)])\n    .filter(([, body]) => !!body.title) // check if title exists and therefore is a note\n    .reduce((acc, [noteId]) => [...acc, getNote(noteId)], [])\n    .filter(({ deleted }) => (includeDeleted ? true : !deleted));\n\nexport const search = (q: string | null = null) => {\n  if (!q) {\n    return undefined;\n  }\n\n  const results = getNotes()\n    .map(({ id }) => getNote(id))\n    .filter((note) => note !== null)\n    .filter(({ text }) => {\n      return text.toLowerCase().includes(q.toLowerCase());\n    });\n\n  return results[0];\n};\n\nexport const deleteNote = () => {\n  const confirmation = confirm(\"Are you sure you want do that?\");\n  if (confirmation) {\n    const note = getNote();\n    resetNoteManager();\n    if (note && note.id) {\n      deleteFileOnGist(note.id);\n      markNoteForDeletion(note.id);\n    }\n  }\n  commander.hide();\n};\n", "import storage from \"./localstorage.js\";\n\nexport const isUserLoggedIn = () => {\n  return !!storage.get(\"authToken\");\n};\n", "import { isElement } from \"../../../utils/dom.js\";\n\nexport const command = (\n  { title, secondary, onclick, onSecondaryClick, icon },\n  selected = false,\n) => {\n  const li = document.createElement(\"LI\");\n  li.className = selected ? \"selected\" : \"\";\n  if (icon) {\n    const iconClone = icon.cloneNode(true);\n    li.appendChild(iconClone);\n  }\n  const liContent = isElement(title) ? title : document.createTextNode(title);\n  liContent.onclick = onclick;\n  li.appendChild(liContent);\n\n  const span = document.createElement(\"span\");\n  if (secondary) {\n    span.className = \"secondary\";\n    const secondaryElement = isElement(secondary)\n      ? secondary\n      : document.createTextNode(secondary);\n    secondaryElement.onclick = onSecondaryClick;\n    span.appendChild(secondaryElement);\n  }\n  li.appendChild(span);\n\n  return li;\n};\n", "export const wordParts = (word: string, match: string) => {\n  const parts = word.toLowerCase().split(match);\n\n  let indexInWord = 0;\n  return parts\n    // @ts-ignore js-to-ts wider refactoring required\n    .reduce((acc, part, i) => {\n      return [...acc, ...(i === 0 ? [part] : [match, part])];\n    }, [])\n    // @ts-ignore js-to-ts wider refactoring required\n    .filter((p) => p !== \"\")\n    // @ts-ignore js-to-ts wider refactoring required\n    .map((syllable) => {\n      indexInWord = indexInWord + syllable.length;\n      const start = indexInWord - syllable.length;\n      const end = start + syllable.length;\n      const originalSyllable = word.slice(start, end);\n      return originalSyllable;\n    });\n};\n", "import { wordParts } from \"./wordParts.ts\";\n\nconst mark = (word) => {\n  const markEl = document.createElement(\"mark\");\n  markEl.appendChild(document.createTextNode(word));\n  return markEl;\n};\n\nexport const div = ({ content = \"\", highlight = \"\" }) => {\n  const div = document.createElement(\"div\");\n  const words = content.split(\" \");\n  const wordsToHighlight = highlight.toLowerCase().split(\" \");\n  if (highlight.trim() === \"\") {\n    div.appendChild(document.createTextNode(content));\n    return div;\n  }\n  words\n    .map((word) => {\n      const matches = wordsToHighlight\n        .map((wordToHighlight) => {\n          return word.toLocaleLowerCase().includes(wordToHighlight)\n            ? wordToHighlight\n            : undefined;\n        })\n        .filter((m) => m !== undefined);\n\n      return {\n        word: word,\n        matches: matches,\n      };\n    })\n    .forEach(({ word, matches }) => {\n      if (matches.length > 0) {\n        const match = matches[0];\n        if (word === match) {\n          div.appendChild(mark(` ${word}`));\n        } else {\n          const parts = wordParts(word, match);\n          const wordElements = parts.map((syllable) =>\n            syllable.toLowerCase() === match\n              ? mark(syllable)\n              : document.createTextNode(syllable)\n          );\n          div.appendChild(document.createTextNode(\" \"));\n          wordElements.forEach((w) => {\n            div.appendChild(w);\n          });\n        }\n      } else {\n        div.appendChild(document.createTextNode(` ${word} `));\n      }\n    });\n  return div;\n};\n", "import {\n  createNewGist,\n  getAuthenticatedUsersGists,\n  getAuthToken,\n  getGist,\n} from \"./api.ts\";\nimport storage from \"../localstorage.js\";\nimport { url } from \"../urlManager.ts\";\nimport select from \"../dom.js\";\nimport { configuration } from \"../../../configuration.ts\";\nimport { updateNote } from \"../../components/organisms/noteManager/noteManager.ts\";\nimport notify from \"../../components/molecules/notify.ts\";\nimport { command } from \"../../components/molecules/commands/command.js\";\nimport commander from \"../../components/organisms/commander/commander.ts\";\nimport { div } from \"../../components/atoms/div/div.js\";\n\nexport const goAuthenticate = () => {\n  notify.info(\"You need to be authenticated!\");\n  commander.hide();\n  return globalThis.location.replace(\n    `https://github.com/login/oauth/authorize?client_id=${configuration.github.client_id}&scope=gist&state=${configuration.github.request_state}`,\n  );\n};\n\nexport const setGistToSyncWith = async (token) => {\n  notify.info(\"Downloading my Gists!\");\n  const gists = await getAuthenticatedUsersGists(token);\n  commander.setState({\n    mode: commander.getModes().gists,\n  });\n\n  notify.info(\"Select Gist to sync with\");\n  const gistOptions = gists\n    .sort(\n      (a, b) =>\n        new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime(),\n    )\n    .map(({ description, updated_at, id }) => ({\n      title: div({ content: `${description}(${id})` }),\n      secondary: updated_at,\n      onclick: async () => {\n        await storage.set(\"gistId\", id);\n        notify.success(`${description}(${id}) selected for synchronization!`);\n        syncNotesWithGitHub();\n        commander.hide();\n      },\n    }));\n\n  const gistOptionComponents = command([\n    {\n      title: \"Create a new Gist\",\n      onclick: async () => {\n        notify.info(\"Syncing your MiroPads to a new Gist\");\n        try {\n          const { id } = await createNewGist();\n          storage.set(\"gistId\", id);\n          notify.success(\"MiroPads synced to a new Gist \uD83C\uDF89\");\n        } catch (error) {\n          notify.error(error.message);\n        }\n        commander.hide();\n      },\n    },\n    ...gistOptions,\n  ]);\n  select(\"#commands\").html(\"\");\n  select(\"#commands\").append(gistOptionComponents);\n};\n\nexport const syncNotesWithGitHub = async (gistId = storage.get(\"gistId\")) => {\n  const authToken = storage.get(\"authToken\");\n  if (authToken && gistId) {\n    select(\"#logo\").addClass(\"loading\");\n    const { files } = await getGist(gistId);\n    Object.values(files).forEach(({ content }) => {\n      updateNote(content);\n    });\n    storage.set(\"lastSync\", new Date());\n    notify.success(\"\u2B07 MiroPad synced \u2705\");\n    select(\"#logo\").removeClass(\"loading\");\n  }\n};\n\nexport const setAuthTokenFromCallback = async () => {\n  const code = url.getSearchParam(\"code\");\n  const state = url.getSearchParam(\"state\");\n  if (code && state) {\n    select(\"#logo\").addClass(\"loading\");\n    notify.info(\"\uD83D\uDD10 Authenticating...\");\n    try {\n      const { token } = await getAuthToken(code, state);\n      storage.set(\"authToken\", token);\n      notify.info(\"\u26F3 You have been authenticated!\");\n      url.deleteParam([\"code\", \"state\"]);\n    } catch (error) {\n      notify.error(error.message);\n    }\n    select(\"#logo\").removeClass(\"loading\");\n  }\n};\n", "import notify from \"../../components/molecules/notify.ts\";\n\nconst getNewFileHandle = async (title = \"no-titled\") => {\n  const options = {\n    suggestedName: `${title}`,\n    types: [\n      {\n        description: \"MiroPad text notes\",\n        accept: {\n          \"text/plain\": [\".miropad\"],\n        },\n      },\n    ],\n  };\n\n  // @ts-ignore as this is an experimental browser feature\n  // and may need to change https://developer.mozilla.org/en-US/docs/Web/API/Window/showSaveFilePicker\n  const handle = await globalThis.showSaveFilePicker(options);\n  return handle;\n};\n\nexport const writeFile = async (\n  fileHandle: FileSystemFileHandle,\n  contents: string,\n) => {\n  // Create a FileSystemWritableFileStream to write to.\n  const writable = await fileHandle.createWritable();\n  // Write the contents of the file to the stream.\n  await writable.write(contents);\n  // Close the file and write the contents to disk.\n  await writable.close();\n};\n\n/**\n * Saves a new file to disk.\n */\nexport const saveFileAs = async (contents: string, title?: string) => {\n  try {\n    const fileHandle = await getNewFileHandle(title);\n    await writeFile(fileHandle, contents);\n  } catch (_e) {\n    const msg = \"An error occurred trying to save the file.\";\n    notify.error(msg);\n    return;\n  }\n};\n\nexport const saveDataToFile = (() => {\n  const a = document.createElement(\"a\");\n  a.setAttribute(\"style\", \"display: none\");\n  a.setAttribute(\"id\", \"download-to-file\");\n  a.setAttribute(\"href\", \"#\");\n  document.body.appendChild(a);\n  return (\n    data: unknown,\n    fileName = `MiroPad-${new Date().toISOString()}.json`,\n  ) => {\n    const json = JSON.stringify(data),\n      blob = new Blob([json], { type: \"octet/stream\" }),\n      url = globalThis.URL.createObjectURL(blob);\n    a.href = url;\n    a.download = fileName;\n    a.click();\n    globalThis.URL.revokeObjectURL(url);\n  };\n})();\n", "import { parse, renderHTML } from \"@djot/djot\";\n\nexport const convertMarkDownToHtml = (md: string) => {\n  return renderHTML(\n    parse(md, {\n      warn: (warning) => console.log(warning.render()),\n    }),\n  );\n};\n", "import storage from \"./localstorage.js\";\nimport notify from \"../components/molecules/notify.ts\";\nimport { configuration } from \"../../configuration.ts\";\nimport { getTitle } from \"../components/organisms/noteManager/noteManager.ts\";\nimport { convertMarkDownToHtml } from \"../components/organisms/markdown/mdToHtml.ts\";\n\nexport const handleErrorResponse = (response) => {\n  const isSuccessfulRequest = response.status.toString().slice(0, 1) === \"2\";\n  if (isSuccessfulRequest) return response;\n  else throw new Error(response);\n};\n\nconst wrapTemplate = (body = \"\") => {\n  return `<!DOCTYPE htmlPUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n  <html lang=\"en\">\n    <head>\n      <meta http-equiv=\"Content-Type\" content=\"text/html charset=UTF-8\" />\n      <style>\n      img {\n        border-style: none;\n        max-width: 100%;\n        box-sizing: content-box;\n      }\n      </style>\n    </head>\n    <table style=\"width:100%;background-color:#ffffff\" align=\"center\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\">\n      <tbody>\n        <tr>\n          <td>\n            <div><!--[if mso | IE]>\n              <table role=\"presentation\" width=\"100%\" align=\"center\" style=\"max-width:37.5em;margin:0 auto;padding:20px 0 48px;width:560px;\"><tr><td></td><td style=\"width:37.5em;background:#ffffff\">\n            <![endif]--></div>\n\n            <div style=\"max-width:37.5em;margin:0 auto;padding:20px 0 48px;width:560px\"><img alt=\"Theo Mironidis Logo\" src=\"https://teomrd.github.io/miroFavicon.f0c5b85b.png\" width=\"42\" height=\"42\" style=\"display:block;outline:none;border:none;text-decoration:none;width:42px;height:42px\" />\n              ${body}\n              <hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#dfe1e4;margin:42px 0 26px\" />\n              <a target=\"_blank\" style=\"color:#b4becc;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,Oxygen-Sans,Ubuntu,Cantarell,&quot;Helvetica Neue&quot;,sans-serif;font-size:14px\" href=\"https://teomrd.github.io\">\n              ${configuration.mail_service.signature}\n              </a>\n            </div>\n            <div><!--[if mso | IE]>\n            </td><td></td></tr></table>\n            <![endif]--></div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </html>`;\n};\n\nconst sendMail = async (body, email, subject = \"MiroPad note\") => {\n  if (!body) {\n    notify.error(\"\uD83D\uDC7B No message to send, type something and try again! \uD83E\uDD13\");\n    return undefined;\n  }\n  try {\n    await fetch(`${configuration.mail_service.api}`, {\n      method: \"POST\",\n      headers: {\n        \"x-secret-token\": storage.get(\"MIROPAD_SECRET_TOKEN\"),\n        accept: \"application/json\",\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        to: email,\n        subject,\n        html: wrapTemplate(body),\n      }),\n    })\n      .then(handleErrorResponse)\n      .then((response) => response.json());\n\n    notify.success(\"Email sent \uD83D\uDE80\");\n  } catch (_e) {\n    notify.error(\n      \"Error not went through \uD83D\uDCA5! Check your credentials and try again!\",\n    );\n  }\n};\n\nconst getUserMailingPreferences = () => {\n  const savedMail = storage.get(\"mail\");\n  if (savedMail) {\n    const mailSameAgainQuestion = globalThis.prompt(\n      `Mail ${savedMail} again? (y)es/(no)`,\n      \"yeap\",\n    );\n    if (mailSameAgainQuestion === null) {\n      return mailSameAgainQuestion;\n    }\n    if (mailSameAgainQuestion.slice(0, 1).toLowerCase() === \"y\") {\n      return savedMail;\n    }\n  }\n  const whoMailing = globalThis.prompt(\"Where do you wanna send the mail to?\");\n  const wannaSaveDat = globalThis.prompt(\n    \"Do you wanna save that to your preferences for later on? (y)es/(no)\",\n    \"yeap\",\n  );\n  if (wannaSaveDat && wannaSaveDat.slice(0, 1).toLowerCase() === \"y\") {\n    storage.set(\"mail\", whoMailing);\n  }\n  return whoMailing;\n};\n\nconst mailTo = (what) => {\n  const email = getUserMailingPreferences();\n  if (email === null) {\n    notify.info(\"Sending mail cancelled \uD83D\uDE36\");\n    return undefined;\n  }\n\n  notify.info(\"Sending mail... \uD83D\uDE80\");\n  const title = getTitle(what);\n  const htmlBody = convertMarkDownToHtml(what);\n\n  sendMail(htmlBody, email, title);\n};\n\nexport { mailTo };\n", "import notify from \"../components/molecules/notify.ts\";\n\nexport const copyToClipboard = async (\n  what: string,\n  message = \"\uD83D\uDCCB Copied to clipboard\",\n) => {\n  try {\n    await navigator.clipboard.writeText(what);\n    notify.success(message);\n  } catch (error) {\n    notify.error((error as Error).message);\n  }\n};\n", "import { isArray } from \"../../../utils/isArray.ts\";\n\nexport const button = (els, fn, id) => {\n  const elements = isArray(els) ? els : [els];\n  const button = document.createElement(\"button\");\n  button.setAttribute(\"type\", \"button\");\n  if (id) {\n    button.setAttribute(\"id\", id);\n  }\n  elements.forEach((element) => {\n    if (typeof element === \"string\") {\n      button.appendChild(document.createTextNode(element));\n    } else {\n      button.appendChild(element);\n    }\n  });\n  button.onclick = (e) => fn(e);\n\n  return button;\n};\n", "import select from \"../../../utils/dom.js\";\nimport { url } from \"../../../utils/urlManager.ts\";\nimport { copyToClipboard } from \"../../../utils/copyToClipboard.ts\";\nimport { button } from \"../../atoms/button/button.js\";\nimport { convertMarkDownToHtml } from \"./mdToHtml.ts\";\nimport storage from \"../../../utils/localstorage.js\";\n\nconst markDownViewer = (() => {\n  return {\n    view: select(\".preview\"),\n    init: function () {\n      this.update();\n      select(\".terminal\").listen(\"input\", () => this.update());\n      const isVisible = Boolean(url.getSearchParam(\"md\"));\n      if (isVisible) {\n        this.view.show();\n      } else {\n        this.view.hide();\n      }\n      return this;\n    },\n    autoLink: function () {\n      const autoLinks = storage.parse(\"__auto-links__\");\n      if (!autoLinks) return;\n      // Regular expression to match any words starting with the given patterns\n      const replacingPatterns = Object.keys(autoLinks)\n        .map((pattern) => `${pattern}\\\\w+`)\n        .join(\"|\");\n      const regex = new RegExp(`(${replacingPatterns})`, \"g\");\n\n      const updatedHTML = this.view.el.innerHTML.replace(regex, (match) => {\n        const matchingKey = Object.keys(autoLinks).find((link) =>\n          match.startsWith(link)\n        );\n        const link = autoLinks[matchingKey];\n        return link.startsWith(\"http\")\n          ? `<a href=\"${link}${match}\" target=\"_blank\">${match}</a>`\n          : `<a href=\"${link}${match}\">${match}</a>`;\n      });\n      // Replace each matching text with a link\n      this.view.innerHTML(updatedHTML);\n    },\n    update: function () {\n      const md = select(\".terminal\").getValue();\n\n      this.view.innerHTML(convertMarkDownToHtml(md));\n\n      this.autoLink();\n\n      // add a copy button to the code blocks\n      const { elements } = select(\"pre\");\n      Array.prototype.slice.call(elements).forEach((el) => {\n        const copyBtn = button(\"\uD83D\uDCCB Copy\", async (e) => {\n          e.stopPropagation();\n          const codeToCopy = e.srcElement.previousSibling.innerHTML;\n          await copyToClipboard(codeToCopy, \"\uD83D\uDCCB Code copied to clipboard\");\n        });\n        el.appendChild(copyBtn);\n      });\n\n      select(\"code\").listenAll(\"click\", ({ innerHTML }) => {\n        const result = eval(innerHTML);\n        select(\".console\").show().innerHTML(result);\n      });\n      select(\".console\").listen(\"click\", async (e) => {\n        e.srcElement.classList.add(\"hidden\");\n        const codeToCopy = e.srcElement.innerHTML;\n        await copyToClipboard(codeToCopy, \"\uD83D\uDCCB Code copied to clipboard\");\n      });\n    },\n    show: function (mode = true) {\n      this.view.show();\n      url.set(undefined, {\n        md: mode,\n      });\n    },\n    hide: function () {\n      this.view.hide();\n      url.deleteParam(\"md\");\n    },\n    toggle: function (mode = \"true\") {\n      if (url.getSearchParam(\"md\") === mode) {\n        this.hide();\n      } else {\n        this.show(mode);\n      }\n      return this;\n    },\n  };\n})();\n\nexport default markDownViewer;\n", "import isJSON from \"./isJSON.ts\";\nimport notify from \"../components/molecules/notify.ts\";\n\nconst prettifyJSON = (selector) => {\n  const el = document.querySelector(selector);\n  if (isJSON(el.value)) {\n    const prettifiedJSON = JSON.stringify(JSON.parse(el.value), null, 2);\n    el.value = prettifiedJSON;\n    notify.success(\"\uD83D\uDC4D JSON value prettified\");\n  } else {\n    notify.error(\"\uD83D\uDE27 Value is not in valid JSON format\");\n  }\n};\n\nexport default prettifyJSON;\n", "export const sleep = (ms = 1000) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n", "export const icon = (svgIcon, altText, className) => {\n  const image = document.createElement(\"IMG\");\n\n  if (className) image.classList.add(className);\n  if (altText) image.setAttribute(\"alt\", altText);\n  image.setAttribute(\"src\", svgIcon);\n  return image;\n};\n", "import notify from \"../components/molecules/notify.ts\";\nimport { getNote } from \"../components/organisms/noteManager/noteManager.ts\";\nimport { url } from \"./urlManager.ts\";\n\nexport const share = async () => {\n  try {\n    const note = getNote();\n    const currentUrl = url.get();\n    await navigator.share({\n      title: note ? note.title : TITLE_NAME,\n      text: note ? note.text : \"Temporary note keeping app for the browser\",\n      url: currentUrl,\n    });\n  } catch (error) {\n    notify.info(`${error.message}`);\n  }\n};\n", "import {\n  deleteNote,\n  getNote,\n  getNotes,\n  resetNoteManager,\n  saveNote,\n} from \"../noteManager/noteManager.ts\";\nimport select from \"../../../utils/dom.js\";\nimport storage from \"../../../utils/localstorage.js\";\nimport { isUserLoggedIn } from \"../../../utils/isUserLoggedIn.js\";\nimport {\n  goAuthenticate,\n  setGistToSyncWith,\n  syncNotesWithGitHub,\n} from \"../../../utils/github/actions.js\";\nimport commander from \"./commander.ts\";\nimport {\n  saveDataToFile,\n  saveFileAs,\n} from \"../../../utils/fileSystem/fileSystem.ts\";\nimport { url } from \"../../../utils/urlManager.ts\";\nimport { mailTo } from \"../../../utils/mail.js\";\nimport markDownViewer from \"../markdown/markDownViewer.js\";\nimport prettifyJSON from \"../../../utils/prettifyJSON.js\";\nimport notify from \"../../molecules/notify.ts\";\nimport { copyToClipboard } from \"../../../utils/copyToClipboard.ts\";\nimport { sleep } from \"../../../utils/sleep.js\";\nimport { publishGist, updateGist } from \"../../../utils/github/api.ts\";\nimport { icon } from \"../../atoms/icon/icon.js\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport ListSVG from \"../../../../assets/svg/list.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport TrashSVG from \"../../../../assets/svg/trash.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport CheckmarkCircleSVG from \"../../../../assets/svg/checkmark-circle.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport CloudSyncSVG from \"../../../../assets/svg/cloud-sync.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport LighterSVG from \"../../../../assets/svg/lighter.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport EnterDownSVG from \"../../../../assets/svg/enter-down.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport DownloadSVG from \"../../../../assets/svg/download.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport EnvelopeSVG from \"../../../../assets/svg/envelope.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport BugSVG from \"../../../../assets/svg/bug.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport PictureSVG from \"../../../../assets/svg/picture.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport PrinterSVG from \"../../../../assets/svg/printer.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport PageBreakSVG from \"../../../../assets/svg/page-break.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport FrameExpandSVG from \"../../../../assets/svg/frame-expand.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport ArrowRightCircleSVG from \"../../../../assets/svg/arrow-right-circle.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport MagicWandSVG from \"../../../../assets/svg/magic-wand.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport RocketSVG from \"../../../../assets/svg/rocket.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport SpellCheckSVG from \"../../../../assets/svg/spell-check.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport PencilSVG from \"../../../../assets/svg/pencil.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport ShareSVG from \"../../../../assets/svg/exit-up.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport LeafSVG from \"../../../../assets/svg/leaf.svg\";\n// @ts-types=\"../../../../../types.d.ts\"\nimport { share } from \"../../../utils/webShare.js\";\nimport { setSavedState } from \"../../../ui/functions/savedState.ts\";\n\nconst getSyncTitle = () => {\n  const gistId = storage.get(\"gistId\");\n  const authToken = storage.get(\"authToken\");\n  if (!authToken) {\n    return \"Sync: Authorize your GitHub account for synchronisation\";\n  }\n  if (!gistId) {\n    return \"Sync: Pick your Gist to sync with\";\n  }\n  return \"Sync: Notes with my GitHub Gist\";\n};\n\nconst shareNoteCommand = {\n  title: \"Share note\",\n  icon: icon(ShareSVG, \"share note\"),\n  sortTitle: \"Share\",\n  call: share,\n};\n\nconst sharePublicLinkCommand = {\n  title: \"Share public link\",\n  key: null,\n  icon: icon(ShareSVG, \"share public link\"),\n  sortTitle: \"Share public link\",\n  call: async () => {\n    commander.hide();\n    await saveNote(select(\".terminal\").getValue());\n    const note = getNote();\n    if (note) {\n      const response = await publishGist({\n        note,\n      });\n      const rawLink = response.history[0].url;\n      const gitResponse = await fetch(rawLink).then((response) =>\n        response.json()\n      );\n      const { files } = gitResponse;\n      const fileContents = Object.values(files);\n      const [gistFile] = fileContents;\n      const { raw_url: rawUrl } = gistFile as { raw_url: string };\n      const linkToShare = `${url.baseUrl}?raw=${rawUrl}`;\n      const successMessage = \"MiroPad public link copied to clipboard \uD83D\uDCCB!\";\n      copyToClipboard(linkToShare, successMessage);\n    }\n  },\n};\n\nexport const commands = () => {\n  return [\n    {\n      title: \"New note\",\n      icon: icon(PencilSVG, \"new note\"),\n      sortTitle: \"New\",\n      key: \"n\",\n      call: resetNoteManager,\n    },\n    {\n      title: \"Save\",\n      key: \"s\",\n      icon: icon(CheckmarkCircleSVG, \"save note\"),\n      sortTitle: \"Save\",\n      call: async () => {\n        commander.hide();\n        await saveNote(select(\".terminal\").getValue());\n        const note = getNote();\n        if (note && !note.disableSync) {\n          updateGist([note]);\n        }\n        setSavedState();\n      },\n    },\n    // @ts-ignore ts cannot cope with browser mess\n    ...(navigator.share ? [shareNoteCommand] : []),\n    {\n      title: \"Toggle MarkDown Viewer\",\n      icon: icon(PageBreakSVG, \"toggle markdown viewer\", \"rotate90\"),\n      sortTitle: \"Split\",\n      key: \"m\",\n      call: () => {\n        markDownViewer.toggle();\n        commander.hide();\n      },\n    },\n    {\n      title: \"Full MarkDown view\",\n      icon: icon(FrameExpandSVG, \"full view mode\"),\n      sortTitle: \"Full view\",\n      key: \"shift m\",\n      call: () => {\n        markDownViewer.toggle(\"full\");\n        commander.hide();\n      },\n    },\n    ...(isUserLoggedIn() ? [sharePublicLinkCommand] : []),\n    {\n      title: \"Zen mode\",\n      icon: icon(LeafSVG, \"switch to zen mode\"),\n      sortTitle: \"Zen mode\",\n      key: \"shift z\",\n      call: () => {\n        const isZen = Boolean(url.getSearchParam(\"zen\"));\n        if (isZen) {\n          url.deleteParam(\"zen\");\n        } else {\n          url.set(undefined, {\n            zen: true,\n          });\n        }\n        commander.hide();\n      },\n    },\n    {\n      title: \"List saved notes\",\n      icon: icon(ListSVG, \"list notes\"),\n      sortTitle: \"Notes\",\n      key: \"p\",\n      call: () => commander.toggle(commander.getModes().notes),\n    },\n    {\n      title: \"Delete note\",\n      key: \"shift d\",\n      icon: icon(TrashSVG, \"delete note\"),\n      sortTitle: \"Delete\",\n      call: deleteNote,\n    },\n    {\n      title: getSyncTitle(),\n      icon: icon(CloudSyncSVG, \"sync with github\"),\n      key: null,\n      call: async () => {\n        const token = storage.get(\"authToken\");\n        if (!token) {\n          return goAuthenticate();\n        }\n        const gistId = storage.get(\"gistId\");\n        if (!gistId) {\n          return await setGistToSyncWith(token);\n        }\n        commander.hide();\n        await syncNotesWithGitHub();\n      },\n    },\n    {\n      title: \"Sync: Reset Gist settings\",\n      icon: icon(LighterSVG, \"reset github settings\"),\n      key: null,\n      call: () => {\n        localStorage.removeItem(\"authToken\");\n        localStorage.removeItem(\"gistId\");\n        localStorage.removeItem(\"lastLocalUpdate\");\n        localStorage.removeItem(\"lastSync\");\n        notify.info(\"Gist setting have been reset!\");\n        commander.hide();\n      },\n    },\n    {\n      title: \"Toggle sidebar\",\n      experimental: true,\n      key: \"shift l\",\n      call: () => {\n        select(\"aside\").toggle();\n      },\n    },\n    {\n      title: \"Save to File System...\",\n      experimental: true,\n      icon: icon(EnterDownSVG, \"save file\"),\n      key: \"shift s\",\n      call: () => {\n        const note = getNote();\n        if (note) {\n          const { text, title } = note;\n          saveFileAs(text, title);\n          commander.hide();\n        }\n      },\n    },\n    {\n      title: \"Email note to...\",\n      experimental: true,\n      icon: icon(EnvelopeSVG, \"email\"),\n      key: \"e\",\n      call: () => {\n        const note = select(\".terminal\").getValue();\n        mailTo(note);\n        commander.hide();\n      },\n    },\n    {\n      title: \"Toggle experimental features\",\n      experimental: false,\n      icon: icon(BugSVG, \"lab\"),\n      key: null,\n      call: () => {\n        const previousStatus = Boolean(storage.get(\"__experimental__\"));\n\n        if (previousStatus) {\n          storage.remove(\"__experimental__\");\n        } else {\n          storage.set(\"__experimental__\", true);\n        }\n        notify.showNotification(\n          `Experimental features turned ${previousStatus ? \"off\" : \"on\"}`,\n        );\n        commander.hide();\n      },\n    },\n    {\n      title: \"Toggle Autocompletion\",\n      experimental: false,\n      icon: icon(ArrowRightCircleSVG, \"autocompletion\"),\n      key: null,\n      call: () => {\n        const previousStatus = Boolean(storage.get(\"__autocomplete__\"));\n\n        if (previousStatus) {\n          storage.remove(\"__autocomplete__\");\n        } else {\n          storage.set(\"__autocomplete__\", true);\n        }\n        notify.showNotification(\n          `Autocomplete feature turned ${previousStatus ? \"off\" : \"on\"}`,\n        );\n        commander.hide();\n        select(\".terminal\").focus();\n      },\n    },\n    {\n      title: \"Add a cover picture\",\n      experimental: true,\n      icon: icon(PictureSVG, \"cover picture\"),\n      key: null,\n      call: async () => {\n        const bgImage = prompt(\"Paste the image URL in here...\");\n        commander.hide();\n        await sleep(200); // need to wait after prompt for some reason before copy\n        copyToClipboard(\n          `![bg](${bgImage}){.cover}`,\n          \"\uD83D\uDC4CCopied! Paste the code on the MiroPad editor\",\n        );\n        select(\".terminal\").focus();\n        notify.info(\n          \"Paste the cover picture wherever you prefer on the MirPad editor\",\n        );\n      },\n    },\n    {\n      title: \"Print MarkDown output\",\n      experimental: true,\n      icon: icon(PrinterSVG, \"print\"),\n      key: null,\n      call: () => {\n        select(\".preview\").show();\n        markDownViewer.init();\n        globalThis.print();\n        commander.hide();\n      },\n    },\n    {\n      key: \"j\",\n      title: \"Prettify JSON document\",\n      icon: icon(MagicWandSVG, \"prettify json\"),\n      call: () => {\n        prettifyJSON(\".terminal\");\n        commander.hide();\n      },\n    },\n    {\n      title: \"Toggle command palette\",\n      icon: icon(RocketSVG, \"toggle command palette\"),\n      key: [\"shift p\", \"k\"],\n      call: () => commander.toggle(commander.getModes().commands),\n    },\n    {\n      title: \"Find and Replace...\",\n      experimental: true,\n      icon: icon(SpellCheckSVG, \"find and replace\"),\n      key: \"shift f\",\n      call: () => {\n        const selectedValue = select(\".terminal\")\n          .getValue()\n          .slice(\n            select(\".terminal\").el.selectionStart,\n            select(\".terminal\").el.selectionEnd,\n          );\n        const valueToFind = prompt(\"What do you wanna find?\", selectedValue);\n        if (!valueToFind) {\n          return notify.info(\"Value not found\");\n        }\n        const positionOfFirstChar = select(\".terminal\")\n          .getValue()\n          .indexOf(valueToFind);\n\n        select(\".terminal\").el.setSelectionRange(\n          positionOfFirstChar,\n          positionOfFirstChar + valueToFind.length,\n        );\n        const replacementValue = prompt(`Replace ${valueToFind} with...`);\n        if (replacementValue) {\n          select(\".terminal\").el.setRangeText(replacementValue);\n        }\n      },\n    },\n    {\n      title: \"Download all notes!\",\n      icon: icon(DownloadSVG, \"Download all notes on your local file system\"),\n      call: () => {\n        const notes = getNotes({\n          includeDeleted: true,\n        });\n        saveDataToFile(notes);\n        commander.hide();\n      },\n    },\n    {\n      title: \"Permanently delete ALL notes \u2757\",\n      icon: icon(TrashSVG, \"delete note\"),\n      call: () => {\n        const confirmation = confirm(\n          \"Are you sure you want do delete ALL your notes?\",\n        );\n        if (confirmation) {\n          const notes = getNotes({\n            includeDeleted: true,\n          });\n          notes.forEach((note) => {\n            storage.remove(note.id);\n          });\n          resetNoteManager();\n        }\n        commander.hide();\n      },\n    },\n  ] as const;\n};\n", "const keyListener = {\n  events: [],\n  on(key, fn) {\n    if (Array.isArray(key)) {\n      key.forEach((k) => {\n        const finalKey = k.key || k;\n        const functionToCall = k.call || fn;\n        this.on(finalKey, functionToCall);\n      });\n\n      return this;\n    }\n\n    if (key && typeof key === \"string\" && fn && typeof fn === \"function\") {\n      this.events = [\n        ...this.events,\n        {\n          key: key.includes(\"shift\") ? key.replace(\"shift\", \"\").trim() : key,\n          shift: key.includes(\"shift\"),\n          fn() {\n            fn();\n          },\n        },\n      ];\n    }\n    return this;\n  },\n  listen() {\n    document.addEventListener(\"keydown\", (e) => {\n      this.handleEvent(e);\n    });\n    return this;\n  },\n  handleEvent(e) {\n    this.events.map((event) => {\n      if (\n        event.key === e.key &&\n        (e.ctrlKey === true || e.metaKey === true) &&\n        e.shiftKey === event.shift\n      ) {\n        e.preventDefault();\n        event.fn();\n      }\n      return true;\n    });\n  },\n};\n\nexport default keyListener;\n", "import { isElement } from \"../../../utils/dom.js\";\n\nexport const link = (textOrNode, url) => {\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.appendChild(\n    isElement(textOrNode) ? textOrNode : document.createTextNode(textOrNode),\n  );\n  return a;\n};\n", "const isSameYear = (aDate, bDate = new Date()) => {\n  const yearA = new Date(aDate).getFullYear();\n  const yearB = new Date(bDate).getFullYear();\n\n  return yearA === yearB;\n};\n\nconst isSameMonth = (aDate, bDate = new Date()) => {\n  const monthA = new Date(aDate).getMonth();\n  const monthB = new Date(bDate).getMonth();\n\n  return monthA === monthB;\n};\n\nconst isSameDateOfMonth = (aDate, bDate = new Date()) => {\n  const dateA = new Date(aDate).getDate();\n  const dateB = new Date(bDate).getDate();\n\n  return dateA === dateB;\n};\n\nconst isSameDate = (aDate, bDate = new Date()) => {\n  return (\n    isSameYear(aDate, bDate) &&\n    isSameMonth(aDate, bDate) &&\n    isSameDateOfMonth(aDate, bDate)\n  );\n};\n\nconst monthNames = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nconst shortMonthNames = monthNames.map((name) => name.slice(0, 3));\n\nconst isYesterday = (date = new Date()) => {\n  const theDate = new Date(date);\n  const yesterDate = new Date().getDate() - 1;\n  return (\n    isSameMonth(theDate) &&\n    isSameYear(theDate) &&\n    theDate.getDate() === yesterDate\n  );\n};\n\nexport const relativeDate = (dateCreated) => {\n  const date = new Date(dateCreated);\n  const month = !isYesterday(dateCreated)\n    ? shortMonthNames[date.getMonth()]\n    : \"\";\n  const year = isSameYear(date) ? \"\" : date.getFullYear();\n  const day = isYesterday(date) ? \"Yesterday\" : date.getDate();\n\n  return `${isSameDate(date) ? \"\" : `${day} ${month} ${year}`} ${\n    isSameDate(date) ? date.toLocaleTimeString() : \"\"\n  }`;\n};\n", "export const isArraySorted = (arr: Array<number>) => {\n  const someArray = arr.reduce((currentValue, item) => {\n    if (currentValue.length === 0) {\n      return [item];\n    }\n    const max = Math.max(...currentValue);\n    return [...currentValue, ...(item >= max ? [item] : [])];\n  }, [] as Array<number>);\n  return someArray.length === arr.length;\n};\n", "import { isArraySorted } from \"../../../utils/isArraySorted.ts\";\n\nexport const smartFilter = (phrase: string, filter: string) => {\n  const wordParts = phrase.split(\" \").map((w) => w.toLowerCase());\n  const filterParts = filter.split(\" \").map((f) => f.toLowerCase());\n  const indexes = filterParts.map((f) => {\n    const foundIndexes = wordParts.map((w, i) => {\n      return w.includes(f) ? i : -1;\n    });\n    const firstIndexFound = foundIndexes.reduce((currentValue, fi) => {\n      return fi > -1 ? fi : currentValue;\n    }, -1);\n    return firstIndexFound;\n  });\n\n  if (indexes.includes(-1)) {\n    return false;\n  }\n  return isArraySorted(indexes);\n};\n", "export const requestNotificationPermission = () => {\n  return globalThis.Notification.requestPermission();\n};\n\nexport const registerServiceWorker = () => {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.register(\n      `${\n        globalThis.location.pathname.slice(-1) === \"/\"\n          ? globalThis.location.pathname\n          : `${globalThis.location.origin}/`\n      }service-worker.js?v=${VERSION}`,\n    );\n  }\n};\n", "import {\n  getDateCreatedFromTitle,\n  getNote,\n  getNotes,\n} from \"../noteManager/noteManager.ts\";\nimport { commands } from \"./commands.ts\";\nimport keyListener from \"../../../utils/keyListener.js\";\nimport select from \"../../../utils/dom.js\";\nimport { url } from \"../../../utils/urlManager.ts\";\nimport { command } from \"../../molecules/commands/command.js\";\nimport { link } from \"../../atoms/link/link.js\";\nimport { div } from \"../../atoms/div/div.js\";\nimport { relativeDate } from \"../../../utils/dates.js\";\nimport { smartFilter } from \"./smartFilter.ts\";\nimport { button } from \"../../atoms/button/button.js\";\nimport { requestNotificationPermission } from \"../../../registerServiceWorker.js\";\nimport storage from \"../../../utils/localstorage.js\";\n\nconst getShortcut = (key: string | Array<string>): string => {\n  if (Array.isArray(key)) {\n    return key.map((k) => getShortcut(k)).join(\", \");\n  }\n  return key ? `\u2318+${key.toUpperCase()}` : \"\";\n};\n\nconst commander = (() => {\n  enum CommanderModes {\n    off = \"off\",\n    notes = \"notes\",\n    revisions = \"revisions\",\n    commands = \"commands\",\n    gists = \"gists\",\n  }\n  let state = {\n    input: \"\",\n    mode: CommanderModes.off,\n    options: {\n      selected: 0,\n      length: 0,\n    },\n  };\n  return {\n    getState: function () {\n      return state;\n    },\n    getModes: function () {\n      return CommanderModes;\n    },\n    setState: function (newState: Record<string, unknown>) {\n      state = {\n        ...state,\n        ...newState,\n      };\n      return state;\n    },\n    show: function (what = CommanderModes.commands) {\n      select(\"#commander\").show();\n      select(\"#commander input\").focus();\n      switch (what) {\n        case CommanderModes.commands:\n          this.generateCommands();\n          select(\"#commander input\").setValue(\"> \");\n          this.setState({\n            mode: CommanderModes.commands,\n          });\n          break;\n        case CommanderModes.notes:\n          this.generateNotes();\n          select(\"#commander input\").setValue(\"\");\n          this.setState({\n            mode: CommanderModes.notes,\n          });\n          break;\n        case CommanderModes.revisions:\n          this.generateRevisions();\n          select(\"#commander input\").setValue(\"\");\n          this.setState({\n            mode: CommanderModes.revisions,\n          });\n          break;\n        default:\n          // do nothing;\n          break;\n      }\n      return this;\n    },\n    hide: function () {\n      select(\"#commander\").hide();\n      state.mode = CommanderModes.off;\n      return this;\n    },\n    toggle: function (mode?: CommanderModes) {\n      requestNotificationPermission();\n      if (state.mode === CommanderModes.off || state.mode !== mode) {\n        this.show(mode);\n      } else {\n        this.hide();\n      }\n      return this;\n    },\n    commands: function () {\n      return commands();\n    },\n    selectOption: function (direction: \"down\" | \"up\" = \"down\") {\n      const currentlySelected = state.options.selected;\n      const lastOption = state.options.length - 1;\n      const isLastOption = currentlySelected === lastOption;\n      const isFirstOption = currentlySelected === 0;\n      const isDown = direction === \"down\";\n\n      const indexToSelect = isDown\n        ? isLastOption ? 0 : currentlySelected + 1\n        : isFirstOption\n        ? lastOption\n        : currentlySelected - 1;\n\n      state.options = {\n        ...state.options,\n        selected: indexToSelect,\n      };\n    },\n    initCommander: function () {\n      // initialize mobile-dock\n      commands()\n        .slice(0, 5)\n        .map((command) => {\n          select(\".mobile-dock\").append(\n            button(\n              // @ts-ignore js-to-ts wider refactoring required\n              [command.icon, document.createTextNode(command.sortTitle)],\n              command.call,\n              command.title.toLowerCase().replace(/\\s/g, \"-\"),\n            ),\n          );\n        });\n\n      select(\"#commander button\").listen(\"click\", () => {\n        this.hide();\n      });\n\n      select(\"#commander input\")\n        .listen(\"keydown\", (e: KeyboardEvent) => {\n          // arrow down 40\n          if (e.keyCode === 40) {\n            if (state.mode === CommanderModes.revisions) {\n              select(\"#commands li.selected\").click();\n            }\n            this.selectOption(\"down\");\n          }\n          // arrow up 38\n          if (e.keyCode === 38) {\n            if (state.mode === CommanderModes.revisions) {\n              select(\"#commands li.selected\").click();\n            }\n            this.selectOption(\"up\");\n          }\n        })\n        .listen(\"keyup\", (e: KeyboardEvent) => {\n          // enter\n          if (e.keyCode === 13) {\n            if (state.mode === CommanderModes.commands) {\n              select(\"#commands li.selected div\").click();\n            } else {\n              select(\"#commands li.selected a\").click();\n            }\n          }\n          // escape\n          if (e.keyCode === 27) {\n            select(\".terminal\").focus();\n          }\n          const el = e.target as HTMLTextAreaElement;\n          if (state.input !== el.value) {\n            state.options.selected = 0;\n          }\n          state.input = el.value;\n          this.generateOptions(el.value);\n        });\n      return this;\n    },\n    init: function () {\n      this.initCommander();\n      keyListener.listen().on(this.commands());\n      select(\".menu\").listen(\"click\", () => this.toggle());\n      select(\"#revisions\").listen(\"click\", () => this.generateRevisions());\n      return this;\n    },\n    generateRevisions: function () {\n      this.show();\n      state.mode = CommanderModes.revisions;\n      const note = getNote();\n      if (note) {\n        const { revisions } = note;\n        const indexToSelect = state.options.selected;\n        const revisionsOptions = Object.keys(revisions)\n          .sort((a, b) => {\n            const { dateCreated: aDateCreated } = revisions[a];\n            const { dateCreated: bDateCreated } = revisions[b];\n            return bDateCreated - aDateCreated;\n          })\n          .map((id, i) => ({\n            title: div({ content: `...${id.slice(-10)}` }),\n            secondary: `${relativeDate(revisions[id].dateCreated)}`,\n            onclick: () => {\n              url.set(undefined, {\n                v: id,\n              });\n              state.options.selected = i;\n              this.generateRevisions();\n            },\n          }))\n          // @ts-ignore js-to-ts wider refactoring required\n          .map((r, i) => command(r, i === indexToSelect));\n        select(\"#commands\").html(revisionsOptions);\n        state.options = {\n          ...state.options,\n          length: revisionsOptions.length,\n        };\n      }\n\n      return this;\n    },\n    generateOptions: function (value: string) {\n      switch (state.mode) {\n        case CommanderModes.commands:\n        case CommanderModes.notes:\n          if (value.slice(0, 1) === \">\") {\n            state.mode = CommanderModes.commands;\n            this.generateCommands(value.slice(1).trim());\n            select(\"#commander input\").placeholder(\"Search for commands...\");\n          } else {\n            state.mode = CommanderModes.notes;\n            this.generateNotes(value);\n          }\n          return;\n        case CommanderModes.revisions:\n          return this.generateRevisions();\n        case CommanderModes.off:\n          break;\n        default:\n          break;\n      }\n    },\n    generateNotes: function (value = \"\") {\n      const indexToSelect = state.options.selected;\n      const notes = getNotes()\n        .filter(({ title }) => {\n          return smartFilter(title, value);\n        })\n        .filter(({ id, deleted }) => !deleted && id !== url.getPageId())\n        .sort((a, b) => {\n          const aDateCreated = getDateCreatedFromTitle(a.title);\n          const bDateCreated = getDateCreatedFromTitle(b.title);\n          return bDateCreated - aDateCreated;\n        })\n        .map(({ id, title }, i) => {\n          const dateCreated = getDateCreatedFromTitle(title);\n          const href =\n            `${globalThis.location.origin}${globalThis.location.pathname}#${id}`;\n\n          const noteLink = link(\n            div({ content: title, highlight: value }),\n            href,\n          );\n\n          const noteCommand = command(\n            // @ts-ignore until command.js makes it to ts\n            {\n              title: noteLink,\n              secondary: relativeDate(dateCreated),\n              onclick: () => {\n                this.hide();\n                select(\".terminal\").focus();\n              },\n            },\n            i === indexToSelect,\n          );\n          return noteCommand;\n        });\n      select(\"#commands\").html(notes);\n      select(\"#commander input\").placeholder(\n        `Search from ${notes.length} saved notes...`,\n      );\n      state.options = {\n        ...state.options,\n        length: notes.length,\n      };\n      return this;\n    },\n    generateCommands: function (value = \"\") {\n      const indexToSelect = state.options.selected;\n      const commandComponents = this.commands()\n        .filter(({ title }) => smartFilter(title, value))\n        // @ts-ignore js-to-ts wider refactoring required\n        .filter(({ experimental = false }) => {\n          return storage.get(\"__experimental__\") ? true : !experimental;\n        })\n        // @ts-ignore js-to-ts wider refactoring required\n        .map(({ title, key, call, icon }, i) => {\n          const commandComponent = command(\n            // @ts-ignore until command.js makes it to ts\n            {\n              title: div({ content: title, highlight: value }),\n              icon: icon,\n              secondary: getShortcut(key),\n              onclick: call,\n            },\n            i === indexToSelect,\n          );\n          return commandComponent;\n        });\n      select(\"#commands\").html(commandComponents);\n      state.options = {\n        ...state.options,\n        length: commandComponents.length,\n      };\n      return this;\n    },\n  };\n})();\n\nexport default commander;\n", "export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n", "import { urlAlphabet as scopedUrlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << Math.log2(alphabet.length - 1)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    id += scopedUrlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n", "import getCaretCoordinates from \"textarea-caret\";\nimport { terminal } from \"../components/organisms/terminal.ts\";\nimport select from \"../utils/dom.js\";\nimport { trieDictionary } from \"../main.js\";\n\nconst getPredictions = (word: string) => {\n  const sanitizedWord = word.replace(/[\\r\\n\\t]+/g, \"\").toLowerCase();\n\n  return trieDictionary.getMatchingWords(sanitizedWord);\n};\n\nexport const getCurrentlyTypingWord = (\n  text: string,\n  cursorIndexPosition: number,\n) => {\n  let word = \"\";\n  let currentIndex = cursorIndexPosition - 1;\n  do {\n    const character = text[currentIndex] || \"\";\n    currentIndex = character.trim() === \"\" ? -1 : currentIndex - 1;\n    word = character.trim() !== \"\" ? `${character}${word}` : word;\n  } while (currentIndex >= 0);\n  return word;\n};\n\nexport const placeSuggestion = (textEl: HTMLTextAreaElement) => {\n  const coords = getCaretCoordinates(\n    textEl,\n    textEl.selectionEnd,\n  );\n  const { top, left } = coords;\n\n  // This does the trick! `main` is getting the same\n  // height as the textarea so the suggestion will be placed\n  // right!\n  // TODO: change that on terminal size change!\n  const actualTerminalHeight = select(\".terminal\").el.scrollHeight;\n  const main = select(\"main\").el;\n  main.style.height = `${actualTerminalHeight}px`;\n\n  select(\".suggestion\").el.style.top = `${top}px`;\n  select(\".suggestion\").el.style.left = `${left}px`;\n};\n\nexport const isLastCharacterInTheWord = (\n  text: string,\n  characterIndex: number,\n) => text[characterIndex] === undefined || text[characterIndex].trim() === \"\";\n\nexport const autoComplete = (e: InputEvent) => {\n  const cursorIndexPosition = (e.target as HTMLTextAreaElement).selectionEnd;\n  const fullText = terminal.el.getValue();\n\n  const charTyped = fullText[cursorIndexPosition - 1];\n  if (e.inputType === \"deleteContentBackward\" || charTyped === \" \") {\n    terminal.setState({\n      prediction: null,\n      currentWord: null,\n    });\n    return select(\".suggestion\").hide();\n  }\n  const word = getCurrentlyTypingWord(fullText, cursorIndexPosition);\n\n  const shouldDisplaySuggestion = e.inputType === \"insertText\" &&\n    isLastCharacterInTheWord(fullText, cursorIndexPosition) &&\n    !word.startsWith(\"#\");\n\n  if (shouldDisplaySuggestion) {\n    placeSuggestion(e.target as HTMLTextAreaElement);\n    const matches = getPredictions(word);\n\n    const [firstMatch] = matches;\n    const prediction = firstMatch || \"\";\n\n    terminal.setState({\n      prediction,\n      currentWord: word,\n      matches: matches.slice(0, 10),\n      options: {\n        selected: 0,\n        length: matches.length,\n      },\n    });\n    const state = terminal.getState();\n    if (state.currentWord && state.prediction && state.currentWord.length > 1) {\n      terminal.renderInlineSuggestion();\n      terminal.renderOptions();\n    } else {\n      select(\".suggestion\").hide();\n    }\n  }\n};\n", "export const findCurrentLine = (text: string, caretIndex: number): string => {\n  const lines = text.split(\"\\n\");\n  type MyAcc = {\n    text: string;\n    isFound: boolean;\n  };\n  const line = lines.reduce(\n    (acc: MyAcc, line) => {\n      const { isFound } = acc;\n      if (isFound) return acc;\n      const recon = `${acc.text}${line}\\n`;\n      const currentLength = recon.length;\n\n      if (caretIndex >= currentLength) {\n        return {\n          text: recon,\n          isFound: false,\n        };\n      }\n\n      return {\n        text: line,\n        isFound: true,\n      };\n    },\n    {\n      text: \"\",\n      isFound: false,\n    },\n  );\n\n  return line.text;\n};\n", "import select from \"../dom.js\";\nimport { findCurrentLine } from \"./index.ts\";\n\nexport const autoCompleteCheckboxes = (e) => {\n  const currentLine = findCurrentLine(e.target.value, e.target.selectionEnd);\n\n  const completers = {\n    \"* [\": \"\\n* [ ] \",\n    \"* \": \"\\n* \",\n    \" * [\": \"\\n * [ ] \",\n    \" * \": \"\\n * \",\n  };\n\n  for (const [startsWith, compleano] of Object.entries(completers)) {\n    if (currentLine.startsWith(startsWith)) {\n      e.preventDefault();\n      select(\".terminal\").insertAtCaret(compleano);\n      break;\n    }\n  }\n};\n", "import { getNotes } from \"../../components/organisms/noteManager/noteManager.ts\";\nimport { terminal } from \"../../components/organisms/terminal.ts\";\nimport select from \"../../utils/dom.js\";\nimport {\n  getCurrentlyTypingWord,\n  isLastCharacterInTheWord,\n  placeSuggestion,\n} from \"../autoComplete.ts\";\n\nexport const renderInterNotes = (e: InputEvent) => {\n  const target = e.target as HTMLTextAreaElement | null;\n  if (!target) return;\n  const cursorIndexPosition = target.selectionEnd;\n  const fullText = terminal.el.getValue();\n  const charTyped = fullText[cursorIndexPosition - 1];\n  if (e.inputType === \"deleteContentBackward\" || charTyped === \" \") {\n    terminal.setState({\n      prediction: null,\n      currentWord: null,\n    });\n    return select(\".suggestion\").hide();\n  }\n  const word = getCurrentlyTypingWord(fullText, cursorIndexPosition);\n  if (word.startsWith(\"#\")) {\n    const shouldDisplaySuggestion = e.inputType === \"insertText\" &&\n      isLastCharacterInTheWord(fullText, cursorIndexPosition);\n\n    if (shouldDisplaySuggestion) {\n      placeSuggestion(e.target as HTMLTextAreaElement);\n      const allNoteIds = getNotes().map((note) => note.id);\n      const actualNoteSearch = word.slice(1);\n      const matches = allNoteIds.filter((noteId) => {\n        return noteId.startsWith(actualNoteSearch);\n      });\n      const [firstMatch] = matches;\n      const prediction = firstMatch;\n      const currentWord = actualNoteSearch;\n\n      terminal.setState({\n        prediction,\n        currentWord,\n        matches: matches.slice(0, 10),\n        options: {\n          selected: 0,\n          length: matches.length,\n        },\n      });\n      const state = terminal.getState();\n      if (\n        state.currentWord &&\n        state.prediction &&\n        state.currentWord.length > 1\n      ) {\n        terminal.renderInlineSuggestion();\n        terminal.renderOptions();\n      } else {\n        select(\".suggestion\").hide();\n      }\n    }\n  }\n};\n", "import { nanoid } from \"nanoid\";\n// @ts-types=\"../../../../types.d.ts\"\nimport TrashSVG from \"../../../assets/svg/trash.svg\";\nimport { configuration } from \"../../../configuration.ts\";\nimport { autoComplete } from \"../../features/autoComplete.ts\";\nimport { setSavedState } from \"../../ui/functions/savedState.ts\";\nimport select from \"../../utils/dom.js\";\nimport storage from \"../../utils/localstorage.js\";\nimport { handleErrorResponse } from \"../../utils/mail.js\";\nimport { autoCompleteCheckboxes } from \"../../utils/text/autoCompleteCheckboxes.js\";\nimport { div } from \"../atoms/div/div.js\";\nimport { icon } from \"../atoms/icon/icon.js\";\nimport { command } from \"../molecules/commands/command.js\";\nimport notify from \"../molecules/notify.ts\";\nimport commander from \"./commander/commander.ts\";\nimport markDownViewer from \"./markdown/markDownViewer.js\";\nimport { getNote, getTitle } from \"./noteManager/noteManager.ts\";\nimport { trieDictionary } from \"../../main.js\";\nimport { renderInterNotes } from \"../../features/inter-linking/renderInterNotes.ts\";\n\ntype TerminalState = {\n  matches: Array<string>;\n  currentWord: null | string;\n  prediction: null | string;\n  options: {\n    selected: number;\n    length: number;\n  };\n};\n\nexport const terminal = (() => {\n  const initState = {\n    matches: [],\n    currentWord: null,\n    prediction: null,\n    options: {\n      selected: 0,\n      length: 0,\n    },\n  } as TerminalState;\n  let state = initState;\n  return {\n    el: select(\".terminal\"),\n    getState: function (): TerminalState {\n      return state;\n    },\n    setState: function (newState: Partial<TerminalState>) {\n      state = {\n        ...state,\n        ...newState,\n      };\n      return state;\n    },\n    resetState: function () {\n      terminal.setState(initState);\n    },\n    selectOption: function (direction: \"down\" | \"up\" = \"down\") {\n      const currentlySelected = state.options.selected;\n      const lastOption = state.options.length - 1;\n      const isLastOption = currentlySelected === lastOption;\n      const isFirstOption = currentlySelected === 0;\n      const isDown = direction === \"down\";\n\n      const indexToSelect = isDown\n        ? isLastOption ? 0 : currentlySelected + 1\n        : isFirstOption\n        ? lastOption\n        : currentlySelected - 1;\n\n      state.options = {\n        ...state.options,\n        selected: indexToSelect,\n      };\n\n      terminal.setState({\n        prediction: state.matches[state.options.selected],\n      });\n      terminal.renderInlineSuggestion();\n      terminal.renderOptions();\n    },\n    acceptCompletion: (word?: string) => {\n      const complete = (word: string, currentWord: string) => {\n        const completion = word\n          .toLowerCase()\n          .replace(currentWord.toLowerCase(), \"\");\n        if (completion) {\n          select(\".terminal\").insertAtCaret(`${completion} `);\n        } else {\n          select(\".terminal\").insertAtCaret(\"  \");\n        }\n        select(\".suggestion\").hide();\n        terminal.resetState();\n      };\n\n      const { prediction, currentWord } = state;\n\n      if (word && currentWord) {\n        return complete(word, currentWord);\n      }\n\n      if (prediction && currentWord) {\n        complete(prediction, currentWord);\n        // +1 to the score of the word autocompleted\n        trieDictionary.insert(prediction);\n      }\n    },\n    renderInlineSuggestion: () => {\n      const { prediction, currentWord } = state;\n      if (prediction && currentWord) {\n        const inlineSuggestion = div({\n          content: `${prediction.slice(currentWord.length)}`,\n        });\n        inlineSuggestion.setAttribute(\"id\", \"inlineSuggestion\");\n        select(\".suggestion\").show().html(inlineSuggestion);\n      }\n    },\n    renderOptions: () => {\n      const optionsUl = select(\".suggestion .options\");\n      if (optionsUl && optionsUl.el) optionsUl.el.remove();\n\n      const selectedIndex = state.options.selected;\n      const options = state.matches.map((word, i) =>\n        command(\n          {\n            title: div({ content: word }),\n            secondary: icon(TrashSVG, \"delete word\"),\n            onSecondaryClick: () => {\n              storage.removeFromDictionary(word);\n              terminal.setState({\n                matches: state.matches.filter((m) => m !== word),\n              });\n              terminal.renderOptions();\n            },\n            onclick: () => {\n              terminal.acceptCompletion(word);\n            },\n            icon: null,\n          },\n          i === selectedIndex,\n        )\n      );\n      const optionList = document.createElement(\"ul\");\n      optionList.classList.add(\"options\");\n      optionList.classList.add(\"frost\");\n      options.forEach((el) => optionList.append(el));\n\n      select(\".suggestion\").el.append(optionList);\n    },\n    onFocus: () => {\n      commander.hide();\n      select(\".note-info\").hide();\n    },\n    onInput: (e: InputEvent) => {\n      const isAutocompleteEnabled = !!storage.get(\"__autocomplete__\");\n      if (isAutocompleteEnabled) {\n        autoComplete(e);\n      }\n      renderInterNotes(e);\n    },\n    onArrowDown: (e: KeyboardEvent) => {\n      if (state.matches.length > 0) {\n        e.preventDefault();\n        terminal.selectOption(\"down\");\n      }\n    },\n    onArrowUp: (e: KeyboardEvent) => {\n      if (state.matches.length > 0) {\n        e.preventDefault();\n        terminal.selectOption(\"up\");\n      }\n    },\n    onEnter: (e: KeyboardEvent) => {\n      if (state.matches.length > 0) {\n        e.preventDefault();\n        terminal.acceptCompletion();\n      }\n\n      // auto-magically handle checkboxes\n      autoCompleteCheckboxes(e);\n    },\n    onEscape: () => {\n      terminal.resetState();\n      select(\".suggestion\").hide();\n    },\n    onTab: (e: KeyboardEvent) => {\n      e.preventDefault();\n      terminal.acceptCompletion();\n    },\n    onKeyDown: (e: KeyboardEvent) => {\n      // enter\n      if (e.keyCode === 13) {\n        terminal.onEnter(e);\n      }\n      // arrow down\n      if (e.keyCode === 40) {\n        terminal.onArrowDown(e);\n      }\n\n      // arrow up\n      if (e.keyCode === 38) {\n        terminal.onArrowUp(e);\n      }\n\n      if (e.keyCode === 9) {\n        terminal.onTab(e);\n      }\n\n      if (e.keyCode === 32) {\n        terminal.setState({\n          prediction: \"\",\n        });\n      }\n\n      // escape\n      if (e.keyCode === 27) {\n        terminal.onEscape();\n      }\n    },\n    onKeyUp: (e: KeyboardEvent) => {\n      const currentlySavedNote = getNote();\n      const title = getTitle((e.target as HTMLInputElement).value);\n      select(\".title h3\").html(title);\n\n      const { text = \"\" } = currentlySavedNote || {};\n      const isNoteSaved =\n        !!(currentlySavedNote && terminal.el.getValue() === text);\n      setSavedState(isNoteSaved);\n    },\n    onPaste: async () => {\n      const clipboardItems = await navigator.clipboard.read();\n      for (const clipboardItem of clipboardItems) {\n        const imageTypes = clipboardItem.types?.filter((type) =>\n          type.startsWith(\"image/\")\n        );\n        for (const imageType of imageTypes) {\n          const blob = await clipboardItem.getType(imageType);\n          const token = storage.get(\"MIROPAD_SECRET_TOKEN\");\n          if (token) {\n            const [_image, fileExtension] = imageType.split(\"/\");\n            const fileName = `${nanoid()}.${fileExtension}`;\n\n            select(\"#logo\").addClass(\"loading\");\n            try {\n              const { url } = await fetch(\n                `${configuration.file_service.api}?fileName=${fileName}`,\n                {\n                  method: \"POST\",\n                  headers: {\n                    \"x-secret-token\": token,\n                    accept: \"application/json\",\n                    \"content-type\": \"application/octet-stream\",\n                  },\n                  body: blob,\n                },\n              )\n                .then(handleErrorResponse)\n                .then((response) => response.json());\n              select(\".terminal\").insertAtCaret(`![image](${url})`);\n            } catch (error) {\n              console.error(error);\n              notify.error(`Uploading file failed \uD83D\uDCA5!`);\n            }\n            select(\"#logo\").removeClass(\"loading\");\n          } else {\n            const imageURI = URL.createObjectURL(blob);\n            select(\".terminal\").insertAtCaret(`![image](${imageURI})`);\n          }\n          markDownViewer.update();\n        }\n      }\n    },\n    init: function () {\n      this.el\n        .listen(\"focus\", this.onFocus)\n        .listen(\"input\", this.onInput)\n        .listen(\"keydown\", this.onKeyDown)\n        .listen(\"keyup\", this.onKeyUp)\n        .listen(\"paste\", this.onPaste);\n    },\n  };\n})();\n", "import storage from \"./utils/localstorage.js\";\n\nexport const isSyncEnabled = () => {\n  const { authToken, gistId } = storage.get([\"authToken\", \"gistId\"]);\n  return !!(authToken && gistId);\n};\n", "type FrequencyGroups = {\n  [key: string]: Array<string>;\n};\n\nconst groupByFrequency = (entries: Dictionary): FrequencyGroups => {\n  return Object.entries(entries).reduce((acc, [word, frequency]) => {\n    const cc = acc[frequency] || [];\n    return {\n      ...acc,\n      [`${frequency}`]: [word, ...cc],\n    };\n  }, {} as FrequencyGroups);\n};\n\ntype Dictionary = {\n  [key: string]: number;\n};\ntype Node = {\n  char: string | null;\n  children: {\n    [key: string]: Node;\n  };\n  frequency: number;\n  hasChildren: () => boolean;\n  isWord: () => boolean;\n  contains: (char: string) => boolean;\n  getWords: (\n    char: string,\n    dictionary?: Dictionary,\n  ) => Dictionary;\n  increaseFrequency: () => void;\n  insert: (word: string) => void;\n  insertNode: (char: string, isLast?: boolean) => Node;\n};\n\nconst Node = (): Node => ({\n  char: null,\n  children: {},\n  frequency: 0,\n  hasChildren: function () {\n    return Object.keys(this.children).length > 0;\n  },\n  isWord: function () {\n    return this.frequency > 0;\n  },\n  contains: function (char: string) {\n    return Object.keys(this.children).includes(char);\n  },\n  getWords: function (prefix, dictionary = {}) {\n    const nodeInstance = this as Node;\n    if (nodeInstance.isWord()) {\n      dictionary = {\n        ...dictionary,\n        [prefix]: this.frequency,\n      };\n    }\n\n    if (nodeInstance.hasChildren()) {\n      for (const node of Object.values(nodeInstance.children)) {\n        dictionary = node.getWords(`${prefix}${node.char}`, dictionary);\n      }\n    }\n\n    return dictionary;\n  },\n  increaseFrequency: function () {\n    this.frequency = this.frequency + 1;\n  },\n  insert: function (word: Array<string> | string) {\n    const [firstChar, ...rest] = word;\n    if (firstChar) {\n      const isLast = rest.length === 0;\n      if (this.contains(firstChar)) {\n        const node = this.children[firstChar];\n        node.char = firstChar;\n        if (isLast) node.increaseFrequency();\n\n        return node.insert(rest.join(\"\"));\n      } else {\n        const node = this.insertNode(firstChar, isLast);\n        return node.insert(rest.join(\"\"));\n      }\n    }\n  },\n  insertNode: function (char, isLast = false) {\n    const newNode = Node();\n    if (isLast) newNode.increaseFrequency();\n    newNode.char = char;\n    this.children = {\n      ...this.children,\n      [char]: newNode,\n    };\n    return newNode;\n  },\n});\n\nexport const Trie = () => {\n  const rootNode = Node();\n\n  return {\n    insert: function (word: string | Array<string> = []) {\n      const words = Array.isArray(word) ? word : [word];\n      words.forEach((word) => rootNode.insert(word));\n      return this;\n    },\n    search: function (prefix = \"\") {\n      let node = rootNode;\n      prefix.split(\"\").forEach((character) => {\n        if (node) node = node.children[character];\n      });\n\n      return node ? node.getWords(prefix) : {};\n    },\n    // get sorted matching words\n    // first by frequency\n    // and then alphabetically\n    getMatchingWords: function (prefix = \"\") {\n      const frequencyGroups = groupByFrequency(this.search(prefix));\n      return Object.keys(frequencyGroups)\n        .sort((a, b) => parseInt(b, 10) - parseInt(a, 10))\n        .flatMap((key) => frequencyGroups[key].sort());\n    },\n  };\n};\n", "import notify from \"../components/molecules/notify.ts\";\n\nconst errorHandler = (error) => {\n  const { message = \"Unexpected error occurred!\" } = error;\n  notify.error(message);\n};\n\nexport default errorHandler;\n", "import \"../../css/print.css\";\nimport \"../../css/styles.css\";\nimport notify from \"../components/molecules/notify.ts\";\nimport {\n  search,\n  setNoteFromHash,\n} from \"../components/organisms/noteManager/noteManager.ts\";\nimport select from \"../utils/dom.js\";\nimport { url } from \"../utils/urlManager.ts\";\nimport { getGist } from \"../utils/github/api.ts\";\n\nconst setNoteFromRawUrl = async (rawUrl: string) => {\n  if (rawUrl) {\n    const response = await fetch(rawUrl).then((response) => {\n      if (response.ok) return response.text();\n      throw new Error(\n        `Remote note could not be retrieved! code: ${response.status}`,\n      );\n    });\n    select(\".terminal\").setValue(response);\n  }\n};\n\nconst setNoteFromGist = async (gistId: string) => {\n  if (gistId) {\n    try {\n      const gist = await getGist(gistId);\n      const { files } = gist;\n      const fileContents = Object.values(files);\n      const [gistFile] = fileContents;\n\n      // @ts-ignore as gistFile always has content\n      const { content } = gistFile;\n      select(\".terminal\").setValue(content);\n    } catch (_e) {\n      notify.error(\"MiroPad note not found! \uD83E\uDD37\u200D\u2642\uFE0F\");\n    }\n  }\n};\n\nexport const actOnURLStateChange = async (e: HashChangeEvent) => {\n  try {\n    const { oldURL, newURL } = e;\n    const oldPageId = url.getPageId(oldURL);\n    const newPageId = url.getPageId(newURL);\n    const hasPageIdChanged = oldPageId !== newPageId;\n    const { v: oldV } = url.getParamsObject(oldURL);\n    const { v: newV } = url.getParamsObject(newURL);\n    const hasPageVersionChanged = oldV !== newV;\n    const shouldChangeNote = [hasPageIdChanged, hasPageVersionChanged].some(\n      (r) => r,\n    );\n    if (shouldChangeNote) setNoteFromHash();\n\n    const { gistId, raw } = url.getParamsObject(newURL);\n    await setNoteFromGist(gistId);\n    await setNoteFromRawUrl(raw);\n  } catch (e: unknown) {\n    if (e instanceof Error) {\n      notify.error(e.message);\n    } else {\n      notify.error(\"An unknown error occurred\");\n    }\n  }\n\n  const isANewNote = !url.getPageId();\n  select(\"#note-info-button\").show(!isANewNote);\n  select(\"#new-note\").disable(isANewNote);\n\n  if (url.getSearchParam(\"md\") === \"full\") {\n    select(\".terminal\").hide();\n  } else {\n    select(\".terminal\").show();\n  }\n\n  if (url.getSearchParam(\"zen\") === \"true\") {\n    select(\".header\").hide();\n  } else {\n    select(\".header\").show();\n  }\n\n  select(\".note-info\").hide();\n\n  const q = url.getSearchParam(\"q\");\n  const queryResult = search(q);\n  if (queryResult) select(\".terminal\").setValue(queryResult.text);\n};\n", "import select from \"../../../utils/dom.js\";\n\n// This is a feature where you can easily tick on/off\n// checkboxes \u2705 on the Markdown preview.\n// It does NOT persist the state on the data layer,\n// but lives temporarily on the browser's state\n// Useful feature when you are going to the Super market \uD83D\uDE04\n\nexport const autoMagicallyCheckBoxes = () => {\n  select(\".task-list-item\").listenAll(\"click\", (el) => {\n    el.firstChild.checked = !el.firstChild.checked;\n  });\n};\n", "import \"github-markdown-css\";\nimport \"../css/print.css\";\nimport \"../css/styles.css\";\nimport welcomeUser from \"./components/molecules/welcome.js\";\nimport commander from \"./components/organisms/commander/commander.ts\";\nimport markDownViewer from \"./components/organisms/markdown/markDownViewer.js\";\nimport {\n  deleteNote,\n  disableSyncOnCurrentNote,\n  getNote,\n  setNoteFromHash,\n} from \"./components/organisms/noteManager/noteManager.ts\";\nimport { terminal } from \"./components/organisms/terminal.ts\";\nimport { isSyncEnabled } from \"./isSyncEnabled.js\";\nimport { registerServiceWorker } from \"./registerServiceWorker.js\";\nimport { Trie } from \"./utils/Trie/Trie.ts\";\nimport { copyToClipboard } from \"./utils/copyToClipboard.ts\";\nimport { relativeDate } from \"./utils/dates.js\";\nimport select from \"./utils/dom.js\";\nimport errorHandler from \"./utils/errorHandler.js\";\nimport {\n  setAuthTokenFromCallback,\n  syncNotesWithGitHub,\n} from \"./utils/github/actions.js\";\nimport storage from \"./utils/localstorage.js\";\nimport { resetPageTitle } from \"./utils/pageTitle.js\";\nimport { url } from \"./utils/urlManager.ts\";\nimport { actOnURLStateChange } from \"./listeners/urlChange.ts\";\nimport { autoMagicallyCheckBoxes } from \"./ui/markdown/preview/autoMagicallyCheckBoxes.js\";\n\n// Initialize a Trie tree to be used for the predictions\nexport const trieDictionary = Trie();\n\nconst initInfoPanel = () => {\n  select(\"#note-info-close\").listen(\"click\", () => {\n    select(\".note-info\").hide();\n  });\n  select(\"#note-info-button\").listen(\"click\", () => {\n    const note = getNote();\n    select(\".note-info\").show();\n\n    select(\".note-info .details\").innerHTML(\n      `<p>\n      <label>\n      Title\n      </label>\n      ${note.title}\n      </p>\n      <p>\n        <label>\n        Modified\n        </label>\n        ${relativeDate(note.dateCreated)}\n      </p>\n      <p>\n        <label>\n        No. of revisions\n        </label>\n        ${note.numberOfRevisions}\n      </p>\n      `,\n    );\n\n    const isSyncOn = isSyncEnabled();\n    if (isSyncOn && note) {\n      const syncEl = (() => {\n        const { disableSync } = note;\n        const p = document.createElement(\"P\");\n        p.innerHTML = `\n          <label>Sync</label>\n            <label class=\"switch\" title=\"Cloud Sync\">\n              <input id=\"sync\" type=\"checkbox\" ${!disableSync && \"checked\"}>\n            <span class=\"slider round\"></span>\n          </label>\n        `;\n        return p;\n      })();\n      select(\".note-info .details\").append(syncEl);\n      select(\"#sync\").listen(\"click\", (e) => {\n        disableSyncOnCurrentNote(!e.target.checked);\n      });\n    }\n    const deleteButton = (() => {\n      const p = document.createElement(\"P\");\n      p.innerHTML = `\n          <button\n            class=\"icon-button\"\n            type=\"button\"\n            id=\"delete-note\"\n          >\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"30\" height=\"30\" viewBox=\"-3 -3 27.5 27.5\">\n              <path  d=\"M15.5 2h-3.5v-0.5c0-0.827-0.673-1.5-1.5-1.5h-2c-0.827 0-1.5 0.673-1.5 1.5v0.5h-3.5c-0.827 0-1.5 0.673-1.5 1.5v1c0 0.652 0.418 1.208 1 1.414v12.586c0 0.827 0.673 1.5 1.5 1.5h10c0.827 0 1.5-0.673 1.5-1.5v-12.586c0.582-0.206 1-0.762 1-1.414v-1c0-0.827-0.673-1.5-1.5-1.5zM8 1.5c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v0.5h-3v-0.5zM14.5 19h-10c-0.276 0-0.5-0.224-0.5-0.5v-12.5h11v12.5c0 0.276-0.224 0.5-0.5 0.5zM16 4.5c0 0.276-0.224 0.5-0.5 0.5h-12c-0.276 0-0.5-0.224-0.5-0.5v-1c0-0.276 0.224-0.5 0.5-0.5h12c0.276 0 0.5 0.224 0.5 0.5v1z\"></path>\n              <path  d=\"M12.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z\"></path>\n              <path  d=\"M9.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z\"></path>\n              <path  d=\"M6.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z\"></path>\n            </svg>\n            Delete\n          </button>\n        `;\n      return p;\n    })();\n    select(\".note-info .details\").append(deleteButton);\n    select(\"#delete-note\").listen(\"click\", () => {\n      deleteNote();\n    });\n  });\n};\n\nconst main = async () => {\n  // Insert all the saved data from dictionary to the Trie tree\n  const words = storage.getDictionary();\n  trieDictionary.insert(words);\n\n  globalThis.addEventListener(\"error\", errorHandler);\n  welcomeUser();\n  commander.init();\n\n  initInfoPanel();\n\n  terminal.init();\n  resetPageTitle();\n  setNoteFromHash(url.getPageId());\n  select(\".logo\").listen(\"click\", () => {\n    commander.toggle(commander.getModes().notes);\n  });\n  select(\"#permalink\").listen(\"click\", async () => {\n    await copyToClipboard(url.get());\n  });\n\n  markDownViewer.init();\n\n  globalThis.addEventListener(\"hashchange\", actOnURLStateChange);\n\n  registerServiceWorker();\n\n  autoMagicallyCheckBoxes();\n\n  await syncNotesWithGitHub();\n  await setAuthTokenFromCallback();\n};\n\nexport default main;\n", "import main from \"./js/main.js\";\n\n(() => {\n  main();\n})();\n"],
  "mappings": "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",
  "names": ["require_options", "__commonJSMin", "exports", "Warning", "message", "pos", "result", "require_attributes", "__commonJSMin", "exports", "State", "reKeyChar", "isKeyChar", "c", "handlers", "parser", "pos", "AttributeParser", "subject", "startpos", "endpos", "annot", "require_find", "__commonJSMin", "exports", "pattern", "patt", "find", "subject", "startpos", "endpos", "subj", "result", "idx", "capts", "i", "sp", "ep", "require_inline", "__commonJSMin", "exports", "attributes_1", "options_1", "find_1", "C_TAB", "C_LF", "C_CR", "C_SPACE", "C_BANG", "C_DOUBLE_QUOTE", "C_SINGLE_QUOTE", "C_LEFT_PAREN", "C_RIGHT_PAREN", "C_ASTERISK", "C_PLUS", "C_HYPHEN", "C_PERIOD", "C_COLON", "C_LESSTHAN", "C_EQUALS", "C_LEFT_BRACKET", "C_BACKSLASH", "C_RIGHT_BRACKET", "C_HAT", "C_UNDERSCORE", "C_BACKTICK", "C_LEFT_BRACE", "C_RIGHT_BRACE", "C_TILDE", "reSpecial", "findSpecial", "s", "startpos", "endpos", "result", "pattNonspace", "pattLineEnd", "pattPunctuation", "pattAutolink", "pattDelim", "pattSymbol", "pattTwoPeriods", "pattBackticks0", "pattBackticks1", "pattDoubleDollars", "pattSingleDollar", "pattBackslash", "pattRawAttribute", "pattNoteReference", "hasBrace", "self", "pos", "alwaysTrue", "betweenMatched", "c", "annotation", "defaultmatch", "opentest", "subject", "can_open", "can_close", "lastmatch", "has_open_marker", "has_close_marker", "endcloser", "startopener", "d", "openers", "opener", "e", "matchers", "m", "endchar", "mLineEnd", "ep", "sp", "mPunct", "endurl", "starturl", "url", "cp", "parens", "newpos", "hyphens", "all_em", "all_en", "InlineParser", "options", "annot", "matchIndex", "match", "slices", "slice", "i", "last", "name", "defaultAnnot", "k", "v", "nextSpecial", "ep2", "attributeStart", "attrMatches", "m2", "matcher", "res", "require_block", "__commonJSMin", "exports", "options_1", "attributes_1", "find_1", "inline_1", "getListStyles", "marker", "isSpaceOrTab", "cp", "isEolChar", "pattEndline", "pattWord", "pattWhitespace", "pattNonWhitespace", "pattBlockquotePrefix", "pattBangs", "pattCodeFence", "pattRowSep", "pattNextBarOrTicks", "pattCaptionStart", "pattFootnoteStart", "pattThematicBreak", "pattDivFence", "pattDivFenceStart", "pattDivFenceEnd", "pattReferenceDefinition", "pattTableRow", "pattListMarker", "pattTaskListMarker", "ContentType", "Container", "spec", "extra", "EventParser", "subject", "options", "container", "last", "ep", "m", "level", "sp", "label", "nws", "value", "mtask", "styles", "newstyles", "style", "data", "annot", "checkbox", "rawrow", "attributeParser", "res", "attrContainer", "para", "attrMatches", "match", "tip", "colons", "m2", "clsp", "lang", "border", "ws", "isRaw", "closePattern", "cont", "langstart", "patt", "startpos", "endpos", "_a", "ilparser", "lastMatched", "skipCloseUnmatched", "newpos", "i", "inlineParser", "cellComplete", "nextbar", "cellMatches", "origMatches", "seps", "p", "sepfound", "left", "right", "trailing", "st", "cell", "s", "e", "specs", "subjectlen", "self", "idx", "isBlank", "newStarts", "lastMatch", "checkStarts", "parseEvents", "input", "require_ast", "__commonJSMin", "exports", "blockTags", "isBlock", "node", "inlineTags", "isInline", "isRow", "isCaption", "require_parse", "__commonJSMin", "exports", "block_1", "options_1", "ast_1", "getStringContent", "node", "buffer", "addStringContent", "child", "trimVerbatim", "s", "romanDigits", "romanToNumber", "total", "prevdigit", "i", "c", "n", "getListStart", "marker", "style", "numtype", "Context", "normalizeLabel", "label", "parse", "input", "options", "linestarts", "getSourceLoc", "pos", "numlines", "bottom", "top", "line", "col", "mid", "context", "accumulatedText", "references", "autoReferences", "footnotes", "identifiers", "blockAttributes", "listDepth", "parser", "warn", "addBlockAttributes", "container", "k", "getUniqueIdentifier", "base", "ident", "pushContainer", "containers", "popContainer", "topContainer", "getTip", "addChildToTip", "handlers", "suffixes", "startpos", "endpos", "txt", "alias", "fnref", "lab", "r", "tip", "endsWithSpace", "m", "wordpos", "origend", "cl", "id", "key", "val", "ref", "format", "headingStr", "pnode", "listStyle", "listStart", "term", "definition", "_a", "rows", "caption", "capt", "tb", "listnode", "handleEvent", "event", "sp", "ep", "annot", "parts", "ln", "fn", "lastpos", "lastloc", "doc", "omitFields", "stringify", "x", "renderAstNode", "buff", "indent", "v", "renderAST", "require_html", "__commonJSMin", "exports", "parse_1", "options_1", "reNeedsEscape", "reNeedsEscapeAttr", "HTMLRenderer", "options", "s", "node", "extraAttrs", "result", "k", "v", "attributes", "sp", "ep", "tag", "newlines", "afterOpenSpace", "afterCloseSpace", "note", "ident", "backlink", "oldtight", "child", "_a", "override", "notes", "orderedFootnotes", "renderedNotes", "index", "i", "extraAttr", "label", "cellAttr", "dest", "ref", "doc", "renderHTML", "ast", "require_filter", "__commonJSMin", "exports", "Walker", "node", "callback", "topStack", "nextChild", "applyFilterPartToNode", "enter", "filterpart", "trans", "transform", "traverse", "walker", "result", "stackTop", "applyFilter", "doc", "filter", "f", "filterparts", "i", "require_pandoc", "__commonJSMin", "exports", "options_1", "styleMap", "reverseStyleMap", "i", "j", "paraToPlain", "elt", "toPandocAttr", "node", "attributes", "id", "classes", "kvs", "k", "PandocRenderer", "options", "children", "child", "list", "self", "item", "term", "definition", "elts", "attrs", "items", "style", "delim", "start", "nullattr", "caption", "colspecs", "theadrows", "tbodies", "tfoot", "curheads", "currows", "alignMap", "toColSpec", "cell", "toPandocCell", "toPandocRow", "row", "s", "quoteType", "url", "attr", "destination", "linkAttrs", "ref", "title", "v", "note", "doc", "fromPandocAttr", "pattr", "isPlainOrPara", "x", "hasCheckbox", "PandocParser", "accum", "inlines", "span", "code", "dest", "img", "link", "label", "b", "block", "tag", "blocks", "div", "heading", "lang", "res", "rawterm", "rawdefs", "def", "taskListItems", "tight", "rawitems", "checkbox", "pandocStyle", "pandocDelim", "rawcaption", "rawcolspecs", "aligns", "rows", "rawtheadrows", "rowheadcolumns", "rawsubheadrows", "rawbodyrows", "rawfootrows", "table", "rawcapt", "capt", "ils", "rawrow", "head", "rowheadcols", "rawcells", "cells", "rawcell", "defaultAlign", "cs", "align", "rawblocks", "pandoc", "toPandoc", "fromPandoc", "require_djot_renderer", "__commonJSMin", "exports", "ast_1", "parse_1", "isWhitespace", "node", "tag", "beginsWithWhitespace", "endsWithWhitespace", "verbatimDelim", "minticks", "backtickGroups", "backtickGroupLens", "i", "numticks", "toRoman", "x", "rom", "formatNumber", "num", "style", "delimPattern", "numFormat", "numStr", "DjotRenderer", "doc", "options", "k", "hasFootnotes", "hashes", "ticks", "items", "item", "start", "tight", "marker", "captions", "rows", "row", "lastRow", "j", "cell", "s", "len", "idx", "lastbuff", "excessOnLine", "action", "oldWrapWidth", "delim", "needsBraces", "self", "lns", "ln", "children", "handler", "attr", "isfirst", "classes", "renderDjot", "require_version", "__commonJSMin", "exports", "require_lib", "__commonJSMin", "exports", "parse_1", "block_1", "html_1", "filter_1", "pandoc_1", "djot_renderer_1", "version_1", "ast_1", "require_textarea_caret", "__commonJSMin", "exports", "module", "properties", "isBrowser", "isFirefox", "getCaretCoordinates", "element", "position", "options", "debug", "el", "div", "style", "computed", "isInput", "prop", "span", "coordinates", "isArray", "what", "select", "selector", "what", "text", "value", "event", "htmlString", "content", "el", "isArray", "e", "newContent", "isElement", "li", "className", "classes", "cls", "shouldShow", "fn", "shouldDisable", "obj", "dom_default", "notificationTypes", "notification", "dom_default", "cleanNotificationClasses", "notificationFactory", "acc", "notificationType", "message", "Notification", "autohideDuration", "type", "notify", "notify_default", "welcomeUser", "lastVisit", "notify_default", "welcome_default", "storage", "key", "what", "attr", "current", "isArray", "acc", "k", "value", "savedTxt", "word", "newDictionary", "w", "cleanText", "words", "distinctWords", "e", "notify_default", "localstorage_default", "configuration", "getGist", "id", "token", "localstorage_default", "response", "getAuthenticatedUsersGists", "deleteFileOnGist", "fileName", "gistId", "responseAsJson", "notify_default", "updateGist", "notes", "getNotes", "noteToFiles", "acc", "text", "deleted", "createNewGist", "note", "getAuthToken", "code", "state", "configuration", "publishGist", "empty", "equals", "aa", "bb", "ii", "coerce", "o", "base", "ALPHABET", "name", "BASE_MAP", "j", "i", "x", "xc", "BASE", "LEADER", "FACTOR", "iFACTOR", "encode", "source", "zeroes", "length", "pbegin", "pend", "size", "b58", "carry", "it1", "it2", "str", "decodeUnsafe", "psz", "b256", "it3", "it4", "vch", "decode", "string", "buffer", "src", "_brrp__multiformats_scope_baseX", "base_x_default", "Encoder", "name", "prefix", "baseEncode", "__publicField", "bytes", "Decoder", "baseDecode", "prefixCodePoint", "text", "decoder", "or", "ComposedDecoder", "decoders", "input", "left", "right", "Codec", "from", "encode", "decode", "baseX", "alphabet", "base_x_default", "coerce", "string", "bitsPerChar", "codes", "i", "end", "out", "bits", "buffer", "written", "value", "data", "pad", "mask", "rfc4648", "base32", "rfc4648", "base32upper", "base32pad", "base32padupper", "base32hex", "base32hexupper", "base32hexpad", "base32hexpadupper", "base32z", "base36", "baseX", "base36upper", "base58btc", "baseX", "base58flickr", "encode_1", "encode", "MSB", "REST", "MSBALL", "INT", "num", "out", "offset", "oldOffset", "decode", "read", "MSB$1", "REST$1", "buf", "res", "shift", "counter", "b", "l", "N1", "N2", "N3", "N4", "N5", "N6", "N7", "N8", "N9", "length", "value", "varint", "_brrp_varint", "varint_default", "decode", "data", "offset", "varint_default", "encodeTo", "int", "target", "encodingLength", "create", "code", "digest", "size", "sizeOffset", "encodingLength", "digestOffset", "bytes", "encodeTo", "Digest", "decode", "multihash", "coerce", "equals", "a", "b", "data", "__publicField", "format", "link", "base", "bytes", "version", "toStringV0", "baseCache", "base58btc", "toStringV1", "base32", "cache", "baseCache", "cid", "_a", "CID", "_CID", "version", "code", "multihash", "bytes", "__publicField", "DAG_PB_CODE", "SHA_256_CODE", "digest", "create", "other", "self", "unknown", "equals", "base", "format", "input", "value", "encodeCID", "cidSymbol", "decode", "remainder", "specs", "prefixSize", "multihashBytes", "coerce", "digestBytes", "Digest", "initialBytes", "offset", "next", "i", "length", "codec", "multihashCode", "digestSize", "size", "multihashSize", "source", "prefix", "parseCIDtoBytes", "decoder", "base58btc", "base32", "base36", "toStringV0", "toStringV1", "codeOffset", "encodingLength", "hashOffset", "encodeTo", "textEncoder", "textDecoder", "code", "encode", "node", "textEncoder", "from", "name", "code", "encode", "Hasher", "__publicField", "input", "result", "create", "digest", "sha", "name", "data", "sha256", "from", "sha512", "hashBrowser", "val", "bytes", "encode", "hash", "sha256", "CID", "code", "hashBrowser_default", "isJSON", "str", "isJSON_default", "_getBasePageTitle", "setPageTitle", "what", "baseTitle", "dom_default", "resetPageTitle", "url", "currentParams", "params", "parametersObject", "key", "param", "searchParams", "p", "pathname", "hash", "pageId", "allParams", "newParams", "setSavedState", "saved", "dom_default", "encodeTitle", "title", "encodedTitle", "getDateCreatedFromTitle", "titleID", "getTitleId", "note", "getNote", "dateCreated", "markNoteForDeletion", "id", "url", "revision", "doc", "localstorage_default", "newerNote", "acc", "noteToReturn", "disableSyncOnCurrentNote", "value", "notify_default", "setNoteFromHash", "hash", "version", "dom_default", "setPageTitle", "resetNoteManager", "resetPageTitle", "setSavedState", "getTitle", "updateNote", "what", "existingNote", "saveNote", "text", "hashOfIncomingNote", "hashBrowser_default", "hashOfCurrentNote", "currentNote", "e", "getNotes", "includeDeleted", "body", "isJSON_default", "noteId", "deleted", "search", "q", "deleteNote", "deleteFileOnGist", "commander_default", "isUserLoggedIn", "localstorage_default", "command", "title", "secondary", "onclick", "onSecondaryClick", "icon", "selected", "li", "iconClone", "liContent", "isElement", "span", "secondaryElement", "wordParts", "word", "match", "parts", "indexInWord", "acc", "part", "p", "syllable", "start", "end", "mark", "word", "markEl", "div", "content", "highlight", "words", "wordsToHighlight", "matches", "wordToHighlight", "m", "match", "wordElements", "wordParts", "syllable", "w", "goAuthenticate", "notify_default", "commander_default", "configuration", "setGistToSyncWith", "token", "gists", "getAuthenticatedUsersGists", "gistOptions", "a", "b", "description", "updated_at", "id", "div", "localstorage_default", "syncNotesWithGitHub", "gistOptionComponents", "command", "createNewGist", "error", "dom_default", "gistId", "files", "getGist", "content", "updateNote", "setAuthTokenFromCallback", "code", "url", "state", "getAuthToken", "getNewFileHandle", "title", "options", "writeFile", "fileHandle", "contents", "writable", "saveFileAs", "notify_default", "saveDataToFile", "a", "data", "fileName", "json", "blob", "url", "import_djot", "convertMarkDownToHtml", "md", "warning", "handleErrorResponse", "response", "wrapTemplate", "body", "configuration", "sendMail", "email", "subject", "notify_default", "localstorage_default", "getUserMailingPreferences", "savedMail", "mailSameAgainQuestion", "whoMailing", "wannaSaveDat", "mailTo", "what", "title", "getTitle", "htmlBody", "convertMarkDownToHtml", "copyToClipboard", "what", "message", "notify_default", "error", "button", "els", "fn", "id", "elements", "isArray", "element", "e", "markDownViewer", "dom_default", "url", "autoLinks", "localstorage_default", "replacingPatterns", "pattern", "regex", "updatedHTML", "match", "matchingKey", "link", "convertMarkDownToHtml", "el", "copyBtn", "button", "e", "codeToCopy", "copyToClipboard", "mode", "markDownViewer_default", "prettifyJSON", "selector", "el", "isJSON_default", "prettifiedJSON", "notify_default", "prettifyJSON_default", "sleep", "ms", "resolve", "icon", "svgIcon", "altText", "className", "image", "share", "note", "getNote", "currentUrl", "url", "error", "notify_default", "getSyncTitle", "gistId", "localstorage_default", "shareNoteCommand", "icon", "exit_up_default", "share", "sharePublicLinkCommand", "commander_default", "saveNote", "dom_default", "note", "getNote", "rawLink", "publishGist", "gitResponse", "response", "files", "fileContents", "gistFile", "rawUrl", "linkToShare", "url", "copyToClipboard", "commands", "pencil_default", "resetNoteManager", "checkmark_circle_default", "updateGist", "setSavedState", "page_break_default", "markDownViewer_default", "frame_expand_default", "isUserLoggedIn", "leaf_default", "list_default", "trash_default", "deleteNote", "cloud_sync_default", "token", "goAuthenticate", "setGistToSyncWith", "syncNotesWithGitHub", "lighter_default", "notify_default", "enter_down_default", "text", "title", "saveFileAs", "envelope_default", "mailTo", "bug_default", "previousStatus", "arrow_right_circle_default", "picture_default", "bgImage", "sleep", "printer_default", "magic_wand_default", "prettifyJSON_default", "rocket_default", "spell_check_default", "selectedValue", "valueToFind", "positionOfFirstChar", "replacementValue", "download_default", "notes", "getNotes", "saveDataToFile", "keyListener", "key", "fn", "k", "finalKey", "functionToCall", "event", "keyListener_default", "link", "textOrNode", "url", "a", "isElement", "isSameYear", "aDate", "bDate", "yearA", "yearB", "isSameMonth", "monthA", "monthB", "isSameDateOfMonth", "dateA", "dateB", "isSameDate", "monthNames", "shortMonthNames", "name", "isYesterday", "date", "theDate", "yesterDate", "relativeDate", "dateCreated", "month", "year", "day", "isArraySorted", "arr", "currentValue", "item", "max", "smartFilter", "phrase", "filter", "wordParts", "w", "indexes", "f", "i", "currentValue", "fi", "isArraySorted", "requestNotificationPermission", "registerServiceWorker", "getShortcut", "key", "k", "commander", "CommanderModes", "state", "newState", "what", "dom_default", "mode", "requestNotificationPermission", "commands", "direction", "currentlySelected", "lastOption", "indexToSelect", "command", "button", "e", "el", "keyListener_default", "note", "getNote", "revisions", "revisionsOptions", "a", "b", "aDateCreated", "bDateCreated", "id", "i", "div", "relativeDate", "url", "r", "value", "notes", "getNotes", "title", "smartFilter", "deleted", "getDateCreatedFromTitle", "dateCreated", "href", "noteLink", "link", "commandComponents", "experimental", "localstorage_default", "call", "icon", "commander_default", "urlAlphabet", "nanoid", "size", "id", "bytes", "urlAlphabet", "import_textarea_caret", "getPredictions", "word", "sanitizedWord", "trieDictionary", "getCurrentlyTypingWord", "text", "cursorIndexPosition", "currentIndex", "character", "placeSuggestion", "textEl", "coords", "getCaretCoordinates", "top", "left", "actualTerminalHeight", "dom_default", "main", "isLastCharacterInTheWord", "characterIndex", "autoComplete", "fullText", "terminal", "charTyped", "matches", "firstMatch", "prediction", "state", "findCurrentLine", "text", "caretIndex", "acc", "line", "isFound", "recon", "currentLength", "autoCompleteCheckboxes", "currentLine", "findCurrentLine", "completers", "startsWith", "compleano", "dom_default", "renderInterNotes", "target", "cursorIndexPosition", "fullText", "terminal", "charTyped", "dom_default", "word", "getCurrentlyTypingWord", "isLastCharacterInTheWord", "placeSuggestion", "allNoteIds", "getNotes", "note", "actualNoteSearch", "matches", "noteId", "firstMatch", "prediction", "currentWord", "state", "terminal", "initState", "state", "dom_default", "newState", "direction", "currentlySelected", "lastOption", "indexToSelect", "word", "complete", "currentWord", "completion", "prediction", "trieDictionary", "inlineSuggestion", "div", "optionsUl", "selectedIndex", "options", "i", "command", "icon", "trash_default", "localstorage_default", "m", "optionList", "el", "commander_default", "e", "autoComplete", "renderInterNotes", "autoCompleteCheckboxes", "currentlySavedNote", "getNote", "title", "getTitle", "text", "isNoteSaved", "setSavedState", "_a", "clipboardItems", "clipboardItem", "imageTypes", "type", "imageType", "blob", "token", "_image", "fileExtension", "fileName", "nanoid", "url", "configuration", "handleErrorResponse", "response", "error", "notify_default", "imageURI", "markDownViewer_default", "isSyncEnabled", "authToken", "gistId", "localstorage_default", "groupByFrequency", "entries", "acc", "word", "frequency", "cc", "Node", "char", "prefix", "dictionary", "nodeInstance", "node", "firstChar", "rest", "isLast", "newNode", "Trie", "rootNode", "character", "frequencyGroups", "a", "b", "key", "errorHandler", "error", "message", "notify_default", "errorHandler_default", "setNoteFromRawUrl", "rawUrl", "response", "dom_default", "setNoteFromGist", "gistId", "gist", "getGist", "files", "fileContents", "gistFile", "content", "notify_default", "actOnURLStateChange", "oldURL", "newURL", "oldPageId", "url", "newPageId", "hasPageIdChanged", "oldV", "newV", "r", "setNoteFromHash", "raw", "e", "isANewNote", "q", "queryResult", "search", "autoMagicallyCheckBoxes", "dom_default", "el", "trieDictionary", "Trie", "initInfoPanel", "dom_default", "note", "getNote", "relativeDate", "isSyncEnabled", "syncEl", "disableSync", "p", "e", "disableSyncOnCurrentNote", "deleteButton", "deleteNote", "main", "words", "localstorage_default", "errorHandler_default", "welcome_default", "commander_default", "terminal", "resetPageTitle", "setNoteFromHash", "url", "copyToClipboard", "markDownViewer_default", "actOnURLStateChange", "registerServiceWorker", "autoMagicallyCheckBoxes", "syncNotesWithGitHub", "setAuthTokenFromCallback", "main_default", "main_default"]
}
