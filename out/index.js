var g9e=Object.create;var y9=Object.defineProperty;var y9e=Object.getOwnPropertyDescriptor;var w9e=Object.getOwnPropertyNames;var b9e=Object.getPrototypeOf,_9e=Object.prototype.hasOwnProperty;var yU=r=>{throw TypeError(r)};var v9e=(r,e,t)=>e in r?y9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var O=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),it=(r,e)=>{for(var t in e)y9(r,t,{get:e[t],enumerable:!0})},E9e=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of w9e(e))!_9e.call(r,i)&&i!==t&&y9(r,i,{get:()=>e[i],enumerable:!(n=y9e(e,i))||n.enumerable});return r};var L=(r,e,t)=>(t=r!=null?g9e(b9e(r)):{},E9e(e||!r||!r.__esModule?y9(t,"default",{value:r,enumerable:!0}):t,r));var F=(r,e,t)=>v9e(r,typeof e!="symbol"?e+"":e,t),pS=(r,e,t)=>e.has(r)||yU("Cannot "+t);var Se=(r,e,t)=>(pS(r,e,"read from private field"),t?t.call(r):e.get(r)),mr=(r,e,t)=>e.has(r)?yU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Vt=(r,e,t,n)=>(pS(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),si=(r,e,t)=>(pS(r,e,"access private method"),t);var Hu=(r,e,t,n)=>({set _(i){Vt(r,e,i,t)},get _(){return Se(r,e,n)}});var tF=O((eF,A9)=>{(function(){function r(p){"use strict";var g={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(p===!1)return JSON.parse(JSON.stringify(g));var y={};for(var b in g)g.hasOwnProperty(b)&&(y[b]=g[b].defaultValue);return y}function e(){"use strict";var p=r(!0),g={};for(var y in p)p.hasOwnProperty(y)&&(g[y]=!0);return g}var t={},n={},i={},o=r(!0),s="vanilla",a={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:r(!0),allOn:e()};t.helper={},t.extensions={},t.setOption=function(p,g){"use strict";return o[p]=g,this},t.getOption=function(p){"use strict";return o[p]},t.getOptions=function(){"use strict";return o},t.resetOptions=function(){"use strict";o=r(!0)},t.setFlavor=function(p){"use strict";if(!a.hasOwnProperty(p))throw Error(p+" flavor was not found");t.resetOptions();var g=a[p];s=p;for(var y in g)g.hasOwnProperty(y)&&(o[y]=g[y])},t.getFlavor=function(){"use strict";return s},t.getFlavorOptions=function(p){"use strict";if(a.hasOwnProperty(p))return a[p]},t.getDefaultOptions=function(p){"use strict";return r(p)},t.subParser=function(p,g){"use strict";if(t.helper.isString(p))if(typeof g<"u")n[p]=g;else{if(n.hasOwnProperty(p))return n[p];throw Error("SubParser named "+p+" not registered!")}},t.extension=function(p,g){"use strict";if(!t.helper.isString(p))throw Error("Extension 'name' must be a string");if(p=t.helper.stdExtName(p),t.helper.isUndefined(g)){if(!i.hasOwnProperty(p))throw Error("Extension named "+p+" is not registered!");return i[p]}else{typeof g=="function"&&(g=g()),t.helper.isArray(g)||(g=[g]);var y=c(g,p);if(y.valid)i[p]=g;else throw Error(y.error)}},t.getAllExtensions=function(){"use strict";return i},t.removeExtension=function(p){"use strict";delete i[p]},t.resetExtensions=function(){"use strict";i={}};function c(p,g){"use strict";var y=g?"Error in "+g+" extension->":"Error in unnamed extension",b={valid:!0,error:""};t.helper.isArray(p)||(p=[p]);for(var x=0;x<p.length;++x){var v=y+" sub-extension "+x+": ",T=p[x];if(typeof T!="object")return b.valid=!1,b.error=v+"must be an object, but "+typeof T+" given",b;if(!t.helper.isString(T.type))return b.valid=!1,b.error=v+'property "type" must be a string, but '+typeof T.type+" given",b;var I=T.type=T.type.toLowerCase();if(I==="language"&&(I=T.type="lang"),I==="html"&&(I=T.type="output"),I!=="lang"&&I!=="output"&&I!=="listener")return b.valid=!1,b.error=v+"type "+I+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',b;if(I==="listener"){if(t.helper.isUndefined(T.listeners))return b.valid=!1,b.error=v+'. Extensions of type "listener" must have a property called "listeners"',b}else if(t.helper.isUndefined(T.filter)&&t.helper.isUndefined(T.regex))return b.valid=!1,b.error=v+I+' extensions must define either a "regex" property or a "filter" method',b;if(T.listeners){if(typeof T.listeners!="object")return b.valid=!1,b.error=v+'"listeners" property must be an object but '+typeof T.listeners+" given",b;for(var R in T.listeners)if(T.listeners.hasOwnProperty(R)&&typeof T.listeners[R]!="function")return b.valid=!1,b.error=v+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+R+" must be a function but "+typeof T.listeners[R]+" given",b}if(T.filter){if(typeof T.filter!="function")return b.valid=!1,b.error=v+'"filter" must be a function, but '+typeof T.filter+" given",b}else if(T.regex){if(t.helper.isString(T.regex)&&(T.regex=new RegExp(T.regex,"g")),!(T.regex instanceof RegExp))return b.valid=!1,b.error=v+'"regex" property must either be a string or a RegExp object, but '+typeof T.regex+" given",b;if(t.helper.isUndefined(T.replace))return b.valid=!1,b.error=v+'"regex" extensions must implement a replace string or function',b}}return b}t.validateExtension=function(p){"use strict";var g=c(p,null);return g.valid?!0:(console.warn(g.error),!1)},t.hasOwnProperty("helper")||(t.helper={}),t.helper.isString=function(p){"use strict";return typeof p=="string"||p instanceof String},t.helper.isFunction=function(p){"use strict";var g={};return p&&g.toString.call(p)==="[object Function]"},t.helper.isArray=function(p){"use strict";return Array.isArray(p)},t.helper.isUndefined=function(p){"use strict";return typeof p>"u"},t.helper.forEach=function(p,g){"use strict";if(t.helper.isUndefined(p))throw new Error("obj param is required");if(t.helper.isUndefined(g))throw new Error("callback param is required");if(!t.helper.isFunction(g))throw new Error("callback param must be a function/closure");if(typeof p.forEach=="function")p.forEach(g);else if(t.helper.isArray(p))for(var y=0;y<p.length;y++)g(p[y],y,p);else if(typeof p=="object")for(var b in p)p.hasOwnProperty(b)&&g(p[b],b,p);else throw new Error("obj does not seem to be an array or an iterable object")},t.helper.stdExtName=function(p){"use strict";return p.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function u(p,g){"use strict";var y=g.charCodeAt(0);return"\xA8E"+y+"E"}t.helper.escapeCharactersCallback=u,t.helper.escapeCharacters=function(p,g,y){"use strict";var b="(["+g.replace(/([\[\]\\])/g,"\\$1")+"])";y&&(b="\\\\"+b);var x=new RegExp(b,"g");return p=p.replace(x,u),p},t.helper.unescapeHTMLEntities=function(p){"use strict";return p.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var l=function(p,g,y,b){"use strict";var x=b||"",v=x.indexOf("g")>-1,T=new RegExp(g+"|"+y,"g"+x.replace(/g/g,"")),I=new RegExp(g,x.replace(/g/g,"")),R=[],M,U,j,D,q;do for(M=0;j=T.exec(p);)if(I.test(j[0]))M++||(U=T.lastIndex,D=U-j[0].length);else if(M&&!--M){q=j.index+j[0].length;var V={left:{start:D,end:U},match:{start:U,end:j.index},right:{start:j.index,end:q},wholeMatch:{start:D,end:q}};if(R.push(V),!v)return R}while(M&&(T.lastIndex=U));return R};t.helper.matchRecursiveRegExp=function(p,g,y,b){"use strict";for(var x=l(p,g,y,b),v=[],T=0;T<x.length;++T)v.push([p.slice(x[T].wholeMatch.start,x[T].wholeMatch.end),p.slice(x[T].match.start,x[T].match.end),p.slice(x[T].left.start,x[T].left.end),p.slice(x[T].right.start,x[T].right.end)]);return v},t.helper.replaceRecursiveRegExp=function(p,g,y,b,x){"use strict";if(!t.helper.isFunction(g)){var v=g;g=function(){return v}}var T=l(p,y,b,x),I=p,R=T.length;if(R>0){var M=[];T[0].wholeMatch.start!==0&&M.push(p.slice(0,T[0].wholeMatch.start));for(var U=0;U<R;++U)M.push(g(p.slice(T[U].wholeMatch.start,T[U].wholeMatch.end),p.slice(T[U].match.start,T[U].match.end),p.slice(T[U].left.start,T[U].left.end),p.slice(T[U].right.start,T[U].right.end))),U<R-1&&M.push(p.slice(T[U].wholeMatch.end,T[U+1].wholeMatch.start));T[R-1].wholeMatch.end<p.length&&M.push(p.slice(T[R-1].wholeMatch.end)),I=M.join("")}return I},t.helper.regexIndexOf=function(p,g,y){"use strict";if(!t.helper.isString(p))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(g instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var b=p.substring(y||0).search(g);return b>=0?b+(y||0):b},t.helper.splitAtIndex=function(p,g){"use strict";if(!t.helper.isString(p))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[p.substring(0,g),p.substring(g)]},t.helper.encodeEmailAddress=function(p){"use strict";var g=[function(y){return"&#"+y.charCodeAt(0)+";"},function(y){return"&#x"+y.charCodeAt(0).toString(16)+";"},function(y){return y}];return p=p.replace(/./g,function(y){if(y==="@")y=g[Math.floor(Math.random()*2)](y);else{var b=Math.random();y=b>.9?g[2](y):b>.45?g[1](y):g[0](y)}return y}),p},t.helper.padEnd=function(g,y,b){"use strict";return y=y>>0,b=String(b||" "),g.length>y?String(g):(y=y-g.length,y>b.length&&(b+=b.repeat(y/b.length)),String(g)+b.slice(0,y))},typeof console>"u"&&(console={warn:function(p){"use strict";alert(p)},log:function(p){"use strict";alert(p)},error:function(p){"use strict";throw p}}),t.helper.regexes={asteriskDashAndColon:/([*_:~])/g},t.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},t.Converter=function(p){"use strict";var g={},y=[],b=[],x={},v=s,T={parsed:{},raw:"",format:""};I();function I(){p=p||{};for(var D in o)o.hasOwnProperty(D)&&(g[D]=o[D]);if(typeof p=="object")for(var q in p)p.hasOwnProperty(q)&&(g[q]=p[q]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof p+" was passed instead.");g.extensions&&t.helper.forEach(g.extensions,R)}function R(D,q){if(q=q||null,t.helper.isString(D))if(D=t.helper.stdExtName(D),q=D,t.extensions[D]){console.warn("DEPRECATION WARNING: "+D+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),M(t.extensions[D],D);return}else if(!t.helper.isUndefined(i[D]))D=i[D];else throw Error('Extension "'+D+'" could not be loaded. It was either not found or is not a valid extension.');typeof D=="function"&&(D=D()),t.helper.isArray(D)||(D=[D]);var V=c(D,q);if(!V.valid)throw Error(V.error);for(var te=0;te<D.length;++te){switch(D[te].type){case"lang":y.push(D[te]);break;case"output":b.push(D[te]);break}if(D[te].hasOwnProperty("listeners"))for(var pe in D[te].listeners)D[te].listeners.hasOwnProperty(pe)&&U(pe,D[te].listeners[pe])}}function M(D,q){typeof D=="function"&&(D=D(new t.Converter)),t.helper.isArray(D)||(D=[D]);var V=c(D,q);if(!V.valid)throw Error(V.error);for(var te=0;te<D.length;++te)switch(D[te].type){case"lang":y.push(D[te]);break;case"output":b.push(D[te]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function U(D,q){if(!t.helper.isString(D))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof D+" given");if(typeof q!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof q+" given");x.hasOwnProperty(D)||(x[D]=[]),x[D].push(q)}function j(D){var q=D.match(/^\s*/)[0].length,V=new RegExp("^\\s{0,"+q+"}","gm");return D.replace(V,"")}this._dispatch=function(q,V,te,pe){if(x.hasOwnProperty(q))for(var ue=0;ue<x[q].length;++ue){var Ue=x[q][ue](q,V,this,te,pe);Ue&&typeof Ue<"u"&&(V=Ue)}return V},this.listen=function(D,q){return U(D,q),this},this.makeHtml=function(D){if(!D)return D;var q={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:y,outputModifiers:b,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return D=D.replace(/¨/g,"\xA8T"),D=D.replace(/\$/g,"\xA8D"),D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/\u00A0/g,"&nbsp;"),g.smartIndentationFix&&(D=j(D)),D=`

`+D+`

`,D=t.subParser("detab")(D,g,q),D=D.replace(/^[ \t]+$/mg,""),t.helper.forEach(y,function(V){D=t.subParser("runExtension")(V,D,g,q)}),D=t.subParser("metadata")(D,g,q),D=t.subParser("hashPreCodeTags")(D,g,q),D=t.subParser("githubCodeBlocks")(D,g,q),D=t.subParser("hashHTMLBlocks")(D,g,q),D=t.subParser("hashCodeTags")(D,g,q),D=t.subParser("stripLinkDefinitions")(D,g,q),D=t.subParser("blockGamut")(D,g,q),D=t.subParser("unhashHTMLSpans")(D,g,q),D=t.subParser("unescapeSpecialChars")(D,g,q),D=D.replace(/¨D/g,"$$"),D=D.replace(/¨T/g,"\xA8"),D=t.subParser("completeHTMLDocument")(D,g,q),t.helper.forEach(b,function(V){D=t.subParser("runExtension")(V,D,g,q)}),T=q.metadata,D},this.makeMarkdown=this.makeMd=function(D,q){if(D=D.replace(/\r\n/g,`
`),D=D.replace(/\r/g,`
`),D=D.replace(/>[ \t]+</,">\xA8NBSP;<"),!q)if(window&&window.document)q=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var V=q.createElement("div");V.innerHTML=D;var te={preList:_e(V)};le(V);for(var pe=V.childNodes,ue="",Ue=0;Ue<pe.length;Ue++)ue+=t.subParser("makeMarkdown.node")(pe[Ue],te);function le(we){for(var xe=0;xe<we.childNodes.length;++xe){var N=we.childNodes[xe];N.nodeType===3?!/\S/.test(N.nodeValue)&&!/^[ ]+$/.test(N.nodeValue)?(we.removeChild(N),--xe):(N.nodeValue=N.nodeValue.split(`
`).join(" "),N.nodeValue=N.nodeValue.replace(/(\s)+/g,"$1")):N.nodeType===1&&le(N)}}function _e(we){for(var xe=we.querySelectorAll("pre"),N=[],A=0;A<xe.length;++A)if(xe[A].childElementCount===1&&xe[A].firstChild.tagName.toLowerCase()==="code"){var ne=xe[A].firstChild.innerHTML.trim(),G=xe[A].firstChild.getAttribute("data-language")||"";if(G==="")for(var Te=xe[A].firstChild.className.split(" "),ze=0;ze<Te.length;++ze){var rt=Te[ze].match(/^language-(.+)$/);if(rt!==null){G=rt[1];break}}ne=t.helper.unescapeHTMLEntities(ne),N.push(ne),xe[A].outerHTML='<precode language="'+G+'" precodenum="'+A.toString()+'"></precode>'}else N.push(xe[A].innerHTML),xe[A].innerHTML="",xe[A].setAttribute("prenum",A.toString());return N}return ue},this.setOption=function(D,q){g[D]=q},this.getOption=function(D){return g[D]},this.getOptions=function(){return g},this.addExtension=function(D,q){q=q||null,R(D,q)},this.useExtension=function(D){R(D)},this.setFlavor=function(D){if(!a.hasOwnProperty(D))throw Error(D+" flavor was not found");var q=a[D];v=D;for(var V in q)q.hasOwnProperty(V)&&(g[V]=q[V])},this.getFlavor=function(){return v},this.removeExtension=function(D){t.helper.isArray(D)||(D=[D]);for(var q=0;q<D.length;++q){for(var V=D[q],te=0;te<y.length;++te)y[te]===V&&y.splice(te,1);for(var pe=0;pe<b.length;++pe)b[pe]===V&&b.splice(pe,1)}},this.getAllExtensions=function(){return{language:y,output:b}},this.getMetadata=function(D){return D?T.raw:T.parsed},this.getMetadataFormat=function(){return T.format},this._setMetadataPair=function(D,q){T.parsed[D]=q},this._setMetadataFormat=function(D){T.format=D},this._setMetadataRaw=function(D){T.raw=D}},t.subParser("anchors",function(p,g,y){"use strict";p=y.converter._dispatch("anchors.before",p,g,y);var b=function(x,v,T,I,R,M,U){if(t.helper.isUndefined(U)&&(U=""),T=T.toLowerCase(),x.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)I="";else if(!I)if(T||(T=v.toLowerCase().replace(/ ?\n/g," ")),I="#"+T,!t.helper.isUndefined(y.gUrls[T]))I=y.gUrls[T],t.helper.isUndefined(y.gTitles[T])||(U=y.gTitles[T]);else return x;I=I.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var j='<a href="'+I+'"';return U!==""&&U!==null&&(U=U.replace(/"/g,"&quot;"),U=U.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),j+=' title="'+U+'"'),g.openLinksInNewWindow&&!/^#/.test(I)&&(j+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),j+=">"+v+"</a>",j};return p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,b),p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),p=p.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),p=p.replace(/\[([^\[\]]+)]()()()()()/g,b),g.ghMentions&&(p=p.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(x,v,T,I,R){if(T==="\\")return v+I;if(!t.helper.isString(g.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var M=g.ghMentionsLink.replace(/\{u}/g,R),U="";return g.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="\xA8E95Eblank"'),v+'<a href="'+M+'"'+U+">"+I+"</a>"})),p=y.converter._dispatch("anchors.after",p,g,y),p});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,f=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,m=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,w=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,_=function(p){"use strict";return function(g,y,b,x,v,T,I){b=b.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var R=b,M="",U="",j=y||"",D=I||"";return/^www\./i.test(b)&&(b=b.replace(/^www\./i,"http://www.")),p.excludeTrailingPunctuationFromURLs&&T&&(M=T),p.openLinksInNewWindow&&(U=' rel="noopener noreferrer" target="\xA8E95Eblank"'),j+'<a href="'+b+'"'+U+">"+R+"</a>"+M+D}},E=function(p,g){"use strict";return function(y,b,x){var v="mailto:";return b=b||"",x=t.subParser("unescapeSpecialChars")(x,p,g),p.encodeEmails?(v=t.helper.encodeEmailAddress(v+x),x=t.helper.encodeEmailAddress(x)):v=v+x,b+'<a href="'+v+'">'+x+"</a>"}};t.subParser("autoLinks",function(p,g,y){"use strict";return p=y.converter._dispatch("autoLinks.before",p,g,y),p=p.replace(f,_(g)),p=p.replace(w,E(g,y)),p=y.converter._dispatch("autoLinks.after",p,g,y),p}),t.subParser("simplifiedAutoLinks",function(p,g,y){"use strict";return g.simplifiedAutoLink&&(p=y.converter._dispatch("simplifiedAutoLinks.before",p,g,y),g.excludeTrailingPunctuationFromURLs?p=p.replace(h,_(g)):p=p.replace(d,_(g)),p=p.replace(m,E(g,y)),p=y.converter._dispatch("simplifiedAutoLinks.after",p,g,y)),p}),t.subParser("blockGamut",function(p,g,y){"use strict";return p=y.converter._dispatch("blockGamut.before",p,g,y),p=t.subParser("blockQuotes")(p,g,y),p=t.subParser("headers")(p,g,y),p=t.subParser("horizontalRule")(p,g,y),p=t.subParser("lists")(p,g,y),p=t.subParser("codeBlocks")(p,g,y),p=t.subParser("tables")(p,g,y),p=t.subParser("hashHTMLBlocks")(p,g,y),p=t.subParser("paragraphs")(p,g,y),p=y.converter._dispatch("blockGamut.after",p,g,y),p}),t.subParser("blockQuotes",function(p,g,y){"use strict";p=y.converter._dispatch("blockQuotes.before",p,g,y),p=p+`

`;var b=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return g.splitAdjacentBlockquotes&&(b=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),p=p.replace(b,function(x){return x=x.replace(/^[ \t]*>[ \t]?/gm,""),x=x.replace(/¨0/g,""),x=x.replace(/^[ \t]+$/gm,""),x=t.subParser("githubCodeBlocks")(x,g,y),x=t.subParser("blockGamut")(x,g,y),x=x.replace(/(^|\n)/g,"$1  "),x=x.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(v,T){var I=T;return I=I.replace(/^  /mg,"\xA80"),I=I.replace(/¨0/g,""),I}),t.subParser("hashBlock")(`<blockquote>
`+x+`
</blockquote>`,g,y)}),p=y.converter._dispatch("blockQuotes.after",p,g,y),p}),t.subParser("codeBlocks",function(p,g,y){"use strict";p=y.converter._dispatch("codeBlocks.before",p,g,y),p+="\xA80";var b=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return p=p.replace(b,function(x,v,T){var I=v,R=T,M=`
`;return I=t.subParser("outdent")(I,g,y),I=t.subParser("encodeCode")(I,g,y),I=t.subParser("detab")(I,g,y),I=I.replace(/^\n+/g,""),I=I.replace(/\n+$/g,""),g.omitExtraWLInCodeBlocks&&(M=""),I="<pre><code>"+I+M+"</code></pre>",t.subParser("hashBlock")(I,g,y)+R}),p=p.replace(/¨0/,""),p=y.converter._dispatch("codeBlocks.after",p,g,y),p}),t.subParser("codeSpans",function(p,g,y){"use strict";return p=y.converter._dispatch("codeSpans.before",p,g,y),typeof p>"u"&&(p=""),p=p.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(b,x,v,T){var I=T;return I=I.replace(/^([ \t]*)/g,""),I=I.replace(/[ \t]*$/g,""),I=t.subParser("encodeCode")(I,g,y),I=x+"<code>"+I+"</code>",I=t.subParser("hashHTMLSpans")(I,g,y),I}),p=y.converter._dispatch("codeSpans.after",p,g,y),p}),t.subParser("completeHTMLDocument",function(p,g,y){"use strict";if(!g.completeHTMLDocument)return p;p=y.converter._dispatch("completeHTMLDocument.before",p,g,y);var b="html",x=`<!DOCTYPE HTML>
`,v="",T=`<meta charset="utf-8">
`,I="",R="";typeof y.metadata.parsed.doctype<"u"&&(x="<!DOCTYPE "+y.metadata.parsed.doctype+`>
`,b=y.metadata.parsed.doctype.toString().toLowerCase(),(b==="html"||b==="html5")&&(T='<meta charset="utf-8">'));for(var M in y.metadata.parsed)if(y.metadata.parsed.hasOwnProperty(M))switch(M.toLowerCase()){case"doctype":break;case"title":v="<title>"+y.metadata.parsed.title+`</title>
`;break;case"charset":b==="html"||b==="html5"?T='<meta charset="'+y.metadata.parsed.charset+`">
`:T='<meta name="charset" content="'+y.metadata.parsed.charset+`">
`;break;case"language":case"lang":I=' lang="'+y.metadata.parsed[M]+'"',R+='<meta name="'+M+'" content="'+y.metadata.parsed[M]+`">
`;break;default:R+='<meta name="'+M+'" content="'+y.metadata.parsed[M]+`">
`}return p=x+"<html"+I+`>
<head>
`+v+T+R+`</head>
<body>
`+p.trim()+`
</body>
</html>`,p=y.converter._dispatch("completeHTMLDocument.after",p,g,y),p}),t.subParser("detab",function(p,g,y){"use strict";return p=y.converter._dispatch("detab.before",p,g,y),p=p.replace(/\t(?=\t)/g,"    "),p=p.replace(/\t/g,"\xA8A\xA8B"),p=p.replace(/¨B(.+?)¨A/g,function(b,x){for(var v=x,T=4-v.length%4,I=0;I<T;I++)v+=" ";return v}),p=p.replace(/¨A/g,"    "),p=p.replace(/¨B/g,""),p=y.converter._dispatch("detab.after",p,g,y),p}),t.subParser("ellipsis",function(p,g,y){"use strict";return g.ellipsis&&(p=y.converter._dispatch("ellipsis.before",p,g,y),p=p.replace(/\.\.\./g,"\u2026"),p=y.converter._dispatch("ellipsis.after",p,g,y)),p}),t.subParser("emoji",function(p,g,y){"use strict";if(!g.emoji)return p;p=y.converter._dispatch("emoji.before",p,g,y);var b=/:([\S]+?):/g;return p=p.replace(b,function(x,v){return t.helper.emojis.hasOwnProperty(v)?t.helper.emojis[v]:x}),p=y.converter._dispatch("emoji.after",p,g,y),p}),t.subParser("encodeAmpsAndAngles",function(p,g,y){"use strict";return p=y.converter._dispatch("encodeAmpsAndAngles.before",p,g,y),p=p.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),p=p.replace(/<(?![a-z\/?$!])/gi,"&lt;"),p=p.replace(/</g,"&lt;"),p=p.replace(/>/g,"&gt;"),p=y.converter._dispatch("encodeAmpsAndAngles.after",p,g,y),p}),t.subParser("encodeBackslashEscapes",function(p,g,y){"use strict";return p=y.converter._dispatch("encodeBackslashEscapes.before",p,g,y),p=p.replace(/\\(\\)/g,t.helper.escapeCharactersCallback),p=p.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,t.helper.escapeCharactersCallback),p=y.converter._dispatch("encodeBackslashEscapes.after",p,g,y),p}),t.subParser("encodeCode",function(p,g,y){"use strict";return p=y.converter._dispatch("encodeCode.before",p,g,y),p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,t.helper.escapeCharactersCallback),p=y.converter._dispatch("encodeCode.after",p,g,y),p}),t.subParser("escapeSpecialCharsWithinTagAttributes",function(p,g,y){"use strict";p=y.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",p,g,y);var b=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,x=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return p=p.replace(b,function(v){return v.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)}),p=p.replace(x,function(v){return v.replace(/([\\`*_~=|])/g,t.helper.escapeCharactersCallback)}),p=y.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",p,g,y),p}),t.subParser("githubCodeBlocks",function(p,g,y){"use strict";return g.ghCodeBlocks?(p=y.converter._dispatch("githubCodeBlocks.before",p,g,y),p+="\xA80",p=p.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(b,x,v,T){var I=g.omitExtraWLInCodeBlocks?"":`
`;return T=t.subParser("encodeCode")(T,g,y),T=t.subParser("detab")(T,g,y),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),T="<pre><code"+(v?' class="'+v+" language-"+v+'"':"")+">"+T+I+"</code></pre>",T=t.subParser("hashBlock")(T,g,y),`

\xA8G`+(y.ghCodeBlocks.push({text:b,codeblock:T})-1)+`G

`}),p=p.replace(/¨0/,""),y.converter._dispatch("githubCodeBlocks.after",p,g,y)):p}),t.subParser("hashBlock",function(p,g,y){"use strict";return p=y.converter._dispatch("hashBlock.before",p,g,y),p=p.replace(/(^\n+|\n+$)/g,""),p=`

\xA8K`+(y.gHtmlBlocks.push(p)-1)+`K

`,p=y.converter._dispatch("hashBlock.after",p,g,y),p}),t.subParser("hashCodeTags",function(p,g,y){"use strict";p=y.converter._dispatch("hashCodeTags.before",p,g,y);var b=function(x,v,T,I){var R=T+t.subParser("encodeCode")(v,g,y)+I;return"\xA8C"+(y.gHtmlSpans.push(R)-1)+"C"};return p=t.helper.replaceRecursiveRegExp(p,b,"<code\\b[^>]*>","</code>","gim"),p=y.converter._dispatch("hashCodeTags.after",p,g,y),p}),t.subParser("hashElement",function(p,g,y){"use strict";return function(b,x){var v=x;return v=v.replace(/\n\n/g,`
`),v=v.replace(/^\n/,""),v=v.replace(/\n+$/g,""),v=`

\xA8K`+(y.gHtmlBlocks.push(v)-1)+`K

`,v}}),t.subParser("hashHTMLBlocks",function(p,g,y){"use strict";p=y.converter._dispatch("hashHTMLBlocks.before",p,g,y);var b=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],x=function(D,q,V,te){var pe=D;return V.search(/\bmarkdown\b/)!==-1&&(pe=V+y.converter.makeHtml(q)+te),`

\xA8K`+(y.gHtmlBlocks.push(pe)-1)+`K

`};g.backslashEscapesHTMLTags&&(p=p.replace(/\\<(\/?[^>]+?)>/g,function(D,q){return"&lt;"+q+"&gt;"}));for(var v=0;v<b.length;++v)for(var T,I=new RegExp("^ {0,3}(<"+b[v]+"\\b[^>]*>)","im"),R="<"+b[v]+"\\b[^>]*>",M="</"+b[v]+">";(T=t.helper.regexIndexOf(p,I))!==-1;){var U=t.helper.splitAtIndex(p,T),j=t.helper.replaceRecursiveRegExp(U[1],x,R,M,"im");if(j===U[1])break;p=U[0].concat(j)}return p=p.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(p,g,y)),p=t.helper.replaceRecursiveRegExp(p,function(D){return`

\xA8K`+(y.gHtmlBlocks.push(D)-1)+`K

`},"^ {0,3}<!--","-->","gm"),p=p.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,t.subParser("hashElement")(p,g,y)),p=y.converter._dispatch("hashHTMLBlocks.after",p,g,y),p}),t.subParser("hashHTMLSpans",function(p,g,y){"use strict";p=y.converter._dispatch("hashHTMLSpans.before",p,g,y);function b(x){return"\xA8C"+(y.gHtmlSpans.push(x)-1)+"C"}return p=p.replace(/<[^>]+?\/>/gi,function(x){return b(x)}),p=p.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(x){return b(x)}),p=p.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(x){return b(x)}),p=p.replace(/<[^>]+?>/gi,function(x){return b(x)}),p=y.converter._dispatch("hashHTMLSpans.after",p,g,y),p}),t.subParser("unhashHTMLSpans",function(p,g,y){"use strict";p=y.converter._dispatch("unhashHTMLSpans.before",p,g,y);for(var b=0;b<y.gHtmlSpans.length;++b){for(var x=y.gHtmlSpans[b],v=0;/¨C(\d+)C/.test(x);){var T=RegExp.$1;if(x=x.replace("\xA8C"+T+"C",y.gHtmlSpans[T]),v===10){console.error("maximum nesting of 10 spans reached!!!");break}++v}p=p.replace("\xA8C"+b+"C",x)}return p=y.converter._dispatch("unhashHTMLSpans.after",p,g,y),p}),t.subParser("hashPreCodeTags",function(p,g,y){"use strict";p=y.converter._dispatch("hashPreCodeTags.before",p,g,y);var b=function(x,v,T,I){var R=T+t.subParser("encodeCode")(v,g,y)+I;return`

\xA8G`+(y.ghCodeBlocks.push({text:x,codeblock:R})-1)+`G

`};return p=t.helper.replaceRecursiveRegExp(p,b,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),p=y.converter._dispatch("hashPreCodeTags.after",p,g,y),p}),t.subParser("headers",function(p,g,y){"use strict";p=y.converter._dispatch("headers.before",p,g,y);var b=isNaN(parseInt(g.headerLevelStart))?1:parseInt(g.headerLevelStart),x=g.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,v=g.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;p=p.replace(x,function(R,M){var U=t.subParser("spanGamut")(M,g,y),j=g.noHeaderId?"":' id="'+I(M)+'"',D=b,q="<h"+D+j+">"+U+"</h"+D+">";return t.subParser("hashBlock")(q,g,y)}),p=p.replace(v,function(R,M){var U=t.subParser("spanGamut")(M,g,y),j=g.noHeaderId?"":' id="'+I(M)+'"',D=b+1,q="<h"+D+j+">"+U+"</h"+D+">";return t.subParser("hashBlock")(q,g,y)});var T=g.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;p=p.replace(T,function(R,M,U){var j=U;g.customizedHeaderId&&(j=U.replace(/\s?\{([^{]+?)}\s*$/,""));var D=t.subParser("spanGamut")(j,g,y),q=g.noHeaderId?"":' id="'+I(U)+'"',V=b-1+M.length,te="<h"+V+q+">"+D+"</h"+V+">";return t.subParser("hashBlock")(te,g,y)});function I(R){var M,U;if(g.customizedHeaderId){var j=R.match(/\{([^{]+?)}\s*$/);j&&j[1]&&(R=j[1])}return M=R,t.helper.isString(g.prefixHeaderId)?U=g.prefixHeaderId:g.prefixHeaderId===!0?U="section-":U="",g.rawPrefixHeaderId||(M=U+M),g.ghCompatibleHeaderId?M=M.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():g.rawHeaderId?M=M.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"\xA8").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():M=M.replace(/[^\w]/g,"").toLowerCase(),g.rawPrefixHeaderId&&(M=U+M),y.hashLinkCounts[M]?M=M+"-"+y.hashLinkCounts[M]++:y.hashLinkCounts[M]=1,M}return p=y.converter._dispatch("headers.after",p,g,y),p}),t.subParser("horizontalRule",function(p,g,y){"use strict";p=y.converter._dispatch("horizontalRule.before",p,g,y);var b=t.subParser("hashBlock")("<hr />",g,y);return p=p.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,b),p=p.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,b),p=p.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,b),p=y.converter._dispatch("horizontalRule.after",p,g,y),p}),t.subParser("images",function(p,g,y){"use strict";p=y.converter._dispatch("images.before",p,g,y);var b=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,x=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,I=/!\[([^\[\]]+)]()()()()()/g;function R(U,j,D,q,V,te,pe,ue){return q=q.replace(/\s/g,""),M(U,j,D,q,V,te,pe,ue)}function M(U,j,D,q,V,te,pe,ue){var Ue=y.gUrls,le=y.gTitles,_e=y.gDimensions;if(D=D.toLowerCase(),ue||(ue=""),U.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)q="";else if(q===""||q===null)if((D===""||D===null)&&(D=j.toLowerCase().replace(/ ?\n/g," ")),q="#"+D,!t.helper.isUndefined(Ue[D]))q=Ue[D],t.helper.isUndefined(le[D])||(ue=le[D]),t.helper.isUndefined(_e[D])||(V=_e[D].width,te=_e[D].height);else return U;j=j.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),q=q.replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback);var we='<img src="'+q+'" alt="'+j+'"';return ue&&t.helper.isString(ue)&&(ue=ue.replace(/"/g,"&quot;").replace(t.helper.regexes.asteriskDashAndColon,t.helper.escapeCharactersCallback),we+=' title="'+ue+'"'),V&&te&&(V=V==="*"?"auto":V,te=te==="*"?"auto":te,we+=' width="'+V+'"',we+=' height="'+te+'"'),we+=" />",we}return p=p.replace(T,M),p=p.replace(v,R),p=p.replace(x,M),p=p.replace(b,M),p=p.replace(I,M),p=y.converter._dispatch("images.after",p,g,y),p}),t.subParser("italicsAndBold",function(p,g,y){"use strict";p=y.converter._dispatch("italicsAndBold.before",p,g,y);function b(x,v,T){return v+x+T}return g.literalMidWordUnderscores?(p=p.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,v){return b(v,"<strong><em>","</em></strong>")}),p=p.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,v){return b(v,"<strong>","</strong>")}),p=p.replace(/\b_(\S[\s\S]*?)_\b/g,function(x,v){return b(v,"<em>","</em>")})):(p=p.replace(/___(\S[\s\S]*?)___/g,function(x,v){return/\S$/.test(v)?b(v,"<strong><em>","</em></strong>"):x}),p=p.replace(/__(\S[\s\S]*?)__/g,function(x,v){return/\S$/.test(v)?b(v,"<strong>","</strong>"):x}),p=p.replace(/_([^\s_][\s\S]*?)_/g,function(x,v){return/\S$/.test(v)?b(v,"<em>","</em>"):x})),g.literalMidWordAsterisks?(p=p.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(x,v,T){return b(T,v+"<strong><em>","</em></strong>")}),p=p.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(x,v,T){return b(T,v+"<strong>","</strong>")}),p=p.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(x,v,T){return b(T,v+"<em>","</em>")})):(p=p.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(x,v){return/\S$/.test(v)?b(v,"<strong><em>","</em></strong>"):x}),p=p.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(x,v){return/\S$/.test(v)?b(v,"<strong>","</strong>"):x}),p=p.replace(/\*([^\s*][\s\S]*?)\*/g,function(x,v){return/\S$/.test(v)?b(v,"<em>","</em>"):x})),p=y.converter._dispatch("italicsAndBold.after",p,g,y),p}),t.subParser("lists",function(p,g,y){"use strict";function b(T,I){y.gListLevel++,T=T.replace(/\n{2,}$/,`
`),T+="\xA80";var R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,M=/\n[ \t]*\n(?!¨0)/.test(T);return g.disableForced4SpacesIndentedSublists&&(R=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),T=T.replace(R,function(U,j,D,q,V,te,pe){pe=pe&&pe.trim()!=="";var ue=t.subParser("outdent")(V,g,y),Ue="";return te&&g.tasklists&&(Ue=' class="task-list-item" style="list-style-type: none;"',ue=ue.replace(/^[ \t]*\[(x|X| )?]/m,function(){var le='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return pe&&(le+=" checked"),le+=">",le})),ue=ue.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(le){return"\xA8A"+le}),j||ue.search(/\n{2,}/)>-1?(ue=t.subParser("githubCodeBlocks")(ue,g,y),ue=t.subParser("blockGamut")(ue,g,y)):(ue=t.subParser("lists")(ue,g,y),ue=ue.replace(/\n$/,""),ue=t.subParser("hashHTMLBlocks")(ue,g,y),ue=ue.replace(/\n\n+/g,`

`),M?ue=t.subParser("paragraphs")(ue,g,y):ue=t.subParser("spanGamut")(ue,g,y)),ue=ue.replace("\xA8A",""),ue="<li"+Ue+">"+ue+`</li>
`,ue}),T=T.replace(/¨0/g,""),y.gListLevel--,I&&(T=T.replace(/\s+$/,"")),T}function x(T,I){if(I==="ol"){var R=T.match(/^ *(\d+)\./);if(R&&R[1]!=="1")return' start="'+R[1]+'"'}return""}function v(T,I,R){var M=g.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,U=g.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,j=I==="ul"?M:U,D="";if(T.search(j)!==-1)(function V(te){var pe=te.search(j),ue=x(T,I);pe!==-1?(D+=`

<`+I+ue+`>
`+b(te.slice(0,pe),!!R)+"</"+I+`>
`,I=I==="ul"?"ol":"ul",j=I==="ul"?M:U,V(te.slice(pe))):D+=`

<`+I+ue+`>
`+b(te,!!R)+"</"+I+`>
`})(T);else{var q=x(T,I);D=`

<`+I+q+`>
`+b(T,!!R)+"</"+I+`>
`}return D}return p=y.converter._dispatch("lists.before",p,g,y),p+="\xA80",y.gListLevel?p=p.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,I,R){var M=R.search(/[*+-]/g)>-1?"ul":"ol";return v(I,M,!0)}):p=p.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,I,R,M){var U=M.search(/[*+-]/g)>-1?"ul":"ol";return v(R,U,!1)}),p=p.replace(/¨0/,""),p=y.converter._dispatch("lists.after",p,g,y),p}),t.subParser("metadata",function(p,g,y){"use strict";if(!g.metadata)return p;p=y.converter._dispatch("metadata.before",p,g,y);function b(x){y.metadata.raw=x,x=x.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),x=x.replace(/\n {4}/g," "),x.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(v,T,I){return y.metadata.parsed[T]=I,""})}return p=p.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(x,v,T){return b(T),"\xA8M"}),p=p.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(x,v,T){return v&&(y.metadata.format=v),b(T),"\xA8M"}),p=p.replace(/¨M/g,""),p=y.converter._dispatch("metadata.after",p,g,y),p}),t.subParser("outdent",function(p,g,y){"use strict";return p=y.converter._dispatch("outdent.before",p,g,y),p=p.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),p=p.replace(/¨0/g,""),p=y.converter._dispatch("outdent.after",p,g,y),p}),t.subParser("paragraphs",function(p,g,y){"use strict";p=y.converter._dispatch("paragraphs.before",p,g,y),p=p.replace(/^\n+/g,""),p=p.replace(/\n+$/g,"");for(var b=p.split(/\n{2,}/g),x=[],v=b.length,T=0;T<v;T++){var I=b[T];I.search(/¨(K|G)(\d+)\1/g)>=0?x.push(I):I.search(/\S/)>=0&&(I=t.subParser("spanGamut")(I,g,y),I=I.replace(/^([ \t]*)/g,"<p>"),I+="</p>",x.push(I))}for(v=x.length,T=0;T<v;T++){for(var R="",M=x[T],U=!1;/¨(K|G)(\d+)\1/.test(M);){var j=RegExp.$1,D=RegExp.$2;j==="K"?R=y.gHtmlBlocks[D]:U?R=t.subParser("encodeCode")(y.ghCodeBlocks[D].text,g,y):R=y.ghCodeBlocks[D].codeblock,R=R.replace(/\$/g,"$$$$"),M=M.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,R),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(M)&&(U=!0)}x[T]=M}return p=x.join(`
`),p=p.replace(/^\n+/g,""),p=p.replace(/\n+$/g,""),y.converter._dispatch("paragraphs.after",p,g,y)}),t.subParser("runExtension",function(p,g,y,b){"use strict";if(p.filter)g=p.filter(g,b.converter,y);else if(p.regex){var x=p.regex;x instanceof RegExp||(x=new RegExp(x,"g")),g=g.replace(x,p.replace)}return g}),t.subParser("spanGamut",function(p,g,y){"use strict";return p=y.converter._dispatch("spanGamut.before",p,g,y),p=t.subParser("codeSpans")(p,g,y),p=t.subParser("escapeSpecialCharsWithinTagAttributes")(p,g,y),p=t.subParser("encodeBackslashEscapes")(p,g,y),p=t.subParser("images")(p,g,y),p=t.subParser("anchors")(p,g,y),p=t.subParser("autoLinks")(p,g,y),p=t.subParser("simplifiedAutoLinks")(p,g,y),p=t.subParser("emoji")(p,g,y),p=t.subParser("underline")(p,g,y),p=t.subParser("italicsAndBold")(p,g,y),p=t.subParser("strikethrough")(p,g,y),p=t.subParser("ellipsis")(p,g,y),p=t.subParser("hashHTMLSpans")(p,g,y),p=t.subParser("encodeAmpsAndAngles")(p,g,y),g.simpleLineBreaks?/\n\n¨K/.test(p)||(p=p.replace(/\n+/g,`<br />
`)):p=p.replace(/  +\n/g,`<br />
`),p=y.converter._dispatch("spanGamut.after",p,g,y),p}),t.subParser("strikethrough",function(p,g,y){"use strict";function b(x){return g.simplifiedAutoLink&&(x=t.subParser("simplifiedAutoLinks")(x,g,y)),"<del>"+x+"</del>"}return g.strikethrough&&(p=y.converter._dispatch("strikethrough.before",p,g,y),p=p.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(x,v){return b(v)}),p=y.converter._dispatch("strikethrough.after",p,g,y)),p}),t.subParser("stripLinkDefinitions",function(p,g,y){"use strict";var b=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;p+="\xA80";var v=function(T,I,R,M,U,j,D){return I=I.toLowerCase(),p.toLowerCase().split(I).length-1<2?T:(R.match(/^data:.+?\/.+?;base64,/)?y.gUrls[I]=R.replace(/\s/g,""):y.gUrls[I]=t.subParser("encodeAmpsAndAngles")(R,g,y),j?j+D:(D&&(y.gTitles[I]=D.replace(/"|'/g,"&quot;")),g.parseImgDimensions&&M&&U&&(y.gDimensions[I]={width:M,height:U}),""))};return p=p.replace(x,v),p=p.replace(b,v),p=p.replace(/¨0/,""),p}),t.subParser("tables",function(p,g,y){"use strict";if(!g.tables)return p;var b=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,x=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function v(U){return/^:[ \t]*--*$/.test(U)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(U)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(U)?' style="text-align:center;"':""}function T(U,j){var D="";return U=U.trim(),(g.tablesHeaderId||g.tableHeaderId)&&(D=' id="'+U.replace(/ /g,"_").toLowerCase()+'"'),U=t.subParser("spanGamut")(U,g,y),"<th"+D+j+">"+U+`</th>
`}function I(U,j){var D=t.subParser("spanGamut")(U,g,y);return"<td"+j+">"+D+`</td>
`}function R(U,j){for(var D=`<table>
<thead>
<tr>
`,q=U.length,V=0;V<q;++V)D+=U[V];for(D+=`</tr>
</thead>
<tbody>
`,V=0;V<j.length;++V){D+=`<tr>
`;for(var te=0;te<q;++te)D+=j[V][te];D+=`</tr>
`}return D+=`</tbody>
</table>
`,D}function M(U){var j,D=U.split(`
`);for(j=0;j<D.length;++j)/^ {0,3}\|/.test(D[j])&&(D[j]=D[j].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(D[j])&&(D[j]=D[j].replace(/\|[ \t]*$/,"")),D[j]=t.subParser("codeSpans")(D[j],g,y);var q=D[0].split("|").map(function(we){return we.trim()}),V=D[1].split("|").map(function(we){return we.trim()}),te=[],pe=[],ue=[],Ue=[];for(D.shift(),D.shift(),j=0;j<D.length;++j)D[j].trim()!==""&&te.push(D[j].split("|").map(function(we){return we.trim()}));if(q.length<V.length)return U;for(j=0;j<V.length;++j)ue.push(v(V[j]));for(j=0;j<q.length;++j)t.helper.isUndefined(ue[j])&&(ue[j]=""),pe.push(T(q[j],ue[j]));for(j=0;j<te.length;++j){for(var le=[],_e=0;_e<pe.length;++_e)t.helper.isUndefined(te[j][_e]),le.push(I(te[j][_e],ue[_e]));Ue.push(le)}return R(pe,Ue)}return p=y.converter._dispatch("tables.before",p,g,y),p=p.replace(/\\(\|)/g,t.helper.escapeCharactersCallback),p=p.replace(b,M),p=p.replace(x,M),p=y.converter._dispatch("tables.after",p,g,y),p}),t.subParser("underline",function(p,g,y){"use strict";return g.underline&&(p=y.converter._dispatch("underline.before",p,g,y),g.literalMidWordUnderscores?(p=p.replace(/\b___(\S[\s\S]*?)___\b/g,function(b,x){return"<u>"+x+"</u>"}),p=p.replace(/\b__(\S[\s\S]*?)__\b/g,function(b,x){return"<u>"+x+"</u>"})):(p=p.replace(/___(\S[\s\S]*?)___/g,function(b,x){return/\S$/.test(x)?"<u>"+x+"</u>":b}),p=p.replace(/__(\S[\s\S]*?)__/g,function(b,x){return/\S$/.test(x)?"<u>"+x+"</u>":b})),p=p.replace(/(_)/g,t.helper.escapeCharactersCallback),p=y.converter._dispatch("underline.after",p,g,y)),p}),t.subParser("unescapeSpecialChars",function(p,g,y){"use strict";return p=y.converter._dispatch("unescapeSpecialChars.before",p,g,y),p=p.replace(/¨E(\d+)E/g,function(b,x){var v=parseInt(x);return String.fromCharCode(v)}),p=y.converter._dispatch("unescapeSpecialChars.after",p,g,y),p}),t.subParser("makeMarkdown.blockquote",function(p,g){"use strict";var y="";if(p.hasChildNodes())for(var b=p.childNodes,x=b.length,v=0;v<x;++v){var T=t.subParser("makeMarkdown.node")(b[v],g);T!==""&&(y+=T)}return y=y.trim(),y="> "+y.split(`
`).join(`
> `),y}),t.subParser("makeMarkdown.codeBlock",function(p,g){"use strict";var y=p.getAttribute("language"),b=p.getAttribute("precodenum");return"```"+y+`
`+g.preList[b]+"\n```"}),t.subParser("makeMarkdown.codeSpan",function(p){"use strict";return"`"+p.innerHTML+"`"}),t.subParser("makeMarkdown.emphasis",function(p,g){"use strict";var y="";if(p.hasChildNodes()){y+="*";for(var b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);y+="*"}return y}),t.subParser("makeMarkdown.header",function(p,g,y){"use strict";var b=new Array(y+1).join("#"),x="";if(p.hasChildNodes()){x=b+" ";for(var v=p.childNodes,T=v.length,I=0;I<T;++I)x+=t.subParser("makeMarkdown.node")(v[I],g)}return x}),t.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),t.subParser("makeMarkdown.image",function(p){"use strict";var g="";return p.hasAttribute("src")&&(g+="!["+p.getAttribute("alt")+"](",g+="<"+p.getAttribute("src")+">",p.hasAttribute("width")&&p.hasAttribute("height")&&(g+=" ="+p.getAttribute("width")+"x"+p.getAttribute("height")),p.hasAttribute("title")&&(g+=' "'+p.getAttribute("title")+'"'),g+=")"),g}),t.subParser("makeMarkdown.links",function(p,g){"use strict";var y="";if(p.hasChildNodes()&&p.hasAttribute("href")){var b=p.childNodes,x=b.length;y="[";for(var v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);y+="](",y+="<"+p.getAttribute("href")+">",p.hasAttribute("title")&&(y+=' "'+p.getAttribute("title")+'"'),y+=")"}return y}),t.subParser("makeMarkdown.list",function(p,g,y){"use strict";var b="";if(!p.hasChildNodes())return"";for(var x=p.childNodes,v=x.length,T=p.getAttribute("start")||1,I=0;I<v;++I)if(!(typeof x[I].tagName>"u"||x[I].tagName.toLowerCase()!=="li")){var R="";y==="ol"?R=T.toString()+". ":R="- ",b+=R+t.subParser("makeMarkdown.listItem")(x[I],g),++T}return b+=`
<!-- -->
`,b.trim()}),t.subParser("makeMarkdown.listItem",function(p,g){"use strict";for(var y="",b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);return/\n$/.test(y)?y=y.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):y+=`
`,y}),t.subParser("makeMarkdown.node",function(p,g,y){"use strict";y=y||!1;var b="";if(p.nodeType===3)return t.subParser("makeMarkdown.txt")(p,g);if(p.nodeType===8)return"<!--"+p.data+`-->

`;if(p.nodeType!==1)return"";var x=p.tagName.toLowerCase();switch(x){case"h1":y||(b=t.subParser("makeMarkdown.header")(p,g,1)+`

`);break;case"h2":y||(b=t.subParser("makeMarkdown.header")(p,g,2)+`

`);break;case"h3":y||(b=t.subParser("makeMarkdown.header")(p,g,3)+`

`);break;case"h4":y||(b=t.subParser("makeMarkdown.header")(p,g,4)+`

`);break;case"h5":y||(b=t.subParser("makeMarkdown.header")(p,g,5)+`

`);break;case"h6":y||(b=t.subParser("makeMarkdown.header")(p,g,6)+`

`);break;case"p":y||(b=t.subParser("makeMarkdown.paragraph")(p,g)+`

`);break;case"blockquote":y||(b=t.subParser("makeMarkdown.blockquote")(p,g)+`

`);break;case"hr":y||(b=t.subParser("makeMarkdown.hr")(p,g)+`

`);break;case"ol":y||(b=t.subParser("makeMarkdown.list")(p,g,"ol")+`

`);break;case"ul":y||(b=t.subParser("makeMarkdown.list")(p,g,"ul")+`

`);break;case"precode":y||(b=t.subParser("makeMarkdown.codeBlock")(p,g)+`

`);break;case"pre":y||(b=t.subParser("makeMarkdown.pre")(p,g)+`

`);break;case"table":y||(b=t.subParser("makeMarkdown.table")(p,g)+`

`);break;case"code":b=t.subParser("makeMarkdown.codeSpan")(p,g);break;case"em":case"i":b=t.subParser("makeMarkdown.emphasis")(p,g);break;case"strong":case"b":b=t.subParser("makeMarkdown.strong")(p,g);break;case"del":b=t.subParser("makeMarkdown.strikethrough")(p,g);break;case"a":b=t.subParser("makeMarkdown.links")(p,g);break;case"img":b=t.subParser("makeMarkdown.image")(p,g);break;default:b=p.outerHTML+`

`}return b}),t.subParser("makeMarkdown.paragraph",function(p,g){"use strict";var y="";if(p.hasChildNodes())for(var b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);return y=y.trim(),y}),t.subParser("makeMarkdown.pre",function(p,g){"use strict";var y=p.getAttribute("prenum");return"<pre>"+g.preList[y]+"</pre>"}),t.subParser("makeMarkdown.strikethrough",function(p,g){"use strict";var y="";if(p.hasChildNodes()){y+="~~";for(var b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);y+="~~"}return y}),t.subParser("makeMarkdown.strong",function(p,g){"use strict";var y="";if(p.hasChildNodes()){y+="**";for(var b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g);y+="**"}return y}),t.subParser("makeMarkdown.table",function(p,g){"use strict";var y="",b=[[],[]],x=p.querySelectorAll("thead>tr>th"),v=p.querySelectorAll("tbody>tr"),T,I;for(T=0;T<x.length;++T){var R=t.subParser("makeMarkdown.tableCell")(x[T],g),M="---";if(x[T].hasAttribute("style")){var U=x[T].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(U){case"text-align:left;":M=":---";break;case"text-align:right;":M="---:";break;case"text-align:center;":M=":---:";break}}b[0][T]=R.trim(),b[1][T]=M}for(T=0;T<v.length;++T){var j=b.push([])-1,D=v[T].getElementsByTagName("td");for(I=0;I<x.length;++I){var q=" ";typeof D[I]<"u"&&(q=t.subParser("makeMarkdown.tableCell")(D[I],g)),b[j].push(q)}}var V=3;for(T=0;T<b.length;++T)for(I=0;I<b[T].length;++I){var te=b[T][I].length;te>V&&(V=te)}for(T=0;T<b.length;++T){for(I=0;I<b[T].length;++I)T===1?b[T][I].slice(-1)===":"?b[T][I]=t.helper.padEnd(b[T][I].slice(-1),V-1,"-")+":":b[T][I]=t.helper.padEnd(b[T][I],V,"-"):b[T][I]=t.helper.padEnd(b[T][I],V);y+="| "+b[T].join(" | ")+` |
`}return y.trim()}),t.subParser("makeMarkdown.tableCell",function(p,g){"use strict";var y="";if(!p.hasChildNodes())return"";for(var b=p.childNodes,x=b.length,v=0;v<x;++v)y+=t.subParser("makeMarkdown.node")(b[v],g,!0);return y.trim()}),t.subParser("makeMarkdown.txt",function(p){"use strict";var g=p.nodeValue;return g=g.replace(/ +/g," "),g=g.replace(/¨NBSP;/g," "),g=t.helper.unescapeHTMLEntities(g),g=g.replace(/([*_~|`])/g,"\\$1"),g=g.replace(/^(\s*)>/g,"\\$1>"),g=g.replace(/^#/gm,"\\#"),g=g.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),g=g.replace(/^( {0,3}\d+)\./gm,"$1\\."),g=g.replace(/^( {0,3})([+-])/gm,"$1\\$2"),g=g.replace(/]([\s]*)\(/g,"\\]$1\\("),g=g.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),g});var S=this;typeof define=="function"&&define.amd?define(function(){"use strict";return t}):typeof A9<"u"&&A9.exports?A9.exports=t:S.showdown=t}).call(eF)});var CF=O((qQe,AF)=>{"use strict";AF.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var FS=O((DF,NF)=>{"use strict";var k9=CF(),{hasOwnProperty:kF}=Object.prototype,{propertyIsEnumerable:Yme}=Object,Ed=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),Xme=DF,RF={concatArrays:!1,ignoreUndefined:!1},P9=r=>{let e=[];for(let t in r)kF.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)Yme.call(r,n)&&e.push(n)}return e};function xd(r){return Array.isArray(r)?Qme(r):k9(r)?Zme(r):r}function Qme(r){let e=r.slice(0,0);return P9(r).forEach(t=>{Ed(e,t,xd(r[t]))}),e}function Zme(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return P9(r).forEach(t=>{Ed(e,t,xd(r[t]))}),e}var PF=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Ed(r,i,US(r[i],e[i],n)):Ed(r,i,xd(e[i])))}),r),Jme=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let s=[];for(let a=0;a<o.length;a++)kF.call(o,a)&&(s.push(String(a)),o===r?Ed(n,i++,o[a]):Ed(n,i++,xd(o[a])));n=PF(n,o,P9(o).filter(a=>!s.includes(a)),t)}),n};function US(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?Jme(r,e,t):!k9(e)||!k9(r)?xd(e):PF(r,e,P9(e),t)}NF.exports=function(...r){let e=US(xd(RF),this!==Xme&&this||{},RF),t={_:{}};for(let n of r)if(n!==void 0){if(!k9(n))throw new TypeError("`"+n+"` is not an Option Object");t=US(t,{_:n},e)}return t._}});var VS=O((KQe,LF)=>{function ege(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}LF.exports=ege});var fh=O((jQe,BF)=>{"use strict";var tge=VS(),D9=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,dh=tge(),rge=D9&&!dh,nge=dh&&!D9,ige=dh&&D9,oge=typeof require=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!dh,sge=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,age=typeof process<"u"&&typeof process.env<"u"&&!1,cge=typeof navigator<"u"&&navigator.product==="ReactNative";BF.exports={isTest:age,isElectron:dh,isElectronMain:nge,isElectronRenderer:ige,isNode:oge,isBrowser:rge,isWebWorker:sge,isEnvWithDom:D9,isReactNative:cge}});var UF=O((GQe,MF)=>{var Sd=1e3,Td=Sd*60,Id=Td*60,Xu=Id*24,uge=Xu*7,lge=Xu*365.25;MF.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return dge(r);if(t==="number"&&isFinite(r))return e.long?hge(r):fge(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function dge(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*lge;case"weeks":case"week":case"w":return t*uge;case"days":case"day":case"d":return t*Xu;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Id;case"minutes":case"minute":case"mins":case"min":case"m":return t*Td;case"seconds":case"second":case"secs":case"sec":case"s":return t*Sd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function fge(r){var e=Math.abs(r);return e>=Xu?Math.round(r/Xu)+"d":e>=Id?Math.round(r/Id)+"h":e>=Td?Math.round(r/Td)+"m":e>=Sd?Math.round(r/Sd)+"s":r+"ms"}function hge(r){var e=Math.abs(r);return e>=Xu?N9(r,e,Xu,"day"):e>=Id?N9(r,e,Id,"hour"):e>=Td?N9(r,e,Td,"minute"):e>=Sd?N9(r,e,Sd,"second"):r+" ms"}function N9(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var zS=O((HQe,FF)=>{function pge(r){t.debug=t,t.default=t,t.coerce=c,t.disable=o,t.enable=i,t.enabled=s,t.humanize=UF(),t.destroy=u,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(l){let d,h=null,f,m;function w(..._){if(!w.enabled)return;let E=w,S=Number(new Date),p=S-(d||S);E.diff=p,E.prev=d,E.curr=S,d=S,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let g=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";g++;let v=t.formatters[x];if(typeof v=="function"){let T=_[g];b=v.call(E,T),_.splice(g,1),g--}return b}),t.formatArgs.call(E,_),(E.log||t.log).apply(E,_)}return w.namespace=l,w.useColors=t.useColors(),w.color=t.selectColor(l),w.extend=n,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==t.namespaces&&(f=t.namespaces,m=t.enabled(l)),m),set:_=>{h=_}}),typeof t.init=="function"&&t.init(w),w}function n(l,d){let h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}FF.exports=pge});var VF=O((Ao,O9)=>{Ao.formatArgs=gge;Ao.save=yge;Ao.load=wge;Ao.useColors=mge;Ao.storage=bge();Ao.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ao.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function mge(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function gge(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+O9.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ao.log=console.debug||console.log||(()=>{});function yge(r){try{r?Ao.storage.setItem("debug",r):Ao.storage.removeItem("debug")}catch{}}function wge(){let r;try{r=Ao.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function bge(){try{return localStorage}catch{}}O9.exports=zS()(Ao);var{formatters:_ge}=O9.exports;_ge.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var qF=O((WQe,zF)=>{"use strict";zF.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var jF=O((YQe,KF)=>{"use strict";var vge=require("os"),$F=require("tty"),gs=qF(),{env:Vn}=process,X0;gs("no-color")||gs("no-colors")||gs("color=false")||gs("color=never")?X0=0:(gs("color")||gs("colors")||gs("color=true")||gs("color=always"))&&(X0=1);"FORCE_COLOR"in Vn&&(Vn.FORCE_COLOR==="true"?X0=1:Vn.FORCE_COLOR==="false"?X0=0:X0=Vn.FORCE_COLOR.length===0?1:Math.min(parseInt(Vn.FORCE_COLOR,10),3));function qS(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function $S(r,e){if(X0===0)return 0;if(gs("color=16m")||gs("color=full")||gs("color=truecolor"))return 3;if(gs("color=256"))return 2;if(r&&!e&&X0===void 0)return 0;let t=X0||0;if(Vn.TERM==="dumb")return t;if(process.platform==="win32"){let n=vge.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Vn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Vn)||Vn.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Vn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Vn.TEAMCITY_VERSION)?1:0;if(Vn.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Vn){let n=parseInt((Vn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Vn.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Vn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Vn.TERM)||"COLORTERM"in Vn?1:t}function Ege(r){let e=$S(r,r&&r.isTTY);return qS(e)}KF.exports={supportsColor:Ege,stdout:qS($S(!0,$F.isatty(1))),stderr:qS($S(!0,$F.isatty(2)))}});var HF=O((zn,B9)=>{var xge=require("tty"),L9=require("util");zn.init=kge;zn.log=Age;zn.formatArgs=Tge;zn.save=Cge;zn.load=Rge;zn.useColors=Sge;zn.destroy=L9.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");zn.colors=[6,2,3,4,5,1];try{let r=jF();r&&(r.stderr||r).level>=2&&(zn.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}zn.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Sge(){return"colors"in zn.inspectOpts?!!zn.inspectOpts.colors:xge.isatty(process.stderr.fd)}function Tge(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+B9.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Ige()+e+" "+r[0]}function Ige(){return zn.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Age(...r){return process.stderr.write(L9.formatWithOptions(zn.inspectOpts,...r)+`
`)}function Cge(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Rge(){return process.env.DEBUG}function kge(r){r.inspectOpts={};let e=Object.keys(zn.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=zn.inspectOpts[e[t]]}B9.exports=zS()(zn);var{formatters:GF}=B9.exports;GF.o=function(r){return this.inspectOpts.colors=this.useColors,L9.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};GF.O=function(r){return this.inspectOpts.colors=this.useColors,L9.inspect(r,this.inspectOpts)}});var Co=O((XQe,KS)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?KS.exports=VF():KS.exports=HF()});var fe=O((uZe,eV)=>{"use strict";function JF(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Gge(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return JF(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),JF(new i,t)}}eV.exports=Gge});var tT=O((lZe,tV)=>{"use strict";tV.exports=Hge;function Hge(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(a,c){t[n]=function(l){if(o)if(o=!1,l)c(l);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];a.apply(null,d)}};try{r.apply(e||null,t)}catch(u){o&&(o=!1,c(u))}})}});var rT=O(iV=>{"use strict";var M9=iV;M9.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Cd=new Array(64),nV=new Array(123);for(pa=0;pa<64;)nV[Cd[pa]=pa<26?pa+65:pa<52?pa+71:pa<62?pa-4:pa-59|43]=pa++;var pa;M9.encode=function(e,t,n){for(var i=null,o=[],s=0,a=0,c;t<n;){var u=e[t++];switch(a){case 0:o[s++]=Cd[u>>2],c=(u&3)<<4,a=1;break;case 1:o[s++]=Cd[c|u>>4],c=(u&15)<<2,a=2;break;case 2:o[s++]=Cd[c|u>>6],o[s++]=Cd[u&63],a=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return a&&(o[s++]=Cd[c],o[s++]=61,a===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var rV="invalid encoding";M9.decode=function(e,t,n){for(var i=n,o=0,s,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&o>1)break;if((c=nV[c])===void 0)throw Error(rV);switch(o){case 0:s=c,o=1;break;case 1:t[n++]=s<<2|(c&48)>>4,s=c,o=2;break;case 2:t[n++]=(s&15)<<4|(c&60)>>2,s=c,o=3;break;case 3:t[n++]=(s&3)<<6|c,o=0;break}}if(o===1)throw Error(rV);return n-i};M9.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var nT=O((fZe,oV)=>{"use strict";oV.exports=U9;function U9(){this._listeners={}}U9.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};U9.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};U9.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var iT=O((hZe,dV)=>{"use strict";dV.exports=sV(sV);function sV(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(c,u,l){e[0]=c,u[l]=t[0],u[l+1]=t[1],u[l+2]=t[2],u[l+3]=t[3]}function o(c,u,l){e[0]=c,u[l]=t[3],u[l+1]=t[2],u[l+2]=t[1],u[l+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function s(c,u){return t[0]=c[u],t[1]=c[u+1],t[2]=c[u+2],t[3]=c[u+3],e[0]}function a(c,u){return t[3]=c[u],t[2]=c[u+1],t[1]=c[u+2],t[0]=c[u+3],e[0]}r.readFloatLE=n?s:a,r.readFloatBE=n?a:s}():function(){function e(n,i,o,s){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var c=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,o,s)}}r.writeFloatLE=e.bind(null,aV),r.writeFloatBE=e.bind(null,cV);function t(n,i,o){var s=n(i,o),a=(s>>31)*2+1,c=s>>>23&255,u=s&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}r.readFloatLE=t.bind(null,uV),r.readFloatBE=t.bind(null,lV)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(c,u,l){e[0]=c,u[l]=t[0],u[l+1]=t[1],u[l+2]=t[2],u[l+3]=t[3],u[l+4]=t[4],u[l+5]=t[5],u[l+6]=t[6],u[l+7]=t[7]}function o(c,u,l){e[0]=c,u[l]=t[7],u[l+1]=t[6],u[l+2]=t[5],u[l+3]=t[4],u[l+4]=t[3],u[l+5]=t[2],u[l+6]=t[1],u[l+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function s(c,u){return t[0]=c[u],t[1]=c[u+1],t[2]=c[u+2],t[3]=c[u+3],t[4]=c[u+4],t[5]=c[u+5],t[6]=c[u+6],t[7]=c[u+7],e[0]}function a(c,u){return t[7]=c[u],t[6]=c[u+1],t[5]=c[u+2],t[4]=c[u+3],t[3]=c[u+4],t[2]=c[u+5],t[1]=c[u+6],t[0]=c[u+7],e[0]}r.readDoubleLE=n?s:a,r.readDoubleBE=n?a:s}():function(){function e(n,i,o,s,a,c){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,a,c+i),n(1/s>0?0:2147483648,a,c+o);else if(isNaN(s))n(0,a,c+i),n(2146959360,a,c+o);else if(s>17976931348623157e292)n(0,a,c+i),n((u<<31|2146435072)>>>0,a,c+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,n(l>>>0,a,c+i),n((u<<31|l/4294967296)>>>0,a,c+o);else{var d=Math.floor(Math.log(s)/Math.LN2);d===1024&&(d=1023),l=s*Math.pow(2,-d),n(l*4503599627370496>>>0,a,c+i),n((u<<31|d+1023<<20|l*1048576&1048575)>>>0,a,c+o)}}}r.writeDoubleLE=e.bind(null,aV,0,4),r.writeDoubleBE=e.bind(null,cV,4,0);function t(n,i,o,s,a){var c=n(s,a+i),u=n(s,a+o),l=(u>>31)*2+1,d=u>>>20&2047,h=4294967296*(u&1048575)+c;return d===2047?h?NaN:l*(1/0):d===0?l*5e-324*h:l*Math.pow(2,d-1075)*(h+4503599627370496)}r.readDoubleLE=t.bind(null,uV,0,4),r.readDoubleBE=t.bind(null,lV,4,0)}(),r}function aV(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function cV(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function uV(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function lV(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var oT=O((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var aT=O(fV=>{"use strict";var sT=fV;sT.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};sT.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,s=[],a=0,c;t<n;)c=e[t++],c<128?s[a++]=c:c>191&&c<224?s[a++]=(c&31)<<6|e[t++]&63:c>239&&c<365?(c=((c&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[a++]=55296+(c>>10),s[a++]=56320+(c&1023)):s[a++]=(c&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};sT.write=function(e,t,n){for(var i=n,o,s,a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++a,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var cT=O((mZe,hV)=>{"use strict";hV.exports=Wge;function Wge(r,e,t){var n=t||8192,i=n>>>1,o=null,s=n;return function(c){if(c<1||c>i)return r(c);s+c>n&&(o=r(n),s=0);var u=e.call(o,s,s+=c);return s&7&&(s=(s|7)+1),u}}});var mV=O((gZe,pV)=>{"use strict";pV.exports=qn;var hh=pc();function qn(r,e){this.lo=r>>>0,this.hi=e>>>0}var Zu=qn.zero=new qn(0,0);Zu.toNumber=function(){return 0};Zu.zzEncode=Zu.zzDecode=function(){return this};Zu.length=function(){return 1};var Yge=qn.zeroHash="\0\0\0\0\0\0\0\0";qn.fromNumber=function(e){if(e===0)return Zu;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new qn(n,i)};qn.from=function(e){if(typeof e=="number")return qn.fromNumber(e);if(hh.isString(e))if(hh.Long)e=hh.Long.fromString(e);else return qn.fromNumber(parseInt(e,10));return e.low||e.high?new qn(e.low>>>0,e.high>>>0):Zu};qn.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};qn.prototype.toLong=function(e){return hh.Long?new hh.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var J0=String.prototype.charCodeAt;qn.fromHash=function(e){return e===Yge?Zu:new qn((J0.call(e,0)|J0.call(e,1)<<8|J0.call(e,2)<<16|J0.call(e,3)<<24)>>>0,(J0.call(e,4)|J0.call(e,5)<<8|J0.call(e,6)<<16|J0.call(e,7)<<24)>>>0)};qn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};qn.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};qn.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};qn.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var pc=O(uT=>{"use strict";var Ge=uT;Ge.asPromise=tT();Ge.base64=rT();Ge.EventEmitter=nT();Ge.float=iT();Ge.inquire=oT();Ge.utf8=aT();Ge.pool=cT();Ge.LongBits=mV();Ge.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Ge.global=Ge.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||uT;Ge.emptyArray=Object.freeze?Object.freeze([]):[];Ge.emptyObject=Object.freeze?Object.freeze({}):{};Ge.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Ge.isString=function(e){return typeof e=="string"||e instanceof String};Ge.isObject=function(e){return e&&typeof e=="object"};Ge.isset=Ge.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Ge.Buffer=function(){try{var r=Ge.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();Ge._Buffer_from=null;Ge._Buffer_allocUnsafe=null;Ge.newBuffer=function(e){return typeof e=="number"?Ge.Buffer?Ge._Buffer_allocUnsafe(e):new Ge.Array(e):Ge.Buffer?Ge._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};Ge.Array=typeof Uint8Array<"u"?Uint8Array:Array;Ge.Long=Ge.global.dcodeIO&&Ge.global.dcodeIO.Long||Ge.global.Long||Ge.inquire("long");Ge.key2Re=/^true|false|0|1$/;Ge.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Ge.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Ge.longToHash=function(e){return e?Ge.LongBits.from(e).toHash():Ge.LongBits.zeroHash};Ge.longFromHash=function(e,t){var n=Ge.LongBits.fromHash(e);return Ge.Long?Ge.Long.fromBits(n.lo,n.hi,t):n.toNumber(!!t)};function gV(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}Ge.merge=gV;Ge.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function yV(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&gV(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}Ge.newError=yV;Ge.ProtocolError=yV("ProtocolError");Ge.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};Ge.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};Ge.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Ge._configure=function(){var r=Ge.Buffer;if(!r){Ge._Buffer_from=Ge._Buffer_allocUnsafe=null;return}Ge._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},Ge._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var V9=O((wZe,vV)=>{"use strict";vV.exports=er;var ys=pc(),lT,F9=ys.LongBits,wV=ys.base64,bV=ys.utf8;function ph(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function fT(){}function Xge(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function er(){this.len=0,this.head=new ph(fT,0,0),this.tail=this.head,this.states=null}var _V=function(){return ys.Buffer?function(){return(er.create=function(){return new lT})()}:function(){return new er}};er.create=_V();er.alloc=function(e){return new ys.Array(e)};ys.Array!==Array&&(er.alloc=ys.pool(er.alloc,ys.Array.prototype.subarray));er.prototype._push=function(e,t,n){return this.tail=this.tail.next=new ph(e,t,n),this.len+=t,this};function hT(r,e,t){e[t]=r&255}function Qge(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function pT(r,e){this.len=r,this.next=void 0,this.val=e}pT.prototype=Object.create(ph.prototype);pT.prototype.fn=Qge;er.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new pT((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};er.prototype.int32=function(e){return e<0?this._push(mT,10,F9.fromNumber(e)):this.uint32(e)};er.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function mT(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}er.prototype.uint64=function(e){var t=F9.from(e);return this._push(mT,t.length(),t)};er.prototype.int64=er.prototype.uint64;er.prototype.sint64=function(e){var t=F9.from(e).zzEncode();return this._push(mT,t.length(),t)};er.prototype.bool=function(e){return this._push(hT,1,e?1:0)};function dT(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}er.prototype.fixed32=function(e){return this._push(dT,4,e>>>0)};er.prototype.sfixed32=er.prototype.fixed32;er.prototype.fixed64=function(e){var t=F9.from(e);return this._push(dT,4,t.lo)._push(dT,4,t.hi)};er.prototype.sfixed64=er.prototype.fixed64;er.prototype.float=function(e){return this._push(ys.float.writeFloatLE,4,e)};er.prototype.double=function(e){return this._push(ys.float.writeDoubleLE,8,e)};var Zge=ys.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};er.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(hT,1,0);if(ys.isString(e)){var n=er.alloc(t=wV.length(e));wV.decode(e,n,0),e=n}return this.uint32(t)._push(Zge,t,e)};er.prototype.string=function(e){var t=bV.length(e);return t?this.uint32(t)._push(bV.write,t,e):this._push(hT,1,0)};er.prototype.fork=function(){return this.states=new Xge(this),this.head=this.tail=new ph(fT,0,0),this.len=0,this};er.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ph(fT,0,0),this.len=0),this};er.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};er.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};er._configure=function(r){lT=r,er.create=_V(),lT._configure()}});var gT=O((bZe,xV)=>{"use strict";xV.exports=o1;var EV=V9();(o1.prototype=Object.create(EV.prototype)).constructor=o1;var e2=pc();function o1(){EV.call(this)}o1._configure=function(){o1.alloc=e2._Buffer_allocUnsafe,o1.writeBytesBuffer=e2.Buffer&&e2.Buffer.prototype instanceof Uint8Array&&e2.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};o1.prototype.bytes=function(e){e2.isString(e)&&(e=e2._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o1.writeBytesBuffer,t,e),this};function Jge(r,e,t){r.length<40?e2.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}o1.prototype.string=function(e){var t=e2.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Jge,t,e),this};o1._configure()});var q9=O((_Ze,CV)=>{"use strict";CV.exports=ln;var ma=pc(),wT,IV=ma.LongBits,eye=ma.utf8;function ga(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function ln(r){this.buf=r,this.pos=0,this.len=r.length}var SV=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new ln(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new ln(e);throw Error("illegal buffer")},AV=function(){return ma.Buffer?function(t){return(ln.create=function(i){return ma.Buffer.isBuffer(i)?new wT(i):SV(i)})(t)}:SV};ln.create=AV();ln.prototype._slice=ma.Array.prototype.subarray||ma.Array.prototype.slice;ln.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ga(this,10);return e}}();ln.prototype.int32=function(){return this.uint32()|0};ln.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function yT(){var r=new IV(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ga(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw ga(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}ln.prototype.bool=function(){return this.uint32()!==0};function z9(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}ln.prototype.fixed32=function(){if(this.pos+4>this.len)throw ga(this,4);return z9(this.buf,this.pos+=4)};ln.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ga(this,4);return z9(this.buf,this.pos+=4)|0};function TV(){if(this.pos+8>this.len)throw ga(this,8);return new IV(z9(this.buf,this.pos+=4),z9(this.buf,this.pos+=4))}ln.prototype.float=function(){if(this.pos+4>this.len)throw ga(this,4);var e=ma.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};ln.prototype.double=function(){if(this.pos+8>this.len)throw ga(this,4);var e=ma.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};ln.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw ga(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,n);if(t===n){var i=ma.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,n)};ln.prototype.string=function(){var e=this.bytes();return eye.read(e,0,e.length)};ln.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ga(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ga(this);while(this.buf[this.pos++]&128);return this};ln.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};ln._configure=function(r){wT=r,ln.create=AV(),wT._configure();var e=ma.Long?"toLong":"toNumber";ma.merge(ln.prototype,{int64:function(){return yT.call(this)[e](!1)},uint64:function(){return yT.call(this)[e](!0)},sint64:function(){return yT.call(this).zzDecode()[e](!1)},fixed64:function(){return TV.call(this)[e](!0)},sfixed64:function(){return TV.call(this)[e](!1)}})}});var bT=O((vZe,PV)=>{"use strict";PV.exports=Ju;var kV=q9();(Ju.prototype=Object.create(kV.prototype)).constructor=Ju;var RV=pc();function Ju(r){kV.call(this,r)}Ju._configure=function(){RV.Buffer&&(Ju.prototype._slice=RV.Buffer.prototype.slice)};Ju.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Ju._configure()});var NV=O((EZe,DV)=>{"use strict";DV.exports=mh;var _T=pc();(mh.prototype=Object.create(_T.EventEmitter.prototype)).constructor=mh;function mh(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");_T.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!e,this.responseDelimited=!!t}mh.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return _T.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(c,u){if(c)return s.emit("error",c,e),o(c);if(u===null){s.end(!0);return}if(!(u instanceof n))try{u=n[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(l){return s.emit("error",l,e),o(l)}return s.emit("data",u,e),o(null,u)})}catch(a){s.emit("error",a,e),setTimeout(function(){o(a)},0);return}};mh.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var LV=O(OV=>{"use strict";var tye=OV;tye.Service=NV()});var MV=O((SZe,BV)=>{"use strict";BV.exports={}});var VV=O(FV=>{"use strict";var no=FV;no.build="minimal";no.Writer=V9();no.BufferWriter=gT();no.Reader=q9();no.BufferReader=bT();no.util=pc();no.rpc=LV();no.roots=MV();no.configure=UV;function UV(){no.util._configure(),no.Writer._configure(no.BufferWriter),no.Reader._configure(no.BufferReader)}UV()});var s1=O((IZe,zV)=>{"use strict";zV.exports=VV()});var s$=O((ert,o$)=>{"use strict";o$.exports=function(){let e=process.hrtime();return Math.floor(e[0]*1e3+e[1]/1e6)}});var CI=O((trt,a$)=>{"use strict";var pm=s$(),AI=class{constructor(e,t,n){let i=this;this._started=pm(),this._rescheduled=0,this._scheduled=t,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(pm()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);let t=pm();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=pm(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function E_e(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let r;if(arguments.length>0){r=new Array(arguments.length-2);for(var e=0;e<r.length;e++)r[e]=arguments[e+2]}return new AI(arguments[0],arguments[1],r)}a$.exports=E_e});var Dn=O((rrt,u$)=>{"use strict";var{AbortController:x_e}=globalThis,c$=CI(),RI=class r extends x_e{constructor(e){super(),this._ms=e,this._timer=c$(()=>this.abort(),e),Object.setPrototypeOf(this,r.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=c$(()=>this.abort(),this._ms)}};u$.exports={TimeoutController:RI}});var lA=O((iit,z$)=>{"use strict";var{URL:yve,URLSearchParams:wve,format:bve}=require("url"),V$="http://localhost",uA=class extends yve{constructor(e="",t=V$){super(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}format(){return this.toString()}};z$.exports={URLWithLegacySupport:uA,URLSearchParams:wve,format:bve,defaultBase:V$}});var K$=O((oit,$$)=>{"use strict";var{URLWithLegacySupport:q$,format:_ve}=lA();$$.exports=(r,e={},t={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(t[i]||n||i)+":";let o;try{o=new q$(r)}catch{o={}}let s=Object.assign({},e,{protocol:i||o.protocol,host:e.host||o.host});return new q$(r,_ve(s)).toString()}});var Em=O((sit,j$)=>{"use strict";var{URLWithLegacySupport:vve,format:Eve,URLSearchParams:xve,defaultBase:Sve}=lA(),Tve=K$();j$.exports={URL:vve,URLSearchParams:xve,format:Eve,relative:Tve,defaultBase:Sve}});var va=O((vit,fA)=>{function nK(r){let e=new globalThis.AbortController;function t(){e.abort();for(let n of r)!n||!n.removeEventListener||n.removeEventListener("abort",t)}for(let n of r)if(!(!n||!n.addEventListener)){if(n.aborted){t();break}n.addEventListener("abort",t)}return e.signal}fA.exports=nK;fA.exports.anySignal=nK});var RK=O((qot,vA)=>{var zot=function(){typeof vA<"u"&&(vA.exports=E);var r=24*3600,e=3200,t=(365*400+97)*e/400,n=r*t,i=n*1e3,o=1e3*1e4*1e4*r,s=16777216,a=65536*65536,c=1e3*1e3,u=1e3*1e3*1e3,l="000000000",d=Math.trunc||te,h=E.prototype;E.fromDate=T,E.fromInt64BE=q(0,1,2,3,0,4),E.fromInt64LE=q(3,2,1,0,4,0),E.fromString=v,E.fromTimeT=I,h.year=0,h.time=0,h.nano=0,h.addNano=b,h.getNano=x,h.getTimeT=M,h.getYear=S,h.toDate=g,h.toJSON=U,h.toString=j,h.writeInt64BE=D(0,1,2,3,0,4),h.writeInt64LE=D(3,2,1,0,4,0);var f="%Y-%m-%dT%H:%M:%S.%NZ",m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return E;function E(le,_e,we){var xe=this;if(!(xe instanceof E))return new E(le,_e,we);xe.time=+le||0,xe.nano=+_e||0,xe.year=+we||0,p(xe)}function S(){var le=this.toDate().getUTCFullYear();return le+this.year}function p(le){var _e=le.year,we=le.time,xe=le.nano,N,A;if(xe<0||c<=xe){var ne=Math.floor(xe/c);xe-=ne*c,we+=ne,N=1}var G=_e%e;if(we<-o||o<we||G){A=d(we/i),A&&(_e+=A*e,we-=A*i);var Te=y(we);Te.setUTCFullYear(G+Te.getUTCFullYear()),_e-=G,we=+Te,A=d(_e/e);var ze=we+A*i;A&&-o<=ze&&ze<=o&&(_e-=A*e,we=ze),N=1}return N&&(le.year=_e,le.time=we,le.nano=xe),le}function g(){var le=p(this);return y(le.time)}function y(le){var _e=new Date(0);return _e.setTime(le),_e}function b(le){return this.nano+=+le||0,this}function x(){var le=p(this);return(le.time%1e3*c+ +le.nano+u)%u}function v(le){var _e,we=new E;le+="";var xe=le.replace(/^\s*[+\-]?\d+/,function(N){var A=+N,ne=1970+(A-1970)%400;return we.year=A-ne,ne}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(N,A,ne){return A<0&&(ne*=-1),_e=(+A*60+ +ne)*6e4,""}).replace(/\.\d+$/,function(N){return we.nano=+(N+l).substr(1,9),""}).split(/\D+/);if(xe.length>1?xe[1]--:xe[1]=0,we.time=_e=Date.UTC.apply(Date,xe)-(_e||0),isNaN(_e))throw new TypeError("Invalid Date");return p(we)}function T(le){return new E(+le)}function I(le){return R(le,0)}function R(le,_e){_e|=0,_e*=a,le=+le||0;var we=d(_e/n)+d(le/n),xe=_e%n+le%n,N=d(xe/n);return N&&(we+=N,xe-=N*n),new E(xe*1e3,0,we*e)}function M(){var le=p(this),_e=Math.floor(le.time/1e3),we=le.year;return we&&(_e+=we*t*r/e),_e}function U(){return this.toString().replace(/0{1,6}Z$/,"Z")}function j(le){var _e=this,we=_e.toDate(),xe={H:ze,L:xt,M:rt,N:lr,S:bt,Y:A,a:Cr,b:oi,d:G,e:Te,m:ne,s:rh};return N(le||f);function N(bi){return bi.replace(/%./g,function($0){var ju=$0[1],f9=_[ju],h9=xe[ju];return f9?N(f9):h9?h9():$0})}function A(){var bi=_e.getYear();return bi>999999?"+"+bi:bi>9999?"+"+Ue(bi,6):bi>=0?Ue(bi,4):bi>=-999999?"-"+Ue(-bi,6):bi}function ne(){return ue(we.getUTCMonth()+1)}function G(){return ue(we.getUTCDate())}function Te(){return pe(we.getUTCDate())}function ze(){return ue(we.getUTCHours())}function rt(){return ue(we.getUTCMinutes())}function bt(){return ue(we.getUTCSeconds())}function xt(){return Ue(we.getUTCMilliseconds(),3)}function lr(){return Ue(_e.getNano(),9)}function Cr(){return w[we.getUTCDay()]}function oi(){return m[we.getUTCMonth()]}function rh(){return _e.getTimeT()}}function D(le,_e,we,xe,N,A){return ne;function ne(Te,ze){var rt=p(this);Te||(Te=new Array(8)),V(Te,ze|=0);var bt=Math.floor(rt.time/1e3),xt=rt.year*(t*r/e),lr=d(xt/a)+d(bt/a),Cr=xt%a+bt%a,oi=Math.floor(Cr/a);return oi&&(lr+=oi,Cr-=oi*a),G(Te,ze+N,lr),G(Te,ze+A,Cr),Te}function G(Te,ze,rt){Te[ze+le]=rt>>24&255,Te[ze+_e]=rt>>16&255,Te[ze+we]=rt>>8&255,Te[ze+xe]=rt&255}}function q(le,_e,we,xe,N,A){return ne;function ne(Te,ze){V(Te,ze|=0);var rt=G(Te,ze+N),bt=G(Te,ze+A);return R(bt,rt)}function G(Te,ze){return Te[ze+le]*s+(Te[ze+_e]<<16|Te[ze+we]<<8|Te[ze+xe])}}function V(le,_e){var we=le&&le.length;if(we==null)throw new TypeError("Invalid Buffer");if(we<_e+8)throw new RangeError("Out of range")}function te(le){var _e=le-le%1;return _e===0&&(le<0||le===0&&1/le!==1/0)?-0:_e}function pe(le){return(le>9?"":" ")+(le|0)}function ue(le){return(le>9?"":"0")+(le|0)}function Ue(le,_e){return(l+(le|0)).substr(-_e)}}()});var Kt=O(($ot,kK)=>{kK.exports={options:{usePureJavaScript:!1}}});var NK=O((Kot,DK)=>{var EA={};DK.exports=EA;var PK={};EA.encode=function(r,e,t){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(t!==void 0&&typeof t!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(r instanceof Uint8Array))n=qve(r,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<r.length;++i){for(var c=0,u=r[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;r[i]===0&&i<r.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(t){var l=new RegExp(".{1,"+t+"}","g");n=n.match(l).join(`\r
`)}return n};EA.decode=function(r,e){if(typeof r!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var t=PK[e];if(!t){t=PK[e]=[];for(var n=0;n<e.length;++n)t[e.charCodeAt(n)]=n}r=r.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<r.length;n++){var a=t[r.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;r[l]===o&&l<r.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function qve(r,e){var t=0,n=e.length,i=e.charAt(0),o=[0];for(t=0;t<r.length();++t){for(var s=0,a=r.at(t);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(t=0;r.at(t)===0&&t<r.length()-1;++t)c+=i;for(t=o.length-1;t>=0;--t)c+=e[o[t]];return c}});var Tr=O((jot,MK)=>{var OK=Kt(),LK=NK(),Y=MK.exports=OK.util=OK.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Y.nextTick=process.nextTick,typeof setImmediate=="function"?Y.setImmediate=setImmediate:Y.setImmediate=Y.nextTick;return}if(typeof setImmediate=="function"){Y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Y.nextTick=function(a){return setImmediate(a)};return}if(Y.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===r){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(l){l()})}};var s=a,r="forge.setImmediate",e=[];Y.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(r,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var t=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Y.setImmediate;Y.setImmediate=function(c){Date.now()-t>15?(t=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}Y.nextTick=Y.setImmediate})();Y.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Y.globalScope=function(){return Y.isNodejs?globalThis:typeof self>"u"?window:self}();Y.isArray=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};Y.isArrayBuffer=function(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer};Y.isArrayBufferView=function(r){return r&&Y.isArrayBuffer(r.buffer)&&r.byteLength!==void 0};function Hh(r){if(!(r===8||r===16||r===24||r===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+r)}Y.ByteBuffer=xA;function xA(r){if(this.data="",this.read=0,typeof r=="string")this.data=r;else if(Y.isArrayBuffer(r)||Y.isArrayBufferView(r))if(typeof Buffer<"u"&&r instanceof Buffer)this.data=r.toString("binary");else{var e=new Uint8Array(r);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var t=0;t<e.length;++t)this.putByte(e[t])}}else(r instanceof xA||typeof r=="object"&&typeof r.data=="string"&&typeof r.read=="number")&&(this.data=r.data,this.read=r.read);this._constructedStringLength=0}Y.ByteStringBuffer=xA;var $ve=4096;Y.ByteStringBuffer.prototype._optimizeConstructedString=function(r){this._constructedStringLength+=r,this._constructedStringLength>$ve&&(this.data.substr(0,1),this._constructedStringLength=0)};Y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Y.ByteStringBuffer.prototype.putByte=function(r){return this.putBytes(String.fromCharCode(r))};Y.ByteStringBuffer.prototype.fillWithByte=function(r,e){r=String.fromCharCode(r);for(var t=this.data;e>0;)e&1&&(t+=r),e>>>=1,e>0&&(r+=r);return this.data=t,this._optimizeConstructedString(e),this};Y.ByteStringBuffer.prototype.putBytes=function(r){return this.data+=r,this._optimizeConstructedString(r.length),this};Y.ByteStringBuffer.prototype.putString=function(r){return this.putBytes(Y.encodeUtf8(r))};Y.ByteStringBuffer.prototype.putInt16=function(r){return this.putBytes(String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};Y.ByteStringBuffer.prototype.putInt24=function(r){return this.putBytes(String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};Y.ByteStringBuffer.prototype.putInt32=function(r){return this.putBytes(String.fromCharCode(r>>24&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};Y.ByteStringBuffer.prototype.putInt16Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255))};Y.ByteStringBuffer.prototype.putInt24Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r>>16&255))};Y.ByteStringBuffer.prototype.putInt32Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>24&255))};Y.ByteStringBuffer.prototype.putInt=function(r,e){Hh(e);var t="";do e-=8,t+=String.fromCharCode(r>>e&255);while(e>0);return this.putBytes(t)};Y.ByteStringBuffer.prototype.putSignedInt=function(r,e){return r<0&&(r+=2<<e-1),this.putInt(r,e)};Y.ByteStringBuffer.prototype.putBuffer=function(r){return this.putBytes(r.getBytes())};Y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Y.ByteStringBuffer.prototype.getInt16=function(){var r=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,r};Y.ByteStringBuffer.prototype.getInt24=function(){var r=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,r};Y.ByteStringBuffer.prototype.getInt32=function(){var r=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,r};Y.ByteStringBuffer.prototype.getInt16Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,r};Y.ByteStringBuffer.prototype.getInt24Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,r};Y.ByteStringBuffer.prototype.getInt32Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,r};Y.ByteStringBuffer.prototype.getInt=function(r){Hh(r);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),r-=8;while(r>0);return e};Y.ByteStringBuffer.prototype.getSignedInt=function(r){var e=this.getInt(r),t=2<<r-2;return e>=t&&(e-=t<<1),e};Y.ByteStringBuffer.prototype.getBytes=function(r){var e;return r?(r=Math.min(this.length(),r),e=this.data.slice(this.read,this.read+r),this.read+=r):r===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Y.ByteStringBuffer.prototype.bytes=function(r){return typeof r>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+r)};Y.ByteStringBuffer.prototype.at=function(r){return this.data.charCodeAt(this.read+r)};Y.ByteStringBuffer.prototype.setAt=function(r,e){return this.data=this.data.substr(0,this.read+r)+String.fromCharCode(e)+this.data.substr(this.read+r+1),this};Y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Y.ByteStringBuffer.prototype.copy=function(){var r=Y.createBuffer(this.data);return r.read=this.read,r};Y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Y.ByteStringBuffer.prototype.truncate=function(r){var e=Math.max(0,this.length()-r);return this.data=this.data.substr(this.read,e),this.read=0,this};Y.ByteStringBuffer.prototype.toHex=function(){for(var r="",e=this.read;e<this.data.length;++e){var t=this.data.charCodeAt(e);t<16&&(r+="0"),r+=t.toString(16)}return r};Y.ByteStringBuffer.prototype.toString=function(){return Y.decodeUtf8(this.bytes())};function Kve(r,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var t=Y.isArrayBuffer(r),n=Y.isArrayBufferView(r);if(t||n){t?this.data=new DataView(r):this.data=new DataView(r.buffer,r.byteOffset,r.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,r!=null&&this.putBytes(r),"writeOffset"in e&&(this.write=e.writeOffset)}Y.DataBuffer=Kve;Y.DataBuffer.prototype.length=function(){return this.write-this.read};Y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Y.DataBuffer.prototype.accommodate=function(r,e){if(this.length()>=r)return this;e=Math.max(e||this.growSize,r);var t=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(t),this.data=new DataView(n.buffer),this};Y.DataBuffer.prototype.putByte=function(r){return this.accommodate(1),this.data.setUint8(this.write++,r),this};Y.DataBuffer.prototype.fillWithByte=function(r,e){this.accommodate(e);for(var t=0;t<e;++t)this.data.setUint8(r);return this};Y.DataBuffer.prototype.putBytes=function(r,e){if(Y.isArrayBufferView(r)){var t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),n=t.byteLength-t.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(t),this.write+=n,this}if(Y.isArrayBuffer(r)){var t=new Uint8Array(r);this.accommodate(t.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(t,this.write),this.write+=t.byteLength,this}if(r instanceof Y.DataBuffer||typeof r=="object"&&typeof r.read=="number"&&typeof r.write=="number"&&Y.isArrayBufferView(r.data)){var t=new Uint8Array(r.data.byteLength,r.read,r.length());this.accommodate(t.byteLength);var i=new Uint8Array(r.data.byteLength,this.write);return i.set(t),this.write+=t.byteLength,this}if(r instanceof Y.ByteStringBuffer&&(r=r.data,e="binary"),e=e||"binary",typeof r=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(r.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.hex.decode(r,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(r.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.base64.decode(r,o,this.write),this;if(e==="utf8"&&(r=Y.encodeUtf8(r),e="binary"),e==="binary"||e==="raw")return this.accommodate(r.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Y.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(r.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Y.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+r)};Y.DataBuffer.prototype.putBuffer=function(r){return this.putBytes(r),r.clear(),this};Y.DataBuffer.prototype.putString=function(r){return this.putBytes(r,"utf16")};Y.DataBuffer.prototype.putInt16=function(r){return this.accommodate(2),this.data.setInt16(this.write,r),this.write+=2,this};Y.DataBuffer.prototype.putInt24=function(r){return this.accommodate(3),this.data.setInt16(this.write,r>>8&65535),this.data.setInt8(this.write,r>>16&255),this.write+=3,this};Y.DataBuffer.prototype.putInt32=function(r){return this.accommodate(4),this.data.setInt32(this.write,r),this.write+=4,this};Y.DataBuffer.prototype.putInt16Le=function(r){return this.accommodate(2),this.data.setInt16(this.write,r,!0),this.write+=2,this};Y.DataBuffer.prototype.putInt24Le=function(r){return this.accommodate(3),this.data.setInt8(this.write,r>>16&255),this.data.setInt16(this.write,r>>8&65535,!0),this.write+=3,this};Y.DataBuffer.prototype.putInt32Le=function(r){return this.accommodate(4),this.data.setInt32(this.write,r,!0),this.write+=4,this};Y.DataBuffer.prototype.putInt=function(r,e){Hh(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,r>>e&255);while(e>0);return this};Y.DataBuffer.prototype.putSignedInt=function(r,e){return Hh(e),this.accommodate(e/8),r<0&&(r+=2<<e-1),this.putInt(r,e)};Y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Y.DataBuffer.prototype.getInt16=function(){var r=this.data.getInt16(this.read);return this.read+=2,r};Y.DataBuffer.prototype.getInt24=function(){var r=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,r};Y.DataBuffer.prototype.getInt32=function(){var r=this.data.getInt32(this.read);return this.read+=4,r};Y.DataBuffer.prototype.getInt16Le=function(){var r=this.data.getInt16(this.read,!0);return this.read+=2,r};Y.DataBuffer.prototype.getInt24Le=function(){var r=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,r};Y.DataBuffer.prototype.getInt32Le=function(){var r=this.data.getInt32(this.read,!0);return this.read+=4,r};Y.DataBuffer.prototype.getInt=function(r){Hh(r);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),r-=8;while(r>0);return e};Y.DataBuffer.prototype.getSignedInt=function(r){var e=this.getInt(r),t=2<<r-2;return e>=t&&(e-=t<<1),e};Y.DataBuffer.prototype.getBytes=function(r){var e;return r?(r=Math.min(this.length(),r),e=this.data.slice(this.read,this.read+r),this.read+=r):r===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Y.DataBuffer.prototype.bytes=function(r){return typeof r>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+r)};Y.DataBuffer.prototype.at=function(r){return this.data.getUint8(this.read+r)};Y.DataBuffer.prototype.setAt=function(r,e){return this.data.setUint8(r,e),this};Y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Y.DataBuffer.prototype.copy=function(){return new Y.DataBuffer(this)};Y.DataBuffer.prototype.compact=function(){if(this.read>0){var r=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(r.byteLength);e.set(r),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Y.DataBuffer.prototype.truncate=function(r){return this.write=Math.max(0,this.length()-r),this.read=Math.min(this.read,this.write),this};Y.DataBuffer.prototype.toHex=function(){for(var r="",e=this.read;e<this.data.byteLength;++e){var t=this.data.getUint8(e);t<16&&(r+="0"),r+=t.toString(16)}return r};Y.DataBuffer.prototype.toString=function(r){var e=new Uint8Array(this.data,this.read,this.length());if(r=r||"utf8",r==="binary"||r==="raw")return Y.binary.raw.encode(e);if(r==="hex")return Y.binary.hex.encode(e);if(r==="base64")return Y.binary.base64.encode(e);if(r==="utf8")return Y.text.utf8.decode(e);if(r==="utf16")return Y.text.utf16.decode(e);throw new Error("Invalid encoding: "+r)};Y.createBuffer=function(r,e){return e=e||"raw",r!==void 0&&e==="utf8"&&(r=Y.encodeUtf8(r)),new Y.ByteBuffer(r)};Y.fillString=function(r,e){for(var t="";e>0;)e&1&&(t+=r),e>>>=1,e>0&&(r+=r);return t};Y.xorBytes=function(r,e,t){for(var n="",i="",o="",s=0,a=0;t>0;--t,++s)i=r.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};Y.hexToBytes=function(r){var e="",t=0;for(r.length&!0&&(t=1,e+=String.fromCharCode(parseInt(r[0],16)));t<r.length;t+=2)e+=String.fromCharCode(parseInt(r.substr(t,2),16));return e};Y.bytesToHex=function(r){return Y.createBuffer(r).toHex()};Y.int32ToBytes=function(r){return String.fromCharCode(r>>24&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255)};var w2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b2=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],BK="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Y.encode64=function(r,e){for(var t="",n="",i,o,s,a=0;a<r.length;)i=r.charCodeAt(a++),o=r.charCodeAt(a++),s=r.charCodeAt(a++),t+=w2.charAt(i>>2),t+=w2.charAt((i&3)<<4|o>>4),isNaN(o)?t+="==":(t+=w2.charAt((o&15)<<2|s>>6),t+=isNaN(s)?"=":w2.charAt(s&63)),e&&t.length>e&&(n+=t.substr(0,e)+`\r
`,t=t.substr(e));return n+=t,n};Y.decode64=function(r){r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",t,n,i,o,s=0;s<r.length;)t=b2[r.charCodeAt(s++)-43],n=b2[r.charCodeAt(s++)-43],i=b2[r.charCodeAt(s++)-43],o=b2[r.charCodeAt(s++)-43],e+=String.fromCharCode(t<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Y.encodeUtf8=function(r){return unescape(encodeURIComponent(r))};Y.decodeUtf8=function(r){return decodeURIComponent(escape(r))};Y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:LK.encode,decode:LK.decode}};Y.binary.raw.encode=function(r){return String.fromCharCode.apply(null,r)};Y.binary.raw.decode=function(r,e,t){var n=e;n||(n=new Uint8Array(r.length)),t=t||0;for(var i=t,o=0;o<r.length;++o)n[i++]=r.charCodeAt(o);return e?i-t:n};Y.binary.hex.encode=Y.bytesToHex;Y.binary.hex.decode=function(r,e,t){var n=e;n||(n=new Uint8Array(Math.ceil(r.length/2))),t=t||0;var i=0,o=t;for(r.length&1&&(i=1,n[o++]=parseInt(r[0],16));i<r.length;i+=2)n[o++]=parseInt(r.substr(i,2),16);return e?o-t:n};Y.binary.base64.encode=function(r,e){for(var t="",n="",i,o,s,a=0;a<r.byteLength;)i=r[a++],o=r[a++],s=r[a++],t+=w2.charAt(i>>2),t+=w2.charAt((i&3)<<4|o>>4),isNaN(o)?t+="==":(t+=w2.charAt((o&15)<<2|s>>6),t+=isNaN(s)?"=":w2.charAt(s&63)),e&&t.length>e&&(n+=t.substr(0,e)+`\r
`,t=t.substr(e));return n+=t,n};Y.binary.base64.decode=function(r,e,t){var n=e;n||(n=new Uint8Array(Math.ceil(r.length/4)*3)),r=r.replace(/[^A-Za-z0-9\+\/\=]/g,""),t=t||0;for(var i,o,s,a,c=0,u=t;c<r.length;)i=b2[r.charCodeAt(c++)-43],o=b2[r.charCodeAt(c++)-43],s=b2[r.charCodeAt(c++)-43],a=b2[r.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-t:n.subarray(0,u)};Y.binary.base58.encode=function(r,e){return Y.binary.baseN.encode(r,BK,e)};Y.binary.base58.decode=function(r,e){return Y.binary.baseN.decode(r,BK,e)};Y.text={utf8:{},utf16:{}};Y.text.utf8.encode=function(r,e,t){r=Y.encodeUtf8(r);var n=e;n||(n=new Uint8Array(r.length)),t=t||0;for(var i=t,o=0;o<r.length;++o)n[i++]=r.charCodeAt(o);return e?i-t:n};Y.text.utf8.decode=function(r){return Y.decodeUtf8(String.fromCharCode.apply(null,r))};Y.text.utf16.encode=function(r,e,t){var n=e;n||(n=new Uint8Array(r.length*2));var i=new Uint16Array(n.buffer);t=t||0;for(var o=t,s=t,a=0;a<r.length;++a)i[s++]=r.charCodeAt(a),o+=2;return e?o-t:n};Y.text.utf16.decode=function(r){return String.fromCharCode.apply(null,new Uint16Array(r.buffer))};Y.deflate=function(r,e,t){if(e=Y.decode64(r.deflate(Y.encode64(e)).rval),t){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Y.inflate=function(r,e,t){var n=r.inflate(Y.encode64(e)).rval;return n===null?null:Y.decode64(n)};var SA=function(r,e,t){if(!r)throw new Error("WebStorage not available.");var n;if(t===null?n=r.removeItem(e):(t=Y.encode64(JSON.stringify(t)),n=r.setItem(e,t)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},TA=function(r,e){if(!r)throw new Error("WebStorage not available.");var t=r.getItem(e);if(r.init)if(t.rval===null){if(t.error){var n=new Error(t.error.message);throw n.id=t.error.id,n.name=t.error.name,n}t=null}else t=t.rval;return t!==null&&(t=JSON.parse(Y.decode64(t))),t},jve=function(r,e,t,n){var i=TA(r,e);i===null&&(i={}),i[t]=n,SA(r,e,i)},Gve=function(r,e,t){var n=TA(r,e);return n!==null&&(n=t in n?n[t]:null),n},Hve=function(r,e,t){var n=TA(r,e);if(n!==null&&t in n){delete n[t];var i=!0;for(var o in n){i=!1;break}i&&(n=null),SA(r,e,n)}},Wve=function(r,e){SA(r,e,null)},km=function(r,e,t){var n=null;typeof t>"u"&&(t=["web","flash"]);var i,o=!1,s=null;for(var a in t){i=t[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=r.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=r.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};Y.setItem=function(r,e,t,n,i){km(jve,arguments,i)};Y.getItem=function(r,e,t,n){return km(Gve,arguments,n)};Y.removeItem=function(r,e,t,n){km(Hve,arguments,n)};Y.clearItems=function(r,e,t){km(Wve,arguments,t)};Y.isEmpty=function(r){for(var e in r)if(r.hasOwnProperty(e))return!1;return!0};Y.format=function(r){for(var e=/%./g,t,n,i=0,o=[],s=0;t=e.exec(r);){n=r.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(r.substring(s)),o.join("")};Y.formatNumber=function(r,e,t,n){var i=r,o=isNaN(e=Math.abs(e))?2:e,s=t===void 0?",":t,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};Y.formatSize=function(r){return r>=1073741824?r=Y.formatNumber(r/1073741824,2,".","")+" GiB":r>=1048576?r=Y.formatNumber(r/1048576,2,".","")+" MiB":r>=1024?r=Y.formatNumber(r/1024,0)+" KiB":r=Y.formatNumber(r,0)+" bytes",r};Y.bytesFromIP=function(r){return r.indexOf(".")!==-1?Y.bytesFromIPv4(r):r.indexOf(":")!==-1?Y.bytesFromIPv6(r):null};Y.bytesFromIPv4=function(r){if(r=r.split("."),r.length!==4)return null;for(var e=Y.createBuffer(),t=0;t<r.length;++t){var n=parseInt(r[t],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Y.bytesFromIPv6=function(r){var e=0;r=r.split(":").filter(function(s){return s.length===0&&++e,!0});for(var t=(8-r.length+e)*2,n=Y.createBuffer(),i=0;i<8;++i){if(!r[i]||r[i].length===0){n.fillWithByte(0,t),t=0;continue}var o=Y.hexToBytes(r[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Y.bytesToIP=function(r){return r.length===4?Y.bytesToIPv4(r):r.length===16?Y.bytesToIPv6(r):null};Y.bytesToIPv4=function(r){if(r.length!==4)return null;for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e.join(".")};Y.bytesToIPv6=function(r){if(r.length!==16)return null;for(var e=[],t=[],n=0,i=0;i<r.length;i+=2){for(var o=Y.bytesToHex(r[i]+r[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=t[t.length-1],a=e.length;!s||a!==s.end+1?t.push({start:a,end:a}):(s.end=a,s.end-s.start>t[n].end-t[n].start&&(n=t.length-1))}e.push(o)}if(t.length>0){var c=t[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Y.estimateCores=function(r,e){if(typeof r=="function"&&(e=r,r={}),r=r||{},"cores"in Y&&!r.update)return e(null,Y.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Y.cores=navigator.hardwareConcurrency,e(null,Y.cores);if(typeof Worker>"u")return Y.cores=1,e(null,Y.cores);if(typeof Blob>"u")return Y.cores=2,e(null,Y.cores);var t=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(l,d){return l+d},0)/s.length);return Y.cores=Math.max(1,u),URL.revokeObjectURL(t),e(null,Y.cores)}i(c,function(l,d){s.push(o(c,d)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],l=0;l<s;++l){var d=new Worker(t);d.addEventListener("message",function(h){if(u.push(h.data),u.length===s){for(var f=0;f<s;++f)c[f].terminate();a(null,u)}}),c.push(d)}for(var l=0;l<s;++l)c[l].postMessage(l)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var l=a[u],d=c[u]=[],h=0;h<s;++h)if(u!==h){var f=a[h];(l.st>f.st&&l.st<f.et||f.st>l.st&&f.st<l.et)&&d.push(h)}return c.reduce(function(m,w){return Math.max(m,w.length)},0)}}});var cf=O((Got,UK)=>{var Wh=Kt();Wh.pki=Wh.pki||{};var IA=UK.exports=Wh.pki.oids=Wh.oids=Wh.oids||{};function ye(r,e){IA[r]=e,IA[e]=r}function hr(r,e){IA[r]=e}ye("1.2.840.113549.1.1.1","rsaEncryption");ye("1.2.840.113549.1.1.4","md5WithRSAEncryption");ye("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ye("1.2.840.113549.1.1.7","RSAES-OAEP");ye("1.2.840.113549.1.1.8","mgf1");ye("1.2.840.113549.1.1.9","pSpecified");ye("1.2.840.113549.1.1.10","RSASSA-PSS");ye("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ye("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ye("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ye("1.3.101.112","EdDSA25519");ye("1.2.840.10040.4.3","dsa-with-sha1");ye("1.3.14.3.2.7","desCBC");ye("1.3.14.3.2.26","sha1");ye("1.3.14.3.2.29","sha1WithRSASignature");ye("2.16.840.1.101.3.4.2.1","sha256");ye("2.16.840.1.101.3.4.2.2","sha384");ye("2.16.840.1.101.3.4.2.3","sha512");ye("2.16.840.1.101.3.4.2.4","sha224");ye("2.16.840.1.101.3.4.2.5","sha512-224");ye("2.16.840.1.101.3.4.2.6","sha512-256");ye("1.2.840.113549.2.2","md2");ye("1.2.840.113549.2.5","md5");ye("1.2.840.113549.1.7.1","data");ye("1.2.840.113549.1.7.2","signedData");ye("1.2.840.113549.1.7.3","envelopedData");ye("1.2.840.113549.1.7.4","signedAndEnvelopedData");ye("1.2.840.113549.1.7.5","digestedData");ye("1.2.840.113549.1.7.6","encryptedData");ye("1.2.840.113549.1.9.1","emailAddress");ye("1.2.840.113549.1.9.2","unstructuredName");ye("1.2.840.113549.1.9.3","contentType");ye("1.2.840.113549.1.9.4","messageDigest");ye("1.2.840.113549.1.9.5","signingTime");ye("1.2.840.113549.1.9.6","counterSignature");ye("1.2.840.113549.1.9.7","challengePassword");ye("1.2.840.113549.1.9.8","unstructuredAddress");ye("1.2.840.113549.1.9.14","extensionRequest");ye("1.2.840.113549.1.9.20","friendlyName");ye("1.2.840.113549.1.9.21","localKeyId");ye("1.2.840.113549.1.9.22.1","x509Certificate");ye("1.2.840.113549.1.12.10.1.1","keyBag");ye("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ye("1.2.840.113549.1.12.10.1.3","certBag");ye("1.2.840.113549.1.12.10.1.4","crlBag");ye("1.2.840.113549.1.12.10.1.5","secretBag");ye("1.2.840.113549.1.12.10.1.6","safeContentsBag");ye("1.2.840.113549.1.5.13","pkcs5PBES2");ye("1.2.840.113549.1.5.12","pkcs5PBKDF2");ye("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ye("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ye("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ye("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ye("1.2.840.113549.2.7","hmacWithSHA1");ye("1.2.840.113549.2.8","hmacWithSHA224");ye("1.2.840.113549.2.9","hmacWithSHA256");ye("1.2.840.113549.2.10","hmacWithSHA384");ye("1.2.840.113549.2.11","hmacWithSHA512");ye("1.2.840.113549.3.7","des-EDE3-CBC");ye("2.16.840.1.101.3.4.1.2","aes128-CBC");ye("2.16.840.1.101.3.4.1.22","aes192-CBC");ye("2.16.840.1.101.3.4.1.42","aes256-CBC");ye("2.5.4.3","commonName");ye("2.5.4.4","surname");ye("2.5.4.5","serialNumber");ye("2.5.4.6","countryName");ye("2.5.4.7","localityName");ye("2.5.4.8","stateOrProvinceName");ye("2.5.4.9","streetAddress");ye("2.5.4.10","organizationName");ye("2.5.4.11","organizationalUnitName");ye("2.5.4.12","title");ye("2.5.4.13","description");ye("2.5.4.15","businessCategory");ye("2.5.4.17","postalCode");ye("2.5.4.42","givenName");ye("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ye("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ye("2.16.840.1.113730.1.1","nsCertType");ye("2.16.840.1.113730.1.13","nsComment");hr("2.5.29.1","authorityKeyIdentifier");hr("2.5.29.2","keyAttributes");hr("2.5.29.3","certificatePolicies");hr("2.5.29.4","keyUsageRestriction");hr("2.5.29.5","policyMapping");hr("2.5.29.6","subtreesConstraint");hr("2.5.29.7","subjectAltName");hr("2.5.29.8","issuerAltName");hr("2.5.29.9","subjectDirectoryAttributes");hr("2.5.29.10","basicConstraints");hr("2.5.29.11","nameConstraints");hr("2.5.29.12","policyConstraints");hr("2.5.29.13","basicConstraints");ye("2.5.29.14","subjectKeyIdentifier");ye("2.5.29.15","keyUsage");hr("2.5.29.16","privateKeyUsagePeriod");ye("2.5.29.17","subjectAltName");ye("2.5.29.18","issuerAltName");ye("2.5.29.19","basicConstraints");hr("2.5.29.20","cRLNumber");hr("2.5.29.21","cRLReason");hr("2.5.29.22","expirationDate");hr("2.5.29.23","instructionCode");hr("2.5.29.24","invalidityDate");hr("2.5.29.25","cRLDistributionPoints");hr("2.5.29.26","issuingDistributionPoint");hr("2.5.29.27","deltaCRLIndicator");hr("2.5.29.28","issuingDistributionPoint");hr("2.5.29.29","certificateIssuer");hr("2.5.29.30","nameConstraints");ye("2.5.29.31","cRLDistributionPoints");ye("2.5.29.32","certificatePolicies");hr("2.5.29.33","policyMappings");hr("2.5.29.34","policyConstraints");ye("2.5.29.35","authorityKeyIdentifier");hr("2.5.29.36","policyConstraints");ye("2.5.29.37","extKeyUsage");hr("2.5.29.46","freshestCRL");hr("2.5.29.54","inhibitAnyPolicy");ye("1.3.6.1.4.1.11129.2.4.2","timestampList");ye("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ye("1.3.6.1.5.5.7.3.1","serverAuth");ye("1.3.6.1.5.5.7.3.2","clientAuth");ye("1.3.6.1.5.5.7.3.3","codeSigning");ye("1.3.6.1.5.5.7.3.4","emailProtection");ye("1.3.6.1.5.5.7.3.8","timeStamping")});var _2=O((Hot,VK)=>{var kr=Kt();Tr();cf();var Pe=VK.exports=kr.asn1=kr.asn1||{};Pe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Pe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Pe.create=function(r,e,t,n,i){if(kr.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:r,type:e,constructed:t,composed:t||kr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=Pe.copy(a)),a};Pe.copy=function(r,e){var t;if(kr.util.isArray(r)){t=[];for(var n=0;n<r.length;++n)t.push(Pe.copy(r[n],e));return t}return typeof r=="string"?r:(t={tagClass:r.tagClass,type:r.type,constructed:r.constructed,composed:r.composed,value:Pe.copy(r.value,e)},e&&!e.excludeBitStringContents&&(t.bitStringContents=r.bitStringContents),t)};Pe.equals=function(r,e,t){if(kr.util.isArray(r)){if(!kr.util.isArray(e)||r.length!==e.length)return!1;for(var n=0;n<r.length;++n)if(!Pe.equals(r[n],e[n]))return!1;return!0}if(typeof r!=typeof e)return!1;if(typeof r=="string")return r===e;var i=r.tagClass===e.tagClass&&r.type===e.type&&r.constructed===e.constructed&&r.composed===e.composed&&Pe.equals(r.value,e.value);return t&&t.includeBitStringContents&&(i=i&&r.bitStringContents===e.bitStringContents),i};Pe.getBerValueLength=function(r){var e=r.getByte();if(e!==128){var t,n=e&128;return n?t=r.getInt((e&127)<<3):t=e,t}};function Yh(r,e,t){if(t>e){var n=new Error("Too few bytes to parse DER.");throw n.available=r.length(),n.remaining=e,n.requested=t,n}}var Yve=function(r,e){var t=r.getByte();if(e--,t!==128){var n,i=t&128;if(!i)n=t;else{var o=t&127;Yh(r,e,o),n=r.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Pe.fromDer=function(r,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof r=="string"&&(r=kr.util.createBuffer(r));var t=r.length(),n=Pm(r,r.length(),0,e);if(e.parseAllBytes&&r.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=t,i.remaining=r.length(),i}return n};function Pm(r,e,t,n){var i;Yh(r,e,2);var o=r.getByte();e--;var s=o&192,a=o&31;i=r.length();var c=Yve(r,e);if(e-=i-r.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=r.length(),u.remaining=e,u.requested=c,u}c=e}var l,d,h=(o&32)===32;if(h)if(l=[],c===void 0)for(;;){if(Yh(r,e,2),r.bytes(2)==="\0\0"){r.getBytes(2),e-=2;break}i=r.length(),l.push(Pm(r,e,t+1,n)),e-=i-r.length()}else for(;c>0;)i=r.length(),l.push(Pm(r,c,t+1,n)),e-=i-r.length(),c-=i-r.length();if(l===void 0&&s===Pe.Class.UNIVERSAL&&a===Pe.Type.BITSTRING&&(d=r.bytes(c)),l===void 0&&n.decodeBitStrings&&s===Pe.Class.UNIVERSAL&&a===Pe.Type.BITSTRING&&c>1){var f=r.read,m=e,w=0;if(a===Pe.Type.BITSTRING&&(Yh(r,e,1),w=r.getByte(),e--),w===0)try{i=r.length();var _={strict:!0,decodeBitStrings:!0},E=Pm(r,e,t+1,_),S=i-r.length();e-=S,a==Pe.Type.BITSTRING&&S++;var p=E.tagClass;S===c&&(p===Pe.Class.UNIVERSAL||p===Pe.Class.CONTEXT_SPECIFIC)&&(l=[E])}catch{}l===void 0&&(r.read=f,e=m)}if(l===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===Pe.Type.BMPSTRING)for(l="";c>0;c-=2)Yh(r,e,2),l+=String.fromCharCode(r.getInt16()),e-=2;else l=r.getBytes(c),e-=c}var g=d===void 0?null:{bitStringContents:d};return Pe.create(s,a,h,l,g)}Pe.toDer=function(r){var e=kr.util.createBuffer(),t=r.tagClass|r.type,n=kr.util.createBuffer(),i=!1;if("bitStringContents"in r&&(i=!0,r.original&&(i=Pe.equals(r,r.original))),i)n.putBytes(r.bitStringContents);else if(r.composed){r.constructed?t|=32:n.putByte(0);for(var o=0;o<r.value.length;++o)r.value[o]!==void 0&&n.putBuffer(Pe.toDer(r.value[o]))}else if(r.type===Pe.Type.BMPSTRING)for(var o=0;o<r.value.length;++o)n.putInt16(r.value.charCodeAt(o));else r.type===Pe.Type.INTEGER&&r.value.length>1&&(r.value.charCodeAt(0)===0&&!(r.value.charCodeAt(1)&128)||r.value.charCodeAt(0)===255&&(r.value.charCodeAt(1)&128)===128)?n.putBytes(r.value.substr(1)):n.putBytes(r.value);if(e.putByte(t),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};Pe.oidToDer=function(r){var e=r.split("."),t=kr.util.createBuffer();t.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)t.putByte(i[c])}return t};Pe.derToOid=function(r){var e;typeof r=="string"&&(r=kr.util.createBuffer(r));var t=r.getByte();e=Math.floor(t/40)+"."+t%40;for(var n=0;r.length()>0;)t=r.getByte(),n=n<<7,t&128?n+=t&127:(e+="."+(n+t),n=0);return e};Pe.utcTimeToDate=function(r){var e=new Date,t=parseInt(r.substr(0,2),10);t=t>=50?1900+t:2e3+t;var n=parseInt(r.substr(2,2),10)-1,i=parseInt(r.substr(4,2),10),o=parseInt(r.substr(6,2),10),s=parseInt(r.substr(8,2),10),a=0;if(r.length>11){var c=r.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(r.substr(10,2),10),u+=2)}if(e.setUTCFullYear(t,n,i),e.setUTCHours(o,s,a,0),u&&(c=r.charAt(u),c==="+"||c==="-")){var l=parseInt(r.substr(u+1,2),10),d=parseInt(r.substr(u+4,2),10),h=l*60+d;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};Pe.generalizedTimeToDate=function(r){var e=new Date,t=parseInt(r.substr(0,4),10),n=parseInt(r.substr(4,2),10)-1,i=parseInt(r.substr(6,2),10),o=parseInt(r.substr(8,2),10),s=parseInt(r.substr(10,2),10),a=parseInt(r.substr(12,2),10),c=0,u=0,l=!1;r.charAt(r.length-1)==="Z"&&(l=!0);var d=r.length-5,h=r.charAt(d);if(h==="+"||h==="-"){var f=parseInt(r.substr(d+1,2),10),m=parseInt(r.substr(d+4,2),10);u=f*60+m,u*=6e4,h==="+"&&(u*=-1),l=!0}return r.charAt(14)==="."&&(c=parseFloat(r.substr(14),10)*1e3),l?(e.setUTCFullYear(t,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(t,n,i),e.setHours(o,s,a,c)),e};Pe.dateToUtcTime=function(r){if(typeof r=="string")return r;var e="",t=[];t.push((""+r.getUTCFullYear()).substr(2)),t.push(""+(r.getUTCMonth()+1)),t.push(""+r.getUTCDate()),t.push(""+r.getUTCHours()),t.push(""+r.getUTCMinutes()),t.push(""+r.getUTCSeconds());for(var n=0;n<t.length;++n)t[n].length<2&&(e+="0"),e+=t[n];return e+="Z",e};Pe.dateToGeneralizedTime=function(r){if(typeof r=="string")return r;var e="",t=[];t.push(""+r.getUTCFullYear()),t.push(""+(r.getUTCMonth()+1)),t.push(""+r.getUTCDate()),t.push(""+r.getUTCHours()),t.push(""+r.getUTCMinutes()),t.push(""+r.getUTCSeconds());for(var n=0;n<t.length;++n)t[n].length<2&&(e+="0"),e+=t[n];return e+="Z",e};Pe.integerToDer=function(r){var e=kr.util.createBuffer();if(r>=-128&&r<128)return e.putSignedInt(r,8);if(r>=-32768&&r<32768)return e.putSignedInt(r,16);if(r>=-8388608&&r<8388608)return e.putSignedInt(r,24);if(r>=-2147483648&&r<2147483648)return e.putSignedInt(r,32);var t=new Error("Integer too large; max is 32-bits.");throw t.integer=r,t};Pe.derToInteger=function(r){typeof r=="string"&&(r=kr.util.createBuffer(r));var e=r.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return r.getSignedInt(e)};Pe.validate=function(r,e,t,n){var i=!1;if((r.tagClass===e.tagClass||typeof e.tagClass>"u")&&(r.type===e.type||typeof e.type>"u"))if(r.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&kr.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,r.value[o]&&(i=Pe.validate(r.value[o],e.value[s],t,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+r.value.length+'"');if(i&&t&&(e.capture&&(t[e.capture]=r.value),e.captureAsn1&&(t[e.captureAsn1]=r),e.captureBitStringContents&&"bitStringContents"in r&&(t[e.captureBitStringContents]=r.bitStringContents),e.captureBitStringValue&&"bitStringContents"in r)){var a;if(r.bitStringContents.length<2)t[e.captureBitStringValue]="";else{var c=r.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");t[e.captureBitStringValue]=r.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+r.constructed+'"');else n&&(r.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+r.tagClass+'"'),r.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+r.type+'"'));return i};var FK=/[^\\u0000-\\u00ff]/;Pe.prettyPrint=function(r,e,t){var n="";e=e||0,t=t||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*t;++o)i+=" ";switch(n+=i+"Tag: ",r.tagClass){case Pe.Class.UNIVERSAL:n+="Universal:";break;case Pe.Class.APPLICATION:n+="Application:";break;case Pe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Pe.Class.PRIVATE:n+="Private:";break}if(r.tagClass===Pe.Class.UNIVERSAL)switch(n+=r.type,r.type){case Pe.Type.NONE:n+=" (None)";break;case Pe.Type.BOOLEAN:n+=" (Boolean)";break;case Pe.Type.INTEGER:n+=" (Integer)";break;case Pe.Type.BITSTRING:n+=" (Bit string)";break;case Pe.Type.OCTETSTRING:n+=" (Octet string)";break;case Pe.Type.NULL:n+=" (Null)";break;case Pe.Type.OID:n+=" (Object Identifier)";break;case Pe.Type.ODESC:n+=" (Object Descriptor)";break;case Pe.Type.EXTERNAL:n+=" (External or Instance of)";break;case Pe.Type.REAL:n+=" (Real)";break;case Pe.Type.ENUMERATED:n+=" (Enumerated)";break;case Pe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Pe.Type.UTF8:n+=" (UTF8)";break;case Pe.Type.ROID:n+=" (Relative Object Identifier)";break;case Pe.Type.SEQUENCE:n+=" (Sequence)";break;case Pe.Type.SET:n+=" (Set)";break;case Pe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Pe.Type.IA5String:n+=" (IA5String (ASCII))";break;case Pe.Type.UTCTIME:n+=" (UTC time)";break;case Pe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Pe.Type.BMPSTRING:n+=" (BMP String)";break}else n+=r.type;if(n+=`
`,n+=i+"Constructed: "+r.constructed+`
`,r.composed){for(var s=0,a="",o=0;o<r.value.length;++o)r.value[o]!==void 0&&(s+=1,a+=Pe.prettyPrint(r.value[o],e+1,t),o+1<r.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",r.type===Pe.Type.OID){var c=Pe.derToOid(r.value);n+=c,kr.pki&&kr.pki.oids&&c in kr.pki.oids&&(n+=" ("+kr.pki.oids[c]+") ")}if(r.type===Pe.Type.INTEGER)try{n+=Pe.derToInteger(r.value)}catch{n+="0x"+kr.util.bytesToHex(r.value)}else if(r.type===Pe.Type.BITSTRING){if(r.value.length>1?n+="0x"+kr.util.bytesToHex(r.value.slice(1)):n+="(none)",r.value.length>0){var u=r.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(r.type===Pe.Type.OCTETSTRING)FK.test(r.value)||(n+="("+r.value+") "),n+="0x"+kr.util.bytesToHex(r.value);else if(r.type===Pe.Type.UTF8)try{n+=kr.util.decodeUtf8(r.value)}catch(l){if(l.message==="URI malformed")n+="0x"+kr.util.bytesToHex(r.value)+" (malformed UTF8)";else throw l}else r.type===Pe.Type.PRINTABLESTRING||r.type===Pe.Type.IA5String?n+=r.value:FK.test(r.value)?n+="0x"+kr.util.bytesToHex(r.value):r.value.length===0?n+="[null]":n+=r.value}return n}});var CA=O((Wot,zK)=>{var Hn=Kt();Tr();zK.exports=Hn.cipher=Hn.cipher||{};Hn.cipher.algorithms=Hn.cipher.algorithms||{};Hn.cipher.createCipher=function(r,e){var t=r;if(typeof t=="string"&&(t=Hn.cipher.getAlgorithm(t),t&&(t=t())),!t)throw new Error("Unsupported algorithm: "+r);return new Hn.cipher.BlockCipher({algorithm:t,key:e,decrypt:!1})};Hn.cipher.createDecipher=function(r,e){var t=r;if(typeof t=="string"&&(t=Hn.cipher.getAlgorithm(t),t&&(t=t())),!t)throw new Error("Unsupported algorithm: "+r);return new Hn.cipher.BlockCipher({algorithm:t,key:e,decrypt:!0})};Hn.cipher.registerAlgorithm=function(r,e){r=r.toUpperCase(),Hn.cipher.algorithms[r]=e};Hn.cipher.getAlgorithm=function(r){return r=r.toUpperCase(),r in Hn.cipher.algorithms?Hn.cipher.algorithms[r]:null};var AA=Hn.cipher.BlockCipher=function(r){this.algorithm=r.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=r.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=r.decrypt,this.algorithm.initialize(r)};AA.prototype.start=function(r){r=r||{};var e={};for(var t in r)e[t]=r[t];e.decrypt=this._decrypt,this._finish=!1,this._input=Hn.util.createBuffer(),this.output=r.output||Hn.util.createBuffer(),this.mode.start(e)};AA.prototype.update=function(r){for(r&&this._input.putBuffer(r);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};AA.prototype.finish=function(r){r&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(t){return r(this.blockSize,t,!1)},this.mode.unpad=function(t){return r(this.blockSize,t,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var kA=O((Yot,qK)=>{var Wn=Kt();Tr();Wn.cipher=Wn.cipher||{};var Rt=qK.exports=Wn.cipher.modes=Wn.cipher.modes||{};Rt.ecb=function(r){r=r||{},this.name="ECB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Rt.ecb.prototype.start=function(r){};Rt.ecb.prototype.encrypt=function(r,e,t){if(r.length()<this.blockSize&&!(t&&r.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=r.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Rt.ecb.prototype.decrypt=function(r,e,t){if(r.length()<this.blockSize&&!(t&&r.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=r.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Rt.ecb.prototype.pad=function(r,e){var t=r.length()===this.blockSize?this.blockSize:this.blockSize-r.length();return r.fillWithByte(t,t),!0};Rt.ecb.prototype.unpad=function(r,e){if(e.overflow>0)return!1;var t=r.length(),n=r.at(t-1);return n>this.blockSize<<2?!1:(r.truncate(n),!0)};Rt.cbc=function(r){r=r||{},this.name="CBC",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Rt.cbc.prototype.start=function(r){if(r.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in r)this._iv=Dm(r.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Rt.cbc.prototype.encrypt=function(r,e,t){if(r.length()<this.blockSize&&!(t&&r.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^r.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Rt.cbc.prototype.decrypt=function(r,e,t){if(r.length()<this.blockSize&&!(t&&r.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=r.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Rt.cbc.prototype.pad=function(r,e){var t=r.length()===this.blockSize?this.blockSize:this.blockSize-r.length();return r.fillWithByte(t,t),!0};Rt.cbc.prototype.unpad=function(r,e){if(e.overflow>0)return!1;var t=r.length(),n=r.at(t-1);return n>this.blockSize<<2?!1:(r.truncate(n),!0)};Rt.cfb=function(r){r=r||{},this.name="CFB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Wn.util.createBuffer(),this._partialBytes=0};Rt.cfb.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=Dm(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.cfb.prototype.encrypt=function(r,e,t){var n=r.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=r.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=r.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)r.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!t)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.cfb.prototype.decrypt=function(r,e,t){var n=r.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=r.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=r.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)r.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!t)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.ofb=function(r){r=r||{},this.name="OFB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Wn.util.createBuffer(),this._partialBytes=0};Rt.ofb.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=Dm(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.ofb.prototype.encrypt=function(r,e,t){var n=r.length();if(r.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(r.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(r.getInt32()^this._outBlock[i]);if(o>0)r.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!t)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Rt.ofb.prototype.decrypt=Rt.ofb.prototype.encrypt;Rt.ctr=function(r){r=r||{},this.name="CTR",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Wn.util.createBuffer(),this._partialBytes=0};Rt.ctr.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=Dm(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Rt.ctr.prototype.encrypt=function(r,e,t){var n=r.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(r.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(r.getInt32()^this._outBlock[i]);if(o>0&&(r.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!t)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Nm(this._inBlock)};Rt.ctr.prototype.decrypt=Rt.ctr.prototype.encrypt;Rt.gcm=function(r){r=r||{},this.name="GCM",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Wn.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Rt.gcm.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");var e=Wn.util.createBuffer(r.iv);this._cipherLength=0;var t;if("additionalData"in r?t=Wn.util.createBuffer(r.additionalData):t=Wn.util.createBuffer(),"tagLength"in r?this._tagLength=r.tagLength:this._tagLength=128,this._tag=null,r.decrypt&&(this._tag=Wn.util.createBuffer(r.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(RA(n*8)))}this._inBlock=this._j0.slice(0),Nm(this._inBlock),this._partialBytes=0,t=Wn.util.createBuffer(t),this._aDataLength=RA(t.length()*8);var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])};Rt.gcm.prototype.encrypt=function(r,e,t){var n=r.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=r.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(r.getInt32()^this._outBlock[i]);if(o<=0||t){if(t){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!t)return r.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Nm(this._inBlock)};Rt.gcm.prototype.decrypt=function(r,e,t){var n=r.length();if(n<this.blockSize&&!(t&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Nm(this._inBlock),this._hashBlock[0]=r.getInt32(),this._hashBlock[1]=r.getInt32(),this._hashBlock[2]=r.getInt32(),this._hashBlock[3]=r.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Rt.gcm.prototype.afterFinish=function(r,e){var t=!0;e.decrypt&&e.overflow&&r.truncate(this.blockSize-e.overflow),this.tag=Wn.util.createBuffer();var n=this._aDataLength.concat(RA(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(t=!1),t};Rt.gcm.prototype.multiply=function(r,e){for(var t=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=r[i/32|0]&1<<31-i%32;o&&(t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]),this.pow(n,n)}return t};Rt.gcm.prototype.pow=function(r,e){for(var t=r[3]&1,n=3;n>0;--n)e[n]=r[n]>>>1|(r[n-1]&1)<<31;e[0]=r[0]>>>1,t&&(e[0]^=this._R)};Rt.gcm.prototype.tableMultiply=function(r){for(var e=[0,0,0,0],t=0;t<32;++t){var n=t/8|0,i=r[n]>>>(7-t%8)*4&15,o=this._m[t][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Rt.gcm.prototype.ghash=function(r,e,t){return e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3],this.tableMultiply(e)};Rt.gcm.prototype.generateHashTable=function(r,e){for(var t=8/e,n=4*t,i=16*t,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,r),e)}return o};Rt.gcm.prototype.generateSubHashTable=function(r,e){var t=1<<e,n=t>>>1,i=new Array(t);i[n]=r.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<t;++o){var u=i[o^n];i[o]=[r[0]^u[0],r[1]^u[1],r[2]^u[2],r[3]^u[3]]}return i};function Dm(r,e){if(typeof r=="string"&&(r=Wn.util.createBuffer(r)),Wn.util.isArray(r)&&r.length>4){var t=r;r=Wn.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}if(r.length()<e)throw new Error("Invalid IV length; got "+r.length()+" bytes and expected "+e+" bytes.");if(!Wn.util.isArray(r)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(r.getInt32());r=i}return r}function Nm(r){r[r.length-1]=r[r.length-1]+1&4294967295}function RA(r){return[r/4294967296|0,r&4294967295]}});var Xh=O((Xot,GK)=>{var Ir=Kt();CA();kA();Tr();GK.exports=Ir.aes=Ir.aes||{};Ir.aes.startEncrypting=function(r,e,t,n){var i=Om({key:r,output:t,decrypt:!1,mode:n});return i.start(e),i};Ir.aes.createEncryptionCipher=function(r,e){return Om({key:r,output:null,decrypt:!1,mode:e})};Ir.aes.startDecrypting=function(r,e,t,n){var i=Om({key:r,output:t,decrypt:!0,mode:n});return i.start(e),i};Ir.aes.createDecryptionCipher=function(r,e){return Om({key:r,output:null,decrypt:!0,mode:e})};Ir.aes.Algorithm=function(r,e){NA||KK();var t=this;t.name=r,t.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return DA(t._w,n,i,!1)},decrypt:function(n,i){return DA(t._w,n,i,!0)}}}),t._init=!1};Ir.aes.Algorithm.prototype.initialize=function(r){if(!this._init){var e=r.key,t;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ir.util.createBuffer(e);else if(Ir.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){t=e,e=Ir.util.createBuffer();for(var n=0;n<t.length;++n)e.putByte(t[n])}if(!Ir.util.isArray(e)){t=e,e=[];var i=t.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(t.getInt32())}}if(!Ir.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=jK(e,r.decrypt&&!s),this._init=!0}};Ir.aes._expandKey=function(r,e){return NA||KK(),jK(r,e)};Ir.aes._updateBlock=DA;lf("AES-ECB",Ir.cipher.modes.ecb);lf("AES-CBC",Ir.cipher.modes.cbc);lf("AES-CFB",Ir.cipher.modes.cfb);lf("AES-OFB",Ir.cipher.modes.ofb);lf("AES-CTR",Ir.cipher.modes.ctr);lf("AES-GCM",Ir.cipher.modes.gcm);function lf(r,e){var t=function(){return new Ir.aes.Algorithm(r,e)};Ir.cipher.registerAlgorithm(r,t)}var NA=!1,uf=4,Fi,PA,$K,hl,Ea;function KK(){NA=!0,$K=[0,1,2,4,8,16,32,64,128,27,54];for(var r=new Array(256),e=0;e<128;++e)r[e]=e<<1,r[e+128]=e+128<<1^283;Fi=new Array(256),PA=new Array(256),hl=new Array(4),Ea=new Array(4);for(var e=0;e<4;++e)hl[e]=new Array(256),Ea[e]=new Array(256);for(var t=0,n=0,i,o,s,a,c,u,l,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Fi[t]=a,PA[a]=t,c=r[a],i=r[t],o=r[i],s=r[o],u=c<<24^a<<16^a<<8^(a^c),l=(i^o^s)<<24^(t^s)<<16^(t^o^s)<<8^(t^i^s);for(var d=0;d<4;++d)hl[d][t]=u,Ea[d][a]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;t===0?t=n=1:(t=i^r[r[r[i^s]]],n^=r[r[n]])}}function jK(r,e){for(var t=r.slice(0),n,i=1,o=t.length,s=o+6+1,a=uf*s,c=o;c<a;++c)n=t[c-1],c%o===0?(n=Fi[n>>>16&255]<<24^Fi[n>>>8&255]<<16^Fi[n&255]<<8^Fi[n>>>24]^$K[i]<<24,i++):o>6&&c%o===4&&(n=Fi[n>>>24]<<24^Fi[n>>>16&255]<<16^Fi[n>>>8&255]<<8^Fi[n&255]),t[c]=t[c-o]^n;if(e){var u,l=Ea[0],d=Ea[1],h=Ea[2],f=Ea[3],m=t.slice(0);a=t.length;for(var c=0,w=a-uf;c<a;c+=uf,w-=uf)if(c===0||c===a-uf)m[c]=t[w],m[c+1]=t[w+3],m[c+2]=t[w+2],m[c+3]=t[w+1];else for(var _=0;_<uf;++_)u=t[w+_],m[c+(3&-_)]=l[Fi[u>>>24]]^d[Fi[u>>>16&255]]^h[Fi[u>>>8&255]]^f[Fi[u&255]];t=m}return t}function DA(r,e,t,n){var i=r.length/4-1,o,s,a,c,u;n?(o=Ea[0],s=Ea[1],a=Ea[2],c=Ea[3],u=PA):(o=hl[0],s=hl[1],a=hl[2],c=hl[3],u=Fi);var l,d,h,f,m,w,_;l=e[0]^r[0],d=e[n?3:1]^r[1],h=e[2]^r[2],f=e[n?1:3]^r[3];for(var E=3,S=1;S<i;++S)m=o[l>>>24]^s[d>>>16&255]^a[h>>>8&255]^c[f&255]^r[++E],w=o[d>>>24]^s[h>>>16&255]^a[f>>>8&255]^c[l&255]^r[++E],_=o[h>>>24]^s[f>>>16&255]^a[l>>>8&255]^c[d&255]^r[++E],f=o[f>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[h&255]^r[++E],l=m,d=w,h=_;t[0]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^r[++E],t[n?3:1]=u[d>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^r[++E],t[2]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^r[++E],t[n?1:3]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[h&255]^r[++E]}function Om(r){r=r||{};var e=(r.mode||"CBC").toUpperCase(),t="AES-"+e,n;r.decrypt?n=Ir.cipher.createDecipher(t,r.key):n=Ir.cipher.createCipher(t,r.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Ir.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Bm=O((Qot,WK)=>{var Ur=Kt();CA();kA();Tr();WK.exports=Ur.des=Ur.des||{};Ur.des.startEncrypting=function(r,e,t,n){var i=Lm({key:r,output:t,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ur.des.createEncryptionCipher=function(r,e){return Lm({key:r,output:null,decrypt:!1,mode:e})};Ur.des.startDecrypting=function(r,e,t,n){var i=Lm({key:r,output:t,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Ur.des.createDecryptionCipher=function(r,e){return Lm({key:r,output:null,decrypt:!0,mode:e})};Ur.des.Algorithm=function(r,e){var t=this;t.name=r,t.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return HK(t._keys,n,i,!1)},decrypt:function(n,i){return HK(t._keys,n,i,!0)}}}),t._init=!1};Ur.des.Algorithm.prototype.initialize=function(r){if(!this._init){var e=Ur.util.createBuffer(r.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=iEe(e),this._init=!0}};d1("DES-ECB",Ur.cipher.modes.ecb);d1("DES-CBC",Ur.cipher.modes.cbc);d1("DES-CFB",Ur.cipher.modes.cfb);d1("DES-OFB",Ur.cipher.modes.ofb);d1("DES-CTR",Ur.cipher.modes.ctr);d1("3DES-ECB",Ur.cipher.modes.ecb);d1("3DES-CBC",Ur.cipher.modes.cbc);d1("3DES-CFB",Ur.cipher.modes.cfb);d1("3DES-OFB",Ur.cipher.modes.ofb);d1("3DES-CTR",Ur.cipher.modes.ctr);function d1(r,e){var t=function(){return new Ur.des.Algorithm(r,e)};Ur.cipher.registerAlgorithm(r,t)}var Xve=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Qve=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Zve=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Jve=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],eEe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],tEe=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],rEe=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],nEe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function iEe(r){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],t=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],w=r.length()>8?3:1,_=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,p,g=0;g<w;g++){var y=r.getInt32(),b=r.getInt32();p=(y>>>4^b)&252645135,b^=p,y^=p<<4,p=(b>>>-16^y)&65535,y^=p,b^=p<<-16,p=(y>>>2^b)&858993459,b^=p,y^=p<<2,p=(b>>>-16^y)&65535,y^=p,b^=p<<-16,p=(y>>>1^b)&1431655765,b^=p,y^=p<<1,p=(b>>>8^y)&16711935,y^=p,b^=p<<8,p=(y>>>1^b)&1431655765,b^=p,y^=p<<1,p=y<<8|b>>>20&240,y=b<<24|b<<8&16711680|b>>>8&65280|b>>>24&240,b=p;for(var x=0;x<E.length;++x){E[x]?(y=y<<2|y>>>26,b=b<<2|b>>>26):(y=y<<1|y>>>27,b=b<<1|b>>>27),y&=-15,b&=-15;var v=e[y>>>28]|t[y>>>24&15]|n[y>>>20&15]|i[y>>>16&15]|o[y>>>12&15]|s[y>>>8&15]|a[y>>>4&15],T=c[b>>>28]|u[b>>>24&15]|l[b>>>20&15]|d[b>>>16&15]|h[b>>>12&15]|f[b>>>8&15]|m[b>>>4&15];p=(T>>>16^v)&65535,_[S++]=v^p,_[S++]=T^p<<16}}return _}function HK(r,e,t,n){var i=r.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=o[u+1],d=o[u+2],h=o[u];h!=l;h+=d){var f=c^r[h],m=(c>>>4|c<<28)^r[h+1];s=a,a=c,c=s^(Qve[f>>>24&63]|Jve[f>>>16&63]|tEe[f>>>8&63]|nEe[f&63]|Xve[m>>>24&63]|Zve[m>>>16&63]|eEe[m>>>8&63]|rEe[m&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,t[0]=a,t[1]=c}function Lm(r){r=r||{};var e=(r.mode||"CBC").toUpperCase(),t="DES-"+e,n;r.decrypt?n=Ur.cipher.createDecipher(t,r.key):n=Ur.cipher.createCipher(t,r.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Ur.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var v2=O((Zot,YK)=>{var Mm=Kt();YK.exports=Mm.md=Mm.md||{};Mm.md.algorithms=Mm.md.algorithms||{}});var QK=O((Jot,XK)=>{var kc=Kt();v2();Tr();var oEe=XK.exports=kc.hmac=kc.hmac||{};oEe.create=function(){var r=null,e=null,t=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in kc.md.algorithms)e=kc.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=r;else{if(typeof s=="string")s=kc.util.createBuffer(s);else if(kc.util.isArray(s)){var a=s;s=kc.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),t=kc.util.createBuffer(),n=kc.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);t.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)t.putByte(54),n.putByte(92);r=s,t=t.bytes(),n=n.bytes()}e.start(),e.update(t)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var OA=O((est,ZK)=>{var Vi=Kt();QK();v2();Tr();var sEe=Vi.pkcs5=Vi.pkcs5||{},Pc;Vi.util.isNodejs&&!Vi.options.usePureJavaScript&&(Pc=require("crypto"));ZK.exports=Vi.pbkdf2=sEe.pbkdf2=function(r,e,t,n,i,o){if(typeof i=="function"&&(o=i,i=null),Vi.util.isNodejs&&!Vi.options.usePureJavaScript&&Pc.pbkdf2&&(i===null||typeof i!="object")&&(Pc.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),r=Buffer.from(r,"binary"),e=Buffer.from(e,"binary"),o?Pc.pbkdf2Sync.length===4?Pc.pbkdf2(r,e,t,n,function(p,g){if(p)return o(p);o(null,g.toString("binary"))}):Pc.pbkdf2(r,e,t,n,i,function(p,g){if(p)return o(p);o(null,g.toString("binary"))}):Pc.pbkdf2Sync.length===4?Pc.pbkdf2Sync(r,e,t,n).toString("binary"):Pc.pbkdf2Sync(r,e,t,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Vi.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Vi.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,l=Vi.hmac.create();l.start(i,r);var d="",h,f,m;if(!o){for(var w=1;w<=c;++w){l.start(null,null),l.update(e),l.update(Vi.util.int32ToBytes(w)),h=m=l.digest().getBytes();for(var _=2;_<=t;++_)l.start(null,null),l.update(m),f=l.digest().getBytes(),h=Vi.util.xorBytes(h,f,s),m=f;d+=w<c?h:h.substr(0,u)}return d}var w=1,_;function E(){if(w>c)return o(null,d);l.start(null,null),l.update(e),l.update(Vi.util.int32ToBytes(w)),h=m=l.digest().getBytes(),_=2,S()}function S(){if(_<=t)return l.start(null,null),l.update(m),f=l.digest().getBytes(),h=Vi.util.xorBytes(h,f,s),m=f,++_,Vi.util.setImmediate(S);d+=w<c?h:h.substr(0,u),++w,E()}E()}});var Vm=O((tst,ej)=>{var Fm=Kt();Tr();var JK=ej.exports=Fm.pem=Fm.pem||{};JK.encode=function(r,e){e=e||{};var t="-----BEGIN "+r.type+`-----\r
`,n;if(r.procType&&(n={name:"Proc-Type",values:[String(r.procType.version),r.procType.type]},t+=Um(n)),r.contentDomain&&(n={name:"Content-Domain",values:[r.contentDomain]},t+=Um(n)),r.dekInfo&&(n={name:"DEK-Info",values:[r.dekInfo.algorithm]},r.dekInfo.parameters&&n.values.push(r.dekInfo.parameters),t+=Um(n)),r.headers)for(var i=0;i<r.headers.length;++i)t+=Um(r.headers[i]);return r.procType&&(t+=`\r
`),t+=Fm.util.encode64(r.body,e.maxline||64)+`\r
`,t+="-----END "+r.type+`-----\r
`,t};JK.decode=function(r){for(var e=[],t=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=t.exec(r),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Fm.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),d=u+1;d<c.length;++d){var h=c[d];if(!/\s/.test(h[0]))break;l+=h,u=d}if(o=l.match(n),o){for(var f={name:o[1],values:[]},m=o[2].split(","),w=0;w<m.length;++w)f.values.push(aEe(m[w]));if(a.procType)if(!a.contentDomain&&f.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&f.name==="DEK-Info"){if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(f);else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Um(r){for(var e=r.name+": ",t=[],n=function(c,u){return" "+u},i=0;i<r.values.length;++i)t.push(r.values[i].replace(/^(\S+\r\n)/,n));e+=t.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function aEe(r){return r.replace(/^\s+/,"")}});var sj=O((rst,oj)=>{var f1=Kt();v2();Tr();var rj=oj.exports=f1.sha256=f1.sha256||{};f1.md.sha256=f1.md.algorithms.sha256=rj;rj.create=function(){nj||cEe();var r=null,e=f1.util.createBuffer(),t=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=f1.util.createBuffer(),r={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=f1.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),tj(r,t,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=f1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(LA.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4,h5:r.h5,h6:r.h6,h7:r.h7};tj(d,t,i);var h=f1.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h.putInt32(d.h5),h.putInt32(d.h6),h.putInt32(d.h7),h},n};var LA=null,nj=!1,ij=null;function cEe(){LA="\x80",LA+=f1.util.fillString("\0",64),ij=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],nj=!0}function tj(r,e,t){for(var n,i,o,s,a,c,u,l,d,h,f,m,w,_,E,S=t.length();S>=64;){for(u=0;u<16;++u)e[u]=t.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(l=r.h0,d=r.h1,h=r.h2,f=r.h3,m=r.h4,w=r.h5,_=r.h6,E=r.h7,u=0;u<64;++u)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),a=_^m&(w^_),o=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&d|h&(l^d),n=E+s+a+ij[u]+e[u],i=o+c,E=_,_=w,w=m,m=f+n>>>0,f=h,h=d,d=l,l=n+i>>>0;r.h0=r.h0+l|0,r.h1=r.h1+d|0,r.h2=r.h2+h|0,r.h3=r.h3+f|0,r.h4=r.h4+m|0,r.h5=r.h5+w|0,r.h6=r.h6+_|0,r.h7=r.h7+E|0,S-=64}}});var cj=O((nst,aj)=>{var h1=Kt();Tr();var zm=null;h1.util.isNodejs&&!h1.options.usePureJavaScript&&!process.versions["node-webkit"]&&(zm=require("crypto"));var uEe=aj.exports=h1.prng=h1.prng||{};uEe.create=function(r){for(var e={plugin:r,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},t=r.md,n=new Array(32),i=0;i<32;++i)n[i]=t.create();e.pools=n,e.pool=0,e.generate=function(u,l){if(!l)return e.generateSync(u);var d=e.plugin.cipher,h=e.plugin.increment,f=e.plugin.formatKey,m=e.plugin.formatSeed,w=h1.util.createBuffer();e.key=null,_();function _(E){if(E)return l(E);if(w.length()>=u)return l(null,w.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return h1.util.nextTick(function(){o(_)});var S=d(e.key,e.seed);e.generated+=S.length,w.putBytes(S),e.key=f(d(e.key,h(e.seed))),e.seed=m(d(e.key,e.seed)),h1.util.setImmediate(_)}},e.generateSync=function(u){var l=e.plugin.cipher,d=e.plugin.increment,h=e.plugin.formatKey,f=e.plugin.formatSeed;e.key=null;for(var m=h1.util.createBuffer();m.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var w=l(e.key,e.seed);e.generated+=w.length,m.putBytes(w),e.key=h(l(e.key,d(e.seed))),e.seed=f(l(e.key,e.seed))}return m.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var l=32-e.pools[0].messageLength<<5;e.seedFile(l,function(d,h){if(d)return u(d);e.collect(h),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var l=1,d=0;d<32;++d)e.reseeds%l===0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),l=l<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var l=null,d=h1.util.globalScope,h=d.crypto||d.msCrypto;h&&h.getRandomValues&&(l=function(y){return h.getRandomValues(y)});var f=h1.util.createBuffer();if(l)for(;f.length()<u;){var m=Math.max(1,Math.min(u-f.length(),65536)/4),w=new Uint32Array(Math.floor(m));try{l(w);for(var _=0;_<w.length;++_)f.putInt32(w[_])}catch(y){if(!(typeof QuotaExceededError<"u"&&y instanceof QuotaExceededError))throw y}}if(f.length()<u)for(var E,S,p,g=Math.floor(Math.random()*65536);f.length()<u;){S=16807*(g&65535),E=16807*(g>>16),S+=(E&32767)<<16,S+=E>>15,S=(S&2147483647)+(S>>31),g=S&4294967295;for(var _=0;_<3;++_)p=g>>>(_<<3),p^=Math.floor(Math.random()*256),f.putByte(p&255)}return f.getBytes(u)}return zm?(e.seedFile=function(u,l){zm.randomBytes(u,function(d,h){if(d)return l(d);l(null,h.toString())})},e.seedFileSync=function(u){return zm.randomBytes(u).toString()}):(e.seedFile=function(u,l){try{l(null,c(u))}catch(d){l(d)}},e.seedFileSync=c),e.collect=function(u){for(var l=u.length,d=0;d<l;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,l){for(var d="",h=0;h<l;h+=8)d+=String.fromCharCode(u>>h&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,h){function f(m){var w=m.data;w.forge&&w.forge.prng&&(self.removeEventListener("message",f),h(w.forge.prng.err,w.forge.prng.bytes))}self.addEventListener("message",f),self.postMessage({forge:{prng:{needed:d}}})};else{var l=function(d){var h=d.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(f,m){u.postMessage({forge:{prng:{err:f,bytes:m}}})})};u.addEventListener("message",l)}},e}});var pl=O((ist,BA)=>{var Yn=Kt();Xh();sj();cj();Tr();(function(){if(Yn.random&&Yn.random.getBytes){BA.exports=Yn.random;return}(function(r){var e={},t=new Array(4),n=Yn.util.createBuffer();e.formatKey=function(d){var h=Yn.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),Yn.aes._expandKey(d,!1)},e.formatSeed=function(d){var h=Yn.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),d},e.cipher=function(d,h){return Yn.aes._updateBlock(d,h,t,!1),n.putInt32(t[0]),n.putInt32(t[1]),n.putInt32(t[2]),n.putInt32(t[3]),n.getBytes()},e.increment=function(d){return++d[3],d},e.md=Yn.md.sha256;function i(){var d=Yn.prng.create(e);return d.getBytes=function(h,f){return d.generate(h,f)},d.getBytesSync=function(h){return d.generate(h)},d}var o=i(),s=null,a=Yn.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(d){return c.getRandomValues(d)}),Yn.options.usePureJavaScript||!Yn.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch{}o.collect(u),u=null}r&&(r().mousemove(function(d){o.collectInt(d.clientX,16),o.collectInt(d.clientY,16)}),r().keypress(function(d){o.collectInt(d.charCode,8)}))}if(!Yn.random)Yn.random=o;else for(var l in o)Yn.random[l]=o[l];Yn.random.createInstance=i,BA.exports=Yn.random})(typeof jQuery<"u"?jQuery:null)})()});var fj=O((ost,dj)=>{var so=Kt();Tr();var MA=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],uj=[1,2,3,5],lEe=function(r,e){return r<<e&65535|(r&65535)>>16-e},dEe=function(r,e){return(r&65535)>>e|r<<16-e&65535};dj.exports=so.rc2=so.rc2||{};so.rc2.expandKey=function(r,e){typeof r=="string"&&(r=so.util.createBuffer(r)),e=e||128;var t=r,n=r.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)t.putByte(MA[t.at(a-1)+t.at(a-n)&255]);for(t.setAt(128-o,MA[t.at(128-o)&s]),a=127-o;a>=0;a--)t.setAt(a,MA[t.at(a+1)^t.at(a+o)]);return t};var lj=function(r,e,t){var n=!1,i=null,o=null,s=null,a,c,u,l,d=[];for(r=so.rc2.expandKey(r,e),u=0;u<64;u++)d.push(r.getInt16Le());t?(a=function(m){for(u=0;u<4;u++)m[u]+=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),m[u]=lEe(m[u],uj[u]),l++},c=function(m){for(u=0;u<4;u++)m[u]+=d[m[(u+3)%4]&63]}):(a=function(m){for(u=3;u>=0;u--)m[u]=dEe(m[u],uj[u]),m[u]-=d[l]+(m[(u+3)%4]&m[(u+2)%4])+(~m[(u+3)%4]&m[(u+1)%4]),l--},c=function(m){for(u=3;u>=0;u--)m[u]-=d[m[(u+3)%4]&63]});var h=function(m){var w=[];for(u=0;u<4;u++){var _=i.getInt16Le();s!==null&&(t?_^=s.getInt16Le():s.putInt16Le(_)),w.push(_&65535)}l=t?0:63;for(var E=0;E<m.length;E++)for(var S=0;S<m[E][0];S++)m[E][1](w);for(u=0;u<4;u++)s!==null&&(t?s.putInt16Le(w[u]):w[u]^=s.getInt16Le()),o.putInt16Le(w[u])},f=null;return f={start:function(m,w){m&&typeof m=="string"&&(m=so.util.createBuffer(m)),n=!1,i=so.util.createBuffer(),o=w||new so.util.createBuffer,s=m,f.output=o},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(m){var w=!0;if(t)if(m)w=m(8,i,!t);else{var _=i.length()===8?8:8-i.length();i.fillWithByte(_,_)}if(w&&(n=!0,f.update()),!t&&(w=i.length()===0,w))if(m)w=m(8,o,!t);else{var E=o.length(),S=o.at(E-1);S>E?w=!1:o.truncate(S)}return w}},f};so.rc2.startEncrypting=function(r,e,t){var n=so.rc2.createEncryptionCipher(r,128);return n.start(e,t),n};so.rc2.createEncryptionCipher=function(r,e){return lj(r,e,!0)};so.rc2.startDecrypting=function(r,e,t){var n=so.rc2.createDecryptionCipher(r,128);return n.start(e,t),n};so.rc2.createDecryptionCipher=function(r,e){return lj(r,e,!1)}});var Km=O((sst,_j)=>{var UA=Kt();_j.exports=UA.jsbn=UA.jsbn||{};var Dc,fEe=0xdeadbeefcafe,hj=(fEe&16777215)==15715070;function he(r,e,t){this.data=[],r!=null&&(typeof r=="number"?this.fromNumber(r,e,t):e==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,e))}UA.jsbn.BigInteger=he;function tr(){return new he(null)}function hEe(r,e,t,n,i,o){for(;--o>=0;){var s=e*this.data[r++]+t.data[n]+i;i=Math.floor(s/67108864),t.data[n++]=s&67108863}return i}function pEe(r,e,t,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[r]&32767,u=this.data[r++]>>15,l=a*c+u*s;c=s*c+((l&32767)<<15)+t.data[n]+(i&1073741823),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),t.data[n++]=c&1073741823}return i}function pj(r,e,t,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[r]&16383,u=this.data[r++]>>14,l=a*c+u*s;c=s*c+((l&16383)<<14)+t.data[n]+i,i=(c>>28)+(l>>14)+a*u,t.data[n++]=c&268435455}return i}typeof navigator>"u"?(he.prototype.am=pj,Dc=28):hj&&navigator.appName=="Microsoft Internet Explorer"?(he.prototype.am=pEe,Dc=30):hj&&navigator.appName!="Netscape"?(he.prototype.am=hEe,Dc=26):(he.prototype.am=pj,Dc=28);he.prototype.DB=Dc;he.prototype.DM=(1<<Dc)-1;he.prototype.DV=1<<Dc;var FA=52;he.prototype.FV=Math.pow(2,FA);he.prototype.F1=FA-Dc;he.prototype.F2=2*Dc-FA;var mEe="0123456789abcdefghijklmnopqrstuvwxyz",qm=new Array,df,xs;df=48;for(xs=0;xs<=9;++xs)qm[df++]=xs;df=97;for(xs=10;xs<36;++xs)qm[df++]=xs;df=65;for(xs=10;xs<36;++xs)qm[df++]=xs;function mj(r){return mEe.charAt(r)}function gj(r,e){var t=qm[r.charCodeAt(e)];return t??-1}function gEe(r){for(var e=this.t-1;e>=0;--e)r.data[e]=this.data[e];r.t=this.t,r.s=this.s}function yEe(r){this.t=1,this.s=r<0?-1:0,r>0?this.data[0]=r:r<-1?this.data[0]=r+this.DV:this.t=0}function E2(r){var e=tr();return e.fromInt(r),e}function wEe(r,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==256)t=8;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else{this.fromRadix(r,e);return}this.t=0,this.s=0;for(var n=r.length,i=!1,o=0;--n>=0;){var s=t==8?r[n]&255:gj(r,n);if(s<0){r.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+t>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=t,o>=this.DB&&(o-=this.DB)}t==8&&r[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&he.ZERO.subTo(this,this)}function bEe(){for(var r=this.s&this.DM;this.t>0&&this.data[this.t-1]==r;)--this.t}function _Ee(r){if(this.s<0)return"-"+this.negate().toString(r);var e;if(r==16)e=4;else if(r==8)e=3;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else return this.toRadix(r);var t=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=mj(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&t,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=mj(n));return i?o:"0"}function vEe(){var r=tr();return he.ZERO.subTo(this,r),r}function EEe(){return this.s<0?this.negate():this}function xEe(r){var e=this.s-r.s;if(e!=0)return e;var t=this.t;if(e=t-r.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this.data[t]-r.data[t])!=0)return e;return 0}function $m(r){var e=1,t;return(t=r>>>16)!=0&&(r=t,e+=16),(t=r>>8)!=0&&(r=t,e+=8),(t=r>>4)!=0&&(r=t,e+=4),(t=r>>2)!=0&&(r=t,e+=2),(t=r>>1)!=0&&(r=t,e+=1),e}function SEe(){return this.t<=0?0:this.DB*(this.t-1)+$m(this.data[this.t-1]^this.s&this.DM)}function TEe(r,e){var t;for(t=this.t-1;t>=0;--t)e.data[t+r]=this.data[t];for(t=r-1;t>=0;--t)e.data[t]=0;e.t=this.t+r,e.s=this.s}function IEe(r,e){for(var t=r;t<this.t;++t)e.data[t-r]=this.data[t];e.t=Math.max(this.t-r,0),e.s=this.s}function AEe(r,e){var t=r%this.DB,n=this.DB-t,i=(1<<n)-1,o=Math.floor(r/this.DB),s=this.s<<t&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<t;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function CEe(r,e){e.s=this.s;var t=Math.floor(r/this.DB);if(t>=this.t){e.t=0;return}var n=r%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[t]>>n;for(var s=t+1;s<this.t;++s)e.data[s-t-1]|=(this.data[s]&o)<<i,e.data[s-t]=this.data[s]>>n;n>0&&(e.data[this.t-t-1]|=(this.s&o)<<i),e.t=this.t-t,e.clamp()}function REe(r,e){for(var t=0,n=0,i=Math.min(r.t,this.t);t<i;)n+=this.data[t]-r.data[t],e.data[t++]=n&this.DM,n>>=this.DB;if(r.t<this.t){for(n-=r.s;t<this.t;)n+=this.data[t],e.data[t++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;t<r.t;)n-=r.data[t],e.data[t++]=n&this.DM,n>>=this.DB;n-=r.s}e.s=n<0?-1:0,n<-1?e.data[t++]=this.DV+n:n>0&&(e.data[t++]=n),e.t=t,e.clamp()}function kEe(r,e){var t=this.abs(),n=r.abs(),i=t.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+t.t]=t.am(0,n.data[i],e,i,0,t.t);e.s=0,e.clamp(),this.s!=r.s&&he.ZERO.subTo(e,e)}function PEe(r){for(var e=this.abs(),t=r.t=2*e.t;--t>=0;)r.data[t]=0;for(t=0;t<e.t-1;++t){var n=e.am(t,e.data[t],r,2*t,0,1);(r.data[t+e.t]+=e.am(t+1,2*e.data[t],r,2*t+1,n,e.t-t-1))>=e.DV&&(r.data[t+e.t]-=e.DV,r.data[t+e.t+1]=1)}r.t>0&&(r.data[r.t-1]+=e.am(t,e.data[t],r,2*t,0,1)),r.s=0,r.clamp()}function DEe(r,e,t){var n=r.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=tr());var o=tr(),s=this.s,a=r.s,c=this.DB-$m(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,t)):(n.copyTo(o),i.copyTo(t));var u=o.t,l=o.data[u-1];if(l!=0){var d=l*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),h=this.FV/d,f=(1<<this.F1)/d,m=1<<this.F2,w=t.t,_=w-u,E=e??tr();for(o.dlShiftTo(_,E),t.compareTo(E)>=0&&(t.data[t.t++]=1,t.subTo(E,t)),he.ONE.dlShiftTo(u,E),E.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--_>=0;){var S=t.data[--w]==l?this.DM:Math.floor(t.data[w]*h+(t.data[w-1]+m)*f);if((t.data[w]+=o.am(0,S,t,_,0,u))<S)for(o.dlShiftTo(_,E),t.subTo(E,t);t.data[w]<--S;)t.subTo(E,t)}e!=null&&(t.drShiftTo(u,e),s!=a&&he.ZERO.subTo(e,e)),t.t=u,t.clamp(),c>0&&t.rShiftTo(c,t),s<0&&he.ZERO.subTo(t,t)}}}function NEe(r){var e=tr();return this.abs().divRemTo(r,null,e),this.s<0&&e.compareTo(he.ZERO)>0&&r.subTo(e,e),e}function ml(r){this.m=r}function OEe(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function LEe(r){return r}function BEe(r){r.divRemTo(this.m,null,r)}function MEe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}function UEe(r,e){r.squareTo(e),this.reduce(e)}ml.prototype.convert=OEe;ml.prototype.revert=LEe;ml.prototype.reduce=BEe;ml.prototype.mulTo=MEe;ml.prototype.sqrTo=UEe;function FEe(){if(this.t<1)return 0;var r=this.data[0];if(!(r&1))return 0;var e=r&3;return e=e*(2-(r&15)*e)&15,e=e*(2-(r&255)*e)&255,e=e*(2-((r&65535)*e&65535))&65535,e=e*(2-r*e%this.DV)%this.DV,e>0?this.DV-e:-e}function gl(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function VEe(r){var e=tr();return r.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),r.s<0&&e.compareTo(he.ZERO)>0&&this.m.subTo(e,e),e}function zEe(r){var e=tr();return r.copyTo(e),this.reduce(e),e}function qEe(r){for(;r.t<=this.mt2;)r.data[r.t++]=0;for(var e=0;e<this.m.t;++e){var t=r.data[e]&32767,n=t*this.mpl+((t*this.mph+(r.data[e]>>15)*this.mpl&this.um)<<15)&r.DM;for(t=e+this.m.t,r.data[t]+=this.m.am(0,n,r,e,0,this.m.t);r.data[t]>=r.DV;)r.data[t]-=r.DV,r.data[++t]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function $Ee(r,e){r.squareTo(e),this.reduce(e)}function KEe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}gl.prototype.convert=VEe;gl.prototype.revert=zEe;gl.prototype.reduce=qEe;gl.prototype.mulTo=KEe;gl.prototype.sqrTo=$Ee;function jEe(){return(this.t>0?this.data[0]&1:this.s)==0}function GEe(r,e){if(r>4294967295||r<1)return he.ONE;var t=tr(),n=tr(),i=e.convert(this),o=$m(r)-1;for(i.copyTo(t);--o>=0;)if(e.sqrTo(t,n),(r&1<<o)>0)e.mulTo(n,i,t);else{var s=t;t=n,n=s}return e.revert(t)}function HEe(r,e){var t;return r<256||e.isEven()?t=new ml(e):t=new gl(e),this.exp(r,t)}he.prototype.copyTo=gEe;he.prototype.fromInt=yEe;he.prototype.fromString=wEe;he.prototype.clamp=bEe;he.prototype.dlShiftTo=TEe;he.prototype.drShiftTo=IEe;he.prototype.lShiftTo=AEe;he.prototype.rShiftTo=CEe;he.prototype.subTo=REe;he.prototype.multiplyTo=kEe;he.prototype.squareTo=PEe;he.prototype.divRemTo=DEe;he.prototype.invDigit=FEe;he.prototype.isEven=jEe;he.prototype.exp=GEe;he.prototype.toString=_Ee;he.prototype.negate=vEe;he.prototype.abs=EEe;he.prototype.compareTo=xEe;he.prototype.bitLength=SEe;he.prototype.mod=NEe;he.prototype.modPowInt=HEe;he.ZERO=E2(0);he.ONE=E2(1);function WEe(){var r=tr();return this.copyTo(r),r}function YEe(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function XEe(){return this.t==0?this.s:this.data[0]<<24>>24}function QEe(){return this.t==0?this.s:this.data[0]<<16>>16}function ZEe(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function JEe(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function exe(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var e=this.chunkSize(r),t=Math.pow(r,e),n=E2(t),i=tr(),o=tr(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(t+o.intValue()).toString(r).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(r)+s}function txe(r,e){this.fromInt(0),e==null&&(e=10);for(var t=this.chunkSize(e),n=Math.pow(e,t),i=!1,o=0,s=0,a=0;a<r.length;++a){var c=gj(r,a);if(c<0){r.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=t&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&he.ZERO.subTo(this,this)}function rxe(r,e,t){if(typeof e=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,t),this.testBit(r-1)||this.bitwiseTo(he.ONE.shiftLeft(r-1),VA,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(he.ONE.shiftLeft(r-1),this);else{var n=new Array,i=r&7;n.length=(r>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function nxe(){var r=this.t,e=new Array;e[0]=this.s;var t=this.DB-r*this.DB%8,n,i=0;if(r-- >0)for(t<this.DB&&(n=this.data[r]>>t)!=(this.s&this.DM)>>t&&(e[i++]=n|this.s<<this.DB-t);r>=0;)t<8?(n=(this.data[r]&(1<<t)-1)<<8-t,n|=this.data[--r]>>(t+=this.DB-8)):(n=this.data[r]>>(t-=8)&255,t<=0&&(t+=this.DB,--r)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function ixe(r){return this.compareTo(r)==0}function oxe(r){return this.compareTo(r)<0?this:r}function sxe(r){return this.compareTo(r)>0?this:r}function axe(r,e,t){var n,i,o=Math.min(r.t,this.t);for(n=0;n<o;++n)t.data[n]=e(this.data[n],r.data[n]);if(r.t<this.t){for(i=r.s&this.DM,n=o;n<this.t;++n)t.data[n]=e(this.data[n],i);t.t=this.t}else{for(i=this.s&this.DM,n=o;n<r.t;++n)t.data[n]=e(i,r.data[n]);t.t=r.t}t.s=e(this.s,r.s),t.clamp()}function cxe(r,e){return r&e}function uxe(r){var e=tr();return this.bitwiseTo(r,cxe,e),e}function VA(r,e){return r|e}function lxe(r){var e=tr();return this.bitwiseTo(r,VA,e),e}function yj(r,e){return r^e}function dxe(r){var e=tr();return this.bitwiseTo(r,yj,e),e}function wj(r,e){return r&~e}function fxe(r){var e=tr();return this.bitwiseTo(r,wj,e),e}function hxe(){for(var r=tr(),e=0;e<this.t;++e)r.data[e]=this.DM&~this.data[e];return r.t=this.t,r.s=~this.s,r}function pxe(r){var e=tr();return r<0?this.rShiftTo(-r,e):this.lShiftTo(r,e),e}function mxe(r){var e=tr();return r<0?this.lShiftTo(-r,e):this.rShiftTo(r,e),e}function gxe(r){if(r==0)return-1;var e=0;return r&65535||(r>>=16,e+=16),r&255||(r>>=8,e+=8),r&15||(r>>=4,e+=4),r&3||(r>>=2,e+=2),r&1||++e,e}function yxe(){for(var r=0;r<this.t;++r)if(this.data[r]!=0)return r*this.DB+gxe(this.data[r]);return this.s<0?this.t*this.DB:-1}function wxe(r){for(var e=0;r!=0;)r&=r-1,++e;return e}function bxe(){for(var r=0,e=this.s&this.DM,t=0;t<this.t;++t)r+=wxe(this.data[t]^e);return r}function _xe(r){var e=Math.floor(r/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<r%this.DB)!=0}function vxe(r,e){var t=he.ONE.shiftLeft(r);return this.bitwiseTo(t,e,t),t}function Exe(r){return this.changeBit(r,VA)}function xxe(r){return this.changeBit(r,wj)}function Sxe(r){return this.changeBit(r,yj)}function Txe(r,e){for(var t=0,n=0,i=Math.min(r.t,this.t);t<i;)n+=this.data[t]+r.data[t],e.data[t++]=n&this.DM,n>>=this.DB;if(r.t<this.t){for(n+=r.s;t<this.t;)n+=this.data[t],e.data[t++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;t<r.t;)n+=r.data[t],e.data[t++]=n&this.DM,n>>=this.DB;n+=r.s}e.s=n<0?-1:0,n>0?e.data[t++]=n:n<-1&&(e.data[t++]=this.DV+n),e.t=t,e.clamp()}function Ixe(r){var e=tr();return this.addTo(r,e),e}function Axe(r){var e=tr();return this.subTo(r,e),e}function Cxe(r){var e=tr();return this.multiplyTo(r,e),e}function Rxe(r){var e=tr();return this.divRemTo(r,e,null),e}function kxe(r){var e=tr();return this.divRemTo(r,null,e),e}function Pxe(r){var e=tr(),t=tr();return this.divRemTo(r,e,t),new Array(e,t)}function Dxe(r){this.data[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function Nxe(r,e){if(r!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=r;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Qh(){}function bj(r){return r}function Oxe(r,e,t){r.multiplyTo(e,t)}function Lxe(r,e){r.squareTo(e)}Qh.prototype.convert=bj;Qh.prototype.revert=bj;Qh.prototype.mulTo=Oxe;Qh.prototype.sqrTo=Lxe;function Bxe(r){return this.exp(r,new Qh)}function Mxe(r,e,t){var n=Math.min(this.t+r.t,e);for(t.s=0,t.t=n;n>0;)t.data[--n]=0;var i;for(i=t.t-this.t;n<i;++n)t.data[n+this.t]=this.am(0,r.data[n],t,n,0,this.t);for(i=Math.min(r.t,e);n<i;++n)this.am(0,r.data[n],t,n,0,e-n);t.clamp()}function Uxe(r,e,t){--e;var n=t.t=this.t+r.t-e;for(t.s=0;--n>=0;)t.data[n]=0;for(n=Math.max(e-this.t,0);n<r.t;++n)t.data[this.t+n-e]=this.am(e-n,r.data[n],t,0,0,this.t+n-e);t.clamp(),t.drShiftTo(1,t)}function ff(r){this.r2=tr(),this.q3=tr(),he.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function Fxe(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var e=tr();return r.copyTo(e),this.reduce(e),e}function Vxe(r){return r}function zxe(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function qxe(r,e){r.squareTo(e),this.reduce(e)}function $xe(r,e,t){r.multiplyTo(e,t),this.reduce(t)}ff.prototype.convert=Fxe;ff.prototype.revert=Vxe;ff.prototype.reduce=zxe;ff.prototype.mulTo=$xe;ff.prototype.sqrTo=qxe;function Kxe(r,e){var t=r.bitLength(),n,i=E2(1),o;if(t<=0)return i;t<18?n=1:t<48?n=3:t<144?n=4:t<768?n=5:n=6,t<8?o=new ml(e):e.isEven()?o=new ff(e):o=new gl(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var l=tr();for(o.sqrTo(s[1],l);a<=u;)s[a]=tr(),o.mulTo(l,s[a-2],s[a]),a+=2}var d=r.t-1,h,f=!0,m=tr(),w;for(t=$m(r.data[d])-1;d>=0;){for(t>=c?h=r.data[d]>>t-c&u:(h=(r.data[d]&(1<<t+1)-1)<<c-t,d>0&&(h|=r.data[d-1]>>this.DB+t-c)),a=n;!(h&1);)h>>=1,--a;if((t-=a)<0&&(t+=this.DB,--d),f)s[h].copyTo(i),f=!1;else{for(;a>1;)o.sqrTo(i,m),o.sqrTo(m,i),a-=2;a>0?o.sqrTo(i,m):(w=i,i=m,m=w),o.mulTo(m,s[h],i)}for(;d>=0&&!(r.data[d]&1<<t);)o.sqrTo(i,m),w=i,i=m,m=w,--t<0&&(t=this.DB-1,--d)}return o.revert(i)}function jxe(r){var e=this.s<0?this.negate():this.clone(),t=r.s<0?r.negate():r.clone();if(e.compareTo(t)<0){var n=e;e=t,t=n}var i=e.getLowestSetBit(),o=t.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),t.rShiftTo(o,t));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),e.compareTo(t)>=0?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return o>0&&t.lShiftTo(o,t),t}function Gxe(r){if(r<=0)return 0;var e=this.DV%r,t=this.s<0?r-1:0;if(this.t>0)if(e==0)t=this.data[0]%r;else for(var n=this.t-1;n>=0;--n)t=(e*t+this.data[n])%r;return t}function Hxe(r){var e=r.isEven();if(this.isEven()&&e||r.signum()==0)return he.ZERO;for(var t=r.clone(),n=this.clone(),i=E2(1),o=E2(0),s=E2(0),a=E2(1);t.signum()!=0;){for(;t.isEven();)t.rShiftTo(1,t),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(r,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(r,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(r,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(r,a),a.rShiftTo(1,a);t.compareTo(n)>=0?(t.subTo(n,t),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(t,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(he.ONE)!=0)return he.ZERO;if(a.compareTo(r)>=0)return a.subtract(r);if(a.signum()<0)a.addTo(r,a);else return a;return a.signum()<0?a.add(r):a}var xa=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Wxe=(1<<26)/xa[xa.length-1];function Yxe(r){var e,t=this.abs();if(t.t==1&&t.data[0]<=xa[xa.length-1]){for(e=0;e<xa.length;++e)if(t.data[0]==xa[e])return!0;return!1}if(t.isEven())return!1;for(e=1;e<xa.length;){for(var n=xa[e],i=e+1;i<xa.length&&n<Wxe;)n*=xa[i++];for(n=t.modInt(n);e<i;)if(n%xa[e++]==0)return!1}return t.millerRabin(r)}function Xxe(r){var e=this.subtract(he.ONE),t=e.getLowestSetBit();if(t<=0)return!1;for(var n=e.shiftRight(t),i=Qxe(),o,s=0;s<r;++s){do o=new he(this.bitLength(),i);while(o.compareTo(he.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(he.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<t&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(he.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function Qxe(){return{nextBytes:function(r){for(var e=0;e<r.length;++e)r[e]=Math.floor(Math.random()*256)}}}he.prototype.chunkSize=ZEe;he.prototype.toRadix=exe;he.prototype.fromRadix=txe;he.prototype.fromNumber=rxe;he.prototype.bitwiseTo=axe;he.prototype.changeBit=vxe;he.prototype.addTo=Txe;he.prototype.dMultiply=Dxe;he.prototype.dAddOffset=Nxe;he.prototype.multiplyLowerTo=Mxe;he.prototype.multiplyUpperTo=Uxe;he.prototype.modInt=Gxe;he.prototype.millerRabin=Xxe;he.prototype.clone=WEe;he.prototype.intValue=YEe;he.prototype.byteValue=XEe;he.prototype.shortValue=QEe;he.prototype.signum=JEe;he.prototype.toByteArray=nxe;he.prototype.equals=ixe;he.prototype.min=oxe;he.prototype.max=sxe;he.prototype.and=uxe;he.prototype.or=lxe;he.prototype.xor=dxe;he.prototype.andNot=fxe;he.prototype.not=hxe;he.prototype.shiftLeft=pxe;he.prototype.shiftRight=mxe;he.prototype.getLowestSetBit=yxe;he.prototype.bitCount=bxe;he.prototype.testBit=_xe;he.prototype.setBit=Exe;he.prototype.clearBit=xxe;he.prototype.flipBit=Sxe;he.prototype.add=Ixe;he.prototype.subtract=Axe;he.prototype.multiply=Cxe;he.prototype.divide=Rxe;he.prototype.remainder=kxe;he.prototype.divideAndRemainder=Pxe;he.prototype.modPow=Kxe;he.prototype.modInverse=Hxe;he.prototype.pow=Bxe;he.prototype.gcd=jxe;he.prototype.isProbablePrime=Yxe});var Tj=O((ast,Sj)=>{var p1=Kt();v2();Tr();var Ej=Sj.exports=p1.sha1=p1.sha1||{};p1.md.sha1=p1.md.algorithms.sha1=Ej;Ej.create=function(){xj||Zxe();var r=null,e=p1.util.createBuffer(),t=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=p1.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=p1.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),vj(r,t,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=p1.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(zA.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)a=n.fullMessageLength[l+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var d={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4};vj(d,t,i);var h=p1.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h},n};var zA=null,xj=!1;function Zxe(){zA="\x80",zA+=p1.util.fillString("\0",64),xj=!0}function vj(r,e,t){for(var n,i,o,s,a,c,u,l,d=t.length();d>=64;){for(i=r.h0,o=r.h1,s=r.h2,a=r.h3,c=r.h4,l=0;l<16;++l)n=t.getInt32(),e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;r.h0=r.h0+i|0,r.h1=r.h1+o|0,r.h2=r.h2+s|0,r.h3=r.h3+a|0,r.h4=r.h4+c|0,d-=64}}});var Cj=O((cst,Aj)=>{var m1=Kt();Tr();pl();Tj();var Ij=Aj.exports=m1.pkcs1=m1.pkcs1||{};Ij.encode_rsa_oaep=function(r,e,t){var n,i,o,s;typeof t=="string"?(n=t,i=arguments[3]||void 0,o=arguments[4]||void 0):t&&(n=t.label||void 0,i=t.seed||void 0,o=t.md||void 0,t.mgf1&&t.mgf1.md&&(s=t.mgf1.md)),o?o.start():o=m1.md.sha1.create(),s||(s=o);var a=Math.ceil(r.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var l=o.digest(),d="",h=c-e.length,f=0;f<h;f++)d+="\0";var m=l.getBytes()+d+""+e;if(!i)i=m1.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var w=jm(i,a-o.digestLength-1,s),_=m1.util.xorBytes(m,w,m.length),E=jm(_,o.digestLength,s),S=m1.util.xorBytes(i,E,i.length);return"\0"+S+_};Ij.decode_rsa_oaep=function(r,e,t){var n,i,o;typeof t=="string"?(n=t,i=arguments[3]||void 0):t&&(n=t.label||void 0,i=t.md||void 0,t.mgf1&&t.mgf1.md&&(o=t.mgf1.md));var s=Math.ceil(r.n.bitLength()/8);if(e.length!==s){var _=new Error("RSAES-OAEP encoded message length is invalid.");throw _.length=e.length,_.expectedLength=s,_}if(i===void 0?i=m1.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),l=e.substring(1+i.digestLength),d=jm(l,i.digestLength,o),h=m1.util.xorBytes(u,d,u.length),f=jm(h,s-i.digestLength-1,o),m=m1.util.xorBytes(l,f,l.length),w=m.substring(0,i.digestLength),_=c!=="\0",E=0;E<i.digestLength;++E)_|=a.charAt(E)!==w.charAt(E);for(var S=1,p=i.digestLength,g=i.digestLength;g<m.length;g++){var y=m.charCodeAt(g),b=y&1^1,x=S?65534:0;_|=y&x,S=S&b,p+=S}if(_||m.charCodeAt(p)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(p+1)};function jm(r,e,t){t||(t=m1.md.sha1.create());for(var n="",i=Math.ceil(e/t.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);t.start(),t.update(r+s),n+=t.digest().getBytes()}return n.substring(0,e)}});var Rj=O((ust,qA)=>{var x2=Kt();Tr();Km();pl();(function(){if(x2.prime){qA.exports=x2.prime;return}var r=qA.exports=x2.prime=x2.prime||{},e=x2.jsbn.BigInteger,t=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(d,h){return d|h};r.generateProbablePrime=function(d,h,f){typeof h=="function"&&(f=h,h={}),h=h||{};var m=h.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var w=h.prng||x2.random,_={nextBytes:function(E){for(var S=w.getBytesSync(E.length),p=0;p<E.length;++p)E[p]=S.charCodeAt(p)}};if(m.name==="PRIMEINC")return o(d,_,m.options,f);throw new Error("Invalid prime generation algorithm: "+m.name)};function o(d,h,f,m){return"workers"in f?c(d,h,f,m):s(d,h,f,m)}function s(d,h,f,m){var w=u(d,h),_=0,E=l(w.bitLength());"millerRabinTests"in f&&(E=f.millerRabinTests);var S=10;"maxBlockTime"in f&&(S=f.maxBlockTime),a(w,d,h,_,E,S,m)}function a(d,h,f,m,w,_,E){var S=+new Date;do{if(d.bitLength()>h&&(d=u(h,f)),d.isProbablePrime(w))return E(null,d);d.dAddOffset(t[m++%8],0)}while(_<0||+new Date-S<_);x2.util.setImmediate(function(){a(d,h,f,m,w,_,E)})}function c(d,h,f,m){if(typeof Worker>"u")return s(d,h,f,m);var w=u(d,h),_=f.workers,E=f.workLoad||100,S=E*30/8,p=f.workerScript||"forge/prime.worker.js";if(_===-1)return x2.util.estimateCores(function(y,b){y&&(b=2),_=b-1,g()});g();function g(){_=Math.max(1,_);for(var y=[],b=0;b<_;++b)y[b]=new Worker(p);for(var x=_,b=0;b<_;++b)y[b].addEventListener("message",T);var v=!1;function T(I){if(!v){--x;var R=I.data;if(R.found){for(var M=0;M<y.length;++M)y[M].terminate();return v=!0,m(null,new e(R.prime,16))}w.bitLength()>d&&(w=u(d,h));var U=w.toString(16);I.target.postMessage({hex:U,workLoad:E}),w.dAddOffset(S,0)}}}}function u(d,h){var f=new e(d,h),m=d-1;return f.testBit(m)||f.bitwiseTo(e.ONE.shiftLeft(m),i,f),f.dAddOffset(31-f.mod(n).byteValue(),0),f}function l(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var Hm=O((lst,Bj)=>{var et=Kt();_2();Km();cf();Cj();Rj();pl();Tr();typeof Xt>"u"&&(Xt=et.jsbn.BigInteger);var Xt,$A=et.util.isNodejs?require("crypto"):null,re=et.asn1,Ss=et.util;et.pki=et.pki||{};Bj.exports=et.pki.rsa=et.rsa=et.rsa||{};var ht=et.pki,Jxe=[6,4,2,4,2,4,6,2],eSe={name:"PrivateKeyInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},tSe={name:"RSAPrivateKey",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rSe={name:"RSAPublicKey",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:re.Class.UNIVERSAL,type:re.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},nSe=et.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:re.Class.UNIVERSAL,type:re.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},iSe={name:"DigestInfo",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:re.Class.UNIVERSAL,type:re.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:re.Class.UNIVERSAL,type:re.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:re.Class.UNIVERSAL,type:re.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:re.Class.UNIVERSAL,type:re.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},oSe=function(r){var e;if(r.algorithm in ht.oids)e=ht.oids[r.algorithm];else{var t=new Error("Unknown message digest algorithm.");throw t.algorithm=r.algorithm,t}var n=re.oidToDer(e).getBytes(),i=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]),o=re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[]);o.value.push(re.create(re.Class.UNIVERSAL,re.Type.OID,!1,n)),o.value.push(re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,""));var s=re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,r.digest().getBytes());return i.value.push(o),i.value.push(s),re.toDer(i).getBytes()},Oj=function(r,e,t){if(t)return r.modPow(e.e,e.n);if(!e.p||!e.q)return r.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Xt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Xt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Xt(et.util.bytesToHex(et.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Xt.ONE));r=r.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=r.mod(e.p).modPow(e.dP,e.p),o=r.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};ht.rsa.encrypt=function(r,e,t){var n=t,i,o=Math.ceil(e.n.bitLength()/8);t!==!1&&t!==!0?(n=t===2,i=Lj(r,e,t)):(i=et.util.createBuffer(),i.putBytes(r));for(var s=new Xt(i.toHex(),16),a=Oj(s,e,n),c=a.toString(16),u=et.util.createBuffer(),l=o-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(et.util.hexToBytes(c)),u.getBytes()};ht.rsa.decrypt=function(r,e,t,n){var i=Math.ceil(e.n.bitLength()/8);if(r.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=r.length,o.expected=i,o}var s=new Xt(et.util.createBuffer(r).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Oj(s,e,t),c=a.toString(16),u=et.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(et.util.hexToBytes(c)),n!==!1?Gm(u.getBytes(),e,t):u.getBytes()};ht.rsa.createKeyPairGenerationState=function(r,e,t){typeof r=="string"&&(r=parseInt(r,10)),r=r||2048,t=t||{};var n=t.prng||et.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=t.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:r,rng:i,eInt:e||65537,e:new Xt(null),p:null,q:null,qBits:r>>1,pBits:r-(r>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};ht.rsa.stepKeyPairGenerationState=function(r,e){"algorithm"in r||(r.algorithm="PRIMEINC");var t=new Xt(null);t.fromInt(30);for(var n=0,i=function(d,h){return d|h},o=+new Date,s,a=0;r.keys===null&&(e<=0||a<e);){if(r.state===0){var c=r.p===null?r.pBits:r.qBits,u=c-1;r.pqState===0?(r.num=new Xt(c,r.rng),r.num.testBit(u)||r.num.bitwiseTo(Xt.ONE.shiftLeft(u),i,r.num),r.num.dAddOffset(31-r.num.mod(t).byteValue(),0),n=0,++r.pqState):r.pqState===1?r.num.bitLength()>c?r.pqState=0:r.num.isProbablePrime(aSe(r.num.bitLength()))?++r.pqState:r.num.dAddOffset(Jxe[n++%8],0):r.pqState===2?r.pqState=r.num.subtract(Xt.ONE).gcd(r.e).compareTo(Xt.ONE)===0?3:0:r.pqState===3&&(r.pqState=0,r.p===null?r.p=r.num:r.q=r.num,r.p!==null&&r.q!==null&&++r.state,r.num=null)}else if(r.state===1)r.p.compareTo(r.q)<0&&(r.num=r.p,r.p=r.q,r.q=r.num),++r.state;else if(r.state===2)r.p1=r.p.subtract(Xt.ONE),r.q1=r.q.subtract(Xt.ONE),r.phi=r.p1.multiply(r.q1),++r.state;else if(r.state===3)r.phi.gcd(r.e).compareTo(Xt.ONE)===0?++r.state:(r.p=null,r.q=null,r.state=0);else if(r.state===4)r.n=r.p.multiply(r.q),r.n.bitLength()===r.bits?++r.state:(r.q=null,r.state=0);else if(r.state===5){var l=r.e.modInverse(r.phi);r.keys={privateKey:ht.rsa.setPrivateKey(r.n,r.e,l,r.p,r.q,l.mod(r.p1),l.mod(r.q1),r.q.modInverse(r.p)),publicKey:ht.rsa.setPublicKey(r.n,r.e)}}s=+new Date,a+=s-o,o=s}return r.keys!==null};ht.rsa.generateKeyPair=function(r,e,t,n){if(arguments.length===1?typeof r=="object"?(t=r,r=void 0):typeof r=="function"&&(n=r,r=void 0):arguments.length===2?typeof r=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(t=e,e=void 0):(t=r,n=e,r=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof t=="function"&&(n=t,t=void 0):(n=t,t=e,e=void 0)),t=t||{},r===void 0&&(r=t.bits||2048),e===void 0&&(e=t.e||65537),!et.options.usePureJavaScript&&!t.prng&&r>=256&&r<=16384&&(e===65537||e===3)){if(n){if(kj("generateKeyPair"))return $A.generateKeyPair("rsa",{modulusLength:r,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:ht.privateKeyFromPem(u),publicKey:ht.publicKeyFromPem(c)})});if(Pj("generateKey")&&Pj("exportKey"))return Ss.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:Nj(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ss.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=ht.privateKeyFromAsn1(re.fromDer(et.util.createBuffer(a)));n(null,{privateKey:c,publicKey:ht.setRsaPublicKey(c.n,c.e)})}});if(Dj("generateKey")&&Dj("exportKey")){var i=Ss.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:Nj(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=Ss.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var d=l.target.result,h=ht.privateKeyFromAsn1(re.fromDer(et.util.createBuffer(d)));n(null,{privateKey:h,publicKey:ht.setRsaPublicKey(h.n,h.e)})},u.onerror=function(l){n(l)}},i.onerror=function(a){n(a)};return}}else if(kj("generateKeyPairSync")){var o=$A.generateKeyPairSync("rsa",{modulusLength:r,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ht.privateKeyFromPem(o.privateKey),publicKey:ht.publicKeyFromPem(o.publicKey)}}}var s=ht.rsa.createKeyPairGenerationState(r,e,t);if(!n)return ht.rsa.stepKeyPairGenerationState(s,0),s.keys;sSe(s,t,n)};ht.setRsaPublicKey=ht.rsa.setPublicKey=function(r,e){var t={n:r,e};return t.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return Lj(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return et.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,t,!0);return ht.rsa.encrypt(s,t,!0)},t.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=Gm(u,t,!0);var l=re.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),d={},h=[];if(!re.validate(l,iSe,d,h)){var f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw f.errors=h,f}var m=re.derToOid(d.algorithmIdentifier);if(!(m===et.oids.md2||m===et.oids.md5||m===et.oids.sha1||m===et.oids.sha224||m===et.oids.sha256||m===et.oids.sha384||m===et.oids.sha512||m===et.oids["sha512-224"]||m===et.oids["sha512-256"])){var f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw f.oid=m,f}if((m===et.oids.md2||m===et.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===d.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=Gm(u,t,!0),c===u}});var a=ht.rsa.decrypt(i,t,!0,!1);return o.verify(n,a,t.n.bitLength())},t};ht.setRsaPrivateKey=ht.rsa.setPrivateKey=function(r,e,t,n,i,o,s,a){var c={n:r,e,d:t,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,l,d){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var h=ht.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:Gm};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(f,m){return et.pkcs1.decode_rsa_oaep(m,f,d)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(f){return f}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(h,c,!1)},c.sign=function(u,l){var d=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:oSe},d=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},d=1);var h=l.encode(u,c.n.bitLength());return ht.rsa.encrypt(h,c,d)},c};ht.wrapRsaPrivateKey=function(r){return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(0).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(ht.oids.rsaEncryption).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")]),re.create(re.Class.UNIVERSAL,re.Type.OCTETSTRING,!1,re.toDer(r).getBytes())])};ht.privateKeyFromAsn1=function(r){var e={},t=[];if(re.validate(r,eSe,e,t)&&(r=re.fromDer(et.util.createBuffer(e.privateKey))),e={},t=[],!re.validate(r,tSe,e,t)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=t,n}var i,o,s,a,c,u,l,d;return i=et.util.createBuffer(e.privateKeyModulus).toHex(),o=et.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=et.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=et.util.createBuffer(e.privateKeyPrime1).toHex(),c=et.util.createBuffer(e.privateKeyPrime2).toHex(),u=et.util.createBuffer(e.privateKeyExponent1).toHex(),l=et.util.createBuffer(e.privateKeyExponent2).toHex(),d=et.util.createBuffer(e.privateKeyCoefficient).toHex(),ht.setRsaPrivateKey(new Xt(i,16),new Xt(o,16),new Xt(s,16),new Xt(a,16),new Xt(c,16),new Xt(u,16),new Xt(l,16),new Xt(d,16))};ht.privateKeyToAsn1=ht.privateKeyToRSAPrivateKey=function(r){return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,re.integerToDer(0).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.n)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.e)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.d)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.p)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.q)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.dP)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.dQ)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.qInv))])};ht.publicKeyFromAsn1=function(r){var e={},t=[];if(re.validate(r,nSe,e,t)){var n=re.derToOid(e.publicKeyOid);if(n!==ht.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}r=e.rsaPublicKey}if(t=[],!re.validate(r,rSe,e,t)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=t,i}var o=et.util.createBuffer(e.publicKeyModulus).toHex(),s=et.util.createBuffer(e.publicKeyExponent).toHex();return ht.setRsaPublicKey(new Xt(o,16),new Xt(s,16))};ht.publicKeyToAsn1=ht.publicKeyToSubjectPublicKeyInfo=function(r){return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.OID,!1,re.oidToDer(ht.oids.rsaEncryption).getBytes()),re.create(re.Class.UNIVERSAL,re.Type.NULL,!1,"")]),re.create(re.Class.UNIVERSAL,re.Type.BITSTRING,!1,[ht.publicKeyToRSAPublicKey(r)])])};ht.publicKeyToRSAPublicKey=function(r){return re.create(re.Class.UNIVERSAL,re.Type.SEQUENCE,!0,[re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.n)),re.create(re.Class.UNIVERSAL,re.Type.INTEGER,!1,g1(r.e))])};function Lj(r,e,t){var n=et.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(r.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=r.length,o.max=i-11,o}n.putByte(0),n.putByte(t);var s=i-3-r.length,a;if(t===0||t===1){a=t===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,l=et.random.getBytes(s),c=0;c<s;++c)a=l.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(r),n}function Gm(r,e,t,n){var i=Math.ceil(e.n.bitLength()/8),o=et.util.createBuffer(r),s=o.getByte(),a=o.getByte();if(s!==0||t&&a!==0&&a!==1||!t&&a!=2||t&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var l=o.getByte();if(l!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function sSe(r,e,t){typeof e=="function"&&(t=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(r.pBits,function(a,c){if(a)return t(a);if(r.p=c,r.q!==null)return s(a,r.q);o(r.qBits,s)})}function o(a,c){et.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return t(a);if(r.q=c,r.p.compareTo(r.q)<0){var u=r.p;r.p=r.q,r.q=u}if(r.p.subtract(Xt.ONE).gcd(r.e).compareTo(Xt.ONE)!==0){r.p=null,i();return}if(r.q.subtract(Xt.ONE).gcd(r.e).compareTo(Xt.ONE)!==0){r.q=null,o(r.qBits,s);return}if(r.p1=r.p.subtract(Xt.ONE),r.q1=r.q.subtract(Xt.ONE),r.phi=r.p1.multiply(r.q1),r.phi.gcd(r.e).compareTo(Xt.ONE)!==0){r.p=r.q=null,i();return}if(r.n=r.p.multiply(r.q),r.n.bitLength()!==r.bits){r.q=null,o(r.qBits,s);return}var l=r.e.modInverse(r.phi);r.keys={privateKey:ht.rsa.setPrivateKey(r.n,r.e,l,r.p,r.q,l.mod(r.p1),l.mod(r.q1),r.q.modInverse(r.p)),publicKey:ht.rsa.setPublicKey(r.n,r.e)},t(null,r.keys)}}function g1(r){var e=r.toString(16);e[0]>="8"&&(e="00"+e);var t=et.util.hexToBytes(e);return t.length>1&&(t.charCodeAt(0)===0&&!(t.charCodeAt(1)&128)||t.charCodeAt(0)===255&&(t.charCodeAt(1)&128)===128)?t.substr(1):t}function aSe(r){return r<=100?27:r<=150?18:r<=200?15:r<=250?12:r<=300?9:r<=350?8:r<=400?7:r<=500?6:r<=600?5:r<=800?4:r<=1250?3:2}function kj(r){return et.util.isNodejs&&typeof $A[r]=="function"}function Pj(r){return typeof Ss.globalScope<"u"&&typeof Ss.globalScope.crypto=="object"&&typeof Ss.globalScope.crypto.subtle=="object"&&typeof Ss.globalScope.crypto.subtle[r]=="function"}function Dj(r){return typeof Ss.globalScope<"u"&&typeof Ss.globalScope.msCrypto=="object"&&typeof Ss.globalScope.msCrypto.subtle=="object"&&typeof Ss.globalScope.msCrypto.subtle[r]=="function"}function Nj(r){for(var e=et.util.hexToBytes(r.toString(16)),t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}});var KA=O((dst,zj)=>{var Le=Kt();Xh();_2();Bm();v2();cf();OA();Vm();pl();fj();Hm();Tr();typeof Mj>"u"&&(Mj=Le.jsbn.BigInteger);var Mj,se=Le.asn1,wt=Le.pki=Le.pki||{};zj.exports=wt.pbe=Le.pbe=Le.pbe||{};var yl=wt.oids,cSe={name:"EncryptedPrivateKeyInfo",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},uSe={name:"PBES2Algorithms",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:se.Class.UNIVERSAL,type:se.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},lSe={name:"pkcs-12PbeParams",tagClass:se.Class.UNIVERSAL,type:se.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:se.Class.UNIVERSAL,type:se.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:se.Class.UNIVERSAL,type:se.Type.INTEGER,constructed:!1,capture:"iterations"}]};wt.encryptPrivateKeyInfo=function(r,e,t){t=t||{},t.saltSize=t.saltSize||8,t.count=t.count||2048,t.algorithm=t.algorithm||"aes128",t.prfAlgorithm=t.prfAlgorithm||"sha1";var n=Le.random.getBytesSync(t.saltSize),i=t.count,o=se.integerToDer(i),s,a,c;if(t.algorithm.indexOf("aes")===0||t.algorithm==="des"){var u,l,d;switch(t.algorithm){case"aes128":s=16,u=16,l=yl["aes128-CBC"],d=Le.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=yl["aes192-CBC"],d=Le.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=yl["aes256-CBC"],d=Le.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=yl.desCBC,d=Le.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=t.algorithm,h}var f="hmacWith"+t.prfAlgorithm.toUpperCase(),m=Vj(f),w=Le.pkcs5.pbkdf2(e,n,i,s,m),_=Le.random.getBytesSync(u),E=d(w);E.start(_),E.update(se.toDer(r)),E.finish(),c=E.output.getBytes();var S=dSe(n,o,s,f);a=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yl.pkcs5PBES2).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yl.pkcs5PBKDF2).getBytes()),S]),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(l).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,_)])])])}else if(t.algorithm==="3des"){s=24;var p=new Le.util.ByteBuffer(n),w=wt.pbe.generatePkcs12Key(e,p,1,i,s),_=wt.pbe.generatePkcs12Key(e,p,2,i,s),E=Le.des.createEncryptionCipher(w);E.start(_),E.update(se.toDer(r)),E.finish(),c=E.output.getBytes(),a=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(yl["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,n),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,o.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=t.algorithm,h}var g=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[a,se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,c)]);return g};wt.decryptPrivateKeyInfo=function(r,e){var t=null,n={},i=[];if(!se.validate(r,cSe,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=se.derToOid(n.encryptionOid),a=wt.pbe.getCipher(s,n.encryptionParams,e),c=Le.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(t=se.fromDer(a.output)),t};wt.encryptedPrivateKeyToPem=function(r,e){var t={type:"ENCRYPTED PRIVATE KEY",body:se.toDer(r).getBytes()};return Le.pem.encode(t,{maxline:e})};wt.encryptedPrivateKeyFromPem=function(r){var e=Le.pem.decode(r)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var t=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return se.fromDer(e.body)};wt.encryptRsaPrivateKey=function(r,e,t){if(t=t||{},!t.legacy){var n=wt.wrapRsaPrivateKey(wt.privateKeyToAsn1(r));return n=wt.encryptPrivateKeyInfo(n,e,t),wt.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(t.algorithm){case"aes128":i="AES-128-CBC",s=16,o=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=Le.random.getBytesSync(16),a=Le.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=Le.random.getBytesSync(8),a=Le.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=Le.random.getBytesSync(8),a=Le.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+t.algorithm+'".');throw c.algorithm=t.algorithm,c}var u=Le.pbe.opensslDeriveBytes(e,o.substr(0,8),s),l=a(u);l.start(o),l.update(se.toDer(wt.privateKeyToAsn1(r))),l.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Le.util.bytesToHex(o).toUpperCase()},body:l.output.getBytes()};return Le.pem.encode(d)};wt.decryptRsaPrivateKey=function(r,e){var t=null,n=Le.pem.decode(r)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=Le.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=Le.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=Le.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=Le.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=Le.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(d){return Le.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":o=8,s=function(d){return Le.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":o=16,s=function(d){return Le.rc2.createDecryptionCipher(d,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Le.util.hexToBytes(n.dekInfo.parameters),c=Le.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update(Le.util.createBuffer(n.body)),u.finish())t=u.output.getBytes();else return t}else t=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?t=wt.decryptPrivateKeyInfo(se.fromDer(t),e):t=se.fromDer(t),t!==null&&(t=wt.privateKeyFromAsn1(t)),t};wt.pbe.generatePkcs12Key=function(r,e,t,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in Le.md))throw new Error('"sha1" hash algorithm unavailable.');o=Le.md.sha1.create()}var c=o.digestLength,u=o.blockLength,l=new Le.util.ByteBuffer,d=new Le.util.ByteBuffer;if(r!=null){for(a=0;a<r.length;a++)d.putInt16(r.charCodeAt(a));d.putInt16(0)}var h=d.length(),f=e.length(),m=new Le.util.ByteBuffer;m.fillWithByte(t,u);var w=u*Math.ceil(f/u),_=new Le.util.ByteBuffer;for(a=0;a<w;a++)_.putByte(e.at(a%f));var E=u*Math.ceil(h/u),S=new Le.util.ByteBuffer;for(a=0;a<E;a++)S.putByte(d.at(a%h));var p=_;p.putBuffer(S);for(var g=Math.ceil(i/c),y=1;y<=g;y++){var b=new Le.util.ByteBuffer;b.putBytes(m.bytes()),b.putBytes(p.bytes());for(var x=0;x<n;x++)o.start(),o.update(b.getBytes()),b=o.digest();var v=new Le.util.ByteBuffer;for(a=0;a<u;a++)v.putByte(b.at(a%c));var T=Math.ceil(f/u)+Math.ceil(h/u),I=new Le.util.ByteBuffer;for(s=0;s<T;s++){var R=new Le.util.ByteBuffer(p.getBytes(u)),M=511;for(a=v.length()-1;a>=0;a--)M=M>>8,M+=v.at(a)+R.at(a),R.setAt(a,M&255);I.putBuffer(R)}p=I,l.putBuffer(b)}return l.truncate(l.length()-i),l};wt.pbe.getCipher=function(r,e,t){switch(r){case wt.oids.pkcs5PBES2:return wt.pbe.getCipherForPBES2(r,e,t);case wt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case wt.oids["pbewithSHAAnd40BitRC2-CBC"]:return wt.pbe.getCipherForPKCS12PBE(r,e,t);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=r,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};wt.pbe.getCipherForPBES2=function(r,e,t){var n={},i=[];if(!se.validate(e,uSe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(r=se.derToOid(n.kdfOid),r!==wt.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=r,o.supportedOids=["pkcs5PBKDF2"],o}if(r=se.derToOid(n.encOid),r!==wt.oids["aes128-CBC"]&&r!==wt.oids["aes192-CBC"]&&r!==wt.oids["aes256-CBC"]&&r!==wt.oids["des-EDE3-CBC"]&&r!==wt.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=r,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=Le.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(wt.oids[r]){case"aes128-CBC":c=16,u=Le.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=Le.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=Le.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=Le.des.createDecryptionCipher;break;case"desCBC":c=8,u=Le.des.createDecryptionCipher;break}var l=Fj(n.prfOid),d=Le.pkcs5.pbkdf2(t,s,a,c,l),h=n.encIv,f=u(d);return f.start(h),f};wt.pbe.getCipherForPKCS12PBE=function(r,e,t){var n={},i=[];if(!se.validate(e,lSe,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=Le.util.createBuffer(n.salt),a=Le.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,l;switch(r){case wt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=Le.des.startDecrypting;break;case wt.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(w,_){var E=Le.rc2.createDecryptionCipher(w,40);return E.start(_,null),E};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=r,o}var d=Fj(n.prfOid),h=wt.pbe.generatePkcs12Key(t,s,1,a,c,d);d.start();var f=wt.pbe.generatePkcs12Key(t,s,2,a,u,d);return l(h,f)};wt.pbe.opensslDeriveBytes=function(r,e,t,n){if(typeof n>"u"||n===null){if(!("md5"in Le.md))throw new Error('"md5" hash algorithm unavailable.');n=Le.md.md5.create()}e===null&&(e="");for(var i=[Uj(n,r+e)],o=16,s=1;o<t;++s,o+=16)i.push(Uj(n,i[s-1]+r+e));return i.join("").substr(0,t)};function Uj(r,e){return r.start().update(e).digest().getBytes()}function Fj(r){var e;if(!r)e="hmacWithSHA1";else if(e=wt.oids[se.derToOid(r)],!e){var t=new Error("Unsupported PRF OID.");throw t.oid=r,t.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],t}return Vj(e)}function Vj(r){var e=Le.md;switch(r){case"hmacWithSHA224":e=Le.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":r=r.substr(8).toLowerCase();break;default:var t=new Error("Unsupported PRF algorithm.");throw t.algorithm=r,t.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],t}if(!e||!(r in e))throw new Error("Unknown hash algorithm: "+r);return e[r].create()}function dSe(r,e,t,n){var i=se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OCTETSTRING,!1,r),se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(se.create(se.Class.UNIVERSAL,se.Type.INTEGER,!1,Le.util.hexToBytes(t.toString(16))),se.create(se.Class.UNIVERSAL,se.Type.SEQUENCE,!0,[se.create(se.Class.UNIVERSAL,se.Type.OID,!1,se.oidToDer(wt.oids[n]).getBytes()),se.create(se.Class.UNIVERSAL,se.Type.NULL,!1,"")])),i}});var bG=O((Eat,wG)=>{var Dr=Kt();v2();Tr();var t6=wG.exports=Dr.sha512=Dr.sha512||{};Dr.md.sha512=Dr.md.algorithms.sha512=t6;var gG=Dr.sha384=Dr.sha512.sha384=Dr.sha512.sha384||{};gG.create=function(){return t6.create("SHA-384")};Dr.md.sha384=Dr.md.algorithms.sha384=gG;Dr.sha512.sha256=Dr.sha512.sha256||{create:function(){return t6.create("SHA-512/256")}};Dr.md["sha512/256"]=Dr.md.algorithms["sha512/256"]=Dr.sha512.sha256;Dr.sha512.sha224=Dr.sha512.sha224||{create:function(){return t6.create("SHA-512/224")}};Dr.md["sha512/224"]=Dr.md.algorithms["sha512/224"]=Dr.sha512.sha224;t6.create=function(r){if(yG||CSe(),typeof r>"u"&&(r="SHA-512"),!(r in Sl))throw new Error("Invalid SHA-512 algorithm: "+r);for(var e=Sl[r],t=null,n=Dr.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(r){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:r.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Dr.util.createBuffer(),t=new Array(e.length);for(var u=0;u<e.length;++u)t[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Dr.util.encodeUtf8(c));var l=c.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=l[1],l[1]=l[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(c),mG(t,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Dr.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=u&a.blockLength-1;c.putBytes(oC.substr(0,a.blockLength-l));for(var d,h,f=a.fullMessageLength[0]*8,m=0;m<a.fullMessageLength.length-1;++m)d=a.fullMessageLength[m+1]*8,h=d/4294967296>>>0,f+=h,c.putInt32(f>>>0),f=d>>>0;c.putInt32(f);for(var w=new Array(t.length),m=0;m<t.length;++m)w[m]=t[m].slice(0);mG(w,i,c);var _=Dr.util.createBuffer(),E;r==="SHA-512"?E=w.length:r==="SHA-384"?E=w.length-2:E=w.length-4;for(var m=0;m<E;++m)_.putInt32(w[m][0]),(m!==E-1||r!=="SHA-512/224")&&_.putInt32(w[m][1]);return _},a};var oC=null,yG=!1,sC=null,Sl=null;function CSe(){oC="\x80",oC+=Dr.util.fillString("\0",128),sC=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Sl={},Sl["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Sl["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Sl["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Sl["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],yG=!0}function mG(r,e,t){for(var n,i,o,s,a,c,u,l,d,h,f,m,w,_,E,S,p,g,y,b,x,v,T,I,R,M,U,j,D,q,V,te,pe,ue,Ue,le=t.length();le>=128;){for(D=0;D<16;++D)e[D][0]=t.getInt32()>>>0,e[D][1]=t.getInt32()>>>0;for(;D<80;++D)te=e[D-2],q=te[0],V=te[1],n=((q>>>19|V<<13)^(V>>>29|q<<3)^q>>>6)>>>0,i=((q<<13|V>>>19)^(V<<3|q>>>29)^(q<<26|V>>>6))>>>0,ue=e[D-15],q=ue[0],V=ue[1],o=((q>>>1|V<<31)^(q>>>8|V<<24)^q>>>7)>>>0,s=((q<<31|V>>>1)^(q<<24|V>>>8)^(q<<25|V>>>7))>>>0,pe=e[D-7],Ue=e[D-16],V=i+pe[1]+s+Ue[1],e[D][0]=n+pe[0]+o+Ue[0]+(V/4294967296>>>0)>>>0,e[D][1]=V>>>0;for(w=r[0][0],_=r[0][1],E=r[1][0],S=r[1][1],p=r[2][0],g=r[2][1],y=r[3][0],b=r[3][1],x=r[4][0],v=r[4][1],T=r[5][0],I=r[5][1],R=r[6][0],M=r[6][1],U=r[7][0],j=r[7][1],D=0;D<80;++D)u=((x>>>14|v<<18)^(x>>>18|v<<14)^(v>>>9|x<<23))>>>0,l=((x<<18|v>>>14)^(x<<14|v>>>18)^(v<<23|x>>>9))>>>0,d=(R^x&(T^R))>>>0,h=(M^v&(I^M))>>>0,a=((w>>>28|_<<4)^(_>>>2|w<<30)^(_>>>7|w<<25))>>>0,c=((w<<4|_>>>28)^(_<<30|w>>>2)^(_<<25|w>>>7))>>>0,f=(w&E|p&(w^E))>>>0,m=(_&S|g&(_^S))>>>0,V=j+l+h+sC[D][1]+e[D][1],n=U+u+d+sC[D][0]+e[D][0]+(V/4294967296>>>0)>>>0,i=V>>>0,V=c+m,o=a+f+(V/4294967296>>>0)>>>0,s=V>>>0,U=R,j=M,R=T,M=I,T=x,I=v,V=b+i,x=y+n+(V/4294967296>>>0)>>>0,v=V>>>0,y=p,b=g,p=E,g=S,E=w,S=_,V=i+s,w=n+o+(V/4294967296>>>0)>>>0,_=V>>>0;V=r[0][1]+_,r[0][0]=r[0][0]+w+(V/4294967296>>>0)>>>0,r[0][1]=V>>>0,V=r[1][1]+S,r[1][0]=r[1][0]+E+(V/4294967296>>>0)>>>0,r[1][1]=V>>>0,V=r[2][1]+g,r[2][0]=r[2][0]+p+(V/4294967296>>>0)>>>0,r[2][1]=V>>>0,V=r[3][1]+b,r[3][0]=r[3][0]+y+(V/4294967296>>>0)>>>0,r[3][1]=V>>>0,V=r[4][1]+v,r[4][0]=r[4][0]+x+(V/4294967296>>>0)>>>0,r[4][1]=V>>>0,V=r[5][1]+I,r[5][0]=r[5][0]+T+(V/4294967296>>>0)>>>0,r[5][1]=V>>>0,V=r[6][1]+M,r[6][0]=r[6][0]+R+(V/4294967296>>>0)>>>0,r[6][1]=V>>>0,V=r[7][1]+j,r[7][0]=r[7][0]+U+(V/4294967296>>>0)>>>0,r[7][1]=V>>>0,le-=128}}});var E6=O((h0t,xW)=>{xW.exports=function(r){if(!r)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,t=Object.create(null),n=Object.create(null);function i(o,s){t[o]=s,e++,e>=r&&(e=0,n=t,t=Object.create(null))}return{has:function(o){return t[o]!==void 0||n[o]!==void 0},remove:function(o){t[o]!==void 0&&(t[o]=void 0),n[o]!==void 0&&(n[o]=void 0)},get:function(o){var s=t[o];if(s!==void 0)return s;if((s=n[o])!==void 0)return i(o,s),s},set:function(o,s){t[o]!==void 0?t[o]=s:i(o,s)},clear:function(){t=Object.create(null),n=Object.create(null)}}}});var Ig=O((K0t,RW)=>{RW.exports=function(r,e,t,n,i){for(e=e.split?e.split("."):e,n=0;n<e.length;n++)r=r?r[e[n]]:i;return r===i?t:r}});var FW=O((Kut,UW)=>{"use strict";var tIe=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;UW.exports=function(e,t){if(t==null&&(t=!1),e.length<2||e.length>255)return!1;var n=e[e.length-1];if(t){if(n!==".")return!1}else if(n===".")return!1;return tIe.test(e)}});var fY=O((Xlt,dY)=>{dY.exports=aR;var lY=128,vIe=127,EIe=~vIe,xIe=Math.pow(2,31);function aR(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw aR.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=xIe;)e[t++]=r&255|lY,r/=128;for(;r&EIe;)e[t++]=r&255|lY,r>>>=7;return e[t]=r|0,aR.bytes=t-n+1,e}});var mY=O((Qlt,pY)=>{pY.exports=cR;var SIe=128,hY=127;function cR(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a||i>49)throw cR.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&hY)<<i:(s&hY)*Math.pow(2,i),i+=7}while(s>=SIe);return cR.bytes=o-n,t}});var yY=O((Zlt,gY)=>{var TIe=Math.pow(2,7),IIe=Math.pow(2,14),AIe=Math.pow(2,21),CIe=Math.pow(2,28),RIe=Math.pow(2,35),kIe=Math.pow(2,42),PIe=Math.pow(2,49),DIe=Math.pow(2,56),NIe=Math.pow(2,63);gY.exports=function(r){return r<TIe?1:r<IIe?2:r<AIe?3:r<CIe?4:r<RIe?5:r<kIe?6:r<PIe?7:r<DIe?8:r<NIe?9:10}});var v1=O((Jlt,wY)=>{wY.exports={encode:fY(),decode:mY(),encodingLength:yY()}});var KY=O(($6,Jg)=>{(function(r,e){"use strict";var t={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(f){if(!Array.isArray(f)&&!ArrayBuffer.isView(f))return!1;for(var m=0;m<f.length;m++)if(!Number.isInteger(f[m])||f[m]<0||f[m]>255)return!1;return!0}function i(f,m){return(f&65535)*m+(((f>>>16)*m&65535)<<16)}function o(f,m){return f<<m|f>>>32-m}function s(f){return f^=f>>>16,f=i(f,2246822507),f^=f>>>13,f=i(f,3266489909),f^=f>>>16,f}function a(f,m){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var w=[0,0,0,0];return w[3]+=f[3]+m[3],w[2]+=w[3]>>>16,w[3]&=65535,w[2]+=f[2]+m[2],w[1]+=w[2]>>>16,w[2]&=65535,w[1]+=f[1]+m[1],w[0]+=w[1]>>>16,w[1]&=65535,w[0]+=f[0]+m[0],w[0]&=65535,[w[0]<<16|w[1],w[2]<<16|w[3]]}function c(f,m){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var w=[0,0,0,0];return w[3]+=f[3]*m[3],w[2]+=w[3]>>>16,w[3]&=65535,w[2]+=f[2]*m[3],w[1]+=w[2]>>>16,w[2]&=65535,w[2]+=f[3]*m[2],w[1]+=w[2]>>>16,w[2]&=65535,w[1]+=f[1]*m[3],w[0]+=w[1]>>>16,w[1]&=65535,w[1]+=f[2]*m[2],w[0]+=w[1]>>>16,w[1]&=65535,w[1]+=f[3]*m[1],w[0]+=w[1]>>>16,w[1]&=65535,w[0]+=f[0]*m[3]+f[1]*m[2]+f[2]*m[1]+f[3]*m[0],w[0]&=65535,[w[0]<<16|w[1],w[2]<<16|w[3]]}function u(f,m){return m%=64,m===32?[f[1],f[0]]:m<32?[f[0]<<m|f[1]>>>32-m,f[1]<<m|f[0]>>>32-m]:(m-=32,[f[1]<<m|f[0]>>>32-m,f[0]<<m|f[1]>>>32-m])}function l(f,m){return m%=64,m===0?f:m<32?[f[0]<<m|f[1]>>>32-m,f[1]<<m]:[f[1]<<m-32,0]}function d(f,m){return[f[0]^m[0],f[1]^m[1]]}function h(f){return f=d(f,[0,f[0]>>>1]),f=c(f,[4283543511,3981806797]),f=d(f,[0,f[0]>>>1]),f=c(f,[3301882366,444984403]),f=d(f,[0,f[0]>>>1]),f}t.x86.hash32=function(f,m){if(t.inputValidation&&!n(f))return e;m=m||0;for(var w=f.length%4,_=f.length-w,E=m,S=0,p=3432918353,g=461845907,y=0;y<_;y=y+4)S=f[y]|f[y+1]<<8|f[y+2]<<16|f[y+3]<<24,S=i(S,p),S=o(S,15),S=i(S,g),E^=S,E=o(E,13),E=i(E,5)+3864292196;switch(S=0,w){case 3:S^=f[y+2]<<16;case 2:S^=f[y+1]<<8;case 1:S^=f[y],S=i(S,p),S=o(S,15),S=i(S,g),E^=S}return E^=f.length,E=s(E),E>>>0},t.x86.hash128=function(f,m){if(t.inputValidation&&!n(f))return e;m=m||0;for(var w=f.length%16,_=f.length-w,E=m,S=m,p=m,g=m,y=0,b=0,x=0,v=0,T=597399067,I=2869860233,R=951274213,M=2716044179,U=0;U<_;U=U+16)y=f[U]|f[U+1]<<8|f[U+2]<<16|f[U+3]<<24,b=f[U+4]|f[U+5]<<8|f[U+6]<<16|f[U+7]<<24,x=f[U+8]|f[U+9]<<8|f[U+10]<<16|f[U+11]<<24,v=f[U+12]|f[U+13]<<8|f[U+14]<<16|f[U+15]<<24,y=i(y,T),y=o(y,15),y=i(y,I),E^=y,E=o(E,19),E+=S,E=i(E,5)+1444728091,b=i(b,I),b=o(b,16),b=i(b,R),S^=b,S=o(S,17),S+=p,S=i(S,5)+197830471,x=i(x,R),x=o(x,17),x=i(x,M),p^=x,p=o(p,15),p+=g,p=i(p,5)+2530024501,v=i(v,M),v=o(v,18),v=i(v,T),g^=v,g=o(g,13),g+=E,g=i(g,5)+850148119;switch(y=0,b=0,x=0,v=0,w){case 15:v^=f[U+14]<<16;case 14:v^=f[U+13]<<8;case 13:v^=f[U+12],v=i(v,M),v=o(v,18),v=i(v,T),g^=v;case 12:x^=f[U+11]<<24;case 11:x^=f[U+10]<<16;case 10:x^=f[U+9]<<8;case 9:x^=f[U+8],x=i(x,R),x=o(x,17),x=i(x,M),p^=x;case 8:b^=f[U+7]<<24;case 7:b^=f[U+6]<<16;case 6:b^=f[U+5]<<8;case 5:b^=f[U+4],b=i(b,I),b=o(b,16),b=i(b,R),S^=b;case 4:y^=f[U+3]<<24;case 3:y^=f[U+2]<<16;case 2:y^=f[U+1]<<8;case 1:y^=f[U],y=i(y,T),y=o(y,15),y=i(y,I),E^=y}return E^=f.length,S^=f.length,p^=f.length,g^=f.length,E+=S,E+=p,E+=g,S+=E,p+=E,g+=E,E=s(E),S=s(S),p=s(p),g=s(g),E+=S,E+=p,E+=g,S+=E,p+=E,g+=E,("00000000"+(E>>>0).toString(16)).slice(-8)+("00000000"+(S>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)+("00000000"+(g>>>0).toString(16)).slice(-8)},t.x64.hash128=function(f,m){if(t.inputValidation&&!n(f))return e;m=m||0;for(var w=f.length%16,_=f.length-w,E=[0,m],S=[0,m],p=[0,0],g=[0,0],y=[2277735313,289559509],b=[1291169091,658871167],x=0;x<_;x=x+16)p=[f[x+4]|f[x+5]<<8|f[x+6]<<16|f[x+7]<<24,f[x]|f[x+1]<<8|f[x+2]<<16|f[x+3]<<24],g=[f[x+12]|f[x+13]<<8|f[x+14]<<16|f[x+15]<<24,f[x+8]|f[x+9]<<8|f[x+10]<<16|f[x+11]<<24],p=c(p,y),p=u(p,31),p=c(p,b),E=d(E,p),E=u(E,27),E=a(E,S),E=a(c(E,[0,5]),[0,1390208809]),g=c(g,b),g=u(g,33),g=c(g,y),S=d(S,g),S=u(S,31),S=a(S,E),S=a(c(S,[0,5]),[0,944331445]);switch(p=[0,0],g=[0,0],w){case 15:g=d(g,l([0,f[x+14]],48));case 14:g=d(g,l([0,f[x+13]],40));case 13:g=d(g,l([0,f[x+12]],32));case 12:g=d(g,l([0,f[x+11]],24));case 11:g=d(g,l([0,f[x+10]],16));case 10:g=d(g,l([0,f[x+9]],8));case 9:g=d(g,[0,f[x+8]]),g=c(g,b),g=u(g,33),g=c(g,y),S=d(S,g);case 8:p=d(p,l([0,f[x+7]],56));case 7:p=d(p,l([0,f[x+6]],48));case 6:p=d(p,l([0,f[x+5]],40));case 5:p=d(p,l([0,f[x+4]],32));case 4:p=d(p,l([0,f[x+3]],24));case 3:p=d(p,l([0,f[x+2]],16));case 2:p=d(p,l([0,f[x+1]],8));case 1:p=d(p,[0,f[x]]),p=c(p,y),p=u(p,31),p=c(p,b),E=d(E,p)}return E=d(E,[0,f.length]),S=d(S,[0,f.length]),E=a(E,S),S=a(S,E),E=h(E),S=h(S),E=a(E,S),S=a(S,E),("00000000"+(E[0]>>>0).toString(16)).slice(-8)+("00000000"+(E[1]>>>0).toString(16)).slice(-8)+("00000000"+(S[0]>>>0).toString(16)).slice(-8)+("00000000"+(S[1]>>>0).toString(16)).slice(-8)},typeof $6<"u"?(typeof Jg<"u"&&Jg.exports&&($6=Jg.exports=t),$6.murmurHash3=t):typeof define=="function"&&define.amd?define([],function(){return t}):(t._murmurHash3=r.murmurHash3,t.noConflict=function(){return r.murmurHash3=t._murmurHash3,t._murmurHash3=e,t.noConflict=e,t},r.murmurHash3=t)})($6)});var GY=O((Bdt,jY)=>{jY.exports=KY()});var sX=O((Eft,oX)=>{var ER=class{constructor(e,t=12,n=8*1024,i=32*1024,o=64,s){this.bits=t,this.min=n,this.max=i,this.asModule=e,this.rabin=new e.Rabin(t,n,i,o,s),this.polynomial=s}fingerprint(e){let{__retain:t,__release:n,__allocArray:i,__getInt32Array:o,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(e.length/this.min)),u=t(i(s,c)),l=t(i(a,e)),d=this.rabin.fingerprint(l,u),h=o(d);n(l),n(u);let f=h.indexOf(0);return f>=0?h.subarray(0,f):h}};oX.exports=ER});var fX=O(G6=>{"use strict";var lAe=typeof BigUint64Array<"u",K6=Symbol(),j6=1024;function aX(r,e){let t=new Uint32Array(r),n=new Uint16Array(r);var i=t[e+-4>>>2]>>>1,o=e>>>1;if(i<=j6)return String.fromCharCode.apply(String,n.subarray(o,o+i));let s=[];do{let a=n[o+j6-1],c=a>=55296&&a<56320?j6-1:j6;s.push(String.fromCharCode.apply(String,n.subarray(o,o+=c))),i-=c}while(i>j6);return s.join("")+String.fromCharCode.apply(String,n.subarray(o,o+i))}function xR(r){let e={};function t(i,o){return i?aX(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,s,a,c){let u=e.memory||n.memory;throw Error("abort: "+t(u,o)+" at "+t(u,s)+":"+a+":"+c)},n.trace=n.trace||function(o,s){let a=e.memory||n.memory;console.log("trace: "+t(a,o)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},r.Math=r.Math||Math,r.Date=r.Date||Date,e}function SR(r,e){let t=e.exports,n=t.memory,i=t.table,o=t.__alloc,s=t.__retain,a=t.__rtti_base||-1;function c(b){let x=new Uint32Array(n.buffer),v=x[a>>>2];if((b>>>=0)>=v)throw Error("invalid id: "+b);return x[(a+4>>>2)+b*2]}function u(b){let x=new Uint32Array(n.buffer),v=x[a>>>2];if((b>>>=0)>=v)throw Error("invalid id: "+b);return x[(a+4>>>2)+b*2+1]}function l(b){return 31-Math.clz32(b>>>5&31)}function d(b){return 31-Math.clz32(b>>>14&31)}function h(b){let x=b.length,v=o(x<<1,1),T=new Uint16Array(n.buffer);for(var I=0,R=v>>>1;I<x;++I)T[R+I]=b.charCodeAt(I);return v}r.__allocString=h;function f(b){let x=n.buffer;if(new Uint32Array(x)[b+-8>>>2]!==1)throw Error("not a string: "+b);return aX(x,b)}r.__getString=f;function m(b,x,v){let T=n.buffer;if(v)switch(b){case 2:return new Float32Array(T);case 3:return new Float64Array(T)}else switch(b){case 0:return new(x?Int8Array:Uint8Array)(T);case 1:return new(x?Int16Array:Uint16Array)(T);case 2:return new(x?Int32Array:Uint32Array)(T);case 3:return new(x?BigInt64Array:BigUint64Array)(T)}throw Error("unsupported align: "+b)}function w(b,x){let v=c(b);if(!(v&3))throw Error("not an array: "+b+" @ "+v);let T=l(v),I=x.length,R=o(I<<T,0),M=o(v&2?16:12,b),U=new Uint32Array(n.buffer);U[M+0>>>2]=s(R),U[M+4>>>2]=R,U[M+8>>>2]=I<<T,v&2&&(U[M+12>>>2]=I);let j=m(T,v&1024,v&2048);if(v&8192)for(let D=0;D<I;++D)j[(R>>>T)+D]=s(x[D]);else j.set(x,R>>>T);return M}r.__allocArray=w;function _(b){let x=new Uint32Array(n.buffer),v=x[b+-8>>>2],T=c(v);if(!(T&1))throw Error("not an array: "+v);let I=l(T);var R=x[b+4>>>2];let M=T&2?x[b+12>>>2]:x[R+-4>>>2]>>>I;return m(I,T&1024,T&2048).subarray(R>>>=I,R+M)}r.__getArrayView=_;function E(b){let x=_(b),v=x.length,T=new Array(v);for(let I=0;I<v;I++)T[I]=x[I];return T}r.__getArray=E;function S(b){let x=n.buffer,v=new Uint32Array(x)[b+-4>>>2];return x.slice(b,b+v)}r.__getArrayBuffer=S;function p(b,x,v){return new b(g(b,x,v))}function g(b,x,v){let T=n.buffer,I=new Uint32Array(T),R=I[v+4>>>2];return new b(T,R,I[R+-4>>>2]>>>x)}r.__getInt8Array=p.bind(null,Int8Array,0),r.__getInt8ArrayView=g.bind(null,Int8Array,0),r.__getUint8Array=p.bind(null,Uint8Array,0),r.__getUint8ArrayView=g.bind(null,Uint8Array,0),r.__getUint8ClampedArray=p.bind(null,Uint8ClampedArray,0),r.__getUint8ClampedArrayView=g.bind(null,Uint8ClampedArray,0),r.__getInt16Array=p.bind(null,Int16Array,1),r.__getInt16ArrayView=g.bind(null,Int16Array,1),r.__getUint16Array=p.bind(null,Uint16Array,1),r.__getUint16ArrayView=g.bind(null,Uint16Array,1),r.__getInt32Array=p.bind(null,Int32Array,2),r.__getInt32ArrayView=g.bind(null,Int32Array,2),r.__getUint32Array=p.bind(null,Uint32Array,2),r.__getUint32ArrayView=g.bind(null,Uint32Array,2),lAe&&(r.__getInt64Array=p.bind(null,BigInt64Array,3),r.__getInt64ArrayView=g.bind(null,BigInt64Array,3),r.__getUint64Array=p.bind(null,BigUint64Array,3),r.__getUint64ArrayView=g.bind(null,BigUint64Array,3)),r.__getFloat32Array=p.bind(null,Float32Array,2),r.__getFloat32ArrayView=g.bind(null,Float32Array,2),r.__getFloat64Array=p.bind(null,Float64Array,3),r.__getFloat64ArrayView=g.bind(null,Float64Array,3);function y(b,x){let v=new Uint32Array(n.buffer);var T=v[b+-8>>>2];if(T<=v[a>>>2])do if(T==x)return!0;while(T=u(T));return!1}return r.__instanceof=y,r.memory=r.memory||n,r.table=r.table||i,dX(t,r)}function cX(r){return typeof Response<"u"&&r instanceof Response}async function uX(r,e){return cX(r=await r)?lX(r,e):SR(xR(e||(e={})),await WebAssembly.instantiate(r instanceof WebAssembly.Module?r:await WebAssembly.compile(r),e))}G6.instantiate=uX;function dAe(r,e){return SR(xR(e||(e={})),new WebAssembly.Instance(r instanceof WebAssembly.Module?r:new WebAssembly.Module(r),e))}G6.instantiateSync=dAe;async function lX(r,e){return WebAssembly.instantiateStreaming?SR(xR(e||(e={})),(await WebAssembly.instantiateStreaming(r,e)).instance):uX(cX(r=await r)?r.arrayBuffer():r,e)}G6.instantiateStreaming=lX;function dX(r,e){var t=e?Object.create(e):{},n=r.__argumentsLength?function(i){r.__argumentsLength.value=i}:r.__setArgumentsLength||r.__setargc||function(){};for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=r[i],s=i.split("."),a=t;for(;s.length>1;){let l=s.shift();Object.prototype.hasOwnProperty.call(a,l)||(a[l]={}),a=a[l]}let c=s[0],u=c.indexOf("#");if(u>=0){let l=c.substring(0,u),d=a[l];if(typeof d>"u"||!d.prototype){let h=function(...f){return h.wrap(h.prototype.constructor(0,...f))};h.prototype={valueOf:function(){return this[K6]}},h.wrap=function(f){return Object.create(h.prototype,{[K6]:{value:f,writable:!1}})},d&&Object.getOwnPropertyNames(d).forEach(f=>Object.defineProperty(h,f,Object.getOwnPropertyDescriptor(d,f))),a[l]=h}if(c=c.substring(u+1),a=a[l].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let h=r[i.replace("set:","get:")],f=r[i.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return h(this[K6])},set:function(m){f(this[K6],m)},enumerable:!0})}}else c==="constructor"?(a[c]=(...h)=>(n(h.length),o(...h))).original=o:(a[c]=function(...h){return n(h.length),o(this[K6],...h)}).original=o}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:r[i.replace("set:","get:")],set:r[i.replace("get:","set:")],enumerable:!0}):typeof o=="function"&&o!==n?(a[c]=(...l)=>(n(l.length),o(...l))).original=o:a[c]=o}return t}G6.demangle=dX});var pX=O((Sft,hX)=>{var{instantiateSync:fAe}=fX(),hAe=require("fs");TR.supported=typeof WebAssembly<"u";async function TR(r={}){return TR.supported?fAe(hAe.readFileSync(__dirname+"/../dist/rabin.wasm"),r):null}hX.exports=TR});var yX=O((Tft,gX)=>{var mX=sX(),pAe=pX(),mAe=async(r,e,t,n,i)=>{let o=await pAe();return new mX(o,r,e,t,n,i)};gX.exports={Rabin:mX,create:mAe}});var TX=O((jft,SX)=>{"use strict";SX.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,t,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,i=t;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let t=0,n,i;for(;t<this.length&&!n;)i=this.get(t),n=e(i),t++;return n?i:void 0}_internalPositionFor(e,t){let n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let a=this._bitArrays.slice(0,n).reduce(SAe,0),c=~(4294967295<<o+1),u=xX(i&c);return a+u-1}_bytePosFor(e,t){let n=Math.floor(e/7),i=n+1;for(;!t&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*7}_unsetBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*7)}_setInternalPos(e,t,n,i){let o=this._data,s=[t,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{let a=Math.round(o.length/2);this._data=o.slice(0,a).concat(s).concat(o.slice(a))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(TAe),this._changedData=!1}bitField(){let e=[],t=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let c=Math.min(n,t),u=~(255<<c),l=o&u;i|=l<<8-t,o=o>>>c,n-=c,t-=c,(!t||!n&&!s.length)&&(e.push(i),i=0,t=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(IAe)}};function SAe(r,e){return r+xX(e)}function xX(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function TAe(r,e){return r[0]-e[0]}function IAe(r){return r[1]}});var qX=O((H4t,NR)=>{"use strict";var WAe=Object.prototype.hasOwnProperty,Gi="~";function Y6(){}Object.create&&(Y6.prototype=Object.create(null),new Y6().__proto__||(Gi=!1));function YAe(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function zX(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new YAe(t,n||r,i),s=Gi?Gi+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function cy(r,e){--r._eventsCount===0?r._events=new Y6:delete r._events[e]}function Ei(){this._events=new Y6,this._eventsCount=0}Ei.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)WAe.call(t,n)&&e.push(Gi?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Ei.prototype.listeners=function(e){var t=Gi?Gi+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Ei.prototype.listenerCount=function(e){var t=Gi?Gi+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Ei.prototype.emit=function(e,t,n,i,o,s){var a=Gi?Gi+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,l,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,o),!0;case 6:return c.fn.call(c.context,t,n,i,o,s),!0}for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var h=c.length,f;for(d=0;d<h;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];c[d].fn.apply(c[d].context,l)}}return!0};Ei.prototype.on=function(e,t,n){return zX(this,e,t,n,!1)};Ei.prototype.once=function(e,t,n){return zX(this,e,t,n,!0)};Ei.prototype.removeListener=function(e,t,n,i){var o=Gi?Gi+e:e;if(!this._events[o])return this;if(!t)return cy(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&cy(this,o);else{for(var a=0,c=[],u=s.length;a<u;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:cy(this,o)}return this};Ei.prototype.removeAllListeners=function(e){var t;return e?(t=Gi?Gi+e:e,this._events[t]&&cy(this,t)):(this._events=new Y6,this._eventsCount=0),this};Ei.prototype.off=Ei.prototype.removeListener;Ei.prototype.addListener=Ei.prototype.on;Ei.prefixed=Gi;Ei.EventEmitter=Ei;typeof NR<"u"&&(NR.exports=Ei)});var pQ=O((dht,hQ)=>{"use strict";hQ.exports=require("constants")});var bJ=O((b8t,wJ)=>{"use strict";var yJ="./fetch.node";typeof XMLHttpRequest=="function"&&(yJ="./fetch.browser");var XPe=require(yJ);wJ.exports=XPe});var _J=O(Wy=>{"use strict";var Nk=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}};Wy.TimeoutError=Nk;var Ok=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}};Wy.AbortError=Ok;var Lk=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};Wy.HTTPError=Lk});var EJ=O((v8t,vJ)=>{"use strict";async function*QPe(r,e={}){let t=r.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&t.cancel(),t.releaseLock()}}vJ.exports=QPe});var SJ=O((E8t,xJ)=>{"use strict";var ZPe=async r=>{let e=[];for await(let t of r)e.push(t);return e};xJ.exports=ZPe});var T8=O((x8t,kJ)=>{"use strict";var{fetch:JPe,Request:eDe,Headers:tDe}=bJ(),{TimeoutError:Bk,HTTPError:CJ}=_J(),TJ=FS().bind({ignoreUndefined:!0}),{URL:IJ,URLSearchParams:AJ}=Em(),rDe=va(),nDe=EJ(),{isBrowser:iDe,isWebWorker:oDe}=fh(),sDe=SJ(),aDe=(r,e,t)=>{if(e===void 0)return r;let n=Date.now(),i=()=>Date.now()-n>=e;return new Promise((o,s)=>{let a=setTimeout(()=>{i()&&(s(new Bk),t.abort())},e),c=u=>d=>{if(clearTimeout(a),i()){s(new Bk);return}u(d)};r.then(c(o),c(s))})},cDe={throwHttpErrors:!0,credentials:"same-origin"},xi=class{constructor(e={}){this.opts=TJ(cDe,e)}async fetch(e,t={}){let n=TJ(this.opts,t),i=new tDe(n.headers);if(typeof e!="string"&&!(e instanceof IJ||e instanceof eDe))throw new TypeError("`resource` must be a string, URL, or Request");let o=new IJ(e.toString(),n.base),{searchParams:s,transformSearchParams:a,json:c}=n;s&&(typeof a=="function"?o.search=a(new AJ(n.searchParams)):o.search=new AJ(n.searchParams)),c&&(n.body=JSON.stringify(n.json),i.set("content-type","application/json"));let u=new AbortController,l=rDe([u.signal,n.signal]);globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(iDe||oDe)&&(n.body=new Blob(await sDe(nDe(n.body))));let d=await aDe(JPe(o.toString(),{...n,signal:l,timeout:void 0,headers:i,duplex:"half"}),n.timeout,u);if(!d.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(d),new CJ(d);return d.iterator=async function*(){yield*RJ(d.body)},d.ndjson=async function*(){for await(let h of uDe(d.iterator()))t.transform?yield t.transform(h):yield h},d}post(e,t={}){return this.fetch(e,{...t,method:"POST"})}get(e,t={}){return this.fetch(e,{...t,method:"GET"})}put(e,t={}){return this.fetch(e,{...t,method:"PUT"})}delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}options(e,t={}){return this.fetch(e,{...t,method:"OPTIONS"})}},uDe=async function*(r){let e=new TextDecoder,t="";for await(let n of r){t+=e.decode(n,{stream:!0});let i=t.split(/\r?\n/);for(let o=0;o<i.length-1;o++){let s=i[o].trim();s.length>0&&(yield JSON.parse(s))}t=i[i.length-1]}t+=e.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},RJ=r=>{if(lDe(r))return r;if(fDe(r)){let e=r[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(t){return r.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:t})}}}}}if(dDe(r)){let e=r.getReader();return async function*(){try{for(;;){let{done:t,value:n}=await e.read();if(t)return;n&&(yield n)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},lDe=r=>typeof r=="object"&&r!==null&&typeof r[Symbol.asyncIterator]=="function",dDe=r=>r&&typeof r.getReader=="function",fDe=r=>Object.prototype.hasOwnProperty.call(r,"readable")&&Object.prototype.hasOwnProperty.call(r,"writable");xi.HTTPError=CJ;xi.TimeoutError=Bk;xi.streamToAsyncIterator=RJ;xi.post=(r,e)=>new xi(e).post(r,e);xi.get=(r,e)=>new xi(e).get(r,e);xi.put=(r,e)=>new xi(e).put(r,e);xi.delete=(r,e)=>new xi(e).delete(r,e);xi.options=(r,e)=>new xi(e).options(r,e);kJ.exports=xi});var ete=O((iP,Jee)=>{"use strict";Object.defineProperty(iP,"__esModule",{value:!0});hw.BASE=2166136261;function hw(r,e=hw.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}iP.default=hw;Jee.exports=hw});var Ite=O((hwt,Sw)=>{"use strict";Sw.exports=VNe;Sw.exports.format=Ste;Sw.exports.parse=Tte;var MNe=/\B(?=(\d{3})+(?!\d))/g,UNe=/(?:\.0*|(\.[^0]+)0+)$/,tu={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},FNe=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function VNe(r,e){return typeof r=="string"?Tte(r):typeof r=="number"?Ste(r,e):null}function Ste(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,s=!!(e&&e.fixedDecimals),a=e&&e.unit||"";(!a||!tu[a.toLowerCase()])&&(t>=tu.pb?a="PB":t>=tu.tb?a="TB":t>=tu.gb?a="GB":t>=tu.mb?a="MB":t>=tu.kb?a="KB":a="B");var c=r/tu[a.toLowerCase()],u=c.toFixed(o);return s||(u=u.replace(UNe,"$1")),n&&(u=u.split(".").map(function(l,d){return d===0?l.replace(MNe,n):l}).join(".")),u+i+a}function Tte(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=FNe.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(tu[n]*t)}});var rre=O((zbt,tre)=>{tre.exports=function(r,e){for(var t=[],n=0;n<r.length;n++){var i=e(r[n],n);iOe(i)?t.push.apply(t,i):t.push(i)}return t};var iOe=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var are=O((qbt,sre)=>{"use strict";sre.exports=ire;function ire(r,e,t){r instanceof RegExp&&(r=nre(r,t)),e instanceof RegExp&&(e=nre(e,t));var n=ore(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function nre(r,e){var t=e.match(r);return t?t[0]:null}ire.range=ore;function ore(r,e,t){var n,i,o,s,a,c=t.indexOf(r),u=t.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(r===e)return[c,u];for(n=[],o=t.length;l>=0&&!a;)l==c?(n.push(l),c=t.indexOf(r,l+1)):n.length==1?a=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=t.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}});var mre=O(($bt,pre)=>{var oOe=rre(),cre=are();pre.exports=cOe;var ure="\0SLASH"+Math.random()+"\0",lre="\0OPEN"+Math.random()+"\0",CP="\0CLOSE"+Math.random()+"\0",dre="\0COMMA"+Math.random()+"\0",fre="\0PERIOD"+Math.random()+"\0";function AP(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function sOe(r){return r.split("\\\\").join(ure).split("\\{").join(lre).split("\\}").join(CP).split("\\,").join(dre).split("\\.").join(fre)}function aOe(r){return r.split(ure).join("\\").split(lre).join("{").split(CP).join("}").split(dre).join(",").split(fre).join(".")}function hre(r){if(!r)return[""];var e=[],t=cre("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,o=t.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=hre(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function cOe(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),T4(sOe(r),!0).map(aOe)):[]}function uOe(r){return"{"+r+"}"}function lOe(r){return/^-?0\d/.test(r)}function dOe(r,e){return r<=e}function fOe(r,e){return r>=e}function T4(r,e){var t=[],n=cre("{","}",r);if(!n||/\$$/.test(n.pre))return[r];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+CP+n.post,T4(r)):[r];var c;if(s)c=n.body.split(/\.\./);else if(c=hre(n.body),c.length===1&&(c=T4(c[0],!1).map(uOe),c.length===1)){var l=n.post.length?T4(n.post,!1):[""];return l.map(function(R){return n.pre+c[0]+R})}var u=n.pre,l=n.post.length?T4(n.post,!1):[""],d;if(s){var h=AP(c[0]),f=AP(c[1]),m=Math.max(c[0].length,c[1].length),w=c.length==3?Math.abs(AP(c[2])):1,_=dOe,E=f<h;E&&(w*=-1,_=fOe);var S=c.some(lOe);d=[];for(var p=h;_(p,f);p+=w){var g;if(o)g=String.fromCharCode(p),g==="\\"&&(g="");else if(g=String(p),S){var y=m-g.length;if(y>0){var b=new Array(y+1).join("0");p<0?g="-"+b+g.slice(1):g=b+g}}d.push(g)}}else d=oOe(c,function(I){return T4(I,!1)});for(var x=0;x<d.length;x++)for(var v=0;v<l.length;v++){var T=u+d[x]+l[v];(!e||s||T)&&t.push(T)}return t}});var vre=O((Kbt,_re)=>{_re.exports=Wo;Wo.Minimatch=gi;var Q8=function(){try{return require("path")}catch{}}()||{sep:"/"};Wo.sep=Q8.sep;var PP=Wo.GLOBSTAR=gi.GLOBSTAR={},hOe=mre(),gre={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},RP="[^/]",kP=RP+"*?",pOe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",mOe="(?:(?!(?:\\/|^)\\.).)*?",yre=gOe("().*{}+?[]^$\\!");function gOe(r){return r.split("").reduce(function(e,t){return e[t]=!0,e},{})}var wre=/\/+/;Wo.filter=yOe;function yOe(r,e){return e=e||{},function(t,n,i){return Wo(t,r,e)}}function nu(r,e){e=e||{};var t={};return Object.keys(r).forEach(function(n){t[n]=r[n]}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}Wo.defaults=function(r){if(!r||typeof r!="object"||!Object.keys(r).length)return Wo;var e=Wo,t=function(i,o,s){return e(i,o,nu(r,s))};return t.Minimatch=function(i,o){return new e.Minimatch(i,nu(r,o))},t.Minimatch.defaults=function(i){return e.defaults(nu(r,i)).Minimatch},t.filter=function(i,o){return e.filter(i,nu(r,o))},t.defaults=function(i){return e.defaults(nu(r,i))},t.makeRe=function(i,o){return e.makeRe(i,nu(r,o))},t.braceExpand=function(i,o){return e.braceExpand(i,nu(r,o))},t.match=function(n,i,o){return e.match(n,i,nu(r,o))},t};gi.defaults=function(r){return Wo.defaults(r).Minimatch};function Wo(r,e,t){return kw(e),t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:new gi(e,t).match(r)}function gi(r,e){if(!(this instanceof gi))return new gi(r,e);kw(r),e||(e={}),r=r.trim(),!e.allowWindowsEscape&&Q8.sep!=="/"&&(r=r.split(Q8.sep).join("/")),this.options=e,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}gi.prototype.debug=function(){};gi.prototype.make=wOe;function wOe(){var r=this.pattern,e=this.options;if(!e.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(wre)}),this.debug(this.pattern,t),t=t.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}gi.prototype.parseNegate=bOe;function bOe(){var r=this.pattern,e=!1,t=this.options,n=0;if(!t.nonegate){for(var i=0,o=r.length;i<o&&r.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=r.substr(n)),this.negate=e}}Wo.braceExpand=function(r,e){return bre(r,e)};gi.prototype.braceExpand=bre;function bre(r,e){return e||(this instanceof gi?e=this.options:e={}),r=typeof r>"u"?this.pattern:r,kw(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:hOe(r)}var _Oe=1024*64,kw=function(r){if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>_Oe)throw new TypeError("pattern is too long")};gi.prototype.parse=vOe;var Rw={};function vOe(r,e){kw(r);var t=this.options;if(r==="**")if(t.noglobstar)r="*";else return PP;if(r==="")return"";var n="",i=!!t.nocase,o=!1,s=[],a=[],c,u=!1,l=-1,d=-1,h=r.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function m(){if(c){switch(c){case"*":n+=kP,i=!0;break;case"?":n+=RP,i=!0;break;default:n+="\\"+c;break}f.debug("clearStateChar %j %j",c,n),c=!1}}for(var w=0,_=r.length,E;w<_&&(E=r.charAt(w));w++){if(this.debug("%s	%s %s %j",r,w,n,E),o&&yre[E]){n+="\\"+E,o=!1;continue}switch(E){case"/":return!1;case"\\":m(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,w,n,E),u){this.debug("  in class"),E==="!"&&w===d+1&&(E="^"),n+=E;continue}f.debug("call clearStateChar %j",c),m(),c=E,t.noext&&m();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}s.push({type:c,start:w-1,reStart:n.length,open:gre[c].open,close:gre[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!s.length){n+="\\)";continue}m(),i=!0;var S=s.pop();n+=S.close,S.type==="!"&&a.push(S),S.reEnd=n.length;continue;case"|":if(u||!s.length||o){n+="\\|",o=!1;continue}m(),n+="|";continue;case"[":if(m(),u){n+="\\"+E;continue}u=!0,d=w,l=n.length,n+=E;continue;case"]":if(w===d+1||!u){n+="\\"+E,o=!1;continue}var p=r.substring(d+1,w);try{RegExp("["+p+"]")}catch{var g=this.parse(p,Rw);n=n.substr(0,l)+"\\["+g[0]+"\\]",i=i||g[1],u=!1;continue}i=!0,u=!1,n+=E;continue;default:m(),o?o=!1:yre[E]&&!(E==="^"&&u)&&(n+="\\"),n+=E}}for(u&&(p=r.substr(d+1),g=this.parse(p,Rw),n=n.substr(0,l)+"\\["+g[0],i=i||g[1]),S=s.pop();S;S=s.pop()){var y=n.slice(S.reStart+S.open.length);this.debug("setting tail",n,S),y=y.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ue,Ue,le){return le||(le="\\"),Ue+Ue+le+"|"}),this.debug(`tail=%j
   %s`,y,y,S,n);var b=S.type==="*"?kP:S.type==="?"?RP:"\\"+S.type;i=!0,n=n.slice(0,S.reStart)+b+"\\("+y}m(),o&&(n+="\\\\");var x=!1;switch(n.charAt(0)){case"[":case".":case"(":x=!0}for(var v=a.length-1;v>-1;v--){var T=a[v],I=n.slice(0,T.reStart),R=n.slice(T.reStart,T.reEnd-8),M=n.slice(T.reEnd-8,T.reEnd),U=n.slice(T.reEnd);M+=U;var j=I.split("(").length-1,D=U;for(w=0;w<j;w++)D=D.replace(/\)[+*?]?/,"");U=D;var q="";U===""&&e!==Rw&&(q="$");var V=I+R+U+q+M;n=V}if(n!==""&&i&&(n="(?=.)"+n),x&&(n=h+n),e===Rw)return[n,i];if(!i)return xOe(r);var te=t.nocase?"i":"";try{var pe=new RegExp("^"+n+"$",te)}catch{return new RegExp("$.")}return pe._glob=r,pe._src=n,pe}Wo.makeRe=function(r,e){return new gi(r,e||{}).makeRe()};gi.prototype.makeRe=EOe;function EOe(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?kP:e.dot?pOe:mOe,n=e.nocase?"i":"",i=r.map(function(o){return o.map(function(s){return s===PP?t:typeof s=="string"?SOe(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}Wo.match=function(r,e,t){t=t||{};var n=new gi(e,t);return r=r.filter(function(i){return n.match(i)}),n.options.nonull&&!r.length&&r.push(e),r};gi.prototype.match=function(e,t){if(typeof t>"u"&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var n=this.options;Q8.sep!=="/"&&(e=e.split(Q8.sep).join("/")),e=e.split(wre),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o,s;for(s=e.length-1;s>=0&&(o=e[s],!o);s--);for(s=0;s<i.length;s++){var a=i[s],c=e;n.matchBase&&a.length===1&&(c=[o]);var u=this.matchOne(c,a,t);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};gi.prototype.matchOne=function(r,e,t){var n=this.options;this.debug("matchOne",{this:this,file:r,pattern:e}),this.debug("matchOne",r.length,e.length);for(var i=0,o=0,s=r.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c=e[o],u=r[i];if(this.debug(e,c,u),c===!1)return!1;if(c===PP){this.debug("GLOBSTAR",[e,c,u]);var l=i,d=o+1;if(d===a){for(this.debug("** at the end");i<s;i++)if(r[i]==="."||r[i]===".."||!n.dot&&r[i].charAt(0)===".")return!1;return!0}for(;l<s;){var h=r[l];if(this.debug(`
globstar while`,r,l,e,d,h),this.matchOne(r.slice(l),e.slice(d),t))return this.debug("globstar found match!",l,s,h),!0;if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",r,l,e,d);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(t&&(this.debug(`
>>> no match, partial?`,r,l,e,d),l===s))}var f;if(typeof c=="string"?(f=u===c,this.debug("string match",c,u,f)):(f=u.match(c),this.debug("pattern match",c,u,f)),!f)return!1}if(i===s&&o===a)return!0;if(i===s)return t;if(o===a)return i===s-1&&r[i]==="";throw new Error("wtf?")};function xOe(r){return r.replace(/\\(.)/g,"$1")}function SOe(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var DP=O((jbt,Tre)=>{"use strict";var Ere=require("fs").promises,Z8=require("path"),xre=vre();async function*TOe(r,e,t={}){let n=Z8.resolve(r),i=Z8.relative(t.cwd||process.cwd(),r);if((await Ere.stat(n)).isDirectory()){for await(let s of Sre(n,"",e,t))yield s;return}xre(i,e,t)&&(yield t.absolute?n:i)}async function*Sre(r,e,t,n){for await(let i of await Ere.opendir(Z8.join(r,e))){let o=Z8.join(e,i.name),s=Z8.join(r,e,i.name),a=xre(o,t,n),c=i.isDirectory();c&&n.nodir&&(a=!1),a&&(yield n.absolute?s:o),c&&(yield*Sre(r,o,t,n))}}Tre.exports=TOe});var Cre=O((Gbt,Are)=>{var{promisify:Ire}=require("util"),iu=require("fs"),IOe=r=>{if(!r)r={mode:511,fs:iu};else if(typeof r=="object")r={mode:511,fs:iu,...r};else if(typeof r=="number")r={mode:r,fs:iu};else if(typeof r=="string")r={mode:parseInt(r,8),fs:iu};else throw new TypeError("invalid options argument");return r.mkdir=r.mkdir||r.fs.mkdir||iu.mkdir,r.mkdirAsync=Ire(r.mkdir),r.stat=r.stat||r.fs.stat||iu.stat,r.statAsync=Ire(r.stat),r.statSync=r.statSync||r.fs.statSync||iu.statSync,r.mkdirSync=r.mkdirSync||r.fs.mkdirSync||iu.mkdirSync,r};Are.exports=IOe});var kre=O((Hbt,Rre)=>{var AOe=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:COe,parse:ROe}=require("path"),kOe=r=>{if(/\0/.test(r))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:r,code:"ERR_INVALID_ARG_VALUE"});if(r=COe(r),AOe==="win32"){let e=/[*|"<>?:]/,{root:t}=ROe(r);if(e.test(r.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:r,code:"EINVAL"})}return r};Rre.exports=kOe});var Lre=O((Wbt,Ore)=>{var{dirname:Pre}=require("path"),Dre=(r,e,t=void 0)=>t===e?Promise.resolve():r.statAsync(e).then(n=>n.isDirectory()?t:void 0,n=>n.code==="ENOENT"?Dre(r,Pre(e),e):void 0),Nre=(r,e,t=void 0)=>{if(t!==e)try{return r.statSync(e).isDirectory()?t:void 0}catch(n){return n.code==="ENOENT"?Nre(r,Pre(e),e):void 0}};Ore.exports={findMade:Dre,findMadeSync:Nre}});var LP=O((Ybt,Mre)=>{var{dirname:Bre}=require("path"),NP=(r,e,t)=>{e.recursive=!1;let n=Bre(r);return n===r?e.mkdirAsync(r,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(r,e).then(()=>t||r,i=>{if(i.code==="ENOENT")return NP(n,e).then(o=>NP(r,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(r).then(o=>{if(o.isDirectory())return t;throw i},()=>{throw i})})},OP=(r,e,t)=>{let n=Bre(r);if(e.recursive=!1,n===r)try{return e.mkdirSync(r,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(r,e),t||r}catch(i){if(i.code==="ENOENT")return OP(r,e,OP(n,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(r).isDirectory())throw i}catch{throw i}}};Mre.exports={mkdirpManual:NP,mkdirpManualSync:OP}});var Vre=O((Xbt,Fre)=>{var{dirname:Ure}=require("path"),{findMade:POe,findMadeSync:DOe}=Lre(),{mkdirpManual:NOe,mkdirpManualSync:OOe}=LP(),LOe=(r,e)=>(e.recursive=!0,Ure(r)===r?e.mkdirAsync(r,e):POe(e,r).then(n=>e.mkdirAsync(r,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return NOe(r,e);throw i}))),BOe=(r,e)=>{if(e.recursive=!0,Ure(r)===r)return e.mkdirSync(r,e);let n=DOe(e,r);try{return e.mkdirSync(r,e),n}catch(i){if(i.code==="ENOENT")return OOe(r,e);throw i}};Fre.exports={mkdirpNative:LOe,mkdirpNativeSync:BOe}});var Kre=O((Qbt,$re)=>{var zre=require("fs"),MOe=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,BP=MOe.replace(/^v/,"").split("."),qre=+BP[0]>10||+BP[0]==10&&+BP[1]>=12,UOe=qre?r=>r.mkdir===zre.mkdir:()=>!1,FOe=qre?r=>r.mkdirSync===zre.mkdirSync:()=>!1;$re.exports={useNative:UOe,useNativeSync:FOe}});var Xre=O((Zbt,Yre)=>{var I4=Cre(),A4=kre(),{mkdirpNative:jre,mkdirpNativeSync:Gre}=Vre(),{mkdirpManual:Hre,mkdirpManualSync:Wre}=LP(),{useNative:VOe,useNativeSync:zOe}=Kre(),C4=(r,e)=>(r=A4(r),e=I4(e),VOe(e)?jre(r,e):Hre(r,e)),qOe=(r,e)=>(r=A4(r),e=I4(e),zOe(e)?Gre(r,e):Wre(r,e));C4.sync=qOe;C4.native=(r,e)=>jre(A4(r),I4(e));C4.manual=(r,e)=>Hre(A4(r),I4(e));C4.nativeSync=(r,e)=>Gre(A4(r),I4(e));C4.manualSync=(r,e)=>Wre(A4(r),I4(e));Yre.exports=C4});var Zre=O((Jbt,Qre)=>{"use strict";var $Oe=async function*(r,e){for await(let t of r)yield e(t)};Qre.exports=$Oe});var ene=O((e_t,Jre)=>{"use strict";async function*KOe(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}Jre.exports=KOe});var rne=O((t_t,tne)=>{"use strict";var jOe=ene();async function*GOe(r,e=1){for await(let t of jOe(r,e)){let n=t.map(i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}tne.exports=GOe});var cne=O((r_t,ane)=>{"use strict";var{open:HOe,write:WOe,close:ine,rename:YOe,fsync:XOe,unlink:QOe}=require("fs"),{join:ZOe,dirname:JOe}=require("path"),eLe=0;function MP(r,e,t){QOe(r,function(){t(e)})}function nne(r,e,t,n){ine(r,MP.bind(null,e,t,n))}function one(r,e,t,n,i){WOe(r,e,n,function(o,s){if(o){i(o);return}return s<t-n?one(r,e,t,n+s,i):i(null)})}function sne(r,e){HOe(r,"w",function(t,n){if(t)return t.code==="EMFILE"?sne(r,e):e(t);e(null,n)})}function tLe(r,e,t){let n=ZOe(JOe(r),"."+process.pid+"."+eLe++);sne(n,function(i,o){if(i){t(i);return}let s=Buffer.byteLength(e);one(o,e,s,0,function(a){if(a){nne(o,n,a,t);return}XOe(o,function(c){if(c){nne(o,n,c,t);return}ine(o,function(u){if(u){MP(n,u,t);return}YOe(n,r,l=>{if(l){MP(n,l,t);return}t(null)})})})}),e=null})}ane.exports=tLe});var hne=O(fne=>{"use strict";fne.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var qa=O((l_t,pne)=>{"use strict";pne.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var VP=O((d_t,mne)=>{"use strict";var FP=null;mne.exports=function(){return FP===null&&(FP={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),FP}});var $P=O(gne=>{"use strict";var zP=qa(),nLe=new Set(["buffer","view","utf8"]),qP=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!nLe.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new zP(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new zP(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new zP(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};gne.Encoding=qP});var HP=O(Nw=>{"use strict";var{Buffer:jP}=require("buffer")||{},{Encoding:GP}=$P(),iLe=VP(),e7=class extends GP{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new t7({encode:this.encode,decode:e=>this.decode(jP.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},t7=class extends GP{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new e7({encode:e=>{let t=this.encode(e);return jP.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},KP=class extends GP{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new e7({encode:e=>jP.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=iLe();return new t7({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Nw.BufferFormat=e7;Nw.ViewFormat=t7;Nw.UTF8Format=KP});var _ne=O(c3=>{"use strict";var{Buffer:Si}=require("buffer")||{Buffer:{isBuffer:()=>!1}},{textEncoder:wne,textDecoder:yne}=VP()(),{BufferFormat:r7,ViewFormat:WP,UTF8Format:bne}=HP(),Ow=r=>r;c3.utf8=new bne({encode:function(r){return Si.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?yne.decode(r):String(r)},decode:Ow,name:"utf8",createViewTranscoder(){return new WP({encode:function(r){return ArrayBuffer.isView(r)?r:wne.encode(r)},decode:function(r){return yne.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new r7({encode:function(r){return Si.isBuffer(r)?r:ArrayBuffer.isView(r)?Si.from(r.buffer,r.byteOffset,r.byteLength):Si.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});c3.json=new bne({encode:JSON.stringify,decode:JSON.parse,name:"json"});c3.buffer=new r7({encode:function(r){return Si.isBuffer(r)?r:ArrayBuffer.isView(r)?Si.from(r.buffer,r.byteOffset,r.byteLength):Si.from(String(r),"utf8")},decode:Ow,name:"buffer",createViewTranscoder(){return new WP({encode:function(r){return ArrayBuffer.isView(r)?r:Si.from(String(r),"utf8")},decode:function(r){return Si.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});c3.view=new WP({encode:function(r){return ArrayBuffer.isView(r)?r:wne.encode(r)},decode:Ow,name:"view",createBufferTranscoder(){return new r7({encode:function(r){return Si.isBuffer(r)?r:ArrayBuffer.isView(r)?Si.from(r.buffer,r.byteOffset,r.byteLength):Si.from(String(r),"utf8")},decode:Ow,name:`${this.name}+buffer`})}});c3.hex=new r7({encode:function(r){return Si.isBuffer(r)?r:Si.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});c3.base64=new r7({encode:function(r){return Si.isBuffer(r)?r:Si.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var xne=O(Ene=>{"use strict";var vne=qa(),Bw=_ne(),{Encoding:oLe}=$P(),{BufferFormat:sLe,ViewFormat:aLe,UTF8Format:cLe}=HP(),n7=Symbol("formats"),Lw=Symbol("encodings"),uLe=new Set(["buffer","view","utf8"]),YP=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>uLe.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Lw]=new Map,this[n7]=new Set(e);for(let t in Bw)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Lw].values()))}encoding(e){let t=this[Lw].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=hLe[e],!t)throw new vne(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=lLe(e)}let{name:n,format:i}=t;if(!this[n7].has(i))if(this[n7].has("view"))t=t.createViewTranscoder();else if(this[n7].has("buffer"))t=t.createBufferTranscoder();else if(this[n7].has("utf8"))t=t.createUTF8Transcoder();else throw new vne(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[Lw].set(o,t)}return t}};Ene.Transcoder=YP;function lLe(r){if(r instanceof oLe)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${pLe++}`;switch(dLe(r)){case"view":return new aLe({...r,name:t});case"utf8":return new cLe({...r,name:t});case"buffer":return new sLe({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function dLe(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var fLe={binary:Bw.buffer,"utf-8":Bw.utf8},hLe={...Bw,...fLe},pLe=0});var Tne=O((g_t,Sne)=>{Sne.exports=process.nextTick.bind(process)});var i7=O(XP=>{"use strict";var Ine=Tne();XP.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};XP.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){Ine(()=>e(null,t))}).catch(function(t){Ine(()=>e(t))})}});var Mw=O(QP=>{"use strict";QP.getCallback=function(r,e){return typeof r=="function"?r:e};QP.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var du=O(zw=>{"use strict";var{fromCallback:ZP}=i7(),Xo=qa(),{getOptions:JP,getCallback:Ane}=Mw(),u3=Symbol("promise"),k4=Symbol("callback"),L1=Symbol("working"),l3=Symbol("handleOne"),Xc=Symbol("handleMany"),eD=Symbol("autoClose"),uu=Symbol("finishWork"),B1=Symbol("returnMany"),su=Symbol("closing"),o7=Symbol("handleClose"),Uw=Symbol("closed"),s7=Symbol("closeCallbacks"),cu=Symbol("keyEncoding"),d3=Symbol("valueEncoding"),tD=Symbol("abortOnClose"),Fw=Symbol("legacy"),rD=Symbol("keys"),nD=Symbol("values"),au=Symbol("limit"),Fs=Symbol("count"),Vw=Object.freeze({}),mLe=()=>{},Cne=!1,a7=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Uw]=!1,this[s7]=[],this[L1]=!1,this[su]=!1,this[eD]=!1,this[k4]=null,this[l3]=this[l3].bind(this),this[Xc]=this[Xc].bind(this),this[o7]=this[o7].bind(this),this[cu]=t[cu],this[d3]=t[d3],this[Fw]=n,this[au]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[Fs]=0,this[tD]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Fs]}get limit(){return this[au]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,a)=>{o?i(o):this[Fw]?s===void 0&&a===void 0?n():n([s,a]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[su]?this.nextTick(e,new Xo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[L1]?this.nextTick(e,new Xo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[L1]=!0,this[k4]=e,this[Fs]>=this[au]?this.nextTick(this[l3],null):this._next(this[l3])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=Ane(t,n),n=ZP(n,u3),t=JP(t,Vw),Number.isInteger(e)?(this[su]?this.nextTick(n,new Xo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[L1]?this.nextTick(n,new Xo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[au]<1/0&&(e=Math.min(e,this[au]-this[Fs])),this[L1]=!0,this[k4]=n,e<=0?this.nextTick(this[Xc],null,[]):this._nextv(e,t,this[Xc])),n[u3]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[u3])}_nextv(e,t,n){let i=[],o=(s,a,c)=>{if(s)return n(s);if(this[Fw]?a===void 0&&c===void 0:a===void 0)return n(null,i);i.push(this[Fw]?[a,c]:a),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=Ane(e,t),t=ZP(t,u3),e=JP(e,Vw),this[su]?this.nextTick(t,new Xo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[L1]?this.nextTick(t,new Xo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[L1]=!0,this[k4]=t,this[eD]=!0,this[Fs]>=this[au]?this.nextTick(this[Xc],null,[]):this._all(e,this[Xc])),t[u3]}_all(e,t){let n=this[Fs],i=[],o=()=>{let a=this[au]<1/0?Math.min(1e3,this[au]-n):1e3;a<=0?this.nextTick(t,null,i):this._nextv(a,Vw,s)},s=(a,c)=>{a?t(a):c.length===0?t(null,i):(i.push.apply(i,c),n+=c.length,o())};o()}[uu](){let e=this[k4];return this[tD]&&e===null?mLe:(this[L1]=!1,this[k4]=null,this[su]&&this._close(this[o7]),e)}[B1](e,t,n){this[eD]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=JP(t,Vw),!this[su]){if(this[L1])throw new Xo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[cu]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Xo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=ZP(e,u3),this[Uw]?this.nextTick(e):this[su]?this[s7].push(e):(this[su]=!0,this[s7].push(e),this[L1]?this[tD]&&this[uu]()(new Xo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[o7])),e[u3]}_close(e){this.nextTick(e)}[o7](){this[Uw]=!0,this.db.detachResource(this);let e=this[s7];this[s7]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Uw]||await this.close()}}},P4=class extends a7{constructor(e,t){super(e,t,!0),this[rD]=t.keys!==!1,this[nD]=t.values!==!1}[l3](e,t,n){let i=this[uu]();if(e)return i(e);try{t=this[rD]&&t!==void 0?this[cu].decode(t):void 0,n=this[nD]&&n!==void 0?this[d3].decode(n):void 0}catch(o){return i(new lu("entry",o))}t===void 0&&n===void 0||this[Fs]++,i(null,t,n)}[Xc](e,t){let n=this[uu]();if(e)return this[B1](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[rD]&&o!==void 0?this[cu].decode(o):void 0,i[1]=this[nD]&&s!==void 0?this[d3].decode(s):void 0}}catch(i){return this[B1](n,new lu("entries",i))}this[Fs]+=t.length,this[B1](n,null,t)}end(e){return!Cne&&typeof console<"u"&&(Cne=!0,console.warn(new Xo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},iD=class extends a7{constructor(e,t){super(e,t,!1)}[l3](e,t){let n=this[uu]();if(e)return n(e);try{t=t!==void 0?this[cu].decode(t):void 0}catch(i){return n(new lu("key",i))}t!==void 0&&this[Fs]++,n(null,t)}[Xc](e,t){let n=this[uu]();if(e)return this[B1](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[cu].decode(o):void 0}}catch(i){return this[B1](n,new lu("keys",i))}this[Fs]+=t.length,this[B1](n,null,t)}},oD=class extends a7{constructor(e,t){super(e,t,!1)}[l3](e,t){let n=this[uu]();if(e)return n(e);try{t=t!==void 0?this[d3].decode(t):void 0}catch(i){return n(new lu("value",i))}t!==void 0&&this[Fs]++,n(null,t)}[Xc](e,t){let n=this[uu]();if(e)return this[B1](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[d3].decode(o):void 0}}catch(i){return this[B1](n,new lu("values",i))}this[Fs]+=t.length,this[B1](n,null,t)}},lu=class extends Xo{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(P4.prototype,r.split(" ")[0],{get(){throw new Xo(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Xo(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});P4.keyEncoding=cu;P4.valueEncoding=d3;zw.AbstractIterator=P4;zw.AbstractKeyIterator=iD;zw.AbstractValueIterator=oD});var Rne=O(sD=>{"use strict";var{AbstractKeyIterator:gLe,AbstractValueIterator:yLe}=du(),f3=Symbol("iterator"),c7=Symbol("callback"),D4=Symbol("handleOne"),h3=Symbol("handleMany"),u7=class extends gLe{constructor(e,t){super(e,t),this[f3]=e.iterator({...t,keys:!0,values:!1}),this[D4]=this[D4].bind(this),this[h3]=this[h3].bind(this)}},qw=class extends yLe{constructor(e,t){super(e,t),this[f3]=e.iterator({...t,keys:!1,values:!0}),this[D4]=this[D4].bind(this),this[h3]=this[h3].bind(this)}};for(let r of[u7,qw]){let e=r===u7,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[c7]=n,this[f3].next(this[D4])},r.prototype[D4]=function(n,i,o){let s=this[c7];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[c7]=o,this[f3].nextv(n,i,this[h3])},r.prototype._all=function(n,i){this[c7]=i,this[f3].all(n,this[h3])},r.prototype[h3]=function(n,i){let o=this[c7];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[f3].seek(n,i)},r.prototype._close=function(n){this[f3].close(n)}}sD.DefaultKeyIterator=u7;sD.DefaultValueIterator=qw});var kne=O(Ww=>{"use strict";var{AbstractIterator:wLe,AbstractKeyIterator:bLe,AbstractValueIterator:_Le}=du(),aD=qa(),mo=Symbol("nut"),Gw=Symbol("undefer"),Hw=Symbol("factory"),$w=class extends wLe{constructor(e,t){super(e,t),this[mo]=null,this[Hw]=()=>e.iterator(t),this.db.defer(()=>this[Gw]())}},Kw=class extends bLe{constructor(e,t){super(e,t),this[mo]=null,this[Hw]=()=>e.keys(t),this.db.defer(()=>this[Gw]())}},jw=class extends _Le{constructor(e,t){super(e,t),this[mo]=null,this[Hw]=()=>e.values(t),this.db.defer(()=>this[Gw]())}};for(let r of[$w,Kw,jw])r.prototype[Gw]=function(){this.db.status==="open"&&(this[mo]=this[Hw]())},r.prototype._next=function(e){this[mo]!==null?this[mo].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new aD("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[mo]!==null?this[mo].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new aD("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[mo]!==null?this[mo].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new aD("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[mo]!==null?this[mo]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[mo]!==null?this[mo].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Ww.DeferredIterator=$w;Ww.DeferredKeyIterator=Kw;Ww.DeferredValueIterator=jw});var uD=O(Dne=>{"use strict";var{fromCallback:Pne}=i7(),Yw=qa(),{getCallback:vLe,getOptions:ELe}=Mw(),Xw=Symbol("promise"),Vs=Symbol("status"),N4=Symbol("operations"),l7=Symbol("finishClose"),O4=Symbol("closeCallbacks"),cD=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[N4]=[],this[O4]=[],this[Vs]="open",this[l7]=this[l7].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[N4].length}put(e,t,n){if(this[Vs]!=="open")throw new Yw("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=o.keyEncoding(n&&n.keyEncoding),c=o.valueEncoding(n&&n.valueEncoding),u=a.format;n={...n,keyEncoding:u,valueEncoding:c.format},o!==this.db&&(n.sublevel=null);let l=o.prefixKey(a.encode(e),u),d=c.encode(t);return this._put(l,d,n),this[N4].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[Vs]!=="open")throw new Yw("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),a=s.format;return t={...t,keyEncoding:a},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),a),t),this[N4].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[Vs]!=="open")throw new Yw("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[N4]=[],this}_clear(){}write(e,t){return t=vLe(e,t),t=Pne(t,Xw),e=ELe(e),this[Vs]!=="open"?this.nextTick(t,new Yw("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[Vs]="writing",this._write(e,n=>{this[Vs]="closing",this[O4].push(()=>t(n)),n||this.db.emit("batch",this[N4]),this._close(this[l7])})),t[Xw]}_write(e,t){}close(e){return e=Pne(e,Xw),this[Vs]==="closing"?this[O4].push(e):this[Vs]==="closed"?this.nextTick(e):(this[O4].push(e),this[Vs]!=="writing"&&(this[Vs]="closing",this._close(this[l7]))),e[Xw]}_close(e){this.nextTick(e)}[l7](){this[Vs]="closed",this.db.detachResource(this);let e=this[O4];this[O4]=[];for(let t of e)t()}};Dne.AbstractChainedBatch=cD});var One=O(Nne=>{"use strict";var{AbstractChainedBatch:xLe}=uD(),SLe=qa(),L4=Symbol("encoded"),lD=class extends xLe{constructor(e){super(e),this[L4]=[]}_put(e,t,n){this[L4].push({...n,type:"put",key:e,value:t})}_del(e,t){this[L4].push({...t,type:"del",key:e})}_clear(){this[L4]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[L4].length===0?this.nextTick(t):this.db._batch(this[L4],e,t):this.nextTick(t,new SLe("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Nne.DefaultChainedBatch=lD});var Mne=O((S_t,Bne)=>{"use strict";var Lne=qa(),TLe=Object.prototype.hasOwnProperty,ILe=new Set(["lt","lte","gt","gte"]);Bne.exports=function(r,e){let t={};for(let n in r)if(TLe.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new Lne(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new Lne("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});ILe.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Fne=O((T_t,Une)=>{"use strict";Une.exports=process.nextTick});var Vne=O(Qw=>{"use strict";var{AbstractIterator:ALe,AbstractKeyIterator:CLe,AbstractValueIterator:RLe}=du(),B4=Symbol("unfix"),$a=Symbol("iterator"),p3=Symbol("handleOne"),fu=Symbol("handleMany"),Qc=Symbol("callback"),d7=class extends ALe{constructor(e,t,n,i){super(e,t),this[$a]=n,this[B4]=i,this[p3]=this[p3].bind(this),this[fu]=this[fu].bind(this),this[Qc]=null}[p3](e,t,n){let i=this[Qc];if(e)return i(e);t!==void 0&&(t=this[B4](t)),i(e,t,n)}[fu](e,t){let n=this[Qc];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[B4](o))}n(e,t)}},f7=class extends CLe{constructor(e,t,n,i){super(e,t),this[$a]=n,this[B4]=i,this[p3]=this[p3].bind(this),this[fu]=this[fu].bind(this),this[Qc]=null}[p3](e,t){let n=this[Qc];if(e)return n(e);t!==void 0&&(t=this[B4](t)),n(e,t)}[fu](e,t){let n=this[Qc];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[B4](o))}n(e,t)}},h7=class extends RLe{constructor(e,t,n){super(e,t),this[$a]=n}};for(let r of[d7,f7])r.prototype._next=function(e){this[Qc]=e,this[$a].next(this[p3])},r.prototype._nextv=function(e,t,n){this[Qc]=n,this[$a].nextv(e,t,this[fu])},r.prototype._all=function(e,t){this[Qc]=t,this[$a].all(e,this[fu])};for(let r of[h7])r.prototype._next=function(e){this[$a].next(e)},r.prototype._nextv=function(e,t,n){this[$a].nextv(e,t,n)},r.prototype._all=function(e,t){this[$a].all(e,t)};for(let r of[d7,f7,h7])r.prototype._seek=function(e,t){this[$a].seek(e,t)},r.prototype._close=function(e){this[$a].close(e)};Qw.AbstractSublevelIterator=d7;Qw.AbstractSublevelKeyIterator=f7;Qw.AbstractSublevelValueIterator=h7});var Kne=O((A_t,$ne)=>{"use strict";var dD=qa(),{Buffer:pD}=require("buffer")||{},{AbstractSublevelIterator:kLe,AbstractSublevelKeyIterator:PLe,AbstractSublevelValueIterator:DLe}=Vne(),Zc=Symbol("prefix"),zne=Symbol("upperBound"),p7=Symbol("prefixRange"),Qo=Symbol("parent"),fD=Symbol("unfix"),qne=new TextEncoder,NLe={separator:"!"};$ne.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new dD("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new dD("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?NLe:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:a,...c}=e.defaults(o);i=LLe(i,s);let u=s.charCodeAt(0)+1,l=n[Qo]||n;if(!qne.encode(i).every(f=>f>u&&f<127))throw new dD(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(OLe(l,a),c);let d=(n.prefix||"")+s+i+s,h=d.slice(0,-1)+String.fromCharCode(u);this[Qo]=l,this[Zc]=new Zw(d),this[zne]=new Zw(h),this[fD]=new mD,this.nextTick=l.nextTick}prefixKey(n,i){if(i==="utf8")return this[Zc].utf8+n;if(n.byteLength===0)return this[Zc][i];if(i==="view"){let o=this[Zc].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[Zc].buffer;return pD.concat([o,n],o.byteLength+n.byteLength)}}[p7](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[Zc][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[zne][i]}get prefix(){return this[Zc].utf8}get db(){return this[Qo]}_open(n,i){this[Qo].open({passive:!0},i)}_put(n,i,o,s){this[Qo].put(n,i,o,s)}_get(n,i,o){this[Qo].get(n,i,o)}_getMany(n,i,o){this[Qo].getMany(n,i,o)}_del(n,i,o){this[Qo].del(n,i,o)}_batch(n,i,o){this[Qo].batch(n,i,o)}_clear(n,i){this[p7](n,n.keyEncoding),this[Qo].clear(n,i)}_iterator(n){this[p7](n,n.keyEncoding);let i=this[Qo].iterator(n),o=this[fD].get(this[Zc].utf8.length,n.keyEncoding);return new kLe(this,n,i,o)}_keys(n){this[p7](n,n.keyEncoding);let i=this[Qo].keys(n),o=this[fD].get(this[Zc].utf8.length,n.keyEncoding);return new PLe(this,n,i,o)}_values(n){this[p7](n,n.keyEncoding);let i=this[Qo].values(n);return new DLe(this,n,i)}}return{AbstractSublevel:e}};var OLe=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:hD(r,"utf8"),buffer:hD(r,"buffer"),view:hD(r,"view")}}},hD=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},Zw=class{constructor(e){this.utf8=e,this.view=qne.encode(e),this.buffer=pD?pD.from(this.view.buffer,0,this.view.byteLength):{}}},mD=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},LLe=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var _D=O(bD=>{"use strict";var{supports:BLe}=hne(),{Transcoder:MLe}=xne(),{EventEmitter:ULe}=require("events"),{fromCallback:hu}=i7(),Ka=qa(),{AbstractIterator:m3}=du(),{DefaultKeyIterator:FLe,DefaultValueIterator:VLe}=Rne(),{DeferredIterator:zLe,DeferredKeyIterator:qLe,DeferredValueIterator:$Le}=kne(),{DefaultChainedBatch:jne}=One(),{getCallback:g3,getOptions:pu}=Mw(),Jw=Mne(),_t=Symbol("promise"),Jc=Symbol("landed"),y3=Symbol("resources"),gD=Symbol("closeResources"),m7=Symbol("operations"),g7=Symbol("undefer"),eb=Symbol("deferOpen"),Gne=Symbol("options"),Nt=Symbol("status"),w3=Symbol("defaultOptions"),M4=Symbol("transcoder"),tb=Symbol("keyEncoding"),yD=Symbol("valueEncoding"),KLe=()=>{},y7=class extends ULe{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=pu(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[y3]=new Set,this[m7]=[],this[eb]=!0,this[Gne]=s,this[Nt]="opening",this.supports=BLe(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[M4]=new MLe(jLe(this)),this[tb]=this[M4].encoding(n||"utf8"),this[yD]=this[M4].encoding(i||"utf8");for(let a of this[M4].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[w3]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[tb].commonName,valueEncoding:this[yD].commonName}),key:Object.freeze({keyEncoding:this[tb].commonName})},this.nextTick(()=>{this[eb]&&this.open({passive:!1},KLe)})}get status(){return this[Nt]}keyEncoding(e){return this[M4].encoding(e??this[tb])}valueEncoding(e){return this[M4].encoding(e??this[yD])}open(e,t){t=g3(e,t),t=hu(t,_t),e={...this[Gne],...pu(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[Nt]==="closing"||this[Nt]==="opening"?this.once(Jc,i?()=>n(i):n):this[Nt]!=="open"?t(new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[Nt]==="opening"?this.once(Jc,n):this.nextTick(n):this[Nt]==="closed"||this[eb]?(this[eb]=!1,this[Nt]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[Nt]="closed",this[gD](()=>{this.emit(Jc),n(i)}),this[g7]();return}this[Nt]="open",this[g7](),this.emit(Jc),this[Nt]==="open"&&this.emit("open"),this[Nt]==="open"&&this.emit("ready"),n()})):this[Nt]==="open"?this.nextTick(n):this.once(Jc,()=>this.open(e,t)),t[_t]}_open(e,t){this.nextTick(t)}close(e){e=hu(e,_t);let t=n=>{this[Nt]==="opening"||this[Nt]==="closing"?this.once(Jc,n?t(n):t):this[Nt]!=="closed"?e(new Ka("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[Nt]==="open"){this[Nt]="closing",this.emit("closing");let n=i=>{this[Nt]="open",this[g7](),this.emit(Jc),t(i)};this[gD](()=>{this._close(i=>{if(i)return n(i);this[Nt]="closed",this[g7](),this.emit(Jc),this[Nt]==="closed"&&this.emit("closed"),t()})})}else this[Nt]==="closed"?this.nextTick(t):this.once(Jc,()=>this.close(e));return e[_t]}[gD](e){if(this[y3].size===0)return this.nextTick(e);let t=this[y3].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[y3])o.close(i);n=!1,this[y3].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=g3(t,n),n=hu(n,_t),t=pu(t,this[w3].entry),this[Nt]==="opening")return this.defer(()=>this.get(e,t,n)),n[_t];if(U4(this,n))return n[_t];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[_t];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),a=o.format,c=s.format;return(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(o.encode(e),a),t,(u,l)=>{if(u)return(u.code==="LEVEL_NOT_FOUND"||u.notFound||/NotFound/i.test(u))&&(u.code||(u.code="LEVEL_NOT_FOUND"),u.notFound||(u.notFound=!0),u.status||(u.status=404)),n(u);try{l=s.decode(l)}catch(d){return n(new Ka("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[_t]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=g3(t,n),n=hu(n,_t),t=pu(t,this[w3].entry),this[Nt]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[_t];if(U4(this,n))return n[_t];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[_t];if(e.length===0)return this.nextTick(n,null,[]),n[_t];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,a=o.format;(t.keyEncoding!==s||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:a}));let c=new Array(e.length);for(let u=0;u<e.length;u++){let l=e[u],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[_t];c[u]=this.prefixKey(i.encode(l),s)}return this._getMany(c,t,(u,l)=>{if(u)return n(u);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=o.decode(l[d]))}catch(d){return n(new Ka(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[_t]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=g3(n,i),i=hu(i,_t),n=pu(n,this[w3].entry),this[Nt]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[_t];if(U4(this,i))return i[_t];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[_t];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),c=s.format,u=a.format;(n.keyEncoding!==c||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:c,valueEncoding:u}));let l=this.prefixKey(s.encode(e),c),d=a.encode(t);return this._put(l,d,n,h=>{if(h)return i(h);this.emit("put",e,t),i()}),i[_t]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=g3(t,n),n=hu(n,_t),t=pu(t,this[w3].key),this[Nt]==="opening")return this.defer(()=>this.del(e,t,n)),n[_t];if(U4(this,n))return n[_t];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[_t];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,a=>{if(a)return n(a);this.emit("del",e),n()}),n[_t]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[Nt]==="opening")return new jne(this);if(this[Nt]!=="open")throw new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=g3(t,n),n=hu(n,_t),t=pu(t,this[w3].empty),this[Nt]==="opening")return this.defer(()=>this.batch(e,t,n)),n[_t];if(U4(this,n))return n[_t];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[_t];if(e.length===0)return this.nextTick(n),n[_t];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...a}=t;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[_t];let u=Object.assign({},e[c]);if(u.type!=="put"&&u.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[_t];let l=this._checkKey(u.key);if(l)return this.nextTick(n,l),n[_t];let d=u.sublevel!=null?u.sublevel:this,h=d.keyEncoding(u.keyEncoding||o),f=h.format;if(u.key=d.prefixKey(h.encode(u.key),f),u.keyEncoding=f,u.type==="put"){let m=this._checkValue(u.value);if(m)return this.nextTick(n,m),n[_t];let w=d.valueEncoding(u.valueEncoding||s);u.value=w.encode(u.value),u.valueEncoding=w.format}d!==this&&(u.sublevel=null),i[c]=u}return this._batch(i,a,c=>{if(c)return n(c);this.emit("batch",e),n()}),n[_t]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,wD.defaults(t))}_sublevel(e,t){return new wD(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=g3(e,t),t=hu(t,_t),e=pu(e,this[w3].empty),this[Nt]==="opening")return this.defer(()=>this.clear(e,t)),t[_t];if(U4(this,t))return t[_t];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Jw(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[_t]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Jw(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[m3.keyEncoding]=t,e[m3.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Nt]==="opening")return new zLe(this,e);if(this[Nt]!=="open")throw new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new m3(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Jw(e,t),e[m3.keyEncoding]=t,e[m3.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Nt]==="opening")return new qLe(this,e);if(this[Nt]!=="open")throw new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new FLe(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Jw(e,t),e[m3.keyEncoding]=t,e[m3.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[Nt]==="opening")return new $Le(this,e);if(this[Nt]!=="open")throw new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new VLe(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[m7].push(e)}[g7](){if(this[m7].length===0)return;let e=this[m7];this[m7]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[y3].add(e)}detachResource(e){this[y3].delete(e)}_chainedBatch(){return new jne(this)}_checkKey(e){if(e==null)return new Ka("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Ka("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};y7.prototype.nextTick=Fne();var{AbstractSublevel:wD}=Kne()({AbstractLevel:y7});bD.AbstractLevel=y7;bD.AbstractSublevel=wD;var U4=function(r,e){return r[Nt]!=="open"?(r.nextTick(e,new Ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},jLe=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var rb=O(b3=>{"use strict";b3.AbstractLevel=_D().AbstractLevel;b3.AbstractSublevel=_D().AbstractSublevel;b3.AbstractIterator=du().AbstractIterator;b3.AbstractKeyIterator=du().AbstractKeyIterator;b3.AbstractValueIterator=du().AbstractValueIterator;b3.AbstractChainedBatch=uD().AbstractChainedBatch});var cie=O((k_t,aie)=>{var Xne=require("fs"),e0=require("path"),Qne=require("os"),Zne=typeof __webpack_require__=="function"?__non_webpack_require__:require,GLe=process.config&&process.config.variables||{},HLe=!!process.env.PREBUILDS_ONLY,Hne=process.versions.modules,vD=XLe()?"electron":YLe()?"node-webkit":"node",ED=process.env.npm_config_arch||Qne.arch(),xD=process.env.npm_config_platform||Qne.platform(),Jne=process.env.LIBC||(QLe(xD)?"musl":"glibc"),SD=process.env.ARM_VERSION||(ED==="arm64"?"8":GLe.arm_version)||"",eie=(process.versions.uv||"").split(".")[0];aie.exports=M1;function M1(r){return Zne(M1.resolve(r))}M1.resolve=M1.path=function(r){r=e0.resolve(r||".");try{var e=Zne(e0.join(r,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[e+"_PREBUILD"]&&(r=process.env[e+"_PREBUILD"])}catch{}if(!HLe){var t=Wne(e0.join(r,"build/Release"),Yne);if(t)return t;var n=Wne(e0.join(r,"build/Debug"),Yne);if(n)return n}var i=a(r);if(i)return i;var o=a(e0.dirname(process.execPath));if(o)return o;var s=["platform="+xD,"arch="+ED,"runtime="+vD,"abi="+Hne,"uv="+eie,SD?"armv="+SD:"","libc="+Jne,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+s+`
    loaded from: `+r+`
`);function a(c){var u=TD(e0.join(c,"prebuilds")).map(tie),l=u.filter(rie(xD,ED)).sort(nie)[0];if(l){var d=e0.join(c,"prebuilds",l.name),h=TD(d).map(iie),f=h.filter(oie(vD,Hne)),m=f.sort(sie(vD))[0];if(m)return e0.join(d,m.file)}}};function TD(r){try{return Xne.readdirSync(r)}catch{return[]}}function Wne(r,e){var t=TD(r).filter(e);return t[0]&&e0.join(r,t[0])}function Yne(r){return/\.node$/.test(r)}function tie(r){var e=r.split("-");if(e.length===2){var t=e[0],n=e[1].split("+");if(t&&n.length&&n.every(Boolean))return{name:r,platform:t,architectures:n}}}function rie(r,e){return function(t){return t==null||t.platform!==r?!1:t.architectures.includes(e)}}function nie(r,e){return r.architectures.length-e.architectures.length}function iie(r){var e=r.split("."),t=e.pop(),n={file:r,specificity:0};if(t==="node"){for(var i=0;i<e.length;i++){var o=e[i];if(o==="node"||o==="electron"||o==="node-webkit")n.runtime=o;else if(o==="napi")n.napi=!0;else if(o.slice(0,3)==="abi")n.abi=o.slice(3);else if(o.slice(0,2)==="uv")n.uv=o.slice(2);else if(o.slice(0,4)==="armv")n.armv=o.slice(4);else if(o==="glibc"||o==="musl")n.libc=o;else continue;n.specificity++}return n}}function oie(r,e){return function(t){return!(t==null||t.runtime&&t.runtime!==r&&!WLe(t)||t.abi&&t.abi!==e&&!t.napi||t.uv&&t.uv!==eie||t.armv&&t.armv!==SD||t.libc&&t.libc!==Jne)}}function WLe(r){return r.runtime==="node"&&r.napi}function sie(r){return function(e,t){return e.runtime!==t.runtime?e.runtime===r?-1:1:e.abi!==t.abi?e.abi?-1:1:e.specificity!==t.specificity?e.specificity>t.specificity?-1:1:0}}function YLe(){return!!(process.versions&&process.versions.nw)}function XLe(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function QLe(r){return r==="linux"&&Xne.existsSync("/etc/alpine-release")}M1.parseTags=iie;M1.matchTags=oie;M1.compareTags=sie;M1.parseTuple=tie;M1.matchTuple=rie;M1.compareTuples=nie});var uie=O((P_t,AD)=>{var ID=typeof __webpack_require__=="function"?__non_webpack_require__:require;typeof ID.addon=="function"?AD.exports=ID.addon.bind(ID):AD.exports=cie()});var nb=O((D_t,lie)=>{lie.exports=uie()(__dirname)});var fie=O(die=>{"use strict";var{AbstractChainedBatch:ZLe}=rb(),w7=nb(),b7=Symbol("context"),CD=class extends ZLe{constructor(e,t){super(e),this[b7]=w7.batch_init(t)}_put(e,t){w7.batch_put(this[b7],e,t)}_del(e){w7.batch_del(this[b7],e)}_clear(){w7.batch_clear(this[b7])}_write(e,t){w7.batch_write(this[b7],e,t)}_close(e){process.nextTick(e)}};die.ChainedBatch=CD});var pie=O(hie=>{"use strict";var{AbstractIterator:JLe}=rb(),F4=nb(),V4=Symbol("context"),_3=Symbol("cache"),z4=Symbol("finished"),_7=Symbol("first"),q4=Symbol("position"),v7=Symbol("handleNext"),ib=Symbol("handleNextv"),$4=Symbol("callback"),RD=[],kD=class extends JLe{constructor(e,t,n){super(e,n),this[V4]=F4.iterator_init(t,n),this[v7]=this[v7].bind(this),this[ib]=this[ib].bind(this),this[$4]=null,this[_7]=!0,this[_3]=RD,this[z4]=!1,this[q4]=0}_seek(e,t){this[_7]=!0,this[_3]=RD,this[z4]=!1,this[q4]=0,F4.iterator_seek(this[V4],e)}_next(e){if(this[q4]<this[_3].length){let t=this[_3][this[q4]++];process.nextTick(e,null,t[0],t[1])}else this[z4]?process.nextTick(e):(this[$4]=e,this[_7]?(this[_7]=!1,F4.iterator_nextv(this[V4],1,this[v7])):F4.iterator_nextv(this[V4],1e3,this[v7]))}[v7](e,t,n){let i=this[$4];if(e)return i(e);this[_3]=t,this[z4]=n,this[q4]=0,this._next(i)}_nextv(e,t,n){this[z4]?process.nextTick(n,null,[]):(this[$4]=n,this[_7]=!1,F4.iterator_nextv(this[V4],e,this[ib]))}[ib](e,t,n){let i=this[$4];if(e)return i(e);this[z4]=n,i(null,t)}_close(e){this[_3]=RD,this[$4]=null,F4.iterator_close(this[V4],e)}get cached(){return this[_3].length-this[q4]}};hie.Iterator=kD});var gie=O(mie=>{"use strict";var{AbstractLevel:eBe}=rb(),ob=qa(),{fromCallback:sb}=i7(),tBe=require("fs"),Wi=nb(),{ChainedBatch:rBe}=fie(),{Iterator:nBe}=pie(),mu=Symbol("promise"),Yi=Symbol("context"),E7=Symbol("location"),PD=class extends eBe{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new ob("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});if(typeof e!="string"||e==="")throw new TypeError("The first argument 'location' must be a non-empty string");super({encodings:{buffer:!0,utf8:!0,view:!0},seek:!0,createIfMissing:!0,errorIfExists:!0,additionalMethods:{approximateSize:!0,compactRange:!0}},t),this[E7]=e,this[Yi]=Wi.db_init()}get location(){return this[E7]}_open(e,t){e.createIfMissing?tBe.mkdir(this[E7],{recursive:!0},n=>{if(n)return t(n);Wi.db_open(this[Yi],this[E7],e,t)}):Wi.db_open(this[Yi],this[E7],e,t)}_close(e){Wi.db_close(this[Yi],e)}_put(e,t,n,i){Wi.db_put(this[Yi],e,t,n,i)}_get(e,t,n){Wi.db_get(this[Yi],e,t,n)}_getMany(e,t,n){Wi.db_get_many(this[Yi],e,t,n)}_del(e,t,n){Wi.db_del(this[Yi],e,t,n)}_clear(e,t){Wi.db_clear(this[Yi],e,t)}_chainedBatch(){return new rBe(this,this[Yi])}_batch(e,t,n){Wi.batch_do(this[Yi],e,t,n)}approximateSize(e,t,n,i){if(arguments.length<2||typeof e=="function"||typeof t=="function")throw new TypeError("The arguments 'start' and 'end' are required");if(typeof n=="function"?(i=n,n=null):typeof n!="object"&&(n=null),i=sb(i,mu),this.status==="opening")this.defer(()=>this.approximateSize(e,t,n,i));else if(this.status!=="open")this.nextTick(i,new ob("Database is not open: cannot call approximateSize()",{code:"LEVEL_DATABASE_NOT_OPEN"}));else{let o=this.keyEncoding(n&&n.keyEncoding);e=o.encode(e),t=o.encode(t),Wi.db_approximate_size(this[Yi],e,t,i)}return i[mu]}compactRange(e,t,n,i){if(arguments.length<2||typeof e=="function"||typeof t=="function")throw new TypeError("The arguments 'start' and 'end' are required");if(typeof n=="function"?(i=n,n=null):typeof n!="object"&&(n=null),i=sb(i,mu),this.status==="opening")this.defer(()=>this.compactRange(e,t,n,i));else if(this.status!=="open")this.nextTick(i,new ob("Database is not open: cannot call compactRange()",{code:"LEVEL_DATABASE_NOT_OPEN"}));else{let o=this.keyEncoding(n&&n.keyEncoding);e=o.encode(e),t=o.encode(t),Wi.db_compact_range(this[Yi],e,t,i)}return i[mu]}getProperty(e){if(typeof e!="string")throw new TypeError("The first argument 'property' must be a string");if(this.status!=="open")throw new ob("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return Wi.db_get_property(this[Yi],e)}_iterator(e){return new nBe(this,this[Yi],e)}static destroy(e,t){if(typeof e!="string"||e==="")throw new TypeError("The first argument 'location' must be a non-empty string");return t=sb(t,mu),Wi.destroy_db(e,t),t[mu]}static repair(e,t){if(typeof e!="string"||e==="")throw new TypeError("The first argument 'location' must be a non-empty string");return t=sb(t,mu),Wi.repair_db(e,t),t[mu]}};mie.ClassicLevel=PD});var wie=O(yie=>{yie.Level=gie().ClassicLevel});var xie=O((nvt,Eie)=>{var yu=require("constants"),cBe=process.cwd,cb=null,uBe=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return cb||(cb=cBe.call(process)),cb};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ND=process.chdir,process.chdir=function(r){cb=null,ND.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ND));var ND;Eie.exports=lBe;function lBe(r){yu.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=o(r.chown),r.fchown=o(r.fchown),r.lchown=o(r.lchown),r.chmod=n(r.chmod),r.fchmod=n(r.fchmod),r.lchmod=n(r.lchmod),r.chownSync=s(r.chownSync),r.fchownSync=s(r.fchownSync),r.lchownSync=s(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=a(r.stat),r.fstat=a(r.fstat),r.lstat=a(r.lstat),r.statSync=c(r.statSync),r.fstatSync=c(r.fstatSync),r.lstatSync=c(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,d,h){h&&process.nextTick(h)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,d,h,f){f&&process.nextTick(f)},r.lchownSync=function(){}),uBe==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:function(l){function d(h,f,m){var w=Date.now(),_=0;l(h,f,function E(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){r.stat(f,function(p,g){p&&p.code==="ENOENT"?l(h,f,E):m(S)})},_),_<100&&(_+=10);return}m&&m(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,l),d}(r.rename)),r.read=typeof r.read!="function"?r.read:function(l){function d(h,f,m,w,_,E){var S;if(E&&typeof E=="function"){var p=0;S=function(g,y,b){if(g&&g.code==="EAGAIN"&&p<10)return p++,l.call(r,h,f,m,w,_,S);E.apply(this,arguments)}}return l.call(r,h,f,m,w,_,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,l),d}(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:function(l){return function(d,h,f,m,w){for(var _=0;;)try{return l.call(r,d,h,f,m,w)}catch(E){if(E.code==="EAGAIN"&&_<10){_++;continue}throw E}}}(r.readSync);function e(l){l.lchmod=function(d,h,f){l.open(d,yu.O_WRONLY|yu.O_SYMLINK,h,function(m,w){if(m){f&&f(m);return}l.fchmod(w,h,function(_){l.close(w,function(E){f&&f(_||E)})})})},l.lchmodSync=function(d,h){var f=l.openSync(d,yu.O_WRONLY|yu.O_SYMLINK,h),m=!0,w;try{w=l.fchmodSync(f,h),m=!1}finally{if(m)try{l.closeSync(f)}catch{}else l.closeSync(f)}return w}}function t(l){yu.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(d,h,f,m){l.open(d,yu.O_SYMLINK,function(w,_){if(w){m&&m(w);return}l.futimes(_,h,f,function(E){l.close(_,function(S){m&&m(E||S)})})})},l.lutimesSync=function(d,h,f){var m=l.openSync(d,yu.O_SYMLINK),w,_=!0;try{w=l.futimesSync(m,h,f),_=!1}finally{if(_)try{l.closeSync(m)}catch{}else l.closeSync(m)}return w}):l.futimes&&(l.lutimes=function(d,h,f,m){m&&process.nextTick(m)},l.lutimesSync=function(){})}function n(l){return l&&function(d,h,f){return l.call(r,d,h,function(m){u(m)&&(m=null),f&&f.apply(this,arguments)})}}function i(l){return l&&function(d,h){try{return l.call(r,d,h)}catch(f){if(!u(f))throw f}}}function o(l){return l&&function(d,h,f,m){return l.call(r,d,h,f,function(w){u(w)&&(w=null),m&&m.apply(this,arguments)})}}function s(l){return l&&function(d,h,f){try{return l.call(r,d,h,f)}catch(m){if(!u(m))throw m}}}function a(l){return l&&function(d,h,f){typeof h=="function"&&(f=h,h=null);function m(w,_){_&&(_.uid<0&&(_.uid+=4294967296),_.gid<0&&(_.gid+=4294967296)),f&&f.apply(this,arguments)}return h?l.call(r,d,h,m):l.call(r,d,m)}}function c(l){return l&&function(d,h){var f=h?l.call(r,d,h):l.call(r,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function u(l){if(!l||l.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(l.code==="EINVAL"||l.code==="EPERM"))}}});var Iie=O((ivt,Tie)=>{var Sie=require("stream").Stream;Tie.exports=dBe;function dBe(r){return{ReadStream:e,WriteStream:t};function e(n,i){if(!(this instanceof e))return new e(n,i);Sie.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=i[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}r.open(this.path,this.flags,this.mode,function(l,d){if(l){o.emit("error",l),o.readable=!1;return}o.fd=d,o.emit("open",d),o._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);Sie.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Cie=O((ovt,Aie)=>{"use strict";Aie.exports=hBe;var fBe=Object.getPrototypeOf||function(r){return r.__proto__};function hBe(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:fBe(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}});var MD=O((svt,BD)=>{var Wr=require("fs"),pBe=xie(),mBe=Iie(),gBe=Cie(),ub=require("util"),yi,db;typeof Symbol=="function"&&typeof Symbol.for=="function"?(yi=Symbol.for("graceful-fs.queue"),db=Symbol.for("graceful-fs.previous")):(yi="___graceful-fs.queue",db="___graceful-fs.previous");function yBe(){}function Pie(r,e){Object.defineProperty(r,yi,{get:function(){return e}})}var v3=yBe;ub.debuglog?v3=ub.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(v3=function(){var r=ub.format.apply(ub,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)});Wr[yi]||(Rie=globalThis[yi]||[],Pie(Wr,Rie),Wr.close=function(r){function e(t,n){return r.call(Wr,t,function(i){i||kie(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,db,{value:r}),e}(Wr.close),Wr.closeSync=function(r){function e(t){r.apply(Wr,arguments),kie()}return Object.defineProperty(e,db,{value:r}),e}(Wr.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){v3(Wr[yi]),require("assert").equal(Wr[yi].length,0)}));var Rie;globalThis[yi]||Pie(globalThis,Wr[yi]);BD.exports=OD(gBe(Wr));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Wr.__patched&&(BD.exports=OD(Wr),Wr.__patched=!0);function OD(r){pBe(r),r.gracefulify=OD,r.createReadStream=y,r.createWriteStream=b;var e=r.readFile;r.readFile=t;function t(T,I,R){return typeof I=="function"&&(R=I,I=null),M(T,I,R);function M(U,j,D,q){return e(U,j,function(V){V&&(V.code==="EMFILE"||V.code==="ENFILE")?j4([M,[U,j,D],V,q||Date.now(),Date.now()]):typeof D=="function"&&D.apply(this,arguments)})}}var n=r.writeFile;r.writeFile=i;function i(T,I,R,M){return typeof R=="function"&&(M=R,R=null),U(T,I,R,M);function U(j,D,q,V,te){return n(j,D,q,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?j4([U,[j,D,q,V],pe,te||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var o=r.appendFile;o&&(r.appendFile=s);function s(T,I,R,M){return typeof R=="function"&&(M=R,R=null),U(T,I,R,M);function U(j,D,q,V,te){return o(j,D,q,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?j4([U,[j,D,q,V],pe,te||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var a=r.copyFile;a&&(r.copyFile=c);function c(T,I,R,M){return typeof R=="function"&&(M=R,R=0),U(T,I,R,M);function U(j,D,q,V,te){return a(j,D,q,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?j4([U,[j,D,q,V],pe,te||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var u=r.readdir;r.readdir=d;var l=/^v[0-5]\./;function d(T,I,R){typeof I=="function"&&(R=I,I=null);var M=l.test(process.version)?function(D,q,V,te){return u(D,U(D,q,V,te))}:function(D,q,V,te){return u(D,q,U(D,q,V,te))};return M(T,I,R);function U(j,D,q,V){return function(te,pe){te&&(te.code==="EMFILE"||te.code==="ENFILE")?j4([M,[j,D,q],te,V||Date.now(),Date.now()]):(pe&&pe.sort&&pe.sort(),typeof q=="function"&&q.call(this,te,pe))}}}if(process.version.substr(0,4)==="v0.8"){var h=mBe(r);E=h.ReadStream,p=h.WriteStream}var f=r.ReadStream;f&&(E.prototype=Object.create(f.prototype),E.prototype.open=S);var m=r.WriteStream;m&&(p.prototype=Object.create(m.prototype),p.prototype.open=g),Object.defineProperty(r,"ReadStream",{get:function(){return E},set:function(T){E=T},enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:function(){return p},set:function(T){p=T},enumerable:!0,configurable:!0});var w=E;Object.defineProperty(r,"FileReadStream",{get:function(){return w},set:function(T){w=T},enumerable:!0,configurable:!0});var _=p;Object.defineProperty(r,"FileWriteStream",{get:function(){return _},set:function(T){_=T},enumerable:!0,configurable:!0});function E(T,I){return this instanceof E?(f.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function S(){var T=this;v(T.path,T.flags,T.mode,function(I,R){I?(T.autoClose&&T.destroy(),T.emit("error",I)):(T.fd=R,T.emit("open",R),T.read())})}function p(T,I){return this instanceof p?(m.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function g(){var T=this;v(T.path,T.flags,T.mode,function(I,R){I?(T.destroy(),T.emit("error",I)):(T.fd=R,T.emit("open",R))})}function y(T,I){return new r.ReadStream(T,I)}function b(T,I){return new r.WriteStream(T,I)}var x=r.open;r.open=v;function v(T,I,R,M){return typeof R=="function"&&(M=R,R=null),U(T,I,R,M);function U(j,D,q,V,te){return x(j,D,q,function(pe,ue){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?j4([U,[j,D,q,V],pe,te||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}return r}function j4(r){v3("ENQUEUE",r[0].name,r[1]),Wr[yi].push(r),LD()}var lb;function kie(){for(var r=Date.now(),e=0;e<Wr[yi].length;++e)Wr[yi][e].length>2&&(Wr[yi][e][3]=r,Wr[yi][e][4]=r);LD()}function LD(){if(clearTimeout(lb),lb=void 0,Wr[yi].length!==0){var r=Wr[yi].shift(),e=r[0],t=r[1],n=r[2],i=r[3],o=r[4];if(i===void 0)v3("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){v3("TIMEOUT",e.name,t);var s=t.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,c=Math.max(o-i,1),u=Math.min(c*1.2,100);a>=u?(v3("RETRY",e.name,t),e.apply(null,t.concat([i]))):Wr[yi].push(r)}lb===void 0&&(lb=setTimeout(LD,0))}}});var Nie=O((avt,Die)=>{function zs(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Die.exports=zs;zs.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts};zs.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null};zs.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift();else return!1;var n=this,i=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t);return this._options.unref&&i.unref(),!0};zs.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};zs.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};zs.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};zs.prototype.start=zs.prototype.try;zs.prototype.errors=function(){return this._errors};zs.prototype.attempts=function(){return this._attempts};zs.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(r[o]||0)+1;r[o]=s,s>=t&&(e=i,t=s)}return e}});var Oie=O(E3=>{var wBe=Nie();E3.operation=function(r){var e=E3.timeouts(r);return new wBe(e,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};E3.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return r&&r.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(o,s){return o-s}),n};E3.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,n=Math.round(t*e.minTimeout*Math.pow(e.factor,r));return n=Math.min(n,e.maxTimeout),n};E3.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var n in r)typeof r[n]=="function"&&t.push(n)}for(var i=0;i<t.length;i++){var o=t[i],s=r[o];r[o]=function(c){var u=E3.operation(e),l=Array.prototype.slice.call(arguments,1),d=l.pop();l.push(function(h){u.retry(h)||(h&&(arguments[0]=u.mainError()),d.apply(this,arguments))}),u.attempt(function(){c.apply(r,l)})}.bind(r,s),r[o].options=e}}});var Bie=O((uvt,Lie)=>{Lie.exports=Oie()});var Mie=O((lvt,fb)=>{fb.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&fb.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&fb.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var qie=O((dvt,W4)=>{var $r=globalThis.process,x3=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};x3($r)?(Uie=require("assert"),G4=Mie(),Fie=/^win/i.test($r.platform),S7=require("events"),typeof S7!="function"&&(S7=S7.EventEmitter),$r.__signal_exit_emitter__?ei=$r.__signal_exit_emitter__:(ei=$r.__signal_exit_emitter__=new S7,ei.count=0,ei.emitted={}),ei.infinite||(ei.setMaxListeners(1/0),ei.infinite=!0),W4.exports=function(r,e){if(!x3(globalThis.process))return function(){};Uie.equal(typeof r,"function","a callback must be provided for exit handler"),H4===!1&&UD();var t="exit";e&&e.alwaysLast&&(t="afterexit");var n=function(){ei.removeListener(t,r),ei.listeners("exit").length===0&&ei.listeners("afterexit").length===0&&hb()};return ei.on(t,r),n},hb=function(){!H4||!x3(globalThis.process)||(H4=!1,G4.forEach(function(e){try{$r.removeListener(e,pb[e])}catch{}}),$r.emit=mb,$r.reallyExit=FD,ei.count-=1)},W4.exports.unload=hb,S3=function(e,t,n){ei.emitted[e]||(ei.emitted[e]=!0,ei.emit(e,t,n))},pb={},G4.forEach(function(r){pb[r]=function(){if(x3(globalThis.process)){var t=$r.listeners(r);t.length===ei.count&&(hb(),S3("exit",null,r),S3("afterexit",null,r),Fie&&r==="SIGHUP"&&(r="SIGINT"),$r.kill($r.pid,r))}}}),W4.exports.signals=function(){return G4},H4=!1,UD=function(){H4||!x3(globalThis.process)||(H4=!0,ei.count+=1,G4=G4.filter(function(e){try{return $r.on(e,pb[e]),!0}catch{return!1}}),$r.emit=zie,$r.reallyExit=Vie)},W4.exports.load=UD,FD=$r.reallyExit,Vie=function(e){x3(globalThis.process)&&($r.exitCode=e||0,S3("exit",$r.exitCode,null),S3("afterexit",$r.exitCode,null),FD.call($r,$r.exitCode))},mb=$r.emit,zie=function(e,t){if(e==="exit"&&x3(globalThis.process)){t!==void 0&&($r.exitCode=t);var n=mb.apply(this,arguments);return S3("exit",$r.exitCode,null),S3("afterexit",$r.exitCode,null),n}else return mb.apply(this,arguments)}):W4.exports=function(){return function(){}};var Uie,G4,Fie,S7,ei,hb,S3,pb,H4,UD,FD,Vie,mb,zie});var Kie=O((fvt,VD)=>{"use strict";var $ie=Symbol();function bBe(r,e,t){let n=e[$ie];if(n)return e.stat(r,(o,s)=>{if(o)return t(o);t(null,s.mtime,n)});let i=new Date(Math.ceil(Date.now()/1e3)*1e3+5);e.utimes(r,i,i,o=>{if(o)return t(o);e.stat(r,(s,a)=>{if(s)return t(s);let c=a.mtime.getTime()%1e3===0?"s":"ms";Object.defineProperty(e,$ie,{value:c}),t(null,a.mtime,c)})})}function _Be(r){let e=Date.now();return r==="s"&&(e=Math.ceil(e/1e3)*1e3),new Date(e)}VD.exports.probe=bBe;VD.exports.getMtime=_Be});var Yie=O((hvt,I7)=>{"use strict";var vBe=require("path"),$D=MD(),EBe=Bie(),xBe=qie(),jie=Kie(),t0={};function T7(r,e){return e.lockfilePath||`${r}.lock`}function KD(r,e,t){if(!e.realpath)return t(null,vBe.resolve(r));e.fs.realpath(r,t)}function qD(r,e,t){let n=T7(r,e);e.fs.mkdir(n,i=>{if(!i)return jie.probe(n,e.fs,(o,s,a)=>{if(o)return e.fs.rmdir(n,()=>{}),t(o);t(null,s,a)});if(i.code!=="EEXIST")return t(i);if(e.stale<=0)return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));e.fs.stat(n,(o,s)=>{if(o)return o.code==="ENOENT"?qD(r,{...e,stale:0},t):t(o);if(!Gie(s,e))return t(Object.assign(new Error("Lock file is already being held"),{code:"ELOCKED",file:r}));Hie(r,e,a=>{if(a)return t(a);qD(r,{...e,stale:0},t)})})})}function Gie(r,e){return r.mtime.getTime()<Date.now()-e.stale}function Hie(r,e,t){e.fs.rmdir(T7(r,e),n=>{if(n&&n.code!=="ENOENT")return t(n);t()})}function gb(r,e){let t=t0[r];t.updateTimeout||(t.updateDelay=t.updateDelay||e.update,t.updateTimeout=setTimeout(()=>{t.updateTimeout=null,e.fs.stat(t.lockfilePath,(n,i)=>{let o=t.lastUpdate+e.stale<Date.now();if(n)return n.code==="ENOENT"||o?zD(r,t,Object.assign(n,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,gb(r,e));if(!(t.mtime.getTime()===i.mtime.getTime()))return zD(r,t,Object.assign(new Error("Unable to update lock within the stale threshold"),{code:"ECOMPROMISED"}));let a=jie.getMtime(t.mtimePrecision);e.fs.utimes(t.lockfilePath,a,a,c=>{let u=t.lastUpdate+e.stale<Date.now();if(!t.released){if(c)return c.code==="ENOENT"||u?zD(r,t,Object.assign(c,{code:"ECOMPROMISED"})):(t.updateDelay=1e3,gb(r,e));t.mtime=a,t.lastUpdate=Date.now(),t.updateDelay=null,gb(r,e)}})})},t.updateDelay),t.updateTimeout.unref&&t.updateTimeout.unref())}function zD(r,e,t){e.released=!0,e.updateTimeout&&clearTimeout(e.updateTimeout),t0[r]===e&&delete t0[r],e.options.onCompromised(t)}function SBe(r,e,t){e={stale:1e4,update:null,realpath:!0,retries:0,fs:$D,onCompromised:n=>{throw n},...e},e.retries=e.retries||0,e.retries=typeof e.retries=="number"?{retries:e.retries}:e.retries,e.stale=Math.max(e.stale||0,2e3),e.update=e.update==null?e.stale/2:e.update||0,e.update=Math.max(Math.min(e.update,e.stale/2),1e3),KD(r,e,(n,i)=>{if(n)return t(n);let o=EBe.operation(e.retries);o.attempt(()=>{qD(i,e,(s,a,c)=>{if(o.retry(s))return;if(s)return t(o.mainError());let u=t0[i]={lockfilePath:T7(i,e),mtime:a,mtimePrecision:c,options:e,lastUpdate:Date.now()};gb(i,e),t(null,l=>{if(u.released)return l&&l(Object.assign(new Error("Lock is already released"),{code:"ERELEASED"}));Wie(i,{...e,realpath:!1},l)})})})})}function Wie(r,e,t){e={fs:$D,realpath:!0,...e},KD(r,e,(n,i)=>{if(n)return t(n);let o=t0[i];if(!o)return t(Object.assign(new Error("Lock is not acquired/owned by you"),{code:"ENOTACQUIRED"}));o.updateTimeout&&clearTimeout(o.updateTimeout),o.released=!0,delete t0[i],Hie(i,e,t)})}function TBe(r,e,t){e={stale:1e4,realpath:!0,fs:$D,...e},e.stale=Math.max(e.stale||0,2e3),KD(r,e,(n,i)=>{if(n)return t(n);e.fs.stat(T7(i,e),(o,s)=>o?o.code==="ENOENT"?t(null,!1):t(o):t(null,!Gie(s,e)))})}function IBe(){return t0}xBe(()=>{for(let r in t0){let e=t0[r].options;try{e.fs.rmdirSync(T7(r,e))}catch{}}});I7.exports.lock=SBe;I7.exports.unlock=Wie;I7.exports.check=TBe;I7.exports.getLocks=IBe});var Qie=O((pvt,Xie)=>{"use strict";var ABe=MD();function CBe(r){let e=["mkdir","realpath","stat","rmdir","utimes"],t={...r};return e.forEach(n=>{t[n]=(...i)=>{let o=i.pop(),s;try{s=r[`${n}Sync`](...i)}catch(a){return o(a)}o(null,s)}}),t}function RBe(r){return(...e)=>new Promise((t,n)=>{e.push((i,o)=>{i?n(i):t(o)}),r(...e)})}function kBe(r){return(...e)=>{let t,n;if(e.push((i,o)=>{t=i,n=o}),r(...e),t)throw t;return n}}function PBe(r){if(r={...r},r.fs=CBe(r.fs||ABe),typeof r.retries=="number"&&r.retries>0||r.retries&&typeof r.retries.retries=="number"&&r.retries.retries>0)throw Object.assign(new Error("Cannot use retries with the sync api"),{code:"ESYNC"});return r}Xie.exports={toPromise:RBe,toSync:kBe,toSyncOptions:PBe}});var Jie=O((mvt,wu)=>{"use strict";var Y4=Yie(),{toPromise:yb,toSync:wb,toSyncOptions:jD}=Qie();async function Zie(r,e){let t=await yb(Y4.lock)(r,e);return yb(t)}function DBe(r,e){let t=wb(Y4.lock)(r,jD(e));return wb(t)}function NBe(r,e){return yb(Y4.unlock)(r,e)}function OBe(r,e){return wb(Y4.unlock)(r,jD(e))}function LBe(r,e){return yb(Y4.check)(r,e)}function BBe(r,e){return wb(Y4.check)(r,jD(e))}wu.exports=Zie;wu.exports.lock=Zie;wu.exports.unlock=NBe;wu.exports.lockSync=DBe;wu.exports.unlockSync=OBe;wu.exports.check=LBe;wu.exports.checkSync=BBe});var boe=O((_Et,woe)=>{"use strict";woe.exports=ti;var k7=Eu();function ti(r,e){this.lo=r>>>0,this.hi=e>>>0}var T3=ti.zero=new ti(0,0);T3.toNumber=function(){return 0};T3.zzEncode=T3.zzDecode=function(){return this};T3.length=function(){return 1};var YBe=ti.zeroHash="\0\0\0\0\0\0\0\0";ti.fromNumber=function(e){if(e===0)return T3;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ti(n,i)};ti.from=function(e){if(typeof e=="number")return ti.fromNumber(e);if(k7.isString(e))if(k7.Long)e=k7.Long.fromString(e);else return ti.fromNumber(parseInt(e,10));return e.low||e.high?new ti(e.low>>>0,e.high>>>0):T3};ti.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};ti.prototype.toLong=function(e){return k7.Long?new k7.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var vu=String.prototype.charCodeAt;ti.fromHash=function(e){return e===YBe?T3:new ti((vu.call(e,0)|vu.call(e,1)<<8|vu.call(e,2)<<16|vu.call(e,3)<<24)>>>0,(vu.call(e,4)|vu.call(e,5)<<8|vu.call(e,6)<<16|vu.call(e,7)<<24)>>>0)};ti.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};ti.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};ti.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};ti.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var Eu=O(YD=>{"use strict";var We=YD;We.asPromise=tT();We.base64=rT();We.EventEmitter=nT();We.float=iT();We.inquire=oT();We.utf8=aT();We.pool=cT();We.LongBits=boe();We.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);We.global=We.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||YD;We.emptyArray=Object.freeze?Object.freeze([]):[];We.emptyObject=Object.freeze?Object.freeze({}):{};We.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};We.isString=function(e){return typeof e=="string"||e instanceof String};We.isObject=function(e){return e&&typeof e=="object"};We.isset=We.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};We.Buffer=function(){try{var r=We.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();We._Buffer_from=null;We._Buffer_allocUnsafe=null;We.newBuffer=function(e){return typeof e=="number"?We.Buffer?We._Buffer_allocUnsafe(e):new We.Array(e):We.Buffer?We._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};We.Array=typeof Uint8Array<"u"?Uint8Array:Array;We.Long=We.global.dcodeIO&&We.global.dcodeIO.Long||We.global.Long||We.inquire("long");We.key2Re=/^true|false|0|1$/;We.key32Re=/^-?(?:0|[1-9][0-9]*)$/;We.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;We.longToHash=function(e){return e?We.LongBits.from(e).toHash():We.LongBits.zeroHash};We.longFromHash=function(e,t){var n=We.LongBits.fromHash(e);return We.Long?We.Long.fromBits(n.lo,n.hi,t):n.toNumber(!!t)};function _oe(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}We.merge=_oe;We.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function voe(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&_oe(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return r}}),e.prototype.toString=function(){return this.name+": "+this.message},e}We.newError=voe;We.ProtocolError=voe("ProtocolError");We.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};We.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};We.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};We._configure=function(){var r=We.Buffer;if(!r){We._Buffer_from=We._Buffer_allocUnsafe=null;return}We._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},We._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var rN=O((EEt,Toe)=>{"use strict";Toe.exports=rr;var $s=Eu(),XD,Tb=$s.LongBits,Eoe=$s.base64,xoe=$s.utf8;function P7(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function ZD(){}function XBe(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function rr(){this.len=0,this.head=new P7(ZD,0,0),this.tail=this.head,this.states=null}var Soe=function(){return $s.Buffer?function(){return(rr.create=function(){return new XD})()}:function(){return new rr}};rr.create=Soe();rr.alloc=function(e){return new $s.Array(e)};$s.Array!==Array&&(rr.alloc=$s.pool(rr.alloc,$s.Array.prototype.subarray));rr.prototype._push=function(e,t,n){return this.tail=this.tail.next=new P7(e,t,n),this.len+=t,this};function JD(r,e,t){e[t]=r&255}function QBe(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function eN(r,e){this.len=r,this.next=void 0,this.val=e}eN.prototype=Object.create(P7.prototype);eN.prototype.fn=QBe;rr.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new eN((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};rr.prototype.int32=function(e){return e<0?this._push(tN,10,Tb.fromNumber(e)):this.uint32(e)};rr.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function tN(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}rr.prototype.uint64=function(e){var t=Tb.from(e);return this._push(tN,t.length(),t)};rr.prototype.int64=rr.prototype.uint64;rr.prototype.sint64=function(e){var t=Tb.from(e).zzEncode();return this._push(tN,t.length(),t)};rr.prototype.bool=function(e){return this._push(JD,1,e?1:0)};function QD(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}rr.prototype.fixed32=function(e){return this._push(QD,4,e>>>0)};rr.prototype.sfixed32=rr.prototype.fixed32;rr.prototype.fixed64=function(e){var t=Tb.from(e);return this._push(QD,4,t.lo)._push(QD,4,t.hi)};rr.prototype.sfixed64=rr.prototype.fixed64;rr.prototype.float=function(e){return this._push($s.float.writeFloatLE,4,e)};rr.prototype.double=function(e){return this._push($s.float.writeDoubleLE,8,e)};var ZBe=$s.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};rr.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(JD,1,0);if($s.isString(e)){var n=rr.alloc(t=Eoe.length(e));Eoe.decode(e,n,0),e=n}return this.uint32(t)._push(ZBe,t,e)};rr.prototype.string=function(e){var t=xoe.length(e);return t?this.uint32(t)._push(xoe.write,t,e):this._push(JD,1,0)};rr.prototype.fork=function(){return this.states=new XBe(this),this.head=this.tail=new P7(ZD,0,0),this.len=0,this};rr.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new P7(ZD,0,0),this.len=0),this};rr.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};rr.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};rr._configure=function(r){XD=r,rr.create=Soe(),XD._configure()}});var Coe=O((xEt,Aoe)=>{"use strict";Aoe.exports=V1;var Ioe=rN();(V1.prototype=Object.create(Ioe.prototype)).constructor=V1;var xu=Eu();function V1(){Ioe.call(this)}V1._configure=function(){V1.alloc=xu._Buffer_allocUnsafe,V1.writeBytesBuffer=xu.Buffer&&xu.Buffer.prototype instanceof Uint8Array&&xu.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};V1.prototype.bytes=function(e){xu.isString(e)&&(e=xu._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(V1.writeBytesBuffer,t,e),this};function JBe(r,e,t){r.length<40?xu.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}V1.prototype.string=function(e){var t=xu.Buffer.byteLength(e);return this.uint32(t),t&&this._push(JBe,t,e),this};V1._configure()});var oN=O((SEt,Noe)=>{"use strict";Noe.exports=mn;var z1=Eu(),iN,Poe=z1.LongBits,eMe=z1.utf8;function ja(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function mn(r){this.buf=r,this.pos=0,this.len=r.length}var Roe=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new mn(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new mn(e);throw Error("illegal buffer")},Doe=function(){return z1.Buffer?function(t){return(mn.create=function(i){return z1.Buffer.isBuffer(i)?new iN(i):Roe(i)})(t)}:Roe};mn.create=Doe();mn.prototype._slice=z1.Array.prototype.subarray||z1.Array.prototype.slice;mn.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ja(this,10);return e}}();mn.prototype.int32=function(){return this.uint32()|0};mn.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function nN(){var r=new Poe(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ja(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw ja(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}mn.prototype.bool=function(){return this.uint32()!==0};function Ib(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}mn.prototype.fixed32=function(){if(this.pos+4>this.len)throw ja(this,4);return Ib(this.buf,this.pos+=4)};mn.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ja(this,4);return Ib(this.buf,this.pos+=4)|0};function koe(){if(this.pos+8>this.len)throw ja(this,8);return new Poe(Ib(this.buf,this.pos+=4),Ib(this.buf,this.pos+=4))}mn.prototype.float=function(){if(this.pos+4>this.len)throw ja(this,4);var e=z1.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};mn.prototype.double=function(){if(this.pos+8>this.len)throw ja(this,4);var e=z1.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};mn.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw ja(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};mn.prototype.string=function(){var e=this.bytes();return eMe.read(e,0,e.length)};mn.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ja(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ja(this);while(this.buf[this.pos++]&128);return this};mn.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};mn._configure=function(r){iN=r,mn.create=Doe(),iN._configure();var e=z1.Long?"toLong":"toNumber";z1.merge(mn.prototype,{int64:function(){return nN.call(this)[e](!1)},uint64:function(){return nN.call(this)[e](!0)},sint64:function(){return nN.call(this).zzDecode()[e](!1)},fixed64:function(){return koe.call(this)[e](!0)},sfixed64:function(){return koe.call(this)[e](!1)}})}});var Moe=O((TEt,Boe)=>{"use strict";Boe.exports=I3;var Loe=oN();(I3.prototype=Object.create(Loe.prototype)).constructor=I3;var Ooe=Eu();function I3(r){Loe.call(this,r)}I3._configure=function(){Ooe.Buffer&&(I3.prototype._slice=Ooe.Buffer.prototype.slice)};I3.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};I3._configure()});var Foe=O((IEt,Uoe)=>{"use strict";Uoe.exports=D7;var sN=Eu();(D7.prototype=Object.create(sN.EventEmitter.prototype)).constructor=D7;function D7(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");sN.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!e,this.responseDelimited=!!t}D7.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return sN.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(c,u){if(c)return s.emit("error",c,e),o(c);if(u===null){s.end(!0);return}if(!(u instanceof n))try{u=n[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(l){return s.emit("error",l,e),o(l)}return s.emit("data",u,e),o(null,u)})}catch(a){s.emit("error",a,e),setTimeout(function(){o(a)},0);return}};D7.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var zoe=O(Voe=>{"use strict";var tMe=Voe;tMe.Service=Foe()});var $oe=O((CEt,qoe)=>{"use strict";qoe.exports={}});var Goe=O(joe=>{"use strict";var yo=joe;yo.build="minimal";yo.Writer=rN();yo.BufferWriter=Coe();yo.Reader=oN();yo.BufferReader=Moe();yo.util=Eu();yo.rpc=zoe();yo.roots=$oe();yo.configure=Koe;function Koe(){yo.util._configure(),yo.Writer._configure(yo.BufferWriter),yo.Reader._configure(yo.BufferReader)}Koe()});var aN=O((kEt,Hoe)=>{"use strict";Hoe.exports=Goe()});var Yoe=O((Woe,N7)=>{(function(r,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof require=="function"&&typeof N7=="object"&&N7&&N7.exports&&(N7.exports=e(aN()))})(Woe,function(r){"use strict";var e=r.Reader,t=r.Writer,n=r.util,i=r.roots.default||(r.roots.default={});return i.RPC=function(){function o(a){if(this.subscriptions=[],this.messages=[],a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}o.prototype.subscriptions=n.emptyArray,o.prototype.messages=n.emptyArray,o.prototype.control=null;var s;return Object.defineProperty(o.prototype,"_control",{get:n.oneOfGetter(s=["control"]),set:n.oneOfSetter(s)}),o.encode=function(c,u){if(u||(u=t.create()),c.subscriptions!=null&&c.subscriptions.length)for(var l=0;l<c.subscriptions.length;++l)i.RPC.SubOpts.encode(c.subscriptions[l],u.uint32(10).fork()).ldelim();if(c.messages!=null&&c.messages.length)for(var l=0;l<c.messages.length;++l)i.RPC.Message.encode(c.messages[l],u.uint32(18).fork()).ldelim();return c.control!=null&&Object.hasOwnProperty.call(c,"control")&&i.RPC.ControlMessage.encode(c.control,u.uint32(26).fork()).ldelim(),u},o.decode=function(c,u){c instanceof e||(c=e.create(c));for(var l=u===void 0?c.len:c.pos+u,d=new i.RPC;c.pos<l;){var h=c.uint32();switch(h>>>3){case 1:d.subscriptions&&d.subscriptions.length||(d.subscriptions=[]),d.subscriptions.push(i.RPC.SubOpts.decode(c,c.uint32()));break;case 2:d.messages&&d.messages.length||(d.messages=[]),d.messages.push(i.RPC.Message.decode(c,c.uint32()));break;case 3:d.control=i.RPC.ControlMessage.decode(c,c.uint32());break;default:c.skipType(h&7);break}}return d},o.fromObject=function(c){if(c instanceof i.RPC)return c;var u=new i.RPC;if(c.subscriptions){if(!Array.isArray(c.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var l=0;l<c.subscriptions.length;++l){if(typeof c.subscriptions[l]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[l]=i.RPC.SubOpts.fromObject(c.subscriptions[l])}}if(c.messages){if(!Array.isArray(c.messages))throw TypeError(".RPC.messages: array expected");u.messages=[];for(var l=0;l<c.messages.length;++l){if(typeof c.messages[l]!="object")throw TypeError(".RPC.messages: object expected");u.messages[l]=i.RPC.Message.fromObject(c.messages[l])}}if(c.control!=null){if(typeof c.control!="object")throw TypeError(".RPC.control: object expected");u.control=i.RPC.ControlMessage.fromObject(c.control)}return u},o.toObject=function(c,u){u||(u={});var l={};if((u.arrays||u.defaults)&&(l.subscriptions=[],l.messages=[]),c.subscriptions&&c.subscriptions.length){l.subscriptions=[];for(var d=0;d<c.subscriptions.length;++d)l.subscriptions[d]=i.RPC.SubOpts.toObject(c.subscriptions[d],u)}if(c.messages&&c.messages.length){l.messages=[];for(var d=0;d<c.messages.length;++d)l.messages[d]=i.RPC.Message.toObject(c.messages[d],u)}return c.control!=null&&c.hasOwnProperty("control")&&(l.control=i.RPC.ControlMessage.toObject(c.control,u),u.oneofs&&(l._control="control")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},o.SubOpts=function(){function a(u){if(u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.subscribe=null,a.prototype.topic=null;var c;return Object.defineProperty(a.prototype,"_subscribe",{get:n.oneOfGetter(c=["subscribe"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_topic",{get:n.oneOfGetter(c=["topic"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){return d||(d=t.create()),l.subscribe!=null&&Object.hasOwnProperty.call(l,"subscribe")&&d.uint32(8).bool(l.subscribe),l.topic!=null&&Object.hasOwnProperty.call(l,"topic")&&d.uint32(18).string(l.topic),d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.SubOpts;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.subscribe=l.bool();break;case 2:f.topic=l.string();break;default:l.skipType(m&7);break}}return f},a.fromObject=function(l){if(l instanceof i.RPC.SubOpts)return l;var d=new i.RPC.SubOpts;return l.subscribe!=null&&(d.subscribe=!!l.subscribe),l.topic!=null&&(d.topic=String(l.topic)),d},a.toObject=function(l,d){d||(d={});var h={};return l.subscribe!=null&&l.hasOwnProperty("subscribe")&&(h.subscribe=l.subscribe,d.oneofs&&(h._subscribe="subscribe")),l.topic!=null&&l.hasOwnProperty("topic")&&(h.topic=l.topic,d.oneofs&&(h._topic="topic")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.Message=function(){function a(u){if(u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.from=null,a.prototype.data=null,a.prototype.seqno=null,a.prototype.topic="",a.prototype.signature=null,a.prototype.key=null;var c;return Object.defineProperty(a.prototype,"_from",{get:n.oneOfGetter(c=["from"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_data",{get:n.oneOfGetter(c=["data"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_seqno",{get:n.oneOfGetter(c=["seqno"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signature",{get:n.oneOfGetter(c=["signature"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_key",{get:n.oneOfGetter(c=["key"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){return d||(d=t.create()),l.from!=null&&Object.hasOwnProperty.call(l,"from")&&d.uint32(10).bytes(l.from),l.data!=null&&Object.hasOwnProperty.call(l,"data")&&d.uint32(18).bytes(l.data),l.seqno!=null&&Object.hasOwnProperty.call(l,"seqno")&&d.uint32(26).bytes(l.seqno),d.uint32(34).string(l.topic),l.signature!=null&&Object.hasOwnProperty.call(l,"signature")&&d.uint32(42).bytes(l.signature),l.key!=null&&Object.hasOwnProperty.call(l,"key")&&d.uint32(50).bytes(l.key),d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.Message;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.from=l.bytes();break;case 2:f.data=l.bytes();break;case 3:f.seqno=l.bytes();break;case 4:f.topic=l.string();break;case 5:f.signature=l.bytes();break;case 6:f.key=l.bytes();break;default:l.skipType(m&7);break}}if(!f.hasOwnProperty("topic"))throw n.ProtocolError("missing required 'topic'",{instance:f});return f},a.fromObject=function(l){if(l instanceof i.RPC.Message)return l;var d=new i.RPC.Message;return l.from!=null&&(typeof l.from=="string"?n.base64.decode(l.from,d.from=n.newBuffer(n.base64.length(l.from)),0):l.from.length&&(d.from=l.from)),l.data!=null&&(typeof l.data=="string"?n.base64.decode(l.data,d.data=n.newBuffer(n.base64.length(l.data)),0):l.data.length&&(d.data=l.data)),l.seqno!=null&&(typeof l.seqno=="string"?n.base64.decode(l.seqno,d.seqno=n.newBuffer(n.base64.length(l.seqno)),0):l.seqno.length&&(d.seqno=l.seqno)),l.topic!=null&&(d.topic=String(l.topic)),l.signature!=null&&(typeof l.signature=="string"?n.base64.decode(l.signature,d.signature=n.newBuffer(n.base64.length(l.signature)),0):l.signature.length&&(d.signature=l.signature)),l.key!=null&&(typeof l.key=="string"?n.base64.decode(l.key,d.key=n.newBuffer(n.base64.length(l.key)),0):l.key.length&&(d.key=l.key)),d},a.toObject=function(l,d){d||(d={});var h={};return d.defaults&&(h.topic=""),l.from!=null&&l.hasOwnProperty("from")&&(h.from=d.bytes===String?n.base64.encode(l.from,0,l.from.length):d.bytes===Array?Array.prototype.slice.call(l.from):l.from,d.oneofs&&(h._from="from")),l.data!=null&&l.hasOwnProperty("data")&&(h.data=d.bytes===String?n.base64.encode(l.data,0,l.data.length):d.bytes===Array?Array.prototype.slice.call(l.data):l.data,d.oneofs&&(h._data="data")),l.seqno!=null&&l.hasOwnProperty("seqno")&&(h.seqno=d.bytes===String?n.base64.encode(l.seqno,0,l.seqno.length):d.bytes===Array?Array.prototype.slice.call(l.seqno):l.seqno,d.oneofs&&(h._seqno="seqno")),l.topic!=null&&l.hasOwnProperty("topic")&&(h.topic=l.topic),l.signature!=null&&l.hasOwnProperty("signature")&&(h.signature=d.bytes===String?n.base64.encode(l.signature,0,l.signature.length):d.bytes===Array?Array.prototype.slice.call(l.signature):l.signature,d.oneofs&&(h._signature="signature")),l.key!=null&&l.hasOwnProperty("key")&&(h.key=d.bytes===String?n.base64.encode(l.key,0,l.key.length):d.bytes===Array?Array.prototype.slice.call(l.key):l.key,d.oneofs&&(h._key="key")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.ControlMessage=function(){function a(c){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],c)for(var u=Object.keys(c),l=0;l<u.length;++l)c[u[l]]!=null&&(this[u[l]]=c[u[l]])}return a.prototype.ihave=n.emptyArray,a.prototype.iwant=n.emptyArray,a.prototype.graft=n.emptyArray,a.prototype.prune=n.emptyArray,a.encode=function(u,l){if(l||(l=t.create()),u.ihave!=null&&u.ihave.length)for(var d=0;d<u.ihave.length;++d)i.RPC.ControlIHave.encode(u.ihave[d],l.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var d=0;d<u.iwant.length;++d)i.RPC.ControlIWant.encode(u.iwant[d],l.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var d=0;d<u.graft.length;++d)i.RPC.ControlGraft.encode(u.graft[d],l.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var d=0;d<u.prune.length;++d)i.RPC.ControlPrune.encode(u.prune[d],l.uint32(34).fork()).ldelim();return l},a.decode=function(u,l){u instanceof e||(u=e.create(u));for(var d=l===void 0?u.len:u.pos+l,h=new i.RPC.ControlMessage;u.pos<d;){var f=u.uint32();switch(f>>>3){case 1:h.ihave&&h.ihave.length||(h.ihave=[]),h.ihave.push(i.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:h.iwant&&h.iwant.length||(h.iwant=[]),h.iwant.push(i.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:h.graft&&h.graft.length||(h.graft=[]),h.graft.push(i.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:h.prune&&h.prune.length||(h.prune=[]),h.prune.push(i.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(f&7);break}}return h},a.fromObject=function(u){if(u instanceof i.RPC.ControlMessage)return u;var l=new i.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");l.ihave=[];for(var d=0;d<u.ihave.length;++d){if(typeof u.ihave[d]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");l.ihave[d]=i.RPC.ControlIHave.fromObject(u.ihave[d])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");l.iwant=[];for(var d=0;d<u.iwant.length;++d){if(typeof u.iwant[d]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");l.iwant[d]=i.RPC.ControlIWant.fromObject(u.iwant[d])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");l.graft=[];for(var d=0;d<u.graft.length;++d){if(typeof u.graft[d]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");l.graft[d]=i.RPC.ControlGraft.fromObject(u.graft[d])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");l.prune=[];for(var d=0;d<u.prune.length;++d){if(typeof u.prune[d]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");l.prune[d]=i.RPC.ControlPrune.fromObject(u.prune[d])}}return l},a.toObject=function(u,l){l||(l={});var d={};if((l.arrays||l.defaults)&&(d.ihave=[],d.iwant=[],d.graft=[],d.prune=[]),u.ihave&&u.ihave.length){d.ihave=[];for(var h=0;h<u.ihave.length;++h)d.ihave[h]=i.RPC.ControlIHave.toObject(u.ihave[h],l)}if(u.iwant&&u.iwant.length){d.iwant=[];for(var h=0;h<u.iwant.length;++h)d.iwant[h]=i.RPC.ControlIWant.toObject(u.iwant[h],l)}if(u.graft&&u.graft.length){d.graft=[];for(var h=0;h<u.graft.length;++h)d.graft[h]=i.RPC.ControlGraft.toObject(u.graft[h],l)}if(u.prune&&u.prune.length){d.prune=[];for(var h=0;h<u.prune.length;++h)d.prune[h]=i.RPC.ControlPrune.toObject(u.prune[h],l)}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.ControlIHave=function(){function a(u){if(this.messageIDs=[],u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.topicID=null,a.prototype.messageIDs=n.emptyArray;var c;return Object.defineProperty(a.prototype,"_topicID",{get:n.oneOfGetter(c=["topicID"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){if(d||(d=t.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&d.uint32(10).string(l.topicID),l.messageIDs!=null&&l.messageIDs.length)for(var h=0;h<l.messageIDs.length;++h)d.uint32(18).bytes(l.messageIDs[h]);return d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.ControlIHave;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.topicID=l.string();break;case 2:f.messageIDs&&f.messageIDs.length||(f.messageIDs=[]),f.messageIDs.push(l.bytes());break;default:l.skipType(m&7);break}}return f},a.fromObject=function(l){if(l instanceof i.RPC.ControlIHave)return l;var d=new i.RPC.ControlIHave;if(l.topicID!=null&&(d.topicID=String(l.topicID)),l.messageIDs){if(!Array.isArray(l.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");d.messageIDs=[];for(var h=0;h<l.messageIDs.length;++h)typeof l.messageIDs[h]=="string"?n.base64.decode(l.messageIDs[h],d.messageIDs[h]=n.newBuffer(n.base64.length(l.messageIDs[h])),0):l.messageIDs[h].length&&(d.messageIDs[h]=l.messageIDs[h])}return d},a.toObject=function(l,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.messageIDs=[]),l.topicID!=null&&l.hasOwnProperty("topicID")&&(h.topicID=l.topicID,d.oneofs&&(h._topicID="topicID")),l.messageIDs&&l.messageIDs.length){h.messageIDs=[];for(var f=0;f<l.messageIDs.length;++f)h.messageIDs[f]=d.bytes===String?n.base64.encode(l.messageIDs[f],0,l.messageIDs[f].length):d.bytes===Array?Array.prototype.slice.call(l.messageIDs[f]):l.messageIDs[f]}return h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.ControlIWant=function(){function a(c){if(this.messageIDs=[],c)for(var u=Object.keys(c),l=0;l<u.length;++l)c[u[l]]!=null&&(this[u[l]]=c[u[l]])}return a.prototype.messageIDs=n.emptyArray,a.encode=function(u,l){if(l||(l=t.create()),u.messageIDs!=null&&u.messageIDs.length)for(var d=0;d<u.messageIDs.length;++d)l.uint32(10).bytes(u.messageIDs[d]);return l},a.decode=function(u,l){u instanceof e||(u=e.create(u));for(var d=l===void 0?u.len:u.pos+l,h=new i.RPC.ControlIWant;u.pos<d;){var f=u.uint32();switch(f>>>3){case 1:h.messageIDs&&h.messageIDs.length||(h.messageIDs=[]),h.messageIDs.push(u.bytes());break;default:u.skipType(f&7);break}}return h},a.fromObject=function(u){if(u instanceof i.RPC.ControlIWant)return u;var l=new i.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");l.messageIDs=[];for(var d=0;d<u.messageIDs.length;++d)typeof u.messageIDs[d]=="string"?n.base64.decode(u.messageIDs[d],l.messageIDs[d]=n.newBuffer(n.base64.length(u.messageIDs[d])),0):u.messageIDs[d].length&&(l.messageIDs[d]=u.messageIDs[d])}return l},a.toObject=function(u,l){l||(l={});var d={};if((l.arrays||l.defaults)&&(d.messageIDs=[]),u.messageIDs&&u.messageIDs.length){d.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)d.messageIDs[h]=l.bytes===String?n.base64.encode(u.messageIDs[h],0,u.messageIDs[h].length):l.bytes===Array?Array.prototype.slice.call(u.messageIDs[h]):u.messageIDs[h]}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.ControlGraft=function(){function a(u){if(u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:n.oneOfGetter(c=["topicID"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){return d||(d=t.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&d.uint32(10).string(l.topicID),d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.ControlGraft;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.topicID=l.string();break;default:l.skipType(m&7);break}}return f},a.fromObject=function(l){if(l instanceof i.RPC.ControlGraft)return l;var d=new i.RPC.ControlGraft;return l.topicID!=null&&(d.topicID=String(l.topicID)),d},a.toObject=function(l,d){d||(d={});var h={};return l.topicID!=null&&l.hasOwnProperty("topicID")&&(h.topicID=l.topicID,d.oneofs&&(h._topicID="topicID")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.ControlPrune=function(){function a(u){if(this.peers=[],u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.topicID=null,a.prototype.peers=n.emptyArray,a.prototype.backoff=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:n.oneOfGetter(c=["topicID"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_backoff",{get:n.oneOfGetter(c=["backoff"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){if(d||(d=t.create()),l.topicID!=null&&Object.hasOwnProperty.call(l,"topicID")&&d.uint32(10).string(l.topicID),l.peers!=null&&l.peers.length)for(var h=0;h<l.peers.length;++h)i.RPC.PeerInfo.encode(l.peers[h],d.uint32(18).fork()).ldelim();return l.backoff!=null&&Object.hasOwnProperty.call(l,"backoff")&&d.uint32(24).uint64(l.backoff),d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.ControlPrune;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.topicID=l.string();break;case 2:f.peers&&f.peers.length||(f.peers=[]),f.peers.push(i.RPC.PeerInfo.decode(l,l.uint32()));break;case 3:f.backoff=l.uint64();break;default:l.skipType(m&7);break}}return f},a.fromObject=function(l){if(l instanceof i.RPC.ControlPrune)return l;var d=new i.RPC.ControlPrune;if(l.topicID!=null&&(d.topicID=String(l.topicID)),l.peers){if(!Array.isArray(l.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");d.peers=[];for(var h=0;h<l.peers.length;++h){if(typeof l.peers[h]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");d.peers[h]=i.RPC.PeerInfo.fromObject(l.peers[h])}}return l.backoff!=null&&(n.Long?(d.backoff=n.Long.fromValue(l.backoff)).unsigned=!0:typeof l.backoff=="string"?d.backoff=parseInt(l.backoff,10):typeof l.backoff=="number"?d.backoff=l.backoff:typeof l.backoff=="object"&&(d.backoff=new n.LongBits(l.backoff.low>>>0,l.backoff.high>>>0).toNumber(!0))),d},a.toObject=function(l,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.peers=[]),l.topicID!=null&&l.hasOwnProperty("topicID")&&(h.topicID=l.topicID,d.oneofs&&(h._topicID="topicID")),l.peers&&l.peers.length){h.peers=[];for(var f=0;f<l.peers.length;++f)h.peers[f]=i.RPC.PeerInfo.toObject(l.peers[f],d)}return l.backoff!=null&&l.hasOwnProperty("backoff")&&(typeof l.backoff=="number"?h.backoff=d.longs===String?String(l.backoff):l.backoff:h.backoff=d.longs===String?n.Long.prototype.toString.call(l.backoff):d.longs===Number?new n.LongBits(l.backoff.low>>>0,l.backoff.high>>>0).toNumber(!0):l.backoff,d.oneofs&&(h._backoff="backoff")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o.PeerInfo=function(){function a(u){if(u)for(var l=Object.keys(u),d=0;d<l.length;++d)u[l[d]]!=null&&(this[l[d]]=u[l[d]])}a.prototype.peerID=null,a.prototype.signedPeerRecord=null;var c;return Object.defineProperty(a.prototype,"_peerID",{get:n.oneOfGetter(c=["peerID"]),set:n.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signedPeerRecord",{get:n.oneOfGetter(c=["signedPeerRecord"]),set:n.oneOfSetter(c)}),a.encode=function(l,d){return d||(d=t.create()),l.peerID!=null&&Object.hasOwnProperty.call(l,"peerID")&&d.uint32(10).bytes(l.peerID),l.signedPeerRecord!=null&&Object.hasOwnProperty.call(l,"signedPeerRecord")&&d.uint32(18).bytes(l.signedPeerRecord),d},a.decode=function(l,d){l instanceof e||(l=e.create(l));for(var h=d===void 0?l.len:l.pos+d,f=new i.RPC.PeerInfo;l.pos<h;){var m=l.uint32();switch(m>>>3){case 1:f.peerID=l.bytes();break;case 2:f.signedPeerRecord=l.bytes();break;default:l.skipType(m&7);break}}return f},a.fromObject=function(l){if(l instanceof i.RPC.PeerInfo)return l;var d=new i.RPC.PeerInfo;return l.peerID!=null&&(typeof l.peerID=="string"?n.base64.decode(l.peerID,d.peerID=n.newBuffer(n.base64.length(l.peerID)),0):l.peerID.length&&(d.peerID=l.peerID)),l.signedPeerRecord!=null&&(typeof l.signedPeerRecord=="string"?n.base64.decode(l.signedPeerRecord,d.signedPeerRecord=n.newBuffer(n.base64.length(l.signedPeerRecord)),0):l.signedPeerRecord.length&&(d.signedPeerRecord=l.signedPeerRecord)),d},a.toObject=function(l,d){d||(d={});var h={};return l.peerID!=null&&l.hasOwnProperty("peerID")&&(h.peerID=d.bytes===String?n.base64.encode(l.peerID,0,l.peerID.length):d.bytes===Array?Array.prototype.slice.call(l.peerID):l.peerID,d.oneofs&&(h._peerID="peerID")),l.signedPeerRecord!=null&&l.hasOwnProperty("signedPeerRecord")&&(h.signedPeerRecord=d.bytes===String?n.base64.encode(l.signedPeerRecord,0,l.signedPeerRecord.length):d.bytes===Array?Array.prototype.slice.call(l.signedPeerRecord):l.signedPeerRecord,d.oneofs&&(h._signedPeerRecord="signedPeerRecord")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),o}(),i})});var sse=O((txt,ose)=>{"use strict";function on(r,t){var t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(r)&&this._fromArray(r)}on.prototype.peekAt=function(e){var t=e;if(t===(t|0)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}};on.prototype.get=function(e){return this.peekAt(e)};on.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};on.prototype.peekFront=function(){return this.peek()};on.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(on.prototype,"length",{get:function(){return this.size()}});on.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};on.prototype.unshift=function(e){if(e===void 0)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};on.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}};on.prototype.push=function(e){if(e===void 0)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};on.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}};on.prototype.removeOne=function(e){var t=e;if(t===(t|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var o=this._list[t],s;if(e<n/2){for(s=e;s>0;s--)this._list[t]=this._list[t=t-1+i&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(s=n-1-e;s>0;s--)this._list[t]=this._list[t=t+1+i&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+i&this._capacityMask}return o}}};on.prototype.remove=function(e,t){var n=e,i,o=t;if(n===(n|0)&&this._head!==this._tail){var s=this.size(),a=this._list.length;if(!(n>=s||n<-s||t<1)){if(n<0&&(n+=s),t===1||!t)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+t>=s)return i=this.toArray(),this.clear(),i;n+t>s&&(t=s-n);var c;for(i=new Array(t),c=0;c<t;c++)i[c]=this._list[this._head+n+c&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===s){for(this._tail=this._tail-t+a&this._capacityMask,c=t;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+t+a&this._capacityMask,c=t-1;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<s/2){for(this._head=this._head+e+t+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;o>0;)this._list[n=n-1+a&this._capacityMask]=void 0,o--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+a&this._capacityMask,c=s-(t+e);c>0;c--)this.push(this._list[n++]);for(n=this._tail;o>0;)this._list[n=n+1+a&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};on.prototype.splice=function(e,t){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var o,s,a,c=arguments.length,u=this._list.length,l=2;if(!i||n<i/2){for(s=new Array(n),o=0;o<n;o++)s[o]=this._list[this._head+o&this._capacityMask];for(t===0?(a=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+u&this._capacityMask);c>l;)this.unshift(arguments[--c]);for(o=n;o>0;o--)this.unshift(s[o-1])}else{s=new Array(i-(n+t));var d=s.length;for(o=0;o<d;o++)s[o]=this._list[this._head+n+t+o&this._capacityMask];for(t===0?(a=[],n!=i&&(this._tail=this._head+n+u&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-d+u&this._capacityMask);l<c;)this.push(arguments[l++]);for(o=0;o<d;o++)this.push(s[o])}return a}else return this.remove(n,t)}};on.prototype.clear=function(){this._head=0,this._tail=0};on.prototype.isEmpty=function(){return this._head===this._tail};on.prototype.toArray=function(){return this._copyArray(!1)};on.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])};on.prototype._copyArray=function(e){var t=[],n=this._list,i=n.length,o;if(e||this._head>this._tail){for(o=this._head;o<i;o++)t.push(n[o]);for(o=0;o<this._tail;o++)t.push(n[o])}else for(o=this._head;o<this._tail;o++)t.push(n[o]);return t};on.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};on.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};ose.exports=on});var TN=O((QAt,uae)=>{uae.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var dae=O((JAt,lae)=>{lae.exports=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var pae=O((tCt,hae)=>{var fae=dae();hae.exports=class{constructor(e){this.hwm=e||16,this.head=new fae(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let t=this.head;this.head=t.next=new fae(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var IN=O((rCt,mae)=>{"use strict";var kUe=()=>{let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r};mae.exports=kUe});var AN=O((iCt,wae)=>{var gae=pae(),yae=IN();wae.exports=class{constructor(){this._buffer=new gae,this._waitingConsumers=new gae}push(e){let{promise:t,resolve:n}=yae();return this._buffer.push({chunk:e,resolve:n}),this._consume(),t}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}shift(){let{promise:e,resolve:t}=yae();return this._waitingConsumers.push({resolve:t}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}});var CN=O((oCt,_ae)=>{var{Readable:PUe,Writable:DUe,Duplex:NUe}=require("stream"),OUe=TN(),LUe=AN(),{Buffer:BUe}=require("buffer"),bae=BUe.alloc(0);_ae.exports=function(e,t){t=t||{};let n=!1,i=new LUe;e={sink:e.sink,source:e.source?OUe(e.source):null};let o=NUe;e.source?e.sink||(o=PUe):o=DUe;let s;e.source&&(s={async read(u){if(!n){n=!0;try{for(;;){let{value:l,done:d}=await e.source.next(u);if(d)return this.push(null);if(!this.push(l))break}}catch(l){this.emit("error",l)}finally{n=!1}}}});let a;e.sink&&(a={write(u,l,d){i.push(u).then(()=>d(),d)},final(u){i.push(bae).then(()=>u(),u)}}),Object.assign(t,s,a);let c=new o(t);return e.sink&&e.sink({[Symbol.asyncIterator](){return this},async next(){let u=await i.shift();return u===bae?{done:!0}:{value:u}},async throw(u){return c.destroy(u),{done:!0}},async return(){return c.destroy(),{done:!0}}}),c}});var Eae=O((sCt,vae)=>{var MUe=CN(),UUe=IN();vae.exports=function(e,t){let{promise:n,resolve:i}=UUe(),o=async function*(){let s=await n;for await(let a of s)yield a}();return MUe({sink:s=>i(e(s)),source:o},t)}});var Sae=O((aCt,a5)=>{"use strict";var FUe=Eae(),RN=CN();function xae(r,e){return RN({source:r},e)}function VUe(r,e){return RN({sink:r},e)}a5.exports=xae;a5.exports.readable=xae;a5.exports.writable=VUe;a5.exports.transform=FUe;a5.exports.duplex=RN});var j7=O((nDt,E1e)=>{E1e.exports=r=>{if(r[Symbol.asyncIterator])return r;if(r.getReader)return async function*(){let e=r.getReader();try{for(;;){let{done:t,value:n}=await e.read();if(t)return;yield n}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var DN=O((JUt,d0e)=>{"use strict";var uFe=require("fs").promises,lFe=require("fs"),dFe=DP(),l0e=require("path"),fFe=fe();d0e.exports=async function*(e,t,n){if(n=n||{},typeof t!="string")throw fFe(new Error("Pattern must be a string"),"ERR_INVALID_PATH",{pattern:t});l0e.isAbsolute(e)||(e=l0e.resolve(process.cwd(),e));let i=Object.assign({},{nodir:!1,realpath:!1,absolute:!0,dot:!!n.hidden,follow:n.followSymlinks!=null?n.followSymlinks:!0});for await(let o of dFe(e,t,i)){let s=await uFe.stat(o),a=n.mode;n.preserveMode&&(a=s.mode);let c=n.mtime;n.preserveMtime&&(c=s.mtime),yield{path:hFe(o.replace(e,"")),content:s.isFile()?lFe.createReadStream(o):void 0,mode:a,mtime:c}}};var hFe=r=>r.replace(/\\/g,"/")});var NN=O((eFt,f0e)=>{"use strict";var pFe=T8(),mFe=(r,e)=>({path:decodeURIComponent(new URL(r).pathname.split("/").pop()||""),content:gFe(r,e)});async function*gFe(r,e){yield*(await new pFe().get(r,e)).iterator()}f0e.exports=mFe});var ON=O(($Ft,p0e)=>{var bFe=TN();p0e.exports=r=>async e=>{e=bFe(e);let t=E=>{typeof E.return=="function"&&E.return()},n=null,i=null,o=E=>{n=E,i&&i(E),t(e)},s=null,a=!1,c=()=>{a=!0,s&&s()},u=null,l=!1,d=()=>{l=!0,u&&u()},h=null,f=()=>{h&&h()},m=()=>new Promise((E,S)=>{s=h=E,i=S,r.once("drain",f)}),w=()=>(t(e),new Promise((E,S)=>{if(a||l||n)return E();u=s=E,i=S})),_=()=>{r.removeListener("error",o),r.removeListener("close",c),r.removeListener("finish",d),r.removeListener("drain",f)};r.once("error",o),r.once("close",c),r.once("finish",d);try{for await(let E of e){if(!r.writable||r.destroyed||n)break;r.write(E)===!1&&await m()}}catch(E){n||r.destroy(),n=E}try{if(r.writable&&r.end(),await w(),n)throw n}finally{_()}}});var LN=O((KFt,m0e)=>{var _Fe=ON(),vFe=j7();m0e.exports=r=>({sink:_Fe(r),source:vFe(r)})});var y0e=O((jFt,g0e)=>{var EFe=LN();g0e.exports=r=>async function*(e){let t=EFe(r),n;if(t.sink(e).catch(i=>{n=i}),yield*t.source,n)throw n}});var w0e=O((GFt,d5)=>{d5.exports=j7();d5.exports.source=j7();d5.exports.sink=ON();d5.exports.transform=y0e();d5.exports.duplex=LN()});var MN=O((b_,v0e)=>{(function(){var r,e=0xdeadbeefcafe,t=(e&16777215)==15715070;function n(C,k,B){C!=null&&(typeof C=="number"?this.fromNumber(C,k,B):k==null&&typeof C!="string"?this.fromString(C,256):this.fromString(C,k))}function i(){return new n(null)}function o(C,k,B,Q,de,ge){for(;--ge>=0;){var ke=k*this[C++]+B[Q]+de;de=Math.floor(ke/67108864),B[Q++]=ke&67108863}return de}function s(C,k,B,Q,de,ge){for(var ke=k&32767,Fe=k>>15;--ge>=0;){var Rr=this[C]&32767,Fn=this[C++]>>15,ps=Fe*Rr+Fn*ke;Rr=ke*Rr+((ps&32767)<<15)+B[Q]+(de&1073741823),de=(Rr>>>30)+(ps>>>15)+Fe*Fn+(de>>>30),B[Q++]=Rr&1073741823}return de}function a(C,k,B,Q,de,ge){for(var ke=k&16383,Fe=k>>14;--ge>=0;){var Rr=this[C]&16383,Fn=this[C++]>>14,ps=Fe*Rr+Fn*ke;Rr=ke*Rr+((ps&16383)<<14)+B[Q]+de,de=(Rr>>28)+(ps>>14)+Fe*Fn,B[Q++]=Rr&268435455}return de}var c=typeof navigator<"u";c&&t&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=s,r=30):c&&t&&navigator.appName!="Netscape"?(n.prototype.am=o,r=26):(n.prototype.am=a,r=28),n.prototype.DB=r,n.prototype.DM=(1<<r)-1,n.prototype.DV=1<<r;var u=52;n.prototype.FV=Math.pow(2,u),n.prototype.F1=u-r,n.prototype.F2=2*r-u;var l="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,h,f;for(h=48,f=0;f<=9;++f)d[h++]=f;for(h=97,f=10;f<36;++f)d[h++]=f;for(h=65,f=10;f<36;++f)d[h++]=f;function m(C){return l.charAt(C)}function w(C,k){var B=d[C.charCodeAt(k)];return B??-1}function _(C){for(var k=this.t-1;k>=0;--k)C[k]=this[k];C.t=this.t,C.s=this.s}function E(C){this.t=1,this.s=C<0?-1:0,C>0?this[0]=C:C<-1?this[0]=C+this.DV:this.t=0}function S(C){var k=i();return k.fromInt(C),k}function p(C,k){var B;if(k==16)B=4;else if(k==8)B=3;else if(k==256)B=8;else if(k==2)B=1;else if(k==32)B=5;else if(k==4)B=2;else{this.fromRadix(C,k);return}this.t=0,this.s=0;for(var Q=C.length,de=!1,ge=0;--Q>=0;){var ke=B==8?C[Q]&255:w(C,Q);if(ke<0){C.charAt(Q)=="-"&&(de=!0);continue}de=!1,ge==0?this[this.t++]=ke:ge+B>this.DB?(this[this.t-1]|=(ke&(1<<this.DB-ge)-1)<<ge,this[this.t++]=ke>>this.DB-ge):this[this.t-1]|=ke<<ge,ge+=B,ge>=this.DB&&(ge-=this.DB)}B==8&&C[0]&128&&(this.s=-1,ge>0&&(this[this.t-1]|=(1<<this.DB-ge)-1<<ge)),this.clamp(),de&&n.ZERO.subTo(this,this)}function g(){for(var C=this.s&this.DM;this.t>0&&this[this.t-1]==C;)--this.t}function y(C){if(this.s<0)return"-"+this.negate().toString(C);var k;if(C==16)k=4;else if(C==8)k=3;else if(C==2)k=1;else if(C==32)k=5;else if(C==4)k=2;else return this.toRadix(C);var B=(1<<k)-1,Q,de=!1,ge="",ke=this.t,Fe=this.DB-ke*this.DB%k;if(ke-- >0)for(Fe<this.DB&&(Q=this[ke]>>Fe)>0&&(de=!0,ge=m(Q));ke>=0;)Fe<k?(Q=(this[ke]&(1<<Fe)-1)<<k-Fe,Q|=this[--ke]>>(Fe+=this.DB-k)):(Q=this[ke]>>(Fe-=k)&B,Fe<=0&&(Fe+=this.DB,--ke)),Q>0&&(de=!0),de&&(ge+=m(Q));return de?ge:"0"}function b(){var C=i();return n.ZERO.subTo(this,C),C}function x(){return this.s<0?this.negate():this}function v(C){var k=this.s-C.s;if(k!=0)return k;var B=this.t;if(k=B-C.t,k!=0)return this.s<0?-k:k;for(;--B>=0;)if((k=this[B]-C[B])!=0)return k;return 0}function T(C){var k=1,B;return(B=C>>>16)!=0&&(C=B,k+=16),(B=C>>8)!=0&&(C=B,k+=8),(B=C>>4)!=0&&(C=B,k+=4),(B=C>>2)!=0&&(C=B,k+=2),(B=C>>1)!=0&&(C=B,k+=1),k}function I(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function R(C,k){var B;for(B=this.t-1;B>=0;--B)k[B+C]=this[B];for(B=C-1;B>=0;--B)k[B]=0;k.t=this.t+C,k.s=this.s}function M(C,k){for(var B=C;B<this.t;++B)k[B-C]=this[B];k.t=Math.max(this.t-C,0),k.s=this.s}function U(C,k){var B=C%this.DB,Q=this.DB-B,de=(1<<Q)-1,ge=Math.floor(C/this.DB),ke=this.s<<B&this.DM,Fe;for(Fe=this.t-1;Fe>=0;--Fe)k[Fe+ge+1]=this[Fe]>>Q|ke,ke=(this[Fe]&de)<<B;for(Fe=ge-1;Fe>=0;--Fe)k[Fe]=0;k[ge]=ke,k.t=this.t+ge+1,k.s=this.s,k.clamp()}function j(C,k){k.s=this.s;var B=Math.floor(C/this.DB);if(B>=this.t){k.t=0;return}var Q=C%this.DB,de=this.DB-Q,ge=(1<<Q)-1;k[0]=this[B]>>Q;for(var ke=B+1;ke<this.t;++ke)k[ke-B-1]|=(this[ke]&ge)<<de,k[ke-B]=this[ke]>>Q;Q>0&&(k[this.t-B-1]|=(this.s&ge)<<de),k.t=this.t-B,k.clamp()}function D(C,k){for(var B=0,Q=0,de=Math.min(C.t,this.t);B<de;)Q+=this[B]-C[B],k[B++]=Q&this.DM,Q>>=this.DB;if(C.t<this.t){for(Q-=C.s;B<this.t;)Q+=this[B],k[B++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;B<C.t;)Q-=C[B],k[B++]=Q&this.DM,Q>>=this.DB;Q-=C.s}k.s=Q<0?-1:0,Q<-1?k[B++]=this.DV+Q:Q>0&&(k[B++]=Q),k.t=B,k.clamp()}function q(C,k){var B=this.abs(),Q=C.abs(),de=B.t;for(k.t=de+Q.t;--de>=0;)k[de]=0;for(de=0;de<Q.t;++de)k[de+B.t]=B.am(0,Q[de],k,de,0,B.t);k.s=0,k.clamp(),this.s!=C.s&&n.ZERO.subTo(k,k)}function V(C){for(var k=this.abs(),B=C.t=2*k.t;--B>=0;)C[B]=0;for(B=0;B<k.t-1;++B){var Q=k.am(B,k[B],C,2*B,0,1);(C[B+k.t]+=k.am(B+1,2*k[B],C,2*B+1,Q,k.t-B-1))>=k.DV&&(C[B+k.t]-=k.DV,C[B+k.t+1]=1)}C.t>0&&(C[C.t-1]+=k.am(B,k[B],C,2*B,0,1)),C.s=0,C.clamp()}function te(C,k,B){var Q=C.abs();if(!(Q.t<=0)){var de=this.abs();if(de.t<Q.t){k!=null&&k.fromInt(0),B!=null&&this.copyTo(B);return}B==null&&(B=i());var ge=i(),ke=this.s,Fe=C.s,Rr=this.DB-T(Q[Q.t-1]);Rr>0?(Q.lShiftTo(Rr,ge),de.lShiftTo(Rr,B)):(Q.copyTo(ge),de.copyTo(B));var Fn=ge.t,ps=ge[Fn-1];if(ps!=0){var To=ps*(1<<this.F1)+(Fn>1?ge[Fn-2]>>this.F2:0),uc=this.FV/To,m9=(1<<this.F1)/To,fa=1<<this.F2,ha=B.t,g9=ha-Fn,K0=k??i();for(ge.dlShiftTo(g9,K0),B.compareTo(K0)>=0&&(B[B.t++]=1,B.subTo(K0,B)),n.ONE.dlShiftTo(Fn,K0),K0.subTo(ge,ge);ge.t<Fn;)ge[ge.t++]=0;for(;--g9>=0;){var hS=B[--ha]==ps?this.DM:Math.floor(B[ha]*uc+(B[ha-1]+fa)*m9);if((B[ha]+=ge.am(0,hS,B,g9,0,Fn))<hS)for(ge.dlShiftTo(g9,K0),B.subTo(K0,B);B[ha]<--hS;)B.subTo(K0,B)}k!=null&&(B.drShiftTo(Fn,k),ke!=Fe&&n.ZERO.subTo(k,k)),B.t=Fn,B.clamp(),Rr>0&&B.rShiftTo(Rr,B),ke<0&&n.ZERO.subTo(B,B)}}}function pe(C){var k=i();return this.abs().divRemTo(C,null,k),this.s<0&&k.compareTo(n.ZERO)>0&&C.subTo(k,k),k}function ue(C){this.m=C}function Ue(C){return C.s<0||C.compareTo(this.m)>=0?C.mod(this.m):C}function le(C){return C}function _e(C){C.divRemTo(this.m,null,C)}function we(C,k,B){C.multiplyTo(k,B),this.reduce(B)}function xe(C,k){C.squareTo(k),this.reduce(k)}ue.prototype.convert=Ue,ue.prototype.revert=le,ue.prototype.reduce=_e,ue.prototype.mulTo=we,ue.prototype.sqrTo=xe;function N(){if(this.t<1)return 0;var C=this[0];if(!(C&1))return 0;var k=C&3;return k=k*(2-(C&15)*k)&15,k=k*(2-(C&255)*k)&255,k=k*(2-((C&65535)*k&65535))&65535,k=k*(2-C*k%this.DV)%this.DV,k>0?this.DV-k:-k}function A(C){this.m=C,this.mp=C.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<C.DB-15)-1,this.mt2=2*C.t}function ne(C){var k=i();return C.abs().dlShiftTo(this.m.t,k),k.divRemTo(this.m,null,k),C.s<0&&k.compareTo(n.ZERO)>0&&this.m.subTo(k,k),k}function G(C){var k=i();return C.copyTo(k),this.reduce(k),k}function Te(C){for(;C.t<=this.mt2;)C[C.t++]=0;for(var k=0;k<this.m.t;++k){var B=C[k]&32767,Q=B*this.mpl+((B*this.mph+(C[k]>>15)*this.mpl&this.um)<<15)&C.DM;for(B=k+this.m.t,C[B]+=this.m.am(0,Q,C,k,0,this.m.t);C[B]>=C.DV;)C[B]-=C.DV,C[++B]++}C.clamp(),C.drShiftTo(this.m.t,C),C.compareTo(this.m)>=0&&C.subTo(this.m,C)}function ze(C,k){C.squareTo(k),this.reduce(k)}function rt(C,k,B){C.multiplyTo(k,B),this.reduce(B)}A.prototype.convert=ne,A.prototype.revert=G,A.prototype.reduce=Te,A.prototype.mulTo=rt,A.prototype.sqrTo=ze;function bt(){return(this.t>0?this[0]&1:this.s)==0}function xt(C,k){if(C>4294967295||C<1)return n.ONE;var B=i(),Q=i(),de=k.convert(this),ge=T(C)-1;for(de.copyTo(B);--ge>=0;)if(k.sqrTo(B,Q),(C&1<<ge)>0)k.mulTo(Q,de,B);else{var ke=B;B=Q,Q=ke}return k.revert(B)}function lr(C,k){var B;return C<256||k.isEven()?B=new ue(k):B=new A(k),this.exp(C,B)}n.prototype.copyTo=_,n.prototype.fromInt=E,n.prototype.fromString=p,n.prototype.clamp=g,n.prototype.dlShiftTo=R,n.prototype.drShiftTo=M,n.prototype.lShiftTo=U,n.prototype.rShiftTo=j,n.prototype.subTo=D,n.prototype.multiplyTo=q,n.prototype.squareTo=V,n.prototype.divRemTo=te,n.prototype.invDigit=N,n.prototype.isEven=bt,n.prototype.exp=xt,n.prototype.toString=y,n.prototype.negate=b,n.prototype.abs=x,n.prototype.compareTo=v,n.prototype.bitLength=I,n.prototype.mod=pe,n.prototype.modPowInt=lr,n.ZERO=S(0),n.ONE=S(1);function Cr(){var C=i();return this.copyTo(C),C}function oi(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function rh(){return this.t==0?this.s:this[0]<<24>>24}function bi(){return this.t==0?this.s:this[0]<<16>>16}function $0(C){return Math.floor(Math.LN2*this.DB/Math.log(C))}function ju(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function f9(C){if(C==null&&(C=10),this.signum()==0||C<2||C>36)return"0";var k=this.chunkSize(C),B=Math.pow(C,k),Q=S(B),de=i(),ge=i(),ke="";for(this.divRemTo(Q,de,ge);de.signum()>0;)ke=(B+ge.intValue()).toString(C).substr(1)+ke,de.divRemTo(Q,de,ge);return ge.intValue().toString(C)+ke}function h9(C,k){this.fromInt(0),k==null&&(k=10);for(var B=this.chunkSize(k),Q=Math.pow(k,B),de=!1,ge=0,ke=0,Fe=0;Fe<C.length;++Fe){var Rr=w(C,Fe);if(Rr<0){C.charAt(Fe)=="-"&&this.signum()==0&&(de=!0);continue}ke=k*ke+Rr,++ge>=B&&(this.dMultiply(Q),this.dAddOffset(ke,0),ge=0,ke=0)}ge>0&&(this.dMultiply(Math.pow(k,ge)),this.dAddOffset(ke,0)),de&&n.ZERO.subTo(this,this)}function ppe(C,k,B){if(typeof k=="number")if(C<2)this.fromInt(1);else for(this.fromNumber(C,B),this.testBit(C-1)||this.bitwiseTo(n.ONE.shiftLeft(C-1),uS,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(k);)this.dAddOffset(2,0),this.bitLength()>C&&this.subTo(n.ONE.shiftLeft(C-1),this);else{var Q=new Array,de=C&7;Q.length=(C>>3)+1,k.nextBytes(Q),de>0?Q[0]&=(1<<de)-1:Q[0]=0,this.fromString(Q,256)}}function mpe(){var C=this.t,k=new Array;k[0]=this.s;var B=this.DB-C*this.DB%8,Q,de=0;if(C-- >0)for(B<this.DB&&(Q=this[C]>>B)!=(this.s&this.DM)>>B&&(k[de++]=Q|this.s<<this.DB-B);C>=0;)B<8?(Q=(this[C]&(1<<B)-1)<<8-B,Q|=this[--C]>>(B+=this.DB-8)):(Q=this[C]>>(B-=8)&255,B<=0&&(B+=this.DB,--C)),Q&128&&(Q|=-256),de==0&&(this.s&128)!=(Q&128)&&++de,(de>0||Q!=this.s)&&(k[de++]=Q);return k}function gpe(C){return this.compareTo(C)==0}function ype(C){return this.compareTo(C)<0?this:C}function wpe(C){return this.compareTo(C)>0?this:C}function bpe(C,k,B){var Q,de,ge=Math.min(C.t,this.t);for(Q=0;Q<ge;++Q)B[Q]=k(this[Q],C[Q]);if(C.t<this.t){for(de=C.s&this.DM,Q=ge;Q<this.t;++Q)B[Q]=k(this[Q],de);B.t=this.t}else{for(de=this.s&this.DM,Q=ge;Q<C.t;++Q)B[Q]=k(de,C[Q]);B.t=C.t}B.s=k(this.s,C.s),B.clamp()}function _pe(C,k){return C&k}function vpe(C){var k=i();return this.bitwiseTo(C,_pe,k),k}function uS(C,k){return C|k}function Epe(C){var k=i();return this.bitwiseTo(C,uS,k),k}function dU(C,k){return C^k}function xpe(C){var k=i();return this.bitwiseTo(C,dU,k),k}function fU(C,k){return C&~k}function Spe(C){var k=i();return this.bitwiseTo(C,fU,k),k}function Tpe(){for(var C=i(),k=0;k<this.t;++k)C[k]=this.DM&~this[k];return C.t=this.t,C.s=~this.s,C}function Ipe(C){var k=i();return C<0?this.rShiftTo(-C,k):this.lShiftTo(C,k),k}function Ape(C){var k=i();return C<0?this.lShiftTo(-C,k):this.rShiftTo(C,k),k}function Cpe(C){if(C==0)return-1;var k=0;return C&65535||(C>>=16,k+=16),C&255||(C>>=8,k+=8),C&15||(C>>=4,k+=4),C&3||(C>>=2,k+=2),C&1||++k,k}function Rpe(){for(var C=0;C<this.t;++C)if(this[C]!=0)return C*this.DB+Cpe(this[C]);return this.s<0?this.t*this.DB:-1}function kpe(C){for(var k=0;C!=0;)C&=C-1,++k;return k}function Ppe(){for(var C=0,k=this.s&this.DM,B=0;B<this.t;++B)C+=kpe(this[B]^k);return C}function Dpe(C){var k=Math.floor(C/this.DB);return k>=this.t?this.s!=0:(this[k]&1<<C%this.DB)!=0}function Npe(C,k){var B=n.ONE.shiftLeft(C);return this.bitwiseTo(B,k,B),B}function Ope(C){return this.changeBit(C,uS)}function Lpe(C){return this.changeBit(C,fU)}function Bpe(C){return this.changeBit(C,dU)}function Mpe(C,k){for(var B=0,Q=0,de=Math.min(C.t,this.t);B<de;)Q+=this[B]+C[B],k[B++]=Q&this.DM,Q>>=this.DB;if(C.t<this.t){for(Q+=C.s;B<this.t;)Q+=this[B],k[B++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;B<C.t;)Q+=C[B],k[B++]=Q&this.DM,Q>>=this.DB;Q+=C.s}k.s=Q<0?-1:0,Q>0?k[B++]=Q:Q<-1&&(k[B++]=this.DV+Q),k.t=B,k.clamp()}function Upe(C){var k=i();return this.addTo(C,k),k}function Fpe(C){var k=i();return this.subTo(C,k),k}function Vpe(C){var k=i();return this.multiplyTo(C,k),k}function zpe(){var C=i();return this.squareTo(C),C}function qpe(C){var k=i();return this.divRemTo(C,k,null),k}function $pe(C){var k=i();return this.divRemTo(C,null,k),k}function Kpe(C){var k=i(),B=i();return this.divRemTo(C,k,B),new Array(k,B)}function jpe(C){this[this.t]=this.am(0,C-1,this,0,0,this.t),++this.t,this.clamp()}function Gpe(C,k){if(C!=0){for(;this.t<=k;)this[this.t++]=0;for(this[k]+=C;this[k]>=this.DV;)this[k]-=this.DV,++k>=this.t&&(this[this.t++]=0),++this[k]}}function nh(){}function hU(C){return C}function Hpe(C,k,B){C.multiplyTo(k,B)}function Wpe(C,k){C.squareTo(k)}nh.prototype.convert=hU,nh.prototype.revert=hU,nh.prototype.mulTo=Hpe,nh.prototype.sqrTo=Wpe;function Ype(C){return this.exp(C,new nh)}function Xpe(C,k,B){var Q=Math.min(this.t+C.t,k);for(B.s=0,B.t=Q;Q>0;)B[--Q]=0;var de;for(de=B.t-this.t;Q<de;++Q)B[Q+this.t]=this.am(0,C[Q],B,Q,0,this.t);for(de=Math.min(C.t,k);Q<de;++Q)this.am(0,C[Q],B,Q,0,k-Q);B.clamp()}function Qpe(C,k,B){--k;var Q=B.t=this.t+C.t-k;for(B.s=0;--Q>=0;)B[Q]=0;for(Q=Math.max(k-this.t,0);Q<C.t;++Q)B[this.t+Q-k]=this.am(k-Q,C[Q],B,0,0,this.t+Q-k);B.clamp(),B.drShiftTo(1,B)}function Gu(C){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*C.t,this.r2),this.mu=this.r2.divide(C),this.m=C}function Zpe(C){if(C.s<0||C.t>2*this.m.t)return C.mod(this.m);if(C.compareTo(this.m)<0)return C;var k=i();return C.copyTo(k),this.reduce(k),k}function Jpe(C){return C}function e9e(C){for(C.drShiftTo(this.m.t-1,this.r2),C.t>this.m.t+1&&(C.t=this.m.t+1,C.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);C.compareTo(this.r2)<0;)C.dAddOffset(1,this.m.t+1);for(C.subTo(this.r2,C);C.compareTo(this.m)>=0;)C.subTo(this.m,C)}function t9e(C,k){C.squareTo(k),this.reduce(k)}function r9e(C,k,B){C.multiplyTo(k,B),this.reduce(B)}Gu.prototype.convert=Zpe,Gu.prototype.revert=Jpe,Gu.prototype.reduce=e9e,Gu.prototype.mulTo=r9e,Gu.prototype.sqrTo=t9e;function n9e(C,k){var B=C.bitLength(),Q,de=S(1),ge;if(B<=0)return de;B<18?Q=1:B<48?Q=3:B<144?Q=4:B<768?Q=5:Q=6,B<8?ge=new ue(k):k.isEven()?ge=new Gu(k):ge=new A(k);var ke=new Array,Fe=3,Rr=Q-1,Fn=(1<<Q)-1;if(ke[1]=ge.convert(this),Q>1){var ps=i();for(ge.sqrTo(ke[1],ps);Fe<=Fn;)ke[Fe]=i(),ge.mulTo(ps,ke[Fe-2],ke[Fe]),Fe+=2}var To=C.t-1,uc,m9=!0,fa=i(),ha;for(B=T(C[To])-1;To>=0;){for(B>=Rr?uc=C[To]>>B-Rr&Fn:(uc=(C[To]&(1<<B+1)-1)<<Rr-B,To>0&&(uc|=C[To-1]>>this.DB+B-Rr)),Fe=Q;!(uc&1);)uc>>=1,--Fe;if((B-=Fe)<0&&(B+=this.DB,--To),m9)ke[uc].copyTo(de),m9=!1;else{for(;Fe>1;)ge.sqrTo(de,fa),ge.sqrTo(fa,de),Fe-=2;Fe>0?ge.sqrTo(de,fa):(ha=de,de=fa,fa=ha),ge.mulTo(fa,ke[uc],de)}for(;To>=0&&!(C[To]&1<<B);)ge.sqrTo(de,fa),ha=de,de=fa,fa=ha,--B<0&&(B=this.DB-1,--To)}return ge.revert(de)}function i9e(C){var k=this.s<0?this.negate():this.clone(),B=C.s<0?C.negate():C.clone();if(k.compareTo(B)<0){var Q=k;k=B,B=Q}var de=k.getLowestSetBit(),ge=B.getLowestSetBit();if(ge<0)return k;for(de<ge&&(ge=de),ge>0&&(k.rShiftTo(ge,k),B.rShiftTo(ge,B));k.signum()>0;)(de=k.getLowestSetBit())>0&&k.rShiftTo(de,k),(de=B.getLowestSetBit())>0&&B.rShiftTo(de,B),k.compareTo(B)>=0?(k.subTo(B,k),k.rShiftTo(1,k)):(B.subTo(k,B),B.rShiftTo(1,B));return ge>0&&B.lShiftTo(ge,B),B}function o9e(C){if(C<=0)return 0;var k=this.DV%C,B=this.s<0?C-1:0;if(this.t>0)if(k==0)B=this[0]%C;else for(var Q=this.t-1;Q>=0;--Q)B=(k*B+this[Q])%C;return B}function s9e(C){var k=C.isEven();if(this.isEven()&&k||C.signum()==0)return n.ZERO;for(var B=C.clone(),Q=this.clone(),de=S(1),ge=S(0),ke=S(0),Fe=S(1);B.signum()!=0;){for(;B.isEven();)B.rShiftTo(1,B),k?((!de.isEven()||!ge.isEven())&&(de.addTo(this,de),ge.subTo(C,ge)),de.rShiftTo(1,de)):ge.isEven()||ge.subTo(C,ge),ge.rShiftTo(1,ge);for(;Q.isEven();)Q.rShiftTo(1,Q),k?((!ke.isEven()||!Fe.isEven())&&(ke.addTo(this,ke),Fe.subTo(C,Fe)),ke.rShiftTo(1,ke)):Fe.isEven()||Fe.subTo(C,Fe),Fe.rShiftTo(1,Fe);B.compareTo(Q)>=0?(B.subTo(Q,B),k&&de.subTo(ke,de),ge.subTo(Fe,ge)):(Q.subTo(B,Q),k&&ke.subTo(de,ke),Fe.subTo(ge,Fe))}if(Q.compareTo(n.ONE)!=0)return n.ZERO;if(Fe.compareTo(C)>=0)return Fe.subtract(C);if(Fe.signum()<0)Fe.addTo(C,Fe);else return Fe;return Fe.signum()<0?Fe.add(C):Fe}var Oi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],a9e=(1<<26)/Oi[Oi.length-1];function c9e(C){var k,B=this.abs();if(B.t==1&&B[0]<=Oi[Oi.length-1]){for(k=0;k<Oi.length;++k)if(B[0]==Oi[k])return!0;return!1}if(B.isEven())return!1;for(k=1;k<Oi.length;){for(var Q=Oi[k],de=k+1;de<Oi.length&&Q<a9e;)Q*=Oi[de++];for(Q=B.modInt(Q);k<de;)if(Q%Oi[k++]==0)return!1}return B.millerRabin(C)}function u9e(C){var k=this.subtract(n.ONE),B=k.getLowestSetBit();if(B<=0)return!1;var Q=k.shiftRight(B);C=C+1>>1,C>Oi.length&&(C=Oi.length);for(var de=i(),ge=0;ge<C;++ge){de.fromInt(Oi[Math.floor(Math.random()*Oi.length)]);var ke=de.modPow(Q,this);if(ke.compareTo(n.ONE)!=0&&ke.compareTo(k)!=0){for(var Fe=1;Fe++<B&&ke.compareTo(k)!=0;)if(ke=ke.modPowInt(2,this),ke.compareTo(n.ONE)==0)return!1;if(ke.compareTo(k)!=0)return!1}}return!0}n.prototype.chunkSize=$0,n.prototype.toRadix=f9,n.prototype.fromRadix=h9,n.prototype.fromNumber=ppe,n.prototype.bitwiseTo=bpe,n.prototype.changeBit=Npe,n.prototype.addTo=Mpe,n.prototype.dMultiply=jpe,n.prototype.dAddOffset=Gpe,n.prototype.multiplyLowerTo=Xpe,n.prototype.multiplyUpperTo=Qpe,n.prototype.modInt=o9e,n.prototype.millerRabin=u9e,n.prototype.clone=Cr,n.prototype.intValue=oi,n.prototype.byteValue=rh,n.prototype.shortValue=bi,n.prototype.signum=ju,n.prototype.toByteArray=mpe,n.prototype.equals=gpe,n.prototype.min=ype,n.prototype.max=wpe,n.prototype.and=vpe,n.prototype.or=Epe,n.prototype.xor=xpe,n.prototype.andNot=Spe,n.prototype.not=Tpe,n.prototype.shiftLeft=Ipe,n.prototype.shiftRight=Ape,n.prototype.getLowestSetBit=Rpe,n.prototype.bitCount=Ppe,n.prototype.testBit=Dpe,n.prototype.setBit=Ope,n.prototype.clearBit=Lpe,n.prototype.flipBit=Bpe,n.prototype.add=Upe,n.prototype.subtract=Fpe,n.prototype.multiply=Vpe,n.prototype.divide=qpe,n.prototype.remainder=$pe,n.prototype.divideAndRemainder=Kpe,n.prototype.modPow=n9e,n.prototype.modInverse=s9e,n.prototype.pow=Ype,n.prototype.gcd=i9e,n.prototype.isProbablePrime=c9e,n.prototype.square=zpe,n.prototype.Barrett=Gu;var p9,So,Un;function l9e(C){So[Un++]^=C&255,So[Un++]^=C>>8&255,So[Un++]^=C>>16&255,So[Un++]^=C>>24&255,Un>=fS&&(Un-=fS)}function pU(){l9e(new Date().getTime())}if(So==null){So=new Array,Un=0;var da;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var mU=new Uint8Array(32);for(window.crypto.getRandomValues(mU),da=0;da<32;++da)So[Un++]=mU[da]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var gU=window.crypto.random(32);for(da=0;da<gU.length;++da)So[Un++]=gU.charCodeAt(da)&255}}for(;Un<fS;)da=Math.floor(65536*Math.random()),So[Un++]=da>>>8,So[Un++]=da&255;Un=0,pU()}function d9e(){if(p9==null){for(pU(),p9=m9e(),p9.init(So),Un=0;Un<So.length;++Un)So[Un]=0;Un=0}return p9.next()}function f9e(C){var k;for(k=0;k<C.length;++k)C[k]=d9e()}function lS(){}lS.prototype.nextBytes=f9e;function dS(){this.i=0,this.j=0,this.S=new Array}function h9e(C){var k,B,Q;for(k=0;k<256;++k)this.S[k]=k;for(B=0,k=0;k<256;++k)B=B+this.S[k]+C[k%C.length]&255,Q=this.S[k],this.S[k]=this.S[B],this.S[B]=Q;this.i=0,this.j=0}function p9e(){var C;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,C=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=C,this.S[C+this.S[this.i]&255]}dS.prototype.init=h9e,dS.prototype.next=p9e;function m9e(){return new dS}var fS=256;typeof b_<"u"?b_=v0e.exports={default:n,BigInteger:n,SecureRandom:lS}:this.jsbn={BigInteger:n,SecureRandom:lS}}).call(b_)});var G7=O(__=>{(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(s){return n(o(s),arguments)}function t(s,a){return e.apply(null,[s].concat(a||[]))}function n(s,a){var c=1,u=s.length,l,d="",h,f,m,w,_,E,S,p;for(h=0;h<u;h++)if(typeof s[h]=="string")d+=s[h];else if(typeof s[h]=="object"){if(m=s[h],m.keys)for(l=a[c],f=0;f<m.keys.length;f++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[f],m.keys[f-1]));l=l[m.keys[f]]}else m.param_no?l=a[m.param_no]:l=a[c++];if(r.not_type.test(m.type)&&r.not_primitive.test(m.type)&&l instanceof Function&&(l=l()),r.numeric_arg.test(m.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(r.number.test(m.type)&&(S=l>=0),m.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,m.width?parseInt(m.width):0);break;case"e":l=m.precision?parseFloat(l).toExponential(m.precision):parseFloat(l).toExponential();break;case"f":l=m.precision?parseFloat(l).toFixed(m.precision):parseFloat(l);break;case"g":l=m.precision?String(Number(l.toPrecision(m.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=m.precision?l.substring(0,m.precision):l;break;case"t":l=String(!!l),l=m.precision?l.substring(0,m.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=m.precision?l.substring(0,m.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=m.precision?l.substring(0,m.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}r.json.test(m.type)?d+=l:(r.number.test(m.type)&&(!S||m.sign)?(p=S?"+":"-",l=l.toString().replace(r.sign,"")):p="",_=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",E=m.width-(p+l).length,w=m.width&&E>0?_.repeat(E):"",d+=m.align?p+l+w:_==="0"?p+w+l:w+p+l)}return d}var i=Object.create(null);function o(s){if(i[s])return i[s];for(var a=s,c,u=[],l=0;a;){if((c=r.text.exec(a))!==null)u.push(c[0]);else if((c=r.modulo.exec(a))!==null)u.push("%");else if((c=r.placeholder.exec(a))!==null){if(c[2]){l|=1;var d=[],h=c[2],f=[];if((f=r.key.exec(h))!==null)for(d.push(f[1]);(h=h.substring(f[0].length))!=="";)if((f=r.key_access.exec(h))!==null)d.push(f[1]);else if((f=r.index_access.exec(h))!==null)d.push(f[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=d}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(c[0].length)}return i[s]=u}typeof __<"u"&&(__.sprintf=e,__.vsprintf=t),typeof window<"u"&&(window.sprintf=e,window.vsprintf=t,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:t}}))})()});var B0e=O(JN=>{"use strict";JN.toString=function(r){switch(r){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+r};JN.toType=function(r){switch(r.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return r.toUpperCase().startsWith("UNKNOWN_")?parseInt(r.slice(8)):0}});var M0e=O(eO=>{"use strict";eO.toString=function(r){switch(r){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+r};eO.toRcode=function(r){switch(r.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}});var U0e=O(tO=>{"use strict";tO.toString=function(r){switch(r){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+r};tO.toOpcode=function(r){switch(r.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}});var F0e=O(rO=>{"use strict";rO.toString=function(r){switch(r){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+r};rO.toClass=function(r){switch(r.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}});var V0e=O(nO=>{"use strict";nO.toString=function(r){switch(r){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return r<0?null:`OPTION_${r}`};nO.toCode=function(r){if(typeof r=="number")return r;if(!r)return-1;switch(r.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=r.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}});var $0e=O((q0e,iO)=>{var z0e=function(r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=d,r.encode=l,r.familyOf=u,r.name=void 0,r.sizeOf=c,r.v6=r.v4=void 0;let e=/^(\d{1,3}\.){3,3}\d{1,3}$/,t=4,n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,i=16,o={name:"v4",size:t,isFormat:h=>e.test(h),encode(h,f,m){m=~~m,f=f||new Uint8Array(m+t);let w=h.length,_=0;for(let E=0;E<w;){let S=h.charCodeAt(E++);S===46?(f[m++]=_,_=0):_=_*10+(S-48)}return f[m]=_,f},decode(h,f){return f=~~f,`${h[f++]}.${h[f++]}.${h[f++]}.${h[f]}`}};r.v4=o;let s={name:"v6",size:i,isFormat:h=>h.length>0&&n.test(h),encode(h,f,m){m=~~m;let w=m+i,_=-1,E=0,S=0,p=!0,g=!1;f=f||new Uint8Array(m+i);for(let y=0;y<h.length;y++){let b=h.charCodeAt(y);b===58?(p?_!==-1?(m<w&&(f[m]=0),m<w-1&&(f[m+1]=0),m+=2):m<w&&(_=m):(g===!0?(m<w&&(f[m]=S),m++):(m<w&&(f[m]=E>>8),m<w-1&&(f[m+1]=E&255),m+=2),E=0,S=0),p=!0,g=!1):b===46?(m<w&&(f[m]=S),m++,S=0,E=0,p=!1,g=!0):(p=!1,b>=97?b-=87:b>=65?b-=55:(b-=48,S=S*10+b),E=(E<<4)+b)}if(p===!1)g===!0?(m<w&&(f[m]=S),m++):(m<w&&(f[m]=E>>8),m<w-1&&(f[m+1]=E&255),m+=2);else if(_===0)m<w&&(f[m]=0),m<w-1&&(f[m+1]=0),m+=2;else if(_!==-1){m+=2;for(let y=Math.min(m-1,w-1);y>=_+2;y--)f[y]=f[y-2];f[_]=0,f[_+1]=0,_=m}if(_!==m&&_!==-1)for(m>w-2&&(m=w-2);w>_;)f[--w]=m<w&&m>_?f[--m]:0;else for(;m<w;)f[m++]=0;return f},decode(h,f){f=~~f;let m="";for(let w=0;w<i;w+=2)w!==0&&(m+=":"),m+=(h[f+w]<<8|h[f+w+1]).toString(16);return m.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};r.v6=s;let a="ip";r.name=a;function c(h){if(o.isFormat(h))return o.size;if(s.isFormat(h))return s.size;throw Error(`Invalid ip address: ${h}`)}function u(h){return c(h)===o.size?1:2}function l(h,f,m){m=~~m;let w=c(h);return typeof f=="function"&&(f=f(m+w)),w===o.size?o.encode(h,f,m):s.encode(h,f,m)}function d(h,f,m){if(f=~~f,m=m||h.length-f,m===o.size)return o.decode(h,f,m);if(m===s.size)return s.decode(h,f,m);throw Error(`Invalid buffer size needs to be ${o.size} for v4 or ${s.size} for v6.`)}return"default"in r?r.default:r}({});typeof define=="function"&&define.amd?define([],function(){return z0e}):typeof iO=="object"&&typeof q0e=="object"&&(iO.exports=z0e)});var G0e=O(Xe=>{"use strict";var Qe=require("buffer").Buffer,m0=B0e(),UFe=M0e(),FFe=U0e(),C_=F0e(),oO=V0e(),z3=$0e(),VFe=0,K0e=32768,sO=32768,zFe=~sO,j0e=32768,qFe=~j0e,De=Xe.name={};De.encode=function(r,e,t,{mail:n=!1}={}){e||(e=Qe.alloc(De.encodingLength(r))),t||(t=0);let i=t,o=r.replace(/^\.|\.$/gm,"");if(o.length){let s=[];if(n){let a="";o.split(".").forEach(c=>{c.endsWith("\\")?a+=(a.length?".":"")+c.slice(0,-1):s.length===0&&a.length?s.push(a+"."+c):s.push(c)})}else s=o.split(".");for(let a=0;a<s.length;a++){let c=e.write(s[a],t+1);e[t]=c,t+=c+1}}return e[t++]=0,De.encode.bytes=t-i,e};De.encode.bytes=0;De.decode=function(r,e,{mail:t=!1}={}){e||(e=0);let n=[],i=e,o=0,s=0,a=!1;for(;;){if(e>=r.length)throw new Error("Cannot decode name (buffer overflow)");let c=r[e++];if(s+=a?0:1,c===0)break;if(c&192)if((c&192)===192){if(e+1>r.length)throw new Error("Cannot decode name (buffer overflow)");let u=r.readUInt16BE(e-1)-49152;if(u>=i)throw new Error("Cannot decode name (bad pointer)");e=u,i=u,s+=a?0:1,a=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+c>r.length)throw new Error("Cannot decode name (buffer overflow)");if(o+=c+1,o>254)throw new Error("Cannot decode name (name too long)");let u=r.toString("utf-8",e,e+c);t&&(u=u.replace(/\./g,"\\.")),n.push(u),e+=c,s+=a?0:c}}return De.decode.bytes=s,n.length===0?".":n.join(".")};De.decode.bytes=0;De.encodingLength=function(r){return r==="."||r===".."?1:Qe.byteLength(r.replace(/^\.|\.$/gm,""))+2};var Et={};Et.encode=function(r,e,t){e||(e=Qe.alloc(Et.encodingLength(r))),t||(t=0);let n=e.write(r,t+1);return e[t]=n,Et.encode.bytes=n+1,e};Et.encode.bytes=0;Et.decode=function(r,e){e||(e=0);let t=r[e],n=r.toString("utf-8",e+1,e+1+t);return Et.decode.bytes=t+1,n};Et.decode.bytes=0;Et.encodingLength=function(r){return Qe.byteLength(r)+1};var Ya={};Ya.encode=function(r,e,t){e||(e=Ya.encodingLength(r)),t||(t=0);let n=(r.flags||0)&32767,i=r.type==="response"?K0e:VFe;return e.writeUInt16BE(r.id||0,t),e.writeUInt16BE(n|i,t+2),e.writeUInt16BE(r.questions.length,t+4),e.writeUInt16BE(r.answers.length,t+6),e.writeUInt16BE(r.authorities.length,t+8),e.writeUInt16BE(r.additionals.length,t+10),e};Ya.encode.bytes=12;Ya.decode=function(r,e){if(e||(e=0),r.length<12)throw new Error("Header must be 12 bytes");let t=r.readUInt16BE(e+2);return{id:r.readUInt16BE(e),type:t&K0e?"response":"query",flags:t&32767,flag_qr:(t>>15&1)===1,opcode:FFe.toString(t>>11&15),flag_aa:(t>>10&1)===1,flag_tc:(t>>9&1)===1,flag_rd:(t>>8&1)===1,flag_ra:(t>>7&1)===1,flag_z:(t>>6&1)===1,flag_ad:(t>>5&1)===1,flag_cd:(t>>4&1)===1,rcode:UFe.toString(t&15),questions:new Array(r.readUInt16BE(e+4)),answers:new Array(r.readUInt16BE(e+6)),authorities:new Array(r.readUInt16BE(e+8)),additionals:new Array(r.readUInt16BE(e+10))}};Ya.decode.bytes=12;Ya.encodingLength=function(){return 12};var s0=Xe.unknown={};s0.encode=function(r,e,t){return e||(e=Qe.alloc(s0.encodingLength(r))),t||(t=0),e.writeUInt16BE(r.length,t),r.copy(e,t+2),s0.encode.bytes=r.length+2,e};s0.encode.bytes=0;s0.decode=function(r,e){e||(e=0);let t=r.readUInt16BE(e),n=r.slice(e+2,e+2+t);return s0.decode.bytes=t+2,n};s0.decode.bytes=0;s0.encodingLength=function(r){return r.length+2};var a0=Xe.ns={};a0.encode=function(r,e,t){return e||(e=Qe.alloc(a0.encodingLength(r))),t||(t=0),De.encode(r,e,t+2),e.writeUInt16BE(De.encode.bytes,t),a0.encode.bytes=De.encode.bytes+2,e};a0.encode.bytes=0;a0.decode=function(r,e){e||(e=0);let t=r.readUInt16BE(e),n=De.decode(r,e+2);return a0.decode.bytes=t+2,n};a0.decode.bytes=0;a0.encodingLength=function(r){return De.encodingLength(r)+2};var c0=Xe.soa={};c0.encode=function(r,e,t){e||(e=Qe.alloc(c0.encodingLength(r))),t||(t=0);let n=t;return t+=2,De.encode(r.mname,e,t),t+=De.encode.bytes,De.encode(r.rname,e,t,{mail:!0}),t+=De.encode.bytes,e.writeUInt32BE(r.serial||0,t),t+=4,e.writeUInt32BE(r.refresh||0,t),t+=4,e.writeUInt32BE(r.retry||0,t),t+=4,e.writeUInt32BE(r.expire||0,t),t+=4,e.writeUInt32BE(r.minimum||0,t),t+=4,e.writeUInt16BE(t-n-2,n),c0.encode.bytes=t-n,e};c0.encode.bytes=0;c0.decode=function(r,e){e||(e=0);let t=e,n={};return e+=2,n.mname=De.decode(r,e),e+=De.decode.bytes,n.rname=De.decode(r,e,{mail:!0}),e+=De.decode.bytes,n.serial=r.readUInt32BE(e),e+=4,n.refresh=r.readUInt32BE(e),e+=4,n.retry=r.readUInt32BE(e),e+=4,n.expire=r.readUInt32BE(e),e+=4,n.minimum=r.readUInt32BE(e),e+=4,c0.decode.bytes=e-t,n};c0.decode.bytes=0;c0.encodingLength=function(r){return 22+De.encodingLength(r.mname)+De.encodingLength(r.rname)};var u0=Xe.txt={};u0.encode=function(r,e,t){Array.isArray(r)||(r=[r]);for(let i=0;i<r.length;i++)if(typeof r[i]=="string"&&(r[i]=Qe.from(r[i])),!Qe.isBuffer(r[i]))throw new Error("Must be a Buffer");e||(e=Qe.alloc(u0.encodingLength(r))),t||(t=0);let n=t;return t+=2,r.forEach(function(i){e[t++]=i.length,i.copy(e,t,0,i.length),t+=i.length}),e.writeUInt16BE(t-n-2,n),u0.encode.bytes=t-n,e};u0.encode.bytes=0;u0.decode=function(r,e){e||(e=0);let t=e,n=r.readUInt16BE(e);e+=2;let i=[];for(;n>0;){let o=r[e++];if(--n,n<o)throw new Error("Buffer overflow");i.push(r.slice(e,e+o)),e+=o,n-=o}return u0.decode.bytes=e-t,i};u0.decode.bytes=0;u0.encodingLength=function(r){Array.isArray(r)||(r=[r]);let e=2;return r.forEach(function(t){typeof t=="string"?e+=Qe.byteLength(t)+1:e+=t.length+1}),e};var l0=Xe.null={};l0.encode=function(r,e,t){e||(e=Qe.alloc(l0.encodingLength(r))),t||(t=0),typeof r=="string"&&(r=Qe.from(r)),r||(r=Qe.alloc(0));let n=t;t+=2;let i=r.length;return r.copy(e,t,0,i),t+=i,e.writeUInt16BE(t-n-2,n),l0.encode.bytes=t-n,e};l0.encode.bytes=0;l0.decode=function(r,e){e||(e=0);let t=e,n=r.readUInt16BE(e);e+=2;let i=r.slice(e,e+n);return e+=n,l0.decode.bytes=e-t,i};l0.decode.bytes=0;l0.encodingLength=function(r){return r?(Qe.isBuffer(r)?r.length:Qe.byteLength(r))+2:2};var d0=Xe.hinfo={};d0.encode=function(r,e,t){e||(e=Qe.alloc(d0.encodingLength(r))),t||(t=0);let n=t;return t+=2,Et.encode(r.cpu,e,t),t+=Et.encode.bytes,Et.encode(r.os,e,t),t+=Et.encode.bytes,e.writeUInt16BE(t-n-2,n),d0.encode.bytes=t-n,e};d0.encode.bytes=0;d0.decode=function(r,e){e||(e=0);let t=e,n={};return e+=2,n.cpu=Et.decode(r,e),e+=Et.decode.bytes,n.os=Et.decode(r,e),e+=Et.decode.bytes,d0.decode.bytes=e-t,n};d0.decode.bytes=0;d0.encodingLength=function(r){return Et.encodingLength(r.cpu)+Et.encodingLength(r.os)+2};var Ha=Xe.ptr={},$Fe=Xe.cname=Ha,KFe=Xe.dname=Ha;Ha.encode=function(r,e,t){return e||(e=Qe.alloc(Ha.encodingLength(r))),t||(t=0),De.encode(r,e,t+2),e.writeUInt16BE(De.encode.bytes,t),Ha.encode.bytes=De.encode.bytes+2,e};Ha.encode.bytes=0;Ha.decode=function(r,e){e||(e=0);let t=De.decode(r,e+2);return Ha.decode.bytes=De.decode.bytes+2,t};Ha.decode.bytes=0;Ha.encodingLength=function(r){return De.encodingLength(r)+2};var f0=Xe.srv={};f0.encode=function(r,e,t){e||(e=Qe.alloc(f0.encodingLength(r))),t||(t=0),e.writeUInt16BE(r.priority||0,t+2),e.writeUInt16BE(r.weight||0,t+4),e.writeUInt16BE(r.port||0,t+6),De.encode(r.target,e,t+8);let n=De.encode.bytes+6;return e.writeUInt16BE(n,t),f0.encode.bytes=n+2,e};f0.encode.bytes=0;f0.decode=function(r,e){e||(e=0);let t=r.readUInt16BE(e),n={};return n.priority=r.readUInt16BE(e+2),n.weight=r.readUInt16BE(e+4),n.port=r.readUInt16BE(e+6),n.target=De.decode(r,e+8),f0.decode.bytes=t+2,n};f0.decode.bytes=0;f0.encodingLength=function(r){return 8+De.encodingLength(r.target)};var ns=Xe.caa={};ns.ISSUER_CRITICAL=128;ns.encode=function(r,e,t){let n=ns.encodingLength(r);return e||(e=Qe.alloc(ns.encodingLength(r))),t||(t=0),r.issuerCritical&&(r.flags=ns.ISSUER_CRITICAL),e.writeUInt16BE(n-2,t),t+=2,e.writeUInt8(r.flags||0,t),t+=1,Et.encode(r.tag,e,t),t+=Et.encode.bytes,e.write(r.value,t),t+=Qe.byteLength(r.value),ns.encode.bytes=n,e};ns.encode.bytes=0;ns.decode=function(r,e){e||(e=0);let t=r.readUInt16BE(e);e+=2;let n=e,i={};return i.flags=r.readUInt8(e),e+=1,i.tag=Et.decode(r,e),e+=Et.decode.bytes,i.value=r.toString("utf-8",e,n+t),i.issuerCritical=!!(i.flags&ns.ISSUER_CRITICAL),ns.decode.bytes=t+2,i};ns.decode.bytes=0;ns.encodingLength=function(r){return Et.encodingLength(r.tag)+Et.encodingLength(r.value)+2};var Cu=Xe.mx={};Cu.encode=function(r,e,t){e||(e=Qe.alloc(Cu.encodingLength(r))),t||(t=0);let n=t;return t+=2,e.writeUInt16BE(r.preference||0,t),t+=2,De.encode(r.exchange,e,t),t+=De.encode.bytes,e.writeUInt16BE(t-n-2,n),Cu.encode.bytes=t-n,e};Cu.encode.bytes=0;Cu.decode=function(r,e){e||(e=0);let t=e,n={};return e+=2,n.preference=r.readUInt16BE(e),e+=2,n.exchange=De.decode(r,e),e+=De.decode.bytes,Cu.decode.bytes=e-t,n};Cu.encodingLength=function(r){return 4+De.encodingLength(r.exchange)};var h0=Xe.a={};h0.encode=function(r,e,t){return e||(e=Qe.alloc(h0.encodingLength(r))),t||(t=0),e.writeUInt16BE(4,t),t+=2,z3.v4.encode(r,e,t),h0.encode.bytes=6,e};h0.encode.bytes=0;h0.decode=function(r,e){e||(e=0),e+=2;let t=z3.v4.decode(r,e);return h0.decode.bytes=6,t};h0.decode.bytes=0;h0.encodingLength=function(){return 6};var p0=Xe.aaaa={};p0.encode=function(r,e,t){return e||(e=Qe.alloc(p0.encodingLength(r))),t||(t=0),e.writeUInt16BE(16,t),t+=2,z3.v6.encode(r,e,t),p0.encode.bytes=18,e};p0.encode.bytes=0;p0.decode=function(r,e){e||(e=0),e+=2;let t=z3.v6.decode(r,e);return p0.decode.bytes=18,t};p0.decode.bytes=0;p0.encodingLength=function(){return 18};var _o=Xe.option={};_o.encode=function(r,e,t){e||(e=Qe.alloc(_o.encodingLength(r))),t||(t=0);let n=t,i=oO.toCode(r.code);if(e.writeUInt16BE(i,t),t+=2,r.data)e.writeUInt16BE(r.data.length,t),t+=2,r.data.copy(e,t),t+=r.data.length;else switch(i){case 8:let o=r.sourcePrefixLength||0,s=r.family||z3.familyOf(r.ip),a=z3.encode(r.ip,Qe.alloc),c=Math.ceil(o/8);e.writeUInt16BE(c+4,t),t+=2,e.writeUInt16BE(s,t),t+=2,e.writeUInt8(o,t++),e.writeUInt8(r.scopePrefixLength||0,t++),a.copy(e,t,0,c),t+=c;break;case 11:r.timeout?(e.writeUInt16BE(2,t),t+=2,e.writeUInt16BE(r.timeout,t),t+=2):(e.writeUInt16BE(0,t),t+=2);break;case 12:let u=r.length||0;e.writeUInt16BE(u,t),t+=2,e.fill(0,t,t+u),t+=u;break;case 14:let l=r.tags.length*2;e.writeUInt16BE(l,t),t+=2;for(let d of r.tags)e.writeUInt16BE(d,t),t+=2;break;default:throw new Error(`Unknown roption code: ${r.code}`)}return _o.encode.bytes=t-n,e};_o.encode.bytes=0;_o.decode=function(r,e){e||(e=0);let t={};t.code=r.readUInt16BE(e),t.type=oO.toString(t.code),e+=2;let n=r.readUInt16BE(e);switch(e+=2,t.data=r.slice(e,e+n),t.code){case 8:t.family=r.readUInt16BE(e),e+=2,t.sourcePrefixLength=r.readUInt8(e++),t.scopePrefixLength=r.readUInt8(e++);let i=Qe.alloc(t.family===1?4:16);r.copy(i,0,e,e+n-4),t.ip=z3.decode(i);break;case 11:n>0&&(t.timeout=r.readUInt16BE(e),e+=2);break;case 14:t.tags=[];for(let o=0;o<n;o+=2)t.tags.push(r.readUInt16BE(e)),e+=2}return _o.decode.bytes=n+4,t};_o.decode.bytes=0;_o.encodingLength=function(r){if(r.data)return r.data.length+4;switch(oO.toCode(r.code)){case 8:let t=r.sourcePrefixLength||0;return Math.ceil(t/8)+8;case 11:return typeof r.timeout=="number"?6:4;case 12:return r.length+4;case 14:return 4+r.tags.length*2}throw new Error(`Unknown roption code: ${r.code}`)};var os=Xe.opt={};os.encode=function(r,e,t){e||(e=Qe.alloc(os.encodingLength(r))),t||(t=0);let n=t,i=y5(r,_o);return e.writeUInt16BE(i,t),t=W7(r,_o,e,t+2),os.encode.bytes=t-n,e};os.encode.bytes=0;os.decode=function(r,e){e||(e=0);let t=e,n=[],i=r.readUInt16BE(e);e+=2;let o=0;for(;i>0;)n[o++]=_o.decode(r,e),e+=_o.decode.bytes,i-=_o.decode.bytes;return os.decode.bytes=e-t,n};os.decode.bytes=0;os.encodingLength=function(r){return 2+y5(r||[],_o)};var Zi=Xe.dnskey={};Zi.PROTOCOL_DNSSEC=3;Zi.ZONE_KEY=128;Zi.SECURE_ENTRYPOINT=32768;Zi.encode=function(r,e,t){e||(e=Qe.alloc(Zi.encodingLength(r))),t||(t=0);let n=t,i=r.key;if(!Qe.isBuffer(i))throw new Error("Key must be a Buffer");return t+=2,e.writeUInt16BE(r.flags,t),t+=2,e.writeUInt8(Zi.PROTOCOL_DNSSEC,t),t+=1,e.writeUInt8(r.algorithm,t),t+=1,i.copy(e,t,0,i.length),t+=i.length,Zi.encode.bytes=t-n,e.writeUInt16BE(Zi.encode.bytes-2,n),e};Zi.encode.bytes=0;Zi.decode=function(r,e){e||(e=0);let t=e;var n={},i=r.readUInt16BE(e);if(e+=2,n.flags=r.readUInt16BE(e),e+=2,r.readUInt8(e)!==Zi.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=r.readUInt8(e),e+=1,n.key=r.slice(e,t+i+2),e+=n.key.length,Zi.decode.bytes=e-t,n};Zi.decode.bytes=0;Zi.encodingLength=function(r){return 6+Qe.byteLength(r.key)};var K1=Xe.rrsig={};K1.encode=function(r,e,t){e||(e=Qe.alloc(K1.encodingLength(r))),t||(t=0);let n=t,i=r.signature;if(!Qe.isBuffer(i))throw new Error("Signature must be a Buffer");return t+=2,e.writeUInt16BE(m0.toType(r.typeCovered),t),t+=2,e.writeUInt8(r.algorithm,t),t+=1,e.writeUInt8(r.labels,t),t+=1,e.writeUInt32BE(r.originalTTL,t),t+=4,e.writeUInt32BE(r.expiration,t),t+=4,e.writeUInt32BE(r.inception,t),t+=4,e.writeUInt16BE(r.keyTag,t),t+=2,De.encode(r.signersName,e,t),t+=De.encode.bytes,i.copy(e,t,0,i.length),t+=i.length,K1.encode.bytes=t-n,e.writeUInt16BE(K1.encode.bytes-2,n),e};K1.encode.bytes=0;K1.decode=function(r,e){e||(e=0);let t=e;var n={},i=r.readUInt16BE(e);return e+=2,n.typeCovered=m0.toString(r.readUInt16BE(e)),e+=2,n.algorithm=r.readUInt8(e),e+=1,n.labels=r.readUInt8(e),e+=1,n.originalTTL=r.readUInt32BE(e),e+=4,n.expiration=r.readUInt32BE(e),e+=4,n.inception=r.readUInt32BE(e),e+=4,n.keyTag=r.readUInt16BE(e),e+=2,n.signersName=De.decode(r,e),e+=De.decode.bytes,n.signature=r.slice(e,t+i+2),e+=n.signature.length,K1.decode.bytes=e-t,n};K1.decode.bytes=0;K1.encodingLength=function(r){return 20+De.encodingLength(r.signersName)+Qe.byteLength(r.signature)};var j1=Xe.rp={};j1.encode=function(r,e,t){e||(e=Qe.alloc(j1.encodingLength(r))),t||(t=0);let n=t;return t+=2,De.encode(r.mbox||".",e,t,{mail:!0}),t+=De.encode.bytes,De.encode(r.txt||".",e,t),t+=De.encode.bytes,j1.encode.bytes=t-n,e.writeUInt16BE(j1.encode.bytes-2,n),e};j1.encode.bytes=0;j1.decode=function(r,e){e||(e=0);let t=e,n={};return e+=2,n.mbox=De.decode(r,e,{mail:!0})||".",e+=De.decode.bytes,n.txt=De.decode(r,e)||".",e+=De.decode.bytes,j1.decode.bytes=e-t,n};j1.decode.bytes=0;j1.encodingLength=function(r){return 2+De.encodingLength(r.mbox||".")+De.encodingLength(r.txt||".")};var ri={};ri.encode=function(r,e,t){e||(e=Qe.alloc(ri.encodingLength(r))),t||(t=0);let n=t;for(var i=[],o=0;o<r.length;o++){var s=m0.toType(r[o]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(o=0;o<i.length;o++)if(i[o]!==void 0){var a=Qe.from(i[o]);e.writeUInt8(o,t),t+=1,e.writeUInt8(a.length,t),t+=1,a.copy(e,t),t+=a.length}return ri.encode.bytes=t-n,e};ri.encode.bytes=0;ri.decode=function(r,e,t){e||(e=0);let n=e;for(var i=[];e-n<t;){var o=r.readUInt8(e);e+=1;var s=r.readUInt8(e);e+=1;for(var a=0;a<s;a++)for(var c=r.readUInt8(e+a),u=0;u<8;u++)if(c&1<<7-u){var l=m0.toString(o<<8|a<<3|u);i.push(l)}e+=s}return ri.decode.bytes=e-n,i};ri.decode.bytes=0;ri.encodingLength=function(r){for(var e=[],t=0;t<r.length;t++){var n=m0.toType(r[t]);e[n>>8]=Math.max(e[n>>8]||0,n&255)}var i=0;for(t=0;t<e.length;t++)e[t]!==void 0&&(i+=2+Math.ceil((e[t]+1)/8));return i};var G1=Xe.nsec={};G1.encode=function(r,e,t){e||(e=Qe.alloc(G1.encodingLength(r))),t||(t=0);let n=t;return t+=2,De.encode(r.nextDomain,e,t),t+=De.encode.bytes,ri.encode(r.rrtypes,e,t),t+=ri.encode.bytes,G1.encode.bytes=t-n,e.writeUInt16BE(G1.encode.bytes-2,n),e};G1.encode.bytes=0;G1.decode=function(r,e){e||(e=0);let t=e;var n={},i=r.readUInt16BE(e);return e+=2,n.nextDomain=De.decode(r,e),e+=De.decode.bytes,n.rrtypes=ri.decode(r,e,i-(e-t)),e+=ri.decode.bytes,G1.decode.bytes=e-t,n};G1.decode.bytes=0;G1.encodingLength=function(r){return 2+De.encodingLength(r.nextDomain)+ri.encodingLength(r.rrtypes)};var H1=Xe.nsec3={};H1.encode=function(r,e,t){e||(e=Qe.alloc(H1.encodingLength(r))),t||(t=0);let n=t,i=r.salt;if(!Qe.isBuffer(i))throw new Error("salt must be a Buffer");let o=r.nextDomain;if(!Qe.isBuffer(o))throw new Error("nextDomain must be a Buffer");return t+=2,e.writeUInt8(r.algorithm,t),t+=1,e.writeUInt8(r.flags,t),t+=1,e.writeUInt16BE(r.iterations,t),t+=2,e.writeUInt8(i.length,t),t+=1,i.copy(e,t,0,i.length),t+=i.length,e.writeUInt8(o.length,t),t+=1,o.copy(e,t,0,o.length),t+=o.length,ri.encode(r.rrtypes,e,t),t+=ri.encode.bytes,H1.encode.bytes=t-n,e.writeUInt16BE(H1.encode.bytes-2,n),e};H1.encode.bytes=0;H1.decode=function(r,e){e||(e=0);let t=e;var n={},i=r.readUInt16BE(e);e+=2,n.algorithm=r.readUInt8(e),e+=1,n.flags=r.readUInt8(e),e+=1,n.iterations=r.readUInt16BE(e),e+=2;let o=r.readUInt8(e);e+=1,n.salt=r.slice(e,e+o),e+=o;let s=r.readUInt8(e);return e+=1,n.nextDomain=r.slice(e,e+s),e+=s,n.rrtypes=ri.decode(r,e,i-(e-t)),e+=ri.decode.bytes,H1.decode.bytes=e-t,n};H1.decode.bytes=0;H1.encodingLength=function(r){return 8+r.salt.length+r.nextDomain.length+ri.encodingLength(r.rrtypes)};var W1=Xe.ds={};W1.encode=function(r,e,t){e||(e=Qe.alloc(W1.encodingLength(r))),t||(t=0);let n=t,i=r.digest;if(!Qe.isBuffer(i))throw new Error("Digest must be a Buffer");return t+=2,e.writeUInt16BE(r.keyTag,t),t+=2,e.writeUInt8(r.algorithm,t),t+=1,e.writeUInt8(r.digestType,t),t+=1,i.copy(e,t,0,i.length),t+=i.length,W1.encode.bytes=t-n,e.writeUInt16BE(W1.encode.bytes-2,n),e};W1.encode.bytes=0;W1.decode=function(r,e){e||(e=0);let t=e;var n={},i=r.readUInt16BE(e);return e+=2,n.keyTag=r.readUInt16BE(e),e+=2,n.algorithm=r.readUInt8(e),e+=1,n.digestType=r.readUInt8(e),e+=1,n.digest=r.slice(e,t+i+2),e+=n.digest.length,W1.decode.bytes=e-t,n};W1.decode.bytes=0;W1.encodingLength=function(r){return 6+Qe.byteLength(r.digest)};var is=Xe.sshfp={};is.getFingerprintLengthForHashType=function(e){switch(e){case 1:return 20;case 2:return 32}};is.encode=function(e,t,n){t||(t=Qe.alloc(is.encodingLength(e))),n||(n=0);let i=n;n+=2,t[n]=e.algorithm,n+=1,t[n]=e.hash,n+=1;let o=Qe.from(e.fingerprint.toUpperCase(),"hex");if(o.length!==is.getFingerprintLengthForHashType(e.hash))throw new Error("Invalid fingerprint length");return o.copy(t,n),n+=o.byteLength,is.encode.bytes=n-i,t.writeUInt16BE(is.encode.bytes-2,i),t};is.encode.bytes=0;is.decode=function(e,t){t||(t=0);let n=t,i={};t+=2,i.algorithm=e[t],t+=1,i.hash=e[t],t+=1;let o=is.getFingerprintLengthForHashType(i.hash);return i.fingerprint=e.slice(t,t+o).toString("hex").toUpperCase(),t+=o,is.decode.bytes=t-n,i};is.decode.bytes=0;is.encodingLength=function(r){return 4+Qe.from(r.fingerprint,"hex").byteLength};var Y1=Xe.naptr={};Y1.encode=function(r,e,t){e||(e=Qe.alloc(Y1.encodingLength(r))),t||(t=0);let n=t;return t+=2,e.writeUInt16BE(r.order||0,t),t+=2,e.writeUInt16BE(r.preference||0,t),t+=2,Et.encode(r.flags,e,t),t+=Et.encode.bytes,Et.encode(r.services,e,t),t+=Et.encode.bytes,Et.encode(r.regexp,e,t),t+=Et.encode.bytes,De.encode(r.replacement,e,t),t+=De.encode.bytes,Y1.encode.bytes=t-n,e.writeUInt16BE(Y1.encode.bytes-2,n),e};Y1.encode.bytes=0;Y1.decode=function(r,e){e||(e=0);let t=e,n={};return e+=2,n.order=r.readUInt16BE(e),e+=2,n.preference=r.readUInt16BE(e),e+=2,n.flags=Et.decode(r,e),e+=Et.decode.bytes,n.services=Et.decode(r,e),e+=Et.decode.bytes,n.regexp=Et.decode(r,e),e+=Et.decode.bytes,n.replacement=De.decode(r,e),e+=De.decode.bytes,Y1.decode.bytes=e-t,n};Y1.decode.bytes=0;Y1.encodingLength=function(r){return Et.encodingLength(r.flags)+Et.encodingLength(r.services)+Et.encodingLength(r.regexp)+De.encodingLength(r.replacement)+6};var X1=Xe.tlsa={};X1.encode=function(r,e,t){e||(e=Qe.alloc(X1.encodingLength(r))),t||(t=0);let n=t,i=r.certificate;if(!Qe.isBuffer(i))throw new Error("Certificate must be a Buffer");return t+=2,e.writeUInt8(r.usage,t),t+=1,e.writeUInt8(r.selector,t),t+=1,e.writeUInt8(r.matchingType,t),t+=1,i.copy(e,t,0,i.length),t+=i.length,X1.encode.bytes=t-n,e.writeUInt16BE(X1.encode.bytes-2,n),e};X1.encode.bytes=0;X1.decode=function(r,e){e||(e=0);let t=e,n={},i=r.readUInt16BE(e);return e+=2,n.usage=r.readUInt8(e),e+=1,n.selector=r.readUInt8(e),e+=1,n.matchingType=r.readUInt8(e),e+=1,n.certificate=r.slice(e,t+i+2),e+=n.certificate.length,X1.decode.bytes=e-t,n};X1.decode.bytes=0;X1.encodingLength=function(r){return 5+Qe.byteLength(r.certificate)};var aO=Xe.record=function(r){switch(r.toUpperCase()){case"A":return h0;case"PTR":return Ha;case"CNAME":return $Fe;case"DNAME":return KFe;case"TXT":return u0;case"NULL":return l0;case"AAAA":return p0;case"SRV":return f0;case"HINFO":return d0;case"CAA":return ns;case"NS":return a0;case"SOA":return c0;case"MX":return Cu;case"OPT":return os;case"DNSKEY":return Zi;case"RRSIG":return K1;case"RP":return j1;case"NSEC":return G1;case"NSEC3":return H1;case"SSHFP":return is;case"DS":return W1;case"NAPTR":return Y1;case"TLSA":return X1}return s0},wi=Xe.answer={};wi.encode=function(r,e,t){e||(e=Qe.alloc(wi.encodingLength(r))),t||(t=0);let n=t;if(De.encode(r.name,e,t),t+=De.encode.bytes,e.writeUInt16BE(m0.toType(r.type),t),r.type.toUpperCase()==="OPT"){if(r.name!==".")throw new Error("OPT name must be root.");e.writeUInt16BE(r.udpPayloadSize||4096,t+2),e.writeUInt8(r.extendedRcode||0,t+4),e.writeUInt8(r.ednsVersion||0,t+5),e.writeUInt16BE(r.flags||0,t+6),t+=8,os.encode(r.options||[],e,t),t+=os.encode.bytes}else{let i=C_.toClass(r.class===void 0?"IN":r.class);r.flush&&(i|=sO),e.writeUInt16BE(i,t+2),e.writeUInt32BE(r.ttl||0,t+4),t+=8;let o=aO(r.type);o.encode(r.data,e,t),t+=o.encode.bytes}return wi.encode.bytes=t-n,e};wi.encode.bytes=0;wi.decode=function(r,e){e||(e=0);let t={},n=e;if(t.name=De.decode(r,e),e+=De.decode.bytes,t.type=m0.toString(r.readUInt16BE(e)),t.type==="OPT")t.udpPayloadSize=r.readUInt16BE(e+2),t.extendedRcode=r.readUInt8(e+4),t.ednsVersion=r.readUInt8(e+5),t.flags=r.readUInt16BE(e+6),t.flag_do=(t.flags>>15&1)===1,t.options=os.decode(r,e+8),e+=8+os.decode.bytes;else{let i=r.readUInt16BE(e+2);t.ttl=r.readUInt32BE(e+4),t.class=C_.toString(i&zFe),t.flush=!!(i&sO);let o=aO(t.type);t.data=o.decode(r,e+8),e+=8+o.decode.bytes}return wi.decode.bytes=e-n,t};wi.decode.bytes=0;wi.encodingLength=function(r){let e=r.data!==null&&r.data!==void 0?r.data:r.options;return De.encodingLength(r.name)+8+aO(r.type).encodingLength(e)};var Wa=Xe.question={};Wa.encode=function(r,e,t){e||(e=Qe.alloc(Wa.encodingLength(r))),t||(t=0);let n=t;return De.encode(r.name,e,t),t+=De.encode.bytes,e.writeUInt16BE(m0.toType(r.type),t),t+=2,e.writeUInt16BE(C_.toClass(r.class===void 0?"IN":r.class),t),t+=2,Wa.encode.bytes=t-n,r};Wa.encode.bytes=0;Wa.decode=function(r,e){e||(e=0);let t=e,n={};return n.name=De.decode(r,e),e+=De.decode.bytes,n.type=m0.toString(r.readUInt16BE(e)),e+=2,n.class=C_.toString(r.readUInt16BE(e)),e+=2,!!(n.class&j0e)&&(n.class&=qFe),Wa.decode.bytes=e-t,n};Wa.decode.bytes=0;Wa.encodingLength=function(r){return De.encodingLength(r.name)+4};Xe.AUTHORITATIVE_ANSWER=1024;Xe.TRUNCATED_RESPONSE=512;Xe.RECURSION_DESIRED=256;Xe.RECURSION_AVAILABLE=128;Xe.AUTHENTIC_DATA=32;Xe.CHECKING_DISABLED=16;Xe.DNSSEC_OK=32768;Xe.encode=function(r,e,t){let n=!e;n&&(e=Qe.alloc(Xe.encodingLength(r))),t||(t=0);let i=t;return r.questions||(r.questions=[]),r.answers||(r.answers=[]),r.authorities||(r.authorities=[]),r.additionals||(r.additionals=[]),Ya.encode(r,e,t),t+=Ya.encode.bytes,t=W7(r.questions,Wa,e,t),t=W7(r.answers,wi,e,t),t=W7(r.authorities,wi,e,t),t=W7(r.additionals,wi,e,t),Xe.encode.bytes=t-i,n&&Xe.encode.bytes!==e.length?e.slice(0,Xe.encode.bytes):e};Xe.encode.bytes=0;Xe.decode=function(r,e){e||(e=0);let t=e,n=Ya.decode(r,e);return e+=Ya.decode.bytes,e=A_(n.questions,Wa,r,e),e=A_(n.answers,wi,r,e),e=A_(n.authorities,wi,r,e),e=A_(n.additionals,wi,r,e),Xe.decode.bytes=e-t,n};Xe.decode.bytes=0;Xe.encodingLength=function(r){return Ya.encodingLength(r)+y5(r.questions||[],Wa)+y5(r.answers||[],wi)+y5(r.authorities||[],wi)+y5(r.additionals||[],wi)};Xe.streamEncode=function(r){let e=Xe.encode(r),t=Qe.alloc(2);t.writeUInt16BE(e.byteLength);let n=Qe.concat([t,e]);return Xe.streamEncode.bytes=n.byteLength,n};Xe.streamEncode.bytes=0;Xe.streamDecode=function(r){let e=r.readUInt16BE(0);if(r.byteLength<e+2)return null;let t=Xe.decode(r.slice(2));return Xe.streamDecode.bytes=Xe.decode.bytes,t};Xe.streamDecode.bytes=0;function y5(r,e){let t=0;for(let n=0;n<r.length;n++)t+=e.encodingLength(r[n]);return t}function W7(r,e,t,n){for(let i=0;i<r.length;i++)e.encode(r[i],t,n),n+=e.encode.bytes;return n}function A_(r,e,t,n){for(let i=0;i<r.length;i++)r[i]=e.decode(t,n),n+=e.decode.bytes;return n}});var Y0e=O((zVt,W0e)=>{"use strict";var H0e=XFe;process.nextTick(YFe,42);W0e.exports=jFe;function jFe(r){var e=n;return t;function t(i){e(i||HFe)}function n(i){var o=[i];e=s,r(a);function s(c){o.push(c)}function a(c){var u=arguments;for(e=GFe(c)?n:l;o.length;)l(o.shift());function l(d){H0e(WFe,d,u)}}}}function GFe(r){return Object.prototype.toString.call(r)==="[object Error]"}function HFe(){}function WFe(r,e){r.apply(null,e)}function YFe(r){r===42&&(H0e=process.nextTick)}function XFe(r,e,t){process.nextTick(function(){r(e,t)})}});var R_=O((qVt,Q0e)=>{var cO=G0e(),QFe=require("dgram"),ZFe=Y0e(),JFe=require("events"),lO=require("os"),uO=function(){};Q0e.exports=function(r){r||(r={});var e=new JFe.EventEmitter,t=typeof r.port=="number"?r.port:5353,n=r.type||"udp4",i=r.ip||r.host||(n==="udp4"?"224.0.0.251":null),o={address:i,port:t},s={},a=!1,c=null;if(n==="udp6"&&(!i||!r.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var u=r.socket||QFe.createSocket({type:n,reuseAddr:r.reuseAddr!==!1,toString:function(){return n}});u.on("error",function(d){d.code==="EACCES"||d.code==="EADDRINUSE"?e.emit("error",d):e.emit("warning",d)}),u.on("message",function(d,h){try{d=cO.decode(d)}catch(f){e.emit("warning",f);return}e.emit("packet",d,h),d.type==="query"&&e.emit("query",d,h),d.type==="response"&&e.emit("response",d,h)}),u.on("listening",function(){t||(t=o.port=u.address().port),r.multicast!==!1&&(e.update(),c=setInterval(e.update,5e3),u.setMulticastTTL(r.ttl||255),u.setMulticastLoopback(r.loopback!==!1))});var l=ZFe(function(d){if(!t||r.bind===!1)return d(null);u.once("error",d),u.bind(t,r.bind||r.interface,function(){u.removeListener("error",d),d(null)})});return l(function(d){if(d)return e.emit("error",d);e.emit("ready")}),e.send=function(d,h,f){if(typeof h=="function")return e.send(d,null,h);f||(f=uO),h?!h.host&&!h.address&&(h.address=o.address):h=o,l(m);function m(w){if(a)return f();if(w)return f(w);var _=cO.encode(d);u.send(_,0,_.length,h.port,h.address||h.host,f)}},e.response=e.respond=function(d,h,f){Array.isArray(d)&&(d={answers:d}),d.type="response",d.flags=(d.flags||0)|cO.AUTHORITATIVE_ANSWER,e.send(d,h,f)},e.query=function(d,h,f,m){if(typeof h=="function")return e.query(d,null,null,h);if(typeof h=="object"&&h&&h.port)return e.query(d,null,h,f);if(typeof f=="function")return e.query(d,h,null,f);m||(m=uO),typeof d=="string"&&(d=[{name:d,type:h||"ANY"}]),Array.isArray(d)&&(d={type:"query",questions:d}),d.type="query",e.send(d,f,m)},e.destroy=function(d){if(d||(d=uO),a)return process.nextTick(d);a=!0,clearInterval(c);for(var h in s)try{u.dropMembership(i,h)}catch{}s={},u.close(d)},e.update=function(){for(var d=r.interface?[].concat(r.interface):tVe(),h=!1,f=0;f<d.length;f++){var m=d[f];if(!s[m])try{u.addMembership(i,m),s[m]=!0,h=!0}catch(w){e.emit("warning",w)}}if(h){if(u.setMulticastInterface)try{u.setMulticastInterface(r.interface||eVe())}catch(w){e.emit("warning",w)}e.emit("networkInterface")}},e};function eVe(){for(var r=lO.networkInterfaces(),e=Object.keys(r),t=0;t<e.length;t++)for(var n=r[e[t]],i=0;i<n.length;i++){var o=n[i];if(X0e(o.family)&&!o.internal)return lO.platform()==="darwin"&&e[t]==="en0"?o.address:"0.0.0.0"}return"127.0.0.1"}function tVe(){for(var r=lO.networkInterfaces(),e=Object.keys(r),t=[],n=0;n<e.length;n++)for(var i=r[e[n]],o=0;o<i.length;o++){var s=i[o];if(X0e(s.family)){t.push(s.address);break}}return t}function X0e(r){return r===4||r==="IPv4"}});var Q1=O(y0=>{"use strict";y0.getValueAsString=function(e){return Number.isNaN(e)?"Nan":Number.isFinite(e)?`${e}`:e<0?"-Inf":"+Inf"};y0.removeLabels=function(e,t){let n=gO(t);delete e[n]};y0.setValue=function(e,t,n){let i=gO(n);return e[i]={value:typeof t=="number"?t:0,labels:n||{}},e};y0.setValueDelta=function(e,t,n,i=""){let o=typeof t=="number"?t:0;return e[i]?e[i].value+=o:e[i]={value:o,labels:n},e};y0.getLabels=function(r,e){if(typeof e[0]=="object")return e[0];if(r.length!==e.length)throw new Error("Invalid number of arguments");let t={};for(let n=0;n<r.length;n++)t[r[n]]=e[n];return t};function gO(r){let e=Object.keys(r);if(e.length===0)return"";e.length>1&&(e=e.sort());let t="",n=0,i=e.length;for(;n<i-1;n++)t+=`${e[n]}:${r[e[n]]},`;return t+=`${e[n]}:${r[e[n]]}`,t}y0.hashObject=gO;y0.isObject=function(e){return e===Object(e)};var mO=class extends Map{add(e,t){this.has(e)?this.get(e).push(t):this.set(e,[t])}};y0.Grouper=mO});var q3=O((Szt,wO)=>{"use strict";var{getValueAsString:uVe}=Q1();function yO(r){return r.replace(/\n/g,"\\n").replace(/\\(?!n)/g,"\\\\")}function lVe(r){return typeof r!="string"?r:yO(r).replace(/"/g,'\\"')}var L_=class r{constructor(){this._metrics={},this._collectors=[],this._defaultLabels={}}getMetricsAsArray(){return Object.values(this._metrics)}async getMetricAsPrometheusString(e){let t=await e.get(),n=yO(t.name),i=`# HELP ${n} ${yO(t.help)}`,o=`# TYPE ${n} ${t.type}`,s=Object.keys(this._defaultLabels).length>0?this._defaultLabels:null,a=[i,o];for(let{metricName:c=t.name,value:u,labels:l={}}of t.values||[]){let d=s?{...l,...s,...l}:l,h=Object.entries(d).map(([m,w])=>`${m}="${lVe(w)}"`),f=h.length?`{${h.join(",")}}`:"";a.push(`${c}${f} ${uVe(u)}`)}return a.join(`
`)}async metrics(){let e=[];for(let n of this.getMetricsAsArray())e.push(this.getMetricAsPrometheusString(n));return`${(await Promise.all(e)).join(`

`)}
`}registerMetric(e){if(this._metrics[e.name]&&this._metrics[e.name]!==e)throw new Error(`A metric with the name ${e.name} has already been registered.`);this._metrics[e.name]=e}clear(){this._metrics={},this._defaultLabels={}}async getMetricsAsJSON(){let e=[],t=Object.keys(this._defaultLabels),n=[];for(let o of this.getMetricsAsArray())n.push(o.get());let i=await Promise.all(n);for(let o of i){if(o.values&&t.length>0)for(let s of o.values){s.labels=Object.assign({},s.labels);for(let a of t)s.labels[a]=s.labels[a]||this._defaultLabels[a]}e.push(o)}return e}removeSingleMetric(e){delete this._metrics[e]}getSingleMetricAsString(e){return this.getMetricAsPrometheusString(this._metrics[e])}getSingleMetric(e){return this._metrics[e]}setDefaultLabels(e){this._defaultLabels=e}resetMetrics(){for(let e in this._metrics)this._metrics[e].reset()}get contentType(){return"text/plain; version=0.0.4; charset=utf-8"}static merge(e){let t=new r;return e.reduce((i,o)=>i.concat(o.getMetricsAsArray()),[]).forEach(t.registerMetric,t),t}};wO.exports=L_;wO.exports.globalRegistry=new L_});var $3=O(B_=>{"use strict";var dVe=require("util"),fVe=/^[a-zA-Z_:][a-zA-Z0-9_:]*$/,hVe=/^[a-zA-Z_][a-zA-Z0-9_]*$/;B_.validateMetricName=function(r){return fVe.test(r)};B_.validateLabelName=function(r=[]){return r.every(e=>hVe.test(e))};B_.validateLabel=function(e,t){for(let n in t)if(!e.includes(n))throw new Error(`Added label "${n}" is not included in initial labelset: ${dVe.inspect(e)}`)}});var Z7=O((Izt,d2e)=>{"use strict";var{globalRegistry:l2e}=q3(),{isObject:pVe}=Q1(),{validateMetricName:mVe,validateLabelName:gVe}=$3(),bO=class{constructor(e,t={}){if(!pVe(e))throw new TypeError("constructor expected a config object");if(Object.assign(this,{labelNames:[],registers:[l2e],aggregator:"sum"},t,e),this.registers||(this.registers=[l2e]),!this.help)throw new Error("Missing mandatory help parameter");if(!this.name)throw new Error("Missing mandatory name parameter");if(!mVe(this.name))throw new Error("Invalid metric name");if(!gVe(this.labelNames))throw new Error("Invalid label name");if(this.collect&&typeof this.collect!="function")throw new Error('Optional "collect" parameter must be a function');this.reset();for(let n of this.registers)n.registerMetric(this)}reset(){}};d2e.exports={Metric:bO}});var vO=O((Azt,m2e)=>{"use strict";var yVe=require("util"),wVe="counter",{hashObject:bVe,isObject:_Ve,getLabels:f2e,removeLabels:vVe}=Q1(),{validateLabel:h2e}=$3(),{Metric:EVe}=Z7(),_O=class extends EVe{inc(e,t){let n;if(_Ve(e)?(n=bVe(e),h2e(this.labelNames,e)):(t=e,e={}),t&&!Number.isFinite(t))throw new TypeError(`Value is not a valid number: ${yVe.format(t)}`);if(t<0)throw new Error("It is not possible to decrease a counter");t==null&&(t=1),p2e(this.hashMap,t,e,n)}reset(){this.hashMap={},this.labelNames.length===0&&p2e(this.hashMap,0)}async get(){if(this.collect){let e=this.collect();e instanceof Promise&&await e}return{help:this.help,name:this.name,type:wVe,values:Object.values(this.hashMap),aggregator:this.aggregator}}labels(...e){let t=f2e(this.labelNames,e)||{};return{inc:this.inc.bind(this,t)}}remove(...e){let t=f2e(this.labelNames,e)||{};return h2e(this.labelNames,t),vVe.call(this,this.hashMap,t)}};function p2e(r,e,t={},n=""){return r[n]?r[n].value+=e:r[n]={value:e,labels:t},r}m2e.exports=_O});var Eo=O((Czt,E2e)=>{"use strict";var w2e=require("util"),xVe="gauge",{setValue:b2e,setValueDelta:SVe,getLabels:g2e,hashObject:_2e,isObject:v2e,removeLabels:TVe}=Q1(),{validateLabel:M_}=$3(),{Metric:IVe}=Z7(),SO=class extends IVe{set(e,t){t=xO(e,t),e=EO(e),AVe(this,e,t)}reset(){this.hashMap={},this.labelNames.length===0&&b2e(this.hashMap,0,{})}inc(e,t){t=xO(e,t),e=EO(e),t===void 0&&(t=1),y2e(this,e,t)}dec(e,t){t=xO(e,t),e=EO(e),t===void 0&&(t=1),y2e(this,e,-t)}setToCurrentTime(e){let t=Date.now()/1e3;e===void 0?this.set(t):this.set(e,t)}startTimer(e){let t=process.hrtime();return n=>{let i=process.hrtime(t),o=i[0]+i[1]/1e9;return this.set(Object.assign({},e,n),o),o}}async get(){if(this.collect){let e=this.collect();e instanceof Promise&&await e}return{help:this.help,name:this.name,type:xVe,values:Object.values(this.hashMap),aggregator:this.aggregator}}_getValue(e){let t=_2e(e||{});return this.hashMap[t]?this.hashMap[t].value:0}labels(...e){let t=g2e(this.labelNames,e);return M_(this.labelNames,t),{inc:this.inc.bind(this,t),dec:this.dec.bind(this,t),set:this.set.bind(this,t),setToCurrentTime:this.setToCurrentTime.bind(this,t),startTimer:this.startTimer.bind(this,t)}}remove(...e){let t=g2e(this.labelNames,e);M_(this.labelNames,t),TVe.call(this,this.hashMap,t)}};function AVe(r,e,t){if(typeof t!="number")throw new TypeError(`Value is not a valid number: ${w2e.format(t)}`);M_(r.labelNames,e),b2e(r.hashMap,t,e)}function y2e(r,e,t){if(typeof t!="number")throw new TypeError(`Delta is not a valid number: ${w2e.format(t)}`);M_(r.labelNames,e);let n=_2e(e);SVe(r.hashMap,t,e,n)}function EO(r){return v2e(r)?r:{}}function xO(r,e){return v2e(r)?e:r}E2e.exports=SO});var RO=O((Rzt,I2e)=>{"use strict";var CVe=require("util"),RVe="histogram",{getLabels:x2e,hashObject:TO,isObject:kVe,removeLabels:PVe}=Q1(),{validateLabel:IO}=$3(),{Metric:DVe}=Z7(),AO=class extends DVe{constructor(e){super(e,{buckets:[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10]});for(let t of this.labelNames)if(t==="le")throw new Error("le is a reserved label keyword");this.upperBounds=this.buckets,this.bucketValues=this.upperBounds.reduce((t,n)=>(t[n]=0,t),{}),Object.freeze(this.bucketValues),Object.freeze(this.upperBounds),this.labelNames.length===0&&(this.hashMap={[TO({})]:CO({},Object.assign({},this.bucketValues))})}observe(e,t){T2e.call(this,e===0?0:e||{})(t)}async get(){if(this.collect){let n=this.collect();n instanceof Promise&&await n}let t=Object.values(this.hashMap).map(LVe(this)).reduce(BVe(this),[]);return{name:this.name,help:this.help,type:RVe,values:t,aggregator:this.aggregator}}reset(){this.hashMap={}}zero(e){let t=TO(e);this.hashMap[t]=CO(e,Object.assign({},this.bucketValues))}startTimer(e){return S2e.call(this,e)()}labels(...e){let t=x2e(this.labelNames,e);return IO(this.labelNames,t),{observe:T2e.call(this,t),startTimer:S2e.call(this,t)}}remove(...e){let t=x2e(this.labelNames,e);IO(this.labelNames,t),PVe.call(this,this.hashMap,t)}};function S2e(r){return()=>{let e=process.hrtime();return t=>{let n=process.hrtime(e),i=n[0]+n[1]/1e9;return this.observe(Object.assign({},r,t),i),i}}}function U_(r,e,t){return{labels:r,value:e,metricName:t}}function NVe(r,e){for(let t=0;t<r.length;t++){let n=r[t];if(e<=n)return n}return-1}function T2e(r){return e=>{let t=OVe(r,e);if(IO(this.labelNames,t.labels),!Number.isFinite(t.value))throw new TypeError(`Value is not a valid number: ${CVe.format(t.value)}`);let n=TO(t.labels),i=this.hashMap[n];i||(i=CO(t.labels,Object.assign({},this.bucketValues)));let o=NVe(this.upperBounds,t.value);i.sum+=t.value,i.count+=1,Object.prototype.hasOwnProperty.call(i.bucketValues,o)&&(i.bucketValues[o]+=1),this.hashMap[n]=i}}function CO(r,e){return{labels:r,bucketValues:e,sum:0,count:0}}function OVe(r,e){return kVe(r)?{labels:r,value:e}:{value:r,labels:{}}}function LVe(r){return e=>{let t=[],n=Object.keys(e.labels),i=0;for(let o of r.upperBounds){i+=e.bucketValues[o];let s={le:o};for(let a of n)s[a]=e.labels[a];t.push(U_(s,i,`${r.name}_bucket`))}return{buckets:t,data:e}}}function BVe(r){return(e,t)=>{e.push(...t.buckets);let n={le:"+Inf"};for(let i of Object.keys(t.data.labels))n[i]=t.data.labels[i];return e.push(U_(n,t.data.count,`${r.name}_bucket`),U_(t.data.labels,t.data.sum,`${r.name}_sum`),U_(t.data.labels,t.data.count,`${r.name}_count`)),e}}I2e.exports=AO});var kO=O((kzt,A2e)=>{function Xa(){}Xa.prototype.clear=function(){this._root=null,this.size=0};Xa.prototype.find=function(r){for(var e=this._root;e!==null;){var t=this._comparator(r,e.data);if(t===0)return e.data;e=e.get_child(t>0)}return null};Xa.prototype.findIter=function(r){for(var e=this._root,t=this.iterator();e!==null;){var n=this._comparator(r,e.data);if(n===0)return t._cursor=e,t;t._ancestors.push(e),e=e.get_child(n>0)}return null};Xa.prototype.lowerBound=function(r){for(var e=this._root,t=this.iterator(),n=this._comparator;e!==null;){var i=n(r,e.data);if(i===0)return t._cursor=e,t;t._ancestors.push(e),e=e.get_child(i>0)}for(var o=t._ancestors.length-1;o>=0;--o)if(e=t._ancestors[o],n(r,e.data)<0)return t._cursor=e,t._ancestors.length=o,t;return t._ancestors.length=0,t};Xa.prototype.upperBound=function(r){for(var e=this.lowerBound(r),t=this._comparator;e.data()!==null&&t(e.data(),r)===0;)e.next();return e};Xa.prototype.min=function(){var r=this._root;if(r===null)return null;for(;r.left!==null;)r=r.left;return r.data};Xa.prototype.max=function(){var r=this._root;if(r===null)return null;for(;r.right!==null;)r=r.right;return r.data};Xa.prototype.iterator=function(){return new w5(this)};Xa.prototype.each=function(r){for(var e=this.iterator(),t;(t=e.next())!==null;)if(r(t)===!1)return};Xa.prototype.reach=function(r){for(var e=this.iterator(),t;(t=e.prev())!==null;)if(r(t)===!1)return};function w5(r){this._tree=r,this._ancestors=[],this._cursor=null}w5.prototype.data=function(){return this._cursor!==null?this._cursor.data:null};w5.prototype.next=function(){if(this._cursor===null){var r=this._tree._root;r!==null&&this._minNode(r)}else if(this._cursor.right===null){var e;do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null};w5.prototype.prev=function(){if(this._cursor===null){var r=this._tree._root;r!==null&&this._maxNode(r)}else if(this._cursor.left===null){var e;do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null};w5.prototype._minNode=function(r){for(;r.left!==null;)this._ancestors.push(r),r=r.left;this._cursor=r};w5.prototype._maxNode=function(r){for(;r.right!==null;)this._ancestors.push(r),r=r.right;this._cursor=r};A2e.exports=Xa});var k2e=O((Pzt,R2e)=>{var MVe=kO();function b5(r){this.data=r,this.left=null,this.right=null,this.red=!0}b5.prototype.get_child=function(r){return r?this.right:this.left};b5.prototype.set_child=function(r,e){r?this.right=e:this.left=e};function F_(r){this._root=null,this._comparator=r,this.size=0}F_.prototype=new MVe;F_.prototype.insert=function(r){var e=!1;if(this._root===null)this._root=new b5(r),e=!0,this.size++;else{var t=new b5(void 0),n=0,i=0,o=null,s=t,a=null,c=this._root;for(s.right=this._root;;){if(c===null?(c=new b5(r),a.set_child(n,c),e=!0,this.size++):Ws(c.left)&&Ws(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),Ws(c)&&Ws(a)){var u=s.right===o;c===a.get_child(i)?s.set_child(u,J7(o,!i)):s.set_child(u,C2e(o,!i))}var l=this._comparator(c.data,r);if(l===0)break;i=n,n=l<0,o!==null&&(s=o),o=a,a=c,c=c.get_child(n)}this._root=t.right}return this._root.red=!1,e};F_.prototype.remove=function(r){if(this._root===null)return!1;var e=new b5(void 0),t=e;t.right=this._root;for(var n=null,i=null,o=null,s=1;t.get_child(s)!==null;){var a=s;i=n,n=t,t=t.get_child(s);var c=this._comparator(r,t.data);if(s=c>0,c===0&&(o=t),!Ws(t)&&!Ws(t.get_child(s))){if(Ws(t.get_child(!s))){var u=J7(t,s);n.set_child(a,u),n=u}else if(!Ws(t.get_child(!s))){var l=n.get_child(!a);if(l!==null)if(!Ws(l.get_child(!a))&&!Ws(l.get_child(a)))n.red=!1,l.red=!0,t.red=!0;else{var d=i.right===n;Ws(l.get_child(a))?i.set_child(d,C2e(n,a)):Ws(l.get_child(!a))&&i.set_child(d,J7(n,a));var h=i.get_child(d);h.red=!0,t.red=!0,h.left.red=!1,h.right.red=!1}}}}return o!==null&&(o.data=t.data,n.set_child(n.right===t,t.get_child(t.left===null)),this.size--),this._root=e.right,this._root!==null&&(this._root.red=!1),o!==null};function Ws(r){return r!==null&&r.red}function J7(r,e){var t=r.get_child(!e);return r.set_child(!e,t.get_child(e)),t.set_child(e,r),r.red=!0,t.red=!1,t}function C2e(r,e){return r.set_child(!e,J7(r.get_child(!e),!e)),J7(r,e)}R2e.exports=F_});var D2e=O((Dzt,P2e)=>{var UVe=kO();function ep(r){this.data=r,this.left=null,this.right=null}ep.prototype.get_child=function(r){return r?this.right:this.left};ep.prototype.set_child=function(r,e){r?this.right=e:this.left=e};function V_(r){this._root=null,this._comparator=r,this.size=0}V_.prototype=new UVe;V_.prototype.insert=function(r){if(this._root===null)return this._root=new ep(r),this.size++,!0;for(var e=0,t=null,n=this._root;;){if(n===null)return n=new ep(r),t.set_child(e,n),ret=!0,this.size++,!0;if(this._comparator(n.data,r)===0)return!1;e=this._comparator(n.data,r)<0,t=n,n=n.get_child(e)}};V_.prototype.remove=function(r){if(this._root===null)return!1;var e=new ep(void 0),t=e;t.right=this._root;for(var n=null,i=null,o=1;t.get_child(o)!==null;){n=t,t=t.get_child(o);var s=this._comparator(r,t.data);o=s>0,s===0&&(i=t)}return i!==null?(i.data=t.data,n.set_child(n.right===t,t.get_child(t.left===null)),this._root=e.right,this.size--,!0):!1};P2e.exports=V_});var O2e=O((Nzt,N2e)=>{N2e.exports={RBTree:k2e(),BinTree:D2e()}});var M2e=O((Ozt,B2e)=>{var FVe=O2e().RBTree;function Kr(r,e,t){this.discrete=r===!1,this.delta=r||.01,this.K=e===void 0?25:e,this.CX=t===void 0?1.1:t,this.centroids=new FVe(L2e),this.nreset=0,this.reset()}Kr.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0};Kr.prototype.size=function(){return this.centroids.size};Kr.prototype.toArray=function(r){var e=[];return r?(this._cumulate(!0),this.centroids.each(function(t){e.push(t)})):this.centroids.each(function(t){e.push({mean:t.mean,n:t.n})}),e};Kr.prototype.summary=function(){var r=this.discrete?"exact ":"approximating ",e=[r+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)];return e.join(`
`)};function L2e(r,e){return r.mean>e.mean?1:r.mean<e.mean?-1:0}function VVe(r,e){return r.mean_cumn-e.mean_cumn}Kr.prototype.push=function(r,e){e=e||1,r=Array.isArray(r)?r:[r];for(var t=0;t<r.length;t++)this._digest(r[t],e)};Kr.prototype.push_centroid=function(r){r=Array.isArray(r)?r:[r];for(var e=0;e<r.length;e++)this._digest(r[e].mean,r[e].n)};Kr.prototype._cumulate=function(r){if(!(this.n===this.last_cumulate||!r&&this.CX&&this.CX>this.n/this.last_cumulate)){var e=0;this.centroids.each(function(t){t.mean_cumn=e+t.n/2,e=t.cumn=e+t.n}),this.n=this.last_cumulate=e}};Kr.prototype.find_nearest=function(r){if(this.size()===0)return null;var e=this.centroids.lowerBound({mean:r}),t=e.data()===null?e.prev():e.data();if(t.mean===r||this.discrete)return t;var n=e.prev();return n&&Math.abs(n.mean-r)<Math.abs(t.mean-r)?n:t};Kr.prototype._new_centroid=function(r,e,t){var n={mean:r,n:e,cumn:t};return this.centroids.insert(n),this.n+=e,n};Kr.prototype._addweight=function(r,e,t){e!==r.mean&&(r.mean+=t*(e-r.mean)/(r.n+t)),r.cumn+=t,r.mean_cumn+=t/2,r.n+=t,this.n+=t};Kr.prototype._digest=function(r,e){var t=this.centroids.min(),n=this.centroids.max(),i=this.find_nearest(r);if(i&&i.mean===r)this._addweight(i,r,e);else if(i===t)this._new_centroid(r,e,0);else if(i===n)this._new_centroid(r,e,this.n);else if(this.discrete)this._new_centroid(r,e,i.cumn);else{var o=i.mean_cumn/this.n,s=Math.floor(4*this.n*this.delta*o*(1-o));s-i.n>=e?this._addweight(i,r,e):this._new_centroid(r,e,i.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()};Kr.prototype.bound_mean=function(r){var e=this.centroids.upperBound({mean:r}),t=e.prev(),n=t.mean===r?t:e.next();return[t,n]};Kr.prototype.p_rank=function(r){var e=Array.isArray(r)?r:[r],t=e.map(this._p_rank,this);return Array.isArray(r)?t:t[0]};Kr.prototype._p_rank=function(r){if(this.size()!==0){{if(r<this.centroids.min().mean)return 0;if(r>this.centroids.max().mean)return 1}this._cumulate(!0);var e=this.bound_mean(r),t=e[0],n=e[1];if(this.discrete)return t.cumn/this.n;var i=t.mean_cumn;return t!==n&&(i+=(r-t.mean)*(n.mean_cumn-t.mean_cumn)/(n.mean-t.mean)),i/this.n}};Kr.prototype.bound_mean_cumn=function(r){this.centroids._comparator=VVe;var e=this.centroids.upperBound({mean_cumn:r});this.centroids._comparator=L2e;var t=e.prev(),n=t&&t.mean_cumn===r?t:e.next();return[t,n]};Kr.prototype.percentile=function(r){var e=Array.isArray(r)?r:[r],t=e.map(this._percentile,this);return Array.isArray(r)?t:t[0]};Kr.prototype._percentile=function(r){if(this.size()!==0){this._cumulate(!0);var e=this.n*r,t=this.bound_mean_cumn(e),n=t[0],i=t[1];return i===n||n===null||i===null?(n||i).mean:this.discrete?e<=n.cumn?n.mean:i.mean:n.mean+(e-n.mean_cumn)*(i.mean-n.mean)/(i.mean_cumn-n.mean_cumn)}};function zVe(r){var e=Math.floor(Math.random()*r.length);return r.splice(e,1)[0]}Kr.prototype.compress=function(){if(!this.compressing){var r=this.toArray();for(this.reset(),this.compressing=!0;r.length>0;)this.push_centroid(zVe(r));this._cumulate(!0),this.compressing=!1}};function Ru(r){this.config=r||{},this.mode=this.config.mode||"auto",Kr.call(this,this.mode==="cont"?r.delta:!1),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}Ru.prototype=Object.create(Kr.prototype);Ru.prototype.constructor=Ru;Ru.prototype.push=function(r){Kr.prototype.push.call(this,r),this.check_continuous()};Ru.prototype._new_centroid=function(r,e,t){this.n_unique+=1,Kr.prototype._new_centroid.call(this,r,e,t)};Ru.prototype._addweight=function(r,e,t){r.n===1&&(this.n_unique-=1),Kr.prototype._addweight.call(this,r,e,t)};Ru.prototype.check_continuous=function(){return this.mode!=="auto"||this.size()<this.digest_thresh?!1:this.n_unique/this.size()>this.digest_ratio?(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0):!1};B2e.exports={TDigest:Kr,Digest:Ru}});var V2e=O((Lzt,F2e)=>{"use strict";var{TDigest:U2e}=M2e(),DO=class{constructor(e,t){this.maxAgeSeconds=e||0,this.ageBuckets=t||0,this.shouldRotate=e&&t,this.ringBuffer=Array(t).fill(new U2e),this.currentBuffer=0,this.lastRotateTimestampMillis=Date.now(),this.durationBetweenRotatesMillis=e*1e3/t||1/0}size(){return PO.call(this).size()}percentile(e){return PO.call(this).percentile(e)}push(e){PO.call(this),this.ringBuffer.forEach(t=>{t.push(e)})}reset(){this.ringBuffer.forEach(e=>{e.reset()})}compress(){this.ringBuffer.forEach(e=>{e.compress()})}};function PO(){let r=Date.now()-this.lastRotateTimestampMillis;for(;r>this.durationBetweenRotatesMillis&&this.shouldRotate;)this.ringBuffer[this.currentBuffer]=new U2e,++this.currentBuffer>=this.ringBuffer.length&&(this.currentBuffer=0),r-=this.durationBetweenRotatesMillis,this.lastRotateTimestampMillis+=this.durationBetweenRotatesMillis;return this.ringBuffer[this.currentBuffer]}F2e.exports=DO});var H2e=O((Bzt,G2e)=>{"use strict";var qVe=require("util"),$Ve="summary",{getLabels:z2e,hashObject:K2e,removeLabels:KVe}=Q1(),{validateLabel:NO}=$3(),{Metric:jVe}=Z7(),j2e=V2e(),GVe=1e3,OO=class extends jVe{constructor(e){super(e,{percentiles:[.01,.05,.5,.9,.95,.99,.999],compressCount:GVe,hashMap:{}});for(let t of this.labelNames)if(t==="quantile")throw new Error("quantile is a reserved label keyword");this.labelNames.length===0&&(this.hashMap={[K2e({})]:{labels:{},td:new j2e(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}})}observe(e,t){$2e.call(this,e===0?0:e||{})(t)}async get(){if(this.collect){let n=this.collect();n instanceof Promise&&await n}let e=Object.keys(this.hashMap),t=[];return e.forEach(n=>{let i=this.hashMap[n];i&&(this.pruneAgedBuckets&&i.td.size()===0?delete this.hashMap[n]:(HVe(i,this.percentiles).forEach(o=>{t.push(o)}),t.push(YVe(i,this)),t.push(WVe(i,this))))}),{name:this.name,help:this.help,type:$Ve,values:t,aggregator:this.aggregator}}reset(){Object.values(this.hashMap).forEach(t=>{t.td.reset(),t.count=0,t.sum=0})}startTimer(e){return q2e.call(this,e)()}labels(...e){let t=z2e(this.labelNames,e);return NO(this.labelNames,t),{observe:$2e.call(this,t),startTimer:q2e.call(this,t)}}remove(...e){let t=z2e(this.labelNames,e);NO(this.labelNames,t),KVe.call(this,this.hashMap,t)}};function HVe(r,e){return r.td.compress(),e.map(t=>{let n=r.td.percentile(t);return{labels:Object.assign({quantile:t},r.labels),value:n||0}})}function WVe(r,e){return{metricName:`${e.name}_count`,labels:r.labels,value:r.count}}function YVe(r,e){return{metricName:`${e.name}_sum`,labels:r.labels,value:r.sum}}function q2e(r){return()=>{let e=process.hrtime();return t=>{let n=process.hrtime(e),i=n[0]+n[1]/1e9;return this.observe(Object.assign({},r,t),i),i}}}function $2e(r){return e=>{let t=XVe(r,e);if(NO(this.labelNames,r),!Number.isFinite(t.value))throw new TypeError(`Value is not a valid number: ${qVe.format(t.value)}`);let n=K2e(t.labels),i=this.hashMap[n];i||(i={labels:t.labels,td:new j2e(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}),i.td.push(t.value),i.count++,i.count%this.compressCount===0&&i.td.compress(),i.sum+=t.value,this.hashMap[n]=i}}function XVe(r,e){return e===void 0?{value:r,labels:{}}:{labels:r,value:e}}G2e.exports=OO});var Y2e=O((Mzt,W2e)=>{"use strict";var LO=require("url"),QVe=require("http"),ZVe=require("https"),{gzipSync:JVe}=require("zlib"),{globalRegistry:eze}=q3(),MO=class{constructor(e,t,n){n||(n=eze),this.registry=n,this.gatewayUrl=e,this.requestOptions=Object.assign({},t)}pushAdd(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return BO.call(this,"POST",e.jobName,e.groupings)}push(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return BO.call(this,"PUT",e.jobName,e.groupings)}delete(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return BO.call(this,"DELETE",e.jobName,e.groupings)}};async function BO(r,e,t){let n=LO.parse(this.gatewayUrl),o=`${n.pathname&&n.pathname!=="/"?n.pathname:""}/metrics/job/${encodeURIComponent(e)}${tze(t)}`,s=LO.resolve(this.gatewayUrl,o),a=LO.parse(s),c=rze(a.href)?ZVe:QVe,u=Object.assign(a,this.requestOptions,{method:r});return new Promise((l,d)=>{let h=c.request(u,f=>{let m="";f.setEncoding("utf8"),f.on("data",w=>{m+=w}),f.on("end",()=>{l({resp:f,body:m})})});h.on("error",f=>{d(f)}),r!=="DELETE"?this.registry.metrics().then(f=>{u.headers&&u.headers["Content-Encoding"]==="gzip"&&(f=JVe(f)),h.write(f),h.end()}).catch(f=>{d(f)}):h.end()})}function tze(r){return r?Object.keys(r).map(e=>`/${encodeURIComponent(e)}/${encodeURIComponent(r[e])}`).join(""):""}function rze(r){return r.search(/^https/)!==-1}W2e.exports=MO});var FO=O(UO=>{"use strict";UO.linearBuckets=(r,e,t)=>{if(t<1)throw new Error("Linear buckets needs a positive count");let n=new Array(t);for(let i=0;i<t;i++)n[i]=r+i*e;return n};UO.exponentialBuckets=(r,e,t)=>{if(r<=0)throw new Error("Exponential buckets needs a positive start");if(t<1)throw new Error("Exponential buckets needs a positive count");if(e<=1)throw new Error("Exponential buckets needs a factor greater than 1");let n=new Array(t);for(let i=0;i<t;i++)n[i]=r,r*=e;return n}});var J2e=O((Fzt,zO)=>{"use strict";var VO=vO(),X2e="process_cpu_user_seconds_total",Q2e="process_cpu_system_seconds_total",Z2e="process_cpu_seconds_total";zO.exports=(r,e={})=>{let t=r?[r]:void 0,n=e.prefix?e.prefix:"",i=e.labels?e.labels:{},o=Object.keys(i),s=process.cpuUsage(),a=new VO({name:n+X2e,help:"Total user CPU time spent in seconds.",registers:t,labelNames:o,collect(){let l=process.cpuUsage(),d=l.user-s.user,h=l.system-s.system;s=l,a.inc(i,d/1e6),c.inc(i,h/1e6),u.inc(i,(d+h)/1e6)}}),c=new VO({name:n+Q2e,help:"Total system CPU time spent in seconds.",registers:t,labelNames:o}),u=new VO({name:n+Z2e,help:"Total user and system CPU time spent in seconds.",registers:t,labelNames:o})};zO.exports.metricNames=[X2e,Q2e,Z2e]});var tue=O((Vzt,qO)=>{"use strict";var nze=Eo(),ize=Math.round(Date.now()/1e3-process.uptime()),eue="process_start_time_seconds";qO.exports=(r,e={})=>{let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new nze({name:t+eue,help:"Start time of the process since unix epoch in seconds.",registers:r?[r]:void 0,labelNames:i,aggregator:"omit",collect(){this.set(n,ize)}})};qO.exports.metricNames=[eue]});var oue=O((zzt,KO)=>{"use strict";var $O=Eo(),oze=require("fs"),sze=["VmSize","VmRSS","VmData"],rue="process_resident_memory_bytes",nue="process_virtual_memory_bytes",iue="process_heap_bytes";function aze(r){let e={};return r.split(`
`).filter(t=>sze.some(n=>t.indexOf(n)===0)).forEach(t=>{let n=t.split(":"),i=n[1].trim();i=i.substr(0,i.length-3),i=Number(i)*1024,e[n[0]]=i}),e}KO.exports=(r,e={})=>{let t=r?[r]:void 0,n=e.prefix?e.prefix:"",i=e.labels?e.labels:{},o=Object.keys(i),s=new $O({name:n+rue,help:"Resident memory size in bytes.",registers:t,labelNames:o,collect(){try{let u=oze.readFileSync("/proc/self/status","utf8"),l=aze(u);s.set(i,l.VmRSS),a.set(i,l.VmSize),c.set(i,l.VmData)}catch{}}}),a=new $O({name:n+nue,help:"Virtual memory size in bytes.",registers:t,labelNames:o}),c=new $O({name:n+iue,help:"Process heap size in bytes.",registers:t,labelNames:o})};KO.exports.metricNames=[rue,nue,iue]});var jO=O((qzt,sue)=>{"use strict";function cze(){try{return process.memoryUsage()}catch{return}}sue.exports=cze});var uue=O(($zt,GO)=>{"use strict";var uze=Eo(),aue=oue(),lze=jO(),cue="process_resident_memory_bytes";function dze(r,e={}){let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new uze({name:t+cue,help:"Resident memory size in bytes.",registers:r?[r]:void 0,labelNames:i,collect(){let o=lze();o&&this.set(n,o.rss)}})}GO.exports=(r,e)=>process.platform==="linux"?aue(r,e):dze(r,e);GO.exports.metricNames=process.platform==="linux"?aue.metricNames:[cue]});var due=O((Kzt,HO)=>{"use strict";var fze=Eo(),hze=require("fs"),pze=require("process"),lue="process_open_fds";HO.exports=(r,e={})=>{if(pze.platform!=="linux")return;let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new fze({name:t+lue,help:"Number of open file descriptors.",registers:r?[r]:void 0,labelNames:i,collect(){try{let o=hze.readdirSync("/proc/self/fd");this.set(n,o.length-1)}catch{}}})};HO.exports.metricNames=[lue]});var hue=O((jzt,WO)=>{"use strict";var mze=Eo(),gze=require("fs"),fue="process_max_fds",tp;WO.exports=(r,e={})=>{if(tp===void 0)try{let s=gze.readFileSync("/proc/self/limits","utf8").split(`
`);for(let a of s)if(a.startsWith("Max open files")){let c=a.split(/  +/);tp=Number(c[1]);break}}catch{return}if(tp===void 0)return;let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new mze({name:t+fue,help:"Maximum number of open file descriptors.",registers:r?[r]:void 0,labelNames:i,collect(){tp!==void 0&&this.set(n,tp)}})};WO.exports.metricNames=[fue]});var xue=O((Gzt,YO)=>{"use strict";var ku=Eo(),z_;try{z_=require("perf_hooks")}catch{}var mue="nodejs_eventloop_lag_seconds",gue="nodejs_eventloop_lag_min_seconds",yue="nodejs_eventloop_lag_max_seconds",wue="nodejs_eventloop_lag_mean_seconds",bue="nodejs_eventloop_lag_stddev_seconds",_ue="nodejs_eventloop_lag_p50_seconds",vue="nodejs_eventloop_lag_p90_seconds",Eue="nodejs_eventloop_lag_p99_seconds";function pue(r,e,t){let n=process.hrtime(r),o=(n[0]*1e9+n[1])/1e9;e.set(t,o)}YO.exports=(r,e={})=>{let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n),o=r?[r]:void 0,s;if(!z_||!z_.monitorEventLoopDelay)s=()=>{let w=process.hrtime();setImmediate(pue,w,a,n)};else{let w=z_.monitorEventLoopDelay({resolution:e.eventLoopMonitoringPrecision});w.enable(),s=()=>{let _=process.hrtime();setImmediate(pue,_,a,n),c.set(n,w.min/1e9),u.set(n,w.max/1e9),l.set(n,w.mean/1e9),d.set(n,w.stddev/1e9),h.set(n,w.percentile(50)/1e9),f.set(n,w.percentile(90)/1e9),m.set(n,w.percentile(99)/1e9),w.reset()}}let a=new ku({name:t+mue,help:"Lag of event loop in seconds.",registers:o,labelNames:i,aggregator:"average",collect:s}),c=new ku({name:t+gue,help:"The minimum recorded event loop delay.",registers:o,labelNames:i,aggregator:"min"}),u=new ku({name:t+yue,help:"The maximum recorded event loop delay.",registers:o,labelNames:i,aggregator:"max"}),l=new ku({name:t+wue,help:"The mean of the recorded event loop delays.",registers:o,labelNames:i,aggregator:"average"}),d=new ku({name:t+bue,help:"The standard deviation of the recorded event loop delays.",registers:o,labelNames:i,aggregator:"average"}),h=new ku({name:t+_ue,help:"The 50th percentile of the recorded event loop delays.",registers:o,labelNames:i,aggregator:"average"}),f=new ku({name:t+vue,help:"The 90th percentile of the recorded event loop delays.",registers:o,labelNames:i,aggregator:"average"}),m=new ku({name:t+Eue,help:"The 99th percentile of the recorded event loop delays.",registers:o,labelNames:i,aggregator:"average"})};YO.exports.metricNames=[mue,gue,yue,wue,bue,_ue,vue,Eue]});var _5=O((Hzt,Sue)=>{"use strict";function yze(r){let e={};for(let t=0;t<r.length;t++){let n=r[t];!n||typeof n.constructor>"u"||(Object.hasOwnProperty.call(e,n.constructor.name)?e[n.constructor.name]+=1:e[n.constructor.name]=1)}return e}function wze(r,e,t){r.reset();for(let n in e)r.set(Object.assign({type:n},t||{}),e[n])}Sue.exports={aggregateByObjectName:yze,updateMetrics:wze}});var Cue=O((Wzt,XO)=>{"use strict";var{aggregateByObjectName:bze}=_5(),{updateMetrics:_ze}=_5(),Tue=Eo(),Iue="nodejs_active_handles",Aue="nodejs_active_handles_total";XO.exports=(r,e={})=>{if(typeof process._getActiveHandles!="function")return;let t=r?[r]:void 0,n=e.prefix?e.prefix:"",i=e.labels?e.labels:{},o=Object.keys(i);new Tue({name:n+Iue,help:"Number of active libuv handles grouped by handle type. Every handle type is C++ class name.",labelNames:["type",...o],registers:t,collect(){let s=process._getActiveHandles();_ze(this,bze(s),i)}}),new Tue({name:n+Aue,help:"Total number of active handles.",registers:t,labelNames:o,collect(){let s=process._getActiveHandles();this.set(i,s.length)}})};XO.exports.metricNames=[Iue,Aue]});var Due=O((Yzt,QO)=>{"use strict";var Rue=Eo(),{aggregateByObjectName:vze}=_5(),{updateMetrics:Eze}=_5(),kue="nodejs_active_requests",Pue="nodejs_active_requests_total";QO.exports=(r,e={})=>{if(typeof process._getActiveRequests!="function")return;let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new Rue({name:t+kue,help:"Number of active libuv requests grouped by request type. Every request type is C++ class name.",labelNames:["type",...i],registers:r?[r]:void 0,collect(){let o=process._getActiveRequests();Eze(this,vze(o),n)}}),new Rue({name:t+Pue,help:"Total number of active requests.",registers:r?[r]:void 0,labelNames:i,collect(){let o=process._getActiveRequests();this.set(n,o.length)}})};QO.exports.metricNames=[kue,Pue]});var Bue=O((Xzt,ZO)=>{"use strict";var Nue=Eo(),{updateMetrics:xze}=_5(),Oue="nodejs_active_resources",Lue="nodejs_active_resources_total";ZO.exports=(r,e={})=>{if(typeof process.getActiveResourcesInfo!="function")return;let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new Nue({name:t+Oue,help:"Number of active resources that are currently keeping the event loop alive, grouped by async resource type.",labelNames:["type",...i],registers:r?[r]:void 0,collect(){let o=process.getActiveResourcesInfo(),s={};for(let a=0;a<o.length;a++){let c=o[a];Object.hasOwn(s,c)?s[c]+=1:s[c]=1}xze(this,s,n)}}),new Nue({name:t+Lue,help:"Total number of active resources.",registers:r?[r]:void 0,labelNames:i,collect(){let o=process.getActiveResourcesInfo();this.set(n,o.length)}})};ZO.exports.metricNames=[Oue,Lue]});var Vue=O((Qzt,eL)=>{"use strict";var JO=Eo(),Sze=jO(),Mue="nodejs_heap_size_total_bytes",Uue="nodejs_heap_size_used_bytes",Fue="nodejs_external_memory_bytes";eL.exports=(r,e={})=>{if(typeof process.memoryUsage!="function")return;let t=e.labels?e.labels:{},n=Object.keys(t),i=r?[r]:void 0,o=e.prefix?e.prefix:"",s=()=>{let l=Sze();l&&(a.set(t,l.heapTotal),c.set(t,l.heapUsed),l.external!==void 0&&u.set(t,l.external))},a=new JO({name:o+Mue,help:"Process heap size from Node.js in bytes.",registers:i,labelNames:n,collect:s}),c=new JO({name:o+Uue,help:"Process heap size used from Node.js in bytes.",registers:i,labelNames:n}),u=new JO({name:o+Fue,help:"Node.js external memory size in bytes.",registers:i,labelNames:n})};eL.exports.metricNames=[Mue,Uue,Fue]});var que=O((Zzt,rL)=>{"use strict";var Tze=Eo(),Ize=require("v8"),zue=["total","used","available"],tL={};zue.forEach(r=>{tL[r]=`nodejs_heap_space_size_${r}_bytes`});rL.exports=(r,e={})=>{let t=r?[r]:void 0,n=e.prefix?e.prefix:"",i=e.labels?e.labels:{},o=["space",...Object.keys(i)],s={};zue.forEach(a=>{s[a]=new Tze({name:n+tL[a],help:`Process heap space size ${a} from Node.js in bytes.`,labelNames:o,registers:t})}),s.total.collect=()=>{for(let a of Ize.getHeapSpaceStatistics()){let c=a.space_name.substr(0,a.space_name.indexOf("_space"));s.total.set({space:c,...i},a.space_size),s.used.set({space:c,...i},a.space_used_size),s.available.set({space:c,...i},a.space_available_size)}}};rL.exports.metricNames=Object.values(tL)});var jue=O((Jzt,iL)=>{"use strict";var Aze=Eo(),$ue=process.version,nL=$ue.slice(1).split(".").map(Number),Kue="nodejs_version_info";iL.exports=(r,e={})=>{let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n);new Aze({name:t+Kue,help:"Node.js version info.",labelNames:["version","major","minor","patch",...i],registers:r?[r]:void 0,aggregator:"first",collect(){this.labels($ue,nL[0],nL[1],nL[2],...Object.values(n)).set(1)}})};iL.exports.metricNames=[Kue]});var Hue=O((eqt,oL)=>{"use strict";var Cze=RO(),w0;try{w0=require("perf_hooks")}catch{}var Gue="nodejs_gc_duration_seconds",Rze=[.001,.01,.1,1,2,5],v5=[];w0&&w0.constants&&(v5[w0.constants.NODE_PERFORMANCE_GC_MAJOR]="major",v5[w0.constants.NODE_PERFORMANCE_GC_MINOR]="minor",v5[w0.constants.NODE_PERFORMANCE_GC_INCREMENTAL]="incremental",v5[w0.constants.NODE_PERFORMANCE_GC_WEAKCB]="weakcb");oL.exports=(r,e={})=>{if(!w0)return;let t=e.prefix?e.prefix:"",n=e.labels?e.labels:{},i=Object.keys(n),o=e.gcDurationBuckets?e.gcDurationBuckets:Rze,s=new Cze({name:t+Gue,help:"Garbage collection duration by kind, one of major, minor, incremental or weakcb.",labelNames:["kind",...i],buckets:o,registers:r?[r]:void 0});new w0.PerformanceObserver(c=>{let u=c.getEntries()[0],l=u.detail?v5[u.detail.kind]:v5[u.kind];s.observe(Object.assign({kind:l},n),u.duration/1e3)}).observe({entryTypes:["gc"]})};oL.exports.metricNames=[Gue]});var Yue=O((tqt,sL)=>{"use strict";var{isObject:kze}=Q1(),Pze=J2e(),Dze=tue(),Nze=uue(),Oze=due(),Lze=hue(),Bze=xue(),Mze=Cue(),Uze=Due(),Fze=Bue(),Vze=Vue(),zze=que(),qze=jue(),$ze=Hue(),Wue={processCpuTotal:Pze,processStartTime:Dze,osMemoryHeap:Nze,processOpenFileDescriptors:Oze,processMaxFileDescriptors:Lze,eventLoopLag:Bze,...typeof process.getActiveResourcesInfo=="function"?{processResources:Fze}:{},processHandles:Mze,processRequests:Uze,heapSizeAndUsed:Vze,heapSpacesSizeAndUsed:zze,version:qze,gc:$ze},Kze=Object.keys(Wue);sL.exports=function(e){if(e!=null&&!kze(e))throw new TypeError("config must be null, undefined, or an object");e={eventLoopMonitoringPrecision:10,...e};for(let t of Object.values(Wue))t(e.register,e)};sL.exports.metricsList=Kze});var cL=O(aL=>{"use strict";var{Grouper:jze,hashObject:Gze}=Q1();function E5(r){return e=>{if(e.length===0)return;let t={help:e[0].help,name:e[0].name,type:e[0].type,values:[],aggregator:e[0].aggregator},n=new jze;return e.forEach(i=>{i.values.forEach(o=>{let s=Gze(o.labels);n.add(`${o.metricName}_${s}`,o)})}),n.forEach(i=>{if(i.length===0)return;let o={value:r(i),labels:i[0].labels};i[0].metricName&&(o.metricName=i[0].metricName),t.values.push(o)}),t}}aL.AggregatorFactory=E5;aL.aggregators={sum:E5(r=>r.reduce((e,t)=>e+t.value,0)),first:E5(r=>r[0].value),omit:()=>{},average:E5(r=>r.reduce((e,t)=>e+t.value,0)/r.length),min:E5(r=>r.reduce((e,t)=>Math.min(e,t.value),1/0)),max:E5(r=>r.reduce((e,t)=>Math.max(e,t.value),-1/0))}});var ele=O((nqt,Jue)=>{"use strict";var q_=q3(),{Grouper:Hze}=Q1(),{aggregators:Wze}=cL(),K3=()=>{let r=require("cluster");return K3=()=>r,r},Que="prom-client:getMetricsReq",uL="prom-client:getMetricsRes",Zue=[q_.globalRegistry],Yze=0,Xue=!1,lL=new Map,$_=class extends q_{constructor(){super(),Xze()}clusterMetrics(){let e=Yze++;return new Promise((t,n)=>{let i=!1;function o(c,u){i||(i=!0,c?n(c):t(u))}let s={responses:[],pending:0,done:o,errorTimeout:setTimeout(()=>{let c=new Error("Operation timed out.");s.done(c)},5e3)};lL.set(e,s);let a={type:Que,requestId:e};for(let c in K3().workers)K3().workers[c].isConnected()&&(K3().workers[c].send(a),s.pending++);s.pending===0&&(clearTimeout(s.errorTimeout),process.nextTick(()=>o(null,"")))})}static aggregate(e){let t=new q_,n=new Hze;return e.forEach(i=>{i.forEach(o=>{n.add(o.name,o)})}),n.forEach(i=>{let o=i[0].aggregator,s=Wze[o];if(typeof s!="function")throw new Error(`'${o}' is not a defined aggregator.`);let a=s(i);if(a){let c=Object.assign({get:()=>a},a);t.registerMetric(c)}}),t}static setRegistries(e){Array.isArray(e)||(e=[e]),e.forEach(t=>{if(!(t instanceof q_))throw new TypeError(`Expected Registry, got ${typeof t}`)}),Zue=e}};function Xze(){Xue||(Xue=!0,K3().isMaster&&K3().on("message",(r,e)=>{if(e.type===uL){let t=lL.get(e.requestId);if(e.error){t.done(new Error(e.error));return}if(e.metrics.forEach(n=>t.responses.push(n)),t.pending--,t.pending===0){lL.delete(e.requestId),clearTimeout(t.errorTimeout);let i=$_.aggregate(t.responses).metrics();t.done(null,i)}}}),K3().isWorker&&process.on("message",r=>{r.type===Que&&Promise.all(Zue.map(e=>e.getMetricsAsJSON())).then(e=>{process.send({type:uL,requestId:r.requestId,metrics:e})}).catch(e=>{process.send({type:uL,requestId:r.requestId,error:e.message})})}))}Jue.exports=$_});var x5=O(Ji=>{"use strict";Ji.register=q3().globalRegistry;Ji.Registry=q3();Ji.contentType=q3().globalRegistry.contentType;Ji.validateMetricName=$3().validateMetricName;Ji.Counter=vO();Ji.Gauge=Eo();Ji.Histogram=RO();Ji.Summary=H2e();Ji.Pushgateway=Y2e();Ji.linearBuckets=FO().linearBuckets;Ji.exponentialBuckets=FO().exponentialBuckets;Ji.collectDefaultMetrics=Yue();Ji.aggregators=cL().aggregators;Ji.AggregatorRegistry=ele()});var fL=O((Lqt,ule)=>{"use strict";var S5=new Map,Qze=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function Zze(r,e,t){for(;S5.get(t);){try{await r()}catch(n){setTimeout(()=>{throw n},1);break}if(!S5.get(t))break;await new Promise(n=>{let i=setTimeout(n,e);S5.set(t,i)})}}function Jze(r,e,t){t=t||e;let n=Qze(),i=setTimeout(()=>{Zze(r,e,n)},t);return S5.set(n,i),n}function eqe(r){let e=S5.get(r);e&&(clearTimeout(e),S5.delete(r))}ule.exports={setDelayedInterval:Jze,clearDelayedInterval:eqe}});var ip=O((l$t,mle)=>{mle.exports=class{constructor(e={}){this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration=typeof e>"u"?1:e}get msDuration(){return this.duration*1e3}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration=typeof e>"u"?0:e}get msBlockDuration(){return this.blockDuration*1e3}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly=typeof e>"u"?!1:!!e}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs=typeof e>"u"?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if(typeof e>"u"&&(e="rlflx"),typeof e!="string")throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(e={}){return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}}});var yle=O((f$t,gle)=>{gle.exports=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){let e=Date.now();Object.keys(this._keys).forEach(t=>{this._keys[t]<=e&&delete this._keys[t]}),this._addedKeysAmount=Object.keys(this._keys).length}add(e,t){this.addMs(e,t*1e3)}addMs(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){let t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();let n=Date.now();return t>=n?t-n:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach(t=>{delete this._keys[t]})}}});var ble=O((h$t,wle)=>{var iqe=yle();wle.exports=iqe});var ss=O((m$t,_le)=>{_le.exports=class{constructor(e,t,n,i){this.remainingPoints=typeof e>"u"?0:e,this.msBeforeNext=typeof t>"u"?0:t,this.consumedPoints=typeof n>"u"?0:n,this.isFirstInDuration=typeof i>"u"?!1:i}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=!!e}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}}});var T5=O((y$t,Ele)=>{var pL=ip(),oqe=ble(),vle=ss();Ele.exports=class extends pL{constructor(e={}){super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed||e.inmemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration||e.inmemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new oqe}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("storeClient is not set");this._client=e}_afterConsume(e,t,n,i,o,s={}){let a=this._getRateLimiterRes(n,i,o);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&a.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(n,a.msBeforeNext),a.consumedPoints>this.points?t(a):e(a);if(a.consumedPoints>this.points){let c=Promise.resolve();this.blockDuration>0&&a.consumedPoints<=this.points+i&&(a.msBeforeNext=this.msBlockDuration,c=this._block(n,a.consumedPoints,this.msBlockDuration,s)),this.inMemoryBlockOnConsumed>0&&a.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(n,this.inMemoryBlockDuration),a.msBeforeNext=this.msInMemoryBlockDuration),c.then(()=>{t(a)}).catch(u=>{t(u)})}else if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let c=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));c<this.execEvenlyMinDelayMs&&(c=a.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,c,a)}else e(a)}_handleError(e,t,n,i,o,s=!1,a={}){this.insuranceLimiter instanceof pL?this.insuranceLimiter[t](o,s,a).then(c=>{n(c)}).catch(c=>{i(c)}):i(e)}get _inmemoryBlockedKeys(){return this._inMemoryBlockedKeys}getInmemoryBlockMsBeforeExpire(e){return this.getInMemoryBlockMsBeforeExpire(e)}get inmemoryBlockOnConsumed(){return this.inMemoryBlockOnConsumed}set inmemoryBlockOnConsumed(e){this.inMemoryBlockOnConsumed=e}get inmemoryBlockDuration(){return this.inMemoryBlockDuration}set inmemoryBlockDuration(e){this.inMemoryBlockDuration=e}get msInmemoryBlockDuration(){return this.inMemoryBlockDuration*1e3}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&this.inMemoryBlockOnConsumed===0)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return this._inMemoryBlockDuration*1e3}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if(typeof e<"u"&&!(e instanceof pL))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,t,n={}){let i=t*1e3;return this._block(this.getKey(e),this.points+1,i,n)}set(e,t,n,i={}){let o=(n>=0?n:this.duration)*1e3;return this._block(this.getKey(e),t,o,i)}consume(e,t=1,n={}){return new Promise((i,o)=>{let s=this.getKey(e),a=this.getInMemoryBlockMsBeforeExpire(s);if(a>0)return o(new vle(0,a));this._upsert(s,t,this._getKeySecDuration(n)*1e3,!1,n).then(c=>{this._afterConsume(i,o,s,t,c)}).catch(c=>{this._handleError(c,"consume",i,o,e,t,n)})})}penalty(e,t=1,n={}){let i=this.getKey(e);return new Promise((o,s)=>{this._upsert(i,t,this._getKeySecDuration(n)*1e3,!1,n).then(a=>{o(this._getRateLimiterRes(i,t,a))}).catch(a=>{this._handleError(a,"penalty",o,s,e,t,n)})})}reward(e,t=1,n={}){let i=this.getKey(e);return new Promise((o,s)=>{this._upsert(i,-t,this._getKeySecDuration(n)*1e3,!1,n).then(a=>{o(this._getRateLimiterRes(i,-t,a))}).catch(a=>{this._handleError(a,"reward",o,s,e,t,n)})})}get(e,t={}){let n=this.getKey(e);return new Promise((i,o)=>{this._get(n,t).then(s=>{i(s===null||typeof s>"u"?null:this._getRateLimiterRes(n,0,s))}).catch(s=>{this._handleError(s,"get",i,o,e,t)})})}delete(e,t={}){let n=this.getKey(e);return new Promise((i,o)=>{this._delete(n,t).then(s=>{this._inMemoryBlockedKeys.delete(n),i(s)}).catch(s=>{this._handleError(s,"delete",i,o,e,t)})})}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,t,n){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,t,n,i={}){return new Promise((o,s)=>{this._upsert(e,t,n,!0,i).then(()=>{o(new vle(0,n>0?n:-1,t))}).catch(a=>{this._handleError(a,"block",o,s,this.parseKey(e),n/1e3,i)})})}_get(e,t={}){throw new Error("You have to implement the method '_get'!")}_delete(e,t={}){throw new Error("You have to implement the method '_delete'!")}_upsert(e,t,n,i=!1,o={}){throw new Error("You have to implement the method '_upsert'!")}}});var Tle=O((w$t,Sle)=>{var sqe=T5(),aqe=ss(),xle="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ",mL=class extends sqe{constructor(e){super(e),e.redis?this.client=e.redis:this.client=e.storeClient,this._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,typeof this.client.defineCommand=="function"&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:xle})}_isRedisReady(){return this._rejectIfRedisNotReady?!(this.client.status&&this.client.status!=="ready"||typeof this.client.isReady=="function"&&!this.client.isReady()):!0}_getRateLimiterRes(e,t,n){let[i,o]=n;Array.isArray(i)&&([,i]=i,[,o]=o);let s=new aqe;return s.consumedPoints=parseInt(i),s.isFirstInDuration=s.consumedPoints===t,s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s.msBeforeNext=o,s}_upsert(e,t,n,i=!1){return new Promise((o,s)=>{if(!this._isRedisReady())return s(new Error("Redis connection is not ready"));let a=Math.floor(n/1e3),c=this.client.multi();if(i)a>0?c.set(e,t,"EX",a):c.set(e,t),c.pttl(e).exec((u,l)=>u?s(u):o(l));else if(a>0){let u=function(l,d){return l?s(l):o(d)};typeof this.client.rlflxIncr=="function"?this.client.rlflxIncr(e,t,a,u):this.client.eval(xle,1,e,t,a,u)}else c.incrby(e,t).pttl(e).exec((u,l)=>u?s(u):o(l))})}_get(e){return new Promise((t,n)=>{if(!this._isRedisReady())return n(new Error("Redis connection is not ready"));this.client.multi().get(e).pttl(e).exec((i,o)=>{if(i)n(i);else{let[s]=o;if(s===null)return t(null);t(o)}})})}_delete(e){return new Promise((t,n)=>{this.client.del(e,(i,o)=>{i?n(i):t(o>0)})})}};Sle.exports=mL});var Cle=O((b$t,Ale)=>{var cqe=T5(),uqe=ss();function Ile(r){try{let e=r.client?r.client:r,{version:t}=e.topology.s.options.metadata.driver,n=t.split(".").map(i=>parseInt(i));return{major:n[0],feature:n[1],patch:n[2]}}catch{return{major:0,feature:0,patch:0}}}var gL=class r extends cqe{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,typeof this.client.then=="function"?this.client.then(t=>{this.client=t,this._initCollection(),this._driverVersion=Ile(this.client)}):(this._initCollection(),this._driverVersion=Ile(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?r.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){let t=(typeof this.client.db=="function"?this.client.db(this.dbName):this.client).collection(this.tableName);t.createIndex({expire:-1},{expireAfterSeconds:0}),t.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=t}_getRateLimiterRes(e,t,n){let i=new uqe,o;return typeof n.value>"u"?o=n:o=n.value,i.isFirstInDuration=o.points===t,i.consumedPoints=o.points,i.remainingPoints=Math.max(this.points-i.consumedPoints,0),i.msBeforeNext=o.expire!==null?Math.max(new Date(o.expire).getTime()-Date.now(),0):-1,i}_upsert(e,t,n,i=!1,o={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));let s=o.attrs||{},a,c;i?(a={key:e},a=Object.assign(a,s),c={$set:{key:e,points:t,expire:n>0?new Date(Date.now()+n):null}},c.$set=Object.assign(c.$set,s)):(a={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},a=Object.assign(a,s),c={$setOnInsert:{key:e,expire:n>0?new Date(Date.now()+n):null},$inc:{points:t}},c.$setOnInsert=Object.assign(c.$setOnInsert,s));let u={upsert:!0};return this._driverVersion.major>=4||this._driverVersion.major===3&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?u.returnDocument="after":u.returnOriginal=!1,new Promise((l,d)=>{this._collection.findOneAndUpdate(a,c,u).then(h=>{l(h)}).catch(h=>{if(h&&h.code===11e3){let f=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},s),m={$set:Object.assign({key:e,points:t,expire:n>0?new Date(Date.now()+n):null},s)};this._collection.findOneAndUpdate(f,m,u).then(w=>{l(w)}).catch(w=>{w&&w.code===11e3?this._upsert(e,t,n,i).then(_=>l(_)).catch(_=>d(_)):d(w)})}else d(h)})})}_get(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));let n=t.attrs||{},i=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},n);return this._collection.findOne(i)}_delete(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));let n=t.attrs||{},i=Object.assign({key:e},n);return this._collection.deleteOne(i).then(o=>o.deletedCount>0)}};Ale.exports=gL});var kle=O((_$t,Rle)=>{var lqe=T5(),dqe=ss(),yL=class extends lqe{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()):this._createDbAndTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()}).catch(n=>{if(typeof t=="function")t(n);else throw n})}clearExpired(e){return new Promise(t=>{this._getConnection().then(n=>{n.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],()=>{this._releaseConnection(n),t()})}).catch(()=>{t()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise((e,t)=>{this.client.getConnection((n,i)=>{if(n)return t(n);e(i)})});case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise((e,t)=>{this._getConnection().then(n=>{n.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,i=>{if(i)return this._releaseConnection(n),t(i);n.query(this._getCreateTableStmt(),o=>{if(o)return this._releaseConnection(n),t(o);this._releaseConnection(n),e()})})}).catch(n=>{t(n)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(e){if(typeof e>"u")if(this.client.constructor.name==="Connection")e="connection";else if(this.client.constructor.name==="Pool")e="pool";else if(this.client.constructor.name==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,t,n){let i=new dqe,[o]=n;return i.isFirstInDuration=t===o.points,i.consumedPoints=i.isFirstInDuration?t:o.points,i.remainingPoints=Math.max(this.points-i.consumedPoints,0),i.msBeforeNext=o.expire?Math.max(o.expire-Date.now(),0):-1,i}_upsertTransaction(e,t,n,i,o){return new Promise((s,a)=>{e.query("BEGIN",c=>{if(c)return e.rollback(),a(c);let u=Date.now(),l=i>0?u+i:null,d,h;o?(d=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = ?, 
            expire = ?;`,h=[this.dbName,this.tableName,t,n,l,n,l]):(d=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = IF(expire <= ?, ?, points + (?)), 
            expire = IF(expire <= ?, ?, expire);`,h=[this.dbName,this.tableName,t,n,l,u,n,n,u,l]),e.query(d,h,f=>{if(f)return e.rollback(),a(f);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,t],(m,w)=>{if(m)return e.rollback(),a(m);e.query("COMMIT",_=>{if(_)return e.rollback(),a(_);s(w)})})})})})}_upsert(e,t,n,i=!1){return this.tableCreated?new Promise((o,s)=>{this._getConnection().then(a=>{this._upsertTransaction(a,e,t,n,i).then(c=>{o(c),this._releaseConnection(a)}).catch(c=>{s(c),this._releaseConnection(a)})}).catch(a=>{s(a)})}):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise((t,n)=>{this._getConnection().then(i=>{i.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],(o,s)=>{o?n(o):s.length===0?t(null):t(s),this._releaseConnection(i)})}).catch(i=>{n(i)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise((t,n)=>{this._getConnection().then(i=>{i.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],(o,s)=>{o?n(o):t(s.affectedRows>0),this._releaseConnection(i)})}).catch(i=>{n(i)})}):Promise.reject(Error("Table is not created yet"))}};Rle.exports=yL});var Dle=O((v$t,Ple)=>{var fqe=T5(),hqe=ss(),wL=class extends fqe{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?typeof t=="function"&&t():this._createTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()}).catch(n=>{if(typeof t=="function")t(n);else throw n})}clearExpired(e){return new Promise(t=>{let n={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[e]};this._query(n).then(()=>{t()}).catch(()=>{t()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master);default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);case"typeorm":return!0;default:return!0}}_createTable(){return new Promise((e,t)=>{this._query({text:this._getCreateTableStmt()}).then(()=>{e()}).catch(n=>{n.code==="23505"?e():t(n)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( 
      key varchar(255) PRIMARY KEY,
      points integer NOT NULL DEFAULT 0,
      expire bigint
    );`}get clientType(){return this._clientType}set clientType(e){let t=this.client.constructor.name;if(typeof e>"u")if(t==="Client")e="client";else if(t==="Pool"||t==="BoundPool")e="pool";else if(t==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,t,n){let i=new hqe,o=n.rows[0];return i.isFirstInDuration=t===o.points,i.consumedPoints=i.isFirstInDuration?t:o.points,i.remainingPoints=Math.max(this.points-i.consumedPoints,0),i.msBeforeNext=o.expire?Math.max(o.expire-Date.now(),0):-1,i}_query(e){let n={name:`${this.tableName.toLowerCase()}:${e.name}`,text:e.text,values:e.values};return new Promise((i,o)=>{this._getConnection().then(s=>{s.query(n).then(a=>{i(a),this._releaseConnection(s)}).catch(a=>{o(a),this._releaseConnection(s)})}).catch(s=>{o(s)})})}_upsert(e,t,n,i=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));let o=n>0?Date.now()+n:null,s=i?" $3 ":` CASE
             WHEN ${this.tableName}.expire <= $4 THEN $3
             ELSE ${this.tableName}.expire
            END `;return this._query({name:i?"rlflx-upsert-force":"rlflx-upsert",text:`
            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)
              ON CONFLICT(key) DO UPDATE SET
                points = CASE
                          WHEN (${this.tableName}.expire <= $4 OR 1=${i?1:0}) THEN $2
                          ELSE ${this.tableName}.points + ($2)
                         END,
                expire = ${s}
            RETURNING points, expire;`,values:[e,t,o,Date.now()]})}_get(e){return this.tableCreated?new Promise((t,n)=>{this._query({name:"rlflx-get",text:`
            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[e,Date.now()]}).then(i=>{i.rowCount===0&&(i=null),t(i)}).catch(i=>{n(i)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[e]}).then(t=>t.rowCount>0):Promise.reject(Error("Table is not created yet"))}};Ple.exports=wL});var Ole=O((x$t,Nle)=>{Nle.exports=class{constructor(e,t,n=null){this.value=e,this.expiresAt=t,this.timeoutId=n}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){!(e instanceof Date)&&Number.isInteger(e)&&(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}}});var Ble=O((T$t,Lle)=>{var pqe=Ole(),bL=ss();Lle.exports=class{constructor(){this._storage={}}incrby(e,t,n){if(this._storage[e]){let i=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return i!==0?(this._storage[e].value=this._storage[e].value+t,new bL(0,i,this._storage[e].value,!1)):this.set(e,t,n)}return this.set(e,t,n)}set(e,t,n){let i=n*1e3;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new pqe(t,i>0?new Date(Date.now()+i):null),i>0&&(this._storage[e].timeoutId=setTimeout(()=>{delete this._storage[e]},i),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new bL(0,i===0?-1:i,this._storage[e].value,!0)}get(e){if(this._storage[e]){let t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return new bL(0,t,this._storage[e].value,!1)}return null}delete(e){return this._storage[e]?(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0):!1}}});var vL=O((I$t,Ule)=>{var mqe=ip(),gqe=Ble(),Mle=ss(),_L=class extends mqe{constructor(e={}){super(e),this._memoryStorage=new gqe}consume(e,t=1,n={}){return new Promise((i,o)=>{let s=this.getKey(e),a=this._getKeySecDuration(n),c=this._memoryStorage.incrby(s,t,a);if(c.remainingPoints=Math.max(this.points-c.consumedPoints,0),c.consumedPoints>this.points)this.blockDuration>0&&c.consumedPoints<=this.points+t&&(c=this._memoryStorage.set(s,c.consumedPoints,this.blockDuration)),o(c);else if(this.execEvenly&&c.msBeforeNext>0&&!c.isFirstInDuration){let u=Math.ceil(c.msBeforeNext/(c.remainingPoints+2));u<this.execEvenlyMinDelayMs&&(u=c.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(i,u,c)}else i(c)})}penalty(e,t=1,n={}){let i=this.getKey(e);return new Promise(o=>{let s=this._getKeySecDuration(n),a=this._memoryStorage.incrby(i,t,s);a.remainingPoints=Math.max(this.points-a.consumedPoints,0),o(a)})}reward(e,t=1,n={}){let i=this.getKey(e);return new Promise(o=>{let s=this._getKeySecDuration(n),a=this._memoryStorage.incrby(i,-t,s);a.remainingPoints=Math.max(this.points-a.consumedPoints,0),o(a)})}block(e,t){let n=t*1e3,i=this.points+1;return this._memoryStorage.set(this.getKey(e),i,t),Promise.resolve(new Mle(0,n===0?-1:n,i))}set(e,t,n){let i=(n>=0?n:this.duration)*1e3;return this._memoryStorage.set(this.getKey(e),t,n),Promise.resolve(new Mle(0,i===0?-1:i,t))}get(e){let t=this._memoryStorage.get(this.getKey(e));return t!==null&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}};Ule.exports=_L});var jle=O((A$t,Kle)=>{var Fle=require("cluster"),yqe=require("crypto"),wqe=ip(),zle=vL(),bqe=ss(),Qs="rate_limiter_flexible",C5=null,Vle=function(r,e,t,n){let i;n===null||n===!0||n===!1?i=n:i={remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},r.send({channel:Qs,keyPrefix:e.keyPrefix,promiseId:e.promiseId,type:t,data:i})},qle=function(r){setTimeout(()=>{this._initiated?process.send(r):typeof this._promises[r.promiseId]<"u"&&qle.call(this,r)},30)},I5=function(r,e,t,n,i){let o={channel:Qs,keyPrefix:this.keyPrefix,func:r,promiseId:e,data:{key:t,arg:n,opts:i}};this._initiated?process.send(o):qle.call(this,o)},$le=function(r,e){if(!e||e.channel!==Qs||typeof this._rateLimiters[e.keyPrefix]>"u")return!1;let t;switch(e.func){case"consume":t=this._rateLimiters[e.keyPrefix].consume(e.data.key,e.data.arg,e.data.opts);break;case"penalty":t=this._rateLimiters[e.keyPrefix].penalty(e.data.key,e.data.arg,e.data.opts);break;case"reward":t=this._rateLimiters[e.keyPrefix].reward(e.data.key,e.data.arg,e.data.opts);break;case"block":t=this._rateLimiters[e.keyPrefix].block(e.data.key,e.data.arg,e.data.opts);break;case"get":t=this._rateLimiters[e.keyPrefix].get(e.data.key,e.data.opts);break;case"delete":t=this._rateLimiters[e.keyPrefix].delete(e.data.key,e.data.opts);break;default:return!1}t&&t.then(n=>{Vle(r,e,"resolve",n)}).catch(n=>{Vle(r,e,"reject",n)})},_qe=function(r){if(!r||r.channel!==Qs||r.keyPrefix!==this.keyPrefix)return!1;if(this._promises[r.promiseId]){clearTimeout(this._promises[r.promiseId].timeoutId);let e;switch(r.data===null||r.data===!0||r.data===!1?e=r.data:e=new bqe(r.data.remainingPoints,r.data.msBeforeNext,r.data.consumedPoints,r.data.isFirstInDuration),r.type){case"resolve":this._promises[r.promiseId].resolve(e);break;case"reject":this._promises[r.promiseId].reject(e);break;default:throw new Error(`RateLimiterCluster: no such message type '${r.type}'`)}delete this._promises[r.promiseId]}},vqe=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},A5=function(r,e){let t=process.hrtime(),n=t[0].toString()+t[1].toString();return typeof this._promises[n]<"u"&&(n+=yqe.randomBytes(12).toString("base64")),this._promises[n]={resolve:r,reject:e,timeoutId:setTimeout(()=>{delete this._promises[n],e(new Error("RateLimiterCluster timeout: no answer from master in time"))},this.timeoutMs)},n},EL=class{constructor(){if(C5)return C5;this._rateLimiters={},Fle.setMaxListeners(0),Fle.on("message",(e,t)=>{t&&t.channel===Qs&&t.type==="init"?(typeof this._rateLimiters[t.opts.keyPrefix]>"u"&&(this._rateLimiters[t.opts.keyPrefix]=new zle(t.opts)),e.send({channel:Qs,type:"init",keyPrefix:t.opts.keyPrefix})):$le.call(this,e,t)}),C5=this}},xL=class{constructor(e){if(C5)return C5;this._rateLimiters={},e.launchBus((t,n)=>{n.on("process:msg",i=>{let o=i.raw;if(o&&o.channel===Qs&&o.type==="init")typeof this._rateLimiters[o.opts.keyPrefix]>"u"&&(this._rateLimiters[o.opts.keyPrefix]=new zle(o.opts)),e.sendDataToProcessId(i.process.pm_id,{data:{},topic:Qs,channel:Qs,type:"init",keyPrefix:o.opts.keyPrefix},(s,a)=>{s&&console.log(s,a)});else{let s={send:a=>{let c=a;c.topic=Qs,typeof c.data>"u"&&(c.data={}),e.sendDataToProcessId(i.process.pm_id,c,(u,l)=>{u&&console.log(u,l)})}};$le.call(this,s,o)}})}),C5=this}},SL=class extends wqe{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs=typeof e>"u"?5e3:Math.abs(parseInt(e))}constructor(e={}){super(e),process.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process.on("message",t=>{t&&t.channel===Qs&&t.type==="init"&&t.keyPrefix===this.keyPrefix?this._initiated=!0:_qe.call(this,t)}),process.send({channel:Qs,type:"init",opts:vqe.call(this)}),this._promises={}}consume(e,t=1,n={}){return new Promise((i,o)=>{let s=A5.call(this,i,o);I5.call(this,"consume",s,e,t,n)})}penalty(e,t=1,n={}){return new Promise((i,o)=>{let s=A5.call(this,i,o);I5.call(this,"penalty",s,e,t,n)})}reward(e,t=1,n={}){return new Promise((i,o)=>{let s=A5.call(this,i,o);I5.call(this,"reward",s,e,t,n)})}block(e,t,n={}){return new Promise((i,o)=>{let s=A5.call(this,i,o);I5.call(this,"block",s,e,t,n)})}get(e,t={}){return new Promise((n,i)=>{let o=A5.call(this,n,i);I5.call(this,"get",o,e,t)})}delete(e,t={}){return new Promise((n,i)=>{let o=A5.call(this,n,i);I5.call(this,"delete",o,e,t)})}};Kle.exports={RateLimiterClusterMaster:EL,RateLimiterClusterMasterPM2:xL,RateLimiterCluster:SL}});var Hle=O((C$t,Gle)=>{var Eqe=T5(),xqe=ss(),TL=class extends Eqe{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,t,n){let i=new xqe;return i.consumedPoints=parseInt(n.consumedPoints),i.isFirstInDuration=n.consumedPoints===t,i.remainingPoints=Math.max(this.points-i.consumedPoints,0),i.msBeforeNext=n.msBeforeNext,i}_upsert(e,t,n,i=!1,o={}){return new Promise((s,a)=>{let c=Date.now(),u=Math.floor(n/1e3);i?this.client.set(e,t,u,l=>{l?a(l):this.client.set(`${e}_expire`,u>0?c+u*1e3:-1,u,()=>{let d={consumedPoints:t,msBeforeNext:u>0?u*1e3:-1};s(d)})}):this.client.incr(e,t,(l,d)=>{l||d===!1?this.client.add(e,t,u,(h,f)=>{if(h||!f)if(typeof o.attemptNumber>"u"||o.attemptNumber<3){let m=Object.assign({},o);m.attemptNumber=m.attemptNumber?m.attemptNumber+1:1,this._upsert(e,t,n,i,m).then(w=>s(w)).catch(w=>a(w))}else a(new Error("Can not add key"));else this.client.add(`${e}_expire`,u>0?c+u*1e3:-1,u,()=>{let m={consumedPoints:t,msBeforeNext:u>0?u*1e3:-1};s(m)})}):this.client.get(`${e}_expire`,(h,f)=>{if(h)a(h);else{let m=f===!1?0:f,w={consumedPoints:d,msBeforeNext:m>=0?Math.max(m-c,0):-1};s(w)}})})})}_get(e){return new Promise((t,n)=>{let i=Date.now();this.client.get(e,(o,s)=>{s?this.client.get(`${e}_expire`,(a,c)=>{if(a)n(a);else{let u=c===!1?0:c,l={consumedPoints:s,msBeforeNext:u>=0?Math.max(u-i,0):-1};t(l)}}):t(null)})})}_delete(e){return new Promise((t,n)=>{this.client.del(e,(i,o)=>{i?n(i):o===!1?t(o):this.client.del(`${e}_expire`,s=>{s?n(s):t(o)})})})}};Gle.exports=TL});var Xle=O((k$t,Yle)=>{var Wle=ss();Yle.exports=class{constructor(e={}){this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if(typeof e>"u")throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway=typeof e>"u"?!1:e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new Wle(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new Wle(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e,t=1){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.rejectBlack()),typeof n>"u"?this.limiter.consume(e,t):(this.runActionAnyway&&this.limiter.consume(e,t).catch(()=>{}),n)}block(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),typeof n>"u"?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch(()=>{}),n)}penalty(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),typeof n>"u"?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch(()=>{}),n)}reward(e,t){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),typeof n>"u"?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch(()=>{}),n)}get(e){let t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),typeof t>"u"||this.runActionAnyway?this.limiter.get(e):t}delete(e){return this.limiter.delete(e)}}});var Zle=O((D$t,Qle)=>{var Sqe=ip();Qle.exports=class{constructor(...e){if(e.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");e.forEach(t=>{if(!(t instanceof Sqe))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")}),this._limiters=e}consume(e,t=1){return new Promise((n,i)=>{let o=[];this._limiters.forEach(s=>{o.push(s.consume(e,t).catch(a=>({rejected:!0,rej:a})))}),Promise.all(o).then(s=>{let a={},c=!1;s.forEach(u=>{u.rejected===!0&&(c=!0)});for(let u=0;u<s.length;u++)c&&s[u].rejected===!0?a[this._limiters[u].keyPrefix]=s[u].rej:c||(a[this._limiters[u].keyPrefix]=s[u]);c?i(a):n(a)})})}}});var e3e=O((O$t,Jle)=>{Jle.exports=class extends Error{constructor(e,t){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,t&&(this.extra=t)}}});var i3e=O((B$t,n3e)=>{var t3e=e3e(),r3e=4294967295,IL="limiter";n3e.exports=class{constructor(e,t={maxQueueSize:r3e}){this._queueLimiters={KEY_DEFAULT:new ov(e,t)},this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(e=IL){return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e,t=IL){return this._queueLimiters[t]||(this._queueLimiters[t]=new ov(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}};var ov=class{constructor(e,t={maxQueueSize:r3e,key:IL}){this._key=t.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then(e=>e!==null?e.remainingPoints:this._limiterFlexible.points)}removeTokens(e){let t=this;return new Promise((n,i)=>{if(e>t._limiterFlexible.points){i(new t3e(`Requested tokens ${e} exceeds maximum ${t._limiterFlexible.points} tokens per interval`));return}t._queue.length>0?t._queueRequest.call(t,n,i,e):t._limiterFlexible.consume(t._key,e).then(o=>{n(o.remainingPoints)}).catch(o=>{o instanceof Error?i(o):(t._queueRequest.call(t,n,i,e),t._waitTimeout===null&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),o.msBeforeNext)))})})}_queueRequest(e,t,n){let i=this;i._queue.length<i._maxQueueSize?i._queue.push({resolve:e,reject:t,tokens:n}):t(new t3e(`Number of requests reached it's maximum ${i._maxQueueSize}`))}_processFIFO(){let e=this;if(e._waitTimeout!==null&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),e._queue.length===0)return;let t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then(n=>{t.resolve(n.remainingPoints),e._processFIFO.call(e)}).catch(n=>{n instanceof Error?(t.reject(n),e._processFIFO.call(e)):(e._queue.unshift(t),e._waitTimeout===null&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),n.msBeforeNext)))})}}});var s3e=O((U$t,o3e)=>{var AL=ss();o3e.exports=class{constructor(e,t){this._rateLimiter=e,this._burstLimiter=t}_combineRes(e,t){return e?new AL(e.remainingPoints,Math.min(e.msBeforeNext,t?t.msBeforeNext:0),e.consumedPoints,e.isFirstInDuration):null}consume(e,t=1,n={}){return this._rateLimiter.consume(e,t,n).catch(i=>i instanceof AL?this._burstLimiter.consume(e,t,n).then(o=>Promise.resolve(this._combineRes(i,o))).catch(o=>o instanceof AL?Promise.reject(this._combineRes(i,o)):Promise.reject(o)):Promise.reject(i))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then(([t,n])=>this._combineRes(t,n))}get points(){return this._rateLimiter.points}}});var CL=O((F$t,a3e)=>{var Tqe=Tle(),Iqe=Cle(),Aqe=kle(),Cqe=Dle(),{RateLimiterClusterMaster:Rqe,RateLimiterClusterMasterPM2:kqe,RateLimiterCluster:Pqe}=jle(),Dqe=vL(),Nqe=Hle(),Oqe=Xle(),Lqe=Zle(),Bqe=i3e(),Mqe=s3e(),Uqe=ss();a3e.exports={RateLimiterRedis:Tqe,RateLimiterMongo:Iqe,RateLimiterMySQL:Aqe,RateLimiterPostgres:Cqe,RateLimiterMemory:Dqe,RateLimiterMemcache:Nqe,RateLimiterClusterMaster:Rqe,RateLimiterClusterMasterPM2:kqe,RateLimiterCluster:Pqe,RLWrapperBlackAndWhite:Oqe,RateLimiterUnion:Lqe,RateLimiterQueue:Bqe,BurstyRateLimiter:Mqe,RateLimiterRes:Uqe}});var v3e=O(up=>{(function(){var r,e,t,n,i,o,s,a;a=function(c){var u,l,d,h;return u=(c&255<<24)>>>24,l=(c&255<<16)>>>16,d=(c&65280)>>>8,h=c&255,[u,l,d,h].join(".")},s=function(c){var u,l,d,h,f,m;for(u=[],d=h=0;h<=3&&c.length!==0;d=++h){if(d>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}m=e(c),f=m[0],l=m[1],c=c.substring(l),u.push(f)}if(c.length!==0)throw new Error("Invalid IP");switch(u.length){case 1:if(u[0]>4294967295)throw new Error("Invalid IP");return u[0]>>>0;case 2:if(u[0]>255||u[1]>16777215)throw new Error("Invalid IP");return(u[0]<<24|u[1])>>>0;case 3:if(u[0]>255||u[1]>255||u[2]>65535)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2])>>>0;case 4:if(u[0]>255||u[1]>255||u[2]>255||u[3]>255)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2]<<8|u[3])>>>0;default:throw new Error("Invalid IP")}},t=function(c){return c.charCodeAt(0)},n=t("0"),o=t("a"),i=t("A"),e=function(c){var u,l,d,h,f;for(h=0,u=10,l="9",d=0,c.length>1&&c[d]==="0"&&(c[d+1]==="x"||c[d+1]==="X"?(d+=2,u=16):"0"<=c[d+1]&&c[d+1]<="9"&&(d++,u=8,l="7")),f=d;d<c.length;){if("0"<=c[d]&&c[d]<=l)h=h*u+(t(c[d])-n)>>>0;else if(u===16)if("a"<=c[d]&&c[d]<="f")h=h*u+(10+t(c[d])-o)>>>0;else if("A"<=c[d]&&c[d]<="F")h=h*u+(10+t(c[d])-i)>>>0;else break;else break;if(h>4294967295)throw new Error("too large");d++}if(d===f)throw new Error("empty octet");return[h,d]},r=function(){function c(u,l){var d,h,f,m;if(typeof u!="string")throw new Error("Missing `net' parameter");if(l||(m=u.split("/",2),u=m[0],l=m[1]),l||(l=32),typeof l=="string"&&l.indexOf(".")>-1){try{this.maskLong=s(l)}catch(w){throw d=w,new Error("Invalid mask: "+l)}for(h=f=32;f>=0;h=--f)if(this.maskLong===4294967295<<32-h>>>0){this.bitmask=h;break}}else if(l||l===0)this.bitmask=parseInt(l,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(s(u)&this.maskLong)>>>0}catch(w){throw d=w,new Error("Invalid net address: "+u)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+l);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return c.prototype.contains=function(u){return typeof u=="string"&&(u.indexOf("/")>0||u.split(".").length!==4)&&(u=new c(u)),u instanceof c?this.contains(u.base)&&this.contains(u.broadcast||u.last):(s(u)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},c.prototype.next=function(u){return u==null&&(u=1),new c(a(this.netLong+this.size*u),this.mask)},c.prototype.forEach=function(u){var l,d,h;for(h=s(this.first),d=s(this.last),l=0;h<=d;)u(a(h),h,l),l++,h++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),up.ip2long=s,up.long2ip=a,up.Netmask=r}).call(up)});var T3e=O((S3e,gv)=>{(function(r){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",t={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${s})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${s})|(?:::)(?:${s})?)${e}\\.${e}\\.${e}\\.${e}(${o})?$`,"i")};function c(f,m){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let w=0,_=-1,E=(f.match(a.zoneIndex)||[])[0],S,p;for(E&&(E=E.substring(1),f=f.replace(/%.+$/,""));(_=f.indexOf(":",_+1))>=0;)w++;if(f.substr(0,2)==="::"&&w--,f.substr(-2,2)==="::"&&w--,w>m)return null;for(p=m-w,S=":";p--;)S+="0:";return f=f.replace("::",S),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),m=function(){let g=f.split(":"),y=[];for(let b=0;b<g.length;b++)y.push(parseInt(g[b],16));return y}(),{parts:m,zoneId:E}}function u(f,m,w,_){if(f.length!==m.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let E=0,S;for(;_>0;){if(S=w-_,S<0&&(S=0),f[E]>>S!==m[E]>>S)return!1;_-=w,E+=1}return!0}function l(f){if(i.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function d(f,m){for(;f.length<m;)f=`0${f}`;return f}let h={};h.IPv4=function(){function f(m){if(m.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let w,_;for(w=0;w<m.length;w++)if(_=m[w],!(0<=_&&_<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=m}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,18,0,0]),15],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]],as112:[[new f([192,175,48,0]),24],[new f([192,31,196,0]),24]],amt:[[new f([192,52,193,0]),24]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(m,w){let _;if(w===void 0&&(_=m,m=_[0],w=_[1]),m.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,m.octets,8,w)},f.prototype.prefixLengthFromSubnetMask=function(){let m=0,w=!1,_={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},E,S,p;for(E=3;E>=0;E-=1)if(S=this.octets[E],S in _){if(p=_[S],w&&p!==0)return null;p!==8&&(w=!0),m+=p}else return null;return 32-m},f.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return h.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),h.IPv4.broadcastAddressFromCIDR=function(f){try{let m=this.parseCIDR(f),w=m[0].toByteArray(),_=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),E=[],S=0;for(;S<4;)E.push(parseInt(w[S],10)|parseInt(_[S],10)^255),S++;return new this(E)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.isIPv4=function(f){return this.parser(f)!==null},h.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},h.IPv4.isValidCIDR=function(f){try{return this.parseCIDR(f),!0}catch{return!1}},h.IPv4.isValidFourPartDecimal=function(f){return!!(h.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},h.IPv4.networkAddressFromCIDR=function(f){let m,w,_,E,S;try{for(m=this.parseCIDR(f),_=m[0].toByteArray(),S=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),E=[],w=0;w<4;)E.push(parseInt(_[w],10)&parseInt(S[w],10)),w++;return new this(E)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.parse=function(f){let m=this.parser(f);if(m===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(m)},h.IPv4.parseCIDR=function(f){let m;if(m=f.match(/^(.+)\/(\d+)$/)){let w=parseInt(m[2]);if(w>=0&&w<=32){let _=[this.parse(m[1]),w];return Object.defineProperty(_,"toString",{value:function(){return this.join("/")}}),_}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},h.IPv4.parser=function(f){let m,w,_;if(m=f.match(t.fourOctet))return function(){let E=m.slice(1,6),S=[];for(let p=0;p<E.length;p++)w=E[p],S.push(l(w));return S}();if(m=f.match(t.longValue)){if(_=l(m[1]),_>4294967295||_<0)throw new Error("ipaddr: address outside defined range");return function(){let E=[],S;for(S=0;S<=24;S+=8)E.push(_>>S&255);return E}().reverse()}else return(m=f.match(t.twoOctet))?function(){let E=m.slice(1,4),S=[];if(_=l(E[1]),_>16777215||_<0)throw new Error("ipaddr: address outside defined range");return S.push(l(E[0])),S.push(_>>16&255),S.push(_>>8&255),S.push(_&255),S}():(m=f.match(t.threeOctet))?function(){let E=m.slice(1,5),S=[];if(_=l(E[2]),_>65535||_<0)throw new Error("ipaddr: address outside defined range");return S.push(l(E[0])),S.push(l(E[1])),S.push(_>>8&255),S.push(_&255),S}():null},h.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");let m=[0,0,0,0],w=0,_=Math.floor(f/8);for(;w<_;)m[w]=255,w++;return _<4&&(m[_]=Math.pow(2,f%8)-1<<8-f%8),new this(m)},h.IPv6=function(){function f(m,w){let _,E;if(m.length===16)for(this.parts=[],_=0;_<=14;_+=2)this.parts.push(m[_]<<8|m[_+1]);else if(m.length===8)this.parts=m;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(_=0;_<this.parts.length;_++)if(E=this.parts[_],!(0<=E&&E<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");w&&(this.zoneId=w)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],discard:[new f([256,0,0,0,0,0,0,0]),64],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],benchmarking:[new f([8193,2,0,0,0,0,0,0]),48],amt:[new f([8193,3,0,0,0,0,0,0]),32],as112v6:[[new f([8193,4,274,0,0,0,0,0]),48],[new f([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new f([8193,16,0,0,0,0,0,0]),28],orchid2:[new f([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new f([8193,48,0,0,0,0,0,0]),28],reserved:[[new f([8193,0,0,0,0,0,0,0]),23],[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(m,w){let _;if(w===void 0&&(_=m,m=_[0],w=_[1]),m.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,m.parts,16,w)},f.prototype.prefixLengthFromSubnetMask=function(){let m=0,w=!1,_={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},E,S;for(let p=7;p>=0;p-=1)if(E=this.parts[p],E in _){if(S=_[E],w&&S!==0)return null;S!==16&&(w=!0),m+=S}else return null;return 128-m},f.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let m,w=[],_=this.parts;for(let E=0;E<_.length;E++)m=_[E],w.push(m>>8),w.push(m&255);return w},f.prototype.toFixedLengthString=function(){let m=function(){let _=[];for(let E=0;E<this.parts.length;E++)_.push(d(this.parts[E].toString(16),4));return _}.call(this).join(":"),w="";return this.zoneId&&(w=`%${this.zoneId}`),m+w},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let m=this.parts.slice(-2),w=m[0],_=m[1];return new h.IPv4([w>>8,w&255,_>>8,_&255])},f.prototype.toNormalizedString=function(){let m=function(){let _=[];for(let E=0;E<this.parts.length;E++)_.push(this.parts[E].toString(16));return _}.call(this).join(":"),w="";return this.zoneId&&(w=`%${this.zoneId}`),m+w},f.prototype.toRFC5952String=function(){let m=/((^|:)(0(:|$)){2,})/g,w=this.toNormalizedString(),_=0,E=-1,S;for(;S=m.exec(w);)S[0].length>E&&(_=S.index,E=S[0].length);return E<0?w:`${w.substring(0,_)}::${w.substring(_+E)}`},f.prototype.toString=function(){return this.toRFC5952String()},f}(),h.IPv6.broadcastAddressFromCIDR=function(f){try{let m=this.parseCIDR(f),w=m[0].toByteArray(),_=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),E=[],S=0;for(;S<16;)E.push(parseInt(w[S],10)|parseInt(_[S],10)^255),S++;return new this(E)}catch(m){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${m})`)}},h.IPv6.isIPv6=function(f){return this.parser(f)!==null},h.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{let m=this.parser(f);return new this(m.parts,m.zoneId),!0}catch{return!1}},h.IPv6.isValidCIDR=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{return this.parseCIDR(f),!0}catch{return!1}},h.IPv6.networkAddressFromCIDR=function(f){let m,w,_,E,S;try{for(m=this.parseCIDR(f),_=m[0].toByteArray(),S=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),E=[],w=0;w<16;)E.push(parseInt(_[w],10)&parseInt(S[w],10)),w++;return new this(E)}catch(p){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${p})`)}},h.IPv6.parse=function(f){let m=this.parser(f);if(m.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(m.parts,m.zoneId)},h.IPv6.parseCIDR=function(f){let m,w,_;if((w=f.match(/^(.+)\/(\d+)$/))&&(m=parseInt(w[2]),m>=0&&m<=128))return _=[this.parse(w[1]),m],Object.defineProperty(_,"toString",{value:function(){return this.join("/")}}),_;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},h.IPv6.parser=function(f){let m,w,_,E,S,p;if(_=f.match(a.deprecatedTransitional))return this.parser(`::ffff:${_[1]}`);if(a.native.test(f))return c(f,8);if((_=f.match(a.transitional))&&(p=_[6]||"",m=_[1],_[1].endsWith("::")||(m=m.slice(0,-1)),m=c(m+p,6),m.parts)){for(S=[parseInt(_[2]),parseInt(_[3]),parseInt(_[4]),parseInt(_[5])],w=0;w<S.length;w++)if(E=S[w],!(0<=E&&E<=255))return null;return m.parts.push(S[0]<<8|S[1]),m.parts.push(S[2]<<8|S[3]),{parts:m.parts,zoneId:m.zoneId}}return null},h.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");let m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0,_=Math.floor(f/8);for(;w<_;)m[w]=255,w++;return _<16&&(m[_]=Math.pow(2,f%8)-1<<8-f%8),new this(m)},h.fromByteArray=function(f){let m=f.length;if(m===4)return new h.IPv4(f);if(m===16)return new h.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},h.isValid=function(f){return h.IPv6.isValid(f)||h.IPv4.isValid(f)},h.isValidCIDR=function(f){return h.IPv6.isValidCIDR(f)||h.IPv4.isValidCIDR(f)},h.parse=function(f){if(h.IPv6.isValid(f))return h.IPv6.parse(f);if(h.IPv4.isValid(f))return h.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},h.parseCIDR=function(f){try{return h.IPv6.parseCIDR(f)}catch{try{return h.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},h.process=function(f){let m=this.parse(f);return m.kind()==="ipv6"&&m.isIPv4MappedAddress()?m.toIPv4Address():m},h.subnetMatch=function(f,m,w){let _,E,S,p;w==null&&(w="unicast");for(E in m)if(Object.prototype.hasOwnProperty.call(m,E)){for(S=m[E],S[0]&&!(S[0]instanceof Array)&&(S=[S]),_=0;_<S.length;_++)if(p=S[_],f.kind()===p[0].kind()&&f.match.apply(f,p))return E}return w},typeof gv<"u"&&gv.exports?gv.exports=h:r.ipaddr=h})(S3e)});var D3e=O(($jt,P3e)=>{"use strict";function e$e(r){return r>=55296&&r<=56319}function t$e(r){return r>=56320&&r<=57343}P3e.exports=function(e,t,n){if(typeof t!="string")throw new Error("Input must be string");for(var i=t.length,o=0,s,a,c=0;c<i;c+=1){if(s=t.charCodeAt(c),a=t[c],e$e(s)&&t$e(t.charCodeAt(c+1))&&(c+=1,a+=t[c]),o+=e(a),o===n)return t.slice(0,c+1);if(o>n)return t.slice(0,c-a.length+1)}return t}});var O3e=O((Kjt,N3e)=>{"use strict";var r$e=D3e(),n$e=Buffer.byteLength.bind(Buffer);N3e.exports=r$e.bind(null,n$e)});var M3e=O((jjt,B3e)=>{"use strict";var i$e=O3e(),o$e=/[\/\?<>\\:\*\|"]/g,s$e=/[\x00-\x1f\x80-\x9f]/g,a$e=/^\.+$/,c$e=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u$e=/[\. ]+$/;function L3e(r,e){if(typeof r!="string")throw new Error("Input must be string");var t=r.replace(o$e,e).replace(s$e,e).replace(a$e,e).replace(c$e,e).replace(u$e,e);return i$e(t,255)}B3e.exports=function(r,e){var t=e&&e.replacement||"",n=L3e(r,t);return t===""?n:L3e(n,"")}});var z3e=O((Gjt,V3e)=>{var P5=Kt();_2();Tr();var Ne=P5.asn1,D5=V3e.exports=P5.pkcs7asn1=P5.pkcs7asn1||{};P5.pkcs7=P5.pkcs7||{};P5.pkcs7.asn1=D5;var U3e={name:"ContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};D5.contentInfoValidator=U3e;var F3e={name:"EncryptedContentInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};D5.envelopedDataValidator={name:"EnvelopedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(F3e)};D5.encryptedDataValidator={name:"EncryptedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"}].concat(F3e)};var l$e={name:"SignerInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};D5.signedDataValidator={name:"SignedData",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},U3e,{name:"SignedData.Certificates",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ne.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SET,capture:"signerInfos",optional:!0,value:[l$e]}]};D5.recipientInfoValidator={name:"RecipientInfo",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ne.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ne.Class.UNIVERSAL,type:Ne.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var $3e=O((Hjt,q3e)=>{var G3=Kt();Tr();G3.mgf=G3.mgf||{};var d$e=q3e.exports=G3.mgf.mgf1=G3.mgf1=G3.mgf1||{};d$e.create=function(r){var e={generate:function(t,n){for(var i=new G3.util.ByteBuffer,o=Math.ceil(n/r.digestLength),s=0;s<o;s++){var a=new G3.util.ByteBuffer;a.putInt32(s),r.start(),r.update(t+a.getBytes()),i.putBuffer(r.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var j3e=O((Wjt,K3e)=>{var _v=Kt();$3e();K3e.exports=_v.mgf=_v.mgf||{};_v.mgf.mgf1=_v.mgf1});var H3e=O((Yjt,G3e)=>{var H3=Kt();pl();Tr();var f$e=G3e.exports=H3.pss=H3.pss||{};f$e.create=function(r){arguments.length===3&&(r={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=r.md,t=r.mgf,n=e.digestLength,i=r.salt||null;typeof i=="string"&&(i=H3.util.createBuffer(i));var o;if("saltLength"in r)o=r.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var s=r.prng||H3.random,a={};return a.encode=function(c,u){var l,d=u-1,h=Math.ceil(d/8),f=c.digest().getBytes();if(h<n+o+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(o):m=i.bytes();var w=new H3.util.ByteBuffer;w.fillWithByte(0,8),w.putBytes(f),w.putBytes(m),e.start(),e.update(w.getBytes());var _=e.digest().getBytes(),E=new H3.util.ByteBuffer;E.fillWithByte(0,h-o-n-2),E.putByte(1),E.putBytes(m);var S=E.getBytes(),p=h-n-1,g=t.generate(_,p),y="";for(l=0;l<p;l++)y+=String.fromCharCode(S.charCodeAt(l)^g.charCodeAt(l));var b=65280>>8*h-d&255;return y=String.fromCharCode(y.charCodeAt(0)&~b)+y.substr(1),y+_+"\xBC"},a.verify=function(c,u,l){var d,h=l-1,f=Math.ceil(h/8);if(u=u.substr(-f),f<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=f-n-1,w=u.substr(0,m),_=u.substr(m,n),E=65280>>8*f-h&255;if(w.charCodeAt(0)&E)throw new Error("Bits beyond keysize not zero as expected.");var S=t.generate(_,m),p="";for(d=0;d<m;d++)p+=String.fromCharCode(w.charCodeAt(d)^S.charCodeAt(d));p=String.fromCharCode(p.charCodeAt(0)&~E)+p.substr(1);var g=f-n-o-2;for(d=0;d<g;d++)if(p.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(p.charCodeAt(g)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var y=p.substr(-o),b=new H3.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(c),b.putBytes(y),e.start(),e.update(b.getBytes());var x=e.digest().getBytes();return _===x},a}});var UL=O((Xjt,Z3e)=>{var tt=Kt();Xh();_2();Bm();v2();j3e();cf();Vm();H3e();Hm();Tr();var P=tt.asn1,ve=Z3e.exports=tt.pki=tt.pki||{},Zt=ve.oids,sn={};sn.CN=Zt.commonName;sn.commonName="CN";sn.C=Zt.countryName;sn.countryName="C";sn.L=Zt.localityName;sn.localityName="L";sn.ST=Zt.stateOrProvinceName;sn.stateOrProvinceName="ST";sn.O=Zt.organizationName;sn.organizationName="O";sn.OU=Zt.organizationalUnitName;sn.organizationalUnitName="OU";sn.E=Zt.emailAddress;sn.emailAddress="E";var Y3e=tt.pki.rsa.publicKeyValidator,h$e={name:"Certificate",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:P.Class.UNIVERSAL,type:P.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:P.Class.UNIVERSAL,type:P.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:P.Class.UNIVERSAL,type:P.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:P.Class.UNIVERSAL,type:P.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Y3e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:P.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:P.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:P.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},p$e={name:"rsapss",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:P.Class.UNIVERSAL,type:P.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:P.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:P.Class.UNIVERSAL,type:P.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:P.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:P.Class.UNIVERSAL,type:P.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:P.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:P.Class.UNIVERSAL,type:P.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},m$e={name:"CertificationRequestInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Y3e,{name:"CertificationRequestInfo.attributes",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:P.Class.UNIVERSAL,type:P.Type.SET,constructed:!0}]}]}]},g$e={name:"CertificationRequest",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[m$e,{name:"CertificationRequest.signatureAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};ve.RDNAttributesAsArray=function(r,e){for(var t=[],n,i,o,s=0;s<r.value.length;++s){n=r.value[s];for(var a=0;a<n.value.length;++a)o={},i=n.value[a],o.type=P.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Zt&&(o.name=Zt[o.type],o.name in sn&&(o.shortName=sn[o.name])),e&&(e.update(o.type),e.update(o.value)),t.push(o)}return t};ve.CRIAttributesAsArray=function(r){for(var e=[],t=0;t<r.length;++t)for(var n=r[t],i=P.derToOid(n.value[0].value),o=n.value[1].value,s=0;s<o.length;++s){var a={};if(a.type=i,a.value=o[s].value,a.valueTagClass=o[s].type,a.type in Zt&&(a.name=Zt[a.type],a.name in sn&&(a.shortName=sn[a.name])),a.type===Zt.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(ve.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function Ou(r,e){typeof e=="string"&&(e={shortName:e});for(var t=null,n,i=0;t===null&&i<r.attributes.length;++i)n=r.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(t=n);return t}var vv=function(r,e,t){var n={};if(r!==Zt["RSASSA-PSS"])return n;t&&(n={hash:{algorithmOid:Zt.sha1},mgf:{algorithmOid:Zt.mgf1,hash:{algorithmOid:Zt.sha1}},saltLength:20});var i={},o=[];if(!P.validate(e,p$e,i,o)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=o,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=P.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=P.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=P.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Ev=function(r){switch(Zt[r.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return tt.md.sha1.create();case"md5WithRSAEncryption":return tt.md.md5.create();case"sha256WithRSAEncryption":return tt.md.sha256.create();case"sha384WithRSAEncryption":return tt.md.sha384.create();case"sha512WithRSAEncryption":return tt.md.sha512.create();case"RSASSA-PSS":return tt.md.sha256.create();default:var e=new Error("Could not compute "+r.type+" digest. Unknown signature OID.");throw e.signatureOid=r.signatureOid,e}},X3e=function(r){var e=r.certificate,t;switch(e.signatureOid){case Zt.sha1WithRSAEncryption:case Zt.sha1WithRSASignature:break;case Zt["RSASSA-PSS"]:var n,i;if(n=Zt[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||tt.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Zt[e.signatureParameters.mgf.algorithmOid],i===void 0||tt.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=tt.mgf[i].create(tt.md[n].create()),n=Zt[e.signatureParameters.hash.algorithmOid],n===void 0||tt.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}t=tt.pss.create(tt.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(r.md.digest().getBytes(),r.signature,t)};ve.certificateFromPem=function(r,e,t){var n=tt.pem.decode(r)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=P.fromDer(n.body,t);return ve.certificateFromAsn1(o,e)};ve.certificateToPem=function(r,e){var t={type:"CERTIFICATE",body:P.toDer(ve.certificateToAsn1(r)).getBytes()};return tt.pem.encode(t,{maxline:e})};ve.publicKeyFromPem=function(r){var e=tt.pem.decode(r)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var t=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=P.fromDer(e.body);return ve.publicKeyFromAsn1(n)};ve.publicKeyToPem=function(r,e){var t={type:"PUBLIC KEY",body:P.toDer(ve.publicKeyToAsn1(r)).getBytes()};return tt.pem.encode(t,{maxline:e})};ve.publicKeyToRSAPublicKeyPem=function(r,e){var t={type:"RSA PUBLIC KEY",body:P.toDer(ve.publicKeyToRSAPublicKey(r)).getBytes()};return tt.pem.encode(t,{maxline:e})};ve.getPublicKeyFingerprint=function(r,e){e=e||{};var t=e.md||tt.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=P.toDer(ve.publicKeyToRSAPublicKey(r)).getBytes();break;case"SubjectPublicKeyInfo":i=P.toDer(ve.publicKeyToAsn1(r)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}t.start(),t.update(i);var o=t.digest();if(e.encoding==="hex"){var s=o.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};ve.certificationRequestFromPem=function(r,e,t){var n=tt.pem.decode(r)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=P.fromDer(n.body,t);return ve.certificationRequestFromAsn1(o,e)};ve.certificationRequestToPem=function(r,e){var t={type:"CERTIFICATE REQUEST",body:P.toDer(ve.certificationRequestToAsn1(r)).getBytes()};return tt.pem.encode(t,{maxline:e})};ve.createCertificate=function(){var r={};return r.version=2,r.serialNumber="00",r.signatureOid=null,r.signature=null,r.siginfo={},r.siginfo.algorithmOid=null,r.validity={},r.validity.notBefore=new Date,r.validity.notAfter=new Date,r.issuer={},r.issuer.getField=function(e){return Ou(r.issuer,e)},r.issuer.addField=function(e){ea([e]),r.issuer.attributes.push(e)},r.issuer.attributes=[],r.issuer.hash=null,r.subject={},r.subject.getField=function(e){return Ou(r.subject,e)},r.subject.addField=function(e){ea([e]),r.subject.attributes.push(e)},r.subject.attributes=[],r.subject.hash=null,r.extensions=[],r.publicKey=null,r.md=null,r.setSubject=function(e,t){ea(e),r.subject.attributes=e,delete r.subject.uniqueId,t&&(r.subject.uniqueId=t),r.subject.hash=null},r.setIssuer=function(e,t){ea(e),r.issuer.attributes=e,delete r.issuer.uniqueId,t&&(r.issuer.uniqueId=t),r.issuer.hash=null},r.setExtensions=function(e){for(var t=0;t<e.length;++t)Q3e(e[t],{cert:r});r.extensions=e},r.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var t=null,n,i=0;t===null&&i<r.extensions.length;++i)n=r.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(t=n);return t},r.sign=function(e,t){r.md=t||tt.md.sha1.create();var n=Zt[r.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=r.md.algorithm,i}r.signatureOid=r.siginfo.algorithmOid=n,r.tbsCertificate=ve.getTBSCertificate(r);var o=P.toDer(r.tbsCertificate);r.md.update(o.getBytes()),r.signature=e.sign(r.md)},r.verify=function(e){var t=!1;if(!r.issued(e)){var n=e.issuer,i=r.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var s=e.md;if(s===null){s=Ev({signatureOid:e.signatureOid,type:"certificate"});var a=e.tbsCertificate||ve.getTBSCertificate(e),c=P.toDer(a);s.update(c.getBytes())}return s!==null&&(t=X3e({certificate:r,md:s,signature:e.signature})),t},r.isIssuer=function(e){var t=!1,n=r.issuer,i=e.subject;if(n.hash&&i.hash)t=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){t=!0;for(var o,s,a=0;t&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],(o.type!==s.type||o.value!==s.value)&&(t=!1)}return t},r.issued=function(e){return e.isIssuer(r)},r.generateSubjectKeyIdentifier=function(){return ve.getPublicKeyFingerprint(r.publicKey,{type:"RSAPublicKey"})},r.verifySubjectKeyIdentifier=function(){for(var e=Zt.subjectKeyIdentifier,t=0;t<r.extensions.length;++t){var n=r.extensions[t];if(n.id===e){var i=r.generateSubjectKeyIdentifier().getBytes();return tt.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},r};ve.certificateFromAsn1=function(r,e){var t={},n=[];if(!P.validate(r,h$e,t,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=P.derToOid(t.publicKeyOid);if(o!==ve.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ve.createCertificate();s.version=t.certVersion?t.certVersion.charCodeAt(0):0;var a=tt.util.createBuffer(t.certSerialNumber);s.serialNumber=a.toHex(),s.signatureOid=tt.asn1.derToOid(t.certSignatureOid),s.signatureParameters=vv(s.signatureOid,t.certSignatureParams,!0),s.siginfo.algorithmOid=tt.asn1.derToOid(t.certinfoSignatureOid),s.siginfo.parameters=vv(s.siginfo.algorithmOid,t.certinfoSignatureParams,!1),s.signature=t.certSignature;var c=[];if(t.certValidity1UTCTime!==void 0&&c.push(P.utcTimeToDate(t.certValidity1UTCTime)),t.certValidity2GeneralizedTime!==void 0&&c.push(P.generalizedTimeToDate(t.certValidity2GeneralizedTime)),t.certValidity3UTCTime!==void 0&&c.push(P.utcTimeToDate(t.certValidity3UTCTime)),t.certValidity4GeneralizedTime!==void 0&&c.push(P.generalizedTimeToDate(t.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=t.tbsCertificate,e){s.md=Ev({signatureOid:s.signatureOid,type:"certificate"});var u=P.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=tt.md.sha1.create(),d=P.toDer(t.certIssuer);l.update(d.getBytes()),s.issuer.getField=function(m){return Ou(s.issuer,m)},s.issuer.addField=function(m){ea([m]),s.issuer.attributes.push(m)},s.issuer.attributes=ve.RDNAttributesAsArray(t.certIssuer),t.certIssuerUniqueId&&(s.issuer.uniqueId=t.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var h=tt.md.sha1.create(),f=P.toDer(t.certSubject);return h.update(f.getBytes()),s.subject.getField=function(m){return Ou(s.subject,m)},s.subject.addField=function(m){ea([m]),s.subject.attributes.push(m)},s.subject.attributes=ve.RDNAttributesAsArray(t.certSubject),t.certSubjectUniqueId&&(s.subject.uniqueId=t.certSubjectUniqueId),s.subject.hash=h.digest().toHex(),t.certExtensions?s.extensions=ve.certificateExtensionsFromAsn1(t.certExtensions):s.extensions=[],s.publicKey=ve.publicKeyFromAsn1(t.subjectPublicKeyInfo),s};ve.certificateExtensionsFromAsn1=function(r){for(var e=[],t=0;t<r.value.length;++t)for(var n=r.value[t],i=0;i<n.value.length;++i)e.push(ve.certificateExtensionFromAsn1(n.value[i]));return e};ve.certificateExtensionFromAsn1=function(r){var e={};if(e.id=P.derToOid(r.value[0].value),e.critical=!1,r.value[1].type===P.Type.BOOLEAN?(e.critical=r.value[1].value.charCodeAt(0)!==0,e.value=r.value[2].value):e.value=r.value[1].value,e.id in Zt){if(e.name=Zt[e.id],e.name==="keyUsage"){var t=P.fromDer(e.value),n=0,i=0;t.value.length>1&&(n=t.value.charCodeAt(1),i=t.value.length>2?t.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var t=P.fromDer(e.value);t.value.length>0&&t.value[0].type===P.Type.BOOLEAN?e.cA=t.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;t.value.length>0&&t.value[0].type===P.Type.INTEGER?o=t.value[0].value:t.value.length>1&&(o=t.value[1].value),o!==null&&(e.pathLenConstraint=P.derToInteger(o))}else if(e.name==="extKeyUsage")for(var t=P.fromDer(e.value),s=0;s<t.value.length;++s){var a=P.derToOid(t.value[s].value);a in Zt?e[Zt[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var t=P.fromDer(e.value),n=0;t.value.length>1&&(n=t.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,t=P.fromDer(e.value),u=0;u<t.value.length;++u){c=t.value[u];var l={type:c.type,value:c.value};switch(e.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=tt.util.bytesToIP(c.value);break;case 8:l.oid=P.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var t=P.fromDer(e.value);e.subjectKeyIdentifier=tt.util.bytesToHex(t.value)}}return e};ve.certificationRequestFromAsn1=function(r,e){var t={},n=[];if(!P.validate(r,g$e,t,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=P.derToOid(t.publicKeyOid);if(o!==ve.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ve.createCertificationRequest();if(s.version=t.csrVersion?t.csrVersion.charCodeAt(0):0,s.signatureOid=tt.asn1.derToOid(t.csrSignatureOid),s.signatureParameters=vv(s.signatureOid,t.csrSignatureParams,!0),s.siginfo.algorithmOid=tt.asn1.derToOid(t.csrSignatureOid),s.siginfo.parameters=vv(s.siginfo.algorithmOid,t.csrSignatureParams,!1),s.signature=t.csrSignature,s.certificationRequestInfo=t.certificationRequestInfo,e){s.md=Ev({signatureOid:s.signatureOid,type:"certification request"});var a=P.toDer(s.certificationRequestInfo);s.md.update(a.getBytes())}var c=tt.md.sha1.create();return s.subject.getField=function(u){return Ou(s.subject,u)},s.subject.addField=function(u){ea([u]),s.subject.attributes.push(u)},s.subject.attributes=ve.RDNAttributesAsArray(t.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=ve.publicKeyFromAsn1(t.subjectPublicKeyInfo),s.getAttribute=function(u){return Ou(s,u)},s.addAttribute=function(u){ea([u]),s.attributes.push(u)},s.attributes=ve.CRIAttributesAsArray(t.certificationRequestInfoAttributes||[]),s};ve.createCertificationRequest=function(){var r={};return r.version=0,r.signatureOid=null,r.signature=null,r.siginfo={},r.siginfo.algorithmOid=null,r.subject={},r.subject.getField=function(e){return Ou(r.subject,e)},r.subject.addField=function(e){ea([e]),r.subject.attributes.push(e)},r.subject.attributes=[],r.subject.hash=null,r.publicKey=null,r.attributes=[],r.getAttribute=function(e){return Ou(r,e)},r.addAttribute=function(e){ea([e]),r.attributes.push(e)},r.md=null,r.setSubject=function(e){ea(e),r.subject.attributes=e,r.subject.hash=null},r.setAttributes=function(e){ea(e),r.attributes=e},r.sign=function(e,t){r.md=t||tt.md.sha1.create();var n=Zt[r.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=r.md.algorithm,i}r.signatureOid=r.siginfo.algorithmOid=n,r.certificationRequestInfo=ve.getCertificationRequestInfo(r);var o=P.toDer(r.certificationRequestInfo);r.md.update(o.getBytes()),r.signature=e.sign(r.md)},r.verify=function(){var e=!1,t=r.md;if(t===null){t=Ev({signatureOid:r.signatureOid,type:"certification request"});var n=r.certificationRequestInfo||ve.getCertificationRequestInfo(r),i=P.toDer(n);t.update(i.getBytes())}return t!==null&&(e=X3e({certificate:r,md:t,signature:r.signature})),e},r};function N5(r){for(var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),t,n,i=r.attributes,o=0;o<i.length;++o){t=i[o];var s=t.value,a=P.Type.PRINTABLESTRING;"valueTagClass"in t&&(a=t.valueTagClass,a===P.Type.UTF8&&(s=tt.util.encodeUtf8(s))),n=P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(t.type).getBytes()),P.create(P.Class.UNIVERSAL,a,!1,s)])]),e.value.push(n)}return e}function ea(r){for(var e,t=0;t<r.length;++t){if(e=r[t],typeof e.name>"u"&&(e.type&&e.type in ve.oids?e.name=ve.oids[e.type]:e.shortName&&e.shortName in sn&&(e.name=ve.oids[sn[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in ve.oids)e.type=ve.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in sn&&(e.shortName=sn[e.name]),e.type===Zt.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=P.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(ve.certificateExtensionToAsn1(Q3e(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function Q3e(r,e){if(e=e||{},typeof r.name>"u"&&r.id&&r.id in ve.oids&&(r.name=ve.oids[r.id]),typeof r.id>"u")if(r.name&&r.name in ve.oids)r.id=ve.oids[r.name];else{var t=new Error("Extension ID not specified.");throw t.extension=r,t}if(typeof r.value<"u")return r;if(r.name==="keyUsage"){var n=0,i=0,o=0;r.digitalSignature&&(i|=128,n=7),r.nonRepudiation&&(i|=64,n=6),r.keyEncipherment&&(i|=32,n=5),r.dataEncipherment&&(i|=16,n=4),r.keyAgreement&&(i|=8,n=3),r.keyCertSign&&(i|=4,n=2),r.cRLSign&&(i|=2,n=1),r.encipherOnly&&(i|=1,n=0),r.decipherOnly&&(o|=128,n=7);var s=String.fromCharCode(n);o!==0?s+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(s+=String.fromCharCode(i)),r.value=P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,s)}else if(r.name==="basicConstraints")r.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),r.cA&&r.value.value.push(P.create(P.Class.UNIVERSAL,P.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in r&&r.value.value.push(P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(r.pathLenConstraint).getBytes()));else if(r.name==="extKeyUsage"){r.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);var a=r.value.value;for(var c in r)r[c]===!0&&(c in Zt?a.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Zt[c]).getBytes())):c.indexOf(".")!==-1&&a.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(c).getBytes())))}else if(r.name==="nsCertType"){var n=0,i=0;r.client&&(i|=128,n=7),r.server&&(i|=64,n=6),r.email&&(i|=32,n=5),r.objsign&&(i|=16,n=4),r.reserved&&(i|=8,n=3),r.sslCA&&(i|=4,n=2),r.emailCA&&(i|=2,n=1),r.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),r.value=P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,s)}else if(r.name==="subjectAltName"||r.name==="issuerAltName"){r.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);for(var u,l=0;l<r.altNames.length;++l){u=r.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=tt.util.bytesFromIP(u.ip),s===null){var t=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw t.extension=r,t}}else u.type===8&&(u.oid?s=P.oidToDer(P.oidToDer(u.oid)):s=P.oidToDer(s));r.value.value.push(P.create(P.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(r.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(r.comment)||r.comment.length<1||r.comment.length>128)throw new Error('Invalid "nsComment" content.');r.value=P.create(P.Class.UNIVERSAL,P.Type.IA5STRING,!1,r.comment)}else if(r.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();r.subjectKeyIdentifier=d.toHex(),r.value=P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,d.getBytes())}else if(r.name==="authorityKeyIdentifier"&&e.cert){r.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);var a=r.value.value;if(r.keyIdentifier){var h=r.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():r.keyIdentifier;a.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!1,h))}if(r.authorityCertIssuer){var f=[P.create(P.Class.CONTEXT_SPECIFIC,4,!0,[N5(r.authorityCertIssuer===!0?e.cert.issuer:r.authorityCertIssuer)])];a.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,f))}if(r.serialNumber){var m=tt.util.hexToBytes(r.serialNumber===!0?e.cert.serialNumber:r.serialNumber);a.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(r.name==="cRLDistributionPoints"){r.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);for(var a=r.value.value,w=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),_=P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<r.altNames.length;++l){u=r.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=tt.util.bytesFromIP(u.ip),s===null){var t=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw t.extension=r,t}}else u.type===8&&(u.oid?s=P.oidToDer(P.oidToDer(u.oid)):s=P.oidToDer(s));_.value.push(P.create(P.Class.CONTEXT_SPECIFIC,u.type,!1,s))}w.value.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[_])),a.push(w)}if(typeof r.value>"u"){var t=new Error("Extension value not specified.");throw t.extension=r,t}return r}function ML(r,e){switch(r){case Zt["RSASSA-PSS"]:var t=[];return e.hash.algorithmOid!==void 0&&t.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.hash.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&t.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.mgf.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.mgf.hash.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&t.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(e.saltLength).getBytes())])),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,t);default:return P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")}}function y$e(r){var e=P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[]);if(r.attributes.length===0)return e;for(var t=r.attributes,n=0;n<t.length;++n){var i=t[n],o=i.value,s=P.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===P.Type.UTF8&&(o=tt.util.encodeUtf8(o));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var c=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(i.type).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,s,a,o)])]);e.value.push(c)}return e}var w$e=new Date("1950-01-01T00:00:00Z"),b$e=new Date("2050-01-01T00:00:00Z");function W3e(r){return r>=w$e&&r<b$e?P.create(P.Class.UNIVERSAL,P.Type.UTCTIME,!1,P.dateToUtcTime(r)):P.create(P.Class.UNIVERSAL,P.Type.GENERALIZEDTIME,!1,P.dateToGeneralizedTime(r))}ve.getTBSCertificate=function(r){var e=W3e(r.validity.notBefore),t=W3e(r.validity.notAfter),n=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(r.version).getBytes())]),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,tt.util.hexToBytes(r.serialNumber)),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(r.siginfo.algorithmOid).getBytes()),ML(r.siginfo.algorithmOid,r.siginfo.parameters)]),N5(r.issuer),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,t]),N5(r.subject),ve.publicKeyToAsn1(r.publicKey)]);return r.issuer.uniqueId&&n.value.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,[P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,"\0"+r.issuer.uniqueId)])),r.subject.uniqueId&&n.value.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!0,[P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,"\0"+r.subject.uniqueId)])),r.extensions.length>0&&n.value.push(ve.certificateExtensionsToAsn1(r.extensions)),n};ve.getCertificationRequestInfo=function(r){var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(r.version).getBytes()),N5(r.subject),ve.publicKeyToAsn1(r.publicKey),y$e(r)]);return e};ve.distinguishedNameToAsn1=function(r){return N5(r)};ve.certificateToAsn1=function(r){var e=r.tbsCertificate||ve.getTBSCertificate(r);return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(r.signatureOid).getBytes()),ML(r.signatureOid,r.signatureParameters)]),P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,"\0"+r.signature)])};ve.certificateExtensionsToAsn1=function(r){var e=P.create(P.Class.CONTEXT_SPECIFIC,3,!0,[]),t=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);e.value.push(t);for(var n=0;n<r.length;++n)t.value.push(ve.certificateExtensionToAsn1(r[n]));return e};ve.certificateExtensionToAsn1=function(r){var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);e.value.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(r.id).getBytes())),r.critical&&e.value.push(P.create(P.Class.UNIVERSAL,P.Type.BOOLEAN,!1,"\xFF"));var t=r.value;return typeof r.value!="string"&&(t=P.toDer(t).getBytes()),e.value.push(P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,t)),e};ve.certificationRequestToAsn1=function(r){var e=r.certificationRequestInfo||ve.getCertificationRequestInfo(r);return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(r.signatureOid).getBytes()),ML(r.signatureOid,r.signatureParameters)]),P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,"\0"+r.signature)])};ve.createCaStore=function(r){var e={certs:{}};e.getIssuer=function(s){var a=t(s.issuer);return a},e.addCertificate=function(s){if(typeof s=="string"&&(s=tt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var a=e.certs[s.subject.hash];tt.util.isArray(a)||(a=[a]),a.push(s),e.certs[s.subject.hash]=a}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=tt.pki.certificateFromPem(s));var a=t(s.subject);if(!a)return!1;tt.util.isArray(a)||(a=[a]);for(var c=P.toDer(ve.certificateToAsn1(s)).getBytes(),u=0;u<a.length;++u){var l=P.toDer(ve.certificateToAsn1(a[u])).getBytes();if(c===l)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!tt.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},e.removeCertificate=function(s){var a;if(typeof s=="string"&&(s=tt.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var c=t(s.subject);if(!tt.util.isArray(c))return a=e.certs[s.subject.hash],delete e.certs[s.subject.hash],a;for(var u=P.toDer(ve.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var d=P.toDer(ve.certificateToAsn1(c[l])).getBytes();u===d&&(a=c[l],c.splice(l,1))}return c.length===0&&delete e.certs[s.subject.hash],a};function t(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var a=tt.md.sha1.create();s.attributes=ve.RDNAttributesAsArray(N5(s),a),s.hash=a.digest().toHex()}}if(r)for(var i=0;i<r.length;++i){var o=r[i];e.addCertificate(o)}return e};ve.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};ve.verifyCertificateChain=function(r,e,t){typeof t=="function"&&(t={verify:t}),t=t||{},e=e.slice(0);var n=e.slice(0),i=t.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,s=null,a=0;do{var c=e.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:ve.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=e[0]||r.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var d=u;tt.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){u=d.shift();try{h=u.verify(c)}catch{}}h||(s={message:"Certificate signature is invalid.",error:ve.certificateError.bad_certificate})}s===null&&(!u||l)&&!r.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:ve.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:ve.certificateError.bad_certificate}),s===null)for(var f={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<c.extensions.length;++m){var w=c.extensions[m];w.critical&&!(w.name in f)&&(s={message:"Certificate has an unsupported critical extension.",error:ve.certificateError.unsupported_certificate})}if(s===null&&(!o||e.length===0&&(!u||l))){var _=c.getExtension("basicConstraints"),E=c.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||_===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:ve.certificateError.bad_certificate}),s===null&&_!==null&&!_.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:ve.certificateError.bad_certificate}),s===null&&E!==null&&"pathLenConstraint"in _){var S=a-1;S>_.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:ve.certificateError.bad_certificate})}}var p=s===null?!0:s.error,g=t.verify?t.verify(p,a,n):p;if(g===!0)s=null;else throw p===!0&&(s={message:"The application rejected the certificate.",error:ve.certificateError.bad_certificate}),(g||g===0)&&(typeof g=="object"&&!tt.util.isArray(g)?(g.message&&(s.message=g.message),g.error&&(s.error=g.error)):typeof g=="string"&&(s.error=g)),s;o=!1,++a}while(e.length>0);return!0}});var tde=O((Qjt,ede)=>{var Ce=Kt();Xh();_2();Bm();cf();Vm();z3e();pl();Tr();UL();var H=Ce.asn1,eo=ede.exports=Ce.pkcs7=Ce.pkcs7||{};eo.messageFromPem=function(r){var e=Ce.pem.decode(r)[0];if(e.type!=="PKCS7"){var t=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=H.fromDer(e.body);return eo.messageFromAsn1(n)};eo.messageToPem=function(r,e){var t={type:"PKCS7",body:H.toDer(r.toAsn1()).getBytes()};return Ce.pem.encode(t,{maxline:e})};eo.messageFromAsn1=function(r){var e={},t=[];if(!H.validate(r,eo.asn1.contentInfoValidator,e,t)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=t,n}var i=H.derToOid(e.contentType),o;switch(i){case Ce.pki.oids.envelopedData:o=eo.createEnvelopedData();break;case Ce.pki.oids.encryptedData:o=eo.createEncryptedData();break;case Ce.pki.oids.signedData:o=eo.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};eo.createSignedData=function(){var r=null;return r={type:Ce.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(VL(r,n,eo.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[],r.rawCapture.certificates)for(var i=r.rawCapture.certificates.value,o=0;o<i.length;++o)r.certificates.push(Ce.pki.certificateFromAsn1(i[o]))},toAsn1:function(){r.contentInfo||r.sign();for(var n=[],i=0;i<r.certificates.length;++i)n.push(Ce.pki.certificateToAsn1(r.certificates[i]));var o=[],s=H.create(H.Class.CONTEXT_SPECIFIC,0,!0,[H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,H.integerToDer(r.version).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return n.length>0&&s.value[0].value.push(H.create(H.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&s.value[0].value.push(H.create(H.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(H.create(H.Class.UNIVERSAL,H.Type.SET,!0,r.signerInfos)),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Ce.pki.certificateFromPem(s)),i=s.issuer.attributes,o=s.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Ce.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||Ce.pki.oids.sha1;switch(c){case Ce.pki.oids.sha1:case Ce.pki.oids.sha256:case Ce.pki.oids.sha384:case Ce.pki.oids.sha512:case Ce.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var l=!1,d=!1,h=0;h<u.length;++h){var f=u[h];if(!l&&f.type===Ce.pki.oids.contentType){if(l=!0,d)break;continue}if(!d&&f.type===Ce.pki.oids.messageDigest){if(d=!0,l)break;continue}}if(!l||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}r.signers.push({key:a,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Ce.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof r.content!="object"||r.contentInfo===null)&&(r.contentInfo=H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(Ce.pki.oids.data).getBytes())]),"content"in r)){var i;r.content instanceof Ce.util.ByteBuffer?i=r.content.bytes():typeof r.content=="string"&&(i=Ce.util.encodeUtf8(r.content)),n.detached?r.detachedContent=H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,i):r.contentInfo.value.push(H.create(H.Class.CONTEXT_SPECIFIC,0,!0,[H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,i)]))}if(r.signers.length!==0){var o=e();t(o)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ce.pki.certificateFromPem(n)),r.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},r;function e(){for(var n={},i=0;i<r.signers.length;++i){var o=r.signers[i],s=o.digestAlgorithm;s in n||(n[s]=Ce.md[Ce.pki.oids[s]].create()),o.authenticatedAttributes.length===0?o.md=n[s]:o.md=Ce.md[Ce.pki.oids[s]].create()}r.digestAlgorithmIdentifiers=[];for(var s in n)r.digestAlgorithmIdentifiers.push(H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(s).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.NULL,!1,"")]));return n}function t(n){var i;if(r.detachedContent?i=r.detachedContent:(i=r.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=H.derToOid(r.contentInfo.value[0].value),s=H.toDer(i);s.getByte(),H.getBerValueLength(s),s=s.getBytes();for(var a in n)n[a].start().update(s);for(var c=new Date,u=0;u<r.signers.length;++u){var l=r.signers[u];if(l.authenticatedAttributes.length===0){if(o!==Ce.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=H.create(H.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=H.create(H.Class.UNIVERSAL,H.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var f=l.authenticatedAttributes[h];f.type===Ce.pki.oids.messageDigest?f.value=n[l.digestAlgorithm].digest():f.type===Ce.pki.oids.signingTime&&(f.value||(f.value=c)),d.value.push(FL(f)),l.authenticatedAttributesAsn1.value.push(FL(f))}s=H.toDer(d).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}r.signerInfos=T$e(r.signers)}};eo.createEncryptedData=function(){var r=null;return r={type:Ce.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ce.pki.oids["aes256-CBC"]},fromAsn1:function(e){VL(r,e,eo.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(r.encryptedContent.key=e),J3e(r)}},r};eo.createEnvelopedData=function(){var r=null;return r={type:Ce.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ce.pki.oids["aes256-CBC"]},fromAsn1:function(e){var t=VL(r,e,eo.asn1.envelopedDataValidator);r.recipients=E$e(t.recipientInfos.value)},toAsn1:function(){return H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.type).getBytes()),H.create(H.Class.CONTEXT_SPECIFIC,0,!0,[H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,H.integerToDer(r.version).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SET,!0,x$e(r.recipients)),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,I$e(r.encryptedContent))])])])},findRecipient:function(e){for(var t=e.issuer.attributes,n=0;n<r.recipients.length;++n){var i=r.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===t.length){for(var s=!0,a=0;a<t.length;++a)if(o[a].type!==t[a].type||o[a].value!==t[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,t){if(r.encryptedContent.key===void 0&&e!==void 0&&t!==void 0)switch(e.encryptedContent.algorithm){case Ce.pki.oids.rsaEncryption:case Ce.pki.oids.desCBC:var n=t.decrypt(e.encryptedContent.content);r.encryptedContent.key=Ce.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}J3e(r)},addRecipient:function(e){r.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Ce.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,t){if(r.encryptedContent.content===void 0){t=t||r.encryptedContent.algorithm,e=e||r.encryptedContent.key;var n,i,o;switch(t){case Ce.pki.oids["aes128-CBC"]:n=16,i=16,o=Ce.aes.createEncryptionCipher;break;case Ce.pki.oids["aes192-CBC"]:n=24,i=16,o=Ce.aes.createEncryptionCipher;break;case Ce.pki.oids["aes256-CBC"]:n=32,i=16,o=Ce.aes.createEncryptionCipher;break;case Ce.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Ce.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+t)}if(e===void 0)e=Ce.util.createBuffer(Ce.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");r.encryptedContent.algorithm=t,r.encryptedContent.key=e,r.encryptedContent.parameter=Ce.util.createBuffer(Ce.random.getBytes(i));var s=o(e);if(s.start(r.encryptedContent.parameter.copy()),s.update(r.content),!s.finish())throw new Error("Symmetric encryption failed.");r.encryptedContent.content=s.output}for(var a=0;a<r.recipients.length;++a){var c=r.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ce.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(r.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},r};function _$e(r){var e={},t=[];if(!H.validate(r,eo.asn1.recipientInfoValidator,e,t)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=t,n}return{version:e.version.charCodeAt(0),issuer:Ce.pki.RDNAttributesAsArray(e.issuer),serialNumber:Ce.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:H.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function v$e(r){return H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,H.integerToDer(r.version).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[Ce.pki.distinguishedNameToAsn1({attributes:r.issuer}),H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,Ce.util.hexToBytes(r.serialNumber))]),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.encryptedContent.algorithm).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.NULL,!1,"")]),H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,r.encryptedContent.content)])}function E$e(r){for(var e=[],t=0;t<r.length;++t)e.push(_$e(r[t]));return e}function x$e(r){for(var e=[],t=0;t<r.length;++t)e.push(v$e(r[t]));return e}function S$e(r){var e=H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,H.integerToDer(r.version).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[Ce.pki.distinguishedNameToAsn1({attributes:r.issuer}),H.create(H.Class.UNIVERSAL,H.Type.INTEGER,!1,Ce.util.hexToBytes(r.serialNumber))]),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.digestAlgorithm).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.NULL,!1,"")])]);if(r.authenticatedAttributesAsn1&&e.value.push(r.authenticatedAttributesAsn1),e.value.push(H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.signatureAlgorithm).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.NULL,!1,"")])),e.value.push(H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,r.signature)),r.unauthenticatedAttributes.length>0){for(var t=H.create(H.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<r.unauthenticatedAttributes.length;++n){var i=r.unauthenticatedAttributes[n];t.values.push(FL(i))}e.value.push(t)}return e}function T$e(r){for(var e=[],t=0;t<r.length;++t)e.push(S$e(r[t]));return e}function FL(r){var e;if(r.type===Ce.pki.oids.contentType)e=H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.value).getBytes());else if(r.type===Ce.pki.oids.messageDigest)e=H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,r.value.bytes());else if(r.type===Ce.pki.oids.signingTime){var t=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=r.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=H.utcTimeToDate(i):i=H.generalizedTimeToDate(i):i=new Date(o)}i>=t&&i<n?e=H.create(H.Class.UNIVERSAL,H.Type.UTCTIME,!1,H.dateToUtcTime(i)):e=H.create(H.Class.UNIVERSAL,H.Type.GENERALIZEDTIME,!1,H.dateToGeneralizedTime(i))}return H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.type).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SET,!0,[e])])}function I$e(r){return[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(Ce.pki.oids.data).getBytes()),H.create(H.Class.UNIVERSAL,H.Type.SEQUENCE,!0,[H.create(H.Class.UNIVERSAL,H.Type.OID,!1,H.oidToDer(r.algorithm).getBytes()),r.parameter?H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,r.parameter.getBytes()):void 0]),H.create(H.Class.CONTEXT_SPECIFIC,0,!0,[H.create(H.Class.UNIVERSAL,H.Type.OCTETSTRING,!1,r.content.getBytes())])]}function VL(r,e,t){var n={},i=[];if(!H.validate(e,t,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var s=H.derToOid(n.contentType);if(s!==Ce.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Ce.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==H.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;r.encryptedContent={algorithm:H.derToOid(n.encAlgorithm),parameter:Ce.util.createBuffer(n.encParameter.value),content:Ce.util.createBuffer(a)}}if(n.content){var a="";if(Ce.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==H.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;r.content=Ce.util.createBuffer(a)}return r.version=n.version.charCodeAt(0),r.rawCapture=n,n}function J3e(r){if(r.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(r.content===void 0){var e;switch(r.encryptedContent.algorithm){case Ce.pki.oids["aes128-CBC"]:case Ce.pki.oids["aes192-CBC"]:case Ce.pki.oids["aes256-CBC"]:e=Ce.aes.createDecryptionCipher(r.encryptedContent.key);break;case Ce.pki.oids.desCBC:case Ce.pki.oids["des-EDE3-CBC"]:e=Ce.des.createDecryptionCipher(r.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+r.encryptedContent.algorithm)}if(e.start(r.encryptedContent.parameter),e.update(r.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");r.content=e.output}}});var Bde=O(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});var nB=class{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;let t={value:e,done:!1};if(this.pullQueue.length){let n=this.pullQueue.shift();n&&n.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(let e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{let t=Promise.reject(e);t.catch(()=>{}),this.pushQueue.push(t)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{let t=this.pushQueue.shift();return t?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((n,i)=>{this.pullQueue.push({resolve:n,reject:i})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}},Vv=class{constructor(e,{highWaterMark:t=100,lowWaterMark:n=1}={}){let i=new nB;i.highWaterMark=t,i.lowWaterMark=n,i.removeCallback=e({push:o=>i.push(o),stop:()=>i.stop(),fail:o=>i.fail(o),on:(o,s)=>{i.eventHandlers[o]=s}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}};zv.EventIterator=Vv;zv.default=Vv});var oB=O(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});var iB=Bde();vp.EventIterator=iB.EventIterator;function iKe(r){return new iB.EventIterator(e=>(this.addListener("data",e.push),this.addListener("end",e.stop),this.addListener("error",e.fail),e.on("highWater",()=>this.pause()),e.on("lowWater",()=>this.resume()),()=>{this.removeListener("data",e.push),this.removeListener("end",e.stop),this.removeListener("error",e.fail),this.destroy?this.destroy():typeof this.close=="function"&&this.close()}),r)}vp.stream=iKe;vp.default=iB.EventIterator});var qv=O(cB=>{(function(){cB.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(cB)});var ec=O((Mde,Bu)=>{(function(){var r,e,t,n,i,o,s,a=[].slice,c={}.hasOwnProperty;r=function(){var u,l,d,h,f,m;if(m=arguments[0],f=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(u=0,d=f.length;u<d;u++)if(h=f[u],h!=null)for(l in h)c.call(h,l)&&(m[l]=h[l]);return m},i=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},o=function(u){var l;return!!u&&((l=typeof u)=="function"||l==="object")},t=function(u){return i(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},n=function(u){var l;if(t(u))return!u.length;for(l in u)if(c.call(u,l))return!1;return!0},s=function(u){var l,d;return o(u)&&(d=Object.getPrototypeOf(u))&&(l=d.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},e=function(u){return i(u.valueOf)?u.valueOf():u},Bu.exports.assign=r,Bu.exports.isFunction=i,Bu.exports.isObject=o,Bu.exports.isArray=t,Bu.exports.isEmpty=n,Bu.exports.isPlainObject=s,Bu.exports.getValue=e}).call(Mde)});var uB=O((Ude,Fde)=>{(function(){var r;Fde.exports=r=function(){function e(){}return e.prototype.hasFeature=function(t,n){return!0},e.prototype.createDocumentType=function(t,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Ude)});var qde=O((Vde,zde)=>{(function(){var r;zde.exports=r=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(Vde)});var jde=O(($de,Kde)=>{(function(){var r;Kde.exports=r=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call($de)});var Wde=O((Gde,Hde)=>{(function(){var r,e,t;e=qde(),t=jde(),Hde.exports=r=function(){function n(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,o){return!0},n.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},n}()}).call(Gde)});var yn=O((Yde,Xde)=>{(function(){Xde.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Yde)});var lB=O((Qde,Zde)=>{(function(){var r,e,t;r=yn(),t=cs(),Zde.exports=e=function(){function n(i,o,s){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(s),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(n.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(n.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"specified",{get:function(){return!0}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},n.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},n.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},n}()}).call(Qde)});var $v=O((Jde,efe)=>{(function(){var r;efe.exports=r=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var n;return n=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,n||null},e.prototype.removeNamedItem=function(t){var n;return n=this.nodes[t],delete this.nodes[t],n||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Jde)});var Kv=O((tfe,rfe)=>{(function(){var r,e,t,n,i,o,s,a,c,u=function(d,h){for(var f in h)l.call(h,f)&&(d[f]=h[f]);function m(){this.constructor=d}return m.prototype=h.prototype,d.prototype=new m,d.__super__=h.prototype,d},l={}.hasOwnProperty;c=ec(),a=c.isObject,s=c.isFunction,o=c.getValue,i=cs(),r=yn(),e=lB(),n=$v(),rfe.exports=t=function(d){u(h,d);function h(f,m,w){var _,E,S,p;if(h.__super__.constructor.call(this,f),m==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(m),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,w!=null&&this.attribute(w),f.type===r.Document&&(this.isRoot=!0,this.documentObject=f,f.rootObject=this,f.children)){for(p=f.children,E=0,S=p.length;E<S;E++)if(_=p[E],_.type===r.DocType){_.name=this.name;break}}}return Object.defineProperty(h.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(h.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(h.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(h.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),h.prototype.clone=function(){var f,m,w,_;w=Object.create(this),w.isRoot&&(w.documentObject=null),w.attribs={},_=this.attribs;for(m in _)l.call(_,m)&&(f=_[m],w.attribs[m]=f.clone());return w.children=[],this.children.forEach(function(E){var S;return S=E.clone(),S.parent=w,w.children.push(S)}),w},h.prototype.attribute=function(f,m){var w,_;if(f!=null&&(f=o(f)),a(f))for(w in f)l.call(f,w)&&(_=f[w],this.attribute(w,_));else s(m)&&(m=m.apply()),this.options.keepNullAttributes&&m==null?this.attribs[f]=new e(this,f,""):m!=null&&(this.attribs[f]=new e(this,f,m));return this},h.prototype.removeAttribute=function(f){var m,w,_;if(f==null)throw new Error("Missing attribute name. "+this.debugInfo());if(f=o(f),Array.isArray(f))for(w=0,_=f.length;w<_;w++)m=f[w],delete this.attribs[m];else delete this.attribs[f];return this},h.prototype.toString=function(f){return this.options.writer.element(this,this.options.writer.filterOptions(f))},h.prototype.att=function(f,m){return this.attribute(f,m)},h.prototype.a=function(f,m){return this.attribute(f,m)},h.prototype.getAttribute=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f].value:null},h.prototype.setAttribute=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNode=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f]:null},h.prototype.setAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNS=function(f,m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getAttributeNodeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setAttributeNodeNS=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasAttribute=function(f){return this.attribs.hasOwnProperty(f)},h.prototype.hasAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttribute=function(f,m){return this.attribs.hasOwnProperty(f)?this.attribs[f].isId:m},h.prototype.setIdAttributeNS=function(f,m,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setIdAttributeNode=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByTagNameNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(f){var m,w,_;if(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.namespaceURI!==this.namespaceURI||f.prefix!==this.prefix||f.localName!==this.localName||f.attribs.length!==this.attribs.length)return!1;for(m=w=0,_=this.attribs.length-1;0<=_?w<=_:w>=_;m=0<=_?++w:--w)if(!this.attribs[m].isEqualNode(f.attribs[m]))return!1;return!0},h}(i)}).call(tfe)});var Ep=O((nfe,ife)=>{(function(){var r,e,t=function(i,o){for(var s in o)n.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},n={}.hasOwnProperty;e=cs(),ife.exports=r=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(s){return this.value=s||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(s){return this.value=s||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(s,a,c){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.data!==this.data)},o}(e)}).call(nfe)});var jv=O((ofe,sfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;r=yn(),t=Ep(),sfe.exports=e=function(o){n(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},s}(t)}).call(ofe)});var Gv=O((afe,cfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;r=yn(),e=Ep(),cfe.exports=t=function(o){n(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},s}(e)}).call(afe)});var Hv=O((ufe,lfe)=>{(function(){var r,e,t,n,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=ec().isObject,t=cs(),r=yn(),lfe.exports=e=function(s){i(a,s);function a(c,u,l,d){var h;a.__super__.constructor.call(this,c),n(u)&&(h=u,u=h.version,l=h.encoding,d=h.standalone),u||(u="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(u),l!=null&&(this.encoding=this.stringify.xmlEncoding(l)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return a.prototype.toString=function(c){return this.options.writer.declaration(this,this.options.writer.filterOptions(c))},a}(t)}).call(ufe)});var Wv=O((dfe,ffe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=cs(),r=yn(),ffe.exports=e=function(o){n(s,o);function s(a,c,u,l,d,h){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(u==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(c));if(!l)throw new Error("Missing DTD attribute type. "+this.debugInfo(c));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(c));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(c));if(h&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(c));this.elementName=this.stringify.name(c),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(u),this.attributeType=this.stringify.dtdAttType(l),h&&(this.defaultValue=this.stringify.dtdAttDefault(h)),this.defaultValueType=d}return s.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},s}(t)}).call(dfe)});var Yv=O((hfe,pfe)=>{(function(){var r,e,t,n,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;n=ec().isObject,t=cs(),r=yn(),pfe.exports=e=function(s){i(a,s);function a(c,u,l,d){if(a.__super__.constructor.call(this,c),l==null)throw new Error("Missing DTD entity name. "+this.debugInfo(l));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(l));if(this.pe=!!u,this.name=this.stringify.name(l),this.type=r.EntityDeclaration,!n(d))this.value=this.stringify.dtdEntityValue(d),this.internal=!0;else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(l));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(l));if(this.internal=!1,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(l))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(c){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(c))},a}(t)}).call(hfe)});var Xv=O((mfe,gfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=cs(),r=yn(),gfe.exports=e=function(o){n(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD element name. "+this.debugInfo());u||(u="(#PCDATA)"),Array.isArray(u)&&(u="("+u.join(",")+")"),this.name=this.stringify.name(c),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(u)}return s.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},s}(t)}).call(mfe)});var Qv=O((yfe,wfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=cs(),r=yn(),wfe.exports=e=function(o){n(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD notation name. "+this.debugInfo(c));if(!u.pubID&&!u.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(c));this.name=this.stringify.name(c),this.type=r.NotationDeclaration,u.pubID!=null&&(this.pubID=this.stringify.dtdPubID(u.pubID)),u.sysID!=null&&(this.sysID=this.stringify.dtdSysID(u.sysID))}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),s.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},s}(t)}).call(yfe)});var Zv=O((bfe,_fe)=>{(function(){var r,e,t,n,i,o,s,a,c,u=function(d,h){for(var f in h)l.call(h,f)&&(d[f]=h[f]);function m(){this.constructor=d}return m.prototype=h.prototype,d.prototype=new m,d.__super__=h.prototype,d},l={}.hasOwnProperty;c=ec().isObject,a=cs(),r=yn(),e=Wv(),n=Yv(),t=Xv(),i=Qv(),s=$v(),_fe.exports=o=function(d){u(h,d);function h(f,m,w){var _,E,S,p,g,y;if(h.__super__.constructor.call(this,f),this.type=r.DocType,f.children){for(p=f.children,E=0,S=p.length;E<S;E++)if(_=p[E],_.type===r.Element){this.name=_.name;break}}this.documentObject=f,c(m)&&(g=m,m=g.pubID,w=g.sysID),w==null&&(y=[m,w],w=y[0],m=y[1]),m!=null&&(this.pubID=this.stringify.dtdPubID(m)),w!=null&&(this.sysID=this.stringify.dtdSysID(w))}return Object.defineProperty(h.prototype,"entities",{get:function(){var f,m,w,_,E;for(_={},E=this.children,m=0,w=E.length;m<w;m++)f=E[m],f.type===r.EntityDeclaration&&!f.pe&&(_[f.name]=f);return new s(_)}}),Object.defineProperty(h.prototype,"notations",{get:function(){var f,m,w,_,E;for(_={},E=this.children,m=0,w=E.length;m<w;m++)f=E[m],f.type===r.NotationDeclaration&&(_[f.name]=f);return new s(_)}}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(h.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.element=function(f,m){var w;return w=new t(this,f,m),this.children.push(w),this},h.prototype.attList=function(f,m,w,_,E){var S;return S=new e(this,f,m,w,_,E),this.children.push(S),this},h.prototype.entity=function(f,m){var w;return w=new n(this,!1,f,m),this.children.push(w),this},h.prototype.pEntity=function(f,m){var w;return w=new n(this,!0,f,m),this.children.push(w),this},h.prototype.notation=function(f,m){var w;return w=new i(this,f,m),this.children.push(w),this},h.prototype.toString=function(f){return this.options.writer.docType(this,this.options.writer.filterOptions(f))},h.prototype.ele=function(f,m){return this.element(f,m)},h.prototype.att=function(f,m,w,_,E){return this.attList(f,m,w,_,E)},h.prototype.ent=function(f,m){return this.entity(f,m)},h.prototype.pent=function(f,m){return this.pEntity(f,m)},h.prototype.not=function(f,m){return this.notation(f,m)},h.prototype.up=function(){return this.root()||this.documentObject},h.prototype.isEqualNode=function(f){return!(!h.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.name!==this.name||f.publicId!==this.publicId||f.systemId!==this.systemId)},h}(a)}).call(bfe)});var Jv=O((vfe,Efe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;r=yn(),e=cs(),Efe.exports=t=function(o){n(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(c)}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},s}(e)}).call(vfe)});var eE=O((xfe,Sfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;r=yn(),e=Ep(),Sfe.exports=t=function(o){n(s,o);function s(a,c){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(c)}return Object.defineProperty(s.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(s.prototype,"wholeText",{get:function(){var a,c,u;for(u="",c=this.previousSibling;c;)u=c.data+u,c=c.previousSibling;for(u+=this.data,a=this.nextSibling;a;)u=u+a.data,a=a.nextSibling;return u}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},s.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s}(e)}).call(xfe)});var tE=O((Tfe,Ife)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;r=yn(),e=Ep(),Ife.exports=t=function(o){n(s,o);function s(a,c,u){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(c),this.name=this.target,u&&(this.value=this.stringify.insValue(u))}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},s.prototype.isEqualNode=function(a){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},s}(e)}).call(Tfe)});var dB=O((Afe,Cfe)=>{(function(){var r,e,t,n=function(o,s){for(var a in s)i.call(s,a)&&(o[a]=s[a]);function c(){this.constructor=o}return c.prototype=s.prototype,o.prototype=new c,o.__super__=s.prototype,o},i={}.hasOwnProperty;t=cs(),r=yn(),Cfe.exports=e=function(o){n(s,o);function s(a){s.__super__.constructor.call(this,a),this.type=r.Dummy}return s.prototype.clone=function(){return Object.create(this)},s.prototype.toString=function(a){return""},s}(t)}).call(Afe)});var Pfe=O((Rfe,kfe)=>{(function(){var r;kfe.exports=r=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(Rfe)});var Ofe=O((Dfe,Nfe)=>{(function(){Nfe.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Dfe)});var cs=O((Lfe,Bfe)=>{(function(){var r,e,t,n,i,o,s,a,c,u,l,d,h,f,m,w,_,E,S,p={}.hasOwnProperty;S=ec(),E=S.isObject,_=S.isFunction,w=S.isEmpty,m=S.getValue,a=null,t=null,n=null,i=null,o=null,h=null,f=null,d=null,s=null,e=null,l=null,c=null,r=null,Bfe.exports=u=function(){function g(y){this.parent=y,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Kv(),t=jv(),n=Gv(),i=Hv(),o=Zv(),h=Jv(),f=eE(),d=tE(),s=dB(),e=yn(),l=Pfe(),c=$v(),r=Ofe())}return Object.defineProperty(g.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(g.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(g.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){var y;return y=this.parent.children.indexOf(this),this.parent.children[y-1]||null}}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){var y;return y=this.parent.children.indexOf(this),this.parent.children[y+1]||null}}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(g.prototype,"textContent",{get:function(){var y,b,x,v,T;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(T="",v=this.children,b=0,x=v.length;b<x;b++)y=v[b],y.textContent&&(T+=y.textContent);return T}else return null},set:function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.setParent=function(y){var b,x,v,T,I;for(this.parent=y,y&&(this.options=y.options,this.stringify=y.stringify),T=this.children,I=[],x=0,v=T.length;x<v;x++)b=T[x],I.push(b.setParent(this));return I},g.prototype.element=function(y,b,x){var v,T,I,R,M,U,j,D,q,V,te;if(U=null,b===null&&x==null&&(q=[{},null],b=q[0],x=q[1]),b==null&&(b={}),b=m(b),E(b)||(V=[b,x],x=V[0],b=V[1]),y!=null&&(y=m(y)),Array.isArray(y))for(I=0,j=y.length;I<j;I++)T=y[I],U=this.element(T);else if(_(y))U=this.element(y.apply());else if(E(y)){for(M in y)if(p.call(y,M))if(te=y[M],_(te)&&(te=te.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&M.indexOf(this.stringify.convertAttKey)===0)U=this.attribute(M.substr(this.stringify.convertAttKey.length),te);else if(!this.options.separateArrayItems&&Array.isArray(te)&&w(te))U=this.dummy();else if(E(te)&&w(te))U=this.element(M);else if(!this.options.keepNullNodes&&te==null)U=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(te))for(R=0,D=te.length;R<D;R++)T=te[R],v={},v[M]=T,U=this.element(v);else E(te)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&M.indexOf(this.stringify.convertTextKey)===0?U=this.element(te):(U=this.element(M),U.element(te)):U=this.element(M,te)}else!this.options.keepNullNodes&&x===null?U=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&y.indexOf(this.stringify.convertTextKey)===0?U=this.text(x):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&y.indexOf(this.stringify.convertCDataKey)===0?U=this.cdata(x):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&y.indexOf(this.stringify.convertCommentKey)===0?U=this.comment(x):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&y.indexOf(this.stringify.convertRawKey)===0?U=this.raw(x):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&y.indexOf(this.stringify.convertPIKey)===0?U=this.instruction(y.substr(this.stringify.convertPIKey.length),x):U=this.node(y,b,x);if(U==null)throw new Error("Could not create any elements with: "+y+". "+this.debugInfo());return U},g.prototype.insertBefore=function(y,b,x){var v,T,I,R,M;if(y!=null&&y.type)return I=y,R=b,I.setParent(this),R?(T=children.indexOf(R),M=children.splice(T),children.push(I),Array.prototype.push.apply(children,M)):children.push(I),I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return T=this.parent.children.indexOf(this),M=this.parent.children.splice(T),v=this.parent.element(y,b,x),Array.prototype.push.apply(this.parent.children,M),v},g.prototype.insertAfter=function(y,b,x){var v,T,I;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return T=this.parent.children.indexOf(this),I=this.parent.children.splice(T+1),v=this.parent.element(y,b,x),Array.prototype.push.apply(this.parent.children,I),v},g.prototype.remove=function(){var y,b;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return y=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[y,y-y+1].concat(b=[])),this.parent},g.prototype.node=function(y,b,x){var v,T;return y!=null&&(y=m(y)),b||(b={}),b=m(b),E(b)||(T=[b,x],x=T[0],b=T[1]),v=new a(this,y,b),x!=null&&v.text(x),this.children.push(v),v},g.prototype.text=function(y){var b;return E(y)&&this.element(y),b=new f(this,y),this.children.push(b),this},g.prototype.cdata=function(y){var b;return b=new t(this,y),this.children.push(b),this},g.prototype.comment=function(y){var b;return b=new n(this,y),this.children.push(b),this},g.prototype.commentBefore=function(y){var b,x,v;return x=this.parent.children.indexOf(this),v=this.parent.children.splice(x),b=this.parent.comment(y),Array.prototype.push.apply(this.parent.children,v),this},g.prototype.commentAfter=function(y){var b,x,v;return x=this.parent.children.indexOf(this),v=this.parent.children.splice(x+1),b=this.parent.comment(y),Array.prototype.push.apply(this.parent.children,v),this},g.prototype.raw=function(y){var b;return b=new h(this,y),this.children.push(b),this},g.prototype.dummy=function(){var y;return y=new s(this),y},g.prototype.instruction=function(y,b){var x,v,T,I,R;if(y!=null&&(y=m(y)),b!=null&&(b=m(b)),Array.isArray(y))for(I=0,R=y.length;I<R;I++)x=y[I],this.instruction(x);else if(E(y))for(x in y)p.call(y,x)&&(v=y[x],this.instruction(x,v));else _(b)&&(b=b.apply()),T=new d(this,y,b),this.children.push(T);return this},g.prototype.instructionBefore=function(y,b){var x,v,T;return v=this.parent.children.indexOf(this),T=this.parent.children.splice(v),x=this.parent.instruction(y,b),Array.prototype.push.apply(this.parent.children,T),this},g.prototype.instructionAfter=function(y,b){var x,v,T;return v=this.parent.children.indexOf(this),T=this.parent.children.splice(v+1),x=this.parent.instruction(y,b),Array.prototype.push.apply(this.parent.children,T),this},g.prototype.declaration=function(y,b,x){var v,T;return v=this.document(),T=new i(v,y,b,x),v.children.length===0?v.children.unshift(T):v.children[0].type===e.Declaration?v.children[0]=T:v.children.unshift(T),v.root()||v},g.prototype.dtd=function(y,b){var x,v,T,I,R,M,U,j,D,q;for(v=this.document(),T=new o(v,y,b),D=v.children,I=R=0,U=D.length;R<U;I=++R)if(x=D[I],x.type===e.DocType)return v.children[I]=T,T;for(q=v.children,I=M=0,j=q.length;M<j;I=++M)if(x=q[I],x.isRoot)return v.children.splice(I,0,T),T;return v.children.push(T),T},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var y;for(y=this;y;){if(y.type===e.Document)return y.rootObject;if(y.isRoot)return y;y=y.parent}},g.prototype.document=function(){var y;for(y=this;y;){if(y.type===e.Document)return y;y=y.parent}},g.prototype.end=function(y){return this.document().end(y)},g.prototype.prev=function(){var y;if(y=this.parent.children.indexOf(this),y<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[y-1]},g.prototype.next=function(){var y;if(y=this.parent.children.indexOf(this),y===-1||y===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[y+1]},g.prototype.importDocument=function(y){var b;return b=y.root().clone(),b.parent=this,b.isRoot=!1,this.children.push(b),this},g.prototype.debugInfo=function(y){var b,x;return y=y||this.name,y==null&&!((b=this.parent)!=null&&b.name)?"":y==null?"parent: <"+this.parent.name+">":(x=this.parent)!=null&&x.name?"node: <"+y+">, parent: <"+this.parent.name+">":"node: <"+y+">"},g.prototype.ele=function(y,b,x){return this.element(y,b,x)},g.prototype.nod=function(y,b,x){return this.node(y,b,x)},g.prototype.txt=function(y){return this.text(y)},g.prototype.dat=function(y){return this.cdata(y)},g.prototype.com=function(y){return this.comment(y)},g.prototype.ins=function(y,b){return this.instruction(y,b)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(y,b,x){return this.declaration(y,b,x)},g.prototype.e=function(y,b,x){return this.element(y,b,x)},g.prototype.n=function(y,b,x){return this.node(y,b,x)},g.prototype.t=function(y){return this.text(y)},g.prototype.d=function(y){return this.cdata(y)},g.prototype.c=function(y){return this.comment(y)},g.prototype.r=function(y){return this.raw(y)},g.prototype.i=function(y,b){return this.instruction(y,b)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(y){return this.importDocument(y)},g.prototype.replaceChild=function(y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeChild=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.appendChild=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasChildNodes=function(){return this.children.length!==0},g.prototype.cloneNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isSupported=function(y,b){return!0},g.prototype.hasAttributes=function(){return this.attribs.length!==0},g.prototype.compareDocumentPosition=function(y){var b,x;return b=this,b===y?0:this.document()!==y.document()?(x=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?x|=r.Preceding:x|=r.Following,x):b.isAncestor(y)?r.Contains|r.Preceding:b.isDescendant(y)?r.Contains|r.Following:b.isPreceding(y)?r.Preceding:r.Following},g.prototype.isSameNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupPrefix=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isDefaultNamespace=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupNamespaceURI=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(y){var b,x,v;if(y.nodeType!==this.nodeType||y.children.length!==this.children.length)return!1;for(b=x=0,v=this.children.length-1;0<=v?x<=v:x>=v;b=0<=v?++x:--x)if(!this.children[b].isEqualNode(y.children[b]))return!1;return!0},g.prototype.getFeature=function(y,b){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setUserData=function(y,b,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getUserData=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.contains=function(y){return y?y===this||this.isDescendant(y):!1},g.prototype.isDescendant=function(y){var b,x,v,T,I;for(I=this.children,v=0,T=I.length;v<T;v++)if(b=I[v],y===b||(x=b.isDescendant(y),x))return!0;return!1},g.prototype.isAncestor=function(y){return y.isDescendant(this)},g.prototype.isPreceding=function(y){var b,x;return b=this.treePosition(y),x=this.treePosition(this),b===-1||x===-1?!1:b<x},g.prototype.isFollowing=function(y){var b,x;return b=this.treePosition(y),x=this.treePosition(this),b===-1||x===-1?!1:b>x},g.prototype.treePosition=function(y){var b,x;return x=0,b=!1,this.foreachTreeNode(this.document(),function(v){if(x++,!b&&v===y)return b=!0}),b?x:-1},g.prototype.foreachTreeNode=function(y,b){var x,v,T,I,R;for(y||(y=this.document()),I=y.children,v=0,T=I.length;v<T;v++){if(x=I[v],R=b(x))return R;if(R=this.foreachTreeNode(x,b),R)return R}},g}()}).call(Lfe)});var fB=O((Mfe,Ufe)=>{(function(){var r,e=function(n,i){return function(){return n.apply(i,arguments)}},t={}.hasOwnProperty;Ufe.exports=r=function(){function n(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,s,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),s=i.stringify||{};for(o in s)t.call(s,o)&&(a=s[o],this[o]=a)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var o,s;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+s.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,s=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+s.index);return i},n.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(Mfe)});var xp=O((Ffe,Vfe)=>{(function(){Vfe.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Ffe)});var hB=O((zfe,qfe)=>{(function(){var r,e,t,n,i,o,s,a,c,u,l,d,h,f,m,w,_,E={}.hasOwnProperty;_=ec().assign,r=yn(),c=Hv(),u=Zv(),t=jv(),n=Gv(),d=Kv(),f=Jv(),m=eE(),h=tE(),l=dB(),i=Wv(),o=Xv(),s=Yv(),a=Qv(),e=xp(),qfe.exports=w=function(){function S(p){var g,y,b;p||(p={}),this.options=p,y=p.writer||{};for(g in y)E.call(y,g)&&(b=y[g],this["_"+g]=this[g],this[g]=b)}return S.prototype.filterOptions=function(p){var g,y,b,x,v,T,I,R;return p||(p={}),p=_({},this.options,p),g={writer:this},g.pretty=p.pretty||!1,g.allowEmpty=p.allowEmpty||!1,g.indent=(y=p.indent)!=null?y:"  ",g.newline=(b=p.newline)!=null?b:`
`,g.offset=(x=p.offset)!=null?x:0,g.dontPrettyTextNodes=(v=(T=p.dontPrettyTextNodes)!=null?T:p.dontprettytextnodes)!=null?v:0,g.spaceBeforeSlash=(I=(R=p.spaceBeforeSlash)!=null?R:p.spacebeforeslash)!=null?I:"",g.spaceBeforeSlash===!0&&(g.spaceBeforeSlash=" "),g.suppressPrettyCount=0,g.user={},g.state=e.None,g},S.prototype.indent=function(p,g,y){var b;return!g.pretty||g.suppressPrettyCount?"":g.pretty&&(b=(y||0)+g.offset+1,b>0)?new Array(b).join(g.indent):""},S.prototype.endline=function(p,g,y){return!g.pretty||g.suppressPrettyCount?"":g.newline},S.prototype.attribute=function(p,g,y){var b;return this.openAttribute(p,g,y),b=" "+p.name+'="'+p.value+'"',this.closeAttribute(p,g,y),b},S.prototype.cdata=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<![CDATA[",g.state=e.InsideTag,b+=p.value,g.state=e.CloseTag,b+="]]>"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.comment=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<!-- ",g.state=e.InsideTag,b+=p.value,g.state=e.CloseTag,b+=" -->"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.declaration=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<?xml",g.state=e.InsideTag,b+=' version="'+p.version+'"',p.encoding!=null&&(b+=' encoding="'+p.encoding+'"'),p.standalone!=null&&(b+=' standalone="'+p.standalone+'"'),g.state=e.CloseTag,b+=g.spaceBeforeSlash+"?>",b+=this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.docType=function(p,g,y){var b,x,v,T,I;if(y||(y=0),this.openNode(p,g,y),g.state=e.OpenTag,T=this.indent(p,g,y),T+="<!DOCTYPE "+p.root().name,p.pubID&&p.sysID?T+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(T+=' SYSTEM "'+p.sysID+'"'),p.children.length>0){for(T+=" [",T+=this.endline(p,g,y),g.state=e.InsideTag,I=p.children,x=0,v=I.length;x<v;x++)b=I[x],T+=this.writeChildNode(b,g,y+1);g.state=e.CloseTag,T+="]"}return g.state=e.CloseTag,T+=g.spaceBeforeSlash+">",T+=this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),T},S.prototype.element=function(p,g,y){var b,x,v,T,I,R,M,U,j,D,q,V,te,pe;y||(y=0),D=!1,q="",this.openNode(p,g,y),g.state=e.OpenTag,q+=this.indent(p,g,y)+"<"+p.name,V=p.attribs;for(j in V)E.call(V,j)&&(b=V[j],q+=this.attribute(b,g,y));if(v=p.children.length,T=v===0?null:p.children[0],v===0||p.children.every(function(ue){return(ue.type===r.Text||ue.type===r.Raw)&&ue.value===""}))g.allowEmpty?(q+=">",g.state=e.CloseTag,q+="</"+p.name+">"+this.endline(p,g,y)):(g.state=e.CloseTag,q+=g.spaceBeforeSlash+"/>"+this.endline(p,g,y));else if(g.pretty&&v===1&&(T.type===r.Text||T.type===r.Raw)&&T.value!=null)q+=">",g.state=e.InsideTag,g.suppressPrettyCount++,D=!0,q+=this.writeChildNode(T,g,y+1),g.suppressPrettyCount--,D=!1,g.state=e.CloseTag,q+="</"+p.name+">"+this.endline(p,g,y);else{if(g.dontPrettyTextNodes){for(te=p.children,I=0,M=te.length;I<M;I++)if(x=te[I],(x.type===r.Text||x.type===r.Raw)&&x.value!=null){g.suppressPrettyCount++,D=!0;break}}for(q+=">"+this.endline(p,g,y),g.state=e.InsideTag,pe=p.children,R=0,U=pe.length;R<U;R++)x=pe[R],q+=this.writeChildNode(x,g,y+1);g.state=e.CloseTag,q+=this.indent(p,g,y)+"</"+p.name+">",D&&g.suppressPrettyCount--,q+=this.endline(p,g,y),g.state=e.None}return this.closeNode(p,g,y),q},S.prototype.writeChildNode=function(p,g,y){switch(p.type){case r.CData:return this.cdata(p,g,y);case r.Comment:return this.comment(p,g,y);case r.Element:return this.element(p,g,y);case r.Raw:return this.raw(p,g,y);case r.Text:return this.text(p,g,y);case r.ProcessingInstruction:return this.processingInstruction(p,g,y);case r.Dummy:return"";case r.Declaration:return this.declaration(p,g,y);case r.DocType:return this.docType(p,g,y);case r.AttributeDeclaration:return this.dtdAttList(p,g,y);case r.ElementDeclaration:return this.dtdElement(p,g,y);case r.EntityDeclaration:return this.dtdEntity(p,g,y);case r.NotationDeclaration:return this.dtdNotation(p,g,y);default:throw new Error("Unknown XML node type: "+p.constructor.name)}},S.prototype.processingInstruction=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<?",g.state=e.InsideTag,b+=p.target,p.value&&(b+=" "+p.value),g.state=e.CloseTag,b+=g.spaceBeforeSlash+"?>",b+=this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.raw=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y),g.state=e.InsideTag,b+=p.value,g.state=e.CloseTag,b+=this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.text=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y),g.state=e.InsideTag,b+=p.value,g.state=e.CloseTag,b+=this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.dtdAttList=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<!ATTLIST",g.state=e.InsideTag,b+=" "+p.elementName+" "+p.attributeName+" "+p.attributeType,p.defaultValueType!=="#DEFAULT"&&(b+=" "+p.defaultValueType),p.defaultValue&&(b+=' "'+p.defaultValue+'"'),g.state=e.CloseTag,b+=g.spaceBeforeSlash+">"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.dtdElement=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<!ELEMENT",g.state=e.InsideTag,b+=" "+p.name+" "+p.value,g.state=e.CloseTag,b+=g.spaceBeforeSlash+">"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.dtdEntity=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<!ENTITY",g.state=e.InsideTag,p.pe&&(b+=" %"),b+=" "+p.name,p.value?b+=' "'+p.value+'"':(p.pubID&&p.sysID?b+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.sysID&&(b+=' SYSTEM "'+p.sysID+'"'),p.nData&&(b+=" NDATA "+p.nData)),g.state=e.CloseTag,b+=g.spaceBeforeSlash+">"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.dtdNotation=function(p,g,y){var b;return this.openNode(p,g,y),g.state=e.OpenTag,b=this.indent(p,g,y)+"<!NOTATION",g.state=e.InsideTag,b+=" "+p.name,p.pubID&&p.sysID?b+=' PUBLIC "'+p.pubID+'" "'+p.sysID+'"':p.pubID?b+=' PUBLIC "'+p.pubID+'"':p.sysID&&(b+=' SYSTEM "'+p.sysID+'"'),g.state=e.CloseTag,b+=g.spaceBeforeSlash+">"+this.endline(p,g,y),g.state=e.None,this.closeNode(p,g,y),b},S.prototype.openNode=function(p,g,y){},S.prototype.closeNode=function(p,g,y){},S.prototype.openAttribute=function(p,g,y){},S.prototype.closeAttribute=function(p,g,y){},S}()}).call(zfe)});var rE=O(($fe,Kfe)=>{(function(){var r,e,t=function(i,o){for(var s in o)n.call(o,s)&&(i[s]=o[s]);function a(){this.constructor=i}return a.prototype=o.prototype,i.prototype=new a,i.__super__=o.prototype,i},n={}.hasOwnProperty;e=hB(),Kfe.exports=r=function(i){t(o,i);function o(s){o.__super__.constructor.call(this,s)}return o.prototype.document=function(s,a){var c,u,l,d,h;for(a=this.filterOptions(a),d="",h=s.children,u=0,l=h.length;u<l;u++)c=h[u],d+=this.writeChildNode(c,a,0);return a.pretty&&d.slice(-a.newline.length)===a.newline&&(d=d.slice(0,-a.newline.length)),d},o}(e)}).call($fe)});var pB=O((jfe,Gfe)=>{(function(){var r,e,t,n,i,o,s,a,c=function(l,d){for(var h in d)u.call(d,h)&&(l[h]=d[h]);function f(){this.constructor=l}return f.prototype=d.prototype,l.prototype=new f,l.__super__=d.prototype,l},u={}.hasOwnProperty;a=ec().isPlainObject,t=uB(),e=Wde(),i=cs(),r=yn(),s=fB(),o=rE(),Gfe.exports=n=function(l){c(d,l);function d(h){d.__super__.constructor.call(this,null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new e,h||(h={}),h.writer||(h.writer=new o),this.options=h,this.stringify=new s(h)}return Object.defineProperty(d.prototype,"implementation",{value:new t}),Object.defineProperty(d.prototype,"doctype",{get:function(){var h,f,m,w;for(w=this.children,f=0,m=w.length;f<m;f++)if(h=w[f],h.type===r.DocType)return h;return null}}),Object.defineProperty(d.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(d.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(d.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(d.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(d.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(d.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(d.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(d.prototype,"origin",{get:function(){return null}}),Object.defineProperty(d.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(d.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(d.prototype,"contentType",{get:function(){return null}}),d.prototype.end=function(h){var f;return f={},h?a(h)&&(f=h,h=this.options.writer):h=this.options.writer,h.document(this,h.filterOptions(f))},d.prototype.toString=function(h){return this.options.writer.document(this,this.options.writer.filterOptions(h))},d.prototype.createElement=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTextNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createComment=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createCDATASection=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createProcessingInstruction=function(h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttribute=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEntityReference=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.importNode=function(h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createElementNS=function(h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttributeNS=function(h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementById=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.adoptNode=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.renameNode=function(h,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEvent=function(h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createNodeIterator=function(h,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTreeWalker=function(h,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(i)}).call(jfe)});var Yfe=O((Hfe,Wfe)=>{(function(){var r,e,t,n,i,o,s,a,c,u,l,d,h,f,m,w,_,E,S,p,g,y,b,x,v={}.hasOwnProperty;x=ec(),y=x.isObject,g=x.isFunction,b=x.isPlainObject,p=x.getValue,r=yn(),d=pB(),f=Kv(),n=jv(),i=Gv(),w=Jv(),S=eE(),m=tE(),u=Hv(),l=Zv(),o=Wv(),a=Yv(),s=Xv(),c=Qv(),t=lB(),E=fB(),_=rE(),e=xp(),Wfe.exports=h=function(){function T(I,R,M){var U;this.name="?xml",this.type=r.Document,I||(I={}),U={},I.writer?b(I.writer)&&(U=I.writer,I.writer=new _):I.writer=new _,this.options=I,this.writer=I.writer,this.writerOptions=this.writer.filterOptions(U),this.stringify=new E(I),this.onDataCallback=R||function(){},this.onEndCallback=M||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.createChildNode=function(I){var R,M,U,j,D,q,V,te;switch(I.type){case r.CData:this.cdata(I.value);break;case r.Comment:this.comment(I.value);break;case r.Element:U={},V=I.attribs;for(M in V)v.call(V,M)&&(R=V[M],U[M]=R.value);this.node(I.name,U);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(I.value);break;case r.Text:this.text(I.value);break;case r.ProcessingInstruction:this.instruction(I.target,I.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+I.constructor.name)}for(te=I.children,D=0,q=te.length;D<q;D++)j=te[D],this.createChildNode(j),j.type===r.Element&&this.up();return this},T.prototype.dummy=function(){return this},T.prototype.node=function(I,R,M){var U;if(I==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(I));return this.openCurrent(),I=p(I),R==null&&(R={}),R=p(R),y(R)||(U=[R,M],M=U[0],R=U[1]),this.currentNode=new f(this,I,R),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,M!=null&&this.text(M),this},T.prototype.element=function(I,R,M){var U,j,D,q,V,te;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(I)||y(I)||g(I))for(q=this.options.noValidation,this.options.noValidation=!0,te=new d(this.options).element("TEMP_ROOT"),te.element(I),this.options.noValidation=q,V=te.children,j=0,D=V.length;j<D;j++)U=V[j],this.createChildNode(U),U.type===r.Element&&this.up();else this.node(I,R,M);return this},T.prototype.attribute=function(I,R){var M,U;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(I));if(I!=null&&(I=p(I)),y(I))for(M in I)v.call(I,M)&&(U=I[M],this.attribute(M,U));else g(R)&&(R=R.apply()),this.options.keepNullAttributes&&R==null?this.currentNode.attribs[I]=new t(this,I,""):R!=null&&(this.currentNode.attribs[I]=new t(this,I,R));return this},T.prototype.text=function(I){var R;return this.openCurrent(),R=new S(this,I),this.onData(this.writer.text(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(I){var R;return this.openCurrent(),R=new n(this,I),this.onData(this.writer.cdata(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(I){var R;return this.openCurrent(),R=new i(this,I),this.onData(this.writer.comment(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(I){var R;return this.openCurrent(),R=new w(this,I),this.onData(this.writer.raw(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(I,R){var M,U,j,D,q;if(this.openCurrent(),I!=null&&(I=p(I)),R!=null&&(R=p(R)),Array.isArray(I))for(M=0,D=I.length;M<D;M++)U=I[M],this.instruction(U);else if(y(I))for(U in I)v.call(I,U)&&(j=I[U],this.instruction(U,j));else g(R)&&(R=R.apply()),q=new m(this,I,R),this.onData(this.writer.processingInstruction(q,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(I,R,M){var U;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return U=new u(this,I,R,M),this.onData(this.writer.declaration(U,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(I,R,M){if(this.openCurrent(),I==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new l(this,R,M),this.currentNode.rootNodeName=I,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(I,R){var M;return this.openCurrent(),M=new s(this,I,R),this.onData(this.writer.dtdElement(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(I,R,M,U,j){var D;return this.openCurrent(),D=new o(this,I,R,M,U,j),this.onData(this.writer.dtdAttList(D,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(I,R){var M;return this.openCurrent(),M=new a(this,!1,I,R),this.onData(this.writer.dtdEntity(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(I,R){var M;return this.openCurrent(),M=new a(this,!0,I,R),this.onData(this.writer.dtdEntity(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(I,R){var M;return this.openCurrent(),M=new c(this,I,R),this.onData(this.writer.dtdNotation(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(I){var R,M,U,j;if(!I.isOpen){if(!this.root&&this.currentLevel===0&&I.type===r.Element&&(this.root=I),M="",I.type===r.Element){this.writerOptions.state=e.OpenTag,M=this.writer.indent(I,this.writerOptions,this.currentLevel)+"<"+I.name,j=I.attribs;for(U in j)v.call(j,U)&&(R=j[U],M+=this.writer.attribute(R,this.writerOptions,this.currentLevel));M+=(I.children?">":"/>")+this.writer.endline(I,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,M=this.writer.indent(I,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+I.rootNodeName,I.pubID&&I.sysID?M+=' PUBLIC "'+I.pubID+'" "'+I.sysID+'"':I.sysID&&(M+=' SYSTEM "'+I.sysID+'"'),I.children?(M+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,M+=">"),M+=this.writer.endline(I,this.writerOptions,this.currentLevel);return this.onData(M,this.currentLevel),I.isOpen=!0}},T.prototype.closeNode=function(I){var R;if(!I.isClosed)return R="",this.writerOptions.state=e.CloseTag,I.type===r.Element?R=this.writer.indent(I,this.writerOptions,this.currentLevel)+"</"+I.name+">"+this.writer.endline(I,this.writerOptions,this.currentLevel):R=this.writer.indent(I,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(I,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(R,this.currentLevel),I.isClosed=!0},T.prototype.onData=function(I,R){return this.documentStarted=!0,this.onDataCallback(I,R+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(I){return I==null?"":"node: <"+I+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(I,R,M){return this.node(I,R,M)},T.prototype.txt=function(I){return this.text(I)},T.prototype.dat=function(I){return this.cdata(I)},T.prototype.com=function(I){return this.comment(I)},T.prototype.ins=function(I,R){return this.instruction(I,R)},T.prototype.dec=function(I,R,M){return this.declaration(I,R,M)},T.prototype.dtd=function(I,R,M){return this.doctype(I,R,M)},T.prototype.e=function(I,R,M){return this.element(I,R,M)},T.prototype.n=function(I,R,M){return this.node(I,R,M)},T.prototype.t=function(I){return this.text(I)},T.prototype.d=function(I){return this.cdata(I)},T.prototype.c=function(I){return this.comment(I)},T.prototype.r=function(I){return this.raw(I)},T.prototype.i=function(I,R){return this.instruction(I,R)},T.prototype.att=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(I,R){return this.entity(I,R)},T.prototype.pent=function(I,R){return this.pEntity(I,R)},T.prototype.not=function(I,R){return this.notation(I,R)},T}()}).call(Hfe)});var Zfe=O((Xfe,Qfe)=>{(function(){var r,e,t,n,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;r=yn(),n=hB(),e=xp(),Qfe.exports=t=function(s){i(a,s);function a(c,u){this.stream=c,a.__super__.constructor.call(this,u)}return a.prototype.endline=function(c,u,l){return c.isLastRootNode&&u.state===e.CloseTag?"":a.__super__.endline.call(this,c,u,l)},a.prototype.document=function(c,u){var l,d,h,f,m,w,_,E,S;for(_=c.children,d=h=0,m=_.length;h<m;d=++h)l=_[d],l.isLastRootNode=d===c.children.length-1;for(u=this.filterOptions(u),E=c.children,S=[],f=0,w=E.length;f<w;f++)l=E[f],S.push(this.writeChildNode(l,u,0));return S},a.prototype.attribute=function(c,u,l){return this.stream.write(a.__super__.attribute.call(this,c,u,l))},a.prototype.cdata=function(c,u,l){return this.stream.write(a.__super__.cdata.call(this,c,u,l))},a.prototype.comment=function(c,u,l){return this.stream.write(a.__super__.comment.call(this,c,u,l))},a.prototype.declaration=function(c,u,l){return this.stream.write(a.__super__.declaration.call(this,c,u,l))},a.prototype.docType=function(c,u,l){var d,h,f,m;if(l||(l=0),this.openNode(c,u,l),u.state=e.OpenTag,this.stream.write(this.indent(c,u,l)),this.stream.write("<!DOCTYPE "+c.root().name),c.pubID&&c.sysID?this.stream.write(' PUBLIC "'+c.pubID+'" "'+c.sysID+'"'):c.sysID&&this.stream.write(' SYSTEM "'+c.sysID+'"'),c.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(c,u,l)),u.state=e.InsideTag,m=c.children,h=0,f=m.length;h<f;h++)d=m[h],this.writeChildNode(d,u,l+1);u.state=e.CloseTag,this.stream.write("]")}return u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+">"),this.stream.write(this.endline(c,u,l)),u.state=e.None,this.closeNode(c,u,l)},a.prototype.element=function(c,u,l){var d,h,f,m,w,_,E,S,p,g;l||(l=0),this.openNode(c,u,l),u.state=e.OpenTag,this.stream.write(this.indent(c,u,l)+"<"+c.name),p=c.attribs;for(E in p)o.call(p,E)&&(d=p[E],this.attribute(d,u,l));if(f=c.children.length,m=f===0?null:c.children[0],f===0||c.children.every(function(y){return(y.type===r.Text||y.type===r.Raw)&&y.value===""}))u.allowEmpty?(this.stream.write(">"),u.state=e.CloseTag,this.stream.write("</"+c.name+">")):(u.state=e.CloseTag,this.stream.write(u.spaceBeforeSlash+"/>"));else if(u.pretty&&f===1&&(m.type===r.Text||m.type===r.Raw)&&m.value!=null)this.stream.write(">"),u.state=e.InsideTag,u.suppressPrettyCount++,S=!0,this.writeChildNode(m,u,l+1),u.suppressPrettyCount--,S=!1,u.state=e.CloseTag,this.stream.write("</"+c.name+">");else{for(this.stream.write(">"+this.endline(c,u,l)),u.state=e.InsideTag,g=c.children,w=0,_=g.length;w<_;w++)h=g[w],this.writeChildNode(h,u,l+1);u.state=e.CloseTag,this.stream.write(this.indent(c,u,l)+"</"+c.name+">")}return this.stream.write(this.endline(c,u,l)),u.state=e.None,this.closeNode(c,u,l)},a.prototype.processingInstruction=function(c,u,l){return this.stream.write(a.__super__.processingInstruction.call(this,c,u,l))},a.prototype.raw=function(c,u,l){return this.stream.write(a.__super__.raw.call(this,c,u,l))},a.prototype.text=function(c,u,l){return this.stream.write(a.__super__.text.call(this,c,u,l))},a.prototype.dtdAttList=function(c,u,l){return this.stream.write(a.__super__.dtdAttList.call(this,c,u,l))},a.prototype.dtdElement=function(c,u,l){return this.stream.write(a.__super__.dtdElement.call(this,c,u,l))},a.prototype.dtdEntity=function(c,u,l){return this.stream.write(a.__super__.dtdEntity.call(this,c,u,l))},a.prototype.dtdNotation=function(c,u,l){return this.stream.write(a.__super__.dtdNotation.call(this,c,u,l))},a}(n)}).call(Xfe)});var e4e=O((Jfe,Mu)=>{(function(){var r,e,t,n,i,o,s,a,c,u;u=ec(),a=u.assign,c=u.isFunction,t=uB(),n=pB(),i=Yfe(),s=rE(),o=Zfe(),r=yn(),e=xp(),Mu.exports.create=function(l,d,h,f){var m,w;if(l==null)throw new Error("Root element needs a name.");return f=a({},d,h,f),m=new n(f),w=m.element(l),f.headless||(m.declaration(f),(f.pubID!=null||f.sysID!=null)&&m.dtd(f)),w},Mu.exports.begin=function(l,d,h){var f;return c(l)&&(f=[l,d],d=f[0],h=f[1],l={}),d?new i(l,d,h):new n(l)},Mu.exports.stringWriter=function(l){return new s(l)},Mu.exports.streamWriter=function(l,d){return new o(l,d)},Mu.exports.implementation=new t,Mu.exports.nodeType=r,Mu.exports.writerState=e}).call(Jfe)});var t4e=O(mB=>{(function(){"use strict";var r,e,t,n,i,o={}.hasOwnProperty;r=e4e(),e=qv().defaults,n=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},i=function(s){return"<![CDATA["+t(s)+"]]>"},t=function(s){return s.replace("]]>","]]]]><![CDATA[>")},mB.Builder=function(){function s(a){var c,u,l;this.options={},u=e["0.2"];for(c in u)o.call(u,c)&&(l=u[c],this.options[c]=l);for(c in a)o.call(a,c)&&(l=a[c],this.options[c]=l)}return s.prototype.buildObject=function(a){var c,u,l,d,h;return c=this.options.attrkey,u=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(h=Object.keys(a)[0],a=a[h]):h=this.options.rootName,l=function(f){return function(m,w){var _,E,S,p,g,y;if(typeof w!="object")f.options.cdata&&n(w)?m.raw(i(w)):m.txt(w);else if(Array.isArray(w)){for(p in w)if(o.call(w,p)){E=w[p];for(g in E)S=E[g],m=l(m.ele(g),S).up()}}else for(g in w)if(o.call(w,g))if(E=w[g],g===c){if(typeof E=="object")for(_ in E)y=E[_],m=m.att(_,y)}else if(g===u)f.options.cdata&&n(E)?m=m.raw(i(E)):m=m.txt(E);else if(Array.isArray(E))for(p in E)o.call(E,p)&&(S=E[p],typeof S=="string"?f.options.cdata&&n(S)?m=m.ele(g).raw(i(S)).up():m=m.ele(g,S).up():m=l(m.ele(g),S).up());else typeof E=="object"?m=l(m.ele(g),E).up():typeof E=="string"&&f.options.cdata&&n(E)?m=m.ele(g).raw(i(E)).up():(E==null&&(E=""),m=m.ele(g,E.toString()).up());return m}}(this),d=r.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(d,a).end(this.options.renderOpts)},s}()}).call(mB)});var r4e=O(nE=>{(function(r){r.parser=function(N,A){return new t(N,A)},r.SAXParser=t,r.SAXStream=u,r.createStream=c,r.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(N,A){if(!(this instanceof t))return new t(N,A);var ne=this;i(ne),ne.q=ne.c="",ne.bufferCheckPosition=r.MAX_BUFFER_LENGTH,ne.opt=A||{},ne.opt.lowercase=ne.opt.lowercase||ne.opt.lowercasetags,ne.looseCase=ne.opt.lowercase?"toLowerCase":"toUpperCase",ne.tags=[],ne.closed=ne.closedRoot=ne.sawRoot=!1,ne.tag=ne.error=null,ne.strict=!!N,ne.noscript=!!(N||ne.opt.noscript),ne.state=v.BEGIN,ne.strictEntities=ne.opt.strictEntities,ne.ENTITIES=ne.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),ne.attribList=[],ne.opt.xmlns&&(ne.ns=Object.create(m)),ne.opt.unquotedAttributeValues===void 0&&(ne.opt.unquotedAttributeValues=!N),ne.trackPosition=ne.opt.position!==!1,ne.trackPosition&&(ne.position=ne.line=ne.column=0),I(ne,"onready")}Object.create||(Object.create=function(N){function A(){}A.prototype=N;var ne=new A;return ne}),Object.keys||(Object.keys=function(N){var A=[];for(var ne in N)N.hasOwnProperty(ne)&&A.push(ne);return A});function n(N){for(var A=Math.max(r.MAX_BUFFER_LENGTH,10),ne=0,G=0,Te=e.length;G<Te;G++){var ze=N[e[G]].length;if(ze>A)switch(e[G]){case"textNode":M(N);break;case"cdata":R(N,"oncdata",N.cdata),N.cdata="";break;case"script":R(N,"onscript",N.script),N.script="";break;default:j(N,"Max buffer length exceeded: "+e[G])}ne=Math.max(ne,ze)}var rt=r.MAX_BUFFER_LENGTH-ne;N.bufferCheckPosition=rt+N.position}function i(N){for(var A=0,ne=e.length;A<ne;A++)N[e[A]]=""}function o(N){M(N),N.cdata!==""&&(R(N,"oncdata",N.cdata),N.cdata=""),N.script!==""&&(R(N,"onscript",N.script),N.script="")}t.prototype={end:function(){D(this)},write:xe,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var a=r.EVENTS.filter(function(N){return N!=="error"&&N!=="end"});function c(N,A){return new u(N,A)}function u(N,A){if(!(this instanceof u))return new u(N,A);s.apply(this),this._parser=new t(N,A),this.writable=!0,this.readable=!0;var ne=this;this._parser.onend=function(){ne.emit("end")},this._parser.onerror=function(G){ne.emit("error",G),ne._parser.error=null},this._decoder=null,a.forEach(function(G){Object.defineProperty(ne,"on"+G,{get:function(){return ne._parser["on"+G]},set:function(Te){if(!Te)return ne.removeAllListeners(G),ne._parser["on"+G]=Te,Te;ne.on(G,Te)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(s.prototype,{constructor:{value:u}}),u.prototype.write=function(N){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(N)){if(!this._decoder){var A=require("string_decoder").StringDecoder;this._decoder=new A("utf8")}N=this._decoder.write(N)}return this._parser.write(N.toString()),this.emit("data",N),!0},u.prototype.end=function(N){return N&&N.length&&this.write(N),this._parser.end(),!0},u.prototype.on=function(N,A){var ne=this;return!ne._parser["on"+N]&&a.indexOf(N)!==-1&&(ne._parser["on"+N]=function(){var G=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);G.splice(0,0,N),ne.emit.apply(ne,G)}),s.prototype.on.call(ne,N,A)};var l="[CDATA[",d="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",m={xml:h,xmlns:f},w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(N){return N===" "||N===`
`||N==="\r"||N==="	"}function g(N){return N==='"'||N==="'"}function y(N){return N===">"||p(N)}function b(N,A){return N.test(A)}function x(N,A){return!b(N,A)}var v=0;r.STATE={BEGIN:v++,BEGIN_WHITESPACE:v++,TEXT:v++,TEXT_ENTITY:v++,OPEN_WAKA:v++,SGML_DECL:v++,SGML_DECL_QUOTED:v++,DOCTYPE:v++,DOCTYPE_QUOTED:v++,DOCTYPE_DTD:v++,DOCTYPE_DTD_QUOTED:v++,COMMENT_STARTING:v++,COMMENT:v++,COMMENT_ENDING:v++,COMMENT_ENDED:v++,CDATA:v++,CDATA_ENDING:v++,CDATA_ENDING_2:v++,PROC_INST:v++,PROC_INST_BODY:v++,PROC_INST_ENDING:v++,OPEN_TAG:v++,OPEN_TAG_SLASH:v++,ATTRIB:v++,ATTRIB_NAME:v++,ATTRIB_NAME_SAW_WHITE:v++,ATTRIB_VALUE:v++,ATTRIB_VALUE_QUOTED:v++,ATTRIB_VALUE_CLOSED:v++,ATTRIB_VALUE_UNQUOTED:v++,ATTRIB_VALUE_ENTITY_Q:v++,ATTRIB_VALUE_ENTITY_U:v++,CLOSE_TAG:v++,CLOSE_TAG_SAW_WHITE:v++,SCRIPT:v++,SCRIPT_ENDING:v++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(N){var A=r.ENTITIES[N],ne=typeof A=="number"?String.fromCharCode(A):A;r.ENTITIES[N]=ne});for(var T in r.STATE)r.STATE[r.STATE[T]]=T;v=r.STATE;function I(N,A,ne){N[A]&&N[A](ne)}function R(N,A,ne){N.textNode&&M(N),I(N,A,ne)}function M(N){N.textNode=U(N.opt,N.textNode),N.textNode&&I(N,"ontext",N.textNode),N.textNode=""}function U(N,A){return N.trim&&(A=A.trim()),N.normalize&&(A=A.replace(/\s+/g," ")),A}function j(N,A){return M(N),N.trackPosition&&(A+=`
Line: `+N.line+`
Column: `+N.column+`
Char: `+N.c),A=new Error(A),N.error=A,I(N,"onerror",A),N}function D(N){return N.sawRoot&&!N.closedRoot&&q(N,"Unclosed root tag"),N.state!==v.BEGIN&&N.state!==v.BEGIN_WHITESPACE&&N.state!==v.TEXT&&j(N,"Unexpected end"),M(N),N.c="",N.closed=!0,I(N,"onend"),t.call(N,N.strict,N.opt),N}function q(N,A){if(typeof N!="object"||!(N instanceof t))throw new Error("bad call to strictFail");N.strict&&j(N,A)}function V(N){N.strict||(N.tagName=N.tagName[N.looseCase]());var A=N.tags[N.tags.length-1]||N,ne=N.tag={name:N.tagName,attributes:{}};N.opt.xmlns&&(ne.ns=A.ns),N.attribList.length=0,R(N,"onopentagstart",ne)}function te(N,A){var ne=N.indexOf(":"),G=ne<0?["",N]:N.split(":"),Te=G[0],ze=G[1];return A&&N==="xmlns"&&(Te="xmlns",ze=""),{prefix:Te,local:ze}}function pe(N){if(N.strict||(N.attribName=N.attribName[N.looseCase]()),N.attribList.indexOf(N.attribName)!==-1||N.tag.attributes.hasOwnProperty(N.attribName)){N.attribName=N.attribValue="";return}if(N.opt.xmlns){var A=te(N.attribName,!0),ne=A.prefix,G=A.local;if(ne==="xmlns")if(G==="xml"&&N.attribValue!==h)q(N,"xml: prefix must be bound to "+h+`
Actual: `+N.attribValue);else if(G==="xmlns"&&N.attribValue!==f)q(N,"xmlns: prefix must be bound to "+f+`
Actual: `+N.attribValue);else{var Te=N.tag,ze=N.tags[N.tags.length-1]||N;Te.ns===ze.ns&&(Te.ns=Object.create(ze.ns)),Te.ns[G]=N.attribValue}N.attribList.push([N.attribName,N.attribValue])}else N.tag.attributes[N.attribName]=N.attribValue,R(N,"onattribute",{name:N.attribName,value:N.attribValue});N.attribName=N.attribValue=""}function ue(N,A){if(N.opt.xmlns){var ne=N.tag,G=te(N.tagName);ne.prefix=G.prefix,ne.local=G.local,ne.uri=ne.ns[G.prefix]||"",ne.prefix&&!ne.uri&&(q(N,"Unbound namespace prefix: "+JSON.stringify(N.tagName)),ne.uri=G.prefix);var Te=N.tags[N.tags.length-1]||N;ne.ns&&Te.ns!==ne.ns&&Object.keys(ne.ns).forEach(function(ju){R(N,"onopennamespace",{prefix:ju,uri:ne.ns[ju]})});for(var ze=0,rt=N.attribList.length;ze<rt;ze++){var bt=N.attribList[ze],xt=bt[0],lr=bt[1],Cr=te(xt,!0),oi=Cr.prefix,rh=Cr.local,bi=oi===""?"":ne.ns[oi]||"",$0={name:xt,value:lr,prefix:oi,local:rh,uri:bi};oi&&oi!=="xmlns"&&!bi&&(q(N,"Unbound namespace prefix: "+JSON.stringify(oi)),$0.uri=oi),N.tag.attributes[xt]=$0,R(N,"onattribute",$0)}N.attribList.length=0}N.tag.isSelfClosing=!!A,N.sawRoot=!0,N.tags.push(N.tag),R(N,"onopentag",N.tag),A||(!N.noscript&&N.tagName.toLowerCase()==="script"?N.state=v.SCRIPT:N.state=v.TEXT,N.tag=null,N.tagName=""),N.attribName=N.attribValue="",N.attribList.length=0}function Ue(N){if(!N.tagName){q(N,"Weird empty close tag."),N.textNode+="</>",N.state=v.TEXT;return}if(N.script){if(N.tagName!=="script"){N.script+="</"+N.tagName+">",N.tagName="",N.state=v.SCRIPT;return}R(N,"onscript",N.script),N.script=""}var A=N.tags.length,ne=N.tagName;N.strict||(ne=ne[N.looseCase]());for(var G=ne;A--;){var Te=N.tags[A];if(Te.name!==G)q(N,"Unexpected close tag");else break}if(A<0){q(N,"Unmatched closing tag: "+N.tagName),N.textNode+="</"+N.tagName+">",N.state=v.TEXT;return}N.tagName=ne;for(var ze=N.tags.length;ze-- >A;){var rt=N.tag=N.tags.pop();N.tagName=N.tag.name,R(N,"onclosetag",N.tagName);var bt={};for(var xt in rt.ns)bt[xt]=rt.ns[xt];var lr=N.tags[N.tags.length-1]||N;N.opt.xmlns&&rt.ns!==lr.ns&&Object.keys(rt.ns).forEach(function(Cr){var oi=rt.ns[Cr];R(N,"onclosenamespace",{prefix:Cr,uri:oi})})}A===0&&(N.closedRoot=!0),N.tagName=N.attribValue=N.attribName="",N.attribList.length=0,N.state=v.TEXT}function le(N){var A=N.entity,ne=A.toLowerCase(),G,Te="";return N.ENTITIES[A]?N.ENTITIES[A]:N.ENTITIES[ne]?N.ENTITIES[ne]:(A=ne,A.charAt(0)==="#"&&(A.charAt(1)==="x"?(A=A.slice(2),G=parseInt(A,16),Te=G.toString(16)):(A=A.slice(1),G=parseInt(A,10),Te=G.toString(10))),A=A.replace(/^0+/,""),isNaN(G)||Te.toLowerCase()!==A?(q(N,"Invalid character entity"),"&"+N.entity+";"):String.fromCodePoint(G))}function _e(N,A){A==="<"?(N.state=v.OPEN_WAKA,N.startTagPosition=N.position):p(A)||(q(N,"Non-whitespace before first tag."),N.textNode=A,N.state=v.TEXT)}function we(N,A){var ne="";return A<N.length&&(ne=N.charAt(A)),ne}function xe(N){var A=this;if(this.error)throw this.error;if(A.closed)return j(A,"Cannot write after close. Assign an onready handler.");if(N===null)return D(A);typeof N=="object"&&(N=N.toString());for(var ne=0,G="";G=we(N,ne++),A.c=G,!!G;)switch(A.trackPosition&&(A.position++,G===`
`?(A.line++,A.column=0):A.column++),A.state){case v.BEGIN:if(A.state=v.BEGIN_WHITESPACE,G==="\uFEFF")continue;_e(A,G);continue;case v.BEGIN_WHITESPACE:_e(A,G);continue;case v.TEXT:if(A.sawRoot&&!A.closedRoot){for(var Te=ne-1;G&&G!=="<"&&G!=="&";)G=we(N,ne++),G&&A.trackPosition&&(A.position++,G===`
`?(A.line++,A.column=0):A.column++);A.textNode+=N.substring(Te,ne-1)}G==="<"&&!(A.sawRoot&&A.closedRoot&&!A.strict)?(A.state=v.OPEN_WAKA,A.startTagPosition=A.position):(!p(G)&&(!A.sawRoot||A.closedRoot)&&q(A,"Text data outside of root node."),G==="&"?A.state=v.TEXT_ENTITY:A.textNode+=G);continue;case v.SCRIPT:G==="<"?A.state=v.SCRIPT_ENDING:A.script+=G;continue;case v.SCRIPT_ENDING:G==="/"?A.state=v.CLOSE_TAG:(A.script+="<"+G,A.state=v.SCRIPT);continue;case v.OPEN_WAKA:if(G==="!")A.state=v.SGML_DECL,A.sgmlDecl="";else if(!p(G))if(b(w,G))A.state=v.OPEN_TAG,A.tagName=G;else if(G==="/")A.state=v.CLOSE_TAG,A.tagName="";else if(G==="?")A.state=v.PROC_INST,A.procInstName=A.procInstBody="";else{if(q(A,"Unencoded <"),A.startTagPosition+1<A.position){var ze=A.position-A.startTagPosition;G=new Array(ze).join(" ")+G}A.textNode+="<"+G,A.state=v.TEXT}continue;case v.SGML_DECL:if(A.sgmlDecl+G==="--"){A.state=v.COMMENT,A.comment="",A.sgmlDecl="";continue}A.doctype&&A.doctype!==!0&&A.sgmlDecl?(A.state=v.DOCTYPE_DTD,A.doctype+="<!"+A.sgmlDecl+G,A.sgmlDecl=""):(A.sgmlDecl+G).toUpperCase()===l?(R(A,"onopencdata"),A.state=v.CDATA,A.sgmlDecl="",A.cdata=""):(A.sgmlDecl+G).toUpperCase()===d?(A.state=v.DOCTYPE,(A.doctype||A.sawRoot)&&q(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):G===">"?(R(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=v.TEXT):(g(G)&&(A.state=v.SGML_DECL_QUOTED),A.sgmlDecl+=G);continue;case v.SGML_DECL_QUOTED:G===A.q&&(A.state=v.SGML_DECL,A.q=""),A.sgmlDecl+=G;continue;case v.DOCTYPE:G===">"?(A.state=v.TEXT,R(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=G,G==="["?A.state=v.DOCTYPE_DTD:g(G)&&(A.state=v.DOCTYPE_QUOTED,A.q=G));continue;case v.DOCTYPE_QUOTED:A.doctype+=G,G===A.q&&(A.q="",A.state=v.DOCTYPE);continue;case v.DOCTYPE_DTD:G==="]"?(A.doctype+=G,A.state=v.DOCTYPE):G==="<"?(A.state=v.OPEN_WAKA,A.startTagPosition=A.position):g(G)?(A.doctype+=G,A.state=v.DOCTYPE_DTD_QUOTED,A.q=G):A.doctype+=G;continue;case v.DOCTYPE_DTD_QUOTED:A.doctype+=G,G===A.q&&(A.state=v.DOCTYPE_DTD,A.q="");continue;case v.COMMENT:G==="-"?A.state=v.COMMENT_ENDING:A.comment+=G;continue;case v.COMMENT_ENDING:G==="-"?(A.state=v.COMMENT_ENDED,A.comment=U(A.opt,A.comment),A.comment&&R(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+G,A.state=v.COMMENT);continue;case v.COMMENT_ENDED:G!==">"?(q(A,"Malformed comment"),A.comment+="--"+G,A.state=v.COMMENT):A.doctype&&A.doctype!==!0?A.state=v.DOCTYPE_DTD:A.state=v.TEXT;continue;case v.CDATA:G==="]"?A.state=v.CDATA_ENDING:A.cdata+=G;continue;case v.CDATA_ENDING:G==="]"?A.state=v.CDATA_ENDING_2:(A.cdata+="]"+G,A.state=v.CDATA);continue;case v.CDATA_ENDING_2:G===">"?(A.cdata&&R(A,"oncdata",A.cdata),R(A,"onclosecdata"),A.cdata="",A.state=v.TEXT):G==="]"?A.cdata+="]":(A.cdata+="]]"+G,A.state=v.CDATA);continue;case v.PROC_INST:G==="?"?A.state=v.PROC_INST_ENDING:p(G)?A.state=v.PROC_INST_BODY:A.procInstName+=G;continue;case v.PROC_INST_BODY:if(!A.procInstBody&&p(G))continue;G==="?"?A.state=v.PROC_INST_ENDING:A.procInstBody+=G;continue;case v.PROC_INST_ENDING:G===">"?(R(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=v.TEXT):(A.procInstBody+="?"+G,A.state=v.PROC_INST_BODY);continue;case v.OPEN_TAG:b(_,G)?A.tagName+=G:(V(A),G===">"?ue(A):G==="/"?A.state=v.OPEN_TAG_SLASH:(p(G)||q(A,"Invalid character in tag name"),A.state=v.ATTRIB));continue;case v.OPEN_TAG_SLASH:G===">"?(ue(A,!0),Ue(A)):(q(A,"Forward-slash in opening tag not followed by >"),A.state=v.ATTRIB);continue;case v.ATTRIB:if(p(G))continue;G===">"?ue(A):G==="/"?A.state=v.OPEN_TAG_SLASH:b(w,G)?(A.attribName=G,A.attribValue="",A.state=v.ATTRIB_NAME):q(A,"Invalid attribute name");continue;case v.ATTRIB_NAME:G==="="?A.state=v.ATTRIB_VALUE:G===">"?(q(A,"Attribute without value"),A.attribValue=A.attribName,pe(A),ue(A)):p(G)?A.state=v.ATTRIB_NAME_SAW_WHITE:b(_,G)?A.attribName+=G:q(A,"Invalid attribute name");continue;case v.ATTRIB_NAME_SAW_WHITE:if(G==="=")A.state=v.ATTRIB_VALUE;else{if(p(G))continue;q(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",R(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",G===">"?ue(A):b(w,G)?(A.attribName=G,A.state=v.ATTRIB_NAME):(q(A,"Invalid attribute name"),A.state=v.ATTRIB)}continue;case v.ATTRIB_VALUE:if(p(G))continue;g(G)?(A.q=G,A.state=v.ATTRIB_VALUE_QUOTED):(A.opt.unquotedAttributeValues||j(A,"Unquoted attribute value"),A.state=v.ATTRIB_VALUE_UNQUOTED,A.attribValue=G);continue;case v.ATTRIB_VALUE_QUOTED:if(G!==A.q){G==="&"?A.state=v.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=G;continue}pe(A),A.q="",A.state=v.ATTRIB_VALUE_CLOSED;continue;case v.ATTRIB_VALUE_CLOSED:p(G)?A.state=v.ATTRIB:G===">"?ue(A):G==="/"?A.state=v.OPEN_TAG_SLASH:b(w,G)?(q(A,"No whitespace between attributes"),A.attribName=G,A.attribValue="",A.state=v.ATTRIB_NAME):q(A,"Invalid attribute name");continue;case v.ATTRIB_VALUE_UNQUOTED:if(!y(G)){G==="&"?A.state=v.ATTRIB_VALUE_ENTITY_U:A.attribValue+=G;continue}pe(A),G===">"?ue(A):A.state=v.ATTRIB;continue;case v.CLOSE_TAG:if(A.tagName)G===">"?Ue(A):b(_,G)?A.tagName+=G:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=v.SCRIPT):(p(G)||q(A,"Invalid tagname in closing tag"),A.state=v.CLOSE_TAG_SAW_WHITE);else{if(p(G))continue;x(w,G)?A.script?(A.script+="</"+G,A.state=v.SCRIPT):q(A,"Invalid tagname in closing tag."):A.tagName=G}continue;case v.CLOSE_TAG_SAW_WHITE:if(p(G))continue;G===">"?Ue(A):q(A,"Invalid characters in closing tag");continue;case v.TEXT_ENTITY:case v.ATTRIB_VALUE_ENTITY_Q:case v.ATTRIB_VALUE_ENTITY_U:var rt,bt;switch(A.state){case v.TEXT_ENTITY:rt=v.TEXT,bt="textNode";break;case v.ATTRIB_VALUE_ENTITY_Q:rt=v.ATTRIB_VALUE_QUOTED,bt="attribValue";break;case v.ATTRIB_VALUE_ENTITY_U:rt=v.ATTRIB_VALUE_UNQUOTED,bt="attribValue";break}if(G===";"){var xt=le(A);A.opt.unparsedEntities&&!Object.values(r.XML_ENTITIES).includes(xt)?(A.entity="",A.state=rt,A.write(xt)):(A[bt]+=xt,A.entity="",A.state=rt)}else b(A.entity.length?S:E,G)?A.entity+=G:(q(A,"Invalid character in entity name"),A[bt]+="&"+A.entity+G,A.entity="",A.state=rt);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&n(A),A}String.fromCodePoint||function(){var N=String.fromCharCode,A=Math.floor,ne=function(){var G=16384,Te=[],ze,rt,bt=-1,xt=arguments.length;if(!xt)return"";for(var lr="";++bt<xt;){var Cr=Number(arguments[bt]);if(!isFinite(Cr)||Cr<0||Cr>1114111||A(Cr)!==Cr)throw RangeError("Invalid code point: "+Cr);Cr<=65535?Te.push(Cr):(Cr-=65536,ze=(Cr>>10)+55296,rt=Cr%1024+56320,Te.push(ze,rt)),(bt+1===xt||Te.length>G)&&(lr+=N.apply(null,Te),Te.length=0)}return lr};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ne,configurable:!0,writable:!0}):String.fromCodePoint=ne}()})(typeof nE>"u"?nE.sax={}:nE)});var n4e=O(gB=>{(function(){"use strict";gB.stripBOM=function(r){return r[0]==="\uFEFF"?r.substring(1):r}}).call(gB)});var yB=O(id=>{(function(){"use strict";var r;r=new RegExp(/(?!xmlns)^.*:/),id.normalize=function(e){return e.toLowerCase()},id.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},id.stripPrefix=function(e){return e.replace(r,"")},id.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},id.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(id)});var i4e=O(A0=>{(function(){"use strict";var r,e,t,n,i,o,s,a,c,u=function(h,f){return function(){return h.apply(f,arguments)}},l=function(h,f){for(var m in f)d.call(f,m)&&(h[m]=f[m]);function w(){this.constructor=h}return w.prototype=f.prototype,h.prototype=new w,h.__super__=f.prototype,h},d={}.hasOwnProperty;a=r4e(),n=require("events"),r=n4e(),s=yB(),c=require("timers").setImmediate,e=qv().defaults,i=function(h){return typeof h=="object"&&h!=null&&Object.keys(h).length===0},o=function(h,f,m){var w,_,E;for(w=0,_=h.length;w<_;w++)E=h[w],f=E(f,m);return f},t=function(h,f,m){var w;return w=Object.create(null),w.value=m,w.writable=!0,w.enumerable=!0,w.configurable=!0,Object.defineProperty(h,f,w)},A0.Parser=function(h){l(f,h);function f(m){this.parseStringPromise=u(this.parseStringPromise,this),this.parseString=u(this.parseString,this),this.reset=u(this.reset,this),this.assignOrPush=u(this.assignOrPush,this),this.processAsync=u(this.processAsync,this);var w,_,E;if(!(this instanceof A0.Parser))return new A0.Parser(m);this.options={},_=e["0.2"];for(w in _)d.call(_,w)&&(E=_[w],this.options[w]=E);for(w in m)d.call(m,w)&&(E=m[w],this.options[w]=E);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return f.prototype.processAsync=function(){var m,w;try{return this.remaining.length<=this.options.chunkSize?(m=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(m),this.saxParser.close()):(m=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(m),c(this.processAsync))}catch(_){if(w=_,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(w)}},f.prototype.assignOrPush=function(m,w,_){return w in m?(m[w]instanceof Array||t(m,w,[m[w]]),m[w].push(_)):this.options.explicitArray?t(m,w,[_]):t(m,w,_)},f.prototype.reset=function(){var m,w,_,E;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(S){return function(p){if(S.saxParser.resume(),!S.saxParser.errThrown)return S.saxParser.errThrown=!0,S.emit("error",p)}}(this),this.saxParser.onend=function(S){return function(){if(!S.saxParser.ended)return S.saxParser.ended=!0,S.emit("end",S.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,E=[],m=this.options.attrkey,w=this.options.charkey,this.saxParser.onopentag=function(S){return function(p){var g,y,b,x,v;if(b={},b[w]="",!S.options.ignoreAttrs){v=p.attributes;for(g in v)d.call(v,g)&&(!(m in b)&&!S.options.mergeAttrs&&(b[m]={}),y=S.options.attrValueProcessors?o(S.options.attrValueProcessors,p.attributes[g],g):p.attributes[g],x=S.options.attrNameProcessors?o(S.options.attrNameProcessors,g):g,S.options.mergeAttrs?S.assignOrPush(b,x,y):t(b[m],x,y))}return b["#name"]=S.options.tagNameProcessors?o(S.options.tagNameProcessors,p.name):p.name,S.options.xmlns&&(b[S.options.xmlnskey]={uri:p.uri,local:p.local}),E.push(b)}}(this),this.saxParser.onclosetag=function(S){return function(){var p,g,y,b,x,v,T,I,R,M;if(v=E.pop(),x=v["#name"],(!S.options.explicitChildren||!S.options.preserveChildrenOrder)&&delete v["#name"],v.cdata===!0&&(p=v.cdata,delete v.cdata),R=E[E.length-1],v[w].match(/^\s*$/)&&!p?(g=v[w],delete v[w]):(S.options.trim&&(v[w]=v[w].trim()),S.options.normalize&&(v[w]=v[w].replace(/\s{2,}/g," ").trim()),v[w]=S.options.valueProcessors?o(S.options.valueProcessors,v[w],x):v[w],Object.keys(v).length===1&&w in v&&!S.EXPLICIT_CHARKEY&&(v=v[w])),i(v)&&(typeof S.options.emptyTag=="function"?v=S.options.emptyTag():v=S.options.emptyTag!==""?S.options.emptyTag:g),S.options.validator!=null&&(M="/"+function(){var U,j,D;for(D=[],U=0,j=E.length;U<j;U++)b=E[U],D.push(b["#name"]);return D}().concat(x).join("/"),function(){var U;try{return v=S.options.validator(M,R&&R[x],v)}catch(j){return U=j,S.emit("error",U)}}()),S.options.explicitChildren&&!S.options.mergeAttrs&&typeof v=="object"){if(!S.options.preserveChildrenOrder)b={},S.options.attrkey in v&&(b[S.options.attrkey]=v[S.options.attrkey],delete v[S.options.attrkey]),!S.options.charsAsChildren&&S.options.charkey in v&&(b[S.options.charkey]=v[S.options.charkey],delete v[S.options.charkey]),Object.getOwnPropertyNames(v).length>0&&(b[S.options.childkey]=v),v=b;else if(R){R[S.options.childkey]=R[S.options.childkey]||[],T={};for(y in v)d.call(v,y)&&t(T,y,v[y]);R[S.options.childkey].push(T),delete v["#name"],Object.keys(v).length===1&&w in v&&!S.EXPLICIT_CHARKEY&&(v=v[w])}}return E.length>0?S.assignOrPush(R,x,v):(S.options.explicitRoot&&(I=v,v={},t(v,x,I)),S.resultObject=v,S.saxParser.ended=!0,S.emit("end",S.resultObject))}}(this),_=function(S){return function(p){var g,y;if(y=E[E.length-1],y)return y[w]+=p,S.options.explicitChildren&&S.options.preserveChildrenOrder&&S.options.charsAsChildren&&(S.options.includeWhiteChars||p.replace(/\\n/g,"").trim()!=="")&&(y[S.options.childkey]=y[S.options.childkey]||[],g={"#name":"__text__"},g[w]=p,S.options.normalize&&(g[w]=g[w].replace(/\s{2,}/g," ").trim()),y[S.options.childkey].push(g)),y}}(this),this.saxParser.ontext=_,this.saxParser.oncdata=function(S){return function(p){var g;if(g=_(p),g)return g.cdata=!0}}(this)},f.prototype.parseString=function(m,w){var _;w!=null&&typeof w=="function"&&(this.on("end",function(E){return this.reset(),w(null,E)}),this.on("error",function(E){return this.reset(),w(E)}));try{return m=m.toString(),m.trim()===""?(this.emit("end",null),!0):(m=r.stripBOM(m),this.options.async?(this.remaining=m,c(this.processAsync),this.saxParser):this.saxParser.write(m).close())}catch(E){if(_=E,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw _}else return this.emit("error",_),this.saxParser.errThrown=!0}},f.prototype.parseStringPromise=function(m){return new Promise(function(w){return function(_,E){return w.parseString(m,function(S,p){return S?E(S):_(p)})}}(this))},f}(n),A0.parseString=function(h,f,m){var w,_,E;return m!=null?(typeof m=="function"&&(w=m),typeof f=="object"&&(_=f)):(typeof f=="function"&&(w=f),_={}),E=new A0.Parser(_),E.parseString(h,w)},A0.parseStringPromise=function(h,f){var m,w;return typeof f=="object"&&(m=f),w=new A0.Parser(m),w.parseStringPromise(h)}}).call(A0)});var iE=O(C0=>{(function(){"use strict";var r,e,t,n,i=function(s,a){for(var c in a)o.call(a,c)&&(s[c]=a[c]);function u(){this.constructor=s}return u.prototype=a.prototype,s.prototype=new u,s.__super__=a.prototype,s},o={}.hasOwnProperty;e=qv(),r=t4e(),t=i4e(),n=yB(),C0.defaults=e.defaults,C0.processors=n,C0.ValidationError=function(s){i(a,s);function a(c){this.message=c}return a}(Error),C0.Builder=r.Builder,C0.Parser=t.Parser,C0.parseString=t.parseString,C0.parseStringPromise=t.parseStringPromise}).call(C0)});var w5e=O((lJt,y5e)=>{y5e.exports=require("crypto").randomBytes});var v5e=O((dJt,_5e)=>{"use strict";var PKe=w5e(),{EventEmitter:DKe}=require("events");function b5e(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;++t)if(r[t]!==e[t])return!1;return!0}function OB(){return{contacts:[],dontSplit:!1,left:null,right:null}}function Cp(r,e){if(!(e instanceof Uint8Array))throw new TypeError(r+" is not a Uint8Array")}var LB=class r extends DKe{constructor(e={}){super(),this.localNodeId=e.localNodeId||PKe(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||r.distance,this.arbiter=e.arbiter||r.arbiter,this.metadata=Object.assign({},e.metadata),Cp("option.localNodeId as parameter 1",this.localNodeId),this.root=OB()}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let n=0,i=0,o=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;i<o;++i)n=n*256+(e[i]^t[i]);for(;i<s;++i)n=n*256+255;return n}add(e){Cp("contact.id",(e||{}).id);let t=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e.id,t++);let i=this._indexOf(n,e.id);return i>=0?(this._update(n,i,e),this):n.contacts.length<this.numberOfNodesPerKBucket?(n.contacts.push(e),this.emit("added",e),this):n.dontSplit?(this.emit("ping",n.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(n,t),this.add(e))}closest(e,t=1/0){if(Cp("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let n=[];for(let i=[this.root],o=0;i.length>0&&n.length<t;){let s=i.pop();if(s.contacts===null){let a=this._determineNode(s,e,o++);i.push(s.left===a?s.right:s.left),i.push(a)}else n=n.concat(s.contacts)}return n.map(i=>[this.distance(i.id,e),i]).sort((i,o)=>i[0]-o[0]).slice(0,t).map(i=>i[1])}count(){let e=0;for(let t=[this.root];t.length>0;){let n=t.pop();n.contacts===null?t.push(n.right,n.left):e+=n.contacts.length}return e}_determineNode(e,t,n){let i=n>>3,o=n%8;return t.length<=i&&o!==0?e.left:t[i]&1<<7-o?e.right:e.left}get(e){Cp("id",e);let t=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e,t++);let i=this._indexOf(n,e);return i>=0?n.contacts[i]:null}_indexOf(e,t){for(let n=0;n<e.contacts.length;++n)if(b5e(e.contacts[n].id,t))return n;return-1}remove(e){Cp("the id as parameter 1",e);let t=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e,t++);let i=this._indexOf(n,e);if(i>=0){let o=n.contacts.splice(i,1)[0];this.emit("removed",o)}return this}_split(e,t){e.left=OB(),e.right=OB();for(let o of e.contacts)this._determineNode(e,o.id,t).contacts.push(o);e.contacts=null;let n=this._determineNode(e,this.localNodeId,t),i=e.left===n?e.right:e.left;i.dontSplit=!0}toArray(){let e=[];for(let t=[this.root];t.length>0;){let n=t.pop();n.contacts===null?t.push(n.right,n.left):e=e.concat(n.contacts)}return e}*toIterable(){for(let e=[this.root];e.length>0;){let t=e.pop();t.contacts===null?e.push(t.right,t.left):yield*t.contacts}}_update(e,t,n){if(!b5e(e.contacts[t].id,n.id))throw new Error("wrong index for _update");let i=e.contacts[t],o=this.arbiter(i,n);o===i&&i!==n||(e.contacts.splice(t,1),e.contacts.push(o),this.emit("updated",i,o))}};_5e.exports=LB});var ohe=O((nnr,ihe)=>{"use strict";var{Duplex:cje}=require("stream");function rhe(r){r.emit("close")}function uje(){!this.destroyed&&this._writableState.finished&&this.destroy()}function nhe(r){this.removeListener("error",nhe),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function lje(r,e){let t=!0,n=new cje({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(o,s){let a=!s&&n._readableState.objectMode?o.toString():o;n.push(a)||r.pause()}),r.once("error",function(o){n.destroyed||(t=!1,n.destroy(o))}),r.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,o){if(r.readyState===r.CLOSED){o(i),process.nextTick(rhe,n);return}let s=!1;r.once("error",function(c){s=!0,o(c)}),r.once("close",function(){s||o(i),process.nextTick(rhe,n)}),t&&r.terminate()},n._final=function(i){if(r.readyState===r.CONNECTING){r.once("open",function(){n._final(i)});return}r._socket!==null&&(r._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(r._socket.once("finish",function(){i()}),r.close()))},n._read=function(){r.isPaused&&r.resume()},n._write=function(i,o,s){if(r.readyState===r.CONNECTING){r.once("open",function(){n._write(i,o,s)});return}r.send(i,s)},n.on("end",uje),n.on("error",nhe),n}ihe.exports=lje});var L0=O((inr,che)=>{"use strict";var she=["nodebuffer","arraybuffer","fragments"],ahe=typeof Blob<"u";ahe&&she.push("blob");che.exports={BINARY_TYPES:she,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:ahe,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Bp=O((onr,ox)=>{"use strict";var{EMPTY_BUFFER:dje}=L0(),jB=Buffer[Symbol.species];function fje(r,e){if(r.length===0)return dje;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),n=0;for(let i=0;i<r.length;i++){let o=r[i];t.set(o,n),n+=o.length}return n<e?new jB(t.buffer,t.byteOffset,n):t}function uhe(r,e,t,n,i){for(let o=0;o<i;o++)t[n+o]=r[o]^e[o&3]}function lhe(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function hje(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function GB(r){if(GB.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new jB(r):ArrayBuffer.isView(r)?e=new jB(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),GB.readOnly=!1),e}ox.exports={concat:fje,mask:uhe,toArrayBuffer:hje,toBuffer:GB,unmask:lhe};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");ox.exports.mask=function(e,t,n,i,o){o<48?uhe(e,t,n,i,o):r.mask(e,t,n,i,o)},ox.exports.unmask=function(e,t){e.length<32?lhe(e,t):r.unmask(e,t)}}catch{}});var hhe=O((snr,fhe)=>{"use strict";var dhe=Symbol("kDone"),HB=Symbol("kRun"),WB=class{constructor(e){this[dhe]=()=>{this.pending--,this[HB]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[HB]()}[HB](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[dhe])}}};fhe.exports=WB});var Fp=O((anr,yhe)=>{"use strict";var Mp=require("zlib"),phe=Bp(),pje=hhe(),{kStatusCode:mhe}=L0(),mje=Buffer[Symbol.species],gje=Buffer.from([0,0,255,255]),cx=Symbol("permessage-deflate"),B0=Symbol("total-length"),Up=Symbol("callback"),Fu=Symbol("buffers"),ax=Symbol("error"),sx,YB=class{constructor(e,t,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!sx){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;sx=new pje(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Up];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,n=e.find(i=>!(t.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>i.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(n.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?n.client_max_window_bits=t.clientMaxWindowBits:(n.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(n=>{let i=t[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);t[n]=i})}),e}decompress(e,t,n){sx.add(i=>{this._decompress(e,t,(o,s)=>{i(),n(o,s)})})}compress(e,t,n){sx.add(i=>{this._compress(e,t,(o,s)=>{i(),n(o,s)})})}_decompress(e,t,n){let i=this._isServer?"client":"server";if(!this._inflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?Mp.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=Mp.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[cx]=this,this._inflate[B0]=0,this._inflate[Fu]=[],this._inflate.on("error",wje),this._inflate.on("data",ghe)}this._inflate[Up]=n,this._inflate.write(e),t&&this._inflate.write(gje),this._inflate.flush(()=>{let o=this._inflate[ax];if(o){this._inflate.close(),this._inflate=null,n(o);return}let s=phe.concat(this._inflate[Fu],this._inflate[B0]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[B0]=0,this._inflate[Fu]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,t,n){let i=this._isServer?"server":"client";if(!this._deflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?Mp.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=Mp.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[B0]=0,this._deflate[Fu]=[],this._deflate.on("data",yje)}this._deflate[Up]=n,this._deflate.write(e),this._deflate.flush(Mp.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=phe.concat(this._deflate[Fu],this._deflate[B0]);t&&(o=new mje(o.buffer,o.byteOffset,o.length-4)),this._deflate[Up]=null,this._deflate[B0]=0,this._deflate[Fu]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,o)})}};yhe.exports=YB;function yje(r){this[Fu].push(r),this[B0]+=r.length}function ghe(r){if(this[B0]+=r.length,this[cx]._maxPayload<1||this[B0]<=this[cx]._maxPayload){this[Fu].push(r);return}this[ax]=new RangeError("Max payload size exceeded"),this[ax].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[ax][mhe]=1009,this.removeListener("data",ghe),this.reset()}function wje(r){this[cx]._inflate=null,r[mhe]=1007,this[Up](r)}});var K5=O((cnr,ux)=>{"use strict";var{isUtf8:whe}=require("buffer"),{hasBlob:bje}=L0(),_je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function vje(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function XB(r){let e=r.length,t=0;for(;t<e;)if(!(r[t]&128))t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}function Eje(r){return bje&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&(r[Symbol.toStringTag]==="Blob"||r[Symbol.toStringTag]==="File")}ux.exports={isBlob:Eje,isValidStatusCode:vje,isValidUTF8:XB,tokenChars:_je};if(whe)ux.exports.isValidUTF8=function(r){return r.length<24?XB(r):whe(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");ux.exports.isValidUTF8=function(e){return e.length<32?XB(e):r(e)}}catch{}});var tM=O((unr,The)=>{"use strict";var{Writable:xje}=require("stream"),bhe=Fp(),{BINARY_TYPES:Sje,EMPTY_BUFFER:_he,kStatusCode:Tje,kWebSocket:Ije}=L0(),{concat:QB,toArrayBuffer:Aje,unmask:Cje}=Bp(),{isValidStatusCode:Rje,isValidUTF8:vhe}=K5(),lx=Buffer[Symbol.species],aa=0,Ehe=1,xhe=2,She=3,ZB=4,JB=5,dx=6,eM=class extends xje{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||Sje[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Ije]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=aa}_write(e,t,n){if(this._opcode===8&&this._state==aa)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new lx(n.buffer,n.byteOffset+e,n.length-e),new lx(n.buffer,n.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new lx(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case aa:this.getInfo(e);break;case Ehe:this.getPayloadLength16(e);break;case xhe:this.getPayloadLength64(e);break;case She:this.getMask();break;case ZB:this.getData(e);break;case JB:case dx:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if(t[0]&48){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(t[0]&64)===64;if(n&&!this._extensions[bhe.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=Ehe:this._payloadLength===127?this._state=xhe:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),n=t.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=She:this._state=ZB}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=ZB}getData(e){let t=_he;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Cje(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=JB,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[bhe.extensionName].decompress(e,this._fin,(i,o)=>{if(i)return t(i);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(s);return}this._fragments.push(o)}this.dataMessage(t),this._state===aa&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=aa;return}let t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=QB(n,t):this._binaryType==="arraybuffer"?i=Aje(QB(n,t)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=aa):(this._state=dx,setImmediate(()=>{this.emit("message",i,!0),this._state=aa,this.startLoop(e)}))}else{let i=QB(n,t);if(!this._skipUTF8Validation&&!vhe(i)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(o);return}this._state===JB||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=aa):(this._state=dx,setImmediate(()=>{this.emit("message",i,!1),this._state=aa,this.startLoop(e)}))}}controlMessage(e,t){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,_he),this.end();else{let n=e.readUInt16BE(0);if(!Rje(n)){let o=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(o);return}let i=new lx(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!vhe(i)){let o=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(o);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=aa;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=aa):(this._state=dx,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=aa,this.startLoop(t)}))}createError(e,t,n,i,o){this._loop=!1,this._errored=!0;let s=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=o,s[Tje]=i,s}};The.exports=eM});var iM=O((dnr,Che)=>{"use strict";var{Duplex:lnr}=require("stream"),{randomFillSync:kje}=require("crypto"),Ihe=Fp(),{EMPTY_BUFFER:Pje,kWebSocket:Dje,NOOP:Nje}=L0(),{isBlob:j5,isValidStatusCode:Oje}=K5(),{mask:Ahe,toBuffer:sd}=Bp(),ca=Symbol("kByteLength"),Lje=Buffer.alloc(4),fx=8*1024,ad,G5=fx,Ja=0,Bje=1,Mje=2,rM=class r{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Ja,this.onerror=Nje,this[Dje]=void 0}static frame(e,t){let n,i=!1,o=2,s=!1;t.mask&&(n=t.maskBuffer||Lje,t.generateMask?t.generateMask(n):(G5===fx&&(ad===void 0&&(ad=Buffer.alloc(fx)),kje(ad,0,fx),G5=0),n[0]=ad[G5++],n[1]=ad[G5++],n[2]=ad[G5++],n[3]=ad[G5++]),s=(n[0]|n[1]|n[2]|n[3])===0,o=6);let a;typeof e=="string"?(!t.mask||s)&&t[ca]!==void 0?a=t[ca]:(e=Buffer.from(e),a=e.length):(a=e.length,i=t.mask&&t.readOnly&&!s);let c=a;a>=65536?(o+=8,c=127):a>125&&(o+=2,c=126);let u=Buffer.allocUnsafe(i?a+o:o);return u[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(u[0]|=64),u[1]=c,c===126?u.writeUInt16BE(a,2):c===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),t.mask?(u[1]|=128,u[o-4]=n[0],u[o-3]=n[1],u[o-2]=n[2],u[o-1]=n[3],s?[u,e]:i?(Ahe(e,n,u,o,a),[u]):(Ahe(e,n,e,0,a),[u,e])):[u,e]}close(e,t,n,i){let o;if(e===void 0)o=Pje;else{if(typeof e!="number"||!Oje(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+a),o.writeUInt16BE(e,0),typeof t=="string"?o.write(t,2):o.set(t,2)}}let s={[ca]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Ja?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(r.frame(o,s),i)}ping(e,t,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):j5(e)?(i=e.size,o=!1):(e=sd(e),i=e.length,o=sd.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[ca]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};j5(e)?this._state!==Ja?this.enqueue([this.getBlobData,e,!1,s,n]):this.getBlobData(e,!1,s,n):this._state!==Ja?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(r.frame(e,s),n)}pong(e,t,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):j5(e)?(i=e.size,o=!1):(e=sd(e),i=e.length,o=sd.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[ca]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};j5(e)?this._state!==Ja?this.enqueue([this.getBlobData,e,!1,s,n]):this.getBlobData(e,!1,s,n):this._state!==Ja?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(r.frame(e,s),n)}send(e,t,n){let i=this._extensions[Ihe.extensionName],o=t.binary?2:1,s=t.compress,a,c;typeof e=="string"?(a=Buffer.byteLength(e),c=!1):j5(e)?(a=e.size,c=!1):(e=sd(e),a=e.length,c=sd.readOnly),this._firstFragment?(this._firstFragment=!1,s&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=i._threshold),this._compress=s):(s=!1,o=0),t.fin&&(this._firstFragment=!0);let u={[ca]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:c,rsv1:s};j5(e)?this._state!==Ja?this.enqueue([this.getBlobData,e,this._compress,u,n]):this.getBlobData(e,this._compress,u,n):this._state!==Ja?this.enqueue([this.dispatch,e,this._compress,u,n]):this.dispatch(e,this._compress,u,n)}getBlobData(e,t,n,i){this._bufferedBytes+=n[ca],this._state=Mje,e.arrayBuffer().then(o=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(nM,this,a,i);return}this._bufferedBytes-=n[ca];let s=sd(o);t?this.dispatch(s,t,n,i):(this._state=Ja,this.sendFrame(r.frame(s,n),i),this.dequeue())}).catch(o=>{process.nextTick(Uje,this,o,i)})}dispatch(e,t,n,i){if(!t){this.sendFrame(r.frame(e,n),i);return}let o=this._extensions[Ihe.extensionName];this._bufferedBytes+=n[ca],this._state=Bje,o.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");nM(this,c,i);return}this._bufferedBytes-=n[ca],this._state=Ja,n.readOnly=!1,this.sendFrame(r.frame(a,n),i),this.dequeue()})}dequeue(){for(;this._state===Ja&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][ca],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][ca],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Che.exports=rM;function nM(r,e,t){typeof t=="function"&&t(e);for(let n=0;n<r._queue.length;n++){let i=r._queue[n],o=i[i.length-1];typeof o=="function"&&o(e)}}function Uje(r,e,t){nM(r,e,t),r.onerror(e)}});var Mhe=O((fnr,Bhe)=>{"use strict";var{kForOnEventAttribute:Vp,kListener:oM}=L0(),Rhe=Symbol("kCode"),khe=Symbol("kData"),Phe=Symbol("kError"),Dhe=Symbol("kMessage"),Nhe=Symbol("kReason"),H5=Symbol("kTarget"),Ohe=Symbol("kType"),Lhe=Symbol("kWasClean"),M0=class{constructor(e){this[H5]=null,this[Ohe]=e}get target(){return this[H5]}get type(){return this[Ohe]}};Object.defineProperty(M0.prototype,"target",{enumerable:!0});Object.defineProperty(M0.prototype,"type",{enumerable:!0});var cd=class extends M0{constructor(e,t={}){super(e),this[Rhe]=t.code===void 0?0:t.code,this[Nhe]=t.reason===void 0?"":t.reason,this[Lhe]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Rhe]}get reason(){return this[Nhe]}get wasClean(){return this[Lhe]}};Object.defineProperty(cd.prototype,"code",{enumerable:!0});Object.defineProperty(cd.prototype,"reason",{enumerable:!0});Object.defineProperty(cd.prototype,"wasClean",{enumerable:!0});var W5=class extends M0{constructor(e,t={}){super(e),this[Phe]=t.error===void 0?null:t.error,this[Dhe]=t.message===void 0?"":t.message}get error(){return this[Phe]}get message(){return this[Dhe]}};Object.defineProperty(W5.prototype,"error",{enumerable:!0});Object.defineProperty(W5.prototype,"message",{enumerable:!0});var zp=class extends M0{constructor(e,t={}){super(e),this[khe]=t.data===void 0?null:t.data}get data(){return this[khe]}};Object.defineProperty(zp.prototype,"data",{enumerable:!0});var Fje={addEventListener(r,e,t={}){for(let i of this.listeners(r))if(!t[Vp]&&i[oM]===e&&!i[Vp])return;let n;if(r==="message")n=function(o,s){let a=new zp("message",{data:s?o:o.toString()});a[H5]=this,hx(e,this,a)};else if(r==="close")n=function(o,s){let a=new cd("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[H5]=this,hx(e,this,a)};else if(r==="error")n=function(o){let s=new W5("error",{error:o,message:o.message});s[H5]=this,hx(e,this,s)};else if(r==="open")n=function(){let o=new M0("open");o[H5]=this,hx(e,this,o)};else return;n[Vp]=!!t[Vp],n[oM]=e,t.once?this.once(r,n):this.on(r,n)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[oM]===e&&!t[Vp]){this.removeListener(r,t);break}}};Bhe.exports={CloseEvent:cd,ErrorEvent:W5,Event:M0,EventTarget:Fje,MessageEvent:zp};function hx(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}});var sM=O((hnr,Uhe)=>{"use strict";var{tokenChars:qp}=K5();function ic(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function Vje(r){let e=Object.create(null),t=Object.create(null),n=!1,i=!1,o=!1,s,a,c=-1,u=-1,l=-1,d=0;for(;d<r.length;d++)if(u=r.charCodeAt(d),s===void 0)if(l===-1&&qp[u]===1)c===-1&&(c=d);else if(d!==0&&(u===32||u===9))l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=r.slice(c,l);u===44?(ic(e,f,t),t=Object.create(null)):s=f,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&qp[u]===1)c===-1&&(c=d);else if(u===32||u===9)l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),ic(t,r.slice(c,l),!0),u===44&&(ic(e,s,t),t=Object.create(null),s=void 0),c=l=-1}else if(u===61&&c!==-1&&l===-1)a=r.slice(c,d),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(qp[u]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);c===-1?c=d:n||(n=!0),i=!1}else if(o)if(qp[u]===1)c===-1&&(c=d);else if(u===34&&c!==-1)o=!1,l=d;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(u===34&&r.charCodeAt(d-1)===61)o=!0;else if(l===-1&&qp[u]===1)c===-1&&(c=d);else if(c!==-1&&(u===32||u===9))l===-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=r.slice(c,l);n&&(f=f.replace(/\\/g,""),n=!1),ic(t,a,f),u===44&&(ic(e,s,t),t=Object.create(null),s=void 0),a=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(c===-1||o||u===32||u===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let h=r.slice(c,l);return s===void 0?ic(e,h,t):(a===void 0?ic(t,h,!0):n?ic(t,a,h.replace(/\\/g,"")):ic(t,a,h),ic(e,s,t)),e}function zje(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(n=>[e].concat(Object.keys(n).map(i=>{let o=n[i];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?i:`${i}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Uhe.exports={format:zje,parse:Vje}});var dM=O((gnr,Xhe)=>{"use strict";var qje=require("events"),$je=require("https"),Kje=require("http"),zhe=require("net"),jje=require("tls"),{randomBytes:Gje,createHash:Hje}=require("crypto"),{Duplex:pnr,Readable:mnr}=require("stream"),{URL:aM}=require("url"),Vu=Fp(),Wje=tM(),Yje=iM(),{isBlob:Xje}=K5(),{BINARY_TYPES:Fhe,EMPTY_BUFFER:px,GUID:Qje,kForOnEventAttribute:cM,kListener:Zje,kStatusCode:Jje,kWebSocket:ni,NOOP:qhe}=L0(),{EventTarget:{addEventListener:eGe,removeEventListener:tGe}}=Mhe(),{format:rGe,parse:nGe}=sM(),{toBuffer:iGe}=Bp(),oGe=30*1e3,$he=Symbol("kAborted"),uM=[8,13],U0=["CONNECTING","OPEN","CLOSING","CLOSED"],sGe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,jr=class r extends qje{constructor(e,t,n){super(),this._binaryType=Fhe[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=px,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(n=t,t=[]):t=[t]),Khe(this,e,t,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Fhe.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){let i=new Wje({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),o=new Yje(e,this._extensions,n.generateMask);this._receiver=i,this._sender=o,this._socket=e,i[ni]=this,o[ni]=this,e[ni]=this,i.on("conclude",uGe),i.on("drain",lGe),i.on("error",dGe),i.on("message",fGe),i.on("ping",hGe),i.on("pong",pGe),o.onerror=mGe,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Hhe),e.on("data",gx),e.on("end",Whe),e.on("error",Yhe),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Vu.extensionName]&&this._extensions[Vu.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){ds(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,t,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Ghe(this)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){lM(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||px,t,n)}pong(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){lM(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||px,t,n)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(n=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){lM(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[Vu.extensionName]||(i.compress=!1),this._sender.send(e||px,i,n)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){ds(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(jr,"CONNECTING",{enumerable:!0,value:U0.indexOf("CONNECTING")});Object.defineProperty(jr.prototype,"CONNECTING",{enumerable:!0,value:U0.indexOf("CONNECTING")});Object.defineProperty(jr,"OPEN",{enumerable:!0,value:U0.indexOf("OPEN")});Object.defineProperty(jr.prototype,"OPEN",{enumerable:!0,value:U0.indexOf("OPEN")});Object.defineProperty(jr,"CLOSING",{enumerable:!0,value:U0.indexOf("CLOSING")});Object.defineProperty(jr.prototype,"CLOSING",{enumerable:!0,value:U0.indexOf("CLOSING")});Object.defineProperty(jr,"CLOSED",{enumerable:!0,value:U0.indexOf("CLOSED")});Object.defineProperty(jr.prototype,"CLOSED",{enumerable:!0,value:U0.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(jr.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(jr.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[cM])return e[Zje];return null},set(e){for(let t of this.listeners(r))if(t[cM]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[cM]:!0})}})});jr.prototype.addEventListener=eGe;jr.prototype.removeEventListener=tGe;Xhe.exports=jr;function Khe(r,e,t,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:uM[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(r._autoPong=i.autoPong,!uM.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${uM.join(", ")})`);let o;if(e instanceof aM)o=e;else try{o=new aM(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),r._url=o.href;let s=o.protocol==="wss:",a=o.protocol==="ws+unix:",c;if(o.protocol!=="ws:"&&!s&&!a?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!o.pathname?c="The URL's pathname is empty":o.hash&&(c="The URL contains a fragment identifier"),c){let w=new SyntaxError(c);if(r._redirects===0)throw w;mx(r,w);return}let u=s?443:80,l=Gje(16).toString("base64"),d=s?$je.request:Kje.request,h=new Set,f;if(i.createConnection=i.createConnection||(s?cGe:aGe),i.defaultPort=i.defaultPort||u,i.port=o.port||u,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new Vu(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=rGe({[Vu.extensionName]:f.offer()})),t.length){for(let w of t){if(typeof w!="string"||!sGe.test(w)||h.has(w))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(w)}i.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){let w=i.path.split(":");i.socketPath=w[0],i.path=w[1]}let m;if(i.followRedirects){if(r._redirects===0){r._originalIpc=a,r._originalSecure=s,r._originalHostOrSocketPath=a?i.socketPath:o.host;let w=n&&n.headers;if(n={...n,headers:{}},w)for(let[_,E]of Object.entries(w))n.headers[_.toLowerCase()]=E}else if(r.listenerCount("redirect")===0){let w=a?r._originalIpc?i.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:o.host===r._originalHostOrSocketPath;(!w||r._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,w||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),m=r._req=d(i),r._redirects&&r.emit("redirect",r.url,m)}else m=r._req=d(i);i.timeout&&m.on("timeout",()=>{ds(r,m,"Opening handshake has timed out")}),m.on("error",w=>{m===null||m[$he]||(m=r._req=null,mx(r,w))}),m.on("response",w=>{let _=w.headers.location,E=w.statusCode;if(_&&i.followRedirects&&E>=300&&E<400){if(++r._redirects>i.maxRedirects){ds(r,m,"Maximum redirects exceeded");return}m.abort();let S;try{S=new aM(_,e)}catch{let g=new SyntaxError(`Invalid URL: ${_}`);mx(r,g);return}Khe(r,S,t,n)}else r.emit("unexpected-response",m,w)||ds(r,m,`Unexpected server response: ${w.statusCode}`)}),m.on("upgrade",(w,_,E)=>{if(r.emit("upgrade",w),r.readyState!==jr.CONNECTING)return;m=r._req=null;let S=w.headers.upgrade;if(S===void 0||S.toLowerCase()!=="websocket"){ds(r,_,"Invalid Upgrade header");return}let p=Hje("sha1").update(l+Qje).digest("base64");if(w.headers["sec-websocket-accept"]!==p){ds(r,_,"Invalid Sec-WebSocket-Accept header");return}let g=w.headers["sec-websocket-protocol"],y;if(g!==void 0?h.size?h.has(g)||(y="Server sent an invalid subprotocol"):y="Server sent a subprotocol but none was requested":h.size&&(y="Server sent no subprotocol"),y){ds(r,_,y);return}g&&(r._protocol=g);let b=w.headers["sec-websocket-extensions"];if(b!==void 0){if(!f){ds(r,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let x;try{x=nGe(b)}catch{ds(r,_,"Invalid Sec-WebSocket-Extensions header");return}let v=Object.keys(x);if(v.length!==1||v[0]!==Vu.extensionName){ds(r,_,"Server indicated an extension that was not requested");return}try{f.accept(x[Vu.extensionName])}catch{ds(r,_,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[Vu.extensionName]=f}r.setSocket(_,E,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(m,r):m.end()}function mx(r,e){r._readyState=jr.CLOSING,r._errorEmitted=!0,r.emit("error",e),r.emitClose()}function aGe(r){return r.path=r.socketPath,zhe.connect(r)}function cGe(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=zhe.isIP(r.host)?"":r.host),jje.connect(r)}function ds(r,e,t){r._readyState=jr.CLOSING;let n=new Error(t);Error.captureStackTrace(n,ds),e.setHeader?(e[$he]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(mx,r,n)):(e.destroy(n),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function lM(r,e,t){if(e){let n=Xje(e)?e.size:iGe(e).length;r._socket?r._sender._bufferedBytes+=n:r._bufferedAmount+=n}if(t){let n=new Error(`WebSocket is not open: readyState ${r.readyState} (${U0[r.readyState]})`);process.nextTick(t,n)}}function uGe(r,e){let t=this[ni];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[ni]!==void 0&&(t._socket.removeListener("data",gx),process.nextTick(jhe,t._socket),r===1005?t.close():t.close(r,e))}function lGe(){let r=this[ni];r.isPaused||r._socket.resume()}function dGe(r){let e=this[ni];e._socket[ni]!==void 0&&(e._socket.removeListener("data",gx),process.nextTick(jhe,e._socket),e.close(r[Jje])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r))}function Vhe(){this[ni].emitClose()}function fGe(r,e){this[ni].emit("message",r,e)}function hGe(r){let e=this[ni];e._autoPong&&e.pong(r,!this._isServer,qhe),e.emit("ping",r)}function pGe(r){this[ni].emit("pong",r)}function jhe(r){r.resume()}function mGe(r){let e=this[ni];e.readyState!==jr.CLOSED&&(e.readyState===jr.OPEN&&(e._readyState=jr.CLOSING,Ghe(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r)))}function Ghe(r){r._closeTimer=setTimeout(r._socket.destroy.bind(r._socket),oGe)}function Hhe(){let r=this[ni];this.removeListener("close",Hhe),this.removeListener("data",gx),this.removeListener("end",Whe),r._readyState=jr.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[ni]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",Vhe),r._receiver.on("finish",Vhe))}function gx(r){this[ni]._receiver.write(r)||this.pause()}function Whe(){let r=this[ni];r._readyState=jr.CLOSING,r._receiver.end(),this.end()}function Yhe(){let r=this[ni];this.removeListener("error",Yhe),this.on("error",qhe),r&&(r._readyState=jr.CLOSING,this.destroy())}});var Zhe=O((ynr,Qhe)=>{"use strict";var{tokenChars:gGe}=K5();function yGe(r){let e=new Set,t=-1,n=-1,i=0;for(i;i<r.length;i++){let s=r.charCodeAt(i);if(n===-1&&gGe[s]===1)t===-1&&(t=i);else if(i!==0&&(s===32||s===9))n===-1&&t!==-1&&(n=i);else if(s===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=r.slice(t,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(t===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let o=r.slice(t,i);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}Qhe.exports={parse:yGe}});var o6e=O((bnr,i6e)=>{"use strict";var wGe=require("events"),yx=require("http"),{Duplex:wnr}=require("stream"),{createHash:bGe}=require("crypto"),Jhe=sM(),ud=Fp(),_Ge=Zhe(),vGe=dM(),{GUID:EGe,kWebSocket:xGe}=L0(),SGe=/^[+/0-9A-Za-z]{22}==$/,e6e=0,t6e=1,n6e=2,fM=class extends wGe{constructor(e,t){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:vGe,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=yx.createServer((n,i)=>{let o=yx.STATUS_CODES[426];i.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),i.end(o)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=TGe(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,o,s)=>{this.handleUpgrade(i,o,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=e6e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===n6e){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick($p,this);return}if(e&&this.once("close",e),this._state!==t6e)if(this._state=t6e,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick($p,this):process.nextTick($p,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{$p(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",r6e);let o=e.headers["sec-websocket-key"],s=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){ld(this,e,t,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){ld(this,e,t,400,"Invalid Upgrade header");return}if(o===void 0||!SGe.test(o)){ld(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){ld(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Kp(t,400);return}let c=e.headers["sec-websocket-protocol"],u=new Set;if(c!==void 0)try{u=_Ge.parse(c)}catch{ld(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&l!==void 0){let h=new ud(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=Jhe.parse(l);f[ud.extensionName]&&(h.accept(f[ud.extensionName]),d[ud.extensionName]=h)}catch{ld(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let h={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(f,m,w,_)=>{if(!f)return Kp(t,m||401,w,_);this.completeUpgrade(d,o,u,e,t,n,i)});return}if(!this.options.verifyClient(h))return Kp(t,401)}this.completeUpgrade(d,o,u,e,t,n,i)}completeUpgrade(e,t,n,i,o,s,a){if(!o.readable||!o.writable)return o.destroy();if(o[xGe])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>e6e)return Kp(o,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${bGe("sha1").update(t+EGe).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;d&&(u.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[ud.extensionName]){let d=e[ud.extensionName].params,h=Jhe.format({[ud.extensionName]:[d]});u.push(`Sec-WebSocket-Extensions: ${h}`),l._extensions=e}this.emit("headers",u,i),o.write(u.concat(`\r
`).join(`\r
`)),o.removeListener("error",r6e),l.setSocket(o,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick($p,this)})),a(l,i)}};i6e.exports=fM;function TGe(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let n of Object.keys(e))r.removeListener(n,e[n])}}function $p(r){r._state=n6e,r.emit("close")}function r6e(){this.destroy()}function Kp(r,e,t,n){t=t||yx.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...n},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${yx.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+t)}function ld(r,e,t,n,i){if(r.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,ld),r.emit("wsClientError",o,t,e)}else Kp(t,n,i)}});var j6e=O(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0});function KGe(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}IM.isSerializableHash=KGe});var xx=O(Q5=>{"use strict";Object.defineProperty(Q5,"__esModule",{value:!0});function jGe(r,e,t){return~(r-1)&e|r-1&t}Q5.select=jGe;function GGe(r,e){return(r|0)-(e|0)-1>>>31&1}Q5.lessOrEqual=GGe;function G6e(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}Q5.compare=G6e;function HGe(r,e){return r.length===0||e.length===0?!1:G6e(r,e)!==0}Q5.equal=HGe});var oc=O(AM=>{"use strict";Object.defineProperty(AM,"__esModule",{value:!0});function WGe(r){for(var e=0;e<r.length;e++)r[e]=0;return r}AM.wipe=WGe});var W6e=O(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});var sc=j6e(),YGe=xx(),XGe=oc(),H6e=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(n).clean():n.set(t);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),sc.isSerializableHash(this._inner)&&sc.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),XGe.wipe(n)}return r.prototype.reset=function(){if(!sc.isSerializableHash(this._inner)||!sc.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){sc.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),sc.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!sc.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!sc.isSerializableHash(this._inner)||!sc.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!sc.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Gp.HMAC=H6e;function QGe(r,e,t){var n=new H6e(r,e);n.update(t);var i=n.digest();return n.clean(),i}Gp.hmac=QGe;Gp.equal=YGe.equal});var Q6e=O(CM=>{"use strict";Object.defineProperty(CM,"__esModule",{value:!0});var Y6e=W6e(),X6e=oc(),ZGe=function(){function r(e,t,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=Y6e.hmac(this._hash,n,t);this._hmac=new Y6e.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[n]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),X6e.wipe(this._buffer),X6e.wipe(this._counter),this._bufpos=0},r}();CM.HKDF=ZGe});var J6e=O(Sx=>{"use strict";Object.defineProperty(Sx,"__esModule",{value:!0});Sx.BrowserRandomSource=void 0;var Z6e=65536,RM=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let n=0;n<t.length;n+=Z6e)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,Z6e)));return t}};Sx.BrowserRandomSource=RM});var e8e=O(Tx=>{"use strict";Object.defineProperty(Tx,"__esModule",{value:!0});Tx.NodeRandomSource=void 0;var JGe=oc(),kM=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof require<"u"){let e=require("crypto");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,JGe.wipe)(t),n}};Tx.NodeRandomSource=kM});var t8e=O(Ix=>{"use strict";Object.defineProperty(Ix,"__esModule",{value:!0});Ix.SystemRandomSource=void 0;var eHe=J6e(),tHe=e8e(),PM=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new eHe.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new tHe.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};Ix.SystemRandomSource=PM});var r8e=O(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});function rHe(r,e){var t=r>>>16&65535,n=r&65535,i=e>>>16&65535,o=e&65535;return n*o+(t*o+n*i<<16>>>0)|0}fs.mul=Math.imul||rHe;function nHe(r,e){return r+e|0}fs.add=nHe;function iHe(r,e){return r-e|0}fs.sub=iHe;function oHe(r,e){return r<<e|r>>>32-e}fs.rotl=oHe;function sHe(r,e){return r<<32-e|r>>>e}fs.rotr=sHe;function aHe(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}fs.isInteger=Number.isInteger||aHe;fs.MAX_SAFE_INTEGER=9007199254740991;fs.isSafeInteger=function(r){return fs.isInteger(r)&&r>=-fs.MAX_SAFE_INTEGER&&r<=fs.MAX_SAFE_INTEGER}});var Hp=O(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});var n8e=r8e();function cHe(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Ct.readInt16BE=cHe;function uHe(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Ct.readUint16BE=uHe;function lHe(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Ct.readInt16LE=lHe;function dHe(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Ct.readUint16LE=dHe;function i8e(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Ct.writeUint16BE=i8e;Ct.writeInt16BE=i8e;function o8e(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Ct.writeUint16LE=o8e;Ct.writeInt16LE=o8e;function DM(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Ct.readInt32BE=DM;function NM(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Ct.readUint32BE=NM;function OM(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Ct.readInt32LE=OM;function LM(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Ct.readUint32LE=LM;function Ax(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Ct.writeUint32BE=Ax;Ct.writeInt32BE=Ax;function Cx(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Ct.writeUint32LE=Cx;Ct.writeInt32LE=Cx;function fHe(r,e){e===void 0&&(e=0);var t=DM(r,e),n=DM(r,e+4);return t*4294967296+n-(n>>31)*4294967296}Ct.readInt64BE=fHe;function hHe(r,e){e===void 0&&(e=0);var t=NM(r,e),n=NM(r,e+4);return t*4294967296+n}Ct.readUint64BE=hHe;function pHe(r,e){e===void 0&&(e=0);var t=OM(r,e),n=OM(r,e+4);return n*4294967296+t-(t>>31)*4294967296}Ct.readInt64LE=pHe;function mHe(r,e){e===void 0&&(e=0);var t=LM(r,e),n=LM(r,e+4);return n*4294967296+t}Ct.readUint64LE=mHe;function s8e(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Ax(r/4294967296>>>0,e,t),Ax(r>>>0,e,t+4),e}Ct.writeUint64BE=s8e;Ct.writeInt64BE=s8e;function a8e(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Cx(r>>>0,e,t),Cx(r/4294967296>>>0,e,t+4),e}Ct.writeUint64LE=a8e;Ct.writeInt64LE=a8e;function gHe(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=r/8+t-1;o>=t;o--)n+=e[o]*i,i*=256;return n}Ct.readUintBE=gHe;function yHe(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=t;o<t+r/8;o++)n+=e[o]*i,i*=256;return n}Ct.readUintLE=yHe;function wHe(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n8e.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=r/8+n-1;o>=n;o--)t[o]=e/i&255,i*=256;return t}Ct.writeUintBE=wHe;function bHe(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n8e.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+r/8;o++)t[o]=e/i&255,i*=256;return t}Ct.writeUintLE=bHe;function _He(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Ct.readFloat32BE=_He;function vHe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Ct.readFloat32LE=vHe;function EHe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Ct.readFloat64BE=EHe;function xHe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Ct.readFloat64LE=xHe;function SHe(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r),e}Ct.writeFloat32BE=SHe;function THe(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r,!0),e}Ct.writeFloat32LE=THe;function IHe(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r),e}Ct.writeFloat64BE=IHe;function AHe(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r,!0),e}Ct.writeFloat64LE=AHe});var d8e=O(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.randomStringForEntropy=Di.randomString=Di.randomUint32=Di.randomBytes=Di.defaultRandomSource=void 0;var CHe=t8e(),RHe=Hp(),c8e=oc();Di.defaultRandomSource=new CHe.SystemRandomSource;function BM(r,e=Di.defaultRandomSource){return e.randomBytes(r)}Di.randomBytes=BM;function kHe(r=Di.defaultRandomSource){let e=BM(4,r),t=(0,RHe.readUint32LE)(e);return(0,c8e.wipe)(e),t}Di.randomUint32=kHe;var u8e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l8e(r,e=u8e,t=Di.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,o=256-256%i;for(;r>0;){let s=BM(Math.ceil(r*256/o),t);for(let a=0;a<s.length&&r>0;a++){let c=s[a];c<o&&(n+=e.charAt(c%i),r--)}(0,c8e.wipe)(s)}return n}Di.randomString=l8e;function PHe(r,e=u8e,t=Di.defaultRandomSource){let n=Math.ceil(r/(Math.log(e.length)/Math.LN2));return l8e(n,e,t)}Di.randomStringForEntropy=PHe});var m8e=O(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.sharedKey=cn.generateKeyPair=cn.generateKeyPairFromSeed=cn.scalarMultBase=cn.scalarMult=cn.SHARED_KEY_LENGTH=cn.SECRET_KEY_LENGTH=cn.PUBLIC_KEY_LENGTH=void 0;var DHe=d8e(),NHe=oc();cn.PUBLIC_KEY_LENGTH=32;cn.SECRET_KEY_LENGTH=32;cn.SHARED_KEY_LENGTH=32;function ac(r){let e=new Float64Array(16);if(r)for(let t=0;t<r.length;t++)e[t]=r[t];return e}var f8e=new Uint8Array(32);f8e[0]=9;var OHe=ac([56129,1]);function MM(r){let e=1;for(let t=0;t<16;t++){let n=r[t]+e+65535;e=Math.floor(n/65536),r[t]=n-e*65536}r[0]+=e-1+37*(e-1)}function Wp(r,e,t){let n=~(t-1);for(let i=0;i<16;i++){let o=n&(r[i]^e[i]);r[i]^=o,e[i]^=o}}function LHe(r,e){let t=ac(),n=ac();for(let i=0;i<16;i++)n[i]=e[i];MM(n),MM(n),MM(n);for(let i=0;i<2;i++){t[0]=n[0]-65517;for(let s=1;s<15;s++)t[s]=n[s]-65535-(t[s-1]>>16&1),t[s-1]&=65535;t[15]=n[15]-32767-(t[14]>>16&1);let o=t[15]>>16&1;t[14]&=65535,Wp(n,t,1-o)}for(let i=0;i<16;i++)r[2*i]=n[i]&255,r[2*i+1]=n[i]>>8}function BHe(r,e){for(let t=0;t<16;t++)r[t]=e[2*t]+(e[2*t+1]<<8);r[15]&=32767}function Rx(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]+t[n]}function kx(r,e,t){for(let n=0;n<16;n++)r[n]=e[n]-t[n]}function F0(r,e,t){let n,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,h=0,f=0,m=0,w=0,_=0,E=0,S=0,p=0,g=0,y=0,b=0,x=0,v=0,T=0,I=0,R=0,M=0,U=0,j=0,D=0,q=0,V=0,te=0,pe=0,ue=t[0],Ue=t[1],le=t[2],_e=t[3],we=t[4],xe=t[5],N=t[6],A=t[7],ne=t[8],G=t[9],Te=t[10],ze=t[11],rt=t[12],bt=t[13],xt=t[14],lr=t[15];n=e[0],o+=n*ue,s+=n*Ue,a+=n*le,c+=n*_e,u+=n*we,l+=n*xe,d+=n*N,h+=n*A,f+=n*ne,m+=n*G,w+=n*Te,_+=n*ze,E+=n*rt,S+=n*bt,p+=n*xt,g+=n*lr,n=e[1],s+=n*ue,a+=n*Ue,c+=n*le,u+=n*_e,l+=n*we,d+=n*xe,h+=n*N,f+=n*A,m+=n*ne,w+=n*G,_+=n*Te,E+=n*ze,S+=n*rt,p+=n*bt,g+=n*xt,y+=n*lr,n=e[2],a+=n*ue,c+=n*Ue,u+=n*le,l+=n*_e,d+=n*we,h+=n*xe,f+=n*N,m+=n*A,w+=n*ne,_+=n*G,E+=n*Te,S+=n*ze,p+=n*rt,g+=n*bt,y+=n*xt,b+=n*lr,n=e[3],c+=n*ue,u+=n*Ue,l+=n*le,d+=n*_e,h+=n*we,f+=n*xe,m+=n*N,w+=n*A,_+=n*ne,E+=n*G,S+=n*Te,p+=n*ze,g+=n*rt,y+=n*bt,b+=n*xt,x+=n*lr,n=e[4],u+=n*ue,l+=n*Ue,d+=n*le,h+=n*_e,f+=n*we,m+=n*xe,w+=n*N,_+=n*A,E+=n*ne,S+=n*G,p+=n*Te,g+=n*ze,y+=n*rt,b+=n*bt,x+=n*xt,v+=n*lr,n=e[5],l+=n*ue,d+=n*Ue,h+=n*le,f+=n*_e,m+=n*we,w+=n*xe,_+=n*N,E+=n*A,S+=n*ne,p+=n*G,g+=n*Te,y+=n*ze,b+=n*rt,x+=n*bt,v+=n*xt,T+=n*lr,n=e[6],d+=n*ue,h+=n*Ue,f+=n*le,m+=n*_e,w+=n*we,_+=n*xe,E+=n*N,S+=n*A,p+=n*ne,g+=n*G,y+=n*Te,b+=n*ze,x+=n*rt,v+=n*bt,T+=n*xt,I+=n*lr,n=e[7],h+=n*ue,f+=n*Ue,m+=n*le,w+=n*_e,_+=n*we,E+=n*xe,S+=n*N,p+=n*A,g+=n*ne,y+=n*G,b+=n*Te,x+=n*ze,v+=n*rt,T+=n*bt,I+=n*xt,R+=n*lr,n=e[8],f+=n*ue,m+=n*Ue,w+=n*le,_+=n*_e,E+=n*we,S+=n*xe,p+=n*N,g+=n*A,y+=n*ne,b+=n*G,x+=n*Te,v+=n*ze,T+=n*rt,I+=n*bt,R+=n*xt,M+=n*lr,n=e[9],m+=n*ue,w+=n*Ue,_+=n*le,E+=n*_e,S+=n*we,p+=n*xe,g+=n*N,y+=n*A,b+=n*ne,x+=n*G,v+=n*Te,T+=n*ze,I+=n*rt,R+=n*bt,M+=n*xt,U+=n*lr,n=e[10],w+=n*ue,_+=n*Ue,E+=n*le,S+=n*_e,p+=n*we,g+=n*xe,y+=n*N,b+=n*A,x+=n*ne,v+=n*G,T+=n*Te,I+=n*ze,R+=n*rt,M+=n*bt,U+=n*xt,j+=n*lr,n=e[11],_+=n*ue,E+=n*Ue,S+=n*le,p+=n*_e,g+=n*we,y+=n*xe,b+=n*N,x+=n*A,v+=n*ne,T+=n*G,I+=n*Te,R+=n*ze,M+=n*rt,U+=n*bt,j+=n*xt,D+=n*lr,n=e[12],E+=n*ue,S+=n*Ue,p+=n*le,g+=n*_e,y+=n*we,b+=n*xe,x+=n*N,v+=n*A,T+=n*ne,I+=n*G,R+=n*Te,M+=n*ze,U+=n*rt,j+=n*bt,D+=n*xt,q+=n*lr,n=e[13],S+=n*ue,p+=n*Ue,g+=n*le,y+=n*_e,b+=n*we,x+=n*xe,v+=n*N,T+=n*A,I+=n*ne,R+=n*G,M+=n*Te,U+=n*ze,j+=n*rt,D+=n*bt,q+=n*xt,V+=n*lr,n=e[14],p+=n*ue,g+=n*Ue,y+=n*le,b+=n*_e,x+=n*we,v+=n*xe,T+=n*N,I+=n*A,R+=n*ne,M+=n*G,U+=n*Te,j+=n*ze,D+=n*rt,q+=n*bt,V+=n*xt,te+=n*lr,n=e[15],g+=n*ue,y+=n*Ue,b+=n*le,x+=n*_e,v+=n*we,T+=n*xe,I+=n*N,R+=n*A,M+=n*ne,U+=n*G,j+=n*Te,D+=n*ze,q+=n*rt,V+=n*bt,te+=n*xt,pe+=n*lr,o+=38*y,s+=38*b,a+=38*x,c+=38*v,u+=38*T,l+=38*I,d+=38*R,h+=38*M,f+=38*U,m+=38*j,w+=38*D,_+=38*q,E+=38*V,S+=38*te,p+=38*pe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,o+=i-1+37*(i-1),r[0]=o,r[1]=s,r[2]=a,r[3]=c,r[4]=u,r[5]=l,r[6]=d,r[7]=h,r[8]=f,r[9]=m,r[10]=w,r[11]=_,r[12]=E,r[13]=S,r[14]=p,r[15]=g}function Yp(r,e){F0(r,e,e)}function MHe(r,e){let t=ac();for(let n=0;n<16;n++)t[n]=e[n];for(let n=253;n>=0;n--)Yp(t,t),n!==2&&n!==4&&F0(t,t,e);for(let n=0;n<16;n++)r[n]=t[n]}function UM(r,e){let t=new Uint8Array(32),n=new Float64Array(80),i=ac(),o=ac(),s=ac(),a=ac(),c=ac(),u=ac();for(let f=0;f<31;f++)t[f]=r[f];t[31]=r[31]&127|64,t[0]&=248,BHe(n,e);for(let f=0;f<16;f++)o[f]=n[f];i[0]=a[0]=1;for(let f=254;f>=0;--f){let m=t[f>>>3]>>>(f&7)&1;Wp(i,o,m),Wp(s,a,m),Rx(c,i,s),kx(i,i,s),Rx(s,o,a),kx(o,o,a),Yp(a,c),Yp(u,i),F0(i,s,i),F0(s,o,c),Rx(c,i,s),kx(i,i,s),Yp(o,i),kx(s,a,u),F0(i,s,OHe),Rx(i,i,a),F0(s,s,i),F0(i,a,u),F0(a,o,n),Yp(o,c),Wp(i,o,m),Wp(s,a,m)}for(let f=0;f<16;f++)n[f+16]=i[f],n[f+32]=s[f],n[f+48]=o[f],n[f+64]=a[f];let l=n.subarray(32),d=n.subarray(16);MHe(l,l),F0(d,d,l);let h=new Uint8Array(32);return LHe(h,d),h}cn.scalarMult=UM;function h8e(r){return UM(r,f8e)}cn.scalarMultBase=h8e;function p8e(r){if(r.length!==cn.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${cn.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(r);return{publicKey:h8e(e),secretKey:e}}cn.generateKeyPairFromSeed=p8e;function UHe(r){let e=(0,DHe.randomBytes)(32,r),t=p8e(e);return(0,NHe.wipe)(e),t}cn.generateKeyPair=UHe;function FHe(r,e,t=!1){if(r.length!==cn.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==cn.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=UM(r,e);if(t){let i=0;for(let o=0;o<n.length;o++)i|=n[o];if(i===0)throw new Error("X25519: invalid shared key")}return n}cn.sharedKey=FHe});var y8e=O(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Dx=Hp(),Px=oc();qu.DIGEST_LENGTH=32;qu.BLOCK_SIZE=64;var g8e=function(){function r(){this.digestLength=qu.DIGEST_LENGTH,this.blockSize=qu.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){Px.wipe(this._buffer),Px.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(t===void 0&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(FM(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=FM(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,n=this._bufferLength,i=t/536870912|0,o=t<<3,s=t%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<s-8;a++)this._buffer[a]=0;Dx.writeUint32BE(i,this._buffer,s-8),Dx.writeUint32BE(o,this._buffer,s-4),FM(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)Dx.writeUint32BE(this._state[a],e,a*4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){Px.wipe(e.state),e.buffer&&Px.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();qu.SHA256=g8e;var VHe=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function FM(r,e,t,n,i){for(;i>=64;){for(var o=e[0],s=e[1],a=e[2],c=e[3],u=e[4],l=e[5],d=e[6],h=e[7],f=0;f<16;f++){var m=n+f*4;r[f]=Dx.readUint32BE(t,m)}for(var f=16;f<64;f++){var w=r[f-2],_=(w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10;w=r[f-15];var E=(w>>>7|w<<25)^(w>>>18|w<<14)^w>>>3;r[f]=(_+r[f-7]|0)+(E+r[f-16]|0)}for(var f=0;f<64;f++){var _=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&d)|0)+(h+(VHe[f]+r[f]|0)|0)|0,E=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&s^o&a^s&a)|0;h=d,d=l,l=u,u=c+_|0,c=a,a=s,s=o,o=_+E|0}e[0]+=o,e[1]+=s,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=l,e[6]+=d,e[7]+=h,n+=64,i-=64}return n}function zHe(r){var e=new g8e;e.update(r);var t=e.digest();return e.clean(),t}qu.hash=zHe});var b8e=O(Nx=>{"use strict";Object.defineProperty(Nx,"__esModule",{value:!0});var Ni=Hp(),VM=oc(),qHe=20;function $He(r,e,t){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=t[3]<<24|t[2]<<16|t[1]<<8|t[0],c=t[7]<<24|t[6]<<16|t[5]<<8|t[4],u=t[11]<<24|t[10]<<16|t[9]<<8|t[8],l=t[15]<<24|t[14]<<16|t[13]<<8|t[12],d=t[19]<<24|t[18]<<16|t[17]<<8|t[16],h=t[23]<<24|t[22]<<16|t[21]<<8|t[20],f=t[27]<<24|t[26]<<16|t[25]<<8|t[24],m=t[31]<<24|t[30]<<16|t[29]<<8|t[28],w=e[3]<<24|e[2]<<16|e[1]<<8|e[0],_=e[7]<<24|e[6]<<16|e[5]<<8|e[4],E=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],p=n,g=i,y=o,b=s,x=a,v=c,T=u,I=l,R=d,M=h,U=f,j=m,D=w,q=_,V=E,te=S,pe=0;pe<qHe;pe+=2)p=p+x|0,D^=p,D=D>>>16|D<<16,R=R+D|0,x^=R,x=x>>>20|x<<12,g=g+v|0,q^=g,q=q>>>16|q<<16,M=M+q|0,v^=M,v=v>>>20|v<<12,y=y+T|0,V^=y,V=V>>>16|V<<16,U=U+V|0,T^=U,T=T>>>20|T<<12,b=b+I|0,te^=b,te=te>>>16|te<<16,j=j+te|0,I^=j,I=I>>>20|I<<12,y=y+T|0,V^=y,V=V>>>24|V<<8,U=U+V|0,T^=U,T=T>>>25|T<<7,b=b+I|0,te^=b,te=te>>>24|te<<8,j=j+te|0,I^=j,I=I>>>25|I<<7,g=g+v|0,q^=g,q=q>>>24|q<<8,M=M+q|0,v^=M,v=v>>>25|v<<7,p=p+x|0,D^=p,D=D>>>24|D<<8,R=R+D|0,x^=R,x=x>>>25|x<<7,p=p+v|0,te^=p,te=te>>>16|te<<16,U=U+te|0,v^=U,v=v>>>20|v<<12,g=g+T|0,D^=g,D=D>>>16|D<<16,j=j+D|0,T^=j,T=T>>>20|T<<12,y=y+I|0,q^=y,q=q>>>16|q<<16,R=R+q|0,I^=R,I=I>>>20|I<<12,b=b+x|0,V^=b,V=V>>>16|V<<16,M=M+V|0,x^=M,x=x>>>20|x<<12,y=y+I|0,q^=y,q=q>>>24|q<<8,R=R+q|0,I^=R,I=I>>>25|I<<7,b=b+x|0,V^=b,V=V>>>24|V<<8,M=M+V|0,x^=M,x=x>>>25|x<<7,g=g+T|0,D^=g,D=D>>>24|D<<8,j=j+D|0,T^=j,T=T>>>25|T<<7,p=p+v|0,te^=p,te=te>>>24|te<<8,U=U+te|0,v^=U,v=v>>>25|v<<7;Ni.writeUint32LE(p+n|0,r,0),Ni.writeUint32LE(g+i|0,r,4),Ni.writeUint32LE(y+o|0,r,8),Ni.writeUint32LE(b+s|0,r,12),Ni.writeUint32LE(x+a|0,r,16),Ni.writeUint32LE(v+c|0,r,20),Ni.writeUint32LE(T+u|0,r,24),Ni.writeUint32LE(I+l|0,r,28),Ni.writeUint32LE(R+d|0,r,32),Ni.writeUint32LE(M+h|0,r,36),Ni.writeUint32LE(U+f|0,r,40),Ni.writeUint32LE(j+m|0,r,44),Ni.writeUint32LE(D+w|0,r,48),Ni.writeUint32LE(q+_|0,r,52),Ni.writeUint32LE(V+E|0,r,56),Ni.writeUint32LE(te+S|0,r,60)}function w8e(r,e,t,n,i){if(i===void 0&&(i=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<t.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),s=o.length-e.length,o.set(e,s)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,s=i}for(var a=new Uint8Array(64),c=0;c<t.length;c+=64){$He(a,o,r);for(var u=c;u<c+64&&u<t.length;u++)n[u]=t[u]^a[u-c];jHe(o,0,s)}return VM.wipe(a),i===0&&VM.wipe(o),n}Nx.streamXOR=w8e;function KHe(r,e,t,n){return n===void 0&&(n=0),VM.wipe(t),w8e(r,e,t,t,n)}Nx.stream=KHe;function jHe(r,e,t){for(var n=1;t--;)n=n+(r[e]&255)|0,r[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var v8e=O(V0=>{"use strict";Object.defineProperty(V0,"__esModule",{value:!0});var GHe=xx(),Ox=oc();V0.DIGEST_LENGTH=16;var _8e=function(){function r(e){this.digestLength=V0.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var t=e[0]|e[1]<<8;this._r[0]=t&8191;var n=e[2]|e[3]<<8;this._r[1]=(t>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var o=e[6]|e[7]<<8;this._r[3]=(i>>>7|o<<9)&8191;var s=e[8]|e[9]<<8;this._r[4]=(o>>>4|s<<12)&255,this._r[5]=s>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(s>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return r.prototype._blocks=function(e,t,n){for(var i=this._fin?0:2048,o=this._h[0],s=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],l=this._h[5],d=this._h[6],h=this._h[7],f=this._h[8],m=this._h[9],w=this._r[0],_=this._r[1],E=this._r[2],S=this._r[3],p=this._r[4],g=this._r[5],y=this._r[6],b=this._r[7],x=this._r[8],v=this._r[9];n>=16;){var T=e[t+0]|e[t+1]<<8;o+=T&8191;var I=e[t+2]|e[t+3]<<8;s+=(T>>>13|I<<3)&8191;var R=e[t+4]|e[t+5]<<8;a+=(I>>>10|R<<6)&8191;var M=e[t+6]|e[t+7]<<8;c+=(R>>>7|M<<9)&8191;var U=e[t+8]|e[t+9]<<8;u+=(M>>>4|U<<12)&8191,l+=U>>>1&8191;var j=e[t+10]|e[t+11]<<8;d+=(U>>>14|j<<2)&8191;var D=e[t+12]|e[t+13]<<8;h+=(j>>>11|D<<5)&8191;var q=e[t+14]|e[t+15]<<8;f+=(D>>>8|q<<8)&8191,m+=q>>>5|i;var V=0,te=V;te+=o*w,te+=s*(5*v),te+=a*(5*x),te+=c*(5*b),te+=u*(5*y),V=te>>>13,te&=8191,te+=l*(5*g),te+=d*(5*p),te+=h*(5*S),te+=f*(5*E),te+=m*(5*_),V+=te>>>13,te&=8191;var pe=V;pe+=o*_,pe+=s*w,pe+=a*(5*v),pe+=c*(5*x),pe+=u*(5*b),V=pe>>>13,pe&=8191,pe+=l*(5*y),pe+=d*(5*g),pe+=h*(5*p),pe+=f*(5*S),pe+=m*(5*E),V+=pe>>>13,pe&=8191;var ue=V;ue+=o*E,ue+=s*_,ue+=a*w,ue+=c*(5*v),ue+=u*(5*x),V=ue>>>13,ue&=8191,ue+=l*(5*b),ue+=d*(5*y),ue+=h*(5*g),ue+=f*(5*p),ue+=m*(5*S),V+=ue>>>13,ue&=8191;var Ue=V;Ue+=o*S,Ue+=s*E,Ue+=a*_,Ue+=c*w,Ue+=u*(5*v),V=Ue>>>13,Ue&=8191,Ue+=l*(5*x),Ue+=d*(5*b),Ue+=h*(5*y),Ue+=f*(5*g),Ue+=m*(5*p),V+=Ue>>>13,Ue&=8191;var le=V;le+=o*p,le+=s*S,le+=a*E,le+=c*_,le+=u*w,V=le>>>13,le&=8191,le+=l*(5*v),le+=d*(5*x),le+=h*(5*b),le+=f*(5*y),le+=m*(5*g),V+=le>>>13,le&=8191;var _e=V;_e+=o*g,_e+=s*p,_e+=a*S,_e+=c*E,_e+=u*_,V=_e>>>13,_e&=8191,_e+=l*w,_e+=d*(5*v),_e+=h*(5*x),_e+=f*(5*b),_e+=m*(5*y),V+=_e>>>13,_e&=8191;var we=V;we+=o*y,we+=s*g,we+=a*p,we+=c*S,we+=u*E,V=we>>>13,we&=8191,we+=l*_,we+=d*w,we+=h*(5*v),we+=f*(5*x),we+=m*(5*b),V+=we>>>13,we&=8191;var xe=V;xe+=o*b,xe+=s*y,xe+=a*g,xe+=c*p,xe+=u*S,V=xe>>>13,xe&=8191,xe+=l*E,xe+=d*_,xe+=h*w,xe+=f*(5*v),xe+=m*(5*x),V+=xe>>>13,xe&=8191;var N=V;N+=o*x,N+=s*b,N+=a*y,N+=c*g,N+=u*p,V=N>>>13,N&=8191,N+=l*S,N+=d*E,N+=h*_,N+=f*w,N+=m*(5*v),V+=N>>>13,N&=8191;var A=V;A+=o*v,A+=s*x,A+=a*b,A+=c*y,A+=u*g,V=A>>>13,A&=8191,A+=l*p,A+=d*S,A+=h*E,A+=f*_,A+=m*w,V+=A>>>13,A&=8191,V=(V<<2)+V|0,V=V+te|0,te=V&8191,V=V>>>13,pe+=V,o=te,s=pe,a=ue,c=Ue,u=le,l=_e,d=we,h=xe,f=N,m=A,t+=16,n-=16}this._h[0]=o,this._h[1]=s,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=l,this._h[6]=d,this._h[7]=h,this._h[8]=f,this._h[9]=m},r.prototype.finish=function(e,t){t===void 0&&(t=0);var n=new Uint16Array(10),i,o,s,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=8192,o=(i^1)-1,a=0;a<10;a++)n[a]&=o;for(o=~o,a=0;a<10;a++)this._h[a]=this._h[a]&o|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,s=this._h[0]+this._pad[0],this._h[0]=s&65535,a=1;a<8;a++)s=(this._h[a]+this._pad[a]|0)+(s>>>16)|0,this._h[a]=s&65535;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},r.prototype.update=function(e){var t=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var o=0;o<i;o++)this._buffer[this._leftover+o]=e[t+o];if(n-=i,t+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,t,i),t+=i,n-=i),n){for(var o=0;o<n;o++)this._buffer[this._leftover+o]=e[t+o];this._leftover+=n}return this},r.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},r.prototype.clean=function(){return Ox.wipe(this._buffer),Ox.wipe(this._r),Ox.wipe(this._h),Ox.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},r}();V0.Poly1305=_8e;function HHe(r,e){var t=new _8e(r);t.update(e);var n=t.digest();return t.clean(),n}V0.oneTimeAuth=HHe;function WHe(r,e){return r.length!==V0.DIGEST_LENGTH||e.length!==V0.DIGEST_LENGTH?!1:GHe.equal(r,e)}V0.equal=WHe});var zM=O(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});var Lx=b8e(),YHe=v8e(),Xp=oc(),E8e=Hp(),XHe=xx();z0.KEY_LENGTH=32;z0.NONCE_LENGTH=12;z0.TAG_LENGTH=16;var x8e=new Uint8Array(16),QHe=function(){function r(e){if(this.nonceLength=z0.NONCE_LENGTH,this.tagLength=z0.TAG_LENGTH,e.length!==z0.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return r.prototype.seal=function(e,t,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);Lx.stream(this._key,o,s,4);var a=t.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return Lx.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),s,c.subarray(0,c.length-this.tagLength),n),Xp.wipe(o),c},r.prototype.open=function(e,t,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);Lx.stream(this._key,o,s,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,s,t.subarray(0,t.length-this.tagLength),n),!XHe.equal(a,t.subarray(t.length-this.tagLength,t.length)))return null;var c=t.length-this.tagLength,u;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(c);return Lx.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),u,4),Xp.wipe(o),u},r.prototype.clean=function(){return Xp.wipe(this._key),this},r.prototype._authenticate=function(e,t,n,i){var o=new YHe.Poly1305(t);i&&(o.update(i),i.length%16>0&&o.update(x8e.subarray(i.length%16))),o.update(n),n.length%16>0&&o.update(x8e.subarray(n.length%16));var s=new Uint8Array(8);i&&E8e.writeUint64LE(i.length,s),o.update(s),E8e.writeUint64LE(n.length,s),o.update(s);for(var a=o.digest(),c=0;c<a.length;c++)e[c]=a[c];o.clean(),Xp.wipe(a),Xp.wipe(s)},r}();z0.ChaCha20Poly1305=QHe});var Y8e=O((Qsr,W8e)=>{W8e.exports=H8e;var G8e=128,lWe=127,dWe=~lWe,fWe=Math.pow(2,31);function H8e(r,e,t){e=e||[],t=t||0;for(var n=t;r>=fWe;)e[t++]=r&255|G8e,r/=128;for(;r&dWe;)e[t++]=r&255|G8e,r>>>=7;return e[t]=r|0,H8e.bytes=t-n+1,e}});var Z8e=O((Zsr,Q8e)=>{Q8e.exports=XM;var hWe=128,X8e=127;function XM(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw XM.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&X8e)<<i:(s&X8e)*Math.pow(2,i),i+=7}while(s>=hWe);return XM.bytes=o-n,t}});var e7e=O((Jsr,J8e)=>{var pWe=Math.pow(2,7),mWe=Math.pow(2,14),gWe=Math.pow(2,21),yWe=Math.pow(2,28),wWe=Math.pow(2,35),bWe=Math.pow(2,42),_We=Math.pow(2,49),vWe=Math.pow(2,56),EWe=Math.pow(2,63);J8e.exports=function(r){return r<pWe?1:r<mWe?2:r<gWe?3:r<yWe?4:r<wWe?5:r<bWe?6:r<_We?7:r<vWe?8:r<EWe?9:10}});var r7e=O((ear,t7e)=>{t7e.exports={encode:Y8e(),decode:Z8e(),encodingLength:e7e()}});var o7e=O((tar,i7e)=>{"use strict";var n7e=r7e();i7e.exports=r=>{if(!(r instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");let e=[];for(;r.length>0;){let t=n7e.decode(r);e.push(t),r=r.slice(n7e.decode.bytes)}return e}});var v7e=O((b7e,_7e)=>{"use strict";var LWe=Math.exp;b7e=_7e.exports=function(e){if(typeof e!="number")throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,n=0,i=0,o=0,s,a={};function c(u,l){return 1-LWe(-(u-l)/e)}return a.push=function(l,d){if(s){let h=c(l,s),f=d-t,m=h*f;t=h*d+(1-h)*t,n=(1-h)*(n+f*m),i=Math.sqrt(n),o=t+h*f}else t=d;s=l},a.movingAverage=function(){return t},a.variance=function(){return n},a.deviation=function(){return i},a.forecast=function(){return o},a}});var rpe=O((D2r,aS)=>{(function(){var r=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],e=typeof window<"u",t=e&&window.mozInnerScreenX!=null;function n(i,o,s){if(!e)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=s&&s.debug||!1;if(a){var c=document.querySelector("#input-textarea-caret-position-mirror-div");c&&c.parentNode.removeChild(c)}var u=document.createElement("div");u.id="input-textarea-caret-position-mirror-div",document.body.appendChild(u);var l=u.style,d=window.getComputedStyle?window.getComputedStyle(i):i.currentStyle,h=i.nodeName==="INPUT";l.whiteSpace="pre-wrap",h||(l.wordWrap="break-word"),l.position="absolute",a||(l.visibility="hidden"),r.forEach(function(w){h&&w==="lineHeight"?l.lineHeight=d.height:l[w]=d[w]}),t?i.scrollHeight>parseInt(d.height)&&(l.overflowY="scroll"):l.overflow="hidden",u.textContent=i.value.substring(0,o),h&&(u.textContent=u.textContent.replace(/\s/g,"\xA0"));var f=document.createElement("span");f.textContent=i.value.substring(o)||".",u.appendChild(f);var m={top:f.offsetTop+parseInt(d.borderTopWidth),left:f.offsetLeft+parseInt(d.borderLeftWidth),height:parseInt(d.lineHeight)};return a?f.style.backgroundColor="#aaa":document.body.removeChild(u),m}typeof aS<"u"&&typeof aS.exports<"u"?aS.exports=n:e&&(window.getCaretCoordinates=n)})()});var hd=r=>Array.isArray(r);var x9e=r=>({el:document.querySelector(r),elements:document.querySelectorAll(r),placeholder(e){return this.el.placeholder=e,this},getValue(){return this.el.value},insertAtCaret(e){return this.el.setRangeText(e,this.el.selectionStart,this.el.selectionEnd,"end"),this},setValue(e){this.el.value=e;let t=new Event("input",{bubbles:!0,cancelable:!0});return this.el.dispatchEvent(t),this},innerHTML(e){return this.el.innerHTML=e,this},html(e){return this.el.innerHTML="",this.append(e),this},append(e){return(hd(e)?e:[e]).forEach(n=>{let i=pd(n)?n:document.createTextNode(n);this.el.appendChild(i)}),this},appendListElement(e){let t=document.createElement("LI");return t.appendChild(document.createTextNode(e)),this.el.appendChild(t),this},removeClass(e){return this.el.classList.remove(e),this},removeClasses(e=[]){return e.map(t=>this.removeClass(t)),this},addClass(e){return this.el.classList.add(e),this},hasClass(e){return(" "+this.el.className+" ").indexOf(" "+e+" ")>-1},show(e=!0){return e?this.removeClass("hidden"):this.hide(),this},hide(){return this.addClass("hidden"),this},toggle(e="hidden"){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this},focus(){return this.el.focus(),this},listenAll(e,t){return Array.prototype.slice.call(this.elements).map(i=>{i.addEventListener(e,o=>t(o.srcElement))}),this},listen(e,t){return this.el.addEventListener(e,n=>t(n,this)),this},click(){this.el&&this.el.click()},checked(e){return this.el.checked=!!e,this},disable(e=!0){return this.el.disabled=e,this}}),pd=r=>{try{return r instanceof HTMLElement}catch(e){return console.error("isElement",e),typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object"}},ae=x9e;var gS={info:"info",success:"success",error:"error",warning:"warning"},yS=ae("#notification"),mS=()=>yS.removeClasses(Object.values(gS));yS.el.onclick=()=>mS();var S9e=()=>Object.values(gS).reduce((r,e)=>({...r,[e](t){this.showNotification(t,e)}}),{}),T9e=(r=5)=>({autohideDuration:r,timer:void 0,removeAfter(){this.timer=setTimeout(()=>{mS()},this.autohideDuration*1e3)},showNotification(e,t=gS.info){mS(),yS.innerHTML(e).addClass(t),clearTimeout(this.timer),this.removeAfter()},...S9e()}),I9e=T9e(),Ze=I9e;var A9e=()=>{let r=localStorage.getItem("miropad.user");r?Ze.info(`\u{1F917} Happy to see you again from ${r}`):Ze.info(`<h1>Welcome \u{1F44B} \u{1F603} </h1>
       <p>Use  Ctrl+S:  to save your note<p/>
       <p>& Ctrl+P: to format a JSON doc<p/>
      `,100),localStorage.setItem("miropad.user",new Date().toLocaleDateString())},wU=A9e;var C9e={set:function(r,e){return localStorage.setItem(r,e),this},update:function(r,e){let t=JSON.parse(this.get(r));return localStorage.setItem(r,JSON.stringify({...t,...e})),this},remove:function(r){return localStorage.removeItem(r),this},get:function(r){return hd(r)?r.reduce((e,t)=>({...e,[t]:this.get(t)}),{}):localStorage.getItem(r)},parse:function(r){let e=this.get(r);return JSON.parse(e)},getDictionary:function(){let r=localStorage.getItem("__dictionary__");return r?JSON.parse(r):[]},removeFromDictionary:function(r){let t=this.getDictionary().filter(n=>n!==r);localStorage.setItem("__dictionary__",JSON.stringify(t))},saveToDictionary:async function(r){if(r.length)try{let e=r.toLowerCase().replace(/[^a-zA-Zά-ώΑ-Ω]/g," "),t=await this.getDictionary(),n=[...e.split(" ").filter(o=>o.length>3),...t],i=[...new Set(n)];localStorage.setItem("__dictionary__",JSON.stringify(i))}catch(e){Ze.error(`\u{1F631} Something went wrong while trying to save to local storage ${e}`)}else Ze.warning("\u{1F615} Nothing to save!");return this}},je=C9e;var i1={github:{client_id:"70c1955dfe4914c52c10",request_state:"miro-pad"},auth_service:"https://vercel-api-phi.vercel.app/api/auth",mail_service:{api:"https://vercel-api-phi.vercel.app/api/mail",signature:`Theo Mironidis <br/>
    Software Engineer <br/>
    https://teomrd.github.io`},file_service:{api:"https://vercel-api-phi.vercel.app/api/upload"}};var w9=(r,e=je.get("authToken"))=>fetch(`https://api.github.com/gists/${r}`,{headers:{Authorization:`token ${e}`}}).then(t=>{if(!t.ok)throw Error(t.statusText);return t.json()}),bU=(r=je.get("authToken"))=>fetch("https://api.github.com/gists",{headers:{Authorization:`token ${r}`}}).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()}),_U=async(r,e=je.get("gistId"),t=je.get("authToken"))=>fetch(`https://api.github.com/gists/${e}`,{method:"PATCH",headers:{Authorization:`token ${t}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({files:{[r]:null},description:"MiroPad Gist",public:!1})}).then(n=>{if(!n.ok)throw new Error(n.statusText);return n.json()}).then(n=>(Ze.info(`${r} deleted on Gist!`),n)),wS=async(r=lc(),e=je.get("gistId"),t=je.get("authToken"))=>{if(e&&t){let n=r.reduce((i,{id:o,text:s,deleted:a})=>({...i,[o]:a?null:{content:s}}),{});return fetch(`https://api.github.com/gists/${e}`,{method:"PATCH",headers:{Authorization:`token ${t}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({files:n,description:"MiroPad Gist",public:!1})}).then(i=>{if(!i.ok)throw new Error(i.statusText);return i.json()}).then(i=>(r.map(({id:o,deleted:s})=>{s&&localStorage.removeItem(o)}),i))}},vU=(r=je.get("authToken"))=>{let t=lc().reduce((n,i)=>({...n,[i.id]:{content:i.text}}),{});return fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`token ${r}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({files:t,description:"MiroPad Gist",public:!1})}).then(n=>{if(!n.ok)throw Error(n.statusText);return n.json()}).then(n=>n)},EU=(r,e)=>fetch(`${i1.auth_service}?state=${e}&code=${r}`,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw Error(t.statusText);return t.json()}).then(t=>t),xU=({note:r,token:e=je.get("authToken")}={})=>fetch("https://api.github.com/gists",{method:"POST",headers:{Authorization:`token ${e}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({files:{[r.id]:{content:r.text}},description:"MiroPad Gist",public:!0})}).then(t=>{if(!t.ok)throw Error(t.statusText);return t.json()}).then(t=>t);var IS={};it(IS,{base32:()=>ms,base32hex:()=>V9e,base32hexpad:()=>q9e,base32hexpadupper:()=>$9e,base32hexupper:()=>z9e,base32pad:()=>U9e,base32padupper:()=>F9e,base32upper:()=>M9e,base32z:()=>K9e});var gd={};it(gd,{coerce:()=>Io,empty:()=>SU,equals:()=>bS,fromHex:()=>k9e,fromString:()=>_S,isBinary:()=>P9e,toHex:()=>R9e,toString:()=>vS});var SU=new Uint8Array(0);function R9e(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function k9e(r){let e=r.match(/../g);return e!=null?new Uint8Array(e.map(t=>parseInt(t,16))):SU}function bS(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function Io(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function P9e(r){return r instanceof ArrayBuffer||ArrayBuffer.isView(r)}function _S(r){return new TextEncoder().encode(r)}function vS(r){return new TextDecoder().decode(r)}function D9e(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,c=r.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var w=0,_=0,E=0,S=m.length;E!==S&&m[E]===0;)E++,w++;for(var p=(S-E)*l+1>>>0,g=new Uint8Array(p);E!==S;){for(var y=m[E],b=0,x=p-1;(y!==0||b<_)&&x!==-1;x--,b++)y+=256*g[x]>>>0,g[x]=y%a>>>0,y=y/a>>>0;if(y!==0)throw new Error("Non-zero carry");_=b,E++}for(var v=p-_;v!==p&&g[v]===0;)v++;for(var T=c.repeat(w);v<p;++v)T+=r.charAt(g[v]);return T}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var w=0;if(m[w]!==" "){for(var _=0,E=0;m[w]===c;)_++,w++;for(var S=(m.length-w)*u+1>>>0,p=new Uint8Array(S);m[w];){var g=t[m.charCodeAt(w)];if(g===255)return;for(var y=0,b=S-1;(g!==0||y<E)&&b!==-1;b--,y++)g+=a*p[b]>>>0,p[b]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");E=y,w++}if(m[w]!==" "){for(var x=S-E;x!==S&&p[x]===0;)x++;for(var v=new Uint8Array(_+(S-x)),T=_;x!==S;)v[T++]=p[x++];return v}}}function f(m){var w=h(m);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var N9e=D9e,O9e=N9e,TU=O9e;var ES=class{constructor(e,t,n){F(this,"name");F(this,"prefix");F(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},xS=class{constructor(e,t,n){F(this,"name");F(this,"prefix");F(this,"baseDecode");F(this,"prefixCodePoint");this.name=e,this.prefix=t;let i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return IU(this,e)}},SS=class{constructor(e){F(this,"decoders");this.decoders=e}or(e){return IU(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function IU(r,e){return new SS({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}var TS=class{constructor(e,t,n,i){F(this,"name");F(this,"prefix");F(this,"baseEncode");F(this,"baseDecode");F(this,"encoder");F(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new ES(e,t,n),this.decoder=new xS(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function yd({name:r,prefix:e,encode:t,decode:n}){return new TS(r,e,t,n)}function j0({name:r,prefix:e,alphabet:t}){let{encode:n,decode:i}=TU(t,r);return yd({prefix:e,name:r,encode:n,decode:o=>Io(i(o))})}function L9e(r,e,t,n){let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,c=0,u=0;for(let l=0;l<o;++l){let d=i[r[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,a+=t,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function B9e(r,e,t){let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o}function Qr({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return yd({prefix:e,name:r,encode(i){return B9e(i,n,t)},decode(i){return L9e(i,n,t,r)}})}var ms=Qr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M9e=Qr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),U9e=Qr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F9e=Qr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),V9e=Qr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z9e=Qr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q9e=Qr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$9e=Qr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),K9e=Qr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var AS={};it(AS,{base36:()=>ih,base36upper:()=>j9e});var ih=j0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),j9e=j0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var CS={};it(CS,{base58btc:()=>ai,base58flickr:()=>G9e});var ai=j0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),G9e=j0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var H9e=RU,AU=128,W9e=127,Y9e=~W9e,X9e=Math.pow(2,31);function RU(r,e,t){e=e||[],t=t||0;for(var n=t;r>=X9e;)e[t++]=r&255|AU,r/=128;for(;r&Y9e;)e[t++]=r&255|AU,r>>>=7;return e[t]=r|0,RU.bytes=t-n+1,e}var Q9e=RS,Z9e=128,CU=127;function RS(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw RS.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&CU)<<i:(s&CU)*Math.pow(2,i),i+=7}while(s>=Z9e);return RS.bytes=o-n,t}var J9e=Math.pow(2,7),eme=Math.pow(2,14),tme=Math.pow(2,21),rme=Math.pow(2,28),nme=Math.pow(2,35),ime=Math.pow(2,42),ome=Math.pow(2,49),sme=Math.pow(2,56),ame=Math.pow(2,63),cme=function(r){return r<J9e?1:r<eme?2:r<tme?3:r<rme?4:r<nme?5:r<ime?6:r<ome?7:r<sme?8:r<ame?9:10},ume={encode:H9e,decode:Q9e,encodingLength:cme},lme=ume,oh=lme;function sh(r,e=0){return[oh.decode(r,e),oh.decode.bytes]}function wd(r,e,t=0){return oh.encode(r,e,t),e}function bd(r){return oh.encodingLength(r)}function Wu(r,e){let t=e.byteLength,n=bd(r),i=n+bd(t),o=new Uint8Array(i+t);return wd(r,o,0),wd(t,o,n),o.set(e,i),new _d(r,t,e,o)}function G0(r){let e=Io(r),[t,n]=sh(e),[i,o]=sh(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new _d(t,i,s,e)}function kU(r,e){if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&bS(r.bytes,t.bytes)}}var _d=class{constructor(e,t,n,i){F(this,"code");F(this,"size");F(this,"digest");F(this,"bytes");this.code=e,this.size=t,this.digest=n,this.bytes=i}};function PU(r,e){let{bytes:t,version:n}=r;switch(n){case 0:return fme(t,kS(r),e??ai.encoder);default:return hme(t,kS(r),e??ms.encoder)}}var DU=new WeakMap;function kS(r){let e=DU.get(r);if(e==null){let t=new Map;return DU.set(r,t),t}return e}var OU,Lt=class r{constructor(e,t,n,i){F(this,"code");F(this,"version");F(this,"multihash");F(this,"bytes");F(this,"/");F(this,OU,"CID");this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==ah)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==pme)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Wu(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n!=null&&e.code===n.code&&e.version===n.version&&kU(e.multihash,n.multihash)}toString(e){return PU(this,e)}toJSON(){return{"/":PU(this)}}link(){return this}[(OU=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s??NU(n,i,o.bytes))}else if(t[mme]===!0){let{version:n,multihash:i,code:o}=t,s=G0(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==ah)throw new Error(`Version 0 CID must use dag-pb (code: ${ah}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=NU(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,ah,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=Io(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new _d(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[d,h]=sh(e.subarray(t));return t+=h,d},i=n(),o=ah;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),c=n(),u=t+c,l=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,t){let[n,i]=dme(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return kS(o).set(n,e),o}};function dme(r,e){switch(r[0]){case"Q":{let t=e??ai;return[ai.prefix,t.decode(`${ai.prefix}${r}`)]}case ai.prefix:{let t=e??ai;return[ai.prefix,t.decode(r)]}case ms.prefix:{let t=e??ms;return[ms.prefix,t.decode(r)]}case ih.prefix:{let t=e??ih;return[ih.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function fme(r,e,t){let{prefix:n}=t;if(n!==ai.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i}function hme(r,e,t){let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i}var ah=112,pme=18;function NU(r,e,t){let n=bd(r),i=n+bd(e),o=new Uint8Array(i+t.byteLength);return wd(r,o,0),wd(e,o,n),o.set(t,i),o}var mme=Symbol.for("@ipld/js-cid/CID");var gme=new TextEncoder,rXe=new TextDecoder;var LU=512;function BU(r){return gme.encode(JSON.stringify(r))}var OS={};it(OS,{sha256:()=>NS,sha512:()=>yme});var DS=L(require("crypto"),1);function Yu({name:r,code:e,encode:t}){return new PS(r,e,t)}var PS=class{constructor(e,t,n){F(this,"name");F(this,"code");F(this,"encode");this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Wu(this.code,t):t.then(n=>Wu(this.code,n))}else throw Error("Unknown type, must be binary type")}};var NS=Yu({name:"sha2-256",code:18,encode:r=>Io(DS.default.createHash("sha256").update(r).digest())}),yme=Yu({name:"sha2-512",code:19,encode:r=>Io(DS.default.createHash("sha512").update(r).digest())});var wme=async r=>{let e=BU(r),t=await NS.digest(e);return Lt.create(1,LU,t).toString()},_9=wme;var bme=r=>{try{JSON.parse(r)}catch{return!1}return!0},v9=bme;var FU=()=>document.title.split("|")[0],LS=r=>{let e=FU();document.title=e.trim()+" | "+r.trim(),ae(".title h3").html(r.trim())},E9=()=>{let r=FU();document.title=r,ae("title").innerHTML("\u270D\uFE0F MiroPad v2.15.16"),ae(".title h3").innerHTML('\u270D\uFE0F MiroPad <span class="version">v2.15.16</span>')};var yt={baseUrl:`${window.location.origin}${window.location.pathname}`,get:function(){return window.location.href},getPageId:function(r=window.location.href){return new URL(r).hash.substr(1).split("?")[0]||null},getSearchParams:function(r=window.location.href){let n=new URL(r).href.split("?")[1]||"";return new URLSearchParams(n)},getParamsObject:function(r=window.location.href){let e=this.getSearchParams(r),t={};for(let n of e.keys())t={...t,[n]:this.getSearchParam(n,r)};return t},getSearchParam(r,e=window.location.href){return this.getSearchParams(e).get(r)},deleteParam:function(r){let e=this.getSearchParams();typeof r=="object"&&r.length>0?r.forEach(i=>{e.delete(i)}):e.delete(r);let{pathname:t}=window.location,n=this.getPageId();return window.location.assign(`${n?`#${n}`:t}${e.toString()?`?${e.toString()}`:""}`)},set:function(r=this.getPageId(),e=this.getParamsObject()){let t={...this.getParamsObject(),...e},n=new URLSearchParams(t);return window.location.assign(`#${r}?${n.toString()}`)}};var dc=(r=!0)=>{r?(ae("#save").removeClass("unsaved"),ae("#logo").removeClass("unsaved")):(ae("#save").addClass("unsaved"),ae("#logo").addClass("unsaved"))};var VU=r=>{let e=encodeURIComponent(r);if(e.length===0)throw new Error("You need to start with a valid title for your note!");return e},x9=r=>{let e=qU(r),t=un(e),{dateCreated:n}=t||{};return n},_me=r=>{let e=un(r);localStorage.setItem(r,JSON.stringify({title:e.title,deleted:!0,revisions:e.revisions}))},un=(r=yt.getPageId(),e)=>{let t=JSON.parse(je.get(r)),n=t?Object.values(t.revisions).reduce((o,s)=>s.dateCreated>o.dateCreated?s:o,{dateCreated:0}):{},i=e?t.revisions[e]:n;return r?{...t,id:r,...i||{},numberOfRevisions:t&&t.revisions?Object.keys(t.revisions).length:void 0,title:t.title}:null},zU=r=>{let{id:e,title:t}=un();je.update(e,{disableSync:r}),Ze.info(`"${t}" cloud sync ${r?"disabled \u{1F636}":"enabled \u26A1\uFE0F"}`)},S9=async(r=yt.getPageId())=>{if(r){let e=yt.getSearchParam("v"),t=un(void 0,e);t&&(ae("#revisions").html(`${t.numberOfRevisions} revision${t.numberOfRevisions>1?"s":""}`),LS(t.title),ae(".terminal").setValue(t.text)),t||Ze.error("404 Note not found \u{1F937}\u200D\u2642\uFE0F")}},T9=()=>{location.hash="",E9(),ae("#revisions").html(""),ae(".terminal").setValue("").focus(),dc()},vd=(r="")=>r.split(`
`)[0].trim().replace("#","").trim(),qU=r=>{let e=vd(r);return VU(e)},$U=async r=>{if(r.length){let e=qU(r),t=vd(r),n=un(e);if(n===null)return ch(r);let{text:i}=n,o=await _9(r),s=await _9(i);if(o===s)return;let a=je.get(e),c=JSON.parse(a);je.set(e,JSON.stringify({...c,title:t,revisions:{...c&&c.revisions||{},[o]:{dateCreated:Date.now(),text:r}}}))}},ch=async(r=ae(".terminal").getValue(),e)=>{if(await je.saveToDictionary(r),r.length){let t=await _9(r);try{let n=r.split(`
`)[0].trim().replace("#","").trim();LS(n);let i=VU(n),o=je.get(i),s=JSON.parse(o);je.set(i,JSON.stringify({...s,title:n,lines:r.split(`
`),revisions:{...s&&s.revisions||{},[t]:{dateCreated:Date.now(),text:r,...e?{cid:e}:{}}}})),yt.set(i,{v:t,...e?{cid:e}:{}}),e||yt.deleteParam("cid"),je.set("lastLocalUpdate",new Date),Ze.success("\u{1F44C} Note saved!"),dc()}catch(n){Ze.error(`\u{1F631} Something went wrong while trying to save to local storage ${n}`)}}else Ze.warning("\u{1F615} Nothing to save!")},lc=({includeDeleted:r}={})=>Object.entries(localStorage).filter(([,e])=>typeof e=="string").filter(([e,t])=>!e.startsWith("__")&&v9(t)).map(([e,t])=>[e,JSON.parse(t)]).filter(([,e])=>!!e.title).reduce((e,[t])=>[...e,un(t)],[]).filter(({deleted:e})=>r?!0:!e),KU=r=>r?lc().map(({id:t})=>un(t)).filter(({text:t})=>t.toLowerCase().includes(r.toLowerCase()))[0]:void 0,I9=()=>{if(confirm("Are you sure you want do that?")){let e=un();T9(),e&&e.id&&(_U(e.id),_me(e.id))}Bt.hide()};var jU=()=>!!je.get("authToken");var W0=({title:r,secondary:e,onclick:t,onSecondaryClick:n,icon:i},o=!1)=>{let s=document.createElement("LI");if(s.className=o?"selected":"",i){let u=i.cloneNode(!0);s.appendChild(u)}let a=pd(r)?r:document.createTextNode(r);a.onclick=t,s.appendChild(a);let c=document.createElement("span");if(e){c.className="secondary";let u=pd(e)?e:document.createTextNode(e);u.onclick=n,c.appendChild(u)}return s.appendChild(c),s};var GU=(r,e)=>r.map((t,n)=>W0(t,n===e));var HU=(r,e)=>{let t=r.toLowerCase().split(e),n=0;return t.reduce((i,o,s)=>[...i,...s===0?[o]:[e,o]],[]).filter(i=>i!=="").map(i=>{n=n+i.length;let o=n-i.length,s=o+i.length;return r.slice(o,s)})};var WU=r=>{let e=document.createElement("mark");return e.appendChild(document.createTextNode(r)),e},fc=({content:r="",highlight:e=""})=>{let t=document.createElement("div"),n=r.split(" "),i=e.toLowerCase().split(" ");return e.trim()===""?(t.appendChild(document.createTextNode(r)),t):(n.map(o=>{let s=i.map(a=>o.toLocaleLowerCase().includes(a)?a:void 0).filter(a=>a!==void 0);return{word:o,matches:s}}).forEach(({word:o,matches:s})=>{if(s.length>0){let a=s[0];if(o===a)t.appendChild(WU(` ${o}`));else{let u=HU(o,a).map(l=>l.toLowerCase()===a?WU(l):document.createTextNode(l));t.appendChild(document.createTextNode(" ")),u.forEach(l=>{t.appendChild(l)})}}else t.appendChild(document.createTextNode(` ${o} `))}),t)};var YU=async()=>(Ze.info("You need to be authenticated!"),Bt.hide(),window.location.replace(`https://github.com/login/oauth/authorize?client_id=${i1.github.client_id}&scope=gist&state=${i1.github.request_state}`)),XU=async r=>{Ze.info("Downloading my Gists!");let e=await bU(r);Bt.setState({mode:Bt.getModes().gists}),Ze.info("Select Gist to sync with");let t=e.sort((i,o)=>new Date(o.updated_at).getTime()-new Date(i.updated_at).getTime()).map(({description:i,updated_at:o,id:s})=>({title:fc({content:`${i}(${s})`}),secondary:o,onclick:async()=>{await je.set("gistId",s),Ze.success(`${i}(${s}) selected for synchronization!`),uh(),Bt.hide()}})),n=GU([{title:"Create a new Gist",onclick:async()=>{Ze.info("Syncing your MiroPads to a new Gist");try{let{id:i}=await vU();je.set("gistId",i),Ze.success("MiroPads synced to a new Gist \u{1F389}")}catch(i){Ze.error(i.message)}Bt.hide()}},...t]);ae("#commands").html(""),ae("#commands").append(n)},uh=async(r=je.get("gistId"))=>{if(je.get("authToken")&&r){ae("#logo").addClass("loading");let{files:t}=await w9(r);Object.values(t).forEach(({content:n})=>{$U(n)}),je.set("lastSync",new Date),Ze.success("\u2B07 MiroPad synced \u2705"),ae("#logo").removeClass("loading")}},QU=async()=>{let r=yt.getSearchParam("code"),e=yt.getSearchParam("state");if(r&&e){ae("#logo").addClass("loading"),Ze.info("\u{1F510} Authenticating...");try{let{token:t}=await EU(r,e);je.set("authToken",t),Ze.info("\u26F3 You have been authenticated!"),yt.deleteParam(["code","state"])}catch(t){Ze.error(t.message)}ae("#logo").removeClass("loading")}};var vme=async(r="no-titled")=>{let e={suggestedName:`${r}`,types:[{description:"MiroPad text notes",accept:{"text/plain":[".miropad"]}}]};return await window.showSaveFilePicker(e)},Eme=async(r,e)=>{let t=await r.createWritable();await t.write(e),await t.close()},ZU=async(r,e)=>{try{let t=await vme(e);await Eme(t,r)}catch(t){console.error("saveFileAs",t),Ze.error("An error occurred trying to save the file.");return}},JU=(()=>{let r=document.createElement("a");return document.body.appendChild(r),r.style="display: none",(e,t=`MiroPad-${new Date().toISOString()}.json`)=>{let n=JSON.stringify(e),i=new Blob([n],{type:"octet/stream"}),o=window.URL.createObjectURL(i);r.href=o,r.download=t,r.click(),window.URL.revokeObjectURL(o)}})();var rF=L(tF()),nF=new rF.default.Converter({tasklists:!0,underline:!0,emoji:!0,simplifiedAutoLink:!0,tables:!0,openLinksInNewWindow:!0});nF.setFlavor("github");var C9=r=>nF.makeHtml(r);var BS=r=>{if(r.status.toString().slice(0,1)==="2")return r;throw new Error(r)},xme=(r="")=>`<!DOCTYPE htmlPUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html lang="en">
    <head>
      <meta http-equiv="Content-Type" content="text/html charset=UTF-8" />
      <style>
      img {
        border-style: none;
        max-width: 100%;
        box-sizing: content-box;
      }
      </style>
    </head>
    <table style="width:100%;background-color:#ffffff" align="center" border="0" cellPadding="0" cellSpacing="0" role="presentation">
      <tbody>
        <tr>
          <td>
            <div><!--[if mso | IE]>
              <table role="presentation" width="100%" align="center" style="max-width:37.5em;margin:0 auto;padding:20px 0 48px;width:560px;"><tr><td></td><td style="width:37.5em;background:#ffffff">
            <![endif]--></div>

            <div style="max-width:37.5em;margin:0 auto;padding:20px 0 48px;width:560px"><img alt="Theo Mironidis Logo" src="https://teomrd.github.io/miroFavicon.f0c5b85b.png" width="42" height="42" style="display:block;outline:none;border:none;text-decoration:none;width:42px;height:42px" />
              ${r}
              <hr style="width:100%;border:none;border-top:1px solid #eaeaea;border-color:#dfe1e4;margin:42px 0 26px" />
              <a target="_blank" style="color:#b4becc;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,Oxygen-Sans,Ubuntu,Cantarell,&quot;Helvetica Neue&quot;,sans-serif;font-size:14px" href="https://teomrd.github.io">
              ${i1.mail_service.signature}
              </a>
            </div>
            <div><!--[if mso | IE]>
            </td><td></td></tr></table>
            <![endif]--></div>
          </td>
        </tr>
      </tbody>
    </table>
  </html>`,Sme=async(r,e,t="MiroPad note")=>{if(!r){Ze.error("\u{1F47B} No message to send, type something and try again! \u{1F913}");return}try{await fetch(`${i1.mail_service.api}`,{method:"POST",headers:{"x-secret-token":je.get("MIROPAD_SECRET_TOKEN"),accept:"application/json","content-type":"application/json"},body:JSON.stringify({to:e,subject:t,html:xme(r)})}).then(BS).then(n=>n.json()),Ze.success("Email sent \u{1F680}")}catch(n){console.error("sendMail \u{1F449}",n),Ze.error("Error not went through \u{1F4A5}! Check your credentials and try again!")}},Tme=()=>{let r=je.get("mail");if(r){let n=window.prompt(`Mail ${r} again? (y)es/(no)`,"yeap");if(n===null)return n;if(n.slice(0,1).toLowerCase()==="y")return r}let e=window.prompt("Where do you wanna send the mail to?"),t=window.prompt("Do you wanna save that to your preferences for later on? (y)es/(no)","yeap");return t&&t.slice(0,1).toLowerCase()==="y"&&je.set("mail",e),e},iF=r=>{let e=Tme();if(e===null){Ze.info("Sending mail cancelled \u{1F636}");return}Ze.info("Sending mail... \u{1F680}");let t=vd(r),n=C9(r);Sme(n,e,t)};var hc=async(r,e="\u{1F4CB} Copied to clipboard")=>{try{await navigator.clipboard.writeText(r),Ze.success(e)}catch(t){Ze.error(t.message)}};var R9=(r,e,t)=>{let n=hd(r)?r:[r],i=document.createElement("button");return i.setAttribute("type","button"),t&&i.setAttribute("id",t),n.forEach(o=>{typeof o=="string"?i.appendChild(document.createTextNode(o)):i.appendChild(o)}),i.onclick=o=>e(o),i};var Ime={view:ae(".preview"),init:function(){return this.update(),ae(".terminal").listen("input",()=>this.update()),!!yt.getSearchParam("md")?this.view.show():this.view.hide(),this},autoLink:function(){let r=je.parse("__auto-links__"),e=Object.keys(r).join("|"),t=new RegExp(`\\b(${e})\\d+\\b(?=\\s)`,"g"),n=this.view.el.innerHTML.replace(t,i=>{let o=Object.keys(r).find(a=>i.startsWith(a));return`<a href="${r[o]}${i}" target="_blank">${i}</a>`});this.view.innerHTML(n)},update:async function(){let md=ae(".terminal").getValue();this.view.innerHTML(C9(md)),this.autoLink();let{elements}=ae("pre");Array.prototype.slice.call(elements).forEach(r=>{let e=R9("\u{1F4CB} Copy",async t=>{t.stopPropagation();let n=t.srcElement.previousSibling.innerHTML;await hc(n,"\u{1F4CB} Code copied to clipboard")});r.appendChild(e)}),ae("code").listenAll("click",async({innerHTML})=>{let result=eval(innerHTML);ae(".console").show().innerHTML(result)}),ae(".console").listen("click",async r=>{r.srcElement.classList.add("hidden");let e=r.srcElement.innerHTML;await hc(e,"\u{1F4CB} Code copied to clipboard")})},show:function(r=!0){this.view.show(),yt.set(void 0,{md:r})},hide:function(){this.view.hide(),yt.deleteParam("md")},toggle:function(r="true"){return yt.getSearchParam("md")===r?this.hide():this.show(r),this}},Y0=Ime;var Ame=r=>{let e=document.querySelector(r);if(v9(e.value)){let t=JSON.stringify(JSON.parse(e.value),null,2);e.value=t,Ze.success("\u{1F44D} JSON value prettified")}else Ze.error("\u{1F627} Value is not in valid JSON format")},oF=Ame;var sF=(r=1e3)=>new Promise(e=>{setTimeout(e,r)});var xr=(r,e,t)=>{let n=document.createElement("IMG");return t&&n.classList.add(t),e&&n.setAttribute("alt",e),n.setAttribute("src",r),n};var aF="./list-LK7OCHR7.svg";var lh="./trash-RDL437QG.svg";var cF="./checkmark-circle-JQ7ADSUI.svg";var uF="./cloud-sync-F3RLGHML.svg";var lF="./lighter-UBEI67LL.svg";var dF="./enter-down-6TVO6OFR.svg";var fF="./download-FVXMIYZ4.svg";var hF="./envelope-Z2VRVSLR.svg";var pF="./bug-36UGMUXT.svg";var mF="./picture-3TDOSVS3.svg";var gF="./printer-B7RMPYZC.svg";var yF="./page-break-BLVP5QBQ.svg";var wF="./frame-expand-CX6CNP53.svg";var bF="./arrow-right-circle-2Q6EHM2H.svg";var _F="./magic-wand-JQJ6EKRO.svg";var vF="./rocket-AIY2RJJS.svg";var EF="./earth-DJLABK7O.svg";var xF="./spell-check-V6QYTGNT.svg";var SF="./pencil-X3ZMY3QU.svg";var MS="./exit-up-GH6BPN2X.svg";var TF="./leaf-CGBE7XAJ.svg";var IF=async()=>{try{let r=un(),e=yt.get();await navigator.share({title:r?r.title:"\u270D\uFE0F MiroPad",text:r?r.text:"Temporary note keeping app for the browser",url:e})}catch(r){Ze.info(`${r.message}`)}};var OF=L(FS(),1),Je=OF.default;var V7e=L(fh(),1);var Ro=L(Co(),1);var XS={};it(XS,{base58btc:()=>nt,base58flickr:()=>Bge});function Pge(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,c=r.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var w=0,_=0,E=0,S=m.length;E!==S&&m[E]===0;)E++,w++;for(var p=(S-E)*l+1>>>0,g=new Uint8Array(p);E!==S;){for(var y=m[E],b=0,x=p-1;(y!==0||b<_)&&x!==-1;x--,b++)y+=256*g[x]>>>0,g[x]=y%a>>>0,y=y/a>>>0;if(y!==0)throw new Error("Non-zero carry");_=b,E++}for(var v=p-_;v!==p&&g[v]===0;)v++;for(var T=c.repeat(w);v<p;++v)T+=r.charAt(g[v]);return T}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var w=0;if(m[w]!==" "){for(var _=0,E=0;m[w]===c;)_++,w++;for(var S=(m.length-w)*u+1>>>0,p=new Uint8Array(S);m[w];){var g=t[m.charCodeAt(w)];if(g===255)return;for(var y=0,b=S-1;(g!==0||y<E)&&b!==-1;b--,y++)g+=a*p[b]>>>0,p[b]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");E=y,w++}if(m[w]!==" "){for(var x=S-E;x!==S&&p[x]===0;)x++;for(var v=new Uint8Array(_+(S-x)),T=_;x!==S;)v[T++]=p[x++];return v}}}function f(m){var w=h(m);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Dge=Pge,Nge=Dge,WF=Nge;var ZQe=new Uint8Array(0);var YF=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},ro=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var XF=r=>new TextEncoder().encode(r),QF=r=>new TextDecoder().decode(r);var GS=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},HS=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ZF(this,e)}},WS=class{constructor(e){this.decoders=e}or(e){return ZF(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ZF=(r,e)=>new WS({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),YS=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new GS(e,t,n),this.decoder=new HS(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ad=({name:r,prefix:e,encode:t,decode:n})=>new YS(r,e,t,n),Q0=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=WF(t,e);return Ad({prefix:r,name:e,encode:n,decode:o=>ro(i(o))})},Oge=(r,e,t,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,c=0,u=0;for(let l=0;l<o;++l){let d=i[r[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,a+=t,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Lge=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o},Zr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Ad({prefix:e,name:r,encode(i){return Lge(i,n,t)},decode(i){return Oge(i,n,t,r)}});var nt=Q0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bge=Q0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var JS={};it(JS,{base32:()=>zt,base32hex:()=>Uge,base32hexpad:()=>Vge,base32hexpadupper:()=>zge,base32hexupper:()=>Fge,base32pad:()=>ZS,base32padupper:()=>Mge,base32upper:()=>QS,base32z:()=>qge});var zt=Zr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QS=Zr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ZS=Zr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mge=Zr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Uge=Zr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Fge=Zr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Vge=Zr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zge=Zr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qge=Zr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eT={};it(eT,{base64:()=>Qu,base64pad:()=>$ge,base64url:()=>Z0,base64urlpad:()=>Kge});var Qu=Zr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$ge=Zr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z0=Zr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kge=Zr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});Ro.default.formatters.b=r=>r==null?"undefined":nt.baseEncode(r);Ro.default.formatters.t=r=>r==null?"undefined":zt.baseEncode(r);Ro.default.formatters.m=r=>r==null?"undefined":Qu.baseEncode(r);Ro.default.formatters.p=r=>r==null?"undefined":r.toString();Ro.default.formatters.c=r=>r==null?"undefined":r.toString();Ro.default.formatters.k=r=>r==null?"undefined":r.toString();Ro.default.formatters.a=r=>r==null?"undefined":r.toString();function jge(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function z(r){let e=jge(`${r}:trace`);return Ro.default.enabled(`${r}:trace`)&&Ro.default.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=(0,Ro.default)(`${r}:trace`)),Object.assign((0,Ro.default)(r),{error:(0,Ro.default)(`${r}:error`),trace:e})}var oS=L(fe(),1);var $9=L(fe(),1);var mc=L(s1(),1),Rd=mc.default.Reader,vT=mc.default.Writer,ut=mc.default.util,ci=mc.default.roots["ipfs-unixfs"]||(mc.default.roots["ipfs-unixfs"]={}),qV=ci.Data=(()=>{function r(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Type=0,r.prototype.Data=ut.newBuffer([]),r.prototype.filesize=ut.Long?ut.Long.fromBits(0,0,!0):0,r.prototype.blocksizes=ut.emptyArray,r.prototype.hashType=ut.Long?ut.Long.fromBits(0,0,!0):0,r.prototype.fanout=ut.Long?ut.Long.fromBits(0,0,!0):0,r.prototype.mode=0,r.prototype.mtime=null,r.encode=function(t,n){if(n||(n=vT.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var i=0;i<t.blocksizes.length;++i)n.uint32(32).uint64(t.blocksizes[i]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&ci.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Rd||(t=Rd.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ci.Data;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Type=t.int32();break;case 2:o.Data=t.bytes();break;case 3:o.filesize=t.uint64();break;case 4:if(o.blocksizes&&o.blocksizes.length||(o.blocksizes=[]),(s&7)===2)for(var a=t.uint32()+t.pos;t.pos<a;)o.blocksizes.push(t.uint64());else o.blocksizes.push(t.uint64());break;case 5:o.hashType=t.uint64();break;case 6:o.fanout=t.uint64();break;case 7:o.mode=t.uint32();break;case 8:o.mtime=ci.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Type"))throw ut.ProtocolError("missing required 'Type'",{instance:o});return o},r.fromObject=function(t){if(t instanceof ci.Data)return t;var n=new ci.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?ut.base64.decode(t.Data,n.Data=ut.newBuffer(ut.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&(ut.Long?(n.filesize=ut.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new ut.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)ut.Long?(n.blocksizes[i]=ut.Long.fromValue(t.blocksizes[i])).unsigned=!0:typeof t.blocksizes[i]=="string"?n.blocksizes[i]=parseInt(t.blocksizes[i],10):typeof t.blocksizes[i]=="number"?n.blocksizes[i]=t.blocksizes[i]:typeof t.blocksizes[i]=="object"&&(n.blocksizes[i]=new ut.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0))}if(t.hashType!=null&&(ut.Long?(n.hashType=ut.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new ut.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&(ut.Long?(n.fanout=ut.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new ut.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=ci.UnixTime.fromObject(t.mtime)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocksizes=[]),n.defaults){if(i.Type=n.enums===String?"Raw":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=ut.newBuffer(i.Data))),ut.Long){var o=new ut.Long(0,0,!0);i.filesize=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.filesize=n.longs===String?"0":0;if(ut.Long){var o=new ut.Long(0,0,!0);i.hashType=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.hashType=n.longs===String?"0":0;if(ut.Long){var o=new ut.Long(0,0,!0);i.fanout=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.fanout=n.longs===String?"0":0;i.mode=0,i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(i.Type=n.enums===String?ci.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(i.Data=n.bytes===String?ut.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?i.filesize=n.longs===String?String(t.filesize):t.filesize:i.filesize=n.longs===String?ut.Long.prototype.toString.call(t.filesize):n.longs===Number?new ut.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s)typeof t.blocksizes[s]=="number"?i.blocksizes[s]=n.longs===String?String(t.blocksizes[s]):t.blocksizes[s]:i.blocksizes[s]=n.longs===String?ut.Long.prototype.toString.call(t.blocksizes[s]):n.longs===Number?new ut.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(!0):t.blocksizes[s]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?i.hashType=n.longs===String?String(t.hashType):t.hashType:i.hashType=n.longs===String?ut.Long.prototype.toString.call(t.hashType):n.longs===Number?new ut.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?i.fanout=n.longs===String?String(t.fanout):t.fanout:i.fanout=n.longs===String?ut.Long.prototype.toString.call(t.fanout):n.longs===Number?new ut.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(i.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(i.mtime=ci.UnixTime.toObject(t.mtime,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,mc.default.util.toJSONOptions)},r.DataType=function(){let e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),r})(),AZe=ci.UnixTime=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.Seconds=ut.Long?ut.Long.fromBits(0,0,!1):0,r.prototype.FractionalNanoseconds=0,r.encode=function(t,n){return n||(n=vT.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},r.decode=function(t,n){t instanceof Rd||(t=Rd.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ci.UnixTime;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.Seconds=t.int64();break;case 2:o.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!o.hasOwnProperty("Seconds"))throw ut.ProtocolError("missing required 'Seconds'",{instance:o});return o},r.fromObject=function(t){if(t instanceof ci.UnixTime)return t;var n=new ci.UnixTime;return t.Seconds!=null&&(ut.Long?(n.Seconds=ut.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new ut.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},r.toObject=function(t,n){n||(n={});var i={};if(n.defaults){if(ut.Long){var o=new ut.Long(0,0,!1);i.Seconds=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.Seconds=n.longs===String?"0":0;i.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?i.Seconds=n.longs===String?String(t.Seconds):t.Seconds:i.Seconds=n.longs===String?ut.Long.prototype.toString.call(t.Seconds):n.longs===Number?new ut.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=t.FractionalNanoseconds),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,mc.default.util.toJSONOptions)},r})(),CZe=ci.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.MimeType="",r.encode=function(t,n){return n||(n=vT.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},r.decode=function(t,n){t instanceof Rd||(t=Rd.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ci.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.MimeType=t.string();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof ci.Metadata)return t;var n=new ci.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(i.MimeType=t.MimeType),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,mc.default.util.toJSONOptions)},r})();var gc=qV,$V=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],nye=["directory","hamt-sharded-directory"],KV=parseInt("0644",8),jV=parseInt("0755",8);function yc(r){if(r!=null)return typeof r=="number"?r&4095:(r=r.toString(),r.substring(0,1)==="0"?parseInt(r,8)&4095:parseInt(r,10)&4095)}function t2(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){let t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,$9.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var gt=class r{static unmarshal(e){let t=gc.decode(e),n=gc.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),i=new r({type:$V[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return i._originalMode=n.mode||0,i}constructor(e={type:"file"}){let{type:t,data:n,blockSizes:i,hashType:o,fanout:s,mtime:a,mode:c}=e;if(t&&!$V.includes(t))throw(0,$9.default)(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i||[],this._originalMode=0,this.mode=yc(c),a&&(this.mtime=t2(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?jV:KV;let t=yc(e);t!==void 0&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return!!(this.type&&nye.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(t=>{e+=t}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=gc.DataType.Raw;break;case"directory":e=gc.DataType.Directory;break;case"file":e=gc.DataType.File;break;case"metadata":e=gc.DataType.Metadata;break;case"symlink":e=gc.DataType.Symlink;break;case"hamt-sharded-directory":e=gc.DataType.HAMTShard;break;default:throw(0,$9.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;(!this.data||!this.data.length)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(yc(this.mode)||0),n===KV&&!this.isDirectory()&&(n=void 0),n===jV&&this.isDirectory()&&(n=void 0));let i;if(this.mtime!=null){let s=t2(this.mtime);s&&(i={Seconds:s.secs,FractionalNanoseconds:s.nsecs},i.FractionalNanoseconds===0&&delete i.FractionalNanoseconds)}let o={Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i};return gc.encode(o).finish()}};var $t={};it($t,{code:()=>St,createLink:()=>tz,createNode:()=>ez,decode:()=>qt,encode:()=>dt,name:()=>pye,prepare:()=>$n,validate:()=>ST});var iye=new TextDecoder;function ET(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function K9(r,e){let t;[t,e]=ET(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function GV(r,e){let t;return[t,e]=ET(r,e),[t&7,t>>3,e]}function oye(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=GV(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=K9(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=K9(r,n),e.Name=iye.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=ET(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function HV(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let a,c;if([a,c,t]=GV(r,t),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=K9(r,t),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,t]=K9(r,t),n.push(oye(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var YV=new TextEncoder,WV=2**32,sye=2**31;function aye(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=gh(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=YV.encode(r.Name);t-=n.length,e.set(n,t),t=gh(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=gh(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function XV(r){let e=uye(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=gh(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=aye(r.Links[i],t.subarray(0,n));n-=o,n=gh(t,n,o)-1,t[n]=18}return t}function cye(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+kd(t)}if(typeof r.Name=="string"){let t=YV.encode(r.Name).length;e+=1+t+kd(t)}return typeof r.Tsize=="number"&&(e+=1+kd(r.Tsize)),e}function uye(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+kd(t)}if(r.Links)for(let t of r.Links){let n=cye(t);e+=1+n+kd(n)}return e}function gh(r,e,t){e-=kd(t);let n=e;for(;t>=sye;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function kd(r){return r%2===0&&r++,Math.floor((lye(r)+6)/7)}function lye(r){let e=0;return r>=WV&&(r=Math.floor(r/WV),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+dye[r]}var dye=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var fye=["Data","Links"],hye=["Hash","Name","Tsize"],xT=new TextEncoder;function ZV(r,e){if(r===e)return 0;let t=r.Name?xT.encode(r.Name):[],n=e.Name?xT.encode(e.Name):[],i=t.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(t[s]!==n[s]){i=t[s],o=n[s];break}return i<o?-1:o<i?1:0}function QV(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function JV(r){if(typeof r.asCID=="object"){let t=Lt.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=Lt.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=Lt.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=Lt.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function $n(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=xT.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(JV),e.Links.sort(ZV);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function ST(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!QV(r,fye))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!QV(t,hye))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&ZV(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function ez(r,e=[]){return $n({Data:r,Links:e})}function tz(r,e,t){return JV({Hash:t,Name:r,Tsize:e})}function rz(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}var pye="dag-pb",St=112;function dt(r){ST(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),XV(e)}function qt(r){let e=rz(r),t=HV(e),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(i=>{let o={};try{o.Hash=Lt.decode(i.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(o.Name=i.Name),i.Tsize!==void 0&&(o.Tsize=i.Tsize),o})),n}var _c={};it(_c,{code:()=>Sh,decode:()=>tl,decodeOptions:()=>Wye,encode:()=>Th,encodeOptions:()=>Gye,name:()=>Yye,toByteView:()=>aq});var mye=["string","number","bigint","symbol"],gye=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function nz(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(mye.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(yye(r))return"Buffer";let t=wye(r);return t||"Object"}function yye(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function wye(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(gye.includes(e))return e}var Z=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};Z.uint=new Z(0,"uint",!0);Z.negint=new Z(1,"negint",!0);Z.bytes=new Z(2,"bytes",!0);Z.string=new Z(3,"string",!0);Z.array=new Z(4,"array",!1);Z.map=new Z(5,"map",!1);Z.tag=new Z(6,"tag",!1);Z.float=new Z(7,"float",!0);Z.false=new Z(7,"false",!0);Z.true=new Z(7,"true",!0);Z.null=new Z(7,"null",!0);Z.undefined=new Z(7,"undefined",!0);Z.break=new Z(7,"break",!0);var me=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Pd=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",bye=new TextDecoder,_ye=new TextEncoder;function j9(r){return Pd&&globalThis.Buffer.isBuffer(r)}function yh(r){return r instanceof Uint8Array?j9(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var az=Pd?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):oz(r,e,t):(r,e,t)=>t-e>64?bye.decode(r.subarray(e,t)):oz(r,e,t),G9=Pd?r=>r.length>64?globalThis.Buffer.from(r):iz(r):r=>r.length>64?_ye.encode(r):iz(r),a1=r=>Uint8Array.from(r),Dd=Pd?(r,e,t)=>j9(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),cz=Pd?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),yh(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},uz=Pd?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function lz(r,e){if(j9(r)&&j9(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function iz(r){let e=[],t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e}function oz(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let a,c,u,l;switch(s){case 1:i<128&&(o=i);break;case 2:a=r[e+1],(a&192)===128&&(l=(i&31)<<6|a&63,l>127&&(o=l));break;case 3:a=r[e+1],c=r[e+2],(a&192)===128&&(c&192)===128&&(l=(i&15)<<12|(a&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:a=r[e+1],c=r[e+2],u=r[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(l=(i&15)<<18|(a&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return TT(n)}var sz=4096;function TT(r){let e=r.length;if(e<=sz)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=sz));return t}var vye=256,wh=class{constructor(e=vye){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=uz(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Dd(n,0,this.cursor)}else t=cz(this.chunks,this.cursor);return e&&this.reset(),t}};var qe="CBOR decode error:",wc="CBOR encode error:",bh=[];bh[23]=1;bh[24]=2;bh[25]=3;bh[26]=5;bh[27]=9;function bc(r,e,t){if(r.length-e<t)throw new Error(`${qe} not enough data for type`)}var Kn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ko(r,e,t){bc(r,e,1);let n=r[e];if(t.strict===!0&&n<Kn[0])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return n}function Po(r,e,t){bc(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<Kn[1])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return n}function Do(r,e,t){bc(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<Kn[2])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);return n}function No(r,e,t){bc(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<Kn[3])throw new Error(`${qe} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${qe} integers outside of the safe integer range are not supported`)}function dz(r,e,t,n){return new me(Z.uint,ko(r,e+1,n),2)}function fz(r,e,t,n){return new me(Z.uint,Po(r,e+1,n),3)}function hz(r,e,t,n){return new me(Z.uint,Do(r,e+1,n),5)}function pz(r,e,t,n){return new me(Z.uint,No(r,e+1,n),9)}function ws(r,e){return ui(r,0,e.value)}function ui(r,e,t){if(t<Kn[0]){let n=Number(t);r.push([e|n])}else if(t<Kn[1]){let n=Number(t);r.push([e|24,n])}else if(t<Kn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<Kn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<Kn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${qe} encountered BigInt larger than allowable range`)}}ws.encodedSize=function(e){return ui.encodedSize(e.value)};ui.encodedSize=function(e){return e<Kn[0]?1:e<Kn[1]?2:e<Kn[2]?3:e<Kn[3]?5:9};ws.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function mz(r,e,t,n){return new me(Z.negint,-1-ko(r,e+1,n),2)}function gz(r,e,t,n){return new me(Z.negint,-1-Po(r,e+1,n),3)}function yz(r,e,t,n){return new me(Z.negint,-1-Do(r,e+1,n),5)}var IT=BigInt(-1),wz=BigInt(1);function bz(r,e,t,n){let i=No(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new me(Z.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${qe} integers outside of the safe integer range are not supported`);return new me(Z.negint,IT-BigInt(i),9)}function H9(r,e){let t=e.value,n=typeof t=="bigint"?t*IT-wz:t*-1-1;ui(r,e.type.majorEncoded,n)}H9.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*IT-wz:t*-1-1;return n<Kn[0]?1:n<Kn[1]?2:n<Kn[2]?3:n<Kn[3]?5:9};H9.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function _h(r,e,t,n){bc(r,e,t+n);let i=Dd(r,e+t,e+t+n);return new me(Z.bytes,i,t+n)}function _z(r,e,t,n){return _h(r,e,1,t)}function vz(r,e,t,n){return _h(r,e,2,ko(r,e+1,n))}function Ez(r,e,t,n){return _h(r,e,3,Po(r,e+1,n))}function xz(r,e,t,n){return _h(r,e,5,Do(r,e+1,n))}function Sz(r,e,t,n){let i=No(r,e+1,n);if(typeof i=="bigint")throw new Error(`${qe} 64-bit integer bytes lengths not supported`);return _h(r,e,9,i)}function W9(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Z.string?G9(r.value):r.value),r.encodedBytes}function Nd(r,e){let t=W9(e);ui(r,e.type.majorEncoded,t.length),r.push(t)}Nd.encodedSize=function(e){let t=W9(e);return ui.encodedSize(t.length)+t.length};Nd.compareTokens=function(e,t){return xye(W9(e),W9(t))};function xye(r,e){return r.length<e.length?-1:r.length>e.length?1:lz(r,e)}function vh(r,e,t,n,i){let o=t+n;bc(r,e,o);let s=new me(Z.string,az(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Dd(r,e+t,e+o)),s}function Tz(r,e,t,n){return vh(r,e,1,t,n)}function Iz(r,e,t,n){return vh(r,e,2,ko(r,e+1,n),n)}function Az(r,e,t,n){return vh(r,e,3,Po(r,e+1,n),n)}function Cz(r,e,t,n){return vh(r,e,5,Do(r,e+1,n),n)}function Rz(r,e,t,n){let i=No(r,e+1,n);if(typeof i=="bigint")throw new Error(`${qe} 64-bit integer string lengths not supported`);return vh(r,e,9,i,n)}var kz=Nd;function Od(r,e,t,n){return new me(Z.array,n,t)}function Pz(r,e,t,n){return Od(r,e,1,t)}function Dz(r,e,t,n){return Od(r,e,2,ko(r,e+1,n))}function Nz(r,e,t,n){return Od(r,e,3,Po(r,e+1,n))}function Oz(r,e,t,n){return Od(r,e,5,Do(r,e+1,n))}function Lz(r,e,t,n){let i=No(r,e+1,n);if(typeof i=="bigint")throw new Error(`${qe} 64-bit integer array lengths not supported`);return Od(r,e,9,i)}function Bz(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return Od(r,e,1,1/0)}function Y9(r,e){ui(r,Z.array.majorEncoded,e.value)}Y9.compareTokens=ws.compareTokens;Y9.encodedSize=function(e){return ui.encodedSize(e.value)};function Ld(r,e,t,n){return new me(Z.map,n,t)}function Mz(r,e,t,n){return Ld(r,e,1,t)}function Uz(r,e,t,n){return Ld(r,e,2,ko(r,e+1,n))}function Fz(r,e,t,n){return Ld(r,e,3,Po(r,e+1,n))}function Vz(r,e,t,n){return Ld(r,e,5,Do(r,e+1,n))}function zz(r,e,t,n){let i=No(r,e+1,n);if(typeof i=="bigint")throw new Error(`${qe} 64-bit integer map lengths not supported`);return Ld(r,e,9,i)}function qz(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return Ld(r,e,1,1/0)}function X9(r,e){ui(r,Z.map.majorEncoded,e.value)}X9.compareTokens=ws.compareTokens;X9.encodedSize=function(e){return ui.encodedSize(e.value)};function $z(r,e,t,n){return new me(Z.tag,t,1)}function Kz(r,e,t,n){return new me(Z.tag,ko(r,e+1,n),2)}function jz(r,e,t,n){return new me(Z.tag,Po(r,e+1,n),3)}function Gz(r,e,t,n){return new me(Z.tag,Do(r,e+1,n),5)}function Hz(r,e,t,n){return new me(Z.tag,No(r,e+1,n),9)}function Q9(r,e){ui(r,Z.tag.majorEncoded,e.value)}Q9.compareTokens=ws.compareTokens;Q9.encodedSize=function(e){return ui.encodedSize(e.value)};var Rye=20,kye=21,Pye=22,Dye=23;function Wz(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${qe} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new me(Z.null,null,1):new me(Z.undefined,void 0,1)}function Yz(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${qe} indefinite length items not allowed`);return new me(Z.break,void 0,1)}function AT(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${qe} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${qe} Infinity values are not supported`)}return new me(Z.float,r,e)}function Xz(r,e,t,n){return AT(CT(r,e+1),3,n)}function Qz(r,e,t,n){return AT(RT(r,e+1),5,n)}function Zz(r,e,t,n){return AT(rq(r,e+1),9,n)}function Z9(r,e,t){let n=e.value;if(n===!1)r.push([Z.float.majorEncoded|Rye]);else if(n===!0)r.push([Z.float.majorEncoded|kye]);else if(n===null)r.push([Z.float.majorEncoded|Pye]);else if(n===void 0)r.push([Z.float.majorEncoded|Dye]);else{let i,o=!1;(!t||t.float64!==!0)&&(eq(n),i=CT(ya,1),n===i||Number.isNaN(n)?(ya[0]=249,r.push(ya.slice(0,3)),o=!0):(tq(n),i=RT(ya,1),n===i&&(ya[0]=250,r.push(ya.slice(0,5)),o=!0))),o||(Nye(n),i=rq(ya,1),ya[0]=251,r.push(ya.slice(0,9)))}}Z9.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){eq(n);let i=CT(ya,1);if(n===i||Number.isNaN(n))return 3;if(tq(n),i=RT(ya,1),n===i)return 5}return 9};var Jz=new ArrayBuffer(9),bs=new DataView(Jz,1),ya=new Uint8Array(Jz,0);function eq(r){if(r===1/0)bs.setUint16(0,31744,!1);else if(r===-1/0)bs.setUint16(0,64512,!1);else if(Number.isNaN(r))bs.setUint16(0,32256,!1);else{bs.setFloat32(0,r);let e=bs.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)bs.setUint16(0,31744,!1);else if(t===0)bs.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?bs.setUint16(0,0):i<-14?bs.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):bs.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function CT(r,e){if(r.length-e<2)throw new Error(`${qe} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function tq(r){bs.setFloat32(0,r,!1)}function RT(r,e){if(r.length-e<4)throw new Error(`${qe} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Nye(r){bs.setFloat64(0,r,!1)}function rq(r,e){if(r.length-e<8)throw new Error(`${qe} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Z9.compareTokens=ws.compareTokens;function nr(r,e,t){throw new Error(`${qe} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function J9(r){return()=>{throw new Error(`${qe} ${r}`)}}var Ie=[];for(let r=0;r<=23;r++)Ie[r]=nr;Ie[24]=dz;Ie[25]=fz;Ie[26]=hz;Ie[27]=pz;Ie[28]=nr;Ie[29]=nr;Ie[30]=nr;Ie[31]=nr;for(let r=32;r<=55;r++)Ie[r]=nr;Ie[56]=mz;Ie[57]=gz;Ie[58]=yz;Ie[59]=bz;Ie[60]=nr;Ie[61]=nr;Ie[62]=nr;Ie[63]=nr;for(let r=64;r<=87;r++)Ie[r]=_z;Ie[88]=vz;Ie[89]=Ez;Ie[90]=xz;Ie[91]=Sz;Ie[92]=nr;Ie[93]=nr;Ie[94]=nr;Ie[95]=J9("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Ie[r]=Tz;Ie[120]=Iz;Ie[121]=Az;Ie[122]=Cz;Ie[123]=Rz;Ie[124]=nr;Ie[125]=nr;Ie[126]=nr;Ie[127]=J9("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Ie[r]=Pz;Ie[152]=Dz;Ie[153]=Nz;Ie[154]=Oz;Ie[155]=Lz;Ie[156]=nr;Ie[157]=nr;Ie[158]=nr;Ie[159]=Bz;for(let r=160;r<=183;r++)Ie[r]=Mz;Ie[184]=Uz;Ie[185]=Fz;Ie[186]=Vz;Ie[187]=zz;Ie[188]=nr;Ie[189]=nr;Ie[190]=nr;Ie[191]=qz;for(let r=192;r<=215;r++)Ie[r]=$z;Ie[216]=Kz;Ie[217]=jz;Ie[218]=Gz;Ie[219]=Hz;Ie[220]=nr;Ie[221]=nr;Ie[222]=nr;Ie[223]=nr;for(let r=224;r<=243;r++)Ie[r]=J9("simple values are not supported");Ie[244]=nr;Ie[245]=nr;Ie[246]=nr;Ie[247]=Wz;Ie[248]=J9("simple values are not supported");Ie[249]=Xz;Ie[250]=Qz;Ie[251]=Zz;Ie[252]=nr;Ie[253]=nr;Ie[254]=nr;Ie[255]=Yz;var wa=[];for(let r=0;r<24;r++)wa[r]=new me(Z.uint,r,1);for(let r=-1;r>=-24;r--)wa[31-r]=new me(Z.negint,r,1);wa[64]=new me(Z.bytes,new Uint8Array(0),1);wa[96]=new me(Z.string,"",1);wa[128]=new me(Z.array,0,1);wa[160]=new me(Z.map,0,1);wa[244]=new me(Z.false,!1,1);wa[245]=new me(Z.true,!0,1);wa[246]=new me(Z.null,null,1);function nq(r){switch(r.type){case Z.false:return a1([244]);case Z.true:return a1([245]);case Z.null:return a1([246]);case Z.bytes:return r.value.length?void 0:a1([64]);case Z.string:return r.value===""?a1([96]):void 0;case Z.array:return r.value===0?a1([128]):void 0;case Z.map:return r.value===0?a1([160]):void 0;case Z.uint:return r.value<24?a1([Number(r.value)]):void 0;case Z.negint:if(r.value>=-24)return a1([31-Number(r.value)])}}var Lye={float64:!1,mapSorter:Uye,quickEncodeToken:nq};function Bye(){let r=[];return r[Z.uint.major]=ws,r[Z.negint.major]=H9,r[Z.bytes.major]=Nd,r[Z.string.major]=kz,r[Z.array.major]=Y9,r[Z.map.major]=X9,r[Z.tag.major]=Q9,r[Z.float.major]=Z9,r}var iq=Bye(),kT=new wh,tm=class r{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${wc} object contains circular references`);return new r(t,e)}},r2={null:new me(Z.null,null),undefined:new me(Z.undefined,void 0),true:new me(Z.true,!0),false:new me(Z.false,!1),emptyArray:new me(Z.array,0),emptyMap:new me(Z.map,0)},n2={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new me(Z.float,r):r>=0?new me(Z.uint,r):new me(Z.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new me(Z.uint,r):new me(Z.negint,r)},Uint8Array(r,e,t,n){return new me(Z.bytes,r)},string(r,e,t,n){return new me(Z.string,r)},boolean(r,e,t,n){return r?r2.true:r2.false},null(r,e,t,n){return r2.null},undefined(r,e,t,n){return r2.undefined},ArrayBuffer(r,e,t,n){return new me(Z.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new me(Z.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[r2.emptyArray,new me(Z.break)]:r2.emptyArray;n=tm.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=em(s,t,n);return t.addBreakTokens?[new me(Z.array,r.length),i,new me(Z.break)]:[new me(Z.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[r2.emptyMap,new me(Z.break)]:r2.emptyMap;n=tm.createCheck(n,r);let a=[],c=0;for(let u of o)a[c++]=[em(u,t,n),em(i?r.get(u):r[u],t,n)];return Mye(a,t),t.addBreakTokens?[new me(Z.map,s),a,new me(Z.break)]:[new me(Z.map,s),a]}};n2.Map=n2.Object;n2.Buffer=n2.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))n2[`${r}Array`]=n2.DataView;function em(r,e={},t){let n=nz(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||n2[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=n2[n];if(!o)throw new Error(`${wc} unsupported type: ${n}`);return o(r,n,e,t)}function Mye(r,e){e.mapSorter&&r.sort(e.mapSorter)}function Uye(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=iq[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function oq(r,e,t,n){if(Array.isArray(e))for(let i of e)oq(r,i,t,n);else t[e.type.major](r,e,n)}function PT(r,e,t){let n=em(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,t),a=new wh(s);if(o(a,n,t),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return yh(a.chunks[0])}}return kT.reset(),oq(kT,n,e,t),kT.toBytes(!0)}function DT(r,e){return e=Object.assign({},Lye,e),PT(r,iq,e)}var Fye={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},rm=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],t=wa[e];if(t===void 0){let n=Ie[e];if(!n)throw new Error(`${qe} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this._pos,i,this.options)}return this._pos+=t.encodedLength,t}},Eh=Symbol.for("DONE"),nm=Symbol.for("BREAK");function Vye(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=Bd(e,t);if(o===nm){if(r.value===1/0)break;throw new Error(`${qe} got unexpected break to lengthed array`)}if(o===Eh)throw new Error(`${qe} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function zye(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=Bd(e,t);if(a===nm){if(r.value===1/0)break;throw new Error(`${qe} got unexpected break to lengthed map`)}if(a===Eh)throw new Error(`${qe} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${qe} non-string keys not supported (got ${typeof a})`);if(t.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${qe} found repeat map key "${a}"`);let c=Bd(e,t);if(c===Eh)throw new Error(`${qe} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function Bd(r,e){if(r.done())return Eh;let t=r.next();if(t.type===Z.break)return nm;if(t.type.terminal)return t.value;if(t.type===Z.array)return Vye(t,r,e);if(t.type===Z.map)return zye(t,r,e);if(t.type===Z.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=Bd(r,e);return e.tags[t.value](n)}throw new Error(`${qe} tag not supported (${t.value})`)}throw new Error("unsupported")}function NT(r,e){if(!(r instanceof Uint8Array))throw new Error(`${qe} data to decode must be a Uint8Array`);e=Object.assign({},Fye,e);let t=e.tokenizer||new rm(r,e),n=Bd(t,e);if(n===Eh)throw new Error(`${qe} did not find any content to decode`);if(n===nm)throw new Error(`${qe} got unexpected break`);return[n,r.subarray(t.pos())]}function xh(r,e){let[t,n]=NT(r,e);if(n.length>0)throw new Error(`${qe} too many terminals, data makes no sense`);return t}var sq=42;function aq(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}function $ye(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let e=Lt.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new me(Z.tag,sq),new me(Z.bytes,t)]}function Kye(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function jye(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var OT={float64:!0,typeEncoders:{Object:$ye,undefined:Kye,number:jye}},Gye={...OT,typeEncoders:{...OT.typeEncoders}};function Hye(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Lt.decode(r.subarray(1))}var im={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};im.tags[sq]=Hye;var Wye={...im,tags:im.tags.slice()},Yye="dag-cbor",Sh=113,Th=r=>DT(r,OT),tl=r=>xh(aq(r),im);var Fd={};it(Fd,{code:()=>zT,decode:()=>uq,encode:()=>cq,format:()=>uwe,name:()=>cwe,parse:()=>dwe,stringify:()=>uwe});var LT=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Z.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===Z.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Z.uint.major](e,t){this.prefix(e);let n=String(t.value),i=[];for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);e.push(i)}[Z.negint.major](e,t){this[Z.uint.major](e,t)}[Z.bytes.major](e,t){throw new Error(`${wc} unsupported type: Uint8Array`)}[Z.string.major](e,t){this.prefix(e);let n=G9(JSON.stringify(t.value));e.push(n.length>32?yh(n):n)}[Z.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Z.array,elements:0}),e.push([91])}[Z.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Z.map,elements:0}),e.push([123])}[Z.tag.major](e,t){}[Z.float.major](e,t){if(t.type.name==="break"){let s=this.inRecursive.pop();if(s){if(s.type===Z.array)e.push([93]);else if(s.type===Z.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${wc} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}let n=String(t.value),i=[],o=!1;for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s),!o&&(i[s]===46||i[s]===101||i[s]===69)&&(o=!0);o||(i.push(46),i.push(48)),e.push(i)}};function Xye(r,e){if(Array.isArray(r[0])||Array.isArray(e[0]))throw new Error(`${wc} complex map keys are not supported`);let t=r[0],n=e[0];if(t.type!==Z.string||n.type!==Z.string)throw new Error(`${wc} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${wc} unexpected duplicate map keys, this is not supported`)}var Qye={addBreakTokens:!0,mapSorter:Xye};function BT(r,e){return e=Object.assign({},Qye,e),PT(r,new LT,e)}var Md=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${qe} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${qe} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this._pos,t=!1,n=!1,i=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new me(Z.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${qe} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${qe} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));let o=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),s=parseFloat(o);return n?new me(Z.float,s,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(s)?new me(s>=0?Z.uint:Z.negint,s,this._pos-e):new me(s>=0?Z.uint:Z.negint,BigInt(o),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${qe} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,s=0;o<this.data.length&&s<65536;o++,s++){let a=this.data[o];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new me(Z.string,c,s)}}let e=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${qe} unexpected end of unicode escape sequence at position ${this._pos}`);let o=0;for(let s=0;s<4;s++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${qe} unexpected unicode escape character at position ${this._pos}`);o=o*16+a,this._pos++}return o},i=()=>{let o=this.ch(),s=null,a=o>239?4:o>223?3:o>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${qe} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(a){case 1:o<128&&(s=o);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(o&31)<<6|c&63,d>127&&(s=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(o&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(o&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(s=d))}s===null?(s=65533,a=1):s>65535&&(s-=65536,t.push(s>>>10&1023|55296),s=56320|s&1023),t.push(s),this._pos+=a};for(;!this.done();){let o=this.ch(),s;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${qe} unexpected string termination at position ${this._pos}`);switch(s=this.ch(),this._pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${qe} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new me(Z.string,TT(t),this._pos-e);default:if(o<32)throw new Error(`${qe} invalid control character at position ${this._pos}`);o<128?(t.push(o),this._pos++):i()}}throw new Error(`${qe} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new me(Z.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new me(Z.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new me(Z.null,null,4);case 102:return this.expect([102,97,108,115,101]),new me(Z.false,!1,5);case 116:return this.expect([116,114,117,101]),new me(Z.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${qe} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new me(Z.break,void 0,1);if(this.ch()!==44)throw new Error(`${qe} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new me(Z.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new me(Z.break,void 0,1);if(this.ch()!==44)throw new Error(`${qe} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new me(Z.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${qe} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${qe} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function MT(r,e){return e=Object.assign({tokenizer:new Md(r,e)},e),xh(r,e)}var UT={};it(UT,{base64:()=>Ud,base64pad:()=>Jye,base64url:()=>ewe,base64urlpad:()=>twe});var Ud=Qr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jye=Qr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ewe=Qr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),twe=Qr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function rwe(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}function nwe(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let e=Lt.asCID(r);if(!e)return null;let t=e.toString();return[new me(Z.map,1/0,1),new me(Z.string,"/",1),new me(Z.string,t,t.length),new me(Z.break,void 0,1)]}function om(r){let e=Ud.encode(r).slice(1);return[new me(Z.map,1/0,1),new me(Z.string,"/",1),new me(Z.map,1/0,1),new me(Z.string,"bytes",5),new me(Z.string,e,e.length),new me(Z.break,void 0,1),new me(Z.break,void 0,1)]}function ba(r){return om(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}function iwe(r){return om(new Uint8Array(r))}function owe(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function swe(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var awe={typeEncoders:{Object:nwe,Buffer:om,Uint8Array:om,Int8Array:ba,Uint16Array:ba,Int16Array:ba,Uint32Array:ba,Int32Array:ba,Float32Array:ba,Float64Array:ba,Uint8ClampedArray:ba,BigInt64Array:ba,BigUint64Array:ba,DataView:ba,ArrayBuffer:iwe,undefined:owe,number:swe}},FT=class extends Md{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===Z.map){let t=this._next();if(t.type===Z.string&&t.value==="/"){let n=this._next();if(n.type===Z.string){if(this._next().type!==Z.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new me(Z.tag,42,0)}if(n.type===Z.map){let i=this._next();if(i.type===Z.string&&i.value==="bytes"){let o=this._next();if(o.type===Z.string){for(let a=0;a<2;a++)if(this._next().type!==Z.break)throw new Error("Invalid encoded Bytes form");let s=Ud.decode(`m${o.value}`);return new me(Z.bytes,s,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return e}},VT={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};VT.tags[42]=Lt.parse;var cwe="dag-json",zT=297,cq=r=>BT(r,awe),uq=r=>{let e=rwe(r),t=Object.assign(VT,{tokenizer:new FT(e,VT)});return MT(e,t)},uwe=r=>lwe.decode(cq(r));var lwe=new TextDecoder,dwe=r=>uq(fwe.encode(r)),fwe=new TextEncoder;var Rh={};it(Rh,{code:()=>$we,decode:()=>Hwe,encode:()=>Gwe,name:()=>qwe,toGeneral:()=>Tq});function _a(r){return Z0.encode(r).slice(1)}function _s(r){return Z0.decode(`u${r}`)}var hwe=fq,lq=128,pwe=127,mwe=~pwe,gwe=Math.pow(2,31);function fq(r,e,t){e=e||[],t=t||0;for(var n=t;r>=gwe;)e[t++]=r&255|lq,r/=128;for(;r&mwe;)e[t++]=r&255|lq,r>>>=7;return e[t]=r|0,fq.bytes=t-n+1,e}var ywe=qT,wwe=128,dq=127;function qT(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw qT.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&dq)<<i:(s&dq)*Math.pow(2,i),i+=7}while(s>=wwe);return qT.bytes=o-n,t}var bwe=Math.pow(2,7),_we=Math.pow(2,14),vwe=Math.pow(2,21),Ewe=Math.pow(2,28),xwe=Math.pow(2,35),Swe=Math.pow(2,42),Twe=Math.pow(2,49),Iwe=Math.pow(2,56),Awe=Math.pow(2,63),Cwe=function(r){return r<bwe?1:r<_we?2:r<vwe?3:r<Ewe?4:r<xwe?5:r<Swe?6:r<Twe?7:r<Iwe?8:r<Awe?9:10},Rwe={encode:hwe,decode:ywe,encodingLength:Cwe},kwe=Rwe,Ih=kwe;var Ah=(r,e=0)=>[Ih.decode(r,e),Ih.decode.bytes],Vd=(r,e,t=0)=>(Ih.encode(r,e,t),e),zd=r=>Ih.encodingLength(r);var c1=(r,e)=>{let t=e.byteLength,n=zd(r),i=n+zd(t),o=new Uint8Array(i+t);return Vd(r,o,0),Vd(t,o,n),o.set(e,i),new qd(r,t,e,o)},Jr=r=>{let e=ro(r),[t,n]=Ah(e),[i,o]=Ah(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new qd(t,i,s,e)},hq=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&YF(r.bytes,t.bytes)}},qd=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var pq=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return Dwe(t,$T(r),e||nt.encoder);default:return Nwe(t,$T(r),e||zt.encoder)}};var mq=new WeakMap,$T=r=>{let e=mq.get(r);if(e==null){let t=new Map;return mq.set(r,t),t}return e},$=class r{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Ch)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Owe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=c1(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&hq(e.multihash,n.multihash)}toString(e){return pq(this,e)}toJSON(){return{"/":pq(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s||gq(n,i,o.bytes))}else if(t[Lwe]===!0){let{version:n,multihash:i,code:o}=t,s=Jr(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Ch)throw new Error(`Version 0 CID must use dag-pb (code: ${Ch}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=gq(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,Ch,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=ro(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new qd(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[d,h]=Ah(e.subarray(t));return t+=h,d},i=n(),o=Ch;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),c=n(),u=t+c,l=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,t){let[n,i]=Pwe(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return $T(o).set(n,e),o}},Pwe=(r,e)=>{switch(r[0]){case"Q":{let t=e||nt;return[nt.prefix,t.decode(`${nt.prefix}${r}`)]}case nt.prefix:{let t=e||nt;return[nt.prefix,t.decode(r)]}case zt.prefix:{let t=e||zt;return[zt.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Dwe=(r,e,t)=>{let{prefix:n}=t;if(n!==nt.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},Nwe=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Ch=112,Owe=18,gq=(r,e,t)=>{let n=zd(r),i=n+zd(e),o=new Uint8Array(i+t.byteLength);return Vd(r,o,0),Vd(e,o,n),o.set(t,i),o},Lwe=Symbol.for("@ipld/js-cid/CID");function yq(r){let[e,t,n]=r;return{payload:t,signatures:[{protected:e,signature:n}],link:$.decode(_s(t))}}function Bwe(r){let e={signature:_s(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=_s(r.protected)),e}function wq(r){let e=_s(r.payload);try{$.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:r.signatures.map(Bwe)}}function Mwe(r){let e={signature:_a(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=_a(r.protected)),e}function bq(r){let e={payload:_a(r.payload),signatures:r.signatures.map(Mwe)};return e.link=$.decode(new Uint8Array(r.payload)),e}function _q(r){let[e,t,n,i,o]=r,s={ciphertext:i,iv:n,protected:e,tag:o};return t&&(s.recipients=[{encrypted_key:t}]),s}function Fwe(r){let e={};return r.encrypted_key&&(e.encrypted_key=_s(r.encrypted_key)),r.header&&(e.header=r.header),e}function vq(r){let e={ciphertext:_s(r.ciphertext),protected:_s(r.protected),iv:_s(r.iv),tag:_s(r.tag)};return r.aad&&(e.aad=_s(r.aad)),r.recipients&&(e.recipients=r.recipients.map(Fwe)),r.unprotected&&(e.unprotected=r.unprotected),e}function Vwe(r){let e={};return r.encrypted_key&&(e.encrypted_key=_a(r.encrypted_key)),r.header&&(e.header=r.header),e}function Eq(r){let e={ciphertext:_a(r.ciphertext),protected:_a(r.protected),iv:_a(r.iv),tag:_a(r.tag)};return r.aad&&(e.aad=_a(r.aad)),r.recipients&&(e.recipients=r.recipients.map(Vwe)),r.unprotected&&(e.unprotected=r.unprotected),e}var qwe="dag-jose",$we=133;function xq(r){return"payload"in r&&typeof r.payload=="string"&&"signatures"in r&&Array.isArray(r.signatures)}function Kwe(r){return"payload"in r&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures)}function jwe(r){return"ciphertext"in r&&r.ciphertext instanceof Uint8Array&&"iv"in r&&r.iv instanceof Uint8Array&&"protected"in r&&r.protected instanceof Uint8Array&&"tag"in r&&r.tag instanceof Uint8Array}function Sq(r){return"ciphertext"in r&&typeof r.ciphertext=="string"&&"iv"in r&&typeof r.iv=="string"&&"protected"in r&&typeof r.protected=="string"&&"tag"in r&&typeof r.tag=="string"}function Tq(r){if(typeof r=="string"){let e=r.split(".");if(e.length===3)return yq(e);if(e.length===5)return _q(e);throw new Error("Not a valid JOSE string")}if(xq(r)||Sq(r))return r;throw new Error("Not a valid unencoded JOSE object")}function Gwe(r){typeof r=="string"&&(r=Tq(r));let e;if(xq(r))e=wq(r);else if(Sq(r))e=vq(r);else throw new Error("Not a valid JOSE object");return new Uint8Array(Th(e))}function Hwe(r){let e;try{e=tl(r)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Kwe(e))return bq(e);if(jwe(e))return Eq(e);throw new Error("Not a valid DAG-JOSE object")}var KT={};it(KT,{identity:()=>bn});var Iq=0,Wwe="identity",Aq=ro,Ywe=r=>c1(Iq,Aq(r)),bn={code:Iq,name:Wwe,encode:Aq,digest:Ywe};var jT={};it(jT,{identity:()=>Xwe});var Xwe=Ad({prefix:"\0",name:"identity",encode:r=>QF(r),decode:r=>XF(r)});var GT={};it(GT,{base2:()=>Qwe});var Qwe=Zr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var HT={};it(HT,{base8:()=>Zwe});var Zwe=Zr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var WT={};it(WT,{base10:()=>Jwe});var Jwe=Q0({prefix:"9",name:"base10",alphabet:"0123456789"});var YT={};it(YT,{base16:()=>ebe,base16upper:()=>tbe});var ebe=Zr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tbe=Zr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var XT={};it(XT,{base36:()=>$d,base36upper:()=>rbe});var $d=Q0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rbe=Q0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var QT={};it(QT,{base256emoji:()=>abe});var Cq=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),nbe=Cq.reduce((r,e,t)=>(r[t]=e,r),[]),ibe=Cq.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function obe(r){return r.reduce((e,t)=>(e+=nbe[t],e),"")}function sbe(r){let e=[];for(let t of r){let n=ibe[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var abe=Ad({prefix:"\u{1F680}",name:"base256emoji",encode:obe,decode:sbe});var tI={};it(tI,{sha256:()=>ot,sha512:()=>cbe});var eI=L(require("crypto"),1);var JT=({name:r,code:e,encode:t})=>new ZT(r,e,t),ZT=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?c1(this.code,t):t.then(n=>c1(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ot=JT({name:"sha2-256",code:18,encode:r=>ro(eI.default.createHash("sha256").update(r).digest())}),cbe=JT({name:"sha2-512",code:19,encode:r=>ro(eI.default.createHash("sha512").update(r).digest())});var io={};it(io,{code:()=>jn,decode:()=>dbe,encode:()=>lbe,name:()=>ube});var ube="raw",jn=85,lbe=r=>ro(r),dbe=r=>ro(r);var am={};it(am,{code:()=>rI,decode:()=>gbe,encode:()=>mbe,name:()=>pbe});var fbe=new TextEncoder,hbe=new TextDecoder,pbe="json",rI=512,mbe=r=>fbe.encode(JSON.stringify(r)),gbe=r=>JSON.parse(hbe.decode(r));var vc={...jT,...GT,...HT,...WT,...YT,...JS,...XT,...XS,...eT,...QT},cm={...tI,...KT},um={raw:io,json:am};async function Pn(r){let e=[];for await(let t of r)e.push(t);return e}var kq=`                  IPFS -- Inter-Planetary File system

IPFS is a global, versioned, peer-to-peer filesystem. It combines good ideas
from Git, BitTorrent, Kademlia, SFS, and the Web. It is like a single bit-
torrent swarm, exchanging git objects. IPFS provides an interface as simple
as the HTTP web, but with permanence built in. You can also mount the world
at /ipfs.

IPFS is a protocol:
- defines a content-addressed file system
- coordinates content delivery
- combines Kademlia + BitTorrent + Git

IPFS is a filesystem:
- has directories and files
- mountable filesystem (via FUSE)

IPFS is a web:
- can be used to view documents like the web
- files accessible via HTTP at 'http://ipfs.io/<path>'
- browsers or extensions can learn to use 'ipfs://' directly
- hash-addressed content guarantees authenticity

IPFS is modular:
- connection layer over any network protocol
- routing layer
- uses a routing layer DHT (kademlia/coral)
- uses a path-based naming service
- uses bittorrent-inspired block exchange

IPFS uses crypto:
- cryptographic-hash content addressing
- block-level deduplication
- file integrity + versioning
- filesystem-level encryption + signing support

IPFS is p2p:
- worldwide peer-to-peer file transfers
- completely decentralized architecture
- **no** central point of failure

IPFS is a cdn:
- add a file to the filesystem locally, and it's now available to the world
- caching-friendly (content-hash naming)
- bittorrent-based bandwidth distribution

IPFS has a name service:
- IPNS, an SFS inspired name system
- global namespace based on PKI
- serves to build trust chains
- compatible with other NSes
- can map DNS, .onion, .bit, etc to IPNS
`;var Pq=`Come hang out in our IRC chat room if you have any questions.

Contact the ipfs dev team:
- Bugs: https://github.com/ipfs/go-ipfs/issues
- Help: irc.freenode.org/#ipfs
- Email: dev@ipfs.io
`;var Dq=`Some helpful resources for finding your way around ipfs:

- quick-start: a quick show of various ipfs features.
- ipfs commands: a list of all commands
- ipfs --help: every command describes itself
- https://github.com/ipfs/go-ipfs -- the src repository
- #ipfs on irc.freenode.org -- the community irc channel
`;var Nq=`# 0.1 - Quick Start

This is a set of short examples with minimal explanation. It is meant as
a "quick start". Soon, we'll write a longer tour :-)


Add a file to ipfs:

  echo "hello world" >hello
  ipfs add hello


View it:

  ipfs cat <the-hash-you-got-here>


Try a directory:

  mkdir foo
  mkdir foo/bar
  echo "baz" > foo/baz
  echo "baz" > foo/bar/baz
  ipfs add -r foo


View things:

  ipfs ls <the-hash-here>
  ipfs ls <the-hash-here>/bar
  ipfs cat <the-hash-here>/baz
  ipfs cat <the-hash-here>/bar/baz
  ipfs cat <the-hash-here>/bar
  ipfs ls <the-hash-here>/baz


References:

  ipfs refs <the-hash-here>
  ipfs refs -r <the-hash-here>
  ipfs refs --help


Get:

  ipfs get <the-hash-here> -o foo2
  diff foo foo2


Objects:

  ipfs object get <the-hash-here>
  ipfs object get <the-hash-here>/foo2
  ipfs object --help


Pin + GC:

  ipfs pin add <the-hash-here>
  ipfs repo gc
  ipfs ls <the-hash-here>
  ipfs pin rm <the-hash-here>
  ipfs repo gc


Daemon:

  ipfs daemon  (in another terminal)
  ipfs id


Network:

  (must be online)
  ipfs swarm peers
  ipfs id
  ipfs cat <hash-of-remote-object>


Mount:

  (warning: fuse is finicky!)
  ipfs mount
  cd /ipfs/<the-hash-here>
  ls


Tool:

  ipfs version
  ipfs update
  ipfs commands
  ipfs config --help
  open http://localhost:5001/webui


Browse:

  webui:

    http://localhost:5001/webui

  video:

    http://localhost:8080/ipfs/QmVc6zuAneKJzicnJpfrqCH9gSy6bz54JhcypfJYhGUFQu/play#/ipfs/QmTKZgRNwDNZwHtJSjCp6r5FYefzpULfy37JvMt9DwvXse

  images:

    http://localhost:8080/ipfs/QmZpc3HvfjEXvLWGQPWbHk3AjD5j8NEN4gmFN8Jmrd5g83/cs

  markdown renderer app:

    http://localhost:8080/ipfs/QmX7M9CiYXjVeFnkfVGf3y5ixTZ2ACeSGyL1vBJY1HvQPp/mdown
`;var Oq=`Hello and Welcome to IPFS!

\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557
\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D
\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557
\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u255D \u2588\u2588\u2554\u2550\u2550\u255D  \u255A\u2550\u2550\u2550\u2550\u2588\u2588\u2551
\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551
\u255A\u2550\u255D\u255A\u2550\u255D     \u255A\u2550\u255D     \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D

If you're seeing this, you have successfully installed
IPFS and are now interfacing with the ipfs merkledag!

 -------------------------------------------------------
| Warning:                                              |
|   This is alpha software. Use at your own discretion! |
|   Much is missing or lacking polish. There are bugs.  |
|   Not yet secure. Read the security notes for more.   |
 -------------------------------------------------------

Check out some of the other files in this directory:

  ./about
  ./help
  ./quick-start     <-- usage examples
  ./readme          <-- this file
  ./security-notes
`;var Lq=`                    IPFS Alpha Security Notes

We try hard to ensure our system is safe and robust, but all software
has bugs, especially new software. This distribution is meant to be an
alpha preview, don't use it for anything mission critical.

Please note the following:

- This is alpha software and has not been audited. It is our goal
  to conduct a proper security audit once we close in on a 1.0 release.

- ipfs is a networked program, and may have serious undiscovered
  vulnerabilities. It is written in Go, and we do not execute any
  user provided data. But please point any problems out to us in a
  github issue, or email security@ipfs.io privately.

- security@ipfs.io GPG key:
  - 4B9665FB 92636D17 7C7A86D3 50AAE8A9 59B13AF3
  - https://pgp.mit.edu/pks/lookup?op=get&search=0x50AAE8A959B13AF3

- ipfs uses encryption for all communication, but it's NOT PROVEN SECURE
  YET!  It may be totally broken. For now, the code is included to make
  sure we benchmark our operations with encryption in mind. In the future,
  there will be an "unsafe" mode for high performance intranet apps.
  If this is a blocking feature for you, please contact us.
`;var Bq=`Index
`;var Mq=`WIP

# 0.0 - Introduction

Welcome to IPFS! This tour will guide you through a few of the
features of this tool, and the most common commands. Then, it will
immerse you into the world of merkledags and the amazing things
you can do with them.


This tour has many parts, and can be taken in different sequences.
Different people learn different ways, so choose your own adventure:

  To start with the concepts, try:
  - The Merkle DAG
  - Data Structures on the Merkle DAG
  - Representing Files with unixfs
  - add, cat, ls, refs
  ...


  To start with the examples, try:
  - add, cat, ls, refs
  - Representing Files with unixfs
  - Data Structures on the Merkle DAG
  - The Merkle DAG
  ...


  To start with the network, try:
  - IPFS Nodes
  - Running the daemon
  - The Swarm
  - The Web
`;function i2(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}var aI={};it(aI,{base10:()=>Ebe});function ybe(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,c=r.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var w=0,_=0,E=0,S=m.length;E!==S&&m[E]===0;)E++,w++;for(var p=(S-E)*l+1>>>0,g=new Uint8Array(p);E!==S;){for(var y=m[E],b=0,x=p-1;(y!==0||b<_)&&x!==-1;x--,b++)y+=256*g[x]>>>0,g[x]=y%a>>>0,y=y/a>>>0;if(y!==0)throw new Error("Non-zero carry");_=b,E++}for(var v=p-_;v!==p&&g[v]===0;)v++;for(var T=c.repeat(w);v<p;++v)T+=r.charAt(g[v]);return T}function h(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var w=0;if(m[w]!==" "){for(var _=0,E=0;m[w]===c;)_++,w++;for(var S=(m.length-w)*u+1>>>0,p=new Uint8Array(S);m[w];){var g=t[m.charCodeAt(w)];if(g===255)return;for(var y=0,b=S-1;(g!==0||y<E)&&b!==-1;b--,y++)g+=a*p[b]>>>0,p[b]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");E=y,w++}if(m[w]!==" "){for(var x=S-E;x!==S&&p[x]===0;)x++;for(var v=new Uint8Array(_+(S-x)),T=_;x!==S;)v[T++]=p[x++];return v}}}function f(m){var w=h(m);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var wbe=ybe,bbe=wbe,Uq=bbe;var Qet=new Uint8Array(0);var Fq=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},vs=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var Vq=r=>new TextEncoder().encode(r),zq=r=>new TextDecoder().decode(r);var nI=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iI=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $q(this,e)}},oI=class{constructor(e){this.decoders=e}or(e){return $q(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},$q=(r,e)=>new oI({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),sI=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new nI(e,t,n),this.decoder=new iI(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Kd=({name:r,prefix:e,encode:t,decode:n})=>new sI(r,e,t,n),o2=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Uq(t,e);return Kd({prefix:r,name:e,encode:n,decode:o=>vs(i(o))})},_be=(r,e,t,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,c=0,u=0;for(let l=0;l<o;++l){let d=i[r[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,a+=t,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},vbe=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o},en=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Kd({prefix:e,name:r,encode(i){return vbe(i,n,t)},decode(i){return _be(i,n,t,r)}});var Ebe=o2({prefix:"9",name:"base10",alphabet:"0123456789"});var cI={};it(cI,{base16:()=>xbe,base16upper:()=>Sbe});var xbe=en({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sbe=en({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var uI={};it(uI,{base2:()=>Tbe});var Tbe=en({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var lI={};it(lI,{base256emoji:()=>kbe});var Kq=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ibe=Kq.reduce((r,e,t)=>(r[t]=e,r),[]),Abe=Kq.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Cbe(r){return r.reduce((e,t)=>(e+=Ibe[t],e),"")}function Rbe(r){let e=[];for(let t of r){let n=Abe[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var kbe=Kd({prefix:"\u{1F680}",name:"base256emoji",encode:Cbe,decode:Rbe});var dI={};it(dI,{base32:()=>s2,base32hex:()=>Obe,base32hexpad:()=>Bbe,base32hexpadupper:()=>Mbe,base32hexupper:()=>Lbe,base32pad:()=>Dbe,base32padupper:()=>Nbe,base32upper:()=>Pbe,base32z:()=>Ube});var s2=en({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Pbe=en({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dbe=en({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nbe=en({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Obe=en({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Lbe=en({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Bbe=en({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mbe=en({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ube=en({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var fI={};it(fI,{base36:()=>Fbe,base36upper:()=>Vbe});var Fbe=o2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vbe=o2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var hI={};it(hI,{base58btc:()=>Bi,base58flickr:()=>zbe});var Bi=o2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zbe=o2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mI={};it(mI,{base64:()=>pI,base64pad:()=>qbe,base64url:()=>$be,base64urlpad:()=>Kbe});var pI=en({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qbe=en({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$be=en({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kbe=en({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var gI={};it(gI,{base8:()=>jbe});var jbe=en({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yI={};it(yI,{identity:()=>Gbe});var Gbe=Kd({prefix:"\0",name:"identity",encode:r=>zq(r),decode:r=>Vq(r)});var ftt=new TextEncoder,htt=new TextDecoder;var bI={};it(bI,{identity:()=>dm});var Ybe=Hq,jq=128,Xbe=127,Qbe=~Xbe,Zbe=Math.pow(2,31);function Hq(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Zbe;)e[t++]=r&255|jq,r/=128;for(;r&Qbe;)e[t++]=r&255|jq,r>>>=7;return e[t]=r|0,Hq.bytes=t-n+1,e}var Jbe=wI,e_e=128,Gq=127;function wI(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw wI.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&Gq)<<i:(s&Gq)*Math.pow(2,i),i+=7}while(s>=e_e);return wI.bytes=o-n,t}var t_e=Math.pow(2,7),r_e=Math.pow(2,14),n_e=Math.pow(2,21),i_e=Math.pow(2,28),o_e=Math.pow(2,35),s_e=Math.pow(2,42),a_e=Math.pow(2,49),c_e=Math.pow(2,56),u_e=Math.pow(2,63),l_e=function(r){return r<t_e?1:r<r_e?2:r<n_e?3:r<i_e?4:r<o_e?5:r<s_e?6:r<a_e?7:r<c_e?8:r<u_e?9:10},d_e={encode:Ybe,decode:Jbe,encodingLength:l_e},f_e=d_e,kh=f_e;var Ph=(r,e=0)=>[kh.decode(r,e),kh.decode.bytes],jd=(r,e,t=0)=>(kh.encode(r,e,t),e),Gd=r=>kh.encodingLength(r);var a2=(r,e)=>{let t=e.byteLength,n=Gd(r),i=n+Gd(t),o=new Uint8Array(i+t);return jd(r,o,0),jd(t,o,n),o.set(e,i),new Hd(r,t,e,o)},Dh=r=>{let e=vs(r),[t,n]=Ph(e),[i,o]=Ph(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Hd(t,i,s,e)},Wq=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Fq(r.bytes,t.bytes)}},Hd=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Yq=0,h_e="identity",Xq=vs,p_e=r=>a2(Yq,Xq(r)),dm={code:Yq,name:h_e,encode:Xq,digest:p_e};var xI={};it(xI,{sha256:()=>fm,sha512:()=>m_e});var EI=L(require("crypto"),1);var vI=({name:r,code:e,encode:t})=>new _I(r,e,t),_I=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?a2(this.code,t):t.then(n=>a2(this.code,n))}else throw Error("Unknown type, must be binary type")}};var fm=vI({name:"sha2-256",code:18,encode:r=>vs(EI.default.createHash("sha256").update(r).digest())}),m_e=vI({name:"sha2-512",code:19,encode:r=>vs(EI.default.createHash("sha512").update(r).digest())});var Zq=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return y_e(t,SI(r),e||Bi.encoder);default:return w_e(t,SI(r),e||s2.encoder)}};var Jq=new WeakMap,SI=r=>{let e=Jq.get(r);if(e==null){let t=new Map;return Jq.set(r,t),t}return e},Ec=class r{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==Nh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==b_e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=a2(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&Wq(e.multihash,n.multihash)}toString(e){return Zq(this,e)}toJSON(){return{"/":Zq(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s||e$(n,i,o.bytes))}else if(t[__e]===!0){let{version:n,multihash:i,code:o}=t,s=Dh(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Nh)throw new Error(`Version 0 CID must use dag-pb (code: ${Nh}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=e$(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,Nh,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=vs(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new Hd(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[d,h]=Ph(e.subarray(t));return t+=h,d},i=n(),o=Nh;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),c=n(),u=t+c,l=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,t){let[n,i]=g_e(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return SI(o).set(n,e),o}},g_e=(r,e)=>{switch(r[0]){case"Q":{let t=e||Bi;return[Bi.prefix,t.decode(`${Bi.prefix}${r}`)]}case Bi.prefix:{let t=e||Bi;return[Bi.prefix,t.decode(r)]}case s2.prefix:{let t=e||s2;return[s2.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},y_e=(r,e,t)=>{let{prefix:n}=t;if(n!==Bi.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},w_e=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Nh=112,b_e=18,e$=(r,e,t)=>{let n=Gd(r),i=n+Gd(e),o=new Uint8Array(i+t.byteLength);return jd(r,o,0),jd(e,o,n),o.set(t,i),o},__e=Symbol.for("@ipld/js-cid/CID");var Yd={...yI,...uI,...gI,...aI,...cI,...dI,...fI,...hI,...mI,...lI},ktt={...xI,...bI};function c2(r=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?i2(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function r$(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var t$=r$("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),TI=r$("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=c2(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),v_e={utf8:t$,"utf-8":t$,hex:Yd.base16,latin1:TI,ascii:TI,binary:TI,...Yd},hm=v_e;function oe(r,e="utf8"){let t=hm[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?i2(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var n$=[{content:oe(kq),path:"/init-docs/about"},{content:oe(Pq),path:"/init-docs/contact"},{content:oe(Dq),path:"/init-docs/help"},{content:oe(Nq),path:"/init-docs/quick-start"},{content:oe(Oq),path:"/init-docs/readme"},{content:oe(Lq),path:"/init-docs/security-notes"},{content:oe(Bq),path:"/init-docs/docs/index"},{content:oe(Mq),path:"/init-docs/tour/intro"}];async function i$({addAll:r,print:e}){let n=(await Pn(r(n$,{preload:!1}))).filter(i=>i.path==="init-docs").pop();n&&(e(`to get started, enter:
`),e(`	jsipfs cat /ipfs/${n.cid}/readme
`))}var rl=class r extends Error{constructor(e="not initialized"){super(e),this.name="NotInitializedError",this.code=r.code}};rl.code="ERR_NOT_INITIALIZED";var II=class extends Error{constructor(e="cannot initialize an initializing node"){super(e),this.name="AlreadyInitializingError",this.code=xc.code}};II.code="ERR_ALREADY_INITIALIZING";var xc=class r extends Error{constructor(e="cannot re-initialize an initialized node"){super(e),this.name="AlreadyInitializedError",this.code=r.code}};xc.code="ERR_ALREADY_INITIALIZED";var nl=class r extends Error{constructor(e="not started"){super(e),this.name="NotStartedError",this.code=r.code}};nl.code="ERR_NOT_STARTED";var Oh=class r extends Error{constructor(e="cannot start, already startin"){super(e),this.name="AlreadyStartingError",this.code=r.code}};Oh.code="ERR_ALREADY_STARTING";var Lh=class r extends Error{constructor(e="cannot start, already started"){super(e),this.name="AlreadyStartedError",this.code=r.code}};Lh.code="ERR_ALREADY_STARTED";var Sc=class r extends Error{constructor(e="not enabled"){super(e),this.name="NotEnabledError",this.code=r.code}};Sc.code="ERR_NOT_ENABLED";var z7e=L(Dn(),1);function mm(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var m$=require("buffer");var kI={};it(kI,{base10:()=>S_e});var S_e=j0({prefix:"9",name:"base10",alphabet:"0123456789"});var PI={};it(PI,{base16:()=>T_e,base16upper:()=>I_e});var T_e=Qr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),I_e=Qr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var DI={};it(DI,{base2:()=>A_e});var A_e=Qr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var NI={};it(NI,{base256emoji:()=>D_e});var l$=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),C_e=l$.reduce((r,e,t)=>(r[t]=e,r),[]),R_e=l$.reduce((r,e,t)=>{let n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return r[n]=t,r},[]);function k_e(r){return r.reduce((e,t)=>(e+=C_e[t],e),"")}function P_e(r){let e=[];for(let t of r){let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);let i=R_e[n];if(i==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}var D_e=yd({prefix:"\u{1F680}",name:"base256emoji",encode:k_e,decode:P_e});var OI={};it(OI,{base8:()=>N_e});var N_e=Qr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var LI={};it(LI,{identity:()=>O_e});var O_e=yd({prefix:"\0",name:"identity",encode:r=>vS(r),decode:r=>_S(r)});var BI={};it(BI,{identity:()=>U_e});var d$=0,B_e="identity",f$=Io;function M_e(r){return Wu(d$,f$(r))}var U_e={code:d$,name:B_e,encode:f$,digest:M_e};var Bh={...LI,...DI,...OI,...kI,...PI,...IS,...AS,...CS,...UT,...NI},prt={...OS,...BI};var MI=require("buffer");function il(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function Tc(r=0){return il(MI.Buffer.alloc(r))}function oo(r=0){return il(MI.Buffer.allocUnsafe(r))}function p$(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var h$=p$("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),UI=p$("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=oo(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),F_e={utf8:h$,"utf-8":h$,hex:Bh.base16,latin1:UI,ascii:UI,binary:UI,...Bh},gm=F_e;function Nn(r,e="utf8"){let t=gm[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return e==="utf8"||e==="utf-8"?m$.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var V_e=Math.pow(2,7),z_e=Math.pow(2,14),q_e=Math.pow(2,21),FI=Math.pow(2,28),VI=Math.pow(2,35),zI=Math.pow(2,42),qI=Math.pow(2,49),dr=128,_i=127;function Gn(r){if(r<V_e)return 1;if(r<z_e)return 2;if(r<q_e)return 3;if(r<FI)return 4;if(r<VI)return 5;if(r<zI)return 6;if(r<qI)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function $I(r,e,t=0){switch(Gn(r)){case 8:e[t++]=r&255|dr,r/=128;case 7:e[t++]=r&255|dr,r/=128;case 6:e[t++]=r&255|dr,r/=128;case 5:e[t++]=r&255|dr,r/=128;case 4:e[t++]=r&255|dr,r>>>=7;case 3:e[t++]=r&255|dr,r>>>=7;case 2:e[t++]=r&255|dr,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function $_e(r,e,t=0){switch(Gn(r)){case 8:e.set(t++,r&255|dr),r/=128;case 7:e.set(t++,r&255|dr),r/=128;case 6:e.set(t++,r&255|dr),r/=128;case 5:e.set(t++,r&255|dr),r/=128;case 4:e.set(t++,r&255|dr),r>>>=7;case 3:e.set(t++,r&255|dr),r>>>=7;case 2:e.set(t++,r&255|dr),r>>>=7;case 1:{e.set(t++,r&255),r>>>=7;break}default:throw new Error("unreachable")}return e}function KI(r,e){let t=r[e],n=0;if(n+=t&_i,t<dr||(t=r[e+1],n+=(t&_i)<<7,t<dr)||(t=r[e+2],n+=(t&_i)<<14,t<dr)||(t=r[e+3],n+=(t&_i)<<21,t<dr)||(t=r[e+4],n+=(t&_i)*FI,t<dr)||(t=r[e+5],n+=(t&_i)*VI,t<dr)||(t=r[e+6],n+=(t&_i)*zI,t<dr)||(t=r[e+7],n+=(t&_i)*qI,t<dr))return n;throw new RangeError("Could not decode varint")}function K_e(r,e){let t=r.get(e),n=0;if(n+=t&_i,t<dr||(t=r.get(e+1),n+=(t&_i)<<7,t<dr)||(t=r.get(e+2),n+=(t&_i)<<14,t<dr)||(t=r.get(e+3),n+=(t&_i)<<21,t<dr)||(t=r.get(e+4),n+=(t&_i)*FI,t<dr)||(t=r.get(e+5),n+=(t&_i)*VI,t<dr)||(t=r.get(e+6),n+=(t&_i)*zI,t<dr)||(t=r.get(e+7),n+=(t&_i)*qI,t<dr))return n;throw new RangeError("Could not decode varint")}function u2(r,e,t=0){return e==null&&(e=oo(Gn(r))),e instanceof Uint8Array?$I(r,e,t):$_e(r,e,t)}function Ic(r,e=0){return r instanceof Uint8Array?KI(r,e):K_e(r,e)}var g$=require("buffer");function li(r,e){return il(g$.Buffer.concat(r,e))}var wm=class{constructor(){F(this,"index",0);F(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,i){return this.readAtomically(()=>{let o=0,s=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let l=this.readAtomically(()=>{let d=this.readChar();if(d===void 0)return;let h=Number.parseInt(d,e);if(!Number.isNaN(h))return h});if(l===void 0)break;if(o*=e,o+=l,o>u||(s+=1,t!==void 0&&s>t))return}if(s!==0)return!n&&c&&s>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){let e=t=>{for(let n=0;n<t.length/2;n++){let i=n*2;if(n<t.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];t[i]=o>>8,t[i+1]=o&255}return[t.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[n,i]=e(t);if(n===16)return t;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),s=16-(n+2),[a]=e(o.subarray(0,s));return t.set(o.subarray(0,a),16-a),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var krt=new wm;var Urt=parseInt("0xFFFF",16),Frt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var b$=require("buffer");function fr(r,e="utf8"){let t=gm[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return e==="utf8"||e==="utf-8"?il(b$.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var Es=require("net");function u1(r){return!!(0,Es.isIP)(r)}var _$=Es.isIPv4,X_e=Es.isIPv6,jI=function(r){let e=0;if(r=r.toString().trim(),_$(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(X_e(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=_$(t[n]),s;o&&(s=jI(t[n]),t[n]=Nn(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,Nn(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},v$=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Xd={},GI={},Z_e=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,-1,"http-path"],[777,-1,"memory"]];Z_e.forEach(r=>{let e=J_e(...r);GI[e.code]=e,Xd[e.name]=e});function J_e(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:!!n,path:!!i}}function Tt(r){if(typeof r=="number"){if(GI[r]!=null)return GI[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Xd[r]!=null)return Xd[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var Int=Tt("ip4"),Ant=Tt("ip6"),Cnt=Tt("ipcidr");function Mh(r,e){switch(Tt(r).code){case 4:case 41:return tve(e);case 42:return YI(e);case 6:case 273:case 33:case 132:return S$(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return YI(e);case 421:return ove(e);case 444:return x$(e);case 445:return x$(e);case 466:return ive(e);case 481:return globalThis.encodeURIComponent(YI(e));default:return Nn(e,"base16")}}function XI(r,e){switch(Tt(r).code){case 4:return E$(e);case 41:return E$(e);case 42:return WI(e);case 6:case 273:case 33:case 132:return QI(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return WI(e);case 421:return rve(e);case 444:return sve(e);case 445:return ave(e);case 466:return nve(e);case 481:return WI(globalThis.decodeURIComponent(e));default:return fr(e,"base16")}}var HI=Object.values(Bh).map(r=>r.decoder),eve=function(){let r=HI[0].or(HI[1]);return HI.slice(2).forEach(e=>r=r.or(e)),r}();function E$(r){if(!u1(r))throw new Error("invalid ip address");return jI(r)}function tve(r){let e=v$(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!u1(e))throw new Error("invalid ip address");return e}function QI(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function S$(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function WI(r){let e=fr(r),t=Uint8Array.from(u2(e.length));return li([t,e],t.length+e.length)}function YI(r){let e=Ic(r);if(r=r.slice(Gn(e)),r.length!==e)throw new Error("inconsistent lengths");return Nn(r)}function rve(r){let e;r[0]==="Q"||r[0]==="1"?e=G0(ai.decode(`z${r}`)).bytes:e=Lt.parse(r).multihash.bytes;let t=Uint8Array.from(u2(e.length));return li([t,e],t.length+e.length)}function nve(r){let e=eve.decode(r),t=Uint8Array.from(u2(e.length));return li([t,e],t.length+e.length)}function ive(r){let e=Ic(r),t=r.slice(Gn(e));if(t.length!==e)throw new Error("inconsistent lengths");return"u"+Nn(t,"base64url")}function ove(r){let e=Ic(r),t=r.slice(Gn(e));if(t.length!==e)throw new Error("inconsistent lengths");return Nn(t,"base58btc")}function sve(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=ms.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=QI(n);return li([t,i],t.length+i.length)}function ave(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=ms.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=QI(n);return li([t,i],t.length+i.length)}function x$(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=Nn(e,"base32"),i=S$(t);return`${n}:${i}`}function T$(r){r=ZI(r);let e=[],t=[],n=null,i=r.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<i.length;o++){let s=i[o],a=Tt(s);if(a.size===0){e.push([a.code]),t.push([a.code]);continue}if(o++,o>=i.length)throw A$("invalid address: "+r);if(a.path===!0){n=ZI(i.slice(o).join("/")),e.push([a.code,XI(a.code,n)]),t.push([a.code,n]);break}let c=XI(a.code,i[o]);e.push([a.code,c]),t.push([a.code,Mh(a.code,c)])}return{string:I$(t),bytes:eA(e),tuples:e,stringTuples:t,path:n}}function JI(r){let e=[],t=[],n=null,i=0;for(;i<r.length;){let o=Ic(r,i),s=Gn(o),a=Tt(o),c=cve(a,r.slice(i+s));if(c===0){e.push([o]),t.push([o]),i+=s;continue}let u=r.slice(i+s,i+s+c);if(i+=c+s,i>r.length)throw A$("Invalid address Uint8Array: "+Nn(r,"base16"));e.push([o,u]);let l=Mh(o,u);if(t.push([o,l]),a.path===!0){n=l;break}}return{bytes:Uint8Array.from(r),string:I$(t),tuples:e,stringTuples:t,path:n}}function I$(r){let e=[];return r.map(t=>{let n=Tt(t[0]);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),ZI(e.join("/"))}function eA(r){return li(r.map(e=>{let t=Tt(e[0]),n=Uint8Array.from(u2(t.code));return e.length>1&&e[1]!=null&&(n=li([n,e[1]])),n}))}function cve(r,e){if(r.size>0)return r.size/8;if(r.size===0)return 0;{let t=Ic(e instanceof Uint8Array?e:Uint8Array.from(e));return t+Gn(t)}}function ZI(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function A$(r){return new Error("Error parsing address: "+r)}var uve=Symbol.for("nodejs.util.inspect.custom"),rA=Symbol.for("@multiformats/js-multiaddr/multiaddr"),lve=[Tt("dns").code,Tt("dns4").code,Tt("dns6").code,Tt("dnsaddr").code],tA=class extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}},C$,Zd,l2,Uh,Fh,Qd=class Qd{constructor(e){F(this,"bytes");mr(this,Zd);mr(this,l2);mr(this,Uh);mr(this,Fh);F(this,C$,!0);e==null&&(e="");let t;if(e instanceof Uint8Array)t=JI(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);t=T$(e)}else if(k$(e))t=JI(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=t.bytes,Vt(this,Zd,t.string),Vt(this,l2,t.tuples),Vt(this,Uh,t.stringTuples),Vt(this,Fh,t.path)}toString(){return Se(this,Zd)}toJSON(){return this.toString()}toOptions(){let e,t,n,i,o="",s=Tt("tcp"),a=Tt("udp"),c=Tt("ip4"),u=Tt("ip6"),l=Tt("dns6"),d=Tt("ip6zone");for(let[f,m]of this.stringTuples())f===d.code&&(o=`%${m??""}`),lve.includes(f)&&(t=s.name,i=443,n=`${m??""}${o}`,e=f===l.code?6:4),(f===s.code||f===a.code)&&(t=Tt(f).name,i=parseInt(m??"")),(f===c.code||f===u.code)&&(t=Tt(f).name,n=`${m??""}${o}`,e=f===u.code?6:4);if(e==null||t==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:i}}protos(){return Se(this,l2).map(([e])=>Object.assign({},Tt(e)))}protoCodes(){return Se(this,l2).map(([e])=>e)}protoNames(){return Se(this,l2).map(([e])=>Tt(e).name)}tuples(){return Se(this,l2)}stringTuples(){return Se(this,Uh)}encapsulate(e){return e=new Qd(e),new Qd(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Qd(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Qd(eA(t.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===Xd.p2p.code&&e.push([n,i]),n===Xd["p2p-circuit"].code&&(e=[])});let t=e.pop();if((t==null?void 0:t[1])!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?Nn(ai.decode(`z${n}`),"base58btc"):Nn(Lt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return Se(this,Fh)}equals(e){return mm(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=R$.get(t.name);if(n==null)throw new tA(`no available resolver for ${t.name}`);return(await n(this,e)).map(o=>Br(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(C$=rA,uve)](){return`Multiaddr(${Se(this,Zd)})`}};Zd=new WeakMap,l2=new WeakMap,Uh=new WeakMap,Fh=new WeakMap;var bm=Qd;var R$=new Map;function k$(r){return!!(r!=null&&r[rA])}function Br(r){return new bm(r)}var dve=Oe("dns4"),fve=Oe("dns6"),hve=Oe("dnsaddr"),f2=dn(Oe("dns"),hve,dve,fve),_m=dn(Oe("ip4"),Oe("ip6")),h2=dn(st(_m,Oe("tcp")),st(f2,Oe("tcp"))),vm=st(_m,Oe("udp")),pve=st(vm,Oe("utp")),mve=st(vm,Oe("quic")),gve=st(vm,Oe("quic-v1")),nA=dn(st(h2,Oe("ws")),st(f2,Oe("ws"))),Jd=dn(st(nA,Oe("p2p")),nA),iA=dn(st(h2,Oe("wss")),st(f2,Oe("wss")),st(h2,Oe("tls"),Oe("ws")),st(f2,Oe("tls"),Oe("ws"))),sl=dn(st(iA,Oe("p2p")),iA),oA=dn(st(h2,Oe("http")),st(_m,Oe("http")),st(f2,Oe("http"))),sA=dn(st(h2,Oe("https")),st(_m,Oe("https")),st(f2,Oe("https"))),P$=st(vm,Oe("webrtc-direct"),Oe("certhash")),O$=dn(st(P$,Oe("p2p")),P$),D$=st(gve,Oe("webtransport"),Oe("certhash"),Oe("certhash")),L$=dn(st(D$,Oe("p2p")),D$),B$=dn(st(Jd,Oe("p2p-webrtc-star"),Oe("p2p")),st(sl,Oe("p2p-webrtc-star"),Oe("p2p")),st(Jd,Oe("p2p-webrtc-star")),st(sl,Oe("p2p-webrtc-star"))),tit=dn(st(Jd,Oe("p2p-websocket-star"),Oe("p2p")),st(sl,Oe("p2p-websocket-star"),Oe("p2p")),st(Jd,Oe("p2p-websocket-star")),st(sl,Oe("p2p-websocket-star"))),M$=dn(st(oA,Oe("p2p-webrtc-direct"),Oe("p2p")),st(sA,Oe("p2p-webrtc-direct"),Oe("p2p")),st(oA,Oe("p2p-webrtc-direct")),st(sA,Oe("p2p-webrtc-direct"))),al=dn(nA,iA,oA,sA,B$,M$,h2,pve,mve,f2,O$,L$),rit=dn(st(al,Oe("p2p-stardust"),Oe("p2p")),st(al,Oe("p2p-stardust"))),d2=dn(st(al,Oe("p2p")),B$,M$,O$,L$,Oe("p2p")),N$=dn(st(d2,Oe("p2p-circuit"),d2),st(d2,Oe("p2p-circuit")),st(Oe("p2p-circuit"),d2),st(al,Oe("p2p-circuit")),st(Oe("p2p-circuit"),al),Oe("p2p-circuit")),U$=()=>dn(st(N$,U$),N$),ol=U$(),aA=dn(st(ol,d2,ol),st(d2,ol),st(ol,d2),ol,d2);var nit=dn(st(ol,Oe("webrtc"),Oe("p2p")),st(ol,Oe("webrtc")),st(al,Oe("webrtc"),Oe("p2p")),st(al,Oe("webrtc")),Oe("webrtc"));function F$(r){function e(t){let n;try{n=Br(t)}catch{return!1}let i=r(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function st(...r){function e(t){if(t.length<r.length)return null;let n=t;return r.some(i=>(n=typeof i=="function"?i().partialMatch(t):i.partialMatch(t),Array.isArray(n)&&(t=n),n===null)),n}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:F$(e),partialMatch:e}}function dn(...r){function e(n){let i=null;return r.some(o=>{let s=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return s!=null?(i=s,!0):!1}),i}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:F$(e),partialMatch:e}}function Oe(r){let e=r;function t(i){let o;try{o=Br(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:n}}var G$=L(Em(),1);var xm=/^\/(ip[fn]s)\/([^/?#]+)/,H$=1,W$=2,Y$=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/;var Ive=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function ef(r){try{return Z$(r)?!!Lt.parse(r):r instanceof Uint8Array?!!Lt.decode(r):!!Lt.asCID(r)}catch{return!1}}function X$(r,e,t=H$,n=W$){let i=J$(r);if(i===!1)return!1;let o=i.match(e);if(o==null||o[t]!=="ipfs")return!1;let s=o[n];return s!=null&&e===Y$&&(s=s.toLowerCase()),ef(s)}function Q$(r,e,t=H$,n=W$){let i=J$(r);if(i===!1)return!1;let o=i.match(e);if(o==null||o[t]!=="ipns")return!1;let s=o[n];if(s!=null&&e===Y$){if(s=s.toLowerCase(),ef(s))return!0;try{!s.includes(".")&&s.includes("-")&&(s=s.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:a}=new G$.URL(`http://${s}`);return Ive.test(a)}catch{return!1}}return!0}function Z$(r){return typeof r=="string"}function J$(r){return r instanceof Uint8Array?Nn(r,"base58btc"):Z$(r)?r:!1}var Sm=r=>X$(r,xm)||Q$(r,xm);var eK=r=>X$(r,xm),Tm=r=>Q$(r,xm);var dA=require("crypto");var tK="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ave=128,cl,tf,Cve=r=>{!cl||cl.length<r?(cl=Buffer.allocUnsafe(r*Ave),(0,dA.randomFillSync)(cl),tf=0):tf+r>cl.length&&((0,dA.randomFillSync)(cl),tf=0),tf+=r};var rf=(r=21)=>{Cve(r-=0);let e="";for(let t=tf-r;t<tf;t++)e+=tK[cl[t]&63];return e};function ie(r,e="utf8"){let t=hm[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ac="/",rK=new TextEncoder().encode(Ac),Im=rK[0],Re=class r{constructor(e,t){if(typeof e=="string")this._buf=oe(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Im)throw new Error("Invalid key")}toString(e="utf8"){return ie(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new r(e.join(Ac))}static random(){return new r(rf().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new r(e):typeof e.uint8Array=="function"?new r(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=rK),this._buf[0]!==Im){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Im,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Im;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return r.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Ac).slice(1)}type(){return Rve(this.baseNamespace())}name(){return kve(this.baseNamespace())}instance(e){return new r(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Ac)||(e+=Ac),e+=this.type(),new r(e)}parent(){let e=this.list();return e.length===1?new r(Ac):new r(e.slice(0,-1).join(Ac))}child(e){return this.toString()===Ac?e:e.toString()===Ac?this:new r(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return r.withNamespaces([...this.namespaces(),...Pve(e.map(t=>t.namespaces()))])}};function Rve(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function kve(r){let e=r.split(":");return e[e.length-1]}function Pve(r){return[].concat(...r)}var Am=L(fe(),1);var oK=L(Dn(),1),sK=L(va(),1);var Dve=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;It.nanosecond=It.ns=1/1e6;It.\u00B5s=It.\u03BCs=It.us=It.microsecond=1/1e3;It.millisecond=It.ms=It[""]=1;It.second=It.sec=It.s=It.ms*1e3;It.minute=It.min=It.m=It.s*60;It.hour=It.hr=It.h=It.m*60;It.day=It.d=It.h*24;It.week=It.wk=It.w=It.d*7;It.month=It.b=It.d*(365.25/12);It.year=It.yr=It.y=It.d*365.25;function It(r="",e="ms"){var t=null;r=(r+"").replace(/(\d)[,_](\d)/g,"$1$2");var n=r[0]==="-";return r.replace(Dve,function(i,o,s){s=iK(s),s&&(t=(t||0)+Math.abs(parseFloat(o,10))*s)}),t&&t/(iK(e)||1)*(n?-1:1)}function iK(r){return It[r]||It[r.toLowerCase().replace(/s$/,"")]}var p2=It;var ul=class r extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=r.code}};ul.code="ERR_TIMEOUT";function J(r,e){return(...t)=>{let n=t[e??t.length-1];if(!n||!n.timeout)return r(...t);let i=typeof n.timeout=="string"?p2(n.timeout):n.timeout,o=new oK.TimeoutController(i);n.signal=(0,sK.anySignal)([n.signal,o.signal]);let s=r(...t),a=new Promise((l,d)=>{o.signal.addEventListener("abort",()=>{d(new ul)})}),c=Date.now(),u=()=>{if(o.signal.aborted)throw new ul;if(Date.now()-c>i)throw o.abort(),new ul};return s[Symbol.asyncIterator]?async function*(){let l=s[Symbol.asyncIterator]();try{for(;;){let{value:d,done:h}=await Promise.race([l.next(),a]);if(h)break;u(),yield d}}catch(d){throw u(),d}finally{o.clear(),l.return&&l.return()}}():(async()=>{try{let l=await Promise.race([s,a]);return u(),l}catch(l){throw u(),l}finally{o.clear()}})()}}var hA=L(fe(),1),aK="/ipfs/";function Cc(r){if(r instanceof Uint8Array)try{r=$.decode(r)}catch(i){throw(0,hA.default)(i,"ERR_INVALID_CID")}let e=$.asCID(r);if(e)return{cid:e,path:void 0};r=r.toString(),r.startsWith(aK)&&(r=r.substring(aK.length));let t=r.split("/"),n;try{e=$.parse(t.shift()||"")}catch(i){throw(0,hA.default)(i,"ERR_INVALID_CID")}return t.length&&(n=`/${t.join("/")}`),{cid:e,path:n}}var Nve="ERR_BAD_PATH",Cm="This command must be run in online mode. Try running 'ipfs daemon' first.",zh=new Re("/local/filesroot"),cK=262144;var uK=r=>{if($.asCID(r))return`/ipfs/${r}`;let t=r.toString();try{return`/ipfs/${$.parse(t)}`}catch{}if(Sm(t))return t;throw(0,Am.default)(new Error(`invalid path: ${r}`),Nve)},nf=r=>r instanceof Uint8Array?$.decode(r).toString():(r=r.toString(),r.indexOf("/ipfs/")===0&&(r=r.substring(6)),r.charAt(r.length-1)==="/"&&(r=r.substring(0,r.length-1)),r),m2=async function(r,e,t,n={}){let{cid:i,path:o}=Cc(t);o&&(n.path=o);let s=i,a=n.path||"";if(a.startsWith("/")&&(a=a.substring(1)),n.path)try{for await(let{value:c,remainderPath:u}of g2(i,n.path,e,r,{signal:n.signal})){if(!$.asCID(c))break;a=u,s=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${a.split("/")[0]}" under ${s}`,c.code="ERR_NO_LINK"),c}return{cid:s,remainderPath:a||""}},pA=r=>{if(r.type!=="file"&&r.type!=="directory"&&r.type!=="raw")throw new Error(`Unknown node type '${r.type}'`);let e={cid:r.cid,path:r.path,name:r.name,size:r.size,type:"file"};return r.type==="directory"&&(e.type="dir"),r.type==="file"&&(e.size=r.unixfs.fileSize()),(r.type==="file"||r.type==="directory")&&(e.mode=r.unixfs.mode,r.unixfs.mtime!==void 0&&(e.mtime=r.unixfs.mtime)),e},lK=J(async(r,e)=>await r),g2=async function*(r,e,t,n,i){let o=async u=>{let l=await t.getCodec(u.code),d=await n.blocks.get(u,i);return l.decode(d)},s=e.split("/").filter(Boolean),a=await o(r),c=r;for(;s.length;){let u=s.shift();if(!u)throw(0,Am.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(r.code===St&&Array.isArray(a.Links)){let l=a.Links.find(d=>d.Name===u);if(l){yield{value:l.Hash,remainderPath:s.join("/")},a=await o(l.Hash),c=l.Hash;continue}}if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:s.join("/")};else throw(0,Am.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");$.asCID(a)&&(c=a,a=await o(a))}yield{value:a,remainderPath:""}};var y2=class r{static create({start:e,stop:t}){return new r(e,t)}static async start(e,t){let{state:n,activate:i}=e;switch(n.status){case"stopped":try{let o=i(t);e.state={status:"starting",ready:o};let s=await o;return e.state={status:"started",value:s},s}catch(o){throw e.state={status:"stopped"},o}case"starting":throw new Oh;case"started":throw new Lh;case"stopping":return await n.ready,await r.start(e,t);default:return r.panic(e)}}static async stop(e){let{state:t,deactivate:n}=e;switch(t.status){case"stopped":break;case"starting":{try{await t.ready}catch{}return await r.stop(e)}case"stopping":return await t.ready;case"started":{n&&await n(t.value),e.state={status:"stopped"};break}default:r.panic(t)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},t){switch(e.status){case"started":return e.value;case"starting":return await lK(e.ready,t);default:throw new nl}}static panic({state:e}){let t=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${t}, should never happen if you see this please report a bug`)}constructor(e,t){this.activate=e,this.deactivate=t,this.state={status:"stopped"}}async use(e){return await r.use(this,e)}try(){return r.try(this)}};function dK({network:r,preload:e,peerId:t,keychain:n,repo:i,ipns:o,mfsPreload:s,print:a,hashers:c,options:u}){return async()=>{let{libp2p:d}=await y2.start(r,{peerId:t,repo:i,print:a,hashers:c,options:u});await Promise.all([o.startOnline({keychain:n,libp2p:d,peerId:t,repo:i}),e.start(),s.start()])}}function fK({network:r,preload:e,ipns:t,repo:n,mfsPreload:i}){return async()=>{await Promise.all([e.stop(),t.stop(),i.stop()]),await y2.stop(r),await n.close()}}var hK=L(require("dns"),1);var gA=L(fe(),1),pK=require("util"),Ove=32;function mK(r,e){let t=!e.recursive,n=Ove;return t&&(n=void 0),gK(r,n)}async function gK(r,e){if(e===0)throw(0,gA.default)(new Error("recursion limit exceeded"),"ERR_DNSLINK_RECURSION_LIMIT");let t;try{t=await mA(r)}catch(s){if(s.code!=="ENOTFOUND"&&s.code!=="ERR_DNSLINK_NOT_FOUND"&&s.code!=="ENODATA")throw s;if(r.startsWith("_dnslink."))t=await mA(r.replace("_dnslink.",""));else{let a=`_dnslink.${r}`;t=await mA(a)}}let n=t.replace("dnslink=",""),i=n.split("/")[2];return ef(i)||!e?n:gK(i,e-1)}async function mA(r){let e=/^dnslink=.+$/,n=(await(0,pK.promisify)(hK.default.resolveTxt)(r)).reduce((i,o)=>i.concat(o),[]).filter(i=>e.test(i));if(n.length===0)throw(0,gA.default)(new Error(`No dnslink records found for domain: ${r}`),"ERR_DNSLINK_NOT_FOUND");return n[0]}function Lve(r){return r.endsWith(".eth")&&(r=r.replace(/.eth$/,".eth.link")),r}function yK(){return J(async(e,t={recursive:!0})=>{if(typeof e!="string")throw new Error("Invalid arguments, domain must be a string");return e=Lve(e),mK(e,t)})}function wK({network:r}){return()=>{let e=r.try();return e!=null&&!!e.libp2p.isStarted()}}var yA=Symbol.for("@libp2p/peer-id");function Mi(r){return r!=null&&!!r[yA]}var of=class of extends Error{constructor(t="The operation was aborted"){super(t);F(this,"code");F(this,"type");this.code=of.code,this.type=of.type}};F(of,"code","ABORT_ERR"),F(of,"type","aborted");var Rc=of,X=class extends Error{constructor(t,n,i){super(t);F(this,"code");F(this,"props");this.code=n,this.name=(i==null?void 0:i.name)??"CodeError",this.props=i??{}}};function ct(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Bve=Symbol.for("nodejs.util.inspect.custom"),bK=Object.values(vc).map(r=>r.decoder).reduce((r,e)=>r.or(e),vc.identity.decoder),vK=114,wA=36,bA=37,_K,qh=class{constructor(e){F(this,"type");F(this,"multihash");F(this,"privateKey");F(this,"publicKey");F(this,"string");F(this,_K,!0);this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=nt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return $.createV1(vK,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return ct(this.multihash.bytes,e);if(typeof e=="string")return Be(e).equals(this);if(((t=e==null?void 0:e.multihash)==null?void 0:t.bytes)!=null)return ct(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[(_K=yA,Bve)](){return`PeerId(${this.toString()})`}},ll=class extends qh{constructor(t){super({...t,type:"RSA"});F(this,"type","RSA");F(this,"publicKey");this.publicKey=t.publicKey}},dl=class extends qh{constructor(t){super({...t,type:"Ed25519"});F(this,"type","Ed25519");F(this,"publicKey");this.publicKey=t.multihash.digest}},fl=class extends qh{constructor(t){super({...t,type:"secp256k1"});F(this,"type","secp256k1");F(this,"publicKey");this.publicKey=t.multihash.digest}};function fn(r){if(r.type==="RSA")return new ll(r);if(r.type==="Ed25519")return new dl(r);if(r.type==="secp256k1")return new fl(r);throw new X("Not a PeerId","ERR_INVALID_PARAMETERS")}function Be(r,e){if(e=e??bK,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=Jr(nt.decode(`z${r}`));return r.startsWith("12D")?new dl({multihash:t}):r.startsWith("16U")?new fl({multihash:t}):new ll({multihash:t})}return Mr(bK.decode(r))}function Mr(r){try{let e=Jr(r);if(e.code===bn.code){if(e.digest.length===wA)return new dl({multihash:e});if(e.digest.length===bA)return new fl({multihash:e})}if(e.code===ot.code)return new ll({multihash:e})}catch{return Mve($.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function Mve(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==vK)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===ot.code)return new ll({multihash:r.multihash});if(e.code===bn.code){if(e.digest.length===wA)return new dl({multihash:r.multihash});if(e.digest.length===bA)return new fl({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Sr(r,e){return r.length===wA?new dl({multihash:c1(bn.code,r),privateKey:e}):r.length===bA?new fl({multihash:c1(bn.code,r),privateKey:e}):new ll({multihash:await ot.digest(r),publicKey:r,privateKey:e})}function EK({repo:r,codecs:e,bases:t,name:n}){async function i(o,s={}){if(!Sm(o))throw new Error("invalid argument "+o);if(Tm(o))for await(let _ of n.resolve(o,s))o=_;let[,a,c,...u]=o.split("/"),l=s.cidBase?await t.getBase(s.cidBase):void 0,d=Uve(c);if(u.length===0){let _=l?l.encoder.encode(d):c;return`/${a}/${_}`}let h=$.decode(d);o=u.join("/");let f=g2(h,o,e,r,s),m=h,w=o;for await(let _ of f)$.asCID(_.value)&&(m=_.value,w=_.remainderPath);return`/ipfs/${m.toString(l&&l.encoder)}${w?"/"+w:""}`}return J(i)}function Uve(r){try{return Be(r).toBytes()}catch{return $.parse(r).bytes}}async function _r(r){let e;for await(let t of r)e=t;return e}function xK({addAll:r}){return(e,t={})=>{let n,i=$.asCID(e);return i?n=r([{cid:i,...t}],t):n=r([{path:e.toString(),...t}],t),_r(n)}}var sf=L(fe(),1);function Fve(r){return Symbol.iterator in r}function Vve(r){return Symbol.asyncIterator in r}function SK(r){return $.asCID(r)!=null}async function*l1(r){if(r==null)throw(0,sf.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");let e=$.asCID(r);if(e){yield Ui({cid:e});return}if(r instanceof String||typeof r=="string"){yield Ui({path:r});return}if(r.cid!=null||r.path!=null)return yield Ui(r);if(Fve(r)){let t=r[Symbol.iterator](),n=t.next();if(n.done)return t;if(SK(n.value)){yield Ui({cid:n.value});for(let i of t)yield Ui({cid:i});return}if(n.value instanceof String||typeof n.value=="string"){yield Ui({path:n.value});for(let i of t)yield Ui({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield Ui(n.value);for(let i of t)yield Ui(i);return}throw(0,sf.default)(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}if(Vve(r)){let t=r[Symbol.asyncIterator](),n=await t.next();if(n.done)return t;if(SK(n.value)){yield Ui({cid:n.value});for await(let i of t)yield Ui({cid:i});return}if(n.value instanceof String||typeof n.value=="string"){yield Ui({path:n.value});for await(let i of t)yield Ui({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield Ui(n.value);for await(let i of t)yield Ui(i);return}throw(0,sf.default)(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}throw(0,sf.default)(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}function Ui(r){let e=r.cid||`${r.path}`;if(!e)throw(0,sf.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let t={path:e,recursive:r.recursive!==!1};return r.metadata!=null&&(t.metadata=r.metadata),t}var Mt={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function TK({repo:r,codecs:e}){async function*t(n,i={}){let o=async function*(){for await(let{path:c,recursive:u,metadata:l}of l1(n)){let{cid:d}=await m2(r,e,c),{reason:h}=await r.pins.isPinnedWithType(d,[Mt.recursive,Mt.direct]);if(h==="recursive"&&!u)throw new Error(`${d} already pinned recursively`);u?await r.pins.pinRecursively(d,{metadata:l}):await r.pins.pinDirectly(d,{metadata:l}),yield d}};if(!!!i.lock){yield*o();return}let a=await r.gcLock.readLock();try{yield*o()}finally{a()}}return J(t)}var _A=L(fe(),1);function $h(r,e,t){let n={type:r,cid:e};return t&&(n.metadata=t),n}function IK({repo:r,codecs:e}){async function*t(n={}){let i=Mt.all;if(n.type&&(i=n.type,!Object.keys(Mt).includes(i)))throw(0,_A.default)(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(n.paths){let o=!1;for await(let{path:s}of l1(n.paths)){let{cid:a}=await m2(r,e,s),{reason:c,pinned:u,parent:l,metadata:d}=await r.pins.isPinnedWithType(a,i);if(!u)throw(0,_A.default)(new Error(`path '${s}' is not pinned`),"ERR_NOT_PINNED");switch(c){case Mt.direct:case Mt.recursive:o=!0,yield $h(c,a,d);break;default:o=!0,yield $h(`${Mt.indirect} through ${l}`,a,d)}}if(!o)throw new Error("No match found");return}if(i===Mt.recursive||i===Mt.all)for await(let{cid:o,metadata:s}of r.pins.recursiveKeys())yield $h(Mt.recursive,o,s);if(i===Mt.indirect||i===Mt.all)for await(let o of r.pins.indirectKeys(n))yield $h(Mt.indirect,o);if(i===Mt.direct||i===Mt.all)for await(let{cid:o,metadata:s}of r.pins.directKeys())yield $h(Mt.direct,o,s)}return J(t)}function AK({rmAll:r}){async function e(t,n={}){let i=await _r(r([{path:t,...n}],n));if(!i)throw new Error("CID expected");return i}return e}function CK({repo:r,codecs:e}){async function*t(n,i={}){let o=await r.gcLock.readLock();try{for await(let{path:s,recursive:a}of l1(n)){let{cid:c}=await m2(r,e,s),{pinned:u,reason:l}=await r.pins.isPinnedWithType(c,Mt.all);if(!u)throw new Error(`${c} is not pinned`);switch(l){case Mt.recursive:if(!a)throw new Error(`${c} is pinned recursively`);await r.pins.unpin(c),yield c;break;case Mt.direct:await r.pins.unpin(c),yield c;break;default:throw new Error(`${c} is pinned indirectly under ${l}`)}}}finally{o()}}return J(t)}var Rm=class{constructor({codecs:e,repo:t}){let n=TK({codecs:e,repo:t});this.addAll=n,this.add=xK({addAll:n});let i=CK({codecs:e,repo:t});this.rmAll=i,this.rm=AK({rmAll:i}),this.ls=IK({codecs:e,repo:t}),this.remote={add:(o,s={})=>Promise.reject(new Error("Not implemented")),ls:async function*(o,s={}){return Promise.reject(new Error("Not implemented"))},rm:(o,s={})=>Promise.reject(new Error("Not implemented")),rmAll:(o,s={})=>Promise.reject(new Error("Not implemented")),service:{add:(o,s)=>Promise.reject(new Error("Not implemented")),rm:(o,s={})=>Promise.reject(new Error("Not implemented")),ls:(o={})=>Promise.reject(new Error("Not implemented"))}}}};var IW=L(fe(),1);var vn={};it(vn,{abortedError:()=>zve,dbDeleteFailedError:()=>jh,dbOpenFailedError:()=>Kh,dbWriteFailedError:()=>Gh,notFoundError:()=>_n});var af=L(fe(),1);function Kh(r){return r=r||new Error("Cannot open database"),(0,af.default)(r,"ERR_DB_OPEN_FAILED")}function jh(r){return r=r||new Error("Delete failed"),(0,af.default)(r,"ERR_DB_DELETE_FAILED")}function Gh(r){return r=r||new Error("Write failed"),(0,af.default)(r,"ERR_DB_WRITE_FAILED")}function _n(r){return r=r||new Error("Not Found"),(0,af.default)(r,"ERR_NOT_FOUND")}function zve(r){return r=r||new Error("Aborted"),(0,af.default)(r,"ERR_ABORTED")}var ks=L(fe(),1);var pW=L(RK(),1);var Cl={};it(Cl,{generateEphemeralKeyPair:()=>aG,generateKeyPair:()=>If,generateKeyPairFromSeed:()=>oTe,importKey:()=>b1,keyStretcher:()=>pG,keysPBM:()=>gf,marshalPrivateKey:()=>bC,marshalPublicKey:()=>l6,supportedKeys:()=>w1,unmarshalPrivateKey:()=>Xn,unmarshalPublicKey:()=>ao});var t1t=L(_2(),1),r1t=L(KA(),1);var sg=L(Kt(),1);var iC={};it(iC,{Ed25519PrivateKey:()=>xl,Ed25519PublicKey:()=>e6,generateKeyPair:()=>TSe,generateKeyPairFromSeed:()=>nC,unmarshalEd25519PrivateKey:()=>xSe,unmarshalEd25519PublicKey:()=>SSe});var wl=L(require("crypto"),1),qj=require("util");var fSe=(0,qj.promisify)(wl.default.generateKeyPair),bl=32,y1=64,Wm=32,hSe=64;function $j(r){let t=wl.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",x:"",d:ie(r,"base64url"),kty:"OKP"}}).export({format:"jwk"});if(t.x==null||t.x==="")throw new Error("Could not export JWK public key");return oe(t.x,"base64url")}async function Kj(){let r=await fSe("ed25519",{publicKeyEncoding:{type:"spki",format:"jwk"},privateKeyEncoding:{type:"pkcs8",format:"jwk"}}),e=oe(r.privateKey.d,"base64url"),t=oe(r.privateKey.x,"base64url");return{privateKey:Wj(e,t),publicKey:t}}async function jj(r){if(r.length!==Wm)throw new TypeError('"seed" must be 32 bytes in length.');if(!(r instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=$j(r);return{privateKey:Wj(r,e),publicKey:e}}async function Gj(r,e){if(!(r instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');let t,n;if(r.byteLength===y1)t=r.subarray(0,32),n=r.subarray(32);else if(r.byteLength===Wm)t=r.subarray(0,32),n=$j(t);else throw new TypeError('"key" must be 64 or 32 bytes in length.');let i=wl.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",d:ie(t,"base64url"),x:ie(n,"base64url"),kty:"OKP"}});return wl.default.sign(null,e,i)}async function Hj(r,e,t){if(r.byteLength!==bl)throw new TypeError('"key" must be 32 bytes in length.');if(!(r instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');if(e.byteLength!==hSe)throw new TypeError('"sig" must be 64 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"sig" must be a node.js Buffer, or Uint8Array.');let n=wl.default.createPublicKey({format:"jwk",key:{crv:"Ed25519",x:ie(r,"base64url"),kty:"OKP"}});return wl.default.verify(null,t,n,e)}function Wj(r,e){let t=new Uint8Array(y1);for(let n=0;n<Wm;n++)t[n]=r[n],t[Wm+n]=e[n];return t}var _l=L(require("crypto"),1);function Ye(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=c2(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return i2(t)}function Ym(r){let e=(r==null?void 0:r.algorithm)??"aes-128-gcm",t=(r==null?void 0:r.keyLength)??16,n=(r==null?void 0:r.nonceLength)??12,i=(r==null?void 0:r.digest)??"sha256",o=(r==null?void 0:r.saltLength)??16,s=(r==null?void 0:r.iterations)??32767,a=(r==null?void 0:r.algorithmTagLength)??16;async function c(f,m){let w=_l.default.randomBytes(n),_=_l.default.createCipheriv(e,m,w),E=Ye([_.update(f),_.final()]);return Ye([w,E,_.getAuthTag()])}async function u(f,m){let w=_l.default.randomBytes(o);typeof m=="string"&&(m=oe(m));let _=_l.default.pbkdf2Sync(m,w,s,t,i);return Ye([w,await c(Uint8Array.from(f),_)])}async function l(f,m){let w=f.subarray(0,n),_=f.subarray(n,f.length-a),E=f.subarray(_.length+n),S=_l.default.createDecipheriv(e,m,w);return S.setAuthTag(E),Ye([S.update(_),S.final()])}async function d(f,m){let w=f.subarray(0,o),_=f.subarray(o);typeof m=="string"&&(m=oe(m));let E=_l.default.pbkdf2Sync(m,w,s,t,i);return l(_,E)}return{encrypt:u,decrypt:d}}async function hf(r,e){let n=await Ym().encrypt(r,e);return Qu.encode(n)}var gf={};it(gf,{KeyType:()=>Pr,PrivateKey:()=>Ia,PublicKey:()=>Ta});var jA=new Float32Array([-0]),S2=new Uint8Array(jA.buffer);function Xj(r,e,t){jA[0]=r,e[t]=S2[0],e[t+1]=S2[1],e[t+2]=S2[2],e[t+3]=S2[3]}function Qj(r,e){return S2[0]=r[e],S2[1]=r[e+1],S2[2]=r[e+2],S2[3]=r[e+3],jA[0]}var GA=new Float64Array([-0]),vi=new Uint8Array(GA.buffer);function Zj(r,e,t){GA[0]=r,e[t]=vi[0],e[t+1]=vi[1],e[t+2]=vi[2],e[t+3]=vi[3],e[t+4]=vi[4],e[t+5]=vi[5],e[t+6]=vi[6],e[t+7]=vi[7]}function Jj(r,e){return vi[0]=r[e],vi[1]=r[e+1],vi[2]=r[e+2],vi[3]=r[e+3],vi[4]=r[e+4],vi[5]=r[e+5],vi[6]=r[e+6],vi[7]=r[e+7],GA[0]}var mSe=BigInt(Number.MAX_SAFE_INTEGER),gSe=BigInt(Number.MIN_SAFE_INTEGER),Oo=class r{constructor(e,t){F(this,"lo");F(this,"hi");this.lo=e|0,this.hi=t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return vl;if(e<mSe&&e>gSe)return this.fromNumber(Number(e));let t=e<0n;t&&(e=-e);let n=e>>32n,i=e-(n<<32n);return t&&(n=~n|0n,i=~i|0n,++i>eG&&(i=0n,++n>eG&&(n=0n))),new r(Number(i),Number(n))}static fromNumber(e){if(e===0)return vl;let t=e<0;t&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)}static from(e){return typeof e=="number"?r.fromNumber(e):typeof e=="bigint"?r.fromBigInt(e):typeof e=="string"?r.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new r(e.low>>>0,e.high>>>0):vl}},vl=new Oo(0,0);vl.toBigInt=function(){return 0n};vl.zzEncode=vl.zzDecode=function(){return this};vl.length=function(){return 1};var eG=4294967296n;function tG(r){let e=0,t=0;for(let n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function rG(r,e,t){if(t-e<1)return"";let i,o=[],s=0,a;for(;e<t;)a=r[e++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|r[e++]&63:a>239&&a<365?(a=((a&7)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(r[e++]&63)<<6|r[e++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function HA(r,e,t){let n=t,i,o;for(let s=0;s<r.length;++s)i=r.charCodeAt(s),i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&((o=r.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128);return t-n}function Sa(r,e){return RangeError(`index out of range: ${r.pos} + ${e??1} > ${r.len}`)}function Xm(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}var WA=class{constructor(e){F(this,"buf");F(this,"pos");F(this,"len");F(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Sa(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Sa(this,4);return Xm(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Sa(this,4);return Xm(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Sa(this,4);let e=Qj(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Sa(this,4);let e=Jj(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Sa(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){let e=this.bytes();return rG(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Sa(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Sa(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new Oo(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Sa(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Sa(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Sa(this,8);let e=Xm(this.buf,this.pos+=4),t=Xm(this.buf,this.pos+=4);return new Oo(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=KI(this.buf,this.pos);return this.pos+=Gn(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function YA(r){return new WA(r instanceof Uint8Array?r:r.subarray())}function kt(r,e,t){let n=YA(r);return e.decode(n,void 0,t)}function XA(r){let e=r??8192,t=e>>>1,n,i=e;return function(s){if(s<1||s>t)return oo(s);i+s>e&&(n=oo(e),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var El=class{constructor(e,t,n){F(this,"fn");F(this,"len");F(this,"next");F(this,"val");this.fn=e,this.len=t,this.next=void 0,this.val=n}};function QA(){}var JA=class{constructor(e){F(this,"head");F(this,"tail");F(this,"len");F(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},ySe=XA();function wSe(r){return globalThis.Buffer!=null?oo(r):ySe(r)}var Jh=class{constructor(){F(this,"len");F(this,"head");F(this,"tail");F(this,"states");this.len=0,this.head=new El(QA,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new El(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new eC((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Qm,10,Oo.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let t=Oo.fromBigInt(e);return this._push(Qm,t.length(),t)}uint64Number(e){return this._push($I,Gn(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let t=Oo.fromBigInt(e).zzEncode();return this._push(Qm,t.length(),t)}sint64Number(e){let t=Oo.fromNumber(e).zzEncode();return this._push(Qm,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(ZA,1,e?1:0)}fixed32(e){return this._push(Zh,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let t=Oo.fromBigInt(e);return this._push(Zh,4,t.lo)._push(Zh,4,t.hi)}fixed64Number(e){let t=Oo.fromNumber(e);return this._push(Zh,4,t.lo)._push(Zh,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(Xj,4,e)}double(e){return this._push(Zj,8,e)}bytes(e){let t=e.length>>>0;return t===0?this._push(ZA,1,0):this.uint32(t)._push(_Se,t,e)}string(e){let t=tG(e);return t!==0?this.uint32(t)._push(HA,t,e):this._push(ZA,1,0)}fork(){return this.states=new JA(this),this.head=this.tail=new El(QA,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new El(QA,0,0),this.len=0),this}ldelim(){let e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next,t=wSe(this.len),n=0;for(;e!=null;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}};function ZA(r,e,t){e[t]=r&255}function bSe(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}var eC=class extends El{constructor(t,n){super(bSe,t,n);F(this,"next");this.next=void 0}};function Qm(r,e,t){for(;r.hi!==0;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}function Zh(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function _Se(r,e,t){e.set(r,t)}globalThis.Buffer!=null&&(Jh.prototype.bytes=function(r){let e=r.length>>>0;return this.uint32(e),e>0&&this._push(vSe,e,r),this},Jh.prototype.string=function(r){let e=globalThis.Buffer.byteLength(r);return this.uint32(e),e>0&&this._push(ESe,e,r),this});function vSe(r,e,t){e.set(r,t)}function ESe(r,e,t){r.length<40?HA(r,e,t):e.utf8Write!=null?e.utf8Write(r,t):e.set(fr(r),t)}function tC(){return new Jh}function Pt(r,e){let t=tC();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var pf;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(pf||(pf={}));function Zm(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function mf(r){function e(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}let t=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return Zm("enum",pf.VARINT,t,n)}function Dt(r,e){return Zm("message",pf.LENGTH_DELIMITED,r,e)}var Pr;(function(r){r.RSA="RSA",r.Ed25519="Ed25519",r.Secp256k1="Secp256k1"})(Pr||(Pr={}));var rC;(function(r){r[r.RSA=0]="RSA",r[r.Ed25519=1]="Ed25519",r[r.Secp256k1=2]="Secp256k1"})(rC||(rC={}));(function(r){r.codec=()=>mf(rC)})(Pr||(Pr={}));var Ta;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),Pr.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.Type=Pr.codec().decode(t);break;case 2:i.Data=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Ta||(Ta={}));var Ia;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),Pr.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.Type=Pr.codec().decode(t);break;case 2:i.Data=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Ia||(Ia={}));var e6=class{constructor(e){F(this,"_key");this._key=yf(e,bl)}async verify(e,t){return Hj(this._key,t,e)}marshal(){return this._key}get bytes(){return Ta.encode({Type:Pr.Ed25519,Data:this.marshal()}).subarray()}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}},xl=class{constructor(e,t){F(this,"_key");F(this,"_publicKey");this._key=yf(e,y1),this._publicKey=yf(t,bl)}async sign(e){return Gj(this._key,e)}get public(){return new e6(this._publicKey)}marshal(){return this._key}get bytes(){return Ia.encode({Type:Pr.Ed25519,Data:this.marshal()}).subarray()}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}async id(){let e=bn.digest(this.public.bytes);return nt.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if(t==="libp2p-key")return hf(this.bytes,e);throw new X(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function xSe(r){if(r.length>y1){r=yf(r,y1+bl);let n=r.subarray(0,y1),i=r.subarray(y1,r.length);return new xl(n,i)}r=yf(r,y1);let e=r.subarray(0,y1),t=r.subarray(bl);return new xl(e,t)}function SSe(r){return r=yf(r,bl),new e6(r)}async function TSe(){let{privateKey:r,publicKey:e}=await Kj();return new xl(r,e)}async function nC(r){let{privateKey:e,publicKey:t}=await jj(r);return new xl(e,t)}function yf(r,e){if(r=Uint8Array.from(r??[]),r.length!==e)throw new X(`Key must be a Uint8Array of length ${e}, got ${r.length}`,"ERR_INVALID_KEY_TYPE");return r}var iG=L(require("crypto"),1);var oG={"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"},ISe=Object.keys(oG),ASe=ISe.join(" / ");async function sG(r){if(r!=="P-256"&&r!=="P-384"&&r!=="P-521")throw new X(`Unknown curve: ${r}. Must be ${ASe}`,"ERR_INVALID_CURVE");let e=iG.default.createECDH(oG[r]);return e.generateKeys(),{key:e.getPublicKey(),async genSharedKey(t,n){return n!=null&&e.setPrivateKey(n.private),e.computeSecret(t)}}}var aG=sG;async function cG(r,e){let t=Qu.decode(r);return Ym().decrypt(t,e)}var lG=L(require("crypto"),1);var uG={SHA1:20,SHA256:32,SHA512:64};async function dG(r,e){return{async digest(n){let i=lG.default.createHmac(r.toLowerCase(),e);return i.update(n),i.digest()},length:uG[r]}}var hG={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,keySize:32}};async function pG(r,e,t){let n=hG[r];if(n==null){let S=Object.keys(hG).join(" / ");throw new X(`unknown cipher type '${r}'. Must be ${S}`,"ERR_INVALID_CIPHER_TYPE")}if(e==null)throw new X("missing hash type","ERR_MISSING_HASH_TYPE");let i=n.keySize,o=n.ivSize,s=20,a=oe("key expansion"),c=2*(o+i+s),u=await dG(e,t),l=await u.digest(a),d=[],h=0;for(;h<c;){let S=await u.digest(Ye([l,a])),p=S.length;h+p>c&&(p=c-h),d.push(S),h+=p,l=await u.digest(l)}let f=c/2,m=Ye(d),w=m.subarray(0,f),_=m.subarray(f,c),E=S=>({iv:S.subarray(0,o),cipherKey:S.subarray(o,o+i),macKey:S.subarray(o+i)});return{k1:E(w),k2:E(_)}}var pC={};it(pC,{RsaPrivateKey:()=>Tf,RsaPublicKey:()=>a6,fromJwk:()=>JSe,generateKeyPair:()=>eTe,unmarshalRsaPrivateKey:()=>QSe,unmarshalRsaPublicKey:()=>ZSe});var s6=L(Kt(),1);var $at=L(bG(),1);var Al=L(require("crypto"),1),LG=require("util");var RSe=L(require("crypto"),1);var Qt=BigInt(0),Nr=BigInt(1),I2=BigInt(2),n6=BigInt(3),_G=BigInt(8),tn=Object.freeze({a:Qt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Nr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),vG=(r,e)=>(r+e/I2)/e,Jm={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(r){let{n:e}=tn,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Nr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,s=BigInt("0x100000000000000000000000000000000"),a=vG(o*r,e),c=vG(-n*r,e),u=Me(r-a*t-c*i,e),l=Me(-a*n-c*o,e),d=u>s,h=l>s;if(d&&(u=e-u),h&&(l=e-l),u>s||l>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+r);return{k1neg:d,k1:u,k2neg:h,k2:l}}},Aa=32,vf=32,kSe=32,EG=Aa+1,xG=2*Aa+1;function SG(r){let{a:e,b:t}=tn,n=Me(r*r),i=Me(n*r);return Me(i+e*r+t)}var eg=tn.a===Qt,ng=class extends Error{constructor(e){super(e)}};function TG(r){if(!(r instanceof zi))throw new TypeError("JacobianPoint expected")}var zi=class r{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof Gr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Gr.ZERO)?r.ZERO:new r(e.x,e.y,Nr)}static toAffineBatch(e){let t=LSe(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(t[i]))}static normalizeZ(e){return r.toAffineBatch(e).map(r.fromAffine)}equals(e){TG(e);let{x:t,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=Me(i*i),u=Me(a*a),l=Me(t*u),d=Me(o*c),h=Me(Me(n*a)*u),f=Me(Me(s*i)*c);return l===d&&h===f}negate(){return new r(this.x,Me(-this.y),this.z)}double(){let{x:e,y:t,z:n}=this,i=Me(e*e),o=Me(t*t),s=Me(o*o),a=e+o,c=Me(I2*(Me(a*a)-i-s)),u=Me(n6*i),l=Me(u*u),d=Me(l-I2*c),h=Me(u*(c-d)-_G*s),f=Me(I2*t*n);return new r(d,h,f)}add(e){TG(e);let{x:t,y:n,z:i}=this,{x:o,y:s,z:a}=e;if(o===Qt||s===Qt)return this;if(t===Qt||n===Qt)return e;let c=Me(i*i),u=Me(a*a),l=Me(t*u),d=Me(o*c),h=Me(Me(n*a)*u),f=Me(Me(s*i)*c),m=Me(d-l),w=Me(f-h);if(m===Qt)return w===Qt?this.double():r.ZERO;let _=Me(m*m),E=Me(m*_),S=Me(l*_),p=Me(w*w-E-I2*S),g=Me(w*(S-p)-h*E),y=Me(i*a*m);return new r(p,g,y)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let t=r.ZERO;if(typeof e=="bigint"&&e===Qt)return t;let n=CG(e);if(n===Nr)return this;if(!eg){let d=t,h=this;for(;n>Qt;)n&Nr&&(d=d.add(h)),h=h.double(),n>>=Nr;return d}let{k1neg:i,k1:o,k2neg:s,k2:a}=Jm.splitScalar(n),c=t,u=t,l=this;for(;o>Qt||a>Qt;)o&Nr&&(c=c.add(l)),a&Nr&&(u=u.add(l)),l=l.double(),o>>=Nr,a>>=Nr;return i&&(c=c.negate()),s&&(u=u.negate()),u=new r(Me(u.x*Jm.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let t=eg?128/e+1:256/e+1,n=[],i=this,o=i;for(let s=0;s<t;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,t){!t&&this.equals(r.BASE)&&(t=Gr.BASE);let n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&cC.get(t);i||(i=this.precomputeWindow(n),t&&n!==1&&(i=r.normalizeZ(i),cC.set(t,i)));let o=r.ZERO,s=r.BASE,a=1+(eg?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let h=0;h<a;h++){let f=h*c,m=Number(e&u);e>>=d,m>c&&(m-=l,e+=Nr);let w=f,_=f+Math.abs(m)-1,E=h%2!==0,S=m<0;m===0?s=s.add(tg(E,i[w])):o=o.add(tg(S,i[_]))}return{p:o,f:s}}multiply(e,t){let n=CG(e),i,o;if(eg){let{k1neg:s,k1:a,k2neg:c,k2:u}=Jm.splitScalar(n),{p:l,f:d}=this.wNAF(a,t),{p:h,f}=this.wNAF(u,t);l=tg(s,l),h=tg(c,h),h=new r(Me(h.x*Jm.beta),h.y,h.z),i=l.add(h),o=d.add(f)}else{let{p:s,f:a}=this.wNAF(n,t);i=s,o=a}return r.normalizeZ([i,o])[0]}toAffine(e){let{x:t,y:n,z:i}=this,o=this.equals(r.ZERO);e==null&&(e=o?_G:Sf(i));let s=e,a=Me(s*s),c=Me(a*s),u=Me(t*a),l=Me(n*c),d=Me(i*s);if(o)return Gr.ZERO;if(d!==Nr)throw new Error("invZ was invalid");return new Gr(u,l)}};zi.BASE=new zi(tn.Gx,tn.Gy,Nr);zi.ZERO=new zi(Qt,Nr,Qt);function tg(r,e){let t=e.negate();return r?t:e}var cC=new WeakMap,Gr=class r{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,cC.delete(this)}hasEvenY(){return this.y%I2===Qt}static fromCompressedHex(e){let t=e.length===32,n=A2(t?e:e.subarray(1));if(!aC(n))throw new Error("Point is not on curve");let i=SG(n),o=OSe(i),s=(o&Nr)===Nr;t?s&&(o=Me(-o)):(e[0]&1)===1!==s&&(o=Me(-o));let a=new r(n,o);return a.assertValidity(),a}static fromUncompressedHex(e){let t=A2(e.subarray(1,Aa+1)),n=A2(e.subarray(Aa+1,Aa*2+1)),i=new r(t,n);return i.assertValidity(),i}static fromHex(e){let t=xf(e),n=t.length,i=t[0];if(n===Aa)return this.fromCompressedHex(t);if(n===EG&&(i===2||i===3))return this.fromCompressedHex(t);if(n===xG&&i===4)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${EG} compressed bytes or ${xG} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return r.BASE.multiply(og(e))}static fromSignature(e,t,n){let{r:i,s:o}=RG(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=dC(xf(e)),{n:a}=tn,c=n===2||n===3?i+a:i,u=Sf(c,a),l=Me(-s*u,a),d=Me(o*u,a),h=n&1?"03":"02",f=r.fromHex(h+bf(c)),m=r.BASE.multiplyAndAddUnsafe(f,l,d);if(!m)throw new Error("Cannot recover signature: point at infinify");return m.assertValidity(),m}toRawBytes(e=!1){return Tl(this.toHex(e))}toHex(e=!1){let t=bf(this.x);return e?`${this.hasEvenY()?"02":"03"}${t}`:`04${t}${bf(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:t,y:n}=this;if(!aC(t)||!aC(n))throw new Error(e);let i=Me(n*n),o=SG(t);if(Me(i-o)!==Qt)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new r(this.x,Me(-this.y))}double(){return zi.fromAffine(this).double().toAffine()}add(e){return zi.fromAffine(this).add(zi.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return zi.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){let i=zi.fromAffine(this),o=t===Qt||t===Nr||this!==r.BASE?i.multiplyUnsafe(t):i.multiply(t),s=zi.fromAffine(e).multiplyUnsafe(n),a=o.add(s);return a.equals(zi.ZERO)?void 0:a.toAffine()}};Gr.BASE=new Gr(tn.Gx,tn.Gy);Gr.ZERO=new Gr(Qt,Qt);function IG(r){return Number.parseInt(r[0],16)>=8?"00"+r:r}function AG(r){if(r.length<2||r[0]!==2)throw new Error(`Invalid signature integer tag: ${Ef(r)}`);let e=r[1],t=r.subarray(2,e+2);if(!e||t.length!==e)throw new Error("Invalid signature integer: wrong length");if(t[0]===0&&t[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:A2(t),left:r.subarray(e+2)}}function PSe(r){if(r.length<2||r[0]!=48)throw new Error(`Invalid signature tag: ${Ef(r)}`);if(r[1]!==r.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:t}=AG(r.subarray(2)),{data:n,left:i}=AG(t);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ef(i)}`);return{r:e,s:n}}var wf=class r{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){let t=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=t?Ef(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new r(ig(i.slice(0,64)),ig(i.slice(64,128)))}static fromDER(e){let t=e instanceof Uint8Array;if(typeof e!="string"&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=PSe(t?e:Tl(e));return new r(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:t}=this;if(!o6(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!o6(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=tn.n>>Nr;return this.s>e}normalizeS(){return this.hasHighS()?new r(this.r,Me(-this.s,tn.n)):this}toDERRawBytes(){return Tl(this.toDERHex())}toDERHex(){let e=IG(r6(this.s)),t=IG(r6(this.r)),n=e.length/2,i=t.length/2,o=r6(n),s=r6(i);return`30${r6(i+n+4)}02${s}${t}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Tl(this.toCompactHex())}toCompactHex(){return bf(this.r)+bf(this.s)}};function T2(...r){if(!r.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(r.length===1)return r[0];let e=r.reduce((n,i)=>n+i.length,0),t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let o=r[n];t.set(o,i),i+=o.length}return t}var DSe=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ef(r){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let t=0;t<r.length;t++)e+=DSe[r[t]];return e}var NSe=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function bf(r){if(typeof r!="bigint")throw new Error("Expected bigint");if(!(Qt<=r&&r<NSe))throw new Error("Expected number 0 <= n < 2^256");return r.toString(16).padStart(64,"0")}function uC(r){let e=Tl(bf(r));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function r6(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function ig(r){if(typeof r!="string")throw new TypeError("hexToNumber: expected string, got "+typeof r);return BigInt(`0x${r}`)}function Tl(r){if(typeof r!="string")throw new TypeError("hexToBytes: expected string, got "+typeof r);if(r.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+r.length);let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++){let n=t*2,i=r.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[t]=o}return e}function A2(r){return ig(Ef(r))}function xf(r){return r instanceof Uint8Array?Uint8Array.from(r):Tl(r)}function CG(r){if(typeof r=="number"&&Number.isSafeInteger(r)&&r>0)return BigInt(r);if(typeof r=="bigint"&&o6(r))return r;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Me(r,e=tn.P){let t=r%e;return t>=Qt?t:e+t}function Ts(r,e){let{P:t}=tn,n=r;for(;e-- >Qt;)n*=n,n%=t;return n}function OSe(r){let{P:e}=tn,t=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=r*r*r%e,u=c*c*r%e,l=Ts(u,n6)*u%e,d=Ts(l,n6)*u%e,h=Ts(d,I2)*c%e,f=Ts(h,n)*h%e,m=Ts(f,i)*f%e,w=Ts(m,s)*m%e,_=Ts(w,a)*w%e,E=Ts(_,s)*m%e,S=Ts(E,n6)*u%e,p=Ts(S,o)*f%e,g=Ts(p,t)*c%e,y=Ts(g,I2);if(y*y%e!==r)throw new Error("Cannot find square root");return y}function Sf(r,e=tn.P){if(r===Qt||e<=Qt)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Me(r,e),n=e,i=Qt,o=Nr,s=Nr,a=Qt;for(;t!==Qt;){let u=n/t,l=n%t,d=i-s*u,h=o-a*u;n=t,t=l,i=s,o=a,s=d,a=h}if(n!==Nr)throw new Error("invert: does not exist");return Me(i,e)}function LSe(r,e=tn.P){let t=new Array(r.length),n=r.reduce((o,s,a)=>s===Qt?o:(t[a]=o,Me(o*s,e)),Nr),i=Sf(n,e);return r.reduceRight((o,s,a)=>s===Qt?o:(t[a]=Me(o*t[a],e),Me(o*s,e)),i),t}function BSe(r){let e=r.length*8-vf*8,t=A2(r);return e>0?t>>BigInt(e):t}function dC(r,e=!1){let t=BSe(r);if(e)return t;let{n}=tn;return t>=n?t-n:t}var _f,i6,lC=class{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Ca.hmacSha256(this.k,...e)}hmacSync(...e){return i6(this.k,...e)}checkSync(){if(typeof i6!="function")throw new ng("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();t.push(n),e+=this.v.length}return T2(...t)}generateSync(){this.checkSync(),this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();t.push(n),e+=this.v.length}return T2(...t)}};function o6(r){return Qt<r&&r<tn.n}function aC(r){return Qt<r&&r<tn.P}function MSe(r,e,t,n=!0){let{n:i}=tn,o=dC(r,!0);if(!o6(o))return;let s=Sf(o,i),a=Gr.BASE.multiply(o),c=Me(a.x,i);if(c===Qt)return;let u=Me(s*Me(e+t*c,i),i);if(u===Qt)return;let l=new wf(c,u),d=(a.x===l.r?0:2)|Number(a.y&Nr);return n&&l.hasHighS()&&(l=l.normalizeS(),d^=1),{sig:l,recovery:d}}function og(r){let e;if(typeof r=="bigint")e=r;else if(typeof r=="number"&&Number.isSafeInteger(r)&&r>0)e=BigInt(r);else if(typeof r=="string"){if(r.length!==2*vf)throw new Error("Expected 32 bytes of private key");e=ig(r)}else if(r instanceof Uint8Array){if(r.length!==vf)throw new Error("Expected 32 bytes of private key");e=A2(r)}else throw new TypeError("Expected valid private key");if(!o6(e))throw new Error("Expected private key: 0 < key < n");return e}function USe(r){return r instanceof Gr?(r.assertValidity(),r):Gr.fromHex(r)}function RG(r){if(r instanceof wf)return r.assertValidity(),r;try{return wf.fromDER(r)}catch{return wf.fromCompact(r)}}function fC(r,e=!1){return Gr.fromPrivateKey(r).toRawBytes(e)}function kG(r){let e=r.length>Aa?r.slice(0,Aa):r;return A2(e)}function FSe(r){let e=kG(r),t=Me(e,tn.n);return PG(t<Qt?e:t)}function PG(r){return uC(r)}function VSe(r,e,t){if(r==null)throw new Error(`sign: expected valid message hash, not "${r}"`);let n=xf(r),i=og(e),o=[PG(i),FSe(n)];if(t!=null){t===!0&&(t=Ca.randomBytes(Aa));let c=xf(t);if(c.length!==Aa)throw new Error(`sign: Expected ${Aa} bytes of extra data`);o.push(c)}let s=T2(...o),a=kG(n);return{seed:s,m:a,d:i}}function zSe(r,e){let{sig:t,recovery:n}=r,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},e),s=i?t.toDERRawBytes():t.toCompactRawBytes();return o?[s,n]:s}async function DG(r,e,t={}){let{seed:n,m:i,d:o}=VSe(r,e,t.extraEntropy),s=new lC(kSe,vf);await s.reseed(n);let a;for(;!(a=MSe(await s.generate(),i,o,t.canonical));)await s.reseed();return zSe(a,t)}var qSe={strict:!0};function NG(r,e,t,n=qSe){let i;try{i=RG(r),e=xf(e)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=dC(e),c;try{c=USe(t)}catch{return!1}let{n:u}=tn,l=Sf(s,u),d=Me(a*l,u),h=Me(o*l,u),f=Gr.BASE.multiplyAndAddUnsafe(c,d,h);return f?Me(f.x,u)===o:!1}Gr.BASE._setWindowSize(8);var Lo={node:RSe,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var rg={},Ca={bytesToHex:Ef,hexToBytes:Tl,concatBytes:T2,mod:Me,invert:Sf,isValidPrivateKey(r){try{return og(r),!0}catch{return!1}},_bigintTo32Bytes:uC,_normalizePrivateKey:og,hashToPrivateKey:r=>{r=xf(r);let e=vf+8;if(r.length<e||r.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let t=Me(A2(r),tn.n-Nr)+Nr;return uC(t)},randomBytes:(r=32)=>{if(Lo.web)return Lo.web.getRandomValues(new Uint8Array(r));if(Lo.node){let{randomBytes:e}=Lo.node;return Uint8Array.from(e(r))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ca.hashToPrivateKey(Ca.randomBytes(vf+8)),precompute(r=8,e=Gr.BASE){let t=e===Gr.BASE?e:new Gr(e.x,e.y);return t._setWindowSize(r),t.multiply(n6),t},sha256:async(...r)=>{if(Lo.web){let e=await Lo.web.subtle.digest("SHA-256",T2(...r));return new Uint8Array(e)}else if(Lo.node){let{createHash:e}=Lo.node,t=e("sha256");return r.forEach(n=>t.update(n)),Uint8Array.from(t.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(r,...e)=>{if(Lo.web){let t=await Lo.web.subtle.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=T2(...e),i=await Lo.web.subtle.sign("HMAC",t,n);return new Uint8Array(i)}else if(Lo.node){let{createHmac:t}=Lo.node,n=t("sha256",r);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(r,...e)=>{let t=rg[r];if(t===void 0){let n=await Ca.sha256(Uint8Array.from(r,i=>i.charCodeAt(0)));t=T2(n,n),rg[r]=t}return Ca.sha256(t,...e)},taggedHashSync:(r,...e)=>{if(typeof _f!="function")throw new ng("sha256Sync is undefined, you need to set it");let t=rg[r];if(t===void 0){let n=_f(Uint8Array.from(r,i=>i.charCodeAt(0)));t=T2(n,n),rg[r]=t}return _f(t,...e)},_JacobianPoint:zi};Object.defineProperties(Ca,{sha256Sync:{configurable:!1,get(){return _f},set(r){_f||(_f=r)}},hmacSha256Sync:{configurable:!1,get(){return i6},set(r){i6||(i6=r)}}});function qi(r){if(isNaN(r)||r<=0)throw new X("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Ca.randomBytes(r)}var Il={};it(Il,{jwkToPkcs1:()=>GSe,jwkToPkix:()=>WSe,pkcs1ToJwk:()=>jSe,pkixToJwk:()=>HSe});var Dat=L(_2(),1),Nat=L(Hm(),1);var Nc=L(Kt(),1);var Iat=L(Tr(),1),Aat=L(Km(),1),OG=L(Kt(),1);function Ra(r,e){let t=Uint8Array.from(r.abs().toByteArray());if(t=t[0]===0?t.subarray(1):t,e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=Ye([new Uint8Array(e-t.length),t])}return ie(t,"base64url")}function ka(r){let e=KSe(r);return new OG.default.jsbn.BigInteger(ie(e,"base16"),16)}function KSe(r,e){let t=oe(r,"base64urlpad");if(e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=Ye([new Uint8Array(e-t.length),t])}return t}function jSe(r){let e=Nc.default.asn1.fromDer(ie(r,"ascii")),t=Nc.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Ra(t.n),e:Ra(t.e),d:Ra(t.d),p:Ra(t.p),q:Ra(t.q),dp:Ra(t.dP),dq:Ra(t.dQ),qi:Ra(t.qInv),alg:"RS256"}}function GSe(r){if(r.n==null||r.e==null||r.d==null||r.p==null||r.q==null||r.dp==null||r.dq==null||r.qi==null)throw new X("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Nc.default.pki.privateKeyToAsn1({n:ka(r.n),e:ka(r.e),d:ka(r.d),p:ka(r.p),q:ka(r.q),dP:ka(r.dp),dQ:ka(r.dq),qInv:ka(r.qi)});return oe(Nc.default.asn1.toDer(e).getBytes(),"ascii")}function HSe(r){let e=Nc.default.asn1.fromDer(ie(r,"ascii")),t=Nc.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Ra(t.n),e:Ra(t.e)}}function WSe(r){if(r.n==null||r.e==null)throw new X("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Nc.default.pki.publicKeyToAsn1({n:ka(r.n),e:ka(r.e)});return oe(Nc.default.asn1.toDer(e).getBytes(),"ascii")}var YSe=(0,LG.promisify)(Al.default.generateKeyPair);async function BG(r){let e=await YSe("rsa",{modulusLength:r,publicKeyEncoding:{type:"pkcs1",format:"jwk"},privateKeyEncoding:{type:"pkcs1",format:"jwk"}});return{privateKey:e.privateKey,publicKey:e.publicKey}}async function hC(r){if(r==null)throw new X("Missing key parameter","ERR_MISSING_KEY");return{privateKey:r,publicKey:{kty:r.kty,n:r.n,e:r.e}}}async function MG(r,e){return Al.default.createSign("RSA-SHA256").update(e).sign({format:"jwk",key:r})}async function UG(r,e,t){return Al.default.createVerify("RSA-SHA256").update(t).verify({format:"jwk",key:r},e)}var FG=Al.default.constants.RSA_PKCS1_PADDING;function VG(r,e){return Al.default.publicEncrypt({format:"jwk",key:r,padding:FG},e)}function zG(r,e){return Al.default.privateDecrypt({format:"jwk",key:r,padding:FG},e)}var a6=class{constructor(e){F(this,"_key");this._key=e}async verify(e,t){return UG(this._key,t,e)}marshal(){return Il.jwkToPkix(this._key)}get bytes(){return Ta.encode({Type:Pr.RSA,Data:this.marshal()}).subarray()}encrypt(e){return VG(this._key,e)}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}},Tf=class{constructor(e,t){F(this,"_key");F(this,"_publicKey");this._key=e,this._publicKey=t}genSecret(){return qi(16)}async sign(e){return MG(this._key,e)}get public(){if(this._publicKey==null)throw new X("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new a6(this._publicKey)}decrypt(e){return zG(this._key,e)}marshal(){return Il.jwkToPkcs1(this._key)}get bytes(){return Ia.encode({Type:Pr.RSA,Data:this.marshal()}).subarray()}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}async id(){let e=await this.public.hash();return ie(e,"base58btc")}async export(e,t="pkcs-8"){if(t==="pkcs-8"){let n=new s6.default.util.ByteBuffer(this.marshal()),i=s6.default.asn1.fromDer(n),o=s6.default.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return s6.default.pki.encryptRsaPrivateKey(o,e,s)}else{if(t==="libp2p-key")return hf(this.bytes,e);throw new X(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function QSe(r){let e=Il.pkcs1ToJwk(r),t=await hC(e);return new Tf(t.privateKey,t.publicKey)}function ZSe(r){let e=Il.pkixToJwk(r);return new a6(e)}async function JSe(r){let e=await hC(r);return new Tf(e.privateKey,e.publicKey)}async function eTe(r){let e=await BG(r);return new Tf(e.privateKey,e.publicKey)}var gC={};it(gC,{Secp256k1PrivateKey:()=>u6,Secp256k1PublicKey:()=>c6,generateKeyPair:()=>iTe,unmarshalSecp256k1PrivateKey:()=>rTe,unmarshalSecp256k1PublicKey:()=>nTe});function qG(){return Ca.randomPrivateKey()}async function $G(r,e){let{digest:t}=await ot.digest(e);try{return await DG(t,r)}catch(n){throw new X(String(n),"ERR_INVALID_INPUT")}}async function KG(r,e,t){try{let{digest:n}=await ot.digest(t);return NG(e,n,r)}catch(n){throw new X(String(n),"ERR_INVALID_INPUT")}}function jG(r){return Gr.fromHex(r).toRawBytes(!0)}function GG(r){try{fC(r,!0)}catch(e){throw new X(String(e),"ERR_INVALID_PRIVATE_KEY")}}function mC(r){try{Gr.fromHex(r)}catch(e){throw new X(String(e),"ERR_INVALID_PUBLIC_KEY")}}function HG(r){try{return fC(r,!0)}catch(e){throw new X(String(e),"ERR_INVALID_PRIVATE_KEY")}}var c6=class{constructor(e){F(this,"_key");mC(e),this._key=e}async verify(e,t){return KG(this._key,t,e)}marshal(){return jG(this._key)}get bytes(){return Ta.encode({Type:Pr.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}},u6=class{constructor(e,t){F(this,"_key");F(this,"_publicKey");this._key=e,this._publicKey=t??HG(e),GG(this._key),mC(this._publicKey)}async sign(e){return $G(this._key,e)}get public(){return new c6(this._publicKey)}marshal(){return this._key}get bytes(){return Ia.encode({Type:Pr.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return ct(this.bytes,e.bytes)}async hash(){let{bytes:e}=await ot.digest(this.bytes);return e}async id(){let e=await this.public.hash();return ie(e,"base58btc")}async export(e,t="libp2p-key"){if(t==="libp2p-key")return hf(this.bytes,e);throw new X(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function rTe(r){return new u6(r)}function nTe(r){return new c6(r)}async function iTe(){let r=qG();return new u6(r)}var w1={rsa:pC,ed25519:iC,secp256k1:gC};function yC(r){let e=Object.keys(w1).join(" / ");return new X(`invalid or unsupported key type ${r}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function wC(r){if(r=r.toLowerCase(),r==="rsa"||r==="ed25519"||r==="secp256k1")return w1[r];throw yC(r)}async function If(r,e){return wC(r).generateKeyPair(e??2048)}async function oTe(r,e,t){if(r.toLowerCase()!=="ed25519")throw new X("Seed key derivation is unimplemented for RSA or secp256k1","ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return nC(e)}function ao(r){let e=Ta.decode(r),t=e.Data??new Uint8Array;switch(e.Type){case Pr.RSA:return w1.rsa.unmarshalRsaPublicKey(t);case Pr.Ed25519:return w1.ed25519.unmarshalEd25519PublicKey(t);case Pr.Secp256k1:return w1.secp256k1.unmarshalSecp256k1PublicKey(t);default:throw yC(e.Type??"RSA")}}function l6(r,e){return e=(e??"rsa").toLowerCase(),wC(e),r.bytes}async function Xn(r){let e=Ia.decode(r),t=e.Data??new Uint8Array;switch(e.Type){case Pr.RSA:return w1.rsa.unmarshalRsaPrivateKey(t);case Pr.Ed25519:return w1.ed25519.unmarshalEd25519PrivateKey(t);case Pr.Secp256k1:return w1.secp256k1.unmarshalSecp256k1PrivateKey(t);default:throw yC(e.Type??"RSA")}}function bC(r,e){return e=(e??"rsa").toLowerCase(),wC(e),r.bytes}async function b1(r,e){try{let i=await cG(r,e);return await Xn(i)}catch{}let t=sg.default.pki.decryptRsaPrivateKey(r,e);if(t===null)throw new X("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let n=sg.default.asn1.toDer(sg.default.pki.privateKeyToAsn1(t));return n=oe(n.getBytes(),"ascii"),w1.rsa.unmarshalRsaPrivateKey(n)}var MC=L(fe(),1);var Nf=L(fe(),1);var WG="ERR_IPNS_EXPIRED_RECORD",d6="ERR_UNRECOGNIZED_VALIDITY",YG="ERR_SIGNATURE_CREATION",C2="ERR_SIGNATURE_VERIFICATION",XG="ERR_UNRECOGNIZED_FORMAT";var _C="ERR_UNDEFINED_PARAMETER",QG="ERR_INVALID_RECORD_DATA",ZG="ERR_INVALID_EMBEDDED_KEY",JG="ERR_MISSING_PRIVATE_KEY";var EC=L(q9(),1),eH=L(bT(),1),xC=L(V9(),1),tH=L(gT(),1),rH=L(pc(),1);function sTe(){rH.default._configure(),EC.default._configure(eH.default),xC.default._configure(tH.default)}sTe();var nH=["uint64","int64","sint64","fixed64","sfixed64"];function aTe(r){for(let e of nH){if(r[e]==null)continue;let t=r[e];r[e]=function(){return BigInt(t.call(this).toString())}}return r}function SC(r){return aTe(new EC.default(r))}function cTe(r){for(let e of nH){if(r[e]==null)continue;let t=r[e];r[e]=function(n){return t.call(this,n.toString())}}return r}function TC(){return cTe(xC.default.create())}function Pa(r,e){let t=SC(r instanceof Uint8Array?r:r.subarray());return e.decode(t)}function Da(r,e){let t=TC();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var Af;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(Af||(Af={}));function ag(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function R2(r){function e(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}let t=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return ag("enum",Af.VARINT,t,n)}function Na(r,e){return ag("message",Af.LENGTH_DELIMITED,r,e)}var co;(function(r){let e;(function(i){i.EOL="EOL"})(e=r.ValidityType||(r.ValidityType={}));let t;(function(i){i[i.EOL=0]="EOL"})(t||(t={})),function(i){i.codec=()=>R2(t)}(e=r.ValidityType||(r.ValidityType={}));let n;r.codec=()=>(n==null&&(n=Na((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),i.value!=null&&(o.uint32(10),o.bytes(i.value)),i.signature!=null&&(o.uint32(18),o.bytes(i.signature)),i.validityType!=null&&(o.uint32(24),r.ValidityType.codec().encode(i.validityType,o)),i.validity!=null&&(o.uint32(34),o.bytes(i.validity)),i.sequence!=null&&(o.uint32(40),o.uint64(i.sequence)),i.ttl!=null&&(o.uint32(48),o.uint64(i.ttl)),i.pubKey!=null&&(o.uint32(58),o.bytes(i.pubKey)),i.signatureV2!=null&&(o.uint32(66),o.bytes(i.signatureV2)),i.data!=null&&(o.uint32(74),o.bytes(i.data)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.value=i.bytes();break;case 2:s.signature=i.bytes();break;case 3:s.validityType=r.ValidityType.codec().decode(i);break;case 4:s.validity=i.bytes();break;case 5:s.sequence=i.uint64();break;case 6:s.ttl=i.uint64();break;case 7:s.pubKey=i.bytes();break;case 8:s.signatureV2=i.bytes();break;case 9:s.data=i.bytes();break;default:i.skipType(c&7);break}}return s})),n),r.encode=i=>Da(i,r.codec()),r.decode=i=>Pa(i,r.codec())})(co||(co={}));var uTe=["string","number","bigint","symbol"],lTe=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function iH(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(uTe.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(dTe(r))return"Buffer";let t=fTe(r);return t||"Object"}function dTe(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function fTe(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(lTe.includes(e))return e}var ce=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};ce.uint=new ce(0,"uint",!0);ce.negint=new ce(1,"negint",!0);ce.bytes=new ce(2,"bytes",!0);ce.string=new ce(3,"string",!0);ce.array=new ce(4,"array",!1);ce.map=new ce(5,"map",!1);ce.tag=new ce(6,"tag",!1);ce.float=new ce(7,"float",!0);ce.false=new ce(7,"false",!0);ce.true=new ce(7,"true",!0);ce.null=new ce(7,"null",!0);ce.undefined=new ce(7,"undefined",!0);ce.break=new ce(7,"break",!0);var Ve=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Cf=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",hTe=new TextDecoder,pTe=new TextEncoder;function cg(r){return Cf&&globalThis.Buffer.isBuffer(r)}function IC(r){return r instanceof Uint8Array?cg(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var cH=Cf?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):sH(r,e,t):(r,e,t)=>t-e>64?hTe.decode(r.subarray(e,t)):sH(r,e,t),uH=Cf?r=>r.length>64?globalThis.Buffer.from(r):oH(r):r=>r.length>64?pTe.encode(r):oH(r),_1=r=>Uint8Array.from(r),Rf=Cf?(r,e,t)=>cg(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),lH=Cf?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),IC(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},dH=Cf?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function fH(r,e){if(cg(r)&&cg(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function oH(r,e=1/0){let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function sH(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let a,c,u,l;switch(s){case 1:i<128&&(o=i);break;case 2:a=r[e+1],(a&192)===128&&(l=(i&31)<<6|a&63,l>127&&(o=l));break;case 3:a=r[e+1],c=r[e+2],(a&192)===128&&(c&192)===128&&(l=(i&15)<<12|(a&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:a=r[e+1],c=r[e+2],u=r[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(l=(i&15)<<18|(a&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return mTe(n)}var aH=4096;function mTe(r){let e=r.length;if(e<=aH)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=aH));return t}var gTe=256,f6=class{constructor(e=gTe){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=dH(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Rf(n,0,this.cursor)}else t=lH(this.chunks,this.cursor);return e&&this.reset(),t}};var ft="CBOR decode error:",AC="CBOR encode error:",h6=[];h6[23]=1;h6[24]=2;h6[25]=3;h6[26]=5;h6[27]=9;function Oc(r,e,t){if(r.length-e<t)throw new Error(`${ft} not enough data for type`)}var Qn=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Bo(r,e,t){Oc(r,e,1);let n=r[e];if(t.strict===!0&&n<Qn[0])throw new Error(`${ft} integer encoded in more bytes than necessary (strict decode)`);return n}function Mo(r,e,t){Oc(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<Qn[1])throw new Error(`${ft} integer encoded in more bytes than necessary (strict decode)`);return n}function Uo(r,e,t){Oc(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<Qn[2])throw new Error(`${ft} integer encoded in more bytes than necessary (strict decode)`);return n}function Fo(r,e,t){Oc(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<Qn[3])throw new Error(`${ft} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${ft} integers outside of the safe integer range are not supported`)}function hH(r,e,t,n){return new Ve(ce.uint,Bo(r,e+1,n),2)}function pH(r,e,t,n){return new Ve(ce.uint,Mo(r,e+1,n),3)}function mH(r,e,t,n){return new Ve(ce.uint,Uo(r,e+1,n),5)}function gH(r,e,t,n){return new Ve(ce.uint,Fo(r,e+1,n),9)}function Is(r,e){return di(r,0,e.value)}function di(r,e,t){if(t<Qn[0]){let n=Number(t);r.push([e|n])}else if(t<Qn[1]){let n=Number(t);r.push([e|24,n])}else if(t<Qn[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<Qn[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<Qn[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${ft} encountered BigInt larger than allowable range`)}}Is.encodedSize=function(e){return di.encodedSize(e.value)};di.encodedSize=function(e){return e<Qn[0]?1:e<Qn[1]?2:e<Qn[2]?3:e<Qn[3]?5:9};Is.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function yH(r,e,t,n){return new Ve(ce.negint,-1-Bo(r,e+1,n),2)}function wH(r,e,t,n){return new Ve(ce.negint,-1-Mo(r,e+1,n),3)}function bH(r,e,t,n){return new Ve(ce.negint,-1-Uo(r,e+1,n),5)}var CC=BigInt(-1),_H=BigInt(1);function vH(r,e,t,n){let i=Fo(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new Ve(ce.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${ft} integers outside of the safe integer range are not supported`);return new Ve(ce.negint,CC-BigInt(i),9)}function ug(r,e){let t=e.value,n=typeof t=="bigint"?t*CC-_H:t*-1-1;di(r,e.type.majorEncoded,n)}ug.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*CC-_H:t*-1-1;return n<Qn[0]?1:n<Qn[1]?2:n<Qn[2]?3:n<Qn[3]?5:9};ug.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function p6(r,e,t,n){Oc(r,e,t+n);let i=Rf(r,e+t,e+t+n);return new Ve(ce.bytes,i,t+n)}function EH(r,e,t,n){return p6(r,e,1,t)}function xH(r,e,t,n){return p6(r,e,2,Bo(r,e+1,n))}function SH(r,e,t,n){return p6(r,e,3,Mo(r,e+1,n))}function TH(r,e,t,n){return p6(r,e,5,Uo(r,e+1,n))}function IH(r,e,t,n){let i=Fo(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ft} 64-bit integer bytes lengths not supported`);return p6(r,e,9,i)}function lg(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===ce.string?uH(r.value):r.value),r.encodedBytes}function kf(r,e){let t=lg(e);di(r,e.type.majorEncoded,t.length),r.push(t)}kf.encodedSize=function(e){let t=lg(e);return di.encodedSize(t.length)+t.length};kf.compareTokens=function(e,t){return wTe(lg(e),lg(t))};function wTe(r,e){return r.length<e.length?-1:r.length>e.length?1:fH(r,e)}function m6(r,e,t,n,i){let o=t+n;Oc(r,e,o);let s=new Ve(ce.string,cH(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Rf(r,e+t,e+o)),s}function AH(r,e,t,n){return m6(r,e,1,t,n)}function CH(r,e,t,n){return m6(r,e,2,Bo(r,e+1,n),n)}function RH(r,e,t,n){return m6(r,e,3,Mo(r,e+1,n),n)}function kH(r,e,t,n){return m6(r,e,5,Uo(r,e+1,n),n)}function PH(r,e,t,n){let i=Fo(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ft} 64-bit integer string lengths not supported`);return m6(r,e,9,i,n)}var DH=kf;function Pf(r,e,t,n){return new Ve(ce.array,n,t)}function NH(r,e,t,n){return Pf(r,e,1,t)}function OH(r,e,t,n){return Pf(r,e,2,Bo(r,e+1,n))}function LH(r,e,t,n){return Pf(r,e,3,Mo(r,e+1,n))}function BH(r,e,t,n){return Pf(r,e,5,Uo(r,e+1,n))}function MH(r,e,t,n){let i=Fo(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ft} 64-bit integer array lengths not supported`);return Pf(r,e,9,i)}function UH(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ft} indefinite length items not allowed`);return Pf(r,e,1,1/0)}function dg(r,e){di(r,ce.array.majorEncoded,e.value)}dg.compareTokens=Is.compareTokens;dg.encodedSize=function(e){return di.encodedSize(e.value)};function Df(r,e,t,n){return new Ve(ce.map,n,t)}function FH(r,e,t,n){return Df(r,e,1,t)}function VH(r,e,t,n){return Df(r,e,2,Bo(r,e+1,n))}function zH(r,e,t,n){return Df(r,e,3,Mo(r,e+1,n))}function qH(r,e,t,n){return Df(r,e,5,Uo(r,e+1,n))}function $H(r,e,t,n){let i=Fo(r,e+1,n);if(typeof i=="bigint")throw new Error(`${ft} 64-bit integer map lengths not supported`);return Df(r,e,9,i)}function KH(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ft} indefinite length items not allowed`);return Df(r,e,1,1/0)}function fg(r,e){di(r,ce.map.majorEncoded,e.value)}fg.compareTokens=Is.compareTokens;fg.encodedSize=function(e){return di.encodedSize(e.value)};function jH(r,e,t,n){return new Ve(ce.tag,t,1)}function GH(r,e,t,n){return new Ve(ce.tag,Bo(r,e+1,n),2)}function HH(r,e,t,n){return new Ve(ce.tag,Mo(r,e+1,n),3)}function WH(r,e,t,n){return new Ve(ce.tag,Uo(r,e+1,n),5)}function YH(r,e,t,n){return new Ve(ce.tag,Fo(r,e+1,n),9)}function hg(r,e){di(r,ce.tag.majorEncoded,e.value)}hg.compareTokens=Is.compareTokens;hg.encodedSize=function(e){return di.encodedSize(e.value)};var STe=20,TTe=21,ITe=22,ATe=23;function XH(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${ft} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Ve(ce.null,null,1):new Ve(ce.undefined,void 0,1)}function QH(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${ft} indefinite length items not allowed`);return new Ve(ce.break,void 0,1)}function RC(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${ft} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${ft} Infinity values are not supported`)}return new Ve(ce.float,r,e)}function ZH(r,e,t,n){return RC(kC(r,e+1),3,n)}function JH(r,e,t,n){return RC(PC(r,e+1),5,n)}function eW(r,e,t,n){return RC(iW(r,e+1),9,n)}function pg(r,e,t){let n=e.value;if(n===!1)r.push([ce.float.majorEncoded|STe]);else if(n===!0)r.push([ce.float.majorEncoded|TTe]);else if(n===null)r.push([ce.float.majorEncoded|ITe]);else if(n===void 0)r.push([ce.float.majorEncoded|ATe]);else{let i,o=!1;(!t||t.float64!==!0)&&(rW(n),i=kC(Oa,1),n===i||Number.isNaN(n)?(Oa[0]=249,r.push(Oa.slice(0,3)),o=!0):(nW(n),i=PC(Oa,1),n===i&&(Oa[0]=250,r.push(Oa.slice(0,5)),o=!0))),o||(CTe(n),i=iW(Oa,1),Oa[0]=251,r.push(Oa.slice(0,9)))}}pg.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){rW(n);let i=kC(Oa,1);if(n===i||Number.isNaN(n))return 3;if(nW(n),i=PC(Oa,1),n===i)return 5}return 9};var tW=new ArrayBuffer(9),As=new DataView(tW,1),Oa=new Uint8Array(tW,0);function rW(r){if(r===1/0)As.setUint16(0,31744,!1);else if(r===-1/0)As.setUint16(0,64512,!1);else if(Number.isNaN(r))As.setUint16(0,32256,!1);else{As.setFloat32(0,r);let e=As.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)As.setUint16(0,31744,!1);else if(t===0)As.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?As.setUint16(0,0):i<-14?As.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):As.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function kC(r,e){if(r.length-e<2)throw new Error(`${ft} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function nW(r){As.setFloat32(0,r,!1)}function PC(r,e){if(r.length-e<4)throw new Error(`${ft} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function CTe(r){As.setFloat64(0,r,!1)}function iW(r,e){if(r.length-e<8)throw new Error(`${ft} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}pg.compareTokens=Is.compareTokens;function ir(r,e,t){throw new Error(`${ft} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function mg(r){return()=>{throw new Error(`${ft} ${r}`)}}var Ae=[];for(let r=0;r<=23;r++)Ae[r]=ir;Ae[24]=hH;Ae[25]=pH;Ae[26]=mH;Ae[27]=gH;Ae[28]=ir;Ae[29]=ir;Ae[30]=ir;Ae[31]=ir;for(let r=32;r<=55;r++)Ae[r]=ir;Ae[56]=yH;Ae[57]=wH;Ae[58]=bH;Ae[59]=vH;Ae[60]=ir;Ae[61]=ir;Ae[62]=ir;Ae[63]=ir;for(let r=64;r<=87;r++)Ae[r]=EH;Ae[88]=xH;Ae[89]=SH;Ae[90]=TH;Ae[91]=IH;Ae[92]=ir;Ae[93]=ir;Ae[94]=ir;Ae[95]=mg("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)Ae[r]=AH;Ae[120]=CH;Ae[121]=RH;Ae[122]=kH;Ae[123]=PH;Ae[124]=ir;Ae[125]=ir;Ae[126]=ir;Ae[127]=mg("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)Ae[r]=NH;Ae[152]=OH;Ae[153]=LH;Ae[154]=BH;Ae[155]=MH;Ae[156]=ir;Ae[157]=ir;Ae[158]=ir;Ae[159]=UH;for(let r=160;r<=183;r++)Ae[r]=FH;Ae[184]=VH;Ae[185]=zH;Ae[186]=qH;Ae[187]=$H;Ae[188]=ir;Ae[189]=ir;Ae[190]=ir;Ae[191]=KH;for(let r=192;r<=215;r++)Ae[r]=jH;Ae[216]=GH;Ae[217]=HH;Ae[218]=WH;Ae[219]=YH;Ae[220]=ir;Ae[221]=ir;Ae[222]=ir;Ae[223]=ir;for(let r=224;r<=243;r++)Ae[r]=mg("simple values are not supported");Ae[244]=ir;Ae[245]=ir;Ae[246]=ir;Ae[247]=XH;Ae[248]=mg("simple values are not supported");Ae[249]=ZH;Ae[250]=JH;Ae[251]=eW;Ae[252]=ir;Ae[253]=ir;Ae[254]=ir;Ae[255]=QH;var La=[];for(let r=0;r<24;r++)La[r]=new Ve(ce.uint,r,1);for(let r=-1;r>=-24;r--)La[31-r]=new Ve(ce.negint,r,1);La[64]=new Ve(ce.bytes,new Uint8Array(0),1);La[96]=new Ve(ce.string,"",1);La[128]=new Ve(ce.array,0,1);La[160]=new Ve(ce.map,0,1);La[244]=new Ve(ce.false,!1,1);La[245]=new Ve(ce.true,!0,1);La[246]=new Ve(ce.null,null,1);function oW(r){switch(r.type){case ce.false:return _1([244]);case ce.true:return _1([245]);case ce.null:return _1([246]);case ce.bytes:return r.value.length?void 0:_1([64]);case ce.string:return r.value===""?_1([96]):void 0;case ce.array:return r.value===0?_1([128]):void 0;case ce.map:return r.value===0?_1([160]):void 0;case ce.uint:return r.value<24?_1([Number(r.value)]):void 0;case ce.negint:if(r.value>=-24)return _1([31-Number(r.value)])}}var kTe={float64:!1,mapSorter:NTe,quickEncodeToken:oW};function PTe(){let r=[];return r[ce.uint.major]=Is,r[ce.negint.major]=ug,r[ce.bytes.major]=kf,r[ce.string.major]=DH,r[ce.array.major]=dg,r[ce.map.major]=fg,r[ce.tag.major]=hg,r[ce.float.major]=pg,r}var sW=PTe(),DC=new f6,yg=class r{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${AC} object contains circular references`);return new r(t,e)}},k2={null:new Ve(ce.null,null),undefined:new Ve(ce.undefined,void 0),true:new Ve(ce.true,!0),false:new Ve(ce.false,!1),emptyArray:new Ve(ce.array,0),emptyMap:new Ve(ce.map,0)},P2={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Ve(ce.float,r):r>=0?new Ve(ce.uint,r):new Ve(ce.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Ve(ce.uint,r):new Ve(ce.negint,r)},Uint8Array(r,e,t,n){return new Ve(ce.bytes,r)},string(r,e,t,n){return new Ve(ce.string,r)},boolean(r,e,t,n){return r?k2.true:k2.false},null(r,e,t,n){return k2.null},undefined(r,e,t,n){return k2.undefined},ArrayBuffer(r,e,t,n){return new Ve(ce.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Ve(ce.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[k2.emptyArray,new Ve(ce.break)]:k2.emptyArray;n=yg.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=gg(s,t,n);return t.addBreakTokens?[new Ve(ce.array,r.length),i,new Ve(ce.break)]:[new Ve(ce.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[k2.emptyMap,new Ve(ce.break)]:k2.emptyMap;n=yg.createCheck(n,r);let a=[],c=0;for(let u of o)a[c++]=[gg(u,t,n),gg(i?r.get(u):r[u],t,n)];return DTe(a,t),t.addBreakTokens?[new Ve(ce.map,s),a,new Ve(ce.break)]:[new Ve(ce.map,s),a]}};P2.Map=P2.Object;P2.Buffer=P2.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))P2[`${r}Array`]=P2.DataView;function gg(r,e={},t){let n=iH(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||P2[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=P2[n];if(!o)throw new Error(`${AC} unsupported type: ${n}`);return o(r,n,e,t)}function DTe(r,e){e.mapSorter&&r.sort(e.mapSorter)}function NTe(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=sW[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function aW(r,e,t,n){if(Array.isArray(e))for(let i of e)aW(r,i,t,n);else t[e.type.major](r,e,n)}function OTe(r,e,t){let n=gg(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,t),a=new f6(s);if(o(a,n,t),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return IC(a.chunks[0])}}return DC.reset(),aW(DC,n,e,t),DC.toBytes(!0)}function Lc(r,e){return e=Object.assign({},kTe,e),OTe(r,sW,e)}var LTe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},NC=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=La[e];if(t===void 0){let n=Ae[e];if(!n)throw new Error(`${ft} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},g6=Symbol.for("DONE"),wg=Symbol.for("BREAK");function BTe(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=y6(e,t);if(o===wg){if(r.value===1/0)break;throw new Error(`${ft} got unexpected break to lengthed array`)}if(o===g6)throw new Error(`${ft} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function MTe(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=y6(e,t);if(a===wg){if(r.value===1/0)break;throw new Error(`${ft} got unexpected break to lengthed map`)}if(a===g6)throw new Error(`${ft} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${ft} non-string keys not supported (got ${typeof a})`);if(t.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${ft} found repeat map key "${a}"`);let c=y6(e,t);if(c===g6)throw new Error(`${ft} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function y6(r,e){if(r.done())return g6;let t=r.next();if(t.type===ce.break)return wg;if(t.type.terminal)return t.value;if(t.type===ce.array)return BTe(t,r,e);if(t.type===ce.map)return MTe(t,r,e);if(t.type===ce.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=y6(r,e);return e.tags[t.value](n)}throw new Error(`${ft} tag not supported (${t.value})`)}throw new Error("unsupported")}function Cs(r,e){if(!(r instanceof Uint8Array))throw new Error(`${ft} data to decode must be a Uint8Array`);e=Object.assign({},LTe,e);let t=e.tokenizer||new NC(r,e),n=y6(t,e);if(n===g6)throw new Error(`${ft} did not find any content to decode`);if(n===wg)throw new Error(`${ft} got unexpected break`);if(!t.done())throw new Error(`${ft} too many terminals, data makes no sense`);return n}var cW=z("ipns:utils"),uW=oe("/ipns/");function w6(r){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),t=String(r).trim().match(e);if(t==null)throw new Error("Invalid format");let n=parseInt(t[1],10),i=parseInt(t[2],10)-1,o=parseInt(t[3],10),s=parseInt(t[4],10),a=parseInt(t[5],10),c=parseInt(t[6],10),u=parseInt(t[7].slice(0,-6),10);return new Date(Date.UTC(n,i,o,s,a,c,u))}var lW=async(r,e)=>{if(e==null||r==null){let n=new Error("one or more of the provided parameters are not defined");throw cW.error(n),(0,Nf.default)(n,_C)}let t;if(e.pubKey!=null){try{t=ao(e.pubKey)}catch(i){throw cW.error(i),i}if(!(await Sr(e.pubKey)).equals(r))throw(0,Nf.default)(new Error("Embedded public key did not match PeerID"),ZG)}else r.publicKey!=null&&(t=ao(r.publicKey));if(t!=null)return t;throw(0,Nf.default)(new Error("no public key is available"),_C)},dW=(r,e,t)=>{let n=oe(e);return Ye([r,t,n])},bg=r=>{let e=oe("ipns-signature:");return Ye([e,r])},LC=r=>co.encode(r),Bc=r=>{let e=co.decode(r);return e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),{value:e.value??new Uint8Array(0),signature:e.signature??new Uint8Array(0),validityType:e.validityType??co.ValidityType.EOL,validity:e.validity??new Uint8Array(0),sequence:e.sequence??0n,pubKey:e.pubKey,ttl:e.ttl??void 0,signatureV2:e.signatureV2,data:e.data}},D2=r=>Ye([uW,r.toBytes()]),BC=r=>Mr(r.slice(uW.length)),fW=(r,e,t,n,i)=>{let o;if(t===co.ValidityType.EOL)o=0;else throw(0,Nf.default)(new Error("Unknown validity type"),d6);return Lc({Value:r,Validity:e,ValidityType:o,Sequence:n,TTL:i})},hW=r=>{let e=Cs(r);if(e.ValidityType===0)e.ValidityType=co.ValidityType.EOL;else throw(0,Nf.default)(new Error("Unknown validity type"),d6);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e};var mW=z("ipns"),UTe=bn.code,b6="/ipns/",_g=b6.length,gW=async(r,e,t,n)=>{let i=new pW.default(Date.now()+Number(n)),o=co.ValidityType.EOL,[s,a]=n.toString().split("."),c=BigInt(s)*BigInt(1e5)+BigInt(a??"0");return await FTe(r,e,t,o,i,c)};var FTe=async(r,e,t,n,i,o)=>{t=BigInt(t);let s=oe(i.toString());if(r.privateKey==null)throw(0,MC.default)(new Error("Missing private key"),JG);let a=await Xn(r.privateKey),c=await zTe(a,e,n,s),u=fW(e,s,n,t,o),l=bg(u),d=await a.sign(l),h={value:e,signature:c,validityType:n,validity:s,sequence:t,ttl:o,signatureV2:d,data:u};if(r.publicKey!=null){let f=Jr(r.toBytes());(f.code!==UTe||!ct(r.publicKey,f.digest))&&(h.pubKey=r.publicKey)}return mW("ipns entry for %b created",e),h},VTe=r=>QS.encode(r).slice(1),_6=r=>new Re(`/ipns/${VTe(r)}`),zTe=async(r,e,t,n)=>{try{let i=dW(e,t,n);return await r.sign(i)}catch(i){throw mW.error("record signature creation failed",i),(0,MC.default)(new Error("record signature creation failed"),YG)}};var Rs=z("ipfs:ipns:publisher"),yW=_n().code,wW=60*60*1e3,kl=class{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,n,i){let o=await this._updateOrCreateRecord(e,t,n,i);return this._putRecordToRouting(o,e,i)}publish(e,t,n){return this.publishWithEOL(e,t,wW,n)}async _putRecordToRouting(e,t,n){if(!Mi(t)){let o="peerId received is not valid";throw Rs.error(o),(0,ks.default)(new Error(o),"ERR_INVALID_PEER_ID")}if(t.publicKey==null)throw(0,ks.default)(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");let i=D2(t);return await this._publishEntry(i,e,n),e}async _publishEntry(e,t,n){try{let i=await this._routing.put(e,t,n);return Rs(`ipns record for ${ie(e,"base32")} was stored in the routing`),i}catch(i){let o=`ipns record for ${ie(e,"base32")} could not be stored in the routing - ${i.stack}`;throw Rs.error(o),Rs.error(i),(0,ks.default)(new Error(o),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,t={}){if(!Mi(e)){let i="peerId received is not valid";throw Rs.error(i),(0,ks.default)(new Error(i),"ERR_INVALID_PEER_ID")}let n=t.checkRouting!==!1;try{let i=await this._datastore.get(_6(e.toBytes()));return this._unmarshalData(i)}catch(i){if(i.code!==yW){let o=`unexpected error getting the ipns record ${e.toString()} from datastore`;throw Rs.error(o),(0,ks.default)(new Error(o),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!n)throw(0,ks.default)(i,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{let o=D2(e),s=await this._routing.get(o);return this._unmarshalData(s)}catch(o){throw Rs.error(o),o}}}_unmarshalData(e){try{return Bc(e)}catch(t){throw(0,ks.default)(t,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,n,i){if(!Mi(e)){let u="peerId received is not valid";throw Rs.error(u),(0,ks.default)(new Error(u),"ERR_INVALID_PEER_ID")}let o={checkRouting:!0},s;try{s=await this._getPublished(e,o)}catch(u){if(u.code!==yW){let l=`unexpected error when determining the last published IPNS record for ${e.toString()} ${u.stack}`;throw Rs.error(l),(0,ks.default)(new Error(l),"ERR_DETERMINING_PUBLISHED_RECORD")}}let a=0n;s&&s.sequence!==void 0&&(a=ct(s.value,t)?s.sequence:s.sequence+BigInt(1));let c;try{c=await gW(e,t,a,n)}catch(u){let l=`ipns record for ${t} could not be created`;throw Rs.error(u),(0,ks.default)(new Error(l),"ERR_CREATING_IPNS_RECORD")}try{let u=LC(c);return await this._datastore.put(_6(e.toBytes()),u,i),Rs(`ipns record for ${ie(t,"base32")} was stored in the datastore`),u}catch{let l=`ipns record for ${t} could not be stored in the datastore`;throw Rs.error(l),(0,ks.default)(new Error(l),"ERR_STORING_IN_DATASTORE")}}};kl.defaultRecordLifetime=wW;var Pl=L(fe(),1);var bW=L(Dn(),1),vg=z("ipfs:ipns:republisher"),_W=60*1e3,vW=60*_W,qTe=4*vW,$Te=24*vW,Eg=class{constructor(e,t,n,i,o={pass:""}){this._publisher=e,this._datastore=t,this._peerId=n,this._keychain=i,this._options=o,this._republishHandle=null}async start(){if(this._republishHandle)throw(0,Pl.default)(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");let e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:i=>{e._timeoutId=setTimeout(async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(i)}catch(o){vg.error(o)}},i())},cancel:async()=>{e._timeoutId!=null&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{pass:t}=this._options,n=!0;e._task=async()=>{let i=new bW.TimeoutController(3e4);try{await this._republishEntries(this._peerId,t,{signal:i.signal})}finally{i.clear()}},e.runPeriodically(()=>n?(n=!1,this._options.initialBroadcastInterval||_W):this._options.broadcastInterval||qTe),this._republishHandle=e}async stop(){let e=this._republishHandle;if(!e)throw(0,Pl.default)(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t,n){try{await this._republishEntry(e,n)}catch{vg.error("cannot republish entry for the node's private key");return}if(t)try{let i=await this._keychain.listKeys();for(let o of i){if(o.name==="self")continue;let s=await this._keychain.exportKey(o.name,t),a=await b1(s,t),c=await Sr(a.public.bytes,a.bytes);await this._republishEntry(c,n)}}catch(i){vg.error(i)}}async _republishEntry(e,t){try{let n=await this._getPreviousValue(e);await this._publisher.publishWithEOL(e,n,$Te,t)}catch(n){if(n.code==="ERR_NO_ENTRY_FOUND")return;throw n}}async _getPreviousValue(e){if(!Mi(e))throw(0,Pl.default)(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{let t=await this._datastore.get(_6(e.toBytes()));if(!(t instanceof Uint8Array))throw(0,Pl.default)(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return Bc(t).value}catch(n){throw vg.error(n),(0,Pl.default)(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(t){throw t&&t.notFound?(0,Pl.default)(new Error(`no previous entry for record with id: ${e.toString()}`),"ERR_NO_ENTRY_FOUND"):t}}};var Lf=L(fe(),1);var Ps=L(fe(),1);var v6=z("ipns:validator"),KTe=async(r,e)=>{let{value:t,validityType:n,validity:i}=e,o,s;if(e.signatureV2!=null&&e.data!=null)s=e.signatureV2,o=bg(e.data),jTe(e);else throw(0,Ps.default)(new Error("missing data or signatureV2"),C2);let a;try{a=await r.verify(o,s)}catch{a=!1}if(!a)throw v6.error("record signature verification failed"),(0,Ps.default)(new Error("record signature verification failed"),C2);if(i!=null&&n===co.ValidityType.EOL){let c;try{c=w6(ie(i))}catch{throw v6.error("unrecognized validity format (not an rfc3339 format)"),(0,Ps.default)(new Error("unrecognized validity format (not an rfc3339 format)"),XG)}if(c.getTime()<Date.now())throw v6.error("record has expired"),(0,Ps.default)(new Error("record has expired"),WG)}else if(n!=null)throw v6.error("unrecognized validity type"),(0,Ps.default)(new Error("unrecognized validity type"),d6);v6("ipns entry for %b is valid",t)},jTe=r=>{if(r.data==null)throw(0,Ps.default)(new Error("Record data is missing"),QG);let e=hW(r.data);if(!ct(e.Value,r.value))throw(0,Ps.default)(new Error('Field "value" did not match between protobuf and CBOR'),C2);if(!ct(e.Validity,r.validity))throw(0,Ps.default)(new Error('Field "validity" did not match between protobuf and CBOR'),C2);if(e.ValidityType!==r.validityType)throw(0,Ps.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),C2);if(e.Sequence!==r.sequence)throw(0,Ps.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),C2);if(e.TTL!==r.ttl)throw(0,Ps.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),C2)},Of=async(r,e)=>{let t=BC(r),n=Bc(e),i=await lW(t,n);await KTe(i,n)};var FC=z("ipfs:ipns:resolver"),GTe=_n().code,EW=32,xg=class{constructor(e){this._routing=e}async resolve(e,t={}){if(typeof e!="string")throw(0,Lf.default)(new Error("invalid name"),"ERR_INVALID_NAME");let n=t.recursive&&t.recursive.toString()==="true",i=e.split("/");if(i.length!==3||i[0]!=="")throw(0,Lf.default)(new Error("invalid name"),"ERR_INVALID_NAME");let o=i[2],s=1/0;n&&(s=EW);let a=await this.resolver(o,s,t);return FC(`${e} was locally resolved correctly`),a}async resolver(e,t,n){if(t===0){let s=`could not resolve name (recursion limit of ${EW} exceeded)`;throw FC.error(s),(0,Lf.default)(new Error(s),"ERR_RESOLVE_RECURSION_LIMIT")}let i=await this._resolveName(e,n),o=i.split("/");return o[1]==="ipfs"||!t?i:this.resolver(o[2],t-1,n)}async _resolveName(e,t){let n=Be(e),i=D2(n),o;try{o=await this._routing.get(i,t)}catch(s){throw FC.error("could not get record from routing",s),s.code===GTe?(0,Lf.default)(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND"):(0,Lf.default)(new Error(`unexpected error getting the ipns record ${n.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}return this._validateRecord(n,o)}async _validateRecord(e,t){await Of(Ye([oe("/ipns/"),e.toBytes()]),t);let n=Bc(t);return ie(n.value)}};var SW=L(E6(),1),Sg=class{constructor(e){this.lru=(0,SW.default)(e)}get(e){let t=this.lru.get(e);if(t){if(t.expire&&t.expire<Date.now()){this.lru.remove(e);return}return t.value}}set(e,t,n){this.lru.set(e,{value:t,expire:Date.now()+n})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};var x6=z("ipfs:ipns"),TW=60*1e3,S6=class{constructor(e,t,n,i,o){this.publisher=new kl(e,t),this.republisher=new Eg(this.publisher,t,n,i,o),this.resolver=new xg(e),this.cache=new Sg(1e3),this.routing=e}async publish(e,t,n=kl.defaultRecordLifetime,i){try{await this.publisher.publishWithEOL(e,t,n,i),x6(`IPNS value ${ie(t,"base32")} was published correctly`);let o=e.toString(),s=parseFloat(n),a=s<TW?s:TW;return this.cache.set(o,t,a),x6(`IPNS value ${ie(t,"base32")} was cached correctly`),{name:o,value:t}}catch(o){throw x6.error(o),o}}async resolve(e,t={}){if(typeof e!="string")throw(0,IW.default)(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!t.nocache&&!t.recursive){let n=e.split("/")[2],i=this.cache.get(n);if(i)return i}try{let n=await this.resolver.resolve(e,t);return x6(`IPNS record from ${e} was resolved correctly`),n}catch(n){throw x6.error(n),n}}async initializeKeyspace(e,t,n){return this.publish(e,t,kl.defaultRecordLifetime,n)}};var Bf=(r,e)=>async function*(){yield*(await Pn(r)).sort(e)}();async function or(r){for await(let e of r);}async function*vt(r,e){for await(let t of r)await e(t)&&(yield t)}async function*$i(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}}var hn=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await or(this.putMany(e,n)),e=[],await or(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=vt(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>vt(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Bf(i,o),n)),e.offset!=null){let i=0;n=vt(n,()=>i++>=e.offset)}return e.limit!=null&&(n=$i(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=vt(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>vt(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>Bf(i,o),n)),e.offset!=null){let i=0;n=vt(n,()=>i++>=e.offset)}return e.limit!=null&&(n=$i(n,e.limit)),n}};function jt(){let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r}var Tg=class{constructor(e){F(this,"buffer");F(this,"mask");F(this,"top");F(this,"btm");F(this,"next");if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Mf=class{constructor(e={}){F(this,"size");F(this,"hwm");F(this,"head");F(this,"tail");this.hwm=e.splitLimit??16,this.head=new Tg(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return(e==null?void 0:e.byteLength)!=null?e.byteLength:1}push(e){if((e==null?void 0:e.value)!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Tg(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return(e==null?void 0:e.value)!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var VC=class extends Error{constructor(t,n){super(t??"The operation was aborted");F(this,"type");F(this,"code");this.type="aborted",this.code=n??"ABORT_ERR"}};function Gt(r={}){return CW(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function AW(r={}){return CW(t=>{let n,i=[];for(;!t.isEmpty()&&(n=t.shift(),n!=null);){if(n.error!=null)throw n.error;n.done===!1&&i.push(n.value)}return n==null?{done:!0}:{done:n.done===!0,value:i}},r)}function CW(r,e){e=e??{};let t=e.onEnd,n=new Mf,i,o,s,a=jt(),c=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((_,E)=>{o=S=>{o=null,n.push(S);try{_(r(n))}catch(p){E(p)}return i}}):r(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=jt()})}},u=_=>o!=null?o(_):(n.push(_),i),l=_=>(n=new Mf,o!=null?o({error:_}):(n.push({error:_}),i)),d=_=>{if(s)return i;if((e==null?void 0:e.objectMode)!==!0&&(_==null?void 0:_.byteLength)==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:_})},h=_=>s?i:(s=!0,_!=null?l(_):u({done:!0})),f=()=>(n=new Mf,h(),{done:!0}),m=_=>(h(_),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:f,throw:m,push:d,end:h,get readableLength(){return n.size},onEmpty:async _=>{let E=_==null?void 0:_.signal;if(E==null||E.throwIfAborted(),n.isEmpty())return;let S,p;E!=null&&(S=new Promise((g,y)=>{p=()=>{y(new VC)},E.addEventListener("abort",p)}));try{await Promise.race([a.promise,S])}finally{p!=null&&E!=null&&(E==null||E.removeEventListener("abort",p))}}},t==null)return i;let w=i;return i={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(_){return w.throw(_),t!=null&&(t(_),t=void 0),{done:!0}},return(){return w.return(),t!=null&&(t(),t=void 0),{done:!0}},push:d,end(_){return w.end(_),t!=null&&(t(_),t=void 0),i},get readableLength(){return w.readableLength},onEmpty:_=>w.onEmpty(_)},i}var HTe=z("datastore:core:tiered"),T6=class extends hn{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch(e){throw Kh(e)}}async put(e,t,n){try{await Promise.all(this.stores.map(i=>i.put(e,t,n)))}catch(i){throw Gh(i)}}async get(e,t){for(let n of this.stores)try{let i=await n.get(e,t);if(i)return i}catch(i){HTe.error(i)}throw _n()}async has(e,t){for(let n of this.stores)if(await n.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map(n=>n.delete(e,t)))}catch(n){throw jh(n)}}async*putMany(e,t={}){let n,i=this.stores.map(o=>{let s=Gt({objectMode:!0});return or(o.putMany(s,t)).catch(a=>{n=a}),s});try{for await(let o of e){if(n)throw n;i.forEach(s=>s.push(o)),yield o}}finally{i.forEach(o=>o.end())}}async*deleteMany(e,t={}){let n,i=this.stores.map(o=>{let s=Gt({objectMode:!0});return or(o.deleteMany(s,t)).catch(a=>{n=a}),s});try{for await(let o of e){if(n)throw n;i.forEach(s=>s.push(o)),yield o}}finally{i.forEach(o=>o.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){let e=this.stores.map(t=>t.batch());return{put:(t,n)=>{e.forEach(i=>i.put(t,n))},delete:t=>{e.forEach(n=>n.delete(t))},commit:async t=>{for(let n of e)await n.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}};var O6=L(Ig(),1);var Ag=(r,e)=>{let t=e.map((n,i)=>({entry:co.decode(n),index:i}));return t.sort((n,i)=>{if(n.entry.signatureV2!=null&&i.entry.signatureV2==null)return-1;if(n.entry.signatureV2==null&&i.entry.signatureV2!=null)return 1;let o=n.entry.sequence??0n,s=i.entry.sequence??0n;if(o>s)return-1;if(o<s)return 1;let a=n.entry.validity??new Uint8Array(0),c=i.entry.validity??new Uint8Array(0),u=w6(ie(a)),l=w6(ie(c));return u.getTime()>l.getTime()?-1:u.getTime()<l.getTime()?1:0}),t[0].index};var zC=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`;var qC="/repo/flatfs/shard/",jC="SHARDING",kW="_README",I6=class{constructor(e){this.param=e,this.name="base",this._padding=""}fun(e){return"implement me"}toString(){return`${qC}v1/${this.name}/${this.param}`}},$C=class extends I6{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}},KC=class extends I6{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){let t=this._padding+e;return t.slice(t.length-this.param)}},A6=class extends I6{constructor(e){super(e),this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){let t=this._padding+e,n=t.length-this.param-1;return t.slice(n,n+this.param)}};function WTe(r){if(r=r.trim(),r.length===0)throw new Error("empty shard string");if(!r.startsWith(qC))throw new Error(`invalid or no path prefix: ${r}`);let e=r.slice(qC.length).split("/"),t=e[0];if(t!=="v1")throw new Error(`expect 'v1' version, got '${t}'`);let n=e[1];if(!e[2])throw new Error("missing param");let i=parseInt(e[2],10);switch(n){case"prefix":return new $C(i);case"suffix":return new KC(i);case"next-to-last":return new A6(i);default:throw new Error(`unkown sharding function: ${n}`)}}var GC=async(r,e)=>{let t=new Re(r).child(new Re(jC)),i=await(typeof e.getRaw=="function"?e.getRaw.bind(e):e.get.bind(e))(t);return WTe(new TextDecoder().decode(i||"").trim())};var C6=class extends hn{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw _n();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Re(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Re(e))}};async function*Ut(r,e){for await(let t of r)yield e(t)}async function*Or(...r){let e=Gt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}}),yield*e}var XTe=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},PW=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),HC=r=>r!=null&&typeof r.sink=="function"&&PW(r.source),QTe=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=Gt({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),Or(n,async function*(){yield*r.source,n.end()}())}return r.source};function Ke(r,...e){if(HC(r)){let n=r;r=()=>n.source}else if(PW(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&HC(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)HC(t[n])&&(t[n]=QTe(t[n]));return XTe(...t)}var Uf=class extends hn{constructor(e,t){super(),this.child=e,this.transform=t}open(){return this.child.open()}put(e,t,n){return this.child.put(this.transform.convert(e),t,n)}get(e,t){return this.child.get(this.transform.convert(e),t)}has(e,t){return this.child.has(this.transform.convert(e),t)}delete(e,t){return this.child.delete(this.transform.convert(e),t)}async*putMany(e,t={}){let n=this.transform,i=this.child;yield*Ke(e,async function*(o){yield*Ut(o,({key:s,value:a})=>({key:n.convert(s),value:a}))},async function*(o){yield*i.putMany(o,t)},async function*(o){yield*Ut(o,({key:s,value:a})=>({key:n.invert(s),value:a}))})}async*getMany(e,t={}){let n=this.transform,i=this.child;yield*Ke(e,async function*(o){yield*Ut(o,s=>n.convert(s))},async function*(o){yield*i.getMany(o,t)})}async*deleteMany(e,t={}){let n=this.transform,i=this.child;yield*Ke(e,async function*(o){yield*Ut(o,s=>n.convert(s))},async function*(o){yield*i.deleteMany(o,t)},async function*(o){yield*Ut(o,s=>n.invert(s))})}batch(){let e=this.child.batch();return{put:(t,n)=>{e.put(this.transform.convert(t),n)},delete:t=>{e.delete(this.transform.convert(t))},commit:t=>e.commit(t)}}query(e,t){let n={...e};n.filters=(n.filters||[]).map(o=>({key:s,value:a})=>o({key:this.transform.convert(s),value:a}));let{prefix:i}=e;return i!=null&&i!=="/"&&(delete n.prefix,n.filters.push(({key:o})=>this.transform.invert(o).toString().startsWith(i))),n.orders&&(n.orders=n.orders.map(o=>(s,a)=>o({key:this.transform.invert(s.key),value:s.value},{key:this.transform.invert(a.key),value:a.value}))),Ut(this.child.query(n,t),({key:o,value:s})=>({key:this.transform.invert(o),value:s}))}queryKeys(e,t){let n={...e};n.filters=(n.filters||[]).map(o=>s=>o(this.transform.convert(s)));let{prefix:i}=e;return i!=null&&i!=="/"&&(delete n.prefix,n.filters.push(o=>this.transform.invert(o).toString().startsWith(i))),n.orders&&(n.orders=n.orders.map(o=>(s,a)=>o(this.transform.invert(s),this.transform.invert(a)))),Ut(this.child.queryKeys(n,t),o=>this.transform.invert(o))}close(){return this.child.close()}};var Ff=new Re(jC),R6=new Re(kW),k6=class r extends hn{constructor(e,t){super(),this.child=new Uf(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=t}async open(){await this.child.open(),this.shard=await r.create(this.child,this.shard)}_convertKey(e){let t=e.toString();return t===Ff.toString()||t===R6.toString()?e:new Re(this.shard.fun(t)).child(e)}_invertKey(e){let t=e.toString();return t===Ff.toString()||t===R6.toString()?e:Re.withNamespaces(e.list().slice(1))}static async createOrOpen(e,t){try{await r.create(e,t)}catch(n){if(n&&n.message!=="datastore exists")throw n}return r.open(e)}static async open(e){let t=await GC("/",e);return new r(e,t)}static async create(e,t){let n=await e.has(Ff);if(!n&&!t)throw Kh(Error("Shard is required when datastore doesn't have a shard key already."));if(!n){let a=typeof e.putRaw=="function"?e.putRaw.bind(e):e.put.bind(e);return await Promise.all([a(Ff,new TextEncoder().encode(t.toString()+`
`)),a(R6,new TextEncoder().encode(zC))]),t}let i=await GC("/",e),o=(i||"").toString(),s=t.toString();if(o!==s)throw new Error(`specified fun ${s} does not match repo shard fun ${o}`);return i}put(e,t,n){return this.child.put(e,t,n)}get(e,t){return this.child.get(e,t)}has(e,t){return this.child.has(e,t)}delete(e,t){return this.child.delete(e,t)}async*putMany(e,t={}){yield*this.child.putMany(e,t)}async*getMany(e,t={}){yield*this.child.getMany(e,t)}async*deleteMany(e,t={}){yield*this.child.deleteMany(e,t)}batch(){return this.child.batch()}query(e,t){let n={...e,filters:[({key:i})=>i.toString()!==Ff.toString(),({key:i})=>i.toString()!==R6.toString()].concat(e.filters||[])};return this.child.query(n,t)}queryKeys(e,t){let n={...e,filters:[i=>i.toString()!==Ff.toString(),i=>i.toString()!==R6.toString()].concat(e.filters||[])};return this.child.queryKeys(n,t)}close(){return this.child.close()}};var P6=class extends hn{constructor(e){super(),this.mounts=e.slice()}async open(){await Promise.all(this.mounts.map(e=>e.datastore.open()))}_lookup(e){for(let t of this.mounts)if(t.prefix.toString()===e.toString()||t.prefix.isAncestorOf(e))return{datastore:t.datastore,mountpoint:t.prefix}}put(e,t,n){let i=this._lookup(e);if(i==null)throw Gh(new Error("No datastore mounted for this key"));return i.datastore.put(e,t,n)}get(e,t){let n=this._lookup(e);if(n==null)throw _n(new Error("No datastore mounted for this key"));return n.datastore.get(e,t)}has(e,t){let n=this._lookup(e);return n==null?Promise.resolve(!1):n.datastore.has(e,t)}delete(e,t){let n=this._lookup(e);if(n==null)throw jh(new Error("No datastore mounted for this key"));return n.datastore.delete(e,t)}async close(){await Promise.all(this.mounts.map(e=>e.datastore.close()))}batch(){let e={},t=n=>{let i=this._lookup(n);if(i==null)throw new Error("No datastore mounted for this key");let o=i.mountpoint.toString();return e[o]==null&&(e[o]=i.datastore.batch()),{batch:e[o]}};return{put:(n,i)=>{t(n).batch.put(n,i)},delete:n=>{t(n).batch.delete(n)},commit:async n=>{await Promise.all(Object.keys(e).map(i=>e[i].commit(n)))}}}query(e,t){let n=this.mounts.map(o=>o.datastore.query({prefix:e.prefix,filters:e.filters},t)),i=Or(...n);if(e.filters&&e.filters.forEach(o=>{i=vt(i,o)}),e.orders&&e.orders.forEach(o=>{i=Bf(i,o)}),e.offset!=null){let o=0;i=vt(i,()=>o++>=e.offset)}return e.limit!=null&&(i=$i(i,e.limit)),i}queryKeys(e,t){let n=this.mounts.map(o=>o.datastore.queryKeys({prefix:e.prefix,filters:e.filters},t)),i=Or(...n);if(e.filters&&e.filters.forEach(o=>{i=vt(i,o)}),e.orders&&e.orders.forEach(o=>{i=Bf(i,o)}),e.offset!=null){let o=0;i=vt(i,()=>o++>=e.offset)}return e.limit!=null&&(i=$i(i,e.limit)),i}};var Cg="/record/";function WC(r){return ie(r,"base32")}function D6(r){(typeof r=="string"||r instanceof String)&&(r=oe(r.toString()));let e=ie(r,"base64url");return`${Cg}${e}`}function DW(r){if(r.substring(0,Cg.length)!==Cg)throw new X("topic received is not from a record","ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");let e=r.substring(Cg.length);return oe(e,"base64url")}var fi=z("datastore-pubsub:publisher"),Rg=class extends hn{constructor(e,t,n,i,o,s){if(super(),!i)throw new X("missing validator","ERR_INVALID_PARAMETERS");if(typeof i!="function")throw new X("missing validate function","ERR_INVALID_PARAMETERS");if(typeof o!="function")throw new X("missing select function","ERR_INVALID_PARAMETERS");if(s&&typeof s!="function")throw new X("invalid subscriptionKeyFn received","ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=n,this._validator=i,this._selector=o,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t,n){if(!(e instanceof Uint8Array)){let o="datastore key does not have a valid format";throw fi.error(o),new X(o,"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){let o="received value is not a Uint8Array";throw fi.error(o),new X(o,"ERR_INVALID_VALUE_RECEIVED")}let i=D6(e);fi(`publish value for topic ${i}`),await this._pubsub.publish(i,t)}async get(e,t){if(!(e instanceof Uint8Array)){let o="datastore key does not have a valid format";throw fi.error(o),new X(o,"ERR_INVALID_DATASTORE_KEY")}let n=D6(e),i=await this._pubsub.getTopics();if(i&&Array.isArray(i)&&i.indexOf(n)>-1)return this._getLocal(e,t);try{await this._pubsub.subscribe(n)}catch{let s=`cannot subscribe topic ${n}`;throw fi.error(s),new X(s,"ERR_SUBSCRIBING_TOPIC")}return fi(`subscribed values for key ${n}`),this._getLocal(e)}unsubscribe(e){let t=D6(e);return this._pubsub.unsubscribe(t)}async _getLocal(e,t){let n=new Re("/"+WC(e),!1),i;try{i=await this._datastore.get(n,t)}catch(o){if(o.code!=="ERR_NOT_FOUND"){let a=`unexpected error getting the ipns record for ${n.toString()}`;throw fi.error(a),new X(a,"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s=`local record requested was not found for ${n.toString()}`;throw fi.error(s),new X(s,"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){let o="found record that we couldn't convert to a value";throw fi.error(o),new X(o,"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(e){let t=e.detail;if(t.type!=="signed"){fi.error("unsigned message received, this module can only work with signed messages");return}let{data:n,from:i,topic:o}=t,s;try{s=DW(o)}catch(a){fi.error(a);return}if(fi(`message received for topic ${o}`),this._peerId.equals(i)){fi("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let a;try{a=await this._handleSubscriptionKeyFn(s)}catch{fi.error("message discarded by the subscriptionKeyFn");return}s=a}try{await this._storeIfSubscriptionIsBetter(s,n)}catch(a){fi.error(a)}}async _storeIfSubscriptionIsBetter(e,t,n){let i=!1;try{i=await this._isBetter(e,t)}catch(o){if(o.code!=="ERR_NOT_VALID_RECORD")throw o}i&&await this._storeRecord(e,t,n)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){return await this._selector(e,t)===0}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch{let s="record received through pubsub is not valid";throw fi.error(s),new X(s,"ERR_NOT_VALID_RECORD")}let n=new Re(e),i;try{i=await this._getLocal(n.uint8Array())}catch{return!0}return ct(i,t)?!1:this._selectRecord(e,[i,t])}async _storeRecord(e,t,n){let i=new Re("/"+WC(e),!1);await this._datastore.put(i,t,n),fi(`record for ${D6(e)} was stored in the datastore`)}};var YC=L(fe(),1);var kg=z("ipfs:ipns:pubsub"),Dl=class{constructor(e,t,n){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new Rg(e,t,n,Of,Ag,this._handleSubscriptionKey)}async put(e,t,n){try{await this._pubsubDs.put(e,t,n)}catch(i){throw kg.error(i),i}}async get(e,t){let n,i;try{n=await this._pubsubDs.get(e,t)}catch(s){i=s}let o=e.slice(0,_g);if(ie(o)===b6){let s=nt.encode(e).substring(1),a=nt.encode(e.slice(_g)).substring(1);this._subscriptions[s]=a,kg(`subscribed to pubsub topic ${s}, id ${a}`)}if(i)throw i;return n}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=ie(e,"base58btc"));let t=this._subscriptions[e];if(!t)throw(0,YC.default)(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");try{return D2(Be(t))}catch(n){throw kg.error(n),n}}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(t=>`${b6}${t}`)}async cancel(e){if(typeof e!="string")throw(0,YC.default)(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(b6)&&(e=e.substring(_g));let t=Object.keys(this._subscriptions).find(i=>this._subscriptions[i]===e);if(!t)return{canceled:!1};let n=oe(t);return this._pubsubDs.unsubscribe(n),delete this._subscriptions[t],kg(`unsubscribed pubsub ${t}: ${e}`),{canceled:!0}}};var N6;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.key!=null&&t.key.byteLength>0&&(n.uint32(10),n.bytes(t.key)),t.value!=null&&t.value.byteLength>0&&(n.uint32(18),n.bytes(t.value)),t.timeReceived!=null&&t.timeReceived!==""&&(n.uint32(42),n.string(t.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.key=t.bytes();break;case 2:i.value=t.bytes();break;case 5:i.timeReceived=t.string();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(N6||(N6={}));function NW(r){let e=r.getUTCFullYear(),t=String(r.getUTCMonth()+1).padStart(2,"0"),n=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),o=String(r.getUTCMinutes()).padStart(2,"0"),s=String(r.getUTCSeconds()).padStart(2,"0"),a=r.getUTCMilliseconds(),c=String(a*1e3*1e3).padStart(9,"0");return`${e}-${t}-${n}T${i}:${o}:${s}.${c}Z`}function OW(r){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),t=String(r).trim().match(e);if(t==null)throw new Error("Invalid format");let n=parseInt(t[1],10),i=parseInt(t[2],10)-1,o=parseInt(t[3],10),s=parseInt(t[4],10),a=parseInt(t[5],10),c=parseInt(t[6],10),u=parseInt(t[7].slice(0,-6),10);return new Date(Date.UTC(n,i,o,s,a,c,u))}var En=class r{constructor(e,t,n){F(this,"key");F(this,"value");F(this,"timeReceived");if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=n}serialize(){return N6.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:NW(this.timeReceived)}}static deserialize(e){let t=N6.decode(e);return new r(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){let t=OW(e.timeReceived);if(e.key==null)throw new Error("key missing from deserialized object");if(e.value==null)throw new Error("value missing from deserialized object");return new r(e.key,e.value,t)}};var Vf=L(fe(),1);var XC=z("ipfs:ipns:offline-datastore"),zf=class{constructor(e){this._datastore=e,this.stores=[]}async put(e,t,n){if(!(e instanceof Uint8Array))throw(0,Vf.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(t instanceof Uint8Array))throw(0,Vf.default)(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let i;try{i=this._routingKey(e)}catch(s){throw XC.error(s),(0,Vf.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let o=new En(e,t,new Date);await this._datastore.put(i,o.serialize(),n)}async get(e,t){if(!(e instanceof Uint8Array))throw(0,Vf.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let n;try{n=this._routingKey(e)}catch(s){throw XC.error(s),(0,Vf.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let i=await this._datastore.get(n,t),o;try{o=En.deserialize(i)}catch(s){throw XC.error(s),s}return o.value}_routingKey(e){return new Re("/dht/record/"+ie(e,"base32"),!1)}};var JTe=z("ipfs:ipns:dht-datastore"),Pg=class{constructor(e){this._dht=e}async put(e,t,n){try{await or(this._dht.put(e,t,n))}catch(i){throw JTe.error(i),i}}async get(e,t){for await(let n of this._dht.get(e,t))if(n.name==="VALUE")return n.value;throw _n()}};function LW({libp2p:r,repo:e,peerId:t,options:n}){let i=[],o;if((0,O6.default)(n,"EXPERIMENTAL.ipnsPubsub",!1)&&(o=new Dl(r.pubsub,e.datastore,t),i.push(o)),(0,O6.default)(n,"offline",!1)!==!0&&["dht","dhtclient","dhtserver"].includes((0,O6.default)(n,"config.Routing.Type","none"))&&i.push(new Pg(r.dht)),(0,O6.default)(n,"offline",!1)||i.length===0){let s=new zf(e.datastore);i.push(s)}return new T6(i)}var eIe=z("ipfs:components:ipns"),Dg=class{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){let e=this.online||this.offline;if(e)return e;throw new rl}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:t,keychain:n}){if(this.offline!=null)throw new xc;eIe("initializing IPNS keyspace (offline)");let i=new zf(e.datastore),o=new S6(i,e.datastore,t,n,this.options);this.offline=o}async startOnline({libp2p:e,repo:t,peerId:n,keychain:i}){if(this.online!=null)throw new xc;let o=LW({libp2p:e,repo:t,peerId:n,options:this.options}),s=new S6(o,t.datastore,n,i,this.options);await s.republisher.start(),this.online=s}async stop(){let e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,t,n,i){return this.getIPNS().publish(e,t,n,i)}resolve(e,t){return this.getIPNS().resolve(e,t)}initializeKeyspace(e,t,n){return this.getIPNS().initializeKeyspace(e,t,n)}};var ZC=L(fe(),1);async function BW({ipns:r,repo:e,codecs:t},n,i){if(Tm(n))return r.resolve(n);let{cid:o,path:s}=Cc(n);await or(g2(o,s||"",t,e,i))}var QC=z("ipfs:name:publish");function MW({ipns:r,repo:e,codecs:t,peerId:n,isOnline:i,keychain:o}){let s=async c=>{let u;if(c==="self"&&n.privateKey!=null)u=await Xn(n.privateKey);else try{let l=await o.exportKey(c,"temp");u=await b1(l,"temp")}catch(l){throw QC.error(l),(0,ZC.default)(l,"ERR_CANNOT_GET_KEY")}return Sr(u.public.bytes,u.bytes)};async function a(c,u={}){let l=u.resolve!==!1,d=u.lifetime||"24h",h=u.key||"self";if(!i())throw(0,ZC.default)(new Error(Cm),"OFFLINE_ERROR");try{c=uK(c)}catch(E){throw QC.error(E),E}let f=0;try{f=p2(d)||0,f=parseFloat(f.toFixed(6))}catch(E){throw QC.error(E),E}let m=await Promise.all([s(h),l?BW({ipns:r,repo:e,codecs:t},c):Promise.resolve()]),w=oe(c),_=await r.publish(m[0],w,f,u);return{name:_.name,value:ie(_.value)}}return J(a)}var Ng=L(fe(),1);var zW=L(FW(),1);var rIe=Je.bind({ignoreUndefined:!0}),nIe=z("ipfs:name:resolve"),VW=(r,e)=>e.length>0?r+"/"+e.join("/"):r;function qW({dns:r,ipns:e,isOnline:t,options:{offline:n}}){async function*i(o,s={}){if(s=rIe({nocache:!1,recursive:!0},s),n&&s&&s.nocache)throw(0,Ng.default)(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!t()&&!n)throw(0,Ng.default)(new Error(Cm),"OFFLINE_ERROR");let a=o.toString();a.startsWith("/ipns/")||(a=`/ipns/${a}`);let[c,u,...l]=a.slice(1).split("/");try{if(u.substring(0,1)==="1"){let h=Be(u),f=Jr(h.toBytes());u=$.createV1(114,f).toString($d)}else{let h=$.parse(u);h.version===1&&(u=h.toString($d))}}catch(h){if((0,zW.default)(u)){yield VW(await r(u,s),l);return}throw nIe.error(h),(0,Ng.default)(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}let d=await e.resolve(`/${c}/${u}`,s);yield VW(d instanceof Uint8Array?ie(d):d,l)}return J(i)}var JC=L(fe(),1);function qf(r,e){if(!r||!(e&&e.ipnsPubsub))throw(0,JC.default)(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(r.routing instanceof Dl)return r.routing;let t=(r.routing.stores||[]).find(n=>n instanceof Dl);if(!t)throw(0,JC.default)(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return t}function $W({ipns:r,options:e}){let t=e.EXPERIMENTAL;async function n(i,o={}){return qf(r,t).cancel(i,o)}return J(n)}function KW({ipns:r,options:e}){let t=e.EXPERIMENTAL;async function n(i={}){try{return{enabled:!!qf(r,t)}}catch{return{enabled:!1}}}return J(n)}function jW({ipns:r,options:e}){let t=e.EXPERIMENTAL;async function n(i={}){return qf(r,t).getSubscriptions(i)}return J(n)}var Og=class{constructor({ipns:e,options:t}){this.cancel=$W({ipns:e,options:t}),this.state=KW({ipns:e,options:t}),this.subs=jW({ipns:e,options:t})}};var Lg=class{constructor({dns:e,ipns:t,repo:n,codecs:i,peerId:o,isOnline:s,keychain:a,options:c}){this.publish=MW({ipns:t,repo:n,codecs:i,peerId:o,isOnline:s,keychain:a}),this.resolve=qW({dns:e,ipns:t,isOnline:s,options:c}),this.pubsub=new Og({ipns:t,options:c})}};var GW=L(Dn(),1),HW=L(va(),1),iIe=_n().code,eR={default:"<dst>",edges:"<src> -> <dst>"};function WW({repo:r,codecs:e,resolve:t,preload:n}){async function*i(o,s={}){if(s.maxDepth===0)return;if(s.edges&&s.format&&s.format!==eR.default)throw new Error("Cannot set edges to true and also specify format");if(s.format=s.edges?eR.edges:s.format,typeof s.maxDepth!="number"&&(s.maxDepth=s.recursive?1/0:1),s.timeout){let l=[new GW.TimeoutController(s.timeout).signal];s.signal&&l.push(s.signal),s.signal=(0,HW.anySignal)(l)}let c=(Array.isArray(o)?o:[o]).map(u=>oIe(n,u,s));for(let u of c)try{yield*sIe(t,r,e,u,s)}catch(l){yield{ref:"",err:l.message}}}return i}function oIe(r,e,t){let{cid:n,path:i}=Cc(e);return t.preload!==!1&&r(n),`/ipfs/${n}${i||""}`}async function*sIe(r,e,t,n,i){let o=await r(n,i),{cid:s}=Cc(o),a=i.maxDepth!=null?i.maxDepth:1/0,c=i.unique||!1;for await(let u of cIe(e,t,s,a,c,i))u.parent&&(u.isDuplicate||(yield{ref:aIe(u.parent.cid,u.node.cid,u.node.name,i.format)}))}function aIe(r,e,t="",n=eR.default){let i=n.replace(/<src>/g,r.toString());return i=i.replace(/<dst>/g,e.toString()),i=i.replace(/<linkname>/g,t),i}async function*cIe(r,e,t,n,i,o){let s=new Set;async function*a(c,u){let l=u+1;if(!(l>n))try{for await(let d of uIe(r,e,c.cid,o))yield{parent:c,node:d,isDuplicate:i&&s.has(d.cid.toString())},i&&s.add(d.cid.toString()),yield*a(d,l)}catch(d){throw d.code===iIe&&(d.message=`Could not find object with CID: ${c.cid}`),d}}yield*a({cid:t},0)}async function*uIe(r,e,t,n){let i=await r.blocks.get(t,n),s=(await e.getCodec(t.code)).decode(i),a=t.code===St,c=[];for(let[u,l]of tR(s,c)){if(a){let d=u.match(/^Links\/(\d+)\/Hash$/);if(d){let h=Number(d[1]);if(h<s.Links.length){yield{name:s.Links[h].Name,cid:l};continue}}}yield{name:u,cid:l}}}var tR=function*(r,e){if(r!=null&&!(r instanceof Uint8Array)){for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,s]of n.entries()){let a=[...i,o],c=$.asCID(s);c?yield[a.join("/"),c]:typeof s=="object"&&(yield*tR(s,a))}else{let o=$.asCID(n);o?yield[i.join("/"),o]:yield*tR(n,i)}}return[]}};function YW({repo:r}){async function*e(t={}){for await(let n of r.blocks.queryKeys({},{signal:t.signal}))yield{ref:n.toString()}}return J(e)}function XW({network:r}){async function e(t={}){let{bitswap:n}=await r.use(t),i=n.getWantlist();return Array.from(i).map(o=>o[1].cid)}return J(e)}function QW({network:r}){async function e(t,n={}){let{bitswap:i}=await r.use(n),o=i.wantlistForPeer(t);return Array.from(o).map(s=>s[1].cid)}return J(e)}function ZW({network:r}){async function e(t,n={}){let{bitswap:i}=await r.use(n);return Array.isArray(t)||(t=[t]),i.unwant(t)}return J(e)}function Bg({network:r}){async function e(t={}){let n=(await r.use(t)).bitswap,i=n.stat().snapshot;return{provideBufLen:parseInt(i.providesBufferLength.toString()),blocksReceived:BigInt(i.blocksReceived.toString()),wantlist:Array.from(n.getWantlist()).map(o=>o[1].cid),peers:n.peers(),dupBlksReceived:BigInt(i.dupBlksReceived.toString()),dupDataReceived:BigInt(i.dupDataReceived.toString()),dataReceived:BigInt(i.dataReceived.toString()),blocksSent:BigInt(i.blocksSent.toString()),dataSent:BigInt(i.dataSent.toString())}}return J(e)}var Mg=class{constructor({network:e}){this.wantlist=XW({network:e}),this.wantlistForPeer=QW({network:e}),this.unwant=ZW({network:e}),this.stat=Bg({network:e})}};var lIe=He("dns4"),dIe=He("dns6"),fIe=He("dnsaddr"),Ol=hi(He("dns"),fIe,lIe,dIe),Ug=hi(He("ip4"),He("ip6")),$f=hi(pt(Ug,He("tcp")),pt(Ol,He("tcp"))),iR=pt(Ug,He("udp")),hIe=pt(iR,He("utp")),pIe=pt(iR,He("quic")),L6=hi(pt($f,He("ws")),pt(Ol,He("ws"))),B6=hi(pt($f,He("wss")),pt(Ol,He("wss")),pt($f,He("tls"),He("ws")),pt(Ol,He("tls"),He("ws"))),rR=hi(pt($f,He("http")),pt(Ug,He("http")),pt(Ol,He("http"))),nR=hi(pt($f,He("https")),pt(Ug,He("https")),pt(Ol,He("https"))),JW=pt(iR,He("webrtc"),He("certhash")),tY=hi(pt(JW,He("p2p")),JW),rY=hi(pt(L6,He("p2p-webrtc-star"),He("p2p")),pt(B6,He("p2p-webrtc-star"),He("p2p")),pt(L6,He("p2p-webrtc-star")),pt(B6,He("p2p-webrtc-star"))),Flt=hi(pt(L6,He("p2p-websocket-star"),He("p2p")),pt(B6,He("p2p-websocket-star"),He("p2p")),pt(L6,He("p2p-websocket-star")),pt(B6,He("p2p-websocket-star"))),nY=hi(pt(rR,He("p2p-webrtc-direct"),He("p2p")),pt(nR,He("p2p-webrtc-direct"),He("p2p")),pt(rR,He("p2p-webrtc-direct")),pt(nR,He("p2p-webrtc-direct"))),M6=hi(L6,B6,rR,nR,rY,nY,$f,hIe,pIe,Ol,tY),Vlt=hi(pt(M6,He("p2p-stardust"),He("p2p")),pt(M6,He("p2p-stardust"))),N2=hi(pt(M6,He("p2p")),rY,nY,tY,He("p2p")),eY=hi(pt(N2,He("p2p-circuit"),N2),pt(N2,He("p2p-circuit")),pt(He("p2p-circuit"),N2),pt(M6,He("p2p-circuit")),pt(He("p2p-circuit"),M6),He("p2p-circuit")),iY=()=>hi(pt(eY,iY),eY),Nl=iY(),mIe=hi(pt(Nl,N2,Nl),pt(N2,Nl),pt(Nl,N2),Nl,N2),oY=mIe;function sY(r){function e(t){let n;try{n=Br(t)}catch{return!1}let i=r(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function pt(...r){function e(t){if(t.length<r.length)return null;let n=t;return r.some(i=>(n=typeof i=="function"?i().partialMatch(t):i.partialMatch(t),Array.isArray(n)&&(t=n),n===null)),n}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:sY(e),partialMatch:e}}function hi(...r){function e(n){let i=null;return r.some(o=>{let s=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return s!=null?(i=s,!0):!1}),i}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:sY(e),partialMatch:e}}function He(r){let e=r;function t(i){let o;try{o=Br(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:n}}function Fg(r){try{return oY.matches(r)}catch{return!1}}function aY({repo:r}){async function e(t,n={}){if(!Fg(t))throw new Error(`${t} is not a valid Multiaddr`);let i=await r.config.getAll(n),o=i.Bootstrap||[];return o.push(t.toString()),i.Bootstrap=Array.from(new Set(o)).sort((s,a)=>s.localeCompare(a)),await r.config.replace(i),{Peers:[t]}}return J(e)}var cY=Es.isIPv4,yIe=Es.isIPv6,oR=function(r){let e=0;if(r=r.toString().trim(),cY(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(yIe(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=cY(t[n]),s;o&&(s=oR(t[n]),t[n]=ie(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,ie(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},uY=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var U6={},sR={},bIe=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];bIe.forEach(r=>{let e=_Ie(...r);sR[e.code]=e,U6[e.name]=e});function _Ie(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:!!n,path:!!i}}function Ht(r){if(typeof r=="number"){if(sR[r]!=null)return sR[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(U6[r]!=null)return U6[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}var E1=L(v1(),1);function xY(r,e){switch(Ht(r).code){case 4:case 41:return LIe(e);case 42:return vY(e);case 6:case 273:case 33:case 132:return TY(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return vY(e);case 421:return FIe(e);case 444:return EY(e);case 445:return EY(e);case 466:return UIe(e);default:return ie(e,"base16")}}function SY(r,e){switch(Ht(r).code){case 4:return bY(e);case 41:return bY(e);case 42:return _Y(e);case 6:case 273:case 33:case 132:return lR(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return _Y(e);case 421:return BIe(e);case 444:return VIe(e);case 445:return zIe(e);case 466:return MIe(e);default:return oe(e,"base16")}}var uR=Object.values(vc).map(r=>r.decoder),OIe=function(){let r=uR[0].or(uR[1]);return uR.slice(2).forEach(e=>r=r.or(e)),r}();function bY(r){if(!u1(r))throw new Error("invalid ip address");return oR(r)}function LIe(r){let e=uY(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!u1(e))throw new Error("invalid ip address");return e}function lR(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function TY(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function _Y(r){let e=oe(r),t=Uint8Array.from(E1.default.encode(e.length));return Ye([t,e],t.length+e.length)}function vY(r){let e=E1.default.decode(r);if(r=r.slice(E1.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return ie(r)}function BIe(r){let e;r[0]==="Q"||r[0]==="1"?e=Jr(nt.decode(`z${r}`)).bytes:e=$.parse(r).multihash.bytes;let t=Uint8Array.from(E1.default.encode(e.length));return Ye([t,e],t.length+e.length)}function MIe(r){let e=OIe.decode(r),t=Uint8Array.from(E1.default.encode(e.length));return Ye([t,e],t.length+e.length)}function UIe(r){let e=E1.default.decode(r),t=r.slice(E1.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+ie(t,"base64url")}function FIe(r){let e=E1.default.decode(r),t=r.slice(E1.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return ie(t,"base58btc")}function VIe(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=zt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=lR(n);return Ye([t,i],t.length+i.length)}function zIe(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=zt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=lR(n);return Ye([t,i],t.length+i.length)}function EY(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=ie(e,"base32"),i=TY(t);return`${n}:${i}`}var Kf=L(v1(),1);function qIe(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=Ht(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw AY("invalid address: "+r);if(o.path===!0){e.push([i,mR(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function $Ie(r){let e=[];return r.map(t=>{let n=qg(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),mR(e.join("/"))}function KIe(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=qg(e);return e.length>1?[t.code,SY(t.code,e[1])]:[t.code]})}function dR(r){return r.map(e=>{let t=qg(e);return e[1]!=null?[t.code,xY(t.code,e[1])]:[t.code]})}function fR(r){return zg(Ye(r.map(e=>{let t=qg(e),n=Uint8Array.from(Kf.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=Ye([n,e[1]])),n})))}function hR(r,e){return r.size>0?r.size/8:r.size===0?0:Kf.default.decode(e)+(Kf.default.decode.bytes??0)}function Vg(r){let e=[],t=0;for(;t<r.length;){let n=Kf.default.decode(r,t),i=Kf.default.decode.bytes??0,o=Ht(n),s=hR(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let a=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw AY("Invalid address Uint8Array: "+ie(r,"base16"));e.push([n,a])}return e}function pR(r){let e=Vg(r),t=dR(e);return $Ie(t)}function jIe(r){r=mR(r);let e=qIe(r),t=KIe(e);return fR(t)}function IY(r){return jIe(r)}function zg(r){let e=GIe(r);if(e!=null)throw e;return Uint8Array.from(r)}function GIe(r){try{Vg(r)}catch(e){return e}}function mR(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function AY(r){return new Error("Error parsing address: "+r)}function qg(r){return Ht(r[0])}var yR=L(v1(),1);var RY=L(fe(),1);var jf=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},gR=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},F6,V6,z6,CY,WIe=Symbol.for("nodejs.util.inspect.custom"),YIe=[Ht("dns").code,Ht("dns4").code,Ht("dns6").code,Ht("dnsaddr").code],wR=new Map,kY=Symbol.for("@multiformats/js-multiaddr/multiaddr");function PY(r,e){if(r==null)throw new Error("requires node address object");if(e==null)throw new Error("requires transport protocol");let t,n=r.address;switch(r.family){case 4:t="ip4";break;case 6:if(t="ip6",n.includes("%")){let i=n.split("%");if(i.length!==2)throw Error("Multiple ip6 zones in multiaddr");n=i[0],t=`/ip6zone/${i[1]}/ip6`}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new $g("/"+[t,n,e,r.port].join("/"))}function Ki(r){return!!(r!=null&&r[kY])}var $g=class r{constructor(e){if(F6.set(this,void 0),V6.set(this,void 0),z6.set(this,void 0),this[CY]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=zg(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=IY(e)}else if(Ki(e))this.bytes=zg(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return jf(this,F6,"f")==null&&gR(this,F6,pR(this.bytes),"f"),jf(this,F6,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,i,o="",s=Ht("tcp"),a=Ht("udp"),c=Ht("ip4"),u=Ht("ip6"),l=Ht("dns6"),d=Ht("ip6zone");for(let[f,m]of this.stringTuples())f===d.code&&(o=`%${m??""}`),YIe.includes(f)&&(t=s.name,i=443,n=`${m??""}${o}`,e=f===l.code?6:4),(f===s.code||f===a.code)&&(t=Ht(f).name,i=parseInt(m??"")),(f===c.code||f===u.code)&&(t=Ht(f).name,n=`${m??""}${o}`,e=f===u.code?6:4);if(e==null||t==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},Ht(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=yR.default.decode(t,n),o=yR.default.decode.bytes??0,s=Ht(i),a=hR(s,t.slice(n+o));n+=a+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return jf(this,V6,"f")==null&&gR(this,V6,Vg(this.bytes),"f"),jf(this,V6,"f")}stringTuples(){return jf(this,z6,"f")==null&&gR(this,z6,dR(this.tuples()),"f"),jf(this,z6,"f")}encapsulate(e){return e=new r(e),new r(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new r(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new r(fR(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===U6.ipfs.code).pop();if((t==null?void 0:t[1])!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?ie(nt.decode(`z${n}`),"base58btc"):ie($.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>Ht(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return ct(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=wR.get(t.name);if(n==null)throw(0,RY.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new r(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(F6=new WeakMap,V6=new WeakMap,z6=new WeakMap,CY=kY,WIe)](){return`Multiaddr(${pR(this.bytes)})`}};function Ee(r){return new $g(r)}function DY({repo:r}){async function e(t={}){let n=await r.config.getAll(t),i=n.Bootstrap||[];return n.Bootstrap=[],await r.config.replace(n),{Peers:i.map(o=>Ee(o))}}return J(e)}function NY({repo:r}){async function e(t={}){return{Peers:(await r.config.get("Bootstrap",t)||[]).map(i=>Ee(i))}}return J(e)}var Mc=()=>({Addresses:{Swarm:["/ip4/0.0.0.0/tcp/4002","/ip4/127.0.0.1/tcp/4003/ws"],Announce:[],NoAnnounce:[],API:"/ip4/127.0.0.1/tcp/5002",Gateway:"/ip4/127.0.0.1/tcp/9090",RPC:"/ip4/127.0.0.1/tcp/5003",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!0,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/ip4/104.131.131.82/tcp/4001/p2p/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ","/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Router:"gossipsub",Enabled:!0},Swarm:{ConnMgr:{LowWater:50,HighWater:200},DisableNatPortMap:!1},Routing:{Type:"dhtclient"}});function OY({repo:r}){async function e(t={}){let n=await r.config.getAll(t);return n.Bootstrap=Mc().Bootstrap,await r.config.replace(n),{Peers:Mc().Bootstrap.map(i=>Ee(i))}}return J(e)}function LY({repo:r}){async function e(t,n={}){if(!Fg(t))throw new Error(`${t} is not a valid Multiaddr`);let i=await r.config.getAll(n);return i.Bootstrap=(i.Bootstrap||[]).filter(o=>o.toString()!==t.toString()),await r.config.replace(i),{Peers:[t]}}return J(e)}var Kg=class{constructor({repo:e}){this.add=aY({repo:e}),this.list=NY({repo:e}),this.rm=LY({repo:e}),this.clear=DY({repo:e}),this.reset=OY({repo:e})}};function BY({preload:r,repo:e}){async function t(n,i={}){return i.preload!==!1&&r(n),e.blocks.get(n,i)}return J(t)}function MY({codecs:r,hashers:e,repo:t,preload:n}){async function i(o,s={}){let a=s.pin?await t.gcLock.readLock():null;try{let c=s.version!=null?s.version:0,u=s.format||(c===0?"dag-pb":"raw"),d=await(await e.getHasher(s.mhtype||"sha2-256")).digest(o),h=await r.getCodec(u),f=$.create(c,h.code,d);return await t.blocks.put(f,o,{signal:s.signal}),s.preload!==!1&&n(f),s.pin===!0&&await t.pins.pinRecursively(f,{signal:s.signal}),f}finally{a&&a()}}return J(i)}var UY=L(fe(),1);var jg=globalThis.CustomEvent??Event;async function*Uc(r,e={}){let t=e.concurrency??1/0;t<1&&(t=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=jt(),a=jt(),c=!1,u,l=!1;i.addEventListener("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let m of r){if(o.length===t&&(s=jt(),await s.promise),l)break;let w={done:!1};o.push(w),m().then(_=>{w.done=!0,w.ok=!0,w.value=_,i.dispatchEvent(new jg("task-complete"))},_=>{w.done=!0,w.err=_,i.dispatchEvent(new jg("task-complete"))})}c=!0,i.dispatchEvent(new jg("task-complete"))}catch(m){u=m,i.dispatchEvent(new jg("task-complete"))}});function d(){var m;return n?(m=o[0])==null?void 0:m.done:!!o.find(w=>w.done)}function*h(){for(;o.length>0&&o[0].done;){let m=o[0];if(o.shift(),m.ok)yield m.value;else throw l=!0,s.resolve(),m.err;s.resolve()}}function*f(){for(;d();)for(let m=0;m<o.length;m++)if(o[m].done){let w=o[m];if(o.splice(m,1),m--,w.ok)yield w.value;else throw l=!0,s.resolve(),w.err;s.resolve()}}for(;;){if(d()||(a=jt(),await a.promise),u!=null)throw u;if(n?yield*h():yield*f(),c&&o.length===0)break}}function Gg(r){return r instanceof Uint8Array?$.decode(r):$.parse(r.toString())}var XIe=8;function FY({repo:r}){async function*e(t,n={}){Array.isArray(t)||(t=[t]);let i=await r.gcLock.writeLock();try{yield*Ke(t,o=>Ut(o,s=>async()=>{s=Gg(s);let a={cid:s};try{if(!await r.blocks.has(s))throw(0,UY.default)(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await r.blocks.delete(s)}catch(c){n.force||(c.message=`cannot remove ${s}: ${c.message}`,a.error=c)}return a}),o=>Uc(o,{concurrency:XIe}),o=>vt(o,()=>!n.quiet))}finally{i()}}return J(e)}function VY({repo:r,preload:e}){async function t(n,i={}){n=Gg(n),i.preload!==!1&&e(n);let o=await r.blocks.get(n);return{cid:n,size:o.length}}return J(t)}var Hg=class{constructor({codecs:e,hashers:t,preload:n,repo:i}){this.get=BY({preload:n,repo:i}),this.put=MY({codecs:e,hashers:t,preload:n,repo:i}),this.rm=FY({repo:i}),this.stat=VY({preload:n,repo:i})}};var zY=L(fe(),1);async function*uo(r,e={}){let t=r.getReader();try{for(;;){let n=await t.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function bR(r){return typeof r.stream=="function"?uo(r.stream()):uo(new Response(r).body)}function Vo(r){let[e,t]=r[Symbol.asyncIterator]!=null?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}function Ds(r){return ArrayBuffer.isView(r)||r instanceof ArrayBuffer}function Fc(r){return r.constructor&&(r.constructor.name==="Blob"||r.constructor.name==="File")&&typeof r.stream=="function"}function q6(r){return typeof r=="object"&&(r.path||r.content)}var Vc=r=>r&&typeof r.getReader=="function";async function*Wg(r){yield r}async function Yg(r){if(Ds(r))return Wg(_R(r));if(typeof r=="string"||r instanceof String)return Wg(_R(r.toString()));if(Fc(r))return bR(r);if(Vc(r)&&(r=uo(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let e=Vo(r),{value:t,done:n}=await e.peek();if(n)return Wg(new Uint8Array(0));if(e.push(t),Number.isInteger(t))return Wg(Uint8Array.from(await Pn(e)));if(Ds(t)||typeof t=="string"||t instanceof String)return Ut(e,_R)}throw(0,zY.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}function _R(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Array.isArray(r)?Uint8Array.from(r):oe(r.toString())}var Qg=L(fe(),1);async function*qY(r,e){if(r==null)throw(0,Qg.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT");if(typeof r=="string"||r instanceof String){yield Xg(r.toString(),e);return}if(Ds(r)||Fc(r)){yield Xg(r,e);return}if(Vc(r)&&(r=uo(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let t=Vo(r),{value:n,done:i}=await t.peek();if(i){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Ds(n)||typeof n=="string"||n instanceof String){yield Xg(t,e);return}throw(0,Qg.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(q6(r)){yield Xg(r,e);return}throw(0,Qg.default)(new Error('Unexpected input: cannot convert "'+typeof r+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Xg(r,e){let{path:t,mode:n,mtime:i,content:o}=r,s={path:t||"",mode:yc(n),mtime:t2(i)};return o?s.content=await e(o):t||(s.content=await e(r)),s}function Zg(r){return qY(r,Yg)}function $Y({addAll:r}){async function e(t,n={}){let i=await _r(r(Zg(t),n));if(i==null)throw Error("Failed to add a file, if you see this please report a bug");return i}return e}async function*Ll(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}async function*Bl(r,e=1){for await(let t of Ll(r,e)){let n=t.map(async i=>await i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}var ey=L(GY(),1);function QIe(r){let e=new Array(4);for(let t=0;t<4;t++)e[t]=r&255,r=r>>8;return new Uint8Array(e)}var Fdt=Yu({name:"murmur3-32",code:35,encode:r=>QIe(ey.default.x86.hash32(r))}),Ml=Yu({name:"murmur3-128",code:34,encode:r=>gd.fromHex(ey.default.x64.hash128(r))}),Vdt=Yu({name:"murmur3-x64-64",code:34,encode:r=>gd.fromHex(ey.default.x64.hash128(r)).subarray(0,8)});async function ZIe(r){return(await Ml.encode(r)).slice(0,8).reverse()}var JIe={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:ot,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:ZIe,hamtHashCode:34,hamtBucketBits:8},HY=(r={})=>Je.bind({ignoreUndefined:!0})(JIe,r);var eAe=async(r,e,t)=>{t.codec||(t.codec=$t),t.hasher||(t.hasher=ot),t.cidVersion===void 0&&(t.cidVersion=1),t.codec===$t&&t.hasher!==ot&&(t.cidVersion=1);let n=await t.hasher.digest(r),i=$.create(t.cidVersion,t.codec.code,n);return t.onlyHash||await e.put(i,r,{signal:t.signal}),i},Ba=eAe;var tAe=async(r,e,t)=>{let n=new gt({type:"directory",mtime:r.mtime,mode:r.mode}),i=dt($n({Data:n.marshal()})),o=await Ba(i,e,t),s=r.path;return{cid:o,path:s,unixfs:n,size:i.length}},WY=tAe;var eX=L(fe(),1);async function rAe(r,e){return e(await Pn(r))}var YY=rAe;function nAe(r,e,t){return XY(r,e,t)}async function XY(r,e,t){let n=[];for await(let i of Ll(r,t.maxChildrenPerNode))n.push(await e(i));return n.length>1?XY(n,e,t):n[0]}var QY=nAe;async function iAe(r,e,t){let n=new vR(t.layerRepeat),i=0,o=1,s=n;for await(let a of Ll(r,t.maxChildrenPerNode))s.isFull()&&(s!==n&&n.addChild(await s.reduce(e)),i&&i%t.layerRepeat===0&&o++,s=new ty(o,t.layerRepeat,i),i++),s.append(a);return s&&s!==n&&n.addChild(await s.reduce(e)),n.reduce(e)}var ZY=iAe,ty=class{constructor(e,t,n=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;let t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let n=[];return e.children.length&&(n=await Promise.all(e.children.filter(i=>i.data).map(i=>this._reduce(i,t)))),t((e.data||[]).concat(n))}_findParent(e,t){let n=e.parent;if(!(!n||n.depth===0))return n.children.length===n.maxChildren||!n.maxChildren?this._findParent(n,t):n}},vR=class extends ty{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}};async function*oAe(r,e,t){for await(let n of r.content)yield async()=>{t.progress(n.length,r.path);let i,o={codec:$t,cidVersion:t.cidVersion,hasher:t.hasher,onlyHash:t.onlyHash};return t.rawLeaves?(o.codec=io,o.cidVersion=1):(i=new gt({type:t.leafType,data:n}),n=dt({Data:i.marshal(),Links:[]})),{cid:await Ba(n,e,o),unixfs:i,size:n.length}}}var JY=oAe;var sAe={flat:YY,balanced:QY,trickle:ZY};async function*aAe(r,e,t){let n=-1,i,o;typeof t.bufferImporter=="function"?o=t.bufferImporter:o=JY;for await(let s of Bl(o(r,e,t),t.blockWriteConcurrency)){if(n++,n===0){i=s;continue}else n===1&&i&&(yield i,i=null);yield s}i&&(i.single=!0,yield i)}var cAe=(r,e,t)=>{async function n(i){if(i.length===1&&i[0].single&&t.reduceSingleLeafToSelf){let l=i[0];if(r.mtime!==void 0||r.mode!==void 0){let d=await e.get(l.cid);l.unixfs=new gt({type:"file",mtime:r.mtime,mode:r.mode,data:d}),d=dt($n({Data:l.unixfs.marshal()})),l.cid=await Ba(d,e,{...t,codec:$t,hasher:t.hasher,cidVersion:t.cidVersion}),l.size=d.length}return{cid:l.cid,path:r.path,unixfs:l.unixfs,size:l.size}}let o=new gt({type:"file",mtime:r.mtime,mode:r.mode}),s=i.filter(l=>l.cid.code===jn&&l.size||l.unixfs&&!l.unixfs.data&&l.unixfs.fileSize()?!0:!!(l.unixfs&&l.unixfs.data&&l.unixfs.data.length)).map(l=>l.cid.code===jn?(o.addBlockSize(l.size),{Name:"",Tsize:l.size,Hash:l.cid}):(!l.unixfs||!l.unixfs.data?o.addBlockSize(l.unixfs&&l.unixfs.fileSize()||0):o.addBlockSize(l.unixfs.data.length),{Name:"",Tsize:l.size,Hash:l.cid})),a={Data:o.marshal(),Links:s},c=dt($n(a));return{cid:await Ba(c,e,t),path:r.path,unixfs:o,size:c.length+a.Links.reduce((l,d)=>l+d.Tsize,0)}}return n};function uAe(r,e,t){let n=sAe[t.strategy];if(!n)throw(0,eX.default)(new Error(`Unknown importer build strategy name: ${t.strategy}`),"ERR_BAD_STRATEGY");return n(aAe(r,e,t),cAe(r,e,t),t)}var tX=uAe;var CR=L(fe(),1);var iX=Symbol.for("@achingbrain/uint8arraylist");function rX(r,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let t=0;for(let n of r){let i=t+n.byteLength;if(e<i)return{buf:n,index:e-t};t=i}throw new RangeError("index is out of bounds")}function x1(r){return!!(r!=null&&r[iX])}var nX,lt=class r{constructor(...e){F(this,"bufs");F(this,"length");F(this,nX,!0);this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[(nX=iX,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(let n of e)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(x1(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(let n of e.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(x1(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(e){let t=rX(this.bufs,e);return t.buf[t.index]}set(e,t){let n=rX(this.bufs,e);n.buf[n.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(t+n,e[n]);else if(x1(e))for(let n=0;n<e.length;n++)this.set(t+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,t){let{bufs:n,length:i}=this._subList(e,t);return li(n,i)}subarray(e,t){let{bufs:n,length:i}=this._subList(e,t);return n.length===1?n[0]:li(n,i)}sublist(e,t){let{bufs:n,length:i}=this._subList(e,t),o=new r;return o.length=i,o.bufs=[...n],o}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(e===0&&t===this.length)return{bufs:this.bufs,length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,c=a+s.byteLength;if(i=c,e>=c)continue;let u=e>=a&&e<c,l=t>a&&t<=c;if(u&&l){if(e===a&&t===c){n.push(s);break}let d=e-a;n.push(s.subarray(d,d+(t-e)));break}if(u){if(e===0){n.push(s);continue}n.push(s.subarray(e-a));continue}if(l){if(t===c){n.push(s);break}n.push(s.subarray(0,t-a));break}n.push(s)}return{bufs:n,length:t-e}}indexOf(e,t=0){if(!x1(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let d=0;d<o;d++)s[d]=-1;for(let d=0;d<i;d++)s[n[d]]=d;let a=s,c=this.byteLength-n.byteLength,u=n.byteLength-1,l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){let f=this.get(d+h);if(n[h]!==f){l=Math.max(1,h-a[f]);break}}if(l===0)return d}return-1}getInt8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){let n=oo(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,e)}getInt16(e,t){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(e,t,n){let i=Tc(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,t,n),this.write(i,e)}getInt32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(e,t,n){let i=Tc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,t,n),this.write(i,e)}getBigInt64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(e,t,n){let i=Tc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,t,n),this.write(i,e)}getUint8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){let n=oo(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,e)}getUint16(e,t){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(e,t,n){let i=Tc(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,t,n),this.write(i,e)}getUint32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(e,t,n){let i=Tc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,t,n),this.write(i,e)}getBigUint64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(e,t,n){let i=Tc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,t,n),this.write(i,e)}getFloat32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(e,t,n){let i=Tc(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,t,n),this.write(i,e)}getFloat64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(e,t,n){let i=Tc(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,t,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof r)||e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!mm(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){let n=new r;return n.bufs=e,t==null&&(t=e.reduce((i,o)=>i+o.byteLength,0)),n.length=t,n}};var wX=L(yX(),1),IR=L(fe(),1);async function*gAe(r,e){let t,n,i;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)i=e.avgChunkSize,t=e.minChunkSize,n=e.maxChunkSize;else if(e.avgChunkSize)i=e.avgChunkSize,t=i/3,n=i+i/2;else throw(0,IR.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(t<16)throw(0,IR.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");n<t&&(n=t),i<t&&(i=t);let o=Math.floor(Math.log2(i));for await(let s of yAe(r,{min:t,max:n,bits:o,window:e.window,polynomial:e.polynomial}))yield s}var bX=gAe;async function*yAe(r,e){let t=await(0,wX.create)(e.bits,e.min,e.max,e.window),n=new lt;for await(let i of r){n.append(i);let o=t.fingerprint(i);for(let s=0;s<o.length;s++){let a=o[s],c=n.slice(0,a);n.consume(a),yield c}}n.length&&(yield n.subarray(0))}async function*wAe(r,e){let t=new lt,n=0,i=!1,o=e.maxChunkSize;for await(let s of r)for(t.append(s),n+=s.length;n>=o;)if(yield t.slice(0,o),i=!0,o===t.length)t=new lt,n=0;else{let a=new lt;a.append(t.sublist(o)),t=a,n-=o}(!i||n)&&(yield t.subarray(0,n))}var _X=wAe;var AR=L(fe(),1);async function*bAe(r){for await(let e of r){if(e.length===void 0)throw(0,AR.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield oe(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,AR.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var vX=bAe;function _Ae(r){return Symbol.iterator in r}function vAe(r){return Symbol.asyncIterator in r}function EAe(r){try{if(r instanceof Uint8Array)return async function*(){yield r}();if(_Ae(r))return async function*(){yield*r}();if(vAe(r))return r}catch{throw(0,CR.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,CR.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*xAe(r,e,t){for await(let n of r)if(n.path&&(n.path.substring(0,2)==="./"&&(t.wrapWithDirectory=!0),n.path=n.path.split("/").filter(i=>i&&i!==".").join("/")),n.content){let i;typeof t.chunker=="function"?i=t.chunker:t.chunker==="rabin"?i=bX:i=_X;let o;typeof t.chunkValidator=="function"?o=t.chunkValidator:o=vX;let s={path:n.path,mtime:n.mtime,mode:n.mode,content:i(o(EAe(n.content),t),t)};yield()=>tX(s,e,t)}else if(n.path){let i={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>WY(i,e,t)}else throw new Error("Import candidate must have content or path or both")}var EX=xAe;var RR=class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},O2=RR;var kR=class extends O2{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){let e=Object.keys(this._children);for(let t=0;t<e.length;t++){let n=e[t];yield{key:n,child:this._children[n]}}}async*flush(e){let t=Object.keys(this._children),n=[];for(let u=0;u<t.length;u++){let l=this._children[t[u]];if(l instanceof O2)for await(let d of l.flush(e))l=d,yield l;l.size!=null&&l.cid&&n.push({Name:t[u],Tsize:l.size,Hash:l.cid})}let i=new gt({type:"directory",mtime:this.mtime,mode:this.mode}),o={Data:i.marshal(),Links:n},s=dt($n(o)),a=await Ba(s,e,this.options),c=s.length+o.Links.reduce((u,l)=>u+(l.Tsize==null?0:l.Tsize),0);this.cid=a,this.size=c,yield{cid:a,unixfs:i,path:this.path,size:c}}},H6=kR;var IX=L(TX(),1);var ji=class r{constructor(e,t,n=0){F(this,"_options");F(this,"_popCount");F(this,"_parent");F(this,"_posAtParent");F(this,"_children");F(this,"key");this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new IX.default,this.key=null}async put(e,t){let n=await this._findNewBucketAndPos(e);n.bucket._putAt(n,e,t)}async get(e){let t=await this._findChild(e);if(t!=null)return t.value}async del(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);n!=null&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof r?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let t of e)t instanceof r?yield*t.eachLeafSeries():yield t}serialize(e,t){let n=[];return t(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof r?i.push(o.serialize(e,t)):i.push(e(o,s))),i),n))}async asyncTransform(e,t){return AX(this,e,t)}toJSON(){return this.serialize(CAe,RAe)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof r)&&n!=null&&n.key===e)return n}async _findPlace(e){let t=this._options.hash(typeof e=="string"?fr(e):e),n=await t.take(this._options.bits),i=this._children.get(n);return i instanceof r?i._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:i}}async _findNewBucketAndPos(e){let t=await this._findPlace(e);if(t.existingChild!=null&&t.existingChild.key!==e){let n=new r(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);let i=await n._findPlace(t.existingChild.hash);return i.bucket._putAt(i,t.existingChild.key,t.existingChild.value),n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)==null&&this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(AAe);if(e!=null&&!(e instanceof r)){let t=e.hash;t.untake(this._options.bits);let n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function AAe(r){return!!r}function CAe(r,e){return r.key}function RAe(r){return r}async function AX(r,e,t){let n=[];for(let i of r._children.compactArray())if(i instanceof ji)await AX(i,e,t);else{let o=await e(i);n.push({bitField:r._children.bitField(),children:o})}return t(n)}var kAe=[255,254,252,248,240,224,192,128],PAe=[1,3,7,15,31,63,127,255],ry=class{constructor(e){F(this,"_value");F(this,"_currentBytePos");F(this,"_currentBitPos");this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,t),a=DAe(i,o-s,s);n=(n<<s)+a,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function DAe(r,e,t){let n=NAe(e,t);return(r&n)>>>e}function NAe(r,e){return kAe[r]&PAe[Math.min(e+r-1,7)]}function CX(r){function e(t){return t instanceof ny?t:new ny(t,r)}return e}var ny=class{constructor(e,t){F(this,"_value");F(this,"_hashFn");F(this,"_depth");F(this,"_availableBits");F(this,"_currentBufferIndex");F(this,"_buffers");if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),t),s=i.take(o);n=(n<<o)+s,t-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?li([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new ry(t);this._buffers.push(n),this._availableBits+=n.availableBits()}};function L2(r){if(r==null||r.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:r.bits??8,hash:CX(r.hashFn)};return new ji(e)}var PR=class extends O2{constructor(e,t){super(e,t),this._bucket=L2({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(let t of kX(this._bucket,e,this,this.options))yield{...t,path:this.path}}},RX=PR;async function*kX(r,e,t,n){let i=r._children,o=[],s=0;for(let f=0;f<i.length;f++){let m=i.get(f);if(!m)continue;let w=f.toString(16).toUpperCase().padStart(2,"0");if(m instanceof ji){let _;for await(let E of await kX(m,e,null,n))_=E;if(!_)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:w,Tsize:_.size,Hash:_.cid}),s+=_.size}else if(typeof m.value.flush=="function"){let _=m.value,E;for await(let p of _.flush(e))E=p,yield E;let S=w+m.key;o.push({Name:S,Tsize:E.size,Hash:E.cid}),s+=E.size}else{let _=m.value;if(!_.cid)continue;let E=w+m.key,S=_.size;o.push({Name:E,Tsize:S,Hash:_.cid}),s+=S}}let a=Uint8Array.from(i.bitField().reverse()),c=new gt({type:"hamt-sharded-directory",data:a,fanout:r.tableSize(),hashType:n.hamtHashCode,mtime:t&&t.mtime,mode:t&&t.mode}),u={Data:c.marshal(),Links:o},l=dt($n(u)),d=await Ba(l,e,n),h=l.length+s;yield{cid:d,unixfs:c,size:h}}async function PX(r,e,t,n){let i=e;e instanceof H6&&e.directChildrenCount()>=t&&(i=await OAe(e,n));let o=i.parent;if(o){if(i!==e){if(r&&(r.parent=i),!i.parentKey)throw new Error("No parent key found");await o.put(i.parentKey,i)}return PX(i,o,t,n)}return i}async function OAe(r,e){let t=new RX({root:r.root,dir:!0,parent:r.parent,parentKey:r.parentKey,path:r.path,dirty:r.dirty,flat:!1,mtime:r.mtime,mode:r.mode},e);for await(let{key:n,child:i}of r.eachChildSeries())await t.put(n,i);return t}var DX=PX;var LAe=(r="")=>(r.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean),NX=LAe;async function BAe(r,e,t){let n=NX(r.path||""),i=n.length-1,o=e,s="";for(let a=0;a<n.length;a++){let c=n[a];s+=`${s?"/":""}${c}`;let u=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,u)await o.put(c,r),e=await DX(null,o,t.shardSplitThreshold,t);else{let l=await o.get(c);(!l||!(l instanceof O2))&&(l=new H6({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:l&&l.unixfs&&l.unixfs.mtime,mode:l&&l.unixfs&&l.unixfs.mode},t)),await o.put(c,l),o=l}}return e}async function*OX(r,e){if(!(r instanceof O2)){r&&r.unixfs&&r.unixfs.isDirectory()&&(yield r);return}yield*r.flush(e)}async function*MAe(r,e,t){let n=new H6({root:!0,dir:!0,path:"",dirty:!0,flat:!0},t);for await(let i of r)i&&(n=await BAe(i,n,t),(!i.unixfs||!i.unixfs.isDirectory())&&(yield i));if(t.wrapWithDirectory)yield*OX(n,e);else for await(let i of n.eachChildSeries())i&&(yield*OX(i.child,e))}var LX=MAe;async function*Gf(r,e,t={}){let n=HY(t),i;typeof t.dagBuilder=="function"?i=t.dagBuilder:i=EX;let o;typeof t.treeBuilder=="function"?o=t.treeBuilder:o=LX;let s;Symbol.asyncIterator in r||Symbol.iterator in r?s=r:s=[r];for await(let a of o(Bl(i(s,e,n),n.fileImportConcurrency),e,n))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}var W6=L(fe(),1);async function*iy(r,e){if(typeof r=="string"||r instanceof String||Ds(r)||Fc(r)||r._readableState)throw(0,W6.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Vc(r)&&(r=uo(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let t=Vo(r),{value:n,done:i}=await t.peek();if(i){yield*[];return}if(t.push(n),Number.isInteger(n))throw(0,W6.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*Ut(t,o=>DR({content:o},e));return}if(Ds(n)){yield DR({content:t},e);return}if(q6(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Vc(n)||Fc(n)){yield*Ut(t,o=>DR(o,e));return}}throw q6(r)?(0,W6.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,W6.default)(new Error("Unexpected input: "+typeof r),"ERR_UNEXPECTED_INPUT")}async function DR(r,e){let{path:t,mode:n,mtime:i,content:o}=r,s={path:t||"",mode:yc(n),mtime:t2(i)};return o?s.content=await e(o):t||(s.content=await e(r)),s}function oy(r){return iy(r,Yg)}var BX=r=>{if(r)if(r.startsWith("size-")){let e=r.split("-")[1],t=parseInt(e);if(isNaN(t))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:t}}else{if(r.startsWith("rabin"))return{chunker:"rabin",...UAe(r)};throw new Error(`Unrecognized chunker option: ${r}`)}else return{chunker:"fixed"}},UAe=r=>{let e={},t=r.split("-");switch(t.length){case 1:e.avgChunkSize=262144;break;case 2:e.avgChunkSize=sy(t[1],"avg");break;case 4:e.minChunkSize=sy(t[1],"min"),e.avgChunkSize=sy(t[2],"avg"),e.maxChunkSize=sy(t[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return e},sy=(r,e)=>{let t=parseInt(r);if(isNaN(t))throw new Error(`Chunker parameter ${e} must be an integer`);return t};var FAe=Je.bind({ignoreUndefined:!0});function MX({repo:r,preload:e,hashers:t,options:n}){let i=n&&n.sharding;async function*o(s,a={}){let c=FAe({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},a,{...BX(a.chunker)});c.hashAlg&&c.hashAlg!=="sha2-256"&&c.cidVersion!==1&&(c.cidVersion=1),c.trickle&&(c.strategy="trickle"),c.strategy==="trickle"&&(c.leafType="raw",c.reduceSingleLeafToSelf=!1),c.cidVersion>0&&c.rawLeaves===void 0&&(c.rawLeaves=!0),c.hashAlg!==void 0&&c.rawLeaves===void 0&&(c.rawLeaves=!0),delete c.trickle;let u={};if(c.progress){let f=c.progress;c.progress=(m,w)=>{u[w]||(u[w]=0),u[w]+=m,f(u[w],w)}}let l;c.hashAlg!=null&&(l=await t.getHasher(c.hashAlg));let d=Ke(oy(s),f=>Gf(f,r.blocks,{...c,hasher:l,pin:!1}),VAe(c),zAe(e,c),qAe(r,c)),h=await r.gcLock.readLock();try{for await(let f of d){let m=f.path??f.cid.toString();delete u[m],yield{...f,path:m}}}finally{h()}}return J(o)}function VAe(r){async function*e(t){for await(let n of t){let i=n.cid;r.cidVersion===1&&(i=i.toV1());let o=n.path?n.path:i.toString();r.wrapWithDirectory&&!n.path&&(o=""),yield{path:o,cid:i,size:n.size,mode:n.unixfs&&n.unixfs.mode,mtime:n.unixfs&&n.unixfs.mtime}}}return e}function zAe(r,e){async function*t(n){for await(let i of n)(!i.path||e.wrapWithDirectory?i.path==="":!i.path.includes("/"))&&!e.onlyHash&&e.preload!==!1&&r(i.cid),yield i}return t}function qAe(r,e){async function*t(n){for await(let i of n){let o=!(i.path&&i.path.includes("/"));(e.pin==null?!0:e.pin)&&o&&!e.onlyHash&&await r.pins.pinRecursively(i.cid),yield i}}return t}var by=L(fe(),1);var uQ=L(fe(),1);var wy=L(fe(),1);var $Ae=async function(r){return(await Ml.encode(r)).slice(0,8).reverse()},KAe=(r,e,t)=>Promise.all(r.map(n=>{if(n.Name==null)throw new Error("Unexpected Link without a Name");if(n.Name.length===2){let i=parseInt(n.Name,16);return e._putObjectAt(i,new ji({hash:t._options.hash,bits:t._options.bits},e,i))}return t.put(n.Name.substring(2),!0)})),UX=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),jAe=r=>{let e=r.bucket,t=[];for(;e._parent;)t.push(e),e=e._parent;return t.push(e),t.reverse()},FX=async(r,e,t,n,i)=>{if(!n){let l=L2({hashFn:$Ae});n={rootBucket:l,hamtDepth:1,lastBucket:l}}await KAe(r.Links,n.lastBucket,n.rootBucket);let o=await n.rootBucket._findNewBucketAndPos(e),s=UX(o.pos),a=jAe(o);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],s=UX(n.lastBucket._posAtParent));let c=r.Links.find(l=>{if(l.Name==null)return!1;let d=l.Name.substring(0,2),h=l.Name.substring(2);return!(d!==s||h&&h!==e)});if(!c)return null;if(c.Name!=null&&c.Name.substring(2)===e)return c.Hash;n.hamtDepth++;let u=await t.get(c.Hash,i);return r=qt(u),FX(r,e,t,n,i)},VX=FX;function GAe(r,e,t,n){let i=r.length,o=e+i;return t>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(r=r.subarray(0,n-e)),t>=e&&t<o&&(r=r.subarray(t-e)),r)}var Ul=GAe;var ay=L(fe(),1),HAe=(r,e,t)=>{if(e||(e=0),e<0)throw(0,ay.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>r)throw(0,ay.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!t&&t!==0&&(t=r-e),t<0)throw(0,ay.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+t>r&&(t=r-e),{offset:e,length:t}},Hf=HAe;var yy=L(fe(),1);var X6=L(qX(),1);var Q6=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},OR=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},$X=r=>globalThis.DOMException===void 0?new OR(r):new DOMException(r),KX=r=>{let e=r.reason===void 0?$X("This operation was aborted."):r.reason;return e instanceof Error?e:$X(e)};function LR(r,e,t,n){let i,o=new Promise((s,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:c}=n;c.aborted&&a(KX(c)),c.addEventListener("abort",()=>{a(KX(c))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{s(t())}catch(l){a(l)}return}let c=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,u=t instanceof Error?t:new Q6(c);typeof r.cancel=="function"&&r.cancel(),a(u)},e),(async()=>{try{s(await r)}catch(c){a(c)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}function BR(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;t(r[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Fl=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},zc,MR=class{constructor(){zc.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&Fl(this,zc,"f")[this.size-1].priority>=t.priority){Fl(this,zc,"f").push(n);return}let i=BR(Fl(this,zc,"f"),n,(o,s)=>s.priority-o.priority);Fl(this,zc,"f").splice(i,0,n)}dequeue(){let e=Fl(this,zc,"f").shift();return e==null?void 0:e.run}filter(e){return Fl(this,zc,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Fl(this,zc,"f").length}};zc=new WeakMap;var jX=MR;var Hr=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},$e=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},pn,J6,e8,M2,py,t8,uy,Ma,Z6,zo,ly,qo,r8,B2,dy,GX,HX,XX,WX,YX,fy,UR,FR,my,QX,hy,gy=class extends Error{},VR=class extends X6.default{constructor(e){var t,n,i,o;if(super(),pn.add(this),J6.set(this,void 0),e8.set(this,void 0),M2.set(this,0),py.set(this,void 0),t8.set(this,void 0),uy.set(this,0),Ma.set(this,void 0),Z6.set(this,void 0),zo.set(this,void 0),ly.set(this,void 0),qo.set(this,0),r8.set(this,void 0),B2.set(this,void 0),dy.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:jX,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Hr(this,J6,e.carryoverConcurrencyCount,"f"),Hr(this,e8,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Hr(this,py,e.intervalCap,"f"),Hr(this,t8,e.interval,"f"),Hr(this,zo,new e.queueClass,"f"),Hr(this,ly,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Hr(this,dy,e.throwOnTimeout===!0,"f"),Hr(this,B2,e.autoStart===!1,"f")}get concurrency(){return $e(this,r8,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Hr(this,r8,e,"f"),$e(this,pn,"m",my).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:$e(this,dy,"f"),...t},new Promise((n,i)=>{$e(this,zo,"f").enqueue(async()=>{var o,s,a;Hr(this,qo,(s=$e(this,qo,"f"),s++,s),"f"),Hr(this,M2,(a=$e(this,M2,"f"),a++,a),"f");try{if(!((o=t.signal)===null||o===void 0)&&o.aborted)throw new gy("The task was aborted.");let c=e({signal:t.signal});t.timeout&&(c=LR(Promise.resolve(c),t.timeout)),t.signal&&(c=Promise.race([c,$e(this,pn,"m",QX).call(this,t.signal)]));let u=await c;n(u),this.emit("completed",u)}catch(c){if(c instanceof Q6&&!t.throwOnTimeout){n();return}i(c),this.emit("error",c)}finally{$e(this,pn,"m",XX).call(this)}},t),this.emit("add"),$e(this,pn,"m",fy).call(this)})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return $e(this,B2,"f")?(Hr(this,B2,!1,"f"),$e(this,pn,"m",my).call(this),this):this}pause(){Hr(this,B2,!0,"f")}clear(){Hr(this,zo,new($e(this,ly,"f")),"f")}async onEmpty(){$e(this,zo,"f").size!==0&&await $e(this,pn,"m",hy).call(this,"empty")}async onSizeLessThan(e){$e(this,zo,"f").size<e||await $e(this,pn,"m",hy).call(this,"next",()=>$e(this,zo,"f").size<e)}async onIdle(){$e(this,qo,"f")===0&&$e(this,zo,"f").size===0||await $e(this,pn,"m",hy).call(this,"idle")}get size(){return $e(this,zo,"f").size}sizeBy(e){return $e(this,zo,"f").filter(e).length}get pending(){return $e(this,qo,"f")}get isPaused(){return $e(this,B2,"f")}};J6=new WeakMap,e8=new WeakMap,M2=new WeakMap,py=new WeakMap,t8=new WeakMap,uy=new WeakMap,Ma=new WeakMap,Z6=new WeakMap,zo=new WeakMap,ly=new WeakMap,qo=new WeakMap,r8=new WeakMap,B2=new WeakMap,dy=new WeakMap,pn=new WeakSet,GX=function(){return $e(this,e8,"f")||$e(this,M2,"f")<$e(this,py,"f")},HX=function(){return $e(this,qo,"f")<$e(this,r8,"f")},XX=function(){var e;Hr(this,qo,(e=$e(this,qo,"f"),e--,e),"f"),$e(this,pn,"m",fy).call(this),this.emit("next")},WX=function(){$e(this,pn,"m",FR).call(this),$e(this,pn,"m",UR).call(this),Hr(this,Z6,void 0,"f")},YX=function(){let e=Date.now();if($e(this,Ma,"f")===void 0){let t=$e(this,uy,"f")-e;if(t<0)Hr(this,M2,$e(this,J6,"f")?$e(this,qo,"f"):0,"f");else return $e(this,Z6,"f")===void 0&&Hr(this,Z6,setTimeout(()=>{$e(this,pn,"m",WX).call(this)},t),"f"),!0}return!1},fy=function(){if($e(this,zo,"f").size===0)return $e(this,Ma,"f")&&clearInterval($e(this,Ma,"f")),Hr(this,Ma,void 0,"f"),this.emit("empty"),$e(this,qo,"f")===0&&this.emit("idle"),!1;if(!$e(this,B2,"f")){let e=!$e(this,pn,"a",YX);if($e(this,pn,"a",GX)&&$e(this,pn,"a",HX)){let t=$e(this,zo,"f").dequeue();return t?(this.emit("active"),t(),e&&$e(this,pn,"m",UR).call(this),!0):!1}}return!1},UR=function(){$e(this,e8,"f")||$e(this,Ma,"f")!==void 0||(Hr(this,Ma,setInterval(()=>{$e(this,pn,"m",FR).call(this)},$e(this,t8,"f")),"f"),Hr(this,uy,Date.now()+$e(this,t8,"f"),"f"))},FR=function(){$e(this,M2,"f")===0&&$e(this,qo,"f")===0&&$e(this,Ma,"f")&&(clearInterval($e(this,Ma,"f")),Hr(this,Ma,void 0,"f")),Hr(this,M2,$e(this,J6,"f")?$e(this,qo,"f"):0,"f"),$e(this,pn,"m",my).call(this)},my=function(){for(;$e(this,pn,"m",fy).call(this););},QX=async function(e){return new Promise((t,n)=>{e.addEventListener("abort",()=>{n(new gy("The task was aborted."))},{once:!0})})},hy=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};var On=VR;async function ZX(r,e,t,n,i,o,s,a){if(e instanceof Uint8Array){t.push(Ul(e,n,i,o));return}if(e.Data==null)throw(0,yy.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=gt.unmarshal(e.Data)}catch(l){throw(0,yy.default)(l,"ERR_NOT_UNIXFS")}if(c.data!=null){let l=c.data,d=Ul(l,n,i,o);t.push(d),n+=d.byteLength}let u=[];for(let l=0;l<e.Links.length;l++){let d=e.Links[l],h=n,f=h+c.blockSizes[l];if((i>=h&&i<f||o>=h&&o<=f||i<h&&o>f)&&u.push({link:d,blockStart:n}),n=f,n>o)break}await Ke(u,l=>Ut(l,d=>async()=>{let h=await r.get(d.link.Hash,{signal:a.signal});return{...d,block:h}}),l=>Uc(l,{ordered:!0}),async l=>{for await(let{link:d,block:h,blockStart:f}of l){let m;switch(d.Hash.code){case St:m=qt(h);break;case jn:m=h;break;default:t.end((0,yy.default)(new Error(`Unsupported codec: ${d.Hash.code}`),"ERR_NOT_UNIXFS"));return}s.add(async()=>{await ZX(r,m,t,f,i,o,s,a)})}})}var XAe=(r,e,t,n,i,o,s)=>{async function*a(c={}){let u=t.fileSize();if(u===void 0)throw new Error("File was a directory");let{offset:l,length:d}=Hf(u,c.offset,c.length);if(d===0)return;let h=new On({concurrency:1}),f=Gt();h.add(async()=>{await ZX(s,e,f,0,l,l+d,h,c)}),h.on("error",w=>{f.end(w)});let m=0;for await(let w of f)w!=null&&(m+=w.byteLength,m===d&&f.end(),yield w)}return a},zR=XAe;var QAe=(r,e,t,n,i,o,s)=>{async function*a(c={}){let u=c.offset||0,l=c.length||e.Links.length,d=e.Links.slice(u,l);for(let h of d){let f=await i(h.Hash,h.Name||"",`${n}/${h.Name||""}`,[],o+1,s,c);f.entry&&(yield f.entry)}}return a},JX=QAe;var ZAe=(r,e,t,n,i,o,s)=>{function a(c={}){return eQ(e,n,i,o,s,c)}return a};async function*eQ(r,e,t,n,i,o){let s=r.Links;for(let a of s){let c=a.Name!=null?a.Name.substring(2):null;if(c)yield(await t(a.Hash,c,`${e}/${c}`,[],n+1,i,o)).entry;else{let u=await i.get(a.Hash);r=qt(u);for await(let l of eQ(r,e,t,n,i,o))yield l}}}var tQ=ZAe;var JAe=(r,e)=>{let t=r.Links.find(n=>n.Name===e);return t&&t.Hash},eCe={raw:zR,file:zR,directory:JX,"hamt-sharded-directory":tQ,metadata:(r,e,t,n,i,o,s)=>()=>[],symlink:(r,e,t,n,i,o,s)=>()=>[]},tCe=async(r,e,t,n,i,o,s,a)=>{let c=await s.get(r,a),u=qt(c),l,d;if(e||(e=r.toString()),u.Data==null)throw(0,wy.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=gt.unmarshal(u.Data)}catch(h){throw(0,wy.default)(h,"ERR_NOT_UNIXFS")}if(t||(t=e),n.length){let h;if(l&&l.type==="hamt-sharded-directory"?h=await VX(u,n[0],s):h=JAe(u,n[0]),!h)throw(0,wy.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let f=n.shift(),m=`${t}/${f}`;d={cid:h,toResolve:n,name:f||"",path:m}}return{entry:{type:l.isDirectory()?"directory":"file",name:e,path:t,cid:r,content:eCe[l.type](r,u,l,t,i,o,s),unixfs:l,depth:o,node:u,size:l.fileSize()},next:d}},rQ=tCe;var nQ=L(fe(),1);var rCe=r=>{async function*e(t={}){let{offset:n,length:i}=Hf(r.length,t.offset,t.length);yield Ul(r,0,n,n+i)}return e},nCe=async(r,e,t,n,i,o,s,a)=>{if(n.length)throw(0,nQ.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let c=await s.get(r,a);return{entry:{type:"raw",name:e,path:t,cid:r,content:rCe(c),depth:o,size:c.length,node:c}}},iQ=nCe;var oQ=L(fe(),1);var iCe=async(r,e,t,n,i,o,s,a)=>{let c=await s.get(r),u=tl(c),l=u,d=t;for(;n.length;){let h=n[0];if(h in l){n.shift(),d=`${d}/${h}`;let f=$.asCID(l[h]);if(f)return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:c.length,content:async function*(){yield u}},next:{cid:f,name:h,path:d,toResolve:n}};l=l[h]}else throw(0,oQ.default)(new Error(`No property named ${h} found in cbor node ${r}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:c.length,content:async function*(){yield u}}}},sQ=iCe;var aQ=L(fe(),1);var oCe=r=>{async function*e(t={}){let{offset:n,length:i}=Hf(r.length,t.offset,t.length);yield Ul(r,0,n,n+i)}return e},sCe=async(r,e,t,n,i,o,s,a)=>{if(n.length)throw(0,aQ.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let c=await Jr(r.multihash.bytes);return{entry:{type:"identity",name:e,path:t,cid:r,content:oCe(c.digest),depth:o,size:c.digest.length,node:c.digest}}},cQ=sCe;var aCe={[St]:rQ,[jn]:iQ,[Sh]:sQ,[bn.code]:cQ};function lQ(r,e,t,n,i,o,s){let a=aCe[r.code];if(!a)throw(0,uQ.default)(new Error(`No resolver for code ${r.code}`),"ERR_NO_RESOLVER");return a(r,e,t,n,lQ,i,o,s)}var dQ=lQ;var cCe=(r="")=>(r.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),uCe=r=>{if(r instanceof Uint8Array)return{cid:$.decode(r),toResolve:[]};let e=$.asCID(r);if(e)return{cid:e,toResolve:[]};if(typeof r=="string"){r.indexOf("/ipfs/")===0&&(r=r.substring(6));let t=cCe(r);return{cid:$.parse(t[0]),toResolve:t.slice(1)}}throw(0,by.default)(new Error(`Unknown path type ${r}`),"ERR_BAD_PATH")};async function*qR(r,e,t={}){let{cid:n,toResolve:i}=uCe(r),o=n.toString(),s=o,a=i.length;for(;;){let c=await dQ(n,o,s,i,a,e,t);if(!c.entry&&!c.next)throw(0,by.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;i=c.next.toResolve,n=c.next.cid,o=c.next.name,s=c.next.path}}async function pi(r,e,t={}){let n=await _r(qR(r,e,t));if(!n)throw(0,by.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");return n}async function*_y(r,e,t={}){let n=await pi(r,e,t);if(!n)return;if(yield n,n.type==="directory")for await(let o of i(n,t))yield o;async function*i(o,s){for await(let a of o.content(s))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*i(a,s))}}function fQ({repo:r,preload:e}){async function*t(n,i={}){if(n=nf(n),i.preload!==!1){let s=n.split("/");e($.parse(s[0]))}let o=await pi(n,r.blocks,i);if(o.type==="directory")throw new Error("this dag node is a directory");if(!o.content)throw new Error("this dag node has no content");yield*o.content(i)}return J(t)}var r4=L(fe(),1);var Q5t=fr("ustar\0","binary"),Z5t=fr("ustar ","binary"),J5t=fr(" \0","binary");function vy(r){let e=async function*(){let t=yield,n=new lt;for await(let i of r){if(t==null){n.append(i),t=yield n,n=new lt;continue}for(n.append(i);n.length>=t;){let o=n.sublist(0,t);if(n.consume(t),t=yield o,t==null){n.length>0&&(t=yield n,n=new lt);break}}}if(t!=null)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:n})}();return e.next(),e}var yQ=L(pQ(),1);function dCe(r){return r[Symbol.asyncIterator]!=null}function fCe(r){if(dCe(r))return(async()=>{let n=new Uint8Array(0);for await(let i of r)n=li([n,i],n.length+i.length);return n})();let e=[],t=0;for(let n of r)e.push(n),t+=n.byteLength;return li(e,t)}var mQ=fCe;var hCe="0000000000000000000",pCe="7777777777777777777",mCe=48,gCe=fr("ustar\0","binary"),yCe=fr("00","binary"),wCe=parseInt("7777",8),bCe=257,_Ce=263,vCe=function(r){switch(r){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72;default:return 0}},ECe=function(r){let e=256;for(let t=0;t<148;t++)e+=r[t];for(let t=156;t<512;t++)e+=r[t];return e},U2=function(r,e){let t=r.toString(8);return t.length>e?fr(pCe.slice(0,e)+" "):fr(hCe.slice(0,e-t.length)+t+" ")},$R=function(r){let e=fr(r).byteLength,t=Math.floor(Math.log(e)/Math.log(10))+1;return e+t>=Math.pow(10,t)&&t++,`${e+t}${r}`};function gQ(r){let e="";r.name!=null&&(e+=$R(" path="+r.name+`
`)),r.linkname!=null&&(e+=$R(" linkpath="+r.linkname+`
`));let t=r.pax;if(t!=null)for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e+=$R(" "+n+"="+t[n]+`
`));return fr(e)}function Ey(r){let e=new Uint8Array(512),t=r.name,n="";if(r.typeflag===5&&t[t.length-1]!=="/"&&(t+="/"),fr(t).byteLength!==t.length)return null;for(;fr(t).byteLength>100;){let i=t.indexOf("/");if(i===-1)return null;n+=n!==""?"/"+t.slice(0,i):t.slice(0,i),t=t.slice(i+1)}return fr(t).byteLength>100||fr(n).byteLength>155||r.linkname!=null&&fr(r.linkname).byteLength>100?null:(e.set(fr(t),0),e.set(U2(r.mode&wCe,6),100),e.set(U2(r.uid,6),108),e.set(U2(r.gid,6),116),e.set(U2(r.size,11),124),e.set(U2(r.mtime.getTime()/1e3|0,11),136),e[156]=mCe+vCe(r.type),r.linkname!=null&&e.set(fr(r.linkname),157),e.set(gCe,bCe),e.set(yCe,_Ce),r.uname!=null&&e.set(fr(r.uname),265),r.gname!=null&&e.set(fr(r.gname),297),e.set(U2(r.devmajor??0,6),329),e.set(U2(r.devminor??0,6),337),n!=null&&e.set(fr(n),345),e.set(U2(ECe(e),6),148),e)}var{S_IFMT:SCe,S_IFBLK:TCe,S_IFCHR:ICe,S_IFDIR:ACe,S_IFIFO:CCe,S_IFLNK:RCe}=yQ.default,kCe=parseInt("755",8),PCe=parseInt("644",8),wQ=new Uint8Array(1024);function DCe(r=0){switch(r&SCe){case TCe:return"block-device";case ICe:return"character-device";case ACe:return"directory";case CCe:return"fifo";case RCe:return"symlink";default:return"file"}}function jR(r){return r&=511,r!==0?wQ.subarray(0,512-r):new Uint8Array(0)}function KR(r){if(r.pax==null){let e=Ey(r);if(e!=null)return e}return NCe(r)}function NCe(r){let e=gQ(r),t={name:"PaxHeader",mode:r.mode,uid:r.uid,gid:r.gid,size:e.length,mtime:r.mtime,type:"pax-header",linkname:r.linkname,uname:r.uname,gname:r.gname,devmajor:r.devmajor,devminor:r.devminor};return new lt(Ey(t)??new Uint8Array(0),e,jR(e.length),Ey({...t,size:r.size,type:r.type})??new Uint8Array(0)).subarray()}function xy(){return async function*(r){for await(let{header:e,body:t}of r){let n={...e,size:e.type==="symlink"?0:e.size??0,type:e.type??DCe(e.mode),mode:e.mode??(e.type==="directory"?kCe:PCe),uid:e.uid??0,gid:e.gid??0,mtime:e.mtime??new Date};if(typeof t=="string"&&(t=fr(t)),t instanceof Uint8Array||x1(t)){n.size=t.length,yield KR(n),yield x1(t)?t.subarray():t,yield jR(n.size);continue}if(n.type==="symlink"&&n.linkname==null){if(t==null)throw new Error("type was symlink but no linkname or body specified");n.linkname=Nn(await mQ(t)),yield KR(n);continue}if(yield KR(n),n.type!=="file"&&n.type!=="contiguous-file")continue;let i=0;for await(let o of t??[])i+=o.length,yield x1(o)?o.subarray():o;if(i!==n.size)throw new Error(`size mismatch, wrote ${i} of ${n.size} bytes`);yield jR(n.size)}yield wQ}}function Jf(r){let e=r.length;for(;--e>=0;)r[e]=0}var OCe=0,nZ=1,LCe=2,BCe=3,MCe=258,mk=29,y8=256,u8=y8+1+mk,Xf=30,gk=19,iZ=2*u8+1,Vl=15,GR=16,UCe=7,yk=256,oZ=16,sZ=17,aZ=18,sk=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ry=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),FCe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cZ=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VCe=512,$c=new Array((u8+2)*2);Jf($c);var s8=new Array(Xf*2);Jf(s8);var l8=new Array(VCe);Jf(l8);var d8=new Array(MCe-BCe+1);Jf(d8);var wk=new Array(mk);Jf(wk);var ky=new Array(Xf);Jf(ky);function HR(r,e,t,n,i){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var uZ,lZ,dZ;function WR(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}var fZ=r=>r<256?l8[r]:l8[256+(r>>>7)],f8=(r,e)=>{r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255},lo=(r,e,t)=>{r.bi_valid>GR-t?(r.bi_buf|=e<<r.bi_valid&65535,f8(r,r.bi_buf),r.bi_buf=e>>GR-r.bi_valid,r.bi_valid+=t-GR):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)},T1=(r,e,t)=>{lo(r,t[e*2],t[e*2+1])},hZ=(r,e)=>{let t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1},zCe=r=>{r.bi_valid===16?(f8(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},qCe=(r,e)=>{let t=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,l,d,h,f,m,w=0;for(h=0;h<=Vl;h++)r.bl_count[h]=0;for(t[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<iZ;u++)l=r.heap[u],h=t[t[l*2+1]*2+1]+1,h>c&&(h=c,w++),t[l*2+1]=h,!(l>n)&&(r.bl_count[h]++,f=0,l>=a&&(f=s[l-a]),m=t[l*2],r.opt_len+=m*(h+f),o&&(r.static_len+=m*(i[l*2+1]+f)));if(w!==0){do{for(h=c-1;r.bl_count[h]===0;)h--;r.bl_count[h]--,r.bl_count[h+1]+=2,r.bl_count[c]--,w-=2}while(w>0);for(h=c;h!==0;h--)for(l=r.bl_count[h];l!==0;)d=r.heap[--u],!(d>n)&&(t[d*2+1]!==h&&(r.opt_len+=(h-t[d*2+1])*t[d*2],t[d*2+1]=h),l--)}},pZ=(r,e,t)=>{let n=new Array(Vl+1),i=0,o,s;for(o=1;o<=Vl;o++)i=i+t[o-1]<<1,n[o]=i;for(s=0;s<=e;s++){let a=r[s*2+1];a!==0&&(r[s*2]=hZ(n[a]++,a))}},$Ce=()=>{let r,e,t,n,i,o=new Array(Vl+1);for(t=0,n=0;n<mk-1;n++)for(wk[n]=t,r=0;r<1<<sk[n];r++)d8[t++]=n;for(d8[t-1]=n,i=0,n=0;n<16;n++)for(ky[n]=i,r=0;r<1<<Ry[n];r++)l8[i++]=n;for(i>>=7;n<Xf;n++)for(ky[n]=i<<7,r=0;r<1<<Ry[n]-7;r++)l8[256+i++]=n;for(e=0;e<=Vl;e++)o[e]=0;for(r=0;r<=143;)$c[r*2+1]=8,r++,o[8]++;for(;r<=255;)$c[r*2+1]=9,r++,o[9]++;for(;r<=279;)$c[r*2+1]=7,r++,o[7]++;for(;r<=287;)$c[r*2+1]=8,r++,o[8]++;for(pZ($c,u8+1,o),r=0;r<Xf;r++)s8[r*2+1]=5,s8[r*2]=hZ(r,5);uZ=new HR($c,sk,y8+1,u8,Vl),lZ=new HR(s8,Ry,0,Xf,Vl),dZ=new HR(new Array(0),FCe,0,gk,UCe)},mZ=r=>{let e;for(e=0;e<u8;e++)r.dyn_ltree[e*2]=0;for(e=0;e<Xf;e++)r.dyn_dtree[e*2]=0;for(e=0;e<gk;e++)r.bl_tree[e*2]=0;r.dyn_ltree[yk*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},gZ=r=>{r.bi_valid>8?f8(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},bQ=(r,e,t,n)=>{let i=e*2,o=t*2;return r[i]<r[o]||r[i]===r[o]&&n[e]<=n[t]},YR=(r,e,t)=>{let n=r.heap[t],i=t<<1;for(;i<=r.heap_len&&(i<r.heap_len&&bQ(e,r.heap[i+1],r.heap[i],r.depth)&&i++,!bQ(e,n,r.heap[i],r.depth));)r.heap[t]=r.heap[i],t=i,i<<=1;r.heap[t]=n},_Q=(r,e,t)=>{let n,i,o=0,s,a;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+o++]&255,n+=(r.pending_buf[r.sym_buf+o++]&255)<<8,i=r.pending_buf[r.sym_buf+o++],n===0?T1(r,i,e):(s=d8[i],T1(r,s+y8+1,e),a=sk[s],a!==0&&(i-=wk[s],lo(r,i,a)),n--,s=fZ(n),T1(r,s,t),a=Ry[s],a!==0&&(n-=ky[s],lo(r,n,a)));while(o<r.sym_next);T1(r,yk,e)},ak=(r,e)=>{let t=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,u;for(r.heap_len=0,r.heap_max=iZ,s=0;s<o;s++)t[s*2]!==0?(r.heap[++r.heap_len]=c=s,r.depth[s]=0):t[s*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=c<2?++c:0,t[u*2]=1,r.depth[u]=0,r.opt_len--,i&&(r.static_len-=n[u*2+1]);for(e.max_code=c,s=r.heap_len>>1;s>=1;s--)YR(r,t,s);u=o;do s=r.heap[1],r.heap[1]=r.heap[r.heap_len--],YR(r,t,1),a=r.heap[1],r.heap[--r.heap_max]=s,r.heap[--r.heap_max]=a,t[u*2]=t[s*2]+t[a*2],r.depth[u]=(r.depth[s]>=r.depth[a]?r.depth[s]:r.depth[a])+1,t[s*2+1]=t[a*2+1]=u,r.heap[1]=u++,YR(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],qCe(r,e),pZ(t,c,r.bl_count)},vQ=(r,e,t)=>{let n,i=-1,o,s=e[0*2+1],a=0,c=7,u=4;for(s===0&&(c=138,u=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)o=s,s=e[(n+1)*2+1],!(++a<c&&o===s)&&(a<u?r.bl_tree[o*2]+=a:o!==0?(o!==i&&r.bl_tree[o*2]++,r.bl_tree[oZ*2]++):a<=10?r.bl_tree[sZ*2]++:r.bl_tree[aZ*2]++,a=0,i=o,s===0?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4))},EQ=(r,e,t)=>{let n,i=-1,o,s=e[0*2+1],a=0,c=7,u=4;for(s===0&&(c=138,u=3),n=0;n<=t;n++)if(o=s,s=e[(n+1)*2+1],!(++a<c&&o===s)){if(a<u)do T1(r,o,r.bl_tree);while(--a!==0);else o!==0?(o!==i&&(T1(r,o,r.bl_tree),a--),T1(r,oZ,r.bl_tree),lo(r,a-3,2)):a<=10?(T1(r,sZ,r.bl_tree),lo(r,a-3,3)):(T1(r,aZ,r.bl_tree),lo(r,a-11,7));a=0,i=o,s===0?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4)}},KCe=r=>{let e;for(vQ(r,r.dyn_ltree,r.l_desc.max_code),vQ(r,r.dyn_dtree,r.d_desc.max_code),ak(r,r.bl_desc),e=gk-1;e>=3&&r.bl_tree[cZ[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e},jCe=(r,e,t,n)=>{let i;for(lo(r,e-257,5),lo(r,t-1,5),lo(r,n-4,4),i=0;i<n;i++)lo(r,r.bl_tree[cZ[i]*2+1],3);EQ(r,r.dyn_ltree,e-1),EQ(r,r.dyn_dtree,t-1)},GCe=r=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return 0;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return 1;for(t=32;t<y8;t++)if(r.dyn_ltree[t*2]!==0)return 1;return 0},xQ=!1,HCe=r=>{xQ||($Ce(),xQ=!0),r.l_desc=new WR(r.dyn_ltree,uZ),r.d_desc=new WR(r.dyn_dtree,lZ),r.bl_desc=new WR(r.bl_tree,dZ),r.bi_buf=0,r.bi_valid=0,mZ(r)},yZ=(r,e,t,n)=>{lo(r,(OCe<<1)+(n?1:0),3),gZ(r),f8(r,t),f8(r,~t),t&&r.pending_buf.set(r.window.subarray(e,e+t),r.pending),r.pending+=t},WCe=r=>{lo(r,nZ<<1,3),T1(r,yk,$c),zCe(r)},YCe=(r,e,t,n)=>{let i,o,s=0;r.level>0?(r.strm.data_type===2&&(r.strm.data_type=GCe(r)),ak(r,r.l_desc),ak(r,r.d_desc),s=KCe(r),i=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?yZ(r,e,t,n):r.strategy===4||o===i?(lo(r,(nZ<<1)+(n?1:0),3),_Q(r,$c,s8)):(lo(r,(LCe<<1)+(n?1:0),3),jCe(r,r.l_desc.max_code+1,r.d_desc.max_code+1,s+1),_Q(r,r.dyn_ltree,r.dyn_dtree)),mZ(r),n&&gZ(r)},XCe=(r,e,t)=>(r.pending_buf[r.sym_buf+r.sym_next++]=e,r.pending_buf[r.sym_buf+r.sym_next++]=e>>8,r.pending_buf[r.sym_buf+r.sym_next++]=t,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(d8[t]+y8+1)*2]++,r.dyn_dtree[fZ(e)*2]++),r.sym_next===r.sym_end),QCe=HCe,ZCe=yZ,JCe=YCe,eRe=XCe,tRe=WCe,rRe={_tr_init:QCe,_tr_stored_block:ZCe,_tr_flush_block:JCe,_tr_tally:eRe,_tr_align:tRe},nRe=(r,e,t,n)=>{let i=r&65535|0,o=r>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0},h8=nRe,iRe=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},oRe=new Uint32Array(iRe()),sRe=(r,e,t,n)=>{let i=oRe,o=n+t;r^=-1;for(let s=n;s<o;s++)r=r>>>8^i[(r^e[s])&255];return r^-1},Zn=sRe,$l={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:aRe,_tr_stored_block:ck,_tr_flush_block:cRe,_tr_tally:z2,_tr_align:uRe}=rRe,{Z_NO_FLUSH:q2,Z_PARTIAL_FLUSH:lRe,Z_FULL_FLUSH:dRe,Z_FINISH:Ns,Z_BLOCK:SQ,Z_OK:mi,Z_STREAM_END:TQ,Z_STREAM_ERROR:I1,Z_DATA_ERROR:fRe,Z_BUF_ERROR:XR,Z_DEFAULT_COMPRESSION:hRe,Z_FILTERED:pRe,Z_HUFFMAN_ONLY:Sy,Z_RLE:mRe,Z_FIXED:gRe,Z_DEFAULT_STRATEGY:yRe,Z_UNKNOWN:wRe,Z_DEFLATED:Ny}=Gl,bRe=9,_Re=15,vRe=8,ERe=29,xRe=256,uk=xRe+1+ERe,SRe=30,TRe=19,IRe=2*uk+1,ARe=15,Wt=3,V2=258,A1=V2+Wt+1,CRe=32,Qf=42,bk=57,lk=69,dk=73,fk=91,hk=103,zl=113,i8=666,Hi=1,e4=2,Kl=3,t4=4,RRe=3,ql=(r,e)=>(r.msg=$l[e],e),IQ=r=>r*2-(r>4?9:0),F2=r=>{let e=r.length;for(;--e>=0;)r[e]=0},kRe=r=>{let e,t,n,i=r.w_size;e=r.hash_size,n=e;do t=r.head[--n],r.head[n]=t>=i?t-i:0;while(--e);e=i,n=e;do t=r.prev[--n],r.prev[n]=t>=i?t-i:0;while(--e)},PRe=(r,e,t)=>(e<<r.hash_shift^t)&r.hash_mask,$2=PRe,$o=r=>{let e=r.state,t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(r.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Ko=(r,e)=>{cRe(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,$o(r.strm)},ur=(r,e)=>{r.pending_buf[r.pending++]=e},n8=(r,e)=>{r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255},pk=(r,e,t,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,e.set(r.input.subarray(r.next_in,r.next_in+i),t),r.state.wrap===1?r.adler=h8(r.adler,e,i,t):r.state.wrap===2&&(r.adler=Zn(r.adler,e,i,t)),r.next_in+=i,r.total_in+=i,i)},wZ=(r,e)=>{let t=r.max_chain_length,n=r.strstart,i,o,s=r.prev_length,a=r.nice_match,c=r.strstart>r.w_size-A1?r.strstart-(r.w_size-A1):0,u=r.window,l=r.w_mask,d=r.prev,h=r.strstart+V2,f=u[n+s-1],m=u[n+s];r.prev_length>=r.good_match&&(t>>=2),a>r.lookahead&&(a=r.lookahead);do if(i=e,!(u[i+s]!==m||u[i+s-1]!==f||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<h);if(o=V2-(h-n),n=h-V2,o>s){if(r.match_start=e,s=o,o>=a)break;f=u[n+s-1],m=u[n+s]}}while((e=d[e&l])>c&&--t!==0);return s<=r.lookahead?s:r.lookahead},Zf=r=>{let e=r.w_size,t,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-A1)&&(r.window.set(r.window.subarray(e,e+e-n),0),r.match_start-=e,r.strstart-=e,r.block_start-=e,r.insert>r.strstart&&(r.insert=r.strstart),kRe(r),n+=e),r.strm.avail_in===0)break;if(t=pk(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=t,r.lookahead+r.insert>=Wt)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=$2(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=$2(r,r.ins_h,r.window[i+Wt-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<Wt)););}while(r.lookahead<A1&&r.strm.avail_in!==0)},bZ=(r,e)=>{let t=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,o,s=0,a=r.strm.avail_in;do{if(n=65535,o=r.bi_valid+42>>3,r.strm.avail_out<o||(o=r.strm.avail_out-o,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>o&&(n=o),n<t&&(n===0&&e!==Ns||e===q2||n!==i+r.strm.avail_in)))break;s=e===Ns&&n===i+r.strm.avail_in?1:0,ck(r,0,0,s),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,$o(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&(pk(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(s===0);return a-=r.strm.avail_in,a&&(a>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=a&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-a,r.strm.next_in),r.strstart),r.strstart+=a,r.insert+=a>r.w_size-r.insert?r.w_size-r.insert:a),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),s?t4:e!==q2&&e!==Ns&&r.strm.avail_in===0&&r.strstart===r.block_start?e4:(o=r.window_size-r.strstart,r.strm.avail_in>o&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,o+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),o>r.strm.avail_in&&(o=r.strm.avail_in),o&&(pk(r.strm,r.window,r.strstart,o),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.high_water<r.strstart&&(r.high_water=r.strstart),o=r.bi_valid+42>>3,o=r.pending_buf_size-o>65535?65535:r.pending_buf_size-o,t=o>r.w_size?r.w_size:o,i=r.strstart-r.block_start,(i>=t||(i||e===Ns)&&e!==q2&&r.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,s=e===Ns&&r.strm.avail_in===0&&n===i?1:0,ck(r,r.block_start,n,s),r.block_start+=n,$o(r.strm)),s?Kl:Hi)},QR=(r,e)=>{let t,n;for(;;){if(r.lookahead<A1){if(Zf(r),r.lookahead<A1&&e===q2)return Hi;if(r.lookahead===0)break}if(t=0,r.lookahead>=Wt&&(r.ins_h=$2(r,r.ins_h,r.window[r.strstart+Wt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-A1&&(r.match_length=wZ(r,t)),r.match_length>=Wt)if(n=z2(r,r.strstart-r.match_start,r.match_length-Wt),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=Wt){r.match_length--;do r.strstart++,r.ins_h=$2(r,r.ins_h,r.window[r.strstart+Wt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=$2(r,r.ins_h,r.window[r.strstart+1]);else n=z2(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(Ko(r,!1),r.strm.avail_out===0))return Hi}return r.insert=r.strstart<Wt-1?r.strstart:Wt-1,e===Ns?(Ko(r,!0),r.strm.avail_out===0?Kl:t4):r.sym_next&&(Ko(r,!1),r.strm.avail_out===0)?Hi:e4},Wf=(r,e)=>{let t,n,i;for(;;){if(r.lookahead<A1){if(Zf(r),r.lookahead<A1&&e===q2)return Hi;if(r.lookahead===0)break}if(t=0,r.lookahead>=Wt&&(r.ins_h=$2(r,r.ins_h,r.window[r.strstart+Wt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=Wt-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-A1&&(r.match_length=wZ(r,t),r.match_length<=5&&(r.strategy===pRe||r.match_length===Wt&&r.strstart-r.match_start>4096)&&(r.match_length=Wt-1)),r.prev_length>=Wt&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-Wt,n=z2(r,r.strstart-1-r.prev_match,r.prev_length-Wt),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=$2(r,r.ins_h,r.window[r.strstart+Wt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=Wt-1,r.strstart++,n&&(Ko(r,!1),r.strm.avail_out===0))return Hi}else if(r.match_available){if(n=z2(r,0,r.window[r.strstart-1]),n&&Ko(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return Hi}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=z2(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<Wt-1?r.strstart:Wt-1,e===Ns?(Ko(r,!0),r.strm.avail_out===0?Kl:t4):r.sym_next&&(Ko(r,!1),r.strm.avail_out===0)?Hi:e4},DRe=(r,e)=>{let t,n,i,o,s=r.window;for(;;){if(r.lookahead<=V2){if(Zf(r),r.lookahead<=V2&&e===q2)return Hi;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=Wt&&r.strstart>0&&(i=r.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=r.strstart+V2;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);r.match_length=V2-(o-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=Wt?(t=z2(r,1,r.match_length-Wt),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=z2(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(Ko(r,!1),r.strm.avail_out===0))return Hi}return r.insert=0,e===Ns?(Ko(r,!0),r.strm.avail_out===0?Kl:t4):r.sym_next&&(Ko(r,!1),r.strm.avail_out===0)?Hi:e4},NRe=(r,e)=>{let t;for(;;){if(r.lookahead===0&&(Zf(r),r.lookahead===0)){if(e===q2)return Hi;break}if(r.match_length=0,t=z2(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(Ko(r,!1),r.strm.avail_out===0))return Hi}return r.insert=0,e===Ns?(Ko(r,!0),r.strm.avail_out===0?Kl:t4):r.sym_next&&(Ko(r,!1),r.strm.avail_out===0)?Hi:e4};function S1(r,e,t,n,i){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=i}var o8=[new S1(0,0,0,0,bZ),new S1(4,4,8,4,QR),new S1(4,5,16,8,QR),new S1(4,6,32,32,QR),new S1(4,4,16,16,Wf),new S1(8,16,32,32,Wf),new S1(8,16,128,128,Wf),new S1(8,32,128,256,Wf),new S1(32,128,258,1024,Wf),new S1(32,258,258,4096,Wf)],ORe=r=>{r.window_size=2*r.w_size,F2(r.head),r.max_lazy_match=o8[r.level].max_lazy,r.good_match=o8[r.level].good_length,r.nice_match=o8[r.level].nice_length,r.max_chain_length=o8[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=Wt-1,r.match_available=0,r.ins_h=0};function LRe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ny,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(IRe*2),this.dyn_dtree=new Uint16Array((2*SRe+1)*2),this.bl_tree=new Uint16Array((2*TRe+1)*2),F2(this.dyn_ltree),F2(this.dyn_dtree),F2(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ARe+1),this.heap=new Uint16Array(2*uk+1),F2(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*uk+1),F2(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var w8=r=>{if(!r)return 1;let e=r.state;return!e||e.strm!==r||e.status!==Qf&&e.status!==bk&&e.status!==lk&&e.status!==dk&&e.status!==fk&&e.status!==hk&&e.status!==zl&&e.status!==i8?1:0},_Z=r=>{if(w8(r))return ql(r,I1);r.total_in=r.total_out=0,r.data_type=wRe;let e=r.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?bk:e.wrap?Qf:zl,r.adler=e.wrap===2?0:1,e.last_flush=-2,aRe(e),mi},vZ=r=>{let e=_Z(r);return e===mi&&ORe(r.state),e},BRe=(r,e)=>w8(r)||r.state.wrap!==2?I1:(r.state.gzhead=e,mi),EZ=(r,e,t,n,i,o)=>{if(!r)return I1;let s=1;if(e===hRe&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>bRe||t!==Ny||n<8||n>15||e<0||e>9||o<0||o>gRe||n===8&&s!==1)return ql(r,I1);n===8&&(n=9);let a=new LRe;return r.state=a,a.strm=r,a.status=Qf,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Wt-1)/Wt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=o,a.method=t,vZ(r)},MRe=(r,e)=>EZ(r,e,Ny,_Re,vRe,yRe),URe=(r,e)=>{if(w8(r)||e>SQ||e<0)return r?ql(r,I1):I1;let t=r.state;if(!r.output||r.avail_in!==0&&!r.input||t.status===i8&&e!==Ns)return ql(r,r.avail_out===0?XR:I1);let n=t.last_flush;if(t.last_flush=e,t.pending!==0){if($o(r),r.avail_out===0)return t.last_flush=-1,mi}else if(r.avail_in===0&&IQ(e)<=IQ(n)&&e!==Ns)return ql(r,XR);if(t.status===i8&&r.avail_in!==0)return ql(r,XR);if(t.status===Qf&&t.wrap===0&&(t.status=zl),t.status===Qf){let i=Ny+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Sy||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,i|=o<<6,t.strstart!==0&&(i|=CRe),i+=31-i%31,n8(t,i),t.strstart!==0&&(n8(t,r.adler>>>16),n8(t,r.adler&65535)),r.adler=1,t.status=zl,$o(r),t.pending!==0)return t.last_flush=-1,mi}if(t.status===bk){if(r.adler=0,ur(t,31),ur(t,139),ur(t,8),t.gzhead)ur(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),ur(t,t.gzhead.time&255),ur(t,t.gzhead.time>>8&255),ur(t,t.gzhead.time>>16&255),ur(t,t.gzhead.time>>24&255),ur(t,t.level===9?2:t.strategy>=Sy||t.level<2?4:0),ur(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(ur(t,t.gzhead.extra.length&255),ur(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(r.adler=Zn(r.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=lk;else if(ur(t,0),ur(t,0),ur(t,0),ur(t,0),ur(t,0),ur(t,t.level===9?2:t.strategy>=Sy||t.level<2?4:0),ur(t,RRe),t.status=zl,$o(r),t.pending!==0)return t.last_flush=-1,mi}if(t.status===lk){if(t.gzhead.extra){let i=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,$o(r),t.pending!==0)return t.last_flush=-1,mi;i=0,o-=a}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=dk}if(t.status===dk){if(t.gzhead.name){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i)),$o(r),t.pending!==0)return t.last_flush=-1,mi;i=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,ur(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=fk}if(t.status===fk){if(t.gzhead.comment){let i=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i)),$o(r),t.pending!==0)return t.last_flush=-1,mi;i=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,ur(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=Zn(r.adler,t.pending_buf,t.pending-i,i))}t.status=hk}if(t.status===hk){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&($o(r),t.pending!==0))return t.last_flush=-1,mi;ur(t,r.adler&255),ur(t,r.adler>>8&255),r.adler=0}if(t.status=zl,$o(r),t.pending!==0)return t.last_flush=-1,mi}if(r.avail_in!==0||t.lookahead!==0||e!==q2&&t.status!==i8){let i=t.level===0?bZ(t,e):t.strategy===Sy?NRe(t,e):t.strategy===mRe?DRe(t,e):o8[t.level].func(t,e);if((i===Kl||i===t4)&&(t.status=i8),i===Hi||i===Kl)return r.avail_out===0&&(t.last_flush=-1),mi;if(i===e4&&(e===lRe?uRe(t):e!==SQ&&(ck(t,0,0,!1),e===dRe&&(F2(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),$o(r),r.avail_out===0))return t.last_flush=-1,mi}return e!==Ns?mi:t.wrap<=0?TQ:(t.wrap===2?(ur(t,r.adler&255),ur(t,r.adler>>8&255),ur(t,r.adler>>16&255),ur(t,r.adler>>24&255),ur(t,r.total_in&255),ur(t,r.total_in>>8&255),ur(t,r.total_in>>16&255),ur(t,r.total_in>>24&255)):(n8(t,r.adler>>>16),n8(t,r.adler&65535)),$o(r),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?mi:TQ)},FRe=r=>{if(w8(r))return I1;let e=r.state.status;return r.state=null,e===zl?ql(r,fRe):mi},VRe=(r,e)=>{let t=e.length;if(w8(r))return I1;let n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==Qf||n.lookahead)return I1;if(i===1&&(r.adler=h8(r.adler,e,t,0)),n.wrap=0,t>=n.w_size){i===0&&(F2(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(t-n.w_size,t),0),e=c,t=n.w_size}let o=r.avail_in,s=r.next_in,a=r.input;for(r.avail_in=t,r.next_in=0,r.input=e,Zf(n);n.lookahead>=Wt;){let c=n.strstart,u=n.lookahead-(Wt-1);do n.ins_h=$2(n,n.ins_h,n.window[c+Wt-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Wt-1,Zf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Wt-1,n.match_available=0,r.next_in=s,r.input=a,r.avail_in=o,n.wrap=i,mi},zRe=MRe,qRe=EZ,$Re=vZ,KRe=_Z,jRe=BRe,GRe=URe,HRe=FRe,WRe=VRe,YRe="pako deflate (from Nodeca project)",a8={deflateInit:zRe,deflateInit2:qRe,deflateReset:$Re,deflateResetKeep:KRe,deflateSetHeader:jRe,deflate:GRe,deflateEnd:HRe,deflateSetDictionary:WRe,deflateInfo:YRe},XRe=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),QRe=function(r){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)XRe(t,n)&&(r[n]=t[n])}}return r},ZRe=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;let t=new Uint8Array(e);for(let n=0,i=0,o=r.length;n<o;n++){let s=r[n];t.set(s,i),i+=s.length}return t},Oy={assign:QRe,flattenChunks:ZRe},xZ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{xZ=!1}var p8=new Uint8Array(256);for(let r=0;r<256;r++)p8[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;p8[254]=p8[254]=1;var JRe=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,o,s=r.length,a=0;for(i=0;i<s;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<s&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},eke=(r,e)=>{if(e<65534&&r.subarray&&xZ)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t},tke=(r,e)=>{let t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i,o=new Array(t*2);for(i=0,n=0;n<t;){let s=r[n++];if(s<128){o[i++]=s;continue}let a=p8[s];if(a>4){o[i++]=65533,n+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&n<t;)s=s<<6|r[n++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return eke(o,i)},rke=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+p8[r[t]]>e?t:e},m8={string2buf:JRe,buf2string:tke,utf8border:rke};function nke(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var SZ=nke,TZ=Object.prototype.toString,{Z_NO_FLUSH:ike,Z_SYNC_FLUSH:oke,Z_FULL_FLUSH:ske,Z_FINISH:ake,Z_OK:Py,Z_STREAM_END:cke,Z_DEFAULT_COMPRESSION:uke,Z_DEFAULT_STRATEGY:lke,Z_DEFLATED:dke}=Gl;function b8(r){this.options=Oy.assign({level:uke,method:dke,chunkSize:16384,windowBits:15,memLevel:8,strategy:lke},r||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SZ,this.strm.avail_out=0;let t=a8.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Py)throw new Error($l[t]);if(e.header&&a8.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=m8.string2buf(e.dictionary):TZ.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=a8.deflateSetDictionary(this.strm,n),t!==Py)throw new Error($l[t]);this._dict_set=!0}}b8.prototype.push=function(r,e){let t=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?ake:ike,typeof r=="string"?t.input=m8.string2buf(r):TZ.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(o===oke||o===ske)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=a8.deflate(t,o),i===cke)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=a8.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Py;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};b8.prototype.onData=function(r){this.chunks.push(r)};b8.prototype.onEnd=function(r){r===Py&&(this.result=Oy.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function _k(r,e){let t=new b8(e);if(t.push(r,!0),t.err)throw t.msg||$l[t.err];return t.result}function fke(r,e){return e=e||{},e.raw=!0,_k(r,e)}function hke(r,e){return e=e||{},e.gzip=!0,_k(r,e)}var pke=b8,mke=_k,gke=fke,yke=hke,wke=Gl,bke={Deflate:pke,deflate:mke,deflateRaw:gke,gzip:yke,constants:wke},Ty=16209,_ke=16191,vke=function(e,t){let n,i,o,s,a,c,u,l,d,h,f,m,w,_,E,S,p,g,y,b,x,v,T,I,R=e.state;n=e.next_in,T=e.input,i=n+(e.avail_in-5),o=e.next_out,I=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=R.dmax,u=R.wsize,l=R.whave,d=R.wnext,h=R.window,f=R.hold,m=R.bits,w=R.lencode,_=R.distcode,E=(1<<R.lenbits)-1,S=(1<<R.distbits)-1;e:do{m<15&&(f+=T[n++]<<m,m+=8,f+=T[n++]<<m,m+=8),p=w[f&E];t:for(;;){if(g=p>>>24,f>>>=g,m-=g,g=p>>>16&255,g===0)I[o++]=p&65535;else if(g&16){y=p&65535,g&=15,g&&(m<g&&(f+=T[n++]<<m,m+=8),y+=f&(1<<g)-1,f>>>=g,m-=g),m<15&&(f+=T[n++]<<m,m+=8,f+=T[n++]<<m,m+=8),p=_[f&S];r:for(;;){if(g=p>>>24,f>>>=g,m-=g,g=p>>>16&255,g&16){if(b=p&65535,g&=15,m<g&&(f+=T[n++]<<m,m+=8,m<g&&(f+=T[n++]<<m,m+=8)),b+=f&(1<<g)-1,b>c){e.msg="invalid distance too far back",R.mode=Ty;break e}if(f>>>=g,m-=g,g=o-s,b>g){if(g=b-g,g>l&&R.sane){e.msg="invalid distance too far back",R.mode=Ty;break e}if(x=0,v=h,d===0){if(x+=u-g,g<y){y-=g;do I[o++]=h[x++];while(--g);x=o-b,v=I}}else if(d<g){if(x+=u+d-g,g-=d,g<y){y-=g;do I[o++]=h[x++];while(--g);if(x=0,d<y){g=d,y-=g;do I[o++]=h[x++];while(--g);x=o-b,v=I}}}else if(x+=d-g,g<y){y-=g;do I[o++]=h[x++];while(--g);x=o-b,v=I}for(;y>2;)I[o++]=v[x++],I[o++]=v[x++],I[o++]=v[x++],y-=3;y&&(I[o++]=v[x++],y>1&&(I[o++]=v[x++]))}else{x=o-b;do I[o++]=I[x++],I[o++]=I[x++],I[o++]=I[x++],y-=3;while(y>2);y&&(I[o++]=I[x++],y>1&&(I[o++]=I[x++]))}}else if(g&64){e.msg="invalid distance code",R.mode=Ty;break e}else{p=_[(p&65535)+(f&(1<<g)-1)];continue r}break}}else if(g&64)if(g&32){R.mode=_ke;break e}else{e.msg="invalid literal/length code",R.mode=Ty;break e}else{p=w[(p&65535)+(f&(1<<g)-1)];continue t}break}}while(n<i&&o<a);y=m>>3,n-=y,m-=y<<3,f&=(1<<m)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<a?257+(a-o):257-(o-a),R.hold=f,R.bits=m},Yf=15,AQ=852,CQ=592,RQ=0,ZR=1,kQ=2,Eke=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xke=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ske=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Tke=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ike=(r,e,t,n,i,o,s,a)=>{let c=a.bits,u=0,l=0,d=0,h=0,f=0,m=0,w=0,_=0,E=0,S=0,p,g,y,b,x,v=null,T,I=new Uint16Array(Yf+1),R=new Uint16Array(Yf+1),M=null,U,j,D;for(u=0;u<=Yf;u++)I[u]=0;for(l=0;l<n;l++)I[e[t+l]]++;for(f=c,h=Yf;h>=1&&I[h]===0;h--);if(f>h&&(f=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<h&&I[d]===0;d++);for(f<d&&(f=d),_=1,u=1;u<=Yf;u++)if(_<<=1,_-=I[u],_<0)return-1;if(_>0&&(r===RQ||h!==1))return-1;for(R[1]=0,u=1;u<Yf;u++)R[u+1]=R[u]+I[u];for(l=0;l<n;l++)e[t+l]!==0&&(s[R[e[t+l]]++]=l);if(r===RQ?(v=M=s,T=20):r===ZR?(v=Eke,M=xke,T=257):(v=Ske,M=Tke,T=0),S=0,l=0,u=d,x=o,m=f,w=0,y=-1,E=1<<f,b=E-1,r===ZR&&E>AQ||r===kQ&&E>CQ)return 1;for(;;){U=u-w,s[l]+1<T?(j=0,D=s[l]):s[l]>=T?(j=M[s[l]-T],D=v[s[l]-T]):(j=96,D=0),p=1<<u-w,g=1<<m,d=g;do g-=p,i[x+(S>>w)+g]=U<<24|j<<16|D|0;while(g!==0);for(p=1<<u-1;S&p;)p>>=1;if(p!==0?(S&=p-1,S+=p):S=0,l++,--I[u]===0){if(u===h)break;u=e[t+s[l]]}if(u>f&&(S&b)!==y){for(w===0&&(w=f),x+=d,m=u-w,_=1<<m;m+w<h&&(_-=I[m+w],!(_<=0));)m++,_<<=1;if(E+=1<<m,r===ZR&&E>AQ||r===kQ&&E>CQ)return 1;y=S&b,i[y]=f<<24|m<<16|x-o|0}}return S!==0&&(i[x+S]=u-w<<24|64<<16|0),a.bits=f,0},c8=Ike,Ake=0,IZ=1,AZ=2,{Z_FINISH:PQ,Z_BLOCK:Cke,Z_TREES:Iy,Z_OK:jl,Z_STREAM_END:Rke,Z_NEED_DICT:kke,Z_STREAM_ERROR:Os,Z_DATA_ERROR:CZ,Z_MEM_ERROR:RZ,Z_BUF_ERROR:Pke,Z_DEFLATED:DQ}=Gl,Ly=16180,NQ=16181,OQ=16182,LQ=16183,BQ=16184,MQ=16185,UQ=16186,FQ=16187,VQ=16188,zQ=16189,Dy=16190,qc=16191,JR=16192,qQ=16193,ek=16194,$Q=16195,KQ=16196,jQ=16197,GQ=16198,Ay=16199,Cy=16200,HQ=16201,WQ=16202,YQ=16203,XQ=16204,QQ=16205,tk=16206,ZQ=16207,JQ=16208,Fr=16209,kZ=16210,PZ=16211,Dke=852,Nke=592,Oke=15,Lke=Oke,eZ=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Bke(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Hl=r=>{if(!r)return 1;let e=r.state;return!e||e.strm!==r||e.mode<Ly||e.mode>PZ?1:0},DZ=r=>{if(Hl(r))return Os;let e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Ly,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Dke),e.distcode=e.distdyn=new Int32Array(Nke),e.sane=1,e.back=-1,jl},NZ=r=>{if(Hl(r))return Os;let e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,DZ(r)},OZ=(r,e)=>{let t;if(Hl(r))return Os;let n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Os:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,NZ(r))},LZ=(r,e)=>{if(!r)return Os;let t=new Bke;r.state=t,t.strm=r,t.window=null,t.mode=Ly;let n=OZ(r,e);return n!==jl&&(r.state=null),n},Mke=r=>LZ(r,Lke),tZ=!0,rk,nk,Uke=r=>{if(tZ){rk=new Int32Array(512),nk=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(c8(IZ,r.lens,0,288,rk,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;c8(AZ,r.lens,0,32,nk,0,r.work,{bits:5}),tZ=!1}r.lencode=rk,r.lenbits=9,r.distcode=nk,r.distbits=5},BZ=(r,e,t,n)=>{let i,o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(t-n,t-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Fke=(r,e)=>{let t,n,i,o,s,a,c,u,l,d,h,f,m,w,_=0,E,S,p,g,y,b,x,v,T=new Uint8Array(4),I,R,M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Hl(r)||!r.output||!r.input&&r.avail_in!==0)return Os;t=r.state,t.mode===qc&&(t.mode=JR),s=r.next_out,i=r.output,c=r.avail_out,o=r.next_in,n=r.input,a=r.avail_in,u=t.hold,l=t.bits,d=a,h=c,v=jl;e:for(;;)switch(t.mode){case Ly:if(t.wrap===0){t.mode=JR;break}for(;l<16;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=u&255,T[1]=u>>>8&255,t.check=Zn(t.check,T,2,0),u=0,l=0,t.mode=NQ;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=Fr;break}if((u&15)!==DQ){r.msg="unknown compression method",t.mode=Fr;break}if(u>>>=4,l-=4,x=(u&15)+8,t.wbits===0&&(t.wbits=x),x>15||x>t.wbits){r.msg="invalid window size",t.mode=Fr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=u&512?zQ:qc,u=0,l=0;break;case NQ:for(;l<16;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(t.flags=u,(t.flags&255)!==DQ){r.msg="unknown compression method",t.mode=Fr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Fr;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,t.check=Zn(t.check,T,2,0)),u=0,l=0,t.mode=OQ;case OQ:for(;l<32;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,t.check=Zn(t.check,T,4,0)),u=0,l=0,t.mode=LQ;case LQ:for(;l<16;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,t.check=Zn(t.check,T,2,0)),u=0,l=0,t.mode=BQ;case BQ:if(t.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,t.check=Zn(t.check,T,2,0)),u=0,l=0}else t.head&&(t.head.extra=null);t.mode=MQ;case MQ:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(x=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+f),x)),t.flags&512&&t.wrap&4&&(t.check=Zn(t.check,n,f,o)),a-=f,o+=f,t.length-=f),t.length))break e;t.length=0,t.mode=UQ;case UQ:if(t.flags&2048){if(a===0)break e;f=0;do x=n[o+f++],t.head&&x&&t.length<65536&&(t.head.name+=String.fromCharCode(x));while(x&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=Zn(t.check,n,f,o)),a-=f,o+=f,x)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=FQ;case FQ:if(t.flags&4096){if(a===0)break e;f=0;do x=n[o+f++],t.head&&x&&t.length<65536&&(t.head.comment+=String.fromCharCode(x));while(x&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=Zn(t.check,n,f,o)),a-=f,o+=f,x)break e}else t.head&&(t.head.comment=null);t.mode=VQ;case VQ:if(t.flags&512){for(;l<16;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(t.wrap&4&&u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Fr;break}u=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=qc;break;case zQ:for(;l<32;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}r.adler=t.check=eZ(u),u=0,l=0,t.mode=Dy;case Dy:if(t.havedict===0)return r.next_out=s,r.avail_out=c,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=l,kke;r.adler=t.check=1,t.mode=qc;case qc:if(e===Cke||e===Iy)break e;case JR:if(t.last){u>>>=l&7,l-=l&7,t.mode=tk;break}for(;l<3;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}switch(t.last=u&1,u>>>=1,l-=1,u&3){case 0:t.mode=qQ;break;case 1:if(Uke(t),t.mode=Ay,e===Iy){u>>>=2,l-=2;break e}break;case 2:t.mode=KQ;break;case 3:r.msg="invalid block type",t.mode=Fr}u>>>=2,l-=2;break;case qQ:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Fr;break}if(t.length=u&65535,u=0,l=0,t.mode=ek,e===Iy)break e;case ek:t.mode=$Q;case $Q:if(f=t.length,f){if(f>a&&(f=a),f>c&&(f=c),f===0)break e;i.set(n.subarray(o,o+f),s),a-=f,o+=f,c-=f,s+=f,t.length-=f;break}t.mode=qc;break;case KQ:for(;l<14;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(t.nlen=(u&31)+257,u>>>=5,l-=5,t.ndist=(u&31)+1,u>>>=5,l-=5,t.ncode=(u&15)+4,u>>>=4,l-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Fr;break}t.have=0,t.mode=jQ;case jQ:for(;t.have<t.ncode;){for(;l<3;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.lens[M[t.have++]]=u&7,u>>>=3,l-=3}for(;t.have<19;)t.lens[M[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,I={bits:t.lenbits},v=c8(Ake,t.lens,0,19,t.lencode,0,t.work,I),t.lenbits=I.bits,v){r.msg="invalid code lengths set",t.mode=Fr;break}t.have=0,t.mode=GQ;case GQ:for(;t.have<t.nlen+t.ndist;){for(;_=t.lencode[u&(1<<t.lenbits)-1],E=_>>>24,S=_>>>16&255,p=_&65535,!(E<=l);){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(p<16)u>>>=E,l-=E,t.lens[t.have++]=p;else{if(p===16){for(R=E+2;l<R;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(u>>>=E,l-=E,t.have===0){r.msg="invalid bit length repeat",t.mode=Fr;break}x=t.lens[t.have-1],f=3+(u&3),u>>>=2,l-=2}else if(p===17){for(R=E+3;l<R;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}u>>>=E,l-=E,x=0,f=3+(u&7),u>>>=3,l-=3}else{for(R=E+7;l<R;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}u>>>=E,l-=E,x=0,f=11+(u&127),u>>>=7,l-=7}if(t.have+f>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Fr;break}for(;f--;)t.lens[t.have++]=x}}if(t.mode===Fr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Fr;break}if(t.lenbits=9,I={bits:t.lenbits},v=c8(IZ,t.lens,0,t.nlen,t.lencode,0,t.work,I),t.lenbits=I.bits,v){r.msg="invalid literal/lengths set",t.mode=Fr;break}if(t.distbits=6,t.distcode=t.distdyn,I={bits:t.distbits},v=c8(AZ,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,I),t.distbits=I.bits,v){r.msg="invalid distances set",t.mode=Fr;break}if(t.mode=Ay,e===Iy)break e;case Ay:t.mode=Cy;case Cy:if(a>=6&&c>=258){r.next_out=s,r.avail_out=c,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=l,vke(r,h),s=r.next_out,i=r.output,c=r.avail_out,o=r.next_in,n=r.input,a=r.avail_in,u=t.hold,l=t.bits,t.mode===qc&&(t.back=-1);break}for(t.back=0;_=t.lencode[u&(1<<t.lenbits)-1],E=_>>>24,S=_>>>16&255,p=_&65535,!(E<=l);){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(S&&!(S&240)){for(g=E,y=S,b=p;_=t.lencode[b+((u&(1<<g+y)-1)>>g)],E=_>>>24,S=_>>>16&255,p=_&65535,!(g+E<=l);){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}u>>>=g,l-=g,t.back+=g}if(u>>>=E,l-=E,t.back+=E,t.length=p,S===0){t.mode=QQ;break}if(S&32){t.back=-1,t.mode=qc;break}if(S&64){r.msg="invalid literal/length code",t.mode=Fr;break}t.extra=S&15,t.mode=HQ;case HQ:if(t.extra){for(R=t.extra;l<R;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=WQ;case WQ:for(;_=t.distcode[u&(1<<t.distbits)-1],E=_>>>24,S=_>>>16&255,p=_&65535,!(E<=l);){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(!(S&240)){for(g=E,y=S,b=p;_=t.distcode[b+((u&(1<<g+y)-1)>>g)],E=_>>>24,S=_>>>16&255,p=_&65535,!(g+E<=l);){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}u>>>=g,l-=g,t.back+=g}if(u>>>=E,l-=E,t.back+=E,S&64){r.msg="invalid distance code",t.mode=Fr;break}t.offset=p,t.extra=S&15,t.mode=YQ;case YQ:if(t.extra){for(R=t.extra;l<R;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Fr;break}t.mode=XQ;case XQ:if(c===0)break e;if(f=h-c,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Fr;break}f>t.wnext?(f-=t.wnext,m=t.wsize-f):m=t.wnext-f,f>t.length&&(f=t.length),w=t.window}else w=i,m=s-t.offset,f=t.length;f>c&&(f=c),c-=f,t.length-=f;do i[s++]=w[m++];while(--f);t.length===0&&(t.mode=Cy);break;case QQ:if(c===0)break e;i[s++]=t.length,c--,t.mode=Cy;break;case tk:if(t.wrap){for(;l<32;){if(a===0)break e;a--,u|=n[o++]<<l,l+=8}if(h-=c,r.total_out+=h,t.total+=h,t.wrap&4&&h&&(r.adler=t.check=t.flags?Zn(t.check,i,h,s-h):h8(t.check,i,h,s-h)),h=c,t.wrap&4&&(t.flags?u:eZ(u))!==t.check){r.msg="incorrect data check",t.mode=Fr;break}u=0,l=0}t.mode=ZQ;case ZQ:if(t.wrap&&t.flags){for(;l<32;){if(a===0)break e;a--,u+=n[o++]<<l,l+=8}if(t.wrap&4&&u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Fr;break}u=0,l=0}t.mode=JQ;case JQ:v=Rke;break e;case Fr:v=CZ;break e;case kZ:return RZ;case PZ:default:return Os}return r.next_out=s,r.avail_out=c,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=l,(t.wsize||h!==r.avail_out&&t.mode<Fr&&(t.mode<tk||e!==PQ))&&BZ(r,r.output,r.next_out,h-r.avail_out),d-=r.avail_in,h-=r.avail_out,r.total_in+=d,r.total_out+=h,t.total+=h,t.wrap&4&&h&&(r.adler=t.check=t.flags?Zn(t.check,i,h,r.next_out-h):h8(t.check,i,h,r.next_out-h)),r.data_type=t.bits+(t.last?64:0)+(t.mode===qc?128:0)+(t.mode===Ay||t.mode===ek?256:0),(d===0&&h===0||e===PQ)&&v===jl&&(v=Pke),v},Vke=r=>{if(Hl(r))return Os;let e=r.state;return e.window&&(e.window=null),r.state=null,jl},zke=(r,e)=>{if(Hl(r))return Os;let t=r.state;return t.wrap&2?(t.head=e,e.done=!1,jl):Os},qke=(r,e)=>{let t=e.length,n,i,o;return Hl(r)||(n=r.state,n.wrap!==0&&n.mode!==Dy)?Os:n.mode===Dy&&(i=1,i=h8(i,e,t,0),i!==n.check)?CZ:(o=BZ(r,e,t,t),o?(n.mode=kZ,RZ):(n.havedict=1,jl))},$ke=NZ,Kke=OZ,jke=DZ,Gke=Mke,Hke=LZ,Wke=Fke,Yke=Vke,Xke=zke,Qke=qke,Zke="pako inflate (from Nodeca project)",Kc={inflateReset:$ke,inflateReset2:Kke,inflateResetKeep:jke,inflateInit:Gke,inflateInit2:Hke,inflate:Wke,inflateEnd:Yke,inflateGetHeader:Xke,inflateSetDictionary:Qke,inflateInfo:Zke};function Jke(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ePe=Jke,MZ=Object.prototype.toString,{Z_NO_FLUSH:tPe,Z_FINISH:rPe,Z_OK:g8,Z_STREAM_END:ik,Z_NEED_DICT:ok,Z_STREAM_ERROR:nPe,Z_DATA_ERROR:rZ,Z_MEM_ERROR:iPe}=Gl;function _8(r){this.options=Oy.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SZ,this.strm.avail_out=0;let t=Kc.inflateInit2(this.strm,e.windowBits);if(t!==g8)throw new Error($l[t]);if(this.header=new ePe,Kc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=m8.string2buf(e.dictionary):MZ.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Kc.inflateSetDictionary(this.strm,e.dictionary),t!==g8)))throw new Error($l[t])}_8.prototype.push=function(r,e){let t=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?rPe:tPe,MZ.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=Kc.inflate(t,s),o===ok&&i&&(o=Kc.inflateSetDictionary(t,i),o===g8?o=Kc.inflate(t,s):o===rZ&&(o=ok));t.avail_in>0&&o===ik&&t.state.wrap>0&&r[t.next_in]!==0;)Kc.inflateReset(t),o=Kc.inflate(t,s);switch(o){case nPe:case rZ:case ok:case iPe:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===ik))if(this.options.to==="string"){let c=m8.utf8border(t.output,t.next_out),u=t.next_out-c,l=m8.buf2string(t.output,c);t.next_out=u,t.avail_out=n-u,u&&t.output.set(t.output.subarray(c,c+u),0),this.onData(l)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===g8&&a===0)){if(o===ik)return o=Kc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};_8.prototype.onData=function(r){this.chunks.push(r)};_8.prototype.onEnd=function(r){r===g8&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Oy.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function vk(r,e){let t=new _8(e);if(t.push(r),t.err)throw t.msg||$l[t.err];return t.result}function oPe(r,e){return e=e||{},e.raw=!0,vk(r,e)}var sPe=_8,aPe=vk,cPe=oPe,uPe=vk,lPe=Gl,dPe={Inflate:sPe,inflate:aPe,inflateRaw:cPe,ungzip:uPe,constants:lPe},{Deflate:fPe,deflate:hPe,deflateRaw:pPe,gzip:mPe}=bke,{Inflate:gPe,inflate:yPe,inflateRaw:wPe,ungzip:bPe}=dPe,_Pe=fPe,vPe=hPe,EPe=pPe,xPe=mPe,SPe=gPe,TPe=yPe,IPe=wPe,APe=bPe,CPe=Gl,Ek={Deflate:_Pe,deflate:vPe,deflateRaw:EPe,gzip:xPe,Inflate:SPe,inflate:TPe,inflateRaw:IPe,ungzip:APe,constants:CPe};async function By(r){let e=new Uint8Array(0);for await(let t of r)e=Ye([e,t],e.length+t.length);return e}var UZ=6;function FZ({repo:r,preload:e}){async function*t(n,i={}){if(i.compressionLevel!=null&&(i.compressionLevel<-1||i.compressionLevel>9))throw(0,r4.default)(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(i.preload!==!1){let a;try{a=nf(n).split("/")}catch(c){throw(0,r4.default)(c,"ERR_INVALID_PATH")}e($.parse(a[0]))}let o=$.asCID(n)||n,s=await pi(o,r.blocks,i);if(s.type==="file"||s.type==="raw"){let a=[];!i.compress||i.archive===!0?a.push([{header:{name:s.path,mode:s.type==="file"&&s.unixfs.mode,mtime:s.type==="file"&&s.unixfs.mtime?new Date(s.unixfs.mtime.secs*1e3):void 0,size:s.size,type:"file"},body:s.content()}],xy()):a.push(s.content),i.compress&&a.push(async function*(c){let u=await By(c);yield Ek.gzip(u,{level:i.compressionLevel||UZ})}),yield*Ke(...a);return}if(s.type==="directory"){let a=[_y(o,r.blocks,i),async function*(c){for await(let u of c){let l={header:{name:u.path,size:u.size}};if(u.type==="file")l.header.type="file",l.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,l.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0,l.body=u.content();else if(u.type==="raw")l.header.type="file",l.body=u.content();else if(u.type==="directory")l.header.type="directory",l.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,l.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0;else throw(0,r4.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");yield l}},xy()];if(i.compress){if(!i.archive)throw(0,r4.default)(new Error("file is not regular"),"ERR_INVALID_PATH");i.compress&&a.push(async function*(c){let u=await By(c);yield Ek.gzip(u,{level:i.compressionLevel||UZ})})}yield*Ke(...a);return}throw(0,r4.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS")}return J(t)}var VZ=L(fe(),1);function zZ({repo:r,preload:e}){async function*t(n,i={}){let o=nf(n),s=o.split("/");i.preload!==!1&&e($.parse(s[0]));let a=$.asCID(o)||o,c=await pi(a,r.blocks,i);if(c.type==="file"){yield pA(c);return}if(c.type==="directory"){for await(let u of c.content())yield pA(u);return}throw(0,VZ.default)(new Error(`Unknown UnixFS type ${c.type}`),"ERR_UNKNOWN_UNIXFS_TYPE")}return J(t)}var My=class{constructor({preload:e,repo:t,hashers:n,options:i}){let o=MX({preload:e,repo:t,options:i,hashers:n});this.addAll=o,this.add=$Y({addAll:o}),this.cat=fQ({repo:t,preload:e}),this.get=FZ({repo:t,preload:e}),this.ls=zZ({repo:t,preload:e})}};var Wl="0.18.1",qZ="",$Z="^0.158.1";function KZ({repo:r}){async function e(t={}){let n=await r.version.get();return{version:Wl,commit:qZ,repo:`${n}`,"ipfs-core":Wl,"interface-ipfs-core":$Z}}return J(e)}var Uy=L(fe(),1);var RPe=z("ipfs:components:id");function jZ({peerId:r,network:e}){async function t(n={}){let i=e.try();if(!i){if(n.peerId)throw new nl;if(r.publicKey==null)throw(0,Uy.default)(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");return{id:r,publicKey:ie(r.publicKey,"base64pad"),addresses:[],agentVersion:`js-ipfs/${Wl}`,protocolVersion:"9000",protocols:[]}}let{libp2p:o}=i,s=n.peerId?n.peerId:r,a=await kPe(s,o,n),c=ie(a.metadata.get("AgentVersion")||new Uint8Array),u=ie(a.metadata.get("ProtocolVersion")||new Uint8Array),l=a.id.toString(),d=a.publicKey?ie(a.publicKey,"base64pad"):"";return{id:s,publicKey:d,addresses:(a.addresses||[]).map(h=>{let f=h.toString();return f.endsWith(`/p2p/${l}`)?f:`${f}/p2p/${l}`}).sort().map(h=>Ee(h)),agentVersion:c,protocolVersion:u,protocols:(a.protocols||[]).sort()}}return J(t)}async function kPe(r,e,t){let n=await e.peerStore.get(r);n||(n=await PPe(r,e,t));let i=r.publicKey?r.publicKey:await e.peerStore.keyBook.get(r);if(i==null)try{i=await e.getPublicKey(r,t)}catch(o){RPe.error("Could not load public key for",r.toString(),o)}return{...n,publicKey:i,metadata:n.metadata||new Map,addresses:n.addresses.map(o=>o.multiaddr)}}async function PPe(r,e,t){if(e.dht==null)throw(0,Uy.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(let i of e.dht.findPeer(r,t))if(i.name==="FINAL_PEER")break;let n=await e.peerStore.get(r);if(!n)throw(0,Uy.default)(new Error("Could not find peer"),"ERR_NOT_FOUND");return n}var Vr=DPe;function DPe(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;GZ(i);for(var o;o=n.shift();)if(GZ(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function GZ(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var n4={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:r=>(Vr(r,"Discovery.MDNS.Enabled",!1),Vr(r,"Discovery.webRTCStar.Enabled",!1),r.Swarm={...r.Swarm||{},DisableNatPortMap:!0},r)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:r=>(Vr(r,"Discovery.MDNS.Enabled",!0),Vr(r,"Discovery.webRTCStar.Enabled",!0),Vr(r,"Swarm",{...r.Swarm||{},DisableNatPortMap:!1}),r)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:r=>{let e=Mc();return Vr(r,"Addresses.API",e.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),Vr(r,"Addresses.Gateway",e.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),Vr(r,"Addresses.Swarm",e.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),Vr(r,"Addresses.Delegates",[]),Vr(r,"Bootstrap",[]),Vr(r,"Discovery.MDNS.Enabled",!1),Vr(r,"Discovery.webRTCStar.Enabled",!1),Vr(r,"Swarm",{...r.Swarm||{},DisableNatPortMap:!0}),r}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:r=>{let e=Mc();return Vr(r,"Addresses.API",e.Addresses.API),Vr(r,"Addresses.Gateway",e.Addresses.Gateway),Vr(r,"Addresses.Swarm",e.Addresses.Swarm),Vr(r,"Addresses.Delegates",e.Addresses.Delegates),Vr(r,"Bootstrap",e.Bootstrap),Vr(r,"Discovery.MDNS.Enabled",e.Discovery.MDNS.Enabled),Vr(r,"Discovery.webRTCStar.Enabled",e.Discovery.webRTCStar.Enabled),Vr(r,"Swarm",{...r.Swarm||{},DisableNatPortMap:!1}),r}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:r=>{let e=r.Swarm||{},t=e.ConnMgr||{};return t.LowWater=20,t.HighWater=40,e.ConnMgr=t,r.Swarm=e,r}},"default-power":{description:'Inverse of "lowpower" profile.',transform:r=>{let e=Mc();return r.Swarm=e.Swarm,r}}};var NPe=z("ipfs:core:config");function HZ({repo:r}){return{getAll:J(e),get:J(t),set:J(n),replace:J(i),profiles:{apply:J(o),list:J(OPe)}};async function e(s={}){return r.config.getAll(s)}async function t(s,a){return s?r.config.get(s,a):Promise.reject(new Error("key argument is required"))}async function n(s,a,c){return r.config.set(s,a,c)}async function i(s,a){return r.config.replace(s,a)}async function o(s,a={dryRun:!1}){let{dryRun:c}=a,u=n4[s];if(!u)throw new Error(`No profile with name '${s}' exists`);try{let l=await r.config.getAll(a),d=JSON.parse(JSON.stringify(l));return d=u.transform(d),c||await r.config.replace(d,a),delete l.Identity.PrivKey,delete d.Identity.PrivKey,{original:l,updated:d}}catch(l){throw NPe(l),new Error(`Could not apply profile '${s}' to config: ${l.message}`)}}}async function OPe(r){return Object.keys(n4).map(e=>({name:e,description:n4[e].description}))}function Fy({enumerable:r=!0,configurable:e=!1}={}){return{enumerable:r,configurable:e,writable:!1}}function*LPe(r,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t],o=$.asCID(n);o?yield[i.join("/"),o]:typeof n=="object"&&(yield*xk(n,i))}else{let t=$.asCID(e);t?yield[r.join("/"),t]:yield*xk(e,r)}}function*xk(r,e){if(r==null||r instanceof Uint8Array)return;let t=$.asCID(r);t&&(yield[e.join("/"),t]);for(let[n,i]of Object.entries(r)){let o=[...e,n];yield*LPe(o,i)}}function*BPe(r,e){if(Array.isArray(e))for(let[t,n]of e.entries()){let i=[...r,t];yield i.join("/"),typeof n=="object"&&!$.asCID(n)&&(yield*Sk(n,i))}else yield*Sk(e,r)}function*Sk(r,e){if(!(r==null||typeof r!="object"))for(let[t,n]of Object.entries(r)){let i=[...e,t];yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!$.asCID(n)&&(yield*BPe(i,n))}}function MPe(r,e){let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=$.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}}var Tk=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:Fy(),bytes:Fy(),value:Fy(),asBlock:Fy()})}links(){return xk(this.value,[])}tree(){return Sk(this.value,[])}get(e="/"){return MPe(this.value,e.split("/").filter(Boolean))}};function i4({bytes:r,cid:e,value:t,codec:n}){let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Tk({cid:e,bytes:r,value:i})}var Ck=L(require("fs"),1),Rk=require("util");var K2=L(v1(),1),Vy={SHA2_256:18,LENGTH:32,DAG_PB:112},WZ=40;function v8(r,e){if(!r.length)throw new Error("Unexpected end of data");let t=K2.default.decode(r);return e.seek(K2.default.decode.bytes),t}function YZ(r){let e=new DataView(r.buffer,r.byteOffset,r.byteLength),t=0;return{version:2,characteristics:[e.getBigUint64(t,!0),e.getBigUint64(t+=8,!0)],dataOffset:Number(e.getBigUint64(t+=8,!0)),dataSize:Number(e.getBigUint64(t+=8,!0)),indexOffset:Number(e.getBigUint64(t+=8,!0))}}function XZ(r){K2.default.decode(r);let e=K2.default.decode.bytes,t=K2.default.decode(r.subarray(K2.default.decode.bytes)),n=K2.default.decode.bytes;return e+n+t}var j2={Null:r=>r===null?r:void 0,Int:r=>Number.isInteger(r)?r:void 0,Float:r=>typeof r=="number"&&Number.isFinite(r)?r:void 0,String:r=>typeof r=="string"?r:void 0,Bool:r=>typeof r=="boolean"?r:void 0,Bytes:r=>r instanceof Uint8Array?r:void 0,Link:r=>r!==null&&typeof r=="object"&&r.asCID===r?r:void 0,List:r=>Array.isArray(r)?r:void 0,Map:r=>r!==null&&typeof r=="object"&&r.asCID!==r&&!Array.isArray(r)&&!(r instanceof Uint8Array)?r:void 0},E8={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":j2.Link,"CarV1HeaderOrV2Pragma > roots (anon)":r=>{if(j2.List(r)!==void 0){for(let e=0;e<r.length;e++){let t=r[e];if(t=E8["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),t===void 0)return;if(t!==r[e]){let n=r.slice(0,e);for(let i=e;i<r.length;i++){let o=r[i];if(o=E8["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](o),o===void 0)return;n.push(o)}return n}}return r}},Int:j2.Int,CarV1HeaderOrV2Pragma:r=>{if(j2.Map(r)===void 0)return;let e=Object.entries(r),t=r,n=1;for(let i=0;i<e.length;i++){let[o,s]=e[i];switch(o){case"roots":{let a=E8["CarV1HeaderOrV2Pragma > roots (anon)"](r[o]);if(a===void 0)return;if(a!==s||t!==r){if(t===r){t={};for(let c=0;c<i;c++)t[e[c][0]]=e[c][1]}t.roots=a}}break;case"version":{n--;let a=E8.Int(r[o]);if(a===void 0)return;if(a!==s||t!==r){if(t===r){t={};for(let c=0;c<i;c++)t[e[c][0]]=e[c][1]}t.version=a}}break;default:return}}if(!(n>0))return t}},x8={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":j2.Link,"CarV1HeaderOrV2Pragma > roots (anon)":r=>{if(j2.List(r)!==void 0){for(let e=0;e<r.length;e++){let t=r[e];if(t=x8["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),t===void 0)return;if(t!==r[e]){let n=r.slice(0,e);for(let i=e;i<r.length;i++){let o=r[i];if(o=x8["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](o),o===void 0)return;n.push(o)}return n}}return r}},Int:j2.Int,CarV1HeaderOrV2Pragma:r=>{if(j2.Map(r)===void 0)return;let e=Object.entries(r),t=r,n=1;for(let i=0;i<e.length;i++){let[o,s]=e[i];switch(o){case"roots":{let a=x8["CarV1HeaderOrV2Pragma > roots (anon)"](s);if(a===void 0)return;if(a!==s||t!==r){if(t===r){t={};for(let c=0;c<i;c++)t[e[c][0]]=e[c][1]}t.roots=a}}break;case"version":{n--;let a=x8.Int(s);if(a===void 0)return;if(a!==s||t!==r){if(t===r){t={};for(let c=0;c<i;c++)t[e[c][0]]=e[c][1]}t.version=a}}break;default:return}}if(!(n>0))return t}},QZ={toTyped:E8.CarV1HeaderOrV2Pragma,toRepresentation:x8.CarV1HeaderOrV2Pragma};async function o4(r,e){let t=v8(await r.upTo(8),r);if(t===0)throw new Error("Invalid CAR header (zero length)");let n=await r.exactly(t,!0),i=tl(n);if(QZ.toTyped(i)===void 0)throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||e!==void 0&&i.version!==e)throw new Error(`Invalid CAR version: ${i.version}${e!==void 0?` (expected ${e})`:""}`);if(i.version===1){if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");return i}if(i.roots!==void 0)throw new Error("Invalid CAR header format");let o=YZ(await r.exactly(WZ,!0));r.seek(o.dataOffset-r.pos);let s=await o4(r,1);return Object.assign(s,o)}async function UPe(r){let e=await r.exactly(2,!1);if(e[0]===Vy.SHA2_256&&e[1]===Vy.LENGTH){let s=await r.exactly(34,!0),a=G0(s);return Lt.create(0,Vy.DAG_PB,a)}let t=v8(await r.upTo(8),r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);let n=v8(await r.upTo(8),r),i=await r.exactly(XZ(await r.upTo(8)),!0),o=G0(i);return Lt.create(t,n,o)}async function ZZ(r){let e=r.pos,t=v8(await r.upTo(8),r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;let n=await UPe(r),i=t-Number(r.pos-e);return{cid:n,length:t,blockLength:i}}async function FPe(r){let{cid:e,blockLength:t}=await ZZ(r);return{bytes:await r.exactly(t,!0),cid:e}}async function VPe(r){let e=r.pos,{cid:t,length:n,blockLength:i}=await ZZ(r),o={cid:t,length:n,blockLength:i,offset:e,blockOffset:r.pos};return r.seek(o.blockLength),o}function JZ(r){let e=(async()=>{let t=await o4(r);if(t.version===2){let n=r.pos-t.dataOffset;r=zPe(r,t.dataSize-n)}return t})();return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await FPe(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await VPe(r)}}}function zy(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t,n=!1){if(t>r.length-e)throw new Error("Unexpected end of data");let i=r.subarray(e,e+t);return n&&(e+=t),i},seek(t){e+=t},get pos(){return e}}}function Ik(r){let e=0,t=0,n=0,i=new Uint8Array(0),o=async s=>{t=i.length-n;let a=[i.subarray(n)];for(;t<s;){let u=await r();if(u==null)break;t<0?u.length>t&&a.push(u.subarray(-t)):a.push(u),t+=u.length}i=new Uint8Array(a.reduce((u,l)=>u+l.length,0));let c=0;for(let u of a)i.set(u,c),c+=u.length;n=0};return{async upTo(s){return i.length-n<s&&await o(s),i.subarray(n,n+Math.min(i.length-n,s))},async exactly(s,a=!1){if(i.length-n<s&&await o(s),i.length-n<s)throw new Error("Unexpected end of data");let c=i.subarray(n,n+s);return a&&(e+=s,n+=s),c},seek(s){e+=s,n+=s},get pos(){return e}}}function eJ(r){let e=r[Symbol.asyncIterator]();async function t(){let n=await e.next();return n.done?null:n.value}return Ik(t)}function zPe(r,e){let t=0;return{async upTo(n){let i=await r.upTo(n);return i.length+t>e&&(i=i.subarray(0,e-t)),i},async exactly(n,i=!1){let o=await r.exactly(n,i);if(o.length+t>e)throw new Error("Unexpected end of data");return i&&(t+=n),o},seek(n){t+=n,r.seek(n)},get pos(){return r.pos}}}var Ak=L(v1(),1),tJ=1;function S8(r){let e=Th({version:tJ,roots:r}),t=Ak.default.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function rJ(r){return{async setRoots(e){let t=S8(e);await r.write(t)},async writeBlock(e){let{cid:t,bytes:n}=e;await r.write(new Uint8Array(Ak.default.encode(t.bytes.length+n.length))),await r.write(t.bytes),n.length&&await r.write(n)},async close(){await r.end()},version(){return tJ}}}function qy(){}function nJ(){let r=[],e=null,t=qy,n=!1,i=null,o=qy,s=()=>(e||(e=new Promise(u=>{t=()=>{e=null,t=qy,u()}})),e),a={write(u){r.push(u);let l=s();return o(),l},async end(){n=!0;let u=s();o(),await u}},c={async next(){let u=r.shift();return u?(r.length===0&&t(),{done:!1,value:u}):n?(t(),{done:!0,value:void 0}):(i||(i=new Promise(l=>{o=()=>(i=null,o=qy,l(c.next()))})),i)}};return{writer:a,iterator:c}}var $y=class r{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let t=Lt.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}version(){return this._encoder.version()}static create(e){e=qPe(e);let{encoder:t,iterator:n}=iJ(),i=new r(e,t),o=new Ky(n);return{writer:i,out:o}}static createAppender(){let{encoder:e,iterator:t}=iJ();e.setRoots=()=>Promise.resolve();let n=new r([],e),i=new Ky(t);return{writer:n,out:i}}static async updateRootsInBytes(e,t){let n=zy(e);await o4(n);let i=S8(t);if(Number(n.pos)!==i.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${i.length} bytes)`);return e.set(i,0),e}},Ky=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function iJ(){let r=nJ(),{writer:e,iterator:t}=r;return{encoder:rJ(e),iterator:t}}function qPe(r){if(r===void 0)return[];if(!Array.isArray(r)){let t=Lt.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}let e=[];for(let t of r){let n=Lt.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}var $Pe=(0,Rk.promisify)(Ck.default.read),KPe=(0,Rk.promisify)(Ck.default.write),jy=class extends $y{static async updateRootsInFile(e,t){let i,o=0,s;if(typeof e=="number")s=async()=>(await $Pe(e,i,0,256,o)).bytesRead;else if(typeof e=="object"&&typeof e.read=="function")s=async()=>(await e.read(i,0,256,o)).bytesRead;else throw new TypeError("Bad fd");let a=Ik(async()=>{i=new Uint8Array(256);let u=await s();return o+=u,u<256?i.subarray(0,u):i});await o4(a);let c=S8(t);if(a.pos!==c.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${a.pos} bytes, new header is ${c.length} bytes)`);typeof e=="number"?await KPe(e,c,0,c.length,0):typeof e=="object"&&typeof e.read=="function"&&await e.write(c,0,c.length,0)}};var kk=async({cid:r,load:e,seen:t})=>{t=t||new Set;let n=r.toString(nt);if(t.has(n))return;let i=await e(r);if(t.add(n),i!==null)for(let[,o]of i.links())await kk({cid:o,load:e,seen:t})};var oJ=z("ipfs:components:dag:import"),jPe=[jn,rI];function sJ({repo:r,preload:e,codecs:t}){async function*n(i,o={}){o.preload!==!1&&e(i);let s=$.asCID(i);if(!s)throw new Error(`Unexpected error converting CID type: ${i}`);oJ(`Exporting ${s} as car`);let{writer:a,out:c}=await jy.create([s]),u=null;(async()=>{try{let l=GPe(r,a,{signal:o.signal,timeout:o.timeout},t);await kk({cid:s,load:l})}catch(l){u=l}finally{a.close()}})();for await(let l of c){if(u)break;yield l}if(u)throw u}return J(n)}function GPe(r,e,t,n){return async i=>{let o=await n.getCodec(i.code);if(!o)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);let s=await r.blocks.get(i,t);return oJ(`Adding block ${i} to car`),await e.put({cid:i,bytes:s}),jPe.includes(i.code)?null:i4({bytes:s,cid:i,codec:o})}}async function xn(r){for await(let e of r)return e}var aJ=L(fe(),1);function cJ({codecs:r,repo:e,preload:t}){return J(async function(o,s={}){if(s.preload!==!1&&t(o),s.path){let d=s.localResolve?await xn(g2(o,s.path,r,e,s)):await _r(g2(o,s.path,r,e,s));if(!d)throw(0,aJ.default)(new Error("Not found"),"ERR_NOT_FOUND");return d}let a=await r.getCodec(o.code),c=await e.blocks.get(o,s);return{value:a.decode(c),remainderPath:""}})}var Pk=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Gy=class r extends Pk{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await HPe(e);return new r(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await WPe(e);return new r(t,n,i)}};async function HPe(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return uJ(zy(r))}async function WPe(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return uJ(eJ(r))}async function uJ(r){let e=JZ(r),{version:t,roots:n}=await e.header();return{version:t,roots:n,iterator:e.blocks()}}var lJ=z("ipfs:components:dag:import");function dJ({repo:r}){async function*e(t,n={}){let i=await r.gcLock.readLock();try{let o={signal:n.signal,timeout:n.timeout},s=Vo(t),{value:a,done:c}=await s.peek();if(c)return;a&&s.push(a);let u;a instanceof Uint8Array?u=[s]:u=s;for await(let l of u){let d=await YPe(r,o,l);if(n.pinRoots!==!1)for(let h of d){let f="";try{await r.blocks.has(h)?(lJ(`Pinning root ${h}`),await r.pins.pinRecursively(h)):f="blockstore: block not found"}catch(m){f=m.message}yield{root:{cid:h,pinErrorMsg:f}}}}}finally{i()}}return J(e)}async function YPe(r,e,t){let n=await Gy.fromIterable(t),i=await n.getRoots();return await or(r.blocks.putMany(Ut(n,({cid:o,bytes:s})=>(lJ(`Import block ${o}`),{key:o,value:s})),{signal:e.signal})),i}function fJ({repo:r,codecs:e,hashers:t,preload:n}){async function i(o,s={}){let a=s.pin?await r.gcLock.readLock():null;try{let c=await e.getCodec(s.storeCodec||"dag-cbor");if(!c)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let m=await e.getCodec(s.inputCodec);if(!m)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);o=m.decode(o)}let u=s.version!=null?s.version:1,l=await t.getHasher(s.hashAlg||"sha2-256");if(!l)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let d=c.encode(o),h=await l.digest(d),f=$.create(u,c.code,h);return await r.blocks.put(f,d,{signal:s.signal}),s.pin&&await r.pins.pinRecursively(f),s.preload!==!1&&n(f),f}finally{a&&a()}}return J(i)}function hJ({repo:r,codecs:e,preload:t}){async function n(i,o={}){let{cid:s}=Cc(i);return o.preload!==!1&&t(s),m2(r,e,i,o)}return J(n)}var Hy=class{constructor({repo:e,codecs:t,hashers:n,preload:i}){this.export=sJ({repo:e,preload:i,codecs:t}),this.get=cJ({codecs:t,repo:e,preload:i}),this.import=dJ({repo:e}),this.resolve=hJ({repo:e,codecs:t,preload:i}),this.put=fJ({repo:e,codecs:t,hashers:n,preload:i})}};function pJ(r){let e;try{e=Tt("sni").code}catch{return null}for(let[t,n]of r)if(t===e&&n!==void 0)return n;return null}function mJ(r){return r.some(([e,t])=>e===Tt("tls").code)}function jo(r,e,t){let n=gJ[Tt(r).name];if(n===void 0)throw new Error(`Can't interpret protocol ${Tt(r).name}`);let i=n(e,t);return r===Tt("ip6").code?`[${i}]`:i}var gJ={ip4:(r,e)=>r,ip6:(r,e)=>e.length===0?r:`[${r}]`,tcp:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${jo(t[0],t[1]??"",e)}:${r}`},udp:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${jo(t[0],t[1]??"",e)}:${r}`},dnsaddr:(r,e)=>r,dns4:(r,e)=>r,dns6:(r,e)=>r,dns:(r,e)=>r,ipfs:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${jo(t[0],t[1]??"",e)}/ipfs/${r}`},p2p:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${jo(t[0],t[1]??"",e)}/p2p/${r}`},http:(r,e)=>{let t=mJ(e),n=pJ(e);if(t&&n!==null)return`https://${n}`;let i=t?"https://":"http://",o=e.pop();if(o===void 0)throw new Error("Unexpected end of multiaddr");let s=jo(o[0],o[1]??"",e);return s=s.replace("tcp://",""),`${i}${s}`},tls:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return jo(t[0],t[1]??"",e)},sni:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return jo(t[0],t[1]??"",e)},https:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let n=jo(t[0],t[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(r,e)=>{let t=mJ(e),n=pJ(e);if(t&&n!==null)return`wss://${n}`;let i=t?"wss://":"ws://",o=e.pop();if(o===void 0)throw new Error("Unexpected end of multiaddr");let s=jo(o[0],o[1]??"",e);return s=s.replace("tcp://",""),`${i}${s}`},wss:(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let n=jo(t[0],t[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`},"p2p-websocket-star":(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${jo(t[0],t[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${jo(t[0],t[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(r,e)=>{let t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${jo(t[0],t[1]??"",e)}/p2p-webrtc-direct`}};function s4(r,e){let n=Br(r).stringTuples(),i=n.pop();if(i===void 0)throw new Error("Unexpected end of multiaddr");let o=Tt(i[0]),s=gJ[o.name];if(s==null)throw new Error(`No interpreter found for ${o.name}`);let a=s(i[1]??"",n);return(e==null?void 0:e.assumeHttp)!==!1&&i[0]===Tt("tcp").code&&(a=a.replace("tcp://","http://"),(i[1]==="443"||i[1]==="80")&&(i[1]==="443"&&(a=a.replace("http://","https://")),a=a.substring(0,a.lastIndexOf(":")))),a}function Dk(r){if(!Array.isArray(r))throw new TypeError(`Expected an array, got ${typeof r}`);r=[...r];for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r}var PJ=L(T8(),1);var hDe=z("ipfs:preload");async function DJ(r,e={}){hDe(r);let t=await PJ.default.post(r,{signal:e.signal});t.body&&await or(t.body)}var NJ=L(E6(),1),I8=z("ipfs:preload");function OJ(r={}){if(r.enabled=!!r.enabled,r.addresses=r.addresses||[],r.cache=r.cache||1e3,!r.enabled||!r.addresses.length)return I8("preload disabled"),Object.assign(()=>{},{start:()=>{},stop:()=>{}});let e=!0,t=[],n=r.addresses.map(s=>s4(s)),i=(0,NJ.default)(r.cache),o=async s=>{try{if(e)throw new Error(`preload ${s} but preloader is not started`);let a=s.toString();if(i.has(a))return;i.set(a,!0);let c=Dk(n),u=!1,l=Date.now();for(let d of c){if(e)throw new Error(`preload aborted for ${a}`);let h;try{h=new AbortController,t=t.concat(h),await DJ(`${d}/api/v0/refs?r=true&arg=${encodeURIComponent(a)}`,{signal:h.signal}),u=!0}catch(f){f.type!=="aborted"&&I8.error(f)}finally{t=t.filter(f=>f!==h)}if(u)break}I8(`${u?"":"un"}successfully preloaded ${a} in ${Date.now()-l}ms`)}catch(a){I8.error(a)}};return o.start=()=>{e=!1},o.stop=()=>{e=!0,I8(`aborting ${t.length} pending preload request(s)`),t.forEach(s=>s.abort()),t=[]},o}var Yy=z("ipfs:mfs-preload");function LJ({preload:r,files:e,options:t={}}){if(t.interval=t.interval||30*1e3,!t.enabled){Yy("MFS preload disabled");let s=async()=>{};return{start:s,stop:s}}let n="",i,o=async()=>{try{let s=await e.stat("/"),a=s.cid.toString();n!==a&&(Yy(`preloading updated MFS root ${n} -> ${s.cid}`),await r(s.cid),n=a)}catch(s){Yy.error("failed to preload MFS root",s)}finally{i=setTimeout(o,t.interval)}};return{async start(){let s=await e.stat("/");n=s.cid.toString(),Yy(`monitoring MFS root ${s.cid}`),i=setTimeout(o,t.interval)},stop(){clearTimeout(i)}}}var A8=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Mk=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},BJ=r=>globalThis.DOMException===void 0?new Mk(r):new DOMException(r),MJ=r=>{let e=r.reason===void 0?BJ("This operation was aborted."):r.reason;return e instanceof Error?e:BJ(e)};function jc(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,s,c=new Promise((u,l)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:h}=e;h.aborted&&l(MJ(h));let f=()=>{l(MJ(h))};h.addEventListener("abort",f,{once:!0}),r.finally(()=>{h.removeEventListener("abort",f)})}if(t===Number.POSITIVE_INFINITY){r.then(u,l);return}let d=new A8;s=o.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(h){l(h)}return}typeof r.cancel=="function"&&r.cancel(),i===!1?u():i instanceof Error?l(i):(d.message=i??`Promise timed out after ${t} milliseconds`,l(d))},t),(async()=>{try{u(await r)}catch(h){l(h)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},c}function Uk(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;t(r[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var C1,C8=class{constructor(){mr(this,C1,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&Se(this,C1)[this.size-1].priority>=t.priority){Se(this,C1).push(n);return}let i=Uk(Se(this,C1),n,(o,s)=>s.priority-o.priority);Se(this,C1).splice(i,0,n)}dequeue(){let e=Se(this,C1).shift();return e==null?void 0:e.run}filter(e){return Se(this,C1).filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Se(this,C1).length}};C1=new WeakMap;var a4,c4,G2,R8,u4,k8,Ls,l4,fo,P8,Bs,d4,Gc,D8,sr,UJ,FJ,VJ,zJ,qJ,Xy,Fk,Vk,Qy,$J,Zy,f4=class extends X6.default{constructor(t){var n,i;super();mr(this,sr);mr(this,a4);mr(this,c4);mr(this,G2,0);mr(this,R8);mr(this,u4);mr(this,k8,0);mr(this,Ls);mr(this,l4);mr(this,fo);mr(this,P8);mr(this,Bs,0);mr(this,d4);mr(this,Gc);mr(this,D8);F(this,"timeout");if(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:C8,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${((n=t.intervalCap)==null?void 0:n.toString())??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${((i=t.interval)==null?void 0:i.toString())??""}\` (${typeof t.interval})`);Vt(this,a4,t.carryoverConcurrencyCount),Vt(this,c4,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0),Vt(this,R8,t.intervalCap),Vt(this,u4,t.interval),Vt(this,fo,new t.queueClass),Vt(this,P8,t.queueClass),this.concurrency=t.concurrency,this.timeout=t.timeout,Vt(this,D8,t.throwOnTimeout===!0),Vt(this,Gc,t.autoStart===!1)}get concurrency(){return Se(this,d4)}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);Vt(this,d4,t),si(this,sr,Qy).call(this)}async add(t,n={}){return n={timeout:this.timeout,throwOnTimeout:Se(this,D8),...n},new Promise((i,o)=>{Se(this,fo).enqueue(async()=>{var s;Hu(this,Bs)._++,Hu(this,G2)._++;try{(s=n.signal)==null||s.throwIfAborted();let a=t({signal:n.signal});n.timeout&&(a=jc(Promise.resolve(a),{milliseconds:n.timeout})),n.signal&&(a=Promise.race([a,si(this,sr,$J).call(this,n.signal)]));let c=await a;i(c),this.emit("completed",c)}catch(a){if(a instanceof A8&&!n.throwOnTimeout){i();return}o(a),this.emit("error",a)}finally{si(this,sr,VJ).call(this)}},n),this.emit("add"),si(this,sr,Xy).call(this)})}async addAll(t,n){return Promise.all(t.map(async i=>this.add(i,n)))}start(){return Se(this,Gc)?(Vt(this,Gc,!1),si(this,sr,Qy).call(this),this):this}pause(){Vt(this,Gc,!0)}clear(){Vt(this,fo,new(Se(this,P8)))}async onEmpty(){Se(this,fo).size!==0&&await si(this,sr,Zy).call(this,"empty")}async onSizeLessThan(t){Se(this,fo).size<t||await si(this,sr,Zy).call(this,"next",()=>Se(this,fo).size<t)}async onIdle(){Se(this,Bs)===0&&Se(this,fo).size===0||await si(this,sr,Zy).call(this,"idle")}get size(){return Se(this,fo).size}sizeBy(t){return Se(this,fo).filter(t).length}get pending(){return Se(this,Bs)}get isPaused(){return Se(this,Gc)}};a4=new WeakMap,c4=new WeakMap,G2=new WeakMap,R8=new WeakMap,u4=new WeakMap,k8=new WeakMap,Ls=new WeakMap,l4=new WeakMap,fo=new WeakMap,P8=new WeakMap,Bs=new WeakMap,d4=new WeakMap,Gc=new WeakMap,D8=new WeakMap,sr=new WeakSet,UJ=function(){return Se(this,c4)||Se(this,G2)<Se(this,R8)},FJ=function(){return Se(this,Bs)<Se(this,d4)},VJ=function(){Hu(this,Bs)._--,si(this,sr,Xy).call(this),this.emit("next")},zJ=function(){si(this,sr,Vk).call(this),si(this,sr,Fk).call(this),Vt(this,l4,void 0)},qJ=function(){let t=Date.now();if(Se(this,Ls)===void 0){let n=Se(this,k8)-t;if(n<0)Vt(this,G2,Se(this,a4)?Se(this,Bs):0);else return Se(this,l4)===void 0&&Vt(this,l4,setTimeout(()=>{si(this,sr,zJ).call(this)},n)),!0}return!1},Xy=function(){if(Se(this,fo).size===0)return Se(this,Ls)&&clearInterval(Se(this,Ls)),Vt(this,Ls,void 0),this.emit("empty"),Se(this,Bs)===0&&this.emit("idle"),!1;if(!Se(this,Gc)){let t=!Se(this,sr,qJ);if(Se(this,sr,UJ)&&Se(this,sr,FJ)){let n=Se(this,fo).dequeue();return n?(this.emit("active"),n(),t&&si(this,sr,Fk).call(this),!0):!1}}return!1},Fk=function(){Se(this,c4)||Se(this,Ls)!==void 0||(Vt(this,Ls,setInterval(()=>{si(this,sr,Vk).call(this)},Se(this,u4))),Vt(this,k8,Date.now()+Se(this,u4)))},Vk=function(){Se(this,G2)===0&&Se(this,Bs)===0&&Se(this,Ls)&&(clearInterval(Se(this,Ls)),Vt(this,Ls,void 0)),Vt(this,G2,Se(this,a4)?Se(this,Bs):0),si(this,sr,Qy).call(this)},Qy=function(){for(;si(this,sr,Xy).call(this););},$J=async function(t){return new Promise((n,i)=>{t.addEventListener("abort",()=>{i(t.reason)},{once:!0})})},Zy=async function(t,n){return new Promise(i=>{let o=()=>{n&&!n()||(this.off(t,o),i())};this.on(t,o)})};var Jy=L(require("cluster"),1);var zk="lock:worker:request-read",qk="lock:worker:release-read",$k="lock:master:grant-read",Kk="lock:worker:request-write",jk="lock:worker:release-write",Gk="lock:master:grant-write";var KJ=(r=21)=>Math.random().toString().substring(2);var jJ=(r,e,t,n,i)=>(o,s)=>{s!=null&&s.type===t&&r.dispatchEvent(new MessageEvent(e,{data:{name:s.name,handler:async()=>{o.send({type:i,name:s.name,identifier:s.identifier}),await new Promise(a=>{let c=u=>{u.type===n&&u.identifier===s.identifier&&(o.removeListener("message",c),a())};o.on("message",c)})}}}))},GJ=(r,e,t,n)=>async()=>{let i=KJ();if(process.send==null)throw new Error("No send method on process - are we a cluster worker?");return process.send({type:e,identifier:i,name:r}),new Promise(o=>{let s=a=>{a.type===t&&a.identifier===i&&(process.removeListener("message",s),o(()=>{if(process.send==null)throw new Error("No send method on process - are we a cluster worker?");process.send({type:n,identifier:i,name:r})}))};process.on("message",s)})},HJ=r=>{if(Jy.default.isPrimary||r.singleProcess){let e=new EventTarget;return Jy.default.on("message",jJ(e,"requestReadLock",zk,qk,$k)),Jy.default.on("message",jJ(e,"requestWriteLock",Kk,jk,Gk)),e}return{isWorker:!0,readLock:e=>GJ(e,zk,$k,qk),writeLock:e=>GJ(e,Kk,Gk,jk)}};var Yl={},H2;async function Hk(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>jc((async()=>{await new Promise(i=>{t(()=>{i()})})})(),{milliseconds:e.timeout})),n}var pDe=(r,e)=>{if(H2.isWorker===!0)return{readLock:H2.readLock(r,e),writeLock:H2.writeLock(r,e)};let t=new f4({concurrency:1}),n;return{async readLock(){if(n!=null)return Hk(n,e);n=new f4({concurrency:e.concurrency,autoStart:!1});let i=n,o=Hk(n,e);return t.add(async()=>{i.start(),await i.onIdle().then(()=>{n===i&&(n=null)})}),o},async writeLock(){return n=null,Hk(t,e)}}},mDe={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function Xl(r){let e=Object.assign({},mDe,r);return H2==null&&(H2=HJ(e),H2.isWorker!==!0&&(H2.addEventListener("requestReadLock",t=>{Yl[t.data.name]!=null&&Yl[t.data.name].readLock().then(async n=>t.data.handler().finally(()=>{n()}))}),H2.addEventListener("requestWriteLock",async t=>{Yl[t.data.name]!=null&&Yl[t.data.name].writeLock().then(async n=>t.data.handler().finally(()=>{n()}))}))),Yl[e.name]==null&&(Yl[e.name]=pDe(e.name,e)),Yl[e.name]}var ew;function N8(r=!1){if(ew)return ew;let e=Xl({singleProcess:r});return ew={readLock:t=>async(...n)=>{let i=await e.readLock();try{return await t.apply(null,n)}finally{i()}},writeLock:t=>async(...n)=>{let i=await e.writeLock();try{return await t.apply(null,n)}finally{i()}}},ew}var Wk=L(fe(),1);var WJ=z("ipfs:mfs:utils:with-mfs-root");async function h4(r,e){if(e&&e.signal&&e.signal.aborted)throw(0,Wk.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await r.repo.datastore.open();let t;try{let n=await r.repo.datastore.get(zh);t=$.decode(n)}catch(n){if(n.code!=="ERR_NOT_FOUND")throw n;WJ("Creating new MFS root");let i=dt({Data:new gt({type:"directory"}).marshal(),Links:[]}),o=await ot.digest(i);if(t=$.createV0(o),await r.repo.blocks.put(t,i),e&&e.signal&&e.signal.aborted)throw(0,Wk.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await r.repo.datastore.put(zh,t.bytes)}return WJ(`Loaded MFS root /ipfs/${t}`),t}function p4(r=""){return(r.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var Xk=L(fe(),1);var Yk="ipfs",rn=async(r,e,t)=>{let n=await h4(r,t),i={entryType:"file"},o="";if($.asCID(e)?o=`/ipfs/${e}`:o=e.toString(),o=o.trim(),o=o.replace(/(\/\/+)/g,"/"),o.endsWith("/")&&o.length>1&&(o=o.substring(0,o.length-1)),!o)throw(0,Xk.default)(new Error("paths must not be empty"),"ERR_NO_PATH");if(o.substring(0,1)!=="/")throw(0,Xk.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");o.substring(o.length-1)==="/"&&(o=o.substring(0,o.length-1));let s=p4(o);if(s[0]===Yk){let c;s.length===2?c=`/${s.join("/")}`:c=`/${s.slice(0,s.length-1).join("/")}`,i={type:"ipfs",depth:s.length-2,entryType:"file",mfsPath:`/${s.join("/")}`,mfsDirectory:c,parts:s,path:`/${s.join("/")}`,name:s[s.length-1]}}else{let c=`/${Yk}/${n}${s.length?"/"+s.join("/"):""}`,u=`/${Yk}/${n}/${s.slice(0,s.length-1).join("/")}`;i={type:"mfs",depth:s.length,entryType:"file",mfsDirectory:u,mfsPath:c,parts:s,path:`/${s.join("/")}`,name:s[s.length-1]}}let a=i.type==="mfs"?i.mfsPath:i.path;try{let c=await pi(a,r.repo.blocks,t);i.cid=c.cid,i.mfsPath=`/ipfs/${c.path}`,i.entryType=c.type,i.content=c.content,(i.entryType==="file"||i.entryType==="directory")&&(c.type==="file"||c.type==="directory")&&(i.unixfs=c.unixfs)}catch(c){if(c.code!=="ERR_NOT_FOUND")throw c}return i.exists=!!i.cid,i};var XJ=L(fe(),1);var gDe=Je.bind({ignoreUndefined:!0}),yDe=z("ipfs:mfs:stat"),wDe={withLocal:!1};function W2(r){async function e(t,n={}){n=gDe(wDe,n),yDe(`Fetching stats for ${t}`);let{type:i,cid:o,mfsPath:s}=await rn(r,t,n),a=i==="ipfs"&&o?o:s,c;try{c=await pi(a,r.repo.blocks)}catch(u){throw u.code==="ERR_NOT_FOUND"?(0,XJ.default)(new Error(`${t} does not exist`),"ERR_NOT_FOUND"):u}if(!YJ[c.type])throw new Error(`Cannot stat codec ${c.cid.code}`);return YJ[c.type](c)}return J(e)}var YJ={raw:r=>({cid:r.cid,size:r.node.length,cumulativeSize:r.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:r=>{let e={cid:r.cid,type:"file",size:r.unixfs.fileSize(),cumulativeSize:dt(r.node).length+(r.node.Links||[]).reduce((t,n)=>t+(n.Tsize||0),0),blocks:r.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:r.unixfs.mode};return r.unixfs.mtime&&(e.mtime=r.unixfs.mtime),e},directory:r=>{let e={cid:r.cid,type:"directory",size:0,cumulativeSize:dt(r.node).length+(r.node.Links||[]).reduce((t,n)=>t+(n.Tsize||0),0),blocks:r.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:r.unixfs.mode};return r.unixfs.mtime&&(e.mtime=r.unixfs.mtime),e},object:r=>({cid:r.cid,size:r.node.length,cumulativeSize:r.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:r=>({cid:r.cid,size:r.node.length,cumulativeSize:r.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})};var b4=L(fe(),1);var bDe=z("ipfs:mfs:utils:to-trail");async function R1(r,e){bDe(`Creating trail for path ${e}`);let t=[];for await(let n of qR(e,r.repo.blocks))t.push({name:n.name,cid:n.cid,size:n.size,type:n.type});return t}var tw=async(r,e,t)=>{t.codec||(t.codec=$t),t.hasher||(t.hasher=ot),t.cidVersion===void 0&&(t.cidVersion=1),t.codec===$t&&t.hasher!==ot&&(t.cidVersion=1);let n=await t.hasher.digest(r),i=$.create(t.cidVersion,t.codec.code,n);return t.onlyHash||await e.put(i,r,{signal:t.signal}),i};var rw=Ml.code,nw=8;async function iw(r){return(await Ml.encode(r)).subarray(0,8).reverse()}var Qk=class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},m4=class extends Qk{constructor(e,t){super(e,t),this._bucket=L2({hashFn:iw,bits:nw})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){yield*QJ(this._bucket,e,this,this.options)}};async function*QJ(r,e,t,n){let i=r._children,o=[],s=0;for(let f=0;f<i.length;f++){let m=i.get(f);if(!m)continue;let w=f.toString(16).toUpperCase().padStart(2,"0");if(m instanceof ji){let _;for await(let E of await QJ(m,e,null,n))_=E;if(!_)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:w,Tsize:_.size,Hash:_.cid}),s+=_.size}else if(typeof m.value.flush=="function"){let _=m.value,E;for await(let p of _.flush(e))E=p,yield E;let S=w+m.key;o.push({Name:S,Tsize:E.size,Hash:E.cid}),s+=E.size}else{let _=m.value;if(!_.cid)continue;let E=w+m.key,S=_.size;o.push({Name:E,Tsize:S,Hash:_.cid}),s+=S}}let a=Uint8Array.from(i.bitField().reverse()),u={Data:new gt({type:"hamt-sharded-directory",data:a,fanout:r.tableSize(),hashType:rw,mtime:t&&t.mtime,mode:t&&t.mode}).marshal(),Links:o},l=dt($n(u)),d=await tw(l,e,n),h=l.length+s;yield{cid:d,node:u,size:h}}var O8=z("ipfs:mfs:core:utils:hamt-utils"),g4=async(r,e,t,n)=>{if(!n.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");let i=Uint8Array.from(t._children.bitField().reverse()),o=gt.unmarshal(n.parent.Data),s=new gt({type:"hamt-sharded-directory",data:i,fanout:t.tableSize(),hashType:rw,mode:o.mode,mtime:o.mtime}),a=await r.hashers.getHasher(n.hashAlg),c={Data:s.marshal(),Links:e.sort((h,f)=>(h.Name||"").localeCompare(f.Name||""))},u=dt(c),l=await a.digest(u),d=$.create(n.cidVersion,St,l);return n.flush&&await r.repo.blocks.put(d,u),{node:c,cid:d,size:e.reduce((h,f)=>h+(f.Tsize||0),u.length)}},Zk=async(r,e,t,n,i)=>{let o=new ji({hash:t._options.hash,bits:t._options.bits},n,i);return n._putObjectAt(i,o),await L8(r,e,o,t),o},Jk=async r=>{let e=L2({hashFn:iw,bits:nw});return await Promise.all(r.map(async t=>{let n=t.Name||"";if(n.length===2){let i=parseInt(n,16),o=new ji({hash:e._options.hash,bits:e._options.bits},e,i);return e._putObjectAt(i,o),Promise.resolve()}return e.put(n.substring(2),{size:t.Tsize,cid:t.Hash})})),e},L8=async(r,e,t,n)=>{await Promise.all(e.map(async i=>{let o=i.Name||"";if(o.length===2){O8("Populating sub bucket",o);let s=parseInt(o,16),a=await r.repo.blocks.get(i.Hash),c=qt(a),u=new ji({hash:n._options.hash,bits:n._options.bits},t,s);return t._putObjectAt(s,u),await L8(r,c.Links,u,n),Promise.resolve()}return n.put(o.substring(2),{size:i.Tsize,cid:i.Hash})}))},Ql=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),ZJ=async(r,e,t)=>{let n=await Jk(t.Links),i=await n._findNewBucketAndPos(e),o=[{bucket:i.bucket,prefix:Ql(i.pos)}],s=i.bucket;for(;s!==n;)o.push({bucket:s,prefix:Ql(s._posAtParent)}),s=s._parent;o.reverse(),o[0].node=t;for(let a=0;a<o.length;a++){let c=o[a];if(!c.node)throw new Error("Could not generate HAMT path");let u=c.node.Links.filter(f=>(f.Name||"").substring(0,2)===c.prefix).pop();if(!u){O8(`Link ${c.prefix}${e} will be added`);continue}if(u.Name===`${c.prefix}${e}`){O8(`Link ${c.prefix}${e} will be replaced`);continue}O8(`Found subshard ${c.prefix}`);let l=await r.repo.blocks.get(u.Hash),d=qt(l);if(!o[a+1]){O8(`Loaded new subshard ${c.prefix}`),await Zk(r,d.Links,n,c.bucket,parseInt(c.prefix,16));let f=await n._findNewBucketAndPos(e);o.push({bucket:f.bucket,prefix:Ql(f.pos),node:d});continue}let h=o[a+1];await L8(r,d.Links,h.bucket,n),h.node=d}return await n.put(e,!0),o.reverse(),{rootBucket:n,path:o}},JJ=async(r,e,t={})=>{let n=new m4({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:t.mtime,mode:t.mode},t);for(let o=0;o<e.length;o++)await n._bucket.put(e[o].name,{size:e[o].size,cid:e[o].cid});let i=await _r(n.flush(r.repo.blocks));if(!i)throw new Error("Flushing shard yielded no result");return i};var k1=L(fe(),1);var P1=z("ipfs:mfs:core:utils:add-link");async function Ms(r,e){let t=e.parent;if(e.parentCid){let i=$.asCID(e.parentCid);if(i===null)throw(0,k1.default)(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(i.code!==St)throw(0,k1.default)(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");P1(`Loading parent node ${i}`);let o=await r.repo.blocks.get(i);t=qt(o)}if(!t)throw(0,k1.default)(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!e.cid)throw(0,k1.default)(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!e.name)throw(0,k1.default)(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!e.size&&e.size!==0)throw(0,k1.default)(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!t.Data)throw(0,k1.default)(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");let n=gt.unmarshal(t.Data);return n.type==="hamt-sharded-directory"?(P1("Adding link to sharded directory"),EDe(r,{...e,parent:t})):t.Links.length>=e.shardSplitThreshold?(P1("Converting directory to sharded directory"),_De(r,{...e,parent:t,mtime:n.mtime,mode:n.mode})):(P1(`Adding ${e.name} (${e.cid}) to regular directory`),vDe(r,{...e,parent:t}))}var _De=async(r,e)=>{let t=await JJ(r,e.parent.Links.map(n=>({name:n.Name||"",size:n.Tsize||0,cid:n.Hash})).concat({name:e.name,size:e.size,cid:e.cid}),e);return P1(`Converted directory to sharded directory ${t.cid}`),t},vDe=async(r,e)=>{let t=e.parent.Links.filter(u=>u.Name!==e.name);if(t.push({Name:e.name,Tsize:e.size,Hash:e.cid}),!e.parent.Data)throw(0,k1.default)(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");let n=gt.unmarshal(e.parent.Data),i;if(n.mtime){let u=Date.now(),l=Math.floor(u/1e3);n.mtime={secs:l,nsecs:(u-l*1e3)*1e3},i=n.marshal()}else i=e.parent.Data;e.parent=$n({Data:i,Links:t});let o=await r.hashers.getHasher(e.hashAlg),s=dt(e.parent),a=await o.digest(s),c=$.create(e.cidVersion,St,a);return e.flush&&await r.repo.blocks.put(c,s),{node:e.parent,cid:c,size:s.length}},EDe=async(r,e)=>{let{shard:t,path:n}=await xDe(r,e),i=await _r(t.flush(r.repo.blocks));if(!i)throw new Error("No result from flushing shard");let o=await r.repo.blocks.get(i.cid),s=qt(o),a=e.parent.Links.filter(u=>(u.Name||"").substring(0,2)!==n[0].prefix),c=s.Links.find(u=>(u.Name||"").substring(0,2)===n[0].prefix);if(!c)throw new Error(`No link found with prefix ${n[0].prefix}`);return a.push(c),g4(r,a,n[0].bucket,e)},xDe=async(r,e)=>{let t={name:e.name,cid:e.cid,size:e.size};if(!e.parent.Data)throw(0,k1.default)(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");let n=await Jk(e.parent.Links),i=gt.unmarshal(e.parent.Data),o=new m4({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},e);o._bucket=n,i.mtime&&(o.mtime={secs:Math.round(Date.now()/1e3)});let s=await n._findNewBucketAndPos(t.name),a=SDe(s);a[0].node=e.parent;let c=0;for(;c<a.length;){let u=a[c];c++;let l=u.node;if(!l)throw new Error("Segment had no node");let d=l.Links.find(w=>(w.Name||"").substring(0,2)===u.prefix);if(!d){P1(`Link ${u.prefix}${t.name} will be added`),c=a.length;break}if(d.Name===`${u.prefix}${t.name}`){P1(`Link ${u.prefix}${t.name} will be replaced`),c=a.length;break}if((d.Name||"").length>2){P1(`Link ${d.Name} ${d.Hash} will be replaced with a subshard`),c=a.length;break}P1(`Found subshard ${u.prefix}`);let h=await r.repo.blocks.get(d.Hash),f=qt(h);if(!a[c]){P1(`Loaded new subshard ${u.prefix}`),await Zk(r,f.Links,n,u.bucket,parseInt(u.prefix,16));let w=await n._findNewBucketAndPos(t.name);a.push({bucket:w.bucket,prefix:Ql(w.pos),node:f});break}let m=a[c];await L8(r,f.Links,m.bucket,n),m.node=f}return await o._bucket.put(t.name,{size:t.size,cid:t.cid}),{shard:o,path:a}},SDe=r=>{let e=[{bucket:r.bucket,prefix:Ql(r.pos)}],t=r.bucket._parent,n=r.bucket._posAtParent;for(;t;)e.push({bucket:t,prefix:Ql(n)}),n=t._posAtParent,t=t._parent;return e.reverse(),e};var eee=z("ipfs:mfs:utils:update-tree"),TDe={shardSplitThreshold:1e3};async function Go(r,e,t){t=Object.assign({},TDe,t),eee("Trail",e),e=e.slice().reverse();let n=0,i;for await(let s of r.repo.blocks.getMany(e.map(a=>a.cid))){let a=qt(s),c=e[n].cid,u=e[n].name;if(n++,!i){i={cid:c,name:u,size:s.length};continue}let l=await Ms(r,{parent:a,name:i.name,cid:i.cid,size:i.size,flush:t.flush,shardSplitThreshold:t.shardSplitThreshold,hashAlg:t.hashAlg,cidVersion:t.cidVersion});i={cid:l.cid,name:u,size:l.size}}let{cid:o}=i;return eee(`Final CID ${o}`),o}var tee=L(fe(),1),IDe=z("ipfs:mfs:utils:update-mfs-root");async function Ho(r,e,t){if(t&&t.signal&&t.signal.aborted)throw(0,tee.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return IDe(`New MFS root will be ${e}`),await r.repo.datastore.put(zh,e.bytes),e}var Zl=L(fe(),1);async function ree(r,e,t){let n=new gt({type:e,mode:t.mode,mtime:t.mtime}),i=await r.hashers.getHasher(t.hashAlg),o={Data:n.marshal(),Links:[]},s=dt(o),a=await i.digest(s),c=$.create(t.cidVersion,St,a);return t.flush&&await r.repo.blocks.put(c,s),{cid:c,node:o}}var ADe=Je.bind({ignoreUndefined:!0}),nee=z("ipfs:mfs:mkdir"),CDe={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function Jl(r){async function e(t,n={}){let i=ADe(CDe,n);if(!t)throw new Error("no path given to Mkdir");if(t=t.trim(),t==="/"){if(i.parents)return;throw(0,Zl.default)(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if(t.substring(0,1)!=="/")throw(0,Zl.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");nee(`Creating ${t}`);let o=p4(t);if(o[0]==="ipfs")throw(0,Zl.default)(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let s=await h4(r,i),a,c=[],u=await ree(r,"directory",i);for(let d=0;d<=o.length;d++){let h=o.slice(0,d),f=`/ipfs/${s}/${h.join("/")}`;try{if(a=await pi(f,r.repo.blocks),a.type!=="file"&&a.type!=="directory")throw(0,Zl.default)(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(d===o.length){if(i.parents)return;throw(0,Zl.default)(new Error("file already exists"),"ERR_ALREADY_EXISTS")}c.push({name:a.name,cid:a.cid})}catch(m){if(m.code==="ERR_NOT_FOUND"){if(d<o.length&&!i.parents)throw(0,Zl.default)(new Error(`Intermediate directory path ${f} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await RDe(r,h[h.length-1],u,c[c.length-1],c,i)}else throw m}}let l=await Go(r,c,i);await Ho(r,l,i)}return J(e)}var RDe=async(r,e,t,n,i,o)=>{nee(`Adding empty dir called ${e} to ${n.cid}`);let s=await Ms(r,{parent:n.node,parentCid:n.cid,size:0,cid:t.cid,name:e,hashAlg:o.hashAlg,cidVersion:o.cidVersion,flush:o.flush,shardSplitThreshold:o.shardSplitThreshold});i[i.length-1].cid=s.cid,i.push({name:e,cid:t.cid})};var Y2=L(fe(),1);var kDe=Je.bind({ignoreUndefined:!0}),ow=z("ipfs:mfs:cp"),PDe={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function y4(r){async function e(t,n,i={}){let o=kDe(PDe,i);Array.isArray(t)||(t=[t]);let s=await Promise.all(t.map(h=>rn(r,h,o))),a=await rn(r,n,o);if(!s.length||!a)throw(0,Y2.default)(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");let c=s.find(h=>!h.exists);if(c)throw(0,Y2.default)(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");let u=iee(a);if(a.exists){if(ow("Destination exists"),s.length===1&&!u)throw(0,Y2.default)(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(ow("Destination does not exist"),s.length>1){if(!o.parents)throw(0,Y2.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Jl(r)(a.path,o),a=await rn(r,a.path,o)}else if(a.parts.length>1){let h=`/${a.parts.slice(0,-1).join("/")}`;try{await W2(r)(h,o)}catch(f){if(f.code!=="ERR_NOT_FOUND")throw f;if(!o.parents)throw(0,Y2.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Jl(r)(h,o),a=await rn(r,a.path,o)}}let l=iee(a)?a.mfsPath:a.mfsDirectory,d=await R1(r,l);if(s.length===1){let h=s.pop();if(!h)throw(0,Y2.default)(new Error("could not find source"),"ERR_INVALID_PARAMS");let f=u?h.name:a.name;return ow(`Only one source, copying to destination ${u?"directory":"file"} ${f}`),DDe(r,h,f,d,o)}return ow("Multiple sources, wrapping in a directory"),NDe(r,s,a,d,o)}return J(e)}var iee=r=>r.unixfs&&r.unixfs.type&&r.unixfs.type.includes("directory"),DDe=async(r,e,t,n,i)=>{let o=n.pop();if(!o)throw(0,Y2.default)(new Error("destination had no parent"),"ERR_INVALID_PARAMS");o=await oee(r,e,t,o,i),n.push(o);let s=await Go(r,n,i);await Ho(r,s,i)},NDe=async(r,e,t,n,i)=>{for(let s=0;s<e.length;s++){let a=e[s];t=await oee(r,a,a.name,t,i)}n[n.length-1]=t;let o=await Go(r,n,i);await Ho(r,o,i)},oee=async(r,e,t,n,i)=>{let o=await r.repo.blocks.get(e.cid),{node:s,cid:a,size:c}=await Ms(r,{parentCid:n.cid,size:o.length,cid:e.cid,name:t,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});return n.node=s,n.cid=a,n.size=c,n};var B8=L(fe(),1);var X2=L(fe(),1),Q2=z("ipfs:mfs:core:utils:remove-link");async function see(r,e){let t=e.parent;if(e.parentCid){let i=$.asCID(e.parentCid);if(i===null)throw(0,X2.default)(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");Q2(`Loading parent node ${i}`);let o=await r.repo.blocks.get(i);t=qt(o)}if(!t)throw(0,X2.default)(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!e.name)throw(0,X2.default)(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!t.Data)throw(0,X2.default)(new Error("Parent node had no data"),"ERR_INVALID_NODE");return gt.unmarshal(t.Data).type==="hamt-sharded-directory"?(Q2(`Removing ${e.name} from sharded directory`),LDe(r,{...e,parent:t})):(Q2(`Removing link ${e.name} regular directory`),ODe(r,{...e,parent:t}))}var ODe=async(r,e)=>{e.parent.Links=e.parent.Links.filter(s=>s.Name!==e.name);let t=await dt(e.parent),i=await(await r.hashers.getHasher(e.hashAlg)).digest(t),o=$.create(e.cidVersion,St,i);return await r.repo.blocks.put(o,t),Q2(`Updated regular directory ${o}`),{node:e.parent,cid:o}},LDe=async(r,e)=>{let{rootBucket:t,path:n}=await ZJ(r,e.name,e.parent);await t.del(e.name);let{node:i}=await aee(r,n,e.name,e);return g4(r,i.Links,t,e)},aee=async(r,e,t,n)=>{let i=e.pop();if(!i)throw(0,X2.default)(new Error("Could not find parent"),"EINVALIDPARENT");let{bucket:o,prefix:s,node:a}=i;if(!a)throw(0,X2.default)(new Error("Could not find parent"),"EINVALIDPARENT");let c=a.Links.find(f=>(f.Name||"").substring(0,2)===s);if(!c)throw(0,X2.default)(new Error(`No link found with prefix ${s} for file ${t}`),"ERR_NOT_FOUND");if(c.Name===`${s}${t}`){Q2(`Removing existing link ${c.Name}`);let f=a.Links.filter(m=>m.Name!==c.Name);return await o.del(t),g4(r,f,o,n)}Q2(`Descending into sub-shard ${c.Name} for ${s}${t}`);let u=await aee(r,e,t,n),l=u.cid,d=u.size,h=s;if(u.node.Links.length===1){Q2(`Removing subshard for ${s}`);let f=u.node.Links[0];h=`${s}${(f.Name||"").substring(2)}`,l=f.Hash,d=f.Tsize||0}return Q2(`Updating shard ${s} with name ${h}`),BDe(r,o,a,s,h,d,l,n)},BDe=(r,e,t,n,i,o,s,a)=>{let c=t.Links.filter(u=>u.Name!==n);return c.push({Name:i,Tsize:o,Hash:s}),g4(r,c,e,a)};var MDe=Je.bind({ignoreUndefined:!0}),UDe={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function w4(r){async function e(t,n={}){let i=MDe(UDe,n);Array.isArray(t)||(t=[t]);let o=await Promise.all(t.map(s=>rn(r,s,i)));if(!o.length)throw(0,B8.default)(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");o.forEach(s=>{if(s.path==="/")throw(0,B8.default)(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(let s of o)await FDe(r,s.path,i)}return J(e)}var FDe=async(r,e,t)=>{let n=await rn(r,e,t),i=await R1(r,n.mfsPath),o=i[i.length-1];i.pop();let s=i[i.length-1];if(!s)throw(0,B8.default)(new Error(`${e} does not exist`),"ERR_NOT_FOUND");if(o.type==="directory"&&!t.recursive)throw(0,B8.default)(new Error(`${e} is a directory, use -r to remove directories`),"ERR_WAS_DIR");let{cid:a}=await see(r,{parentCid:s.cid,name:o.name,hashAlg:t.hashAlg,cidVersion:t.cidVersion,flush:t.flush,shardSplitThreshold:t.shardSplitThreshold});s.cid=a;let c=await Go(r,i,t);await Ho(r,c,t)};var VDe=Je.bind({ignoreUndefined:!0}),zDe=z("ipfs:mfs:touch"),cee={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function qDe(r,e,t){let n=0;return(r.includes("x")||r.includes("X")&&(t||e&1||e&8||e&64))&&(n+=1),r.includes("w")&&(n+=2),r.includes("r")&&(n+=4),n}function $De(r,e){let t=0;return r.includes("u")&&(t+=e<<6),r.includes("g")&&(t+=e<<3),r.includes("o")&&(t+=e),t}function KDe(r,e,t){return e.includes("t")&&(t+=parseInt("1000",8)),e.includes("s")&&(r.includes("u")&&(t+=parseInt("4000",8)),r.includes("g")&&(t+=parseInt("2000",8))),t}function jDe(r,e,t){e||(e=0);let n=r.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error(`Invalid file mode: ${r}`);let[,i,o,s]=n;(i==="a"||!i)&&(i="ugo");let a=qDe(s,e,t);return a=$De(i,a),a=KDe(i,s,a),o==="="?(i.includes("u")&&(e=e&parseInt("7077",8),e=e|a),i.includes("g")&&(e=e&parseInt("7707",8),e=e|a),i.includes("o")&&(e=e&parseInt("7770",8),e=e|a),e):o==="+"?a|e:o==="-"?a^e:e}function uee(r,e){if(r instanceof String||typeof r=="string"){let t=`${r}`;t.match(/^\d+$/g)?r=parseInt(t,8):r=0+t.split(",").reduce((n,i)=>jDe(i,n,e.isDirectory()),e.mode||0)}return r}function lee(r){async function e(t,n,i={}){let o=VDe(cee,i);zDe(`Fetching stats for ${t}`);let{cid:s,mfsDirectory:a,name:c}=await rn(r,t,o);if(s.code!==St)throw(0,b4.default)(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(o.recursive){let v=await Ke(async function*(){for await(let T of _y(s,r.repo.blocks)){if(T.type!=="file"&&T.type!=="directory")throw(0,b4.default)(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");T.unixfs.mode=uee(n,T.unixfs);let I=$n({Data:T.unixfs.marshal(),Links:T.node.Links});yield{path:T.path,content:I}}},T=>Gf(T,r.repo.blocks,{...o,pin:!1,dagBuilder:async function*(I,R,M){for await(let U of I)yield async function(){let j=U.content,D=dt(j),q=await tw(D,R,M);if(!j.Data)throw(0,b4.default)(new Error(`${q} had no data`),"ERR_INVALID_NODE");let V=gt.unmarshal(j.Data);return{cid:q,size:D.length,path:U.path,unixfs:V}}}}),T=>_r(T));if(!v)throw(0,b4.default)(new Error(`Could not chmod ${t}`),"ERR_COULD_NOT_CHMOD");await w4(r)(t,o),await y4(r)(`/ipfs/${v.cid}`,t,o);return}let u=await r.repo.blocks.get(s),l=qt(u);if(!l.Data)throw(0,b4.default)(new Error(`${s} had no data`),"ERR_INVALID_NODE");let d=gt.unmarshal(l.Data);d.mode=uee(n,d);let h=dt({Data:d.marshal(),Links:l.Links}),f=o.hashAlg||cee.hashAlg,w=await(await r.hashers.getHasher(f)).digest(h),_=$.create(o.cidVersion,St,w);o.flush&&await r.repo.blocks.put(_,h);let E=await R1(r,a),S=E[E.length-1],p=$.decode(S.cid.bytes),g=await r.repo.blocks.get(p),y=qt(g),b=await Ms(r,{parent:y,name:c,cid:_,size:h.length,flush:o.flush,hashAlg:f,cidVersion:s.version,shardSplitThreshold:1/0});S.cid=b.cid;let x=await Go(r,E,o);await Ho(r,x,o)}return J(e)}var GDe=Je.bind({ignoreUndefined:!0}),HDe={};function dee(r){async function e(t,n={}){n=GDe(HDe,n);let{cid:i}=await W2(r)(t,n);return i}return J(e)}var WDe=Je.bind({ignoreUndefined:!0}),YDe={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function fee(r){async function e(t,n,i={}){let o=WDe(YDe,i);await y4(r)(t,n,o),await w4(r)(t,{...o,recursive:!0})}return J(e)}var eP=L(fe(),1);var XDe=Je.bind({ignoreUndefined:!0}),QDe=z("ipfs:mfs:touch"),hee={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function pee(r){async function e(t,n={}){let i=XDe(hee,n);i.mtime=i.mtime||new Date,QDe(`Touching ${t} mtime: ${i.mtime}`);let{cid:o,mfsDirectory:s,name:a,exists:c}=await rn(r,t,i),u=n.hashAlg||hee.hashAlg,l=await r.hashers.getHasher(u),d,h,f=i.cidVersion;if(c){if(o.code!==St)throw(0,eP.default)(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");f=o.version;let y=await r.repo.blocks.get(o),b=qt(y);if(!b.Data)throw(0,eP.default)(new Error(`${t} had no data`),"ERR_INVALID_NODE");let x=gt.unmarshal(b.Data);x.mtime=i.mtime,d=dt({Data:x.marshal(),Links:b.Links});let v=await l.digest(d);h=$.create(i.cidVersion,St,v),i.flush&&await r.repo.blocks.put(h,d)}else{let y=new gt({type:"file",mtime:i.mtime});d=dt({Data:y.marshal(),Links:[]});let b=await l.digest(d);h=$.create(i.cidVersion,St,b),i.flush&&await r.repo.blocks.put(h,d)}let m=await R1(r,s),w=m[m.length-1],_=w.cid,E=await r.repo.blocks.get(_),S=qt(E),p=await Ms(r,{parent:S,name:a,cid:h,size:d.length,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:f});w.cid=p.cid;let g=await Go(r,m,i);await Ho(r,g,i)}return J(e)}var tP=L(fe(),1);var ZDe=Je.bind({ignoreUndefined:!0}),JDe={offset:0,length:1/0};function mee(r){function e(t,n={}){return n=ZDe(JDe,n),{[Symbol.asyncIterator]:async function*(){let o=await rn(r,t,n),s=await pi(o.mfsPath,r.repo.blocks);if(s.type!=="file"&&s.type!=="raw")throw(0,tP.default)(new Error(`${t} was not a file or raw bytes`),"ERR_NOT_FILE");if(!s.content)throw(0,tP.default)(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(let a of s.content({offset:n.offset,length:n.length}))yield a}}}return J(e)}var rP=L(fe(),1);var M8=z("ipfs:mfs:utils:to-async-iterator");function gee(r){if(!r)throw(0,rP.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if((typeof r=="string"||r instanceof String)&&(M8("Content was a string"),r=oe(r.toString())),r.length)return M8("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield r}};if(r[Symbol.asyncIterator])return M8("Content was an async iterator"),r;if(r[Symbol.iterator])return M8("Content was an iterator"),r;if(globalThis.Blob&&r instanceof globalThis.Blob)return M8("Content was an HTML5 Blob"),uo(r.stream());throw(0,rP.default)(new Error(`Don't know how to convert ${r} into an async iterator`),"ERR_INVALID_PARAMS")}var N1=L(fe(),1);var eNe=Je.bind({ignoreUndefined:!0}),D1=z("ipfs:mfs:write"),tNe={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(r,e)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function wee(r){async function e(t,n,i={}){let o=eNe(tNe,i),s,a,c;if(D1("Reading source, destination and parent"),await N8().readLock(async()=>{s=await gee(n),a=await rn(r,t,o),c=await rn(r,a.mfsDirectory,o)})(),D1("Read source, destination and parent"),!o.parents&&!c.exists)throw(0,N1.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(s==null)throw(0,N1.default)(new Error("could not create source"),"ERR_NO_SOURCE");if(a==null)throw(0,N1.default)(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!o.create&&!a.exists)throw(0,N1.default)(new Error("file does not exist"),"ERR_NO_EXIST");if(a.entryType!=="file")throw(0,N1.default)(new Error("not a file"),"ERR_NOT_A_FILE");return rNe(r,t,s,a,o)}return J(e)}var rNe=async(r,e,t,n,i)=>{let o=await nNe(r,t,n,i);await N8().writeLock(async()=>{let s=p4(e),a=s.pop();if(a==null)throw(0,N1.default)(new Error("source does not exist"),"ERR_NO_EXIST");let c=!1;try{await W2(r)(`/${s.join("/")}`,i),c=!0}catch(_){if(_.code!=="ERR_NOT_FOUND")throw _}c||await Jl(r)(`/${s.join("/")}`,i);let u=await rn(r,e,i),l=await R1(r,u.mfsDirectory),d=l[l.length-1];if(!d)throw(0,N1.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(!d.type||!d.type.includes("directory"))throw(0,N1.default)(new Error(`cannot write to ${d.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");let h=await r.repo.blocks.get(d.cid),f=qt(h),m=await Ms(r,{parent:f,name:a,cid:o.cid,size:o.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});d.cid=m.cid;let w=await Go(r,l,i);await Ho(r,w,i)})()},nNe=async(r,e,t,n)=>{t.exists?D1(`Overwriting file ${t.cid} offset ${n.offset} length ${n.length}`):D1(`Writing file offset ${n.offset} length ${n.length}`);let i=[];if(n.offset>0)if(t.unixfs){if(D1(`Writing first ${n.offset} bytes of original file`),i.push(()=>t.content({offset:0,length:n.offset})),t.unixfs.fileSize()<n.offset){let l=n.offset-t.unixfs.fileSize();D1(`Writing zeros for extra ${l} bytes`),i.push(yee(l))}}else D1(`Writing zeros for first ${n.offset} bytes`),i.push(yee(n.offset));i.push(bee(e,n.length));let o=oNe(iNe(i),l=>{if(t.unixfs&&!n.truncate){let d=t.unixfs.fileSize();if(d>l)return D1(`Writing last ${d-l} of ${d} bytes from original file starting at offset ${l}`),t.content({offset:l});D1("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),s;n.mode!==void 0&&n.mode!==null?s=yc(n.mode):t&&t.unixfs&&(s=t.unixfs.mode);let a;n.mtime!=null?a=t2(n.mtime):t&&t.unixfs&&(a=t.unixfs.mtime);let c=await r.hashers.getHasher(n.hashAlg),u=await _r(Gf([{content:o,mode:s,mtime:a}],r.repo.blocks,{progress:n.progress,hasher:c,cidVersion:n.cidVersion,strategy:n.strategy,rawLeaves:n.rawLeaves,reduceSingleLeafToSelf:n.reduceSingleLeafToSelf,leafType:n.leafType}));if(!u)throw(0,N1.default)(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return D1(`Wrote ${u.cid}`),{cid:u.cid,size:u.size}},bee=(r,e)=>async function*(){let n=0;for await(let i of r){if(n+=i.length,n>e){yield i.subarray(0,e-n);return}yield i}},yee=(r,e=cK)=>{let t=new Uint8Array(e);async function*n(){for(;;)yield t}return bee(n(),r)},iNe=async function*(r){for(let e=0;e<r.length;e++)yield*r[e]()},oNe=async function*(r,e){let t=0;for await(let n of r)t+=n.length,yield n;for await(let n of e(t))t+=n.length,yield n};var _ee=r=>{let e={cid:r.cid,name:r.name,type:r.type==="directory"?"directory":"file",size:r.size};return(r.type==="file"||r.type==="directory")&&(e.mode=r.unixfs.mode,e.mtime=r.unixfs.mtime),e};function vee(r){async function*e(t,n={}){let i=await rn(r,t,n),o=await pi(i.mfsPath,r.repo.blocks);if(o.type==="directory"){yield*Ut(o.content(n),_ee);return}yield _ee(o)}return J(e)}var sNe={stat:W2},aNe={chmod:lee,cp:y4,flush:dee,mkdir:Jl,mv:fee,rm:w4,touch:pee},Eee={write:wee,read:mee,ls:vee},xee=({options:r,mfs:e,operations:t,lock:n})=>{Object.keys(t).forEach(i=>{e[i]=n(t[i](r))})},cNe={repoOwner:!0,repo:null};function uNe(r){let{repoOwner:e}=Object.assign({},cNe||{},r),t=N8(e),n=s=>t.readLock(s),i=s=>t.writeLock(s),o={};return xee({options:r,mfs:o,operations:sNe,lock:n}),xee({options:r,mfs:o,operations:aNe,lock:i}),Object.keys(Eee).forEach(s=>{o[s]=Eee[s](r)}),o}function See({repo:r,preload:e,hashers:t,options:n}){let i=uNe({repo:r,repoOwner:n.repoOwner!==!1,hashers:t}),o=s=>(...c)=>{let u=c.filter(l=>eK(l)||ef(l));if(u.length){let l=c[c.length-1];l&&l.preload!==!1&&u.forEach(d=>e(d))}return s(...c)};return{...i,chmod:i.chmod,cp:o(i.cp),mkdir:i.mkdir,stat:o(i.stat),rm:i.rm,read:o(i.read),touch:i.touch,write:i.write,mv:o(i.mv),flush:i.flush,ls:o(async function*(...s){for await(let a of i.ls(...s))yield{...a,size:a.size||0}})}}function Tee({keychain:r}){return J((t,n)=>r.exportKey(t,n))}var Iee="Ed25519",Aee=2048;function Cee({keychain:r}){return J((t,n={type:Iee,size:Aee})=>r.createKey(t,n.type||Iee,n.size||Aee))}function Ree({keychain:r}){return J((t,n,i)=>r.importKey(t,n,i))}function kee({keychain:r}){return J(t=>r.findKeyByName(t))}function Pee({keychain:r}){return J(()=>r.listKeys())}function Dee({keychain:r}){return J(async(t,n)=>{let i=await r.renameKey(t,n);return{was:t,now:i.name,id:i.id,overwrite:!1}})}function Nee({keychain:r}){return J(t=>r.removeKey(t))}var sw=class{constructor({keychain:e}){this.gen=Cee({keychain:e}),this.list=Pee({keychain:e}),this.rm=Nee({keychain:e}),this.rename=Dee({keychain:e}),this.export=Tee({keychain:e}),this.import=Ree({keychain:e}),this.info=kee({keychain:e})}};function ho({repo:r,preload:e}){async function t(n,i={}){i.preload!==!1&&e(n);let o=await r.blocks.get(n,i);return qt(o)}return J(t)}function Oee({repo:r,preload:e}){let t=ho({repo:r,preload:e});async function n(i,o={}){return(await t(i,o)).Data||new Uint8Array(0)}return J(n)}function nP(r,e=[]){for(let t in r){let n=r[t];if(t==="/"&&Object.keys(r).length===1)try{e.push({Name:"",Tsize:0,Hash:$.parse(n)});continue}catch{}let i=$.asCID(n);if(i){e.push({Name:"",Tsize:0,Hash:i});continue}Array.isArray(n)&&nP(n,e),n&&typeof n=="object"&&nP(n,e)}return e}function Lee({repo:r,codecs:e}){async function t(n,i={}){let o=await e.getCodec(n.code),s=await r.blocks.get(n,i),a=o.decode(s);switch(n.code){case jn:return[];case St:return a.Links;case Sh:case zT:return nP(a);default:throw new Error(`Cannot resolve links from codec ${n.code}`)}}return J(t)}function Bee({repo:r,preload:e}){async function t(n={}){let i;if(n.template)if(n.template==="unixfs-dir")i=new gt({type:"directory"}).marshal();else throw new Error("unknown template");let o=dt({Data:i,Links:[]}),s=await ot.digest(o),a=$.createV0(s);return await r.blocks.put(a,o,{signal:n.signal}),n.preload!==!1&&e(a),a}return J(t)}function O1({repo:r,preload:e}){async function t(n,i={}){let o=await r.gcLock.readLock();try{let s=dt(n),a=await ot.digest(s),c=$.createV1(St,a);return await r.blocks.put(c,s,{signal:i.signal}),i.preload!==!1&&e(c),i.pin&&await r.pins.pinRecursively(c,{signal:i.signal}),c}finally{o()}}return J(t)}function Mee({repo:r,preload:e}){let t=ho({repo:r,preload:e});async function n(i,o={}){let s=await t(i,o),c=dt(s).length,u=s.Links.reduce((l,d)=>l+(d.Tsize||0),0);return{Hash:i,NumLinks:s.Links.length,BlockSize:c,LinksSize:c-(s.Data||[]).length,DataSize:(s.Data||[]).length,CumulativeSize:c+u}}return J(n)}function Uee({repo:r,preload:e}){let t=ho({repo:r,preload:e}),n=O1({repo:r,preload:e});async function i(o,s,a={}){let c=await t(o,a);return n({...c,Links:c.Links.concat([s])},a)}return J(i)}function Fee({repo:r,preload:e}){let t=ho({repo:r,preload:e}),n=O1({repo:r,preload:e});async function i(o,s,a={}){let c=await t(o,a),u=Ye([c.Data||[],s]);return n({...c,Data:u},a)}return J(i)}function Vee({repo:r,preload:e}){let t=ho({repo:r,preload:e}),n=O1({repo:r,preload:e});async function i(o,s,a={}){let c=await t(o,a),u=(typeof s=="string"?s:s.Name)||"";return c.Links=c.Links.filter(l=>l.Name!==u),n(c,a)}return J(i)}function zee({repo:r,preload:e}){let t=ho({repo:r,preload:e}),n=O1({repo:r,preload:e});async function i(o,s,a={}){let c=await t(o,a);return n({...c,Data:s},a)}return J(i)}var aw=class{constructor({repo:e,preload:t}){this.addLink=Uee({repo:e,preload:t}),this.appendData=Fee({repo:e,preload:t}),this.rmLink=Vee({repo:e,preload:t}),this.setData=zee({repo:e,preload:t})}};var cw=class{constructor({repo:e,codecs:t,preload:n}){this.data=Oee({repo:e,preload:n}),this.get=ho({repo:e,preload:n}),this.links=Lee({repo:e,codecs:t}),this.new=Bee({repo:e,preload:n}),this.put=O1({repo:e,preload:n}),this.stat=Mee({repo:e,preload:n}),this.patch=new aw({repo:e,preload:n})}};var lNe=z("ipfs:repo:gc");function qee({repo:r,hashers:e}){async function*t(n={}){let i=Date.now(),o;try{o=await h4({repo:r,hashers:e},n),await r.pins.pinRecursively(o),yield*r.gc()}finally{o&&await r.pins.unpin(o)}lNe(`Complete (${Date.now()-i}ms)`)}return J(t)}function uw({repo:r}){async function e(t={}){let n=await r.stat();return{numObjects:BigInt(n.numObjects.toString()),repoSize:BigInt(n.repoSize.toString()),repoPath:n.repoPath,version:`${n.version}`,storageMax:BigInt(n.storageMax.toString())}}return J(e)}function $ee({repo:r}){async function e(t={}){try{await r._checkInitialized(t)}catch(n){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(o=>o.test(n.message)))return 12;throw n}return r.version.get()}return J(e)}var lw=class{constructor({repo:e,hashers:t}){this.gc=qee({repo:e,hashers:t}),this.stat=uw({repo:e}),this.version=$ee({repo:e}),this.setApiAddr=n=>e.apiAddr.set(n)}};var jee=L(fe(),1);function Kee(r,e){return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0}}function Gee({network:r}){return J(async function*(t={}){let{libp2p:n}=await r.use(t);if(!t.poll){yield Kee(n,t);return}let i=t.interval||1e3,o=-1;try{if(o=typeof i=="string"?p2(i)||-1:i,!o||o<0)throw new Error("invalid duration")}catch(a){throw(0,jee.default)(a,"ERR_INVALID_POLL_INTERVAL")}let s;try{for(;;)yield Kee(n,t),await new Promise(a=>{s=setTimeout(a,o)})}finally{clearTimeout(s)}})}var dw=class{constructor({repo:e,network:t}){this.repo=uw({repo:e}),this.bw=Gee({network:t}),this.bitswap=Bg({network:t})}};var ooe=L(require("os"),1);var F8=fNe;function fNe(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var Zte=L(Co(),1),a3=L(fe(),1);var Wee=L(Co(),1);async function Ua(r){let e=0;for await(let t of r)e++;return e}var hNe=(0,Wee.default)("ipfs:repo:migrator:migration-8");function Yee(r){return r.child?Yee(r.child):r}function pNe(r){try{let e=zt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=$.decode(e).multihash.bytes,n=zt.encode(t).slice(1).toUpperCase();return new Re(`/${n}`,!1)}catch{return r}}function mNe(r){try{let e=zt.decode(`b${r.toString().toLowerCase().slice(1)}`),t=Jr(e),n=zt.encode($.createV1(jn,t).bytes).slice(1);return new Re(`/${n.toUpperCase()}`,!1)}catch{return r}}async function Hee(r,e,t){let n=r.blocks;await n.open();let i=Yee(n),o=await Ua(i.queryKeys({filters:[s=>t(s).toString()!==s.toString()]}));try{let s=0;for await(let a of i.query({})){let c=t(a.key);c.toString()!==a.key.toString()&&(s+=1,hNe(`Migrating Block from ${a.key} to ${c}`,await i.has(a.key)),await i.delete(a.key),await i.put(c,a.value),e(s/o*100,`Migrated Block from ${a.key} to ${c}`))}}finally{await n.close()}}var Xee={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>Hee(r,e,pNe),revert:(r,e=()=>{})=>Hee(r,e,mNe)};var e3=L(s1(),1),Qee=e3.default.Reader,gNe=e3.default.Writer,syt=e3.default.util,fw=e3.default.roots.default||(e3.default.roots.default={}),Zee=fw.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=gNe.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof Qee||(i=Qee.create(i));for(var s=o===void 0?i.len:i.pos+o,a=new fw.ipfs.pin.Set;i.pos<s;){var c=i.uint32();switch(c>>>3){case 1:a.version=i.uint32();break;case 2:a.fanout=i.uint32();break;case 3:a.seed=i.fixed32();break;default:i.skipType(c&7);break}}return a},t.fromObject=function(i){if(i instanceof fw.ipfs.pin.Set)return i;var o=new fw.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(s.version=0,s.fanout=0,s.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(s.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(s.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(s.seed=i.seed),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,e3.default.util.toJSONOptions)},t}(),e}(),r})();var rte=L(ete(),1),mw=L(v1(),1);var V8=new Re("/local/pins"),pw=256,tte=8192,oP=$.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),t3={direct:"direct",recursive:"recursive"};function sP(r){return new Re(`/${zt.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}function _4(r,e){if(globalThis.Buffer!=null)return globalThis.Buffer.compare(r,e);for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}var aP=Zee.pin.Set;function yNe(r){let e=r.Data;if(!e)throw new Error("No data present");let t=mw.default.decode(e),n=mw.default.decode.bytes??0;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=aP.toObject(aP.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function wNe(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=oe(e.toString()),o=Ye([t,i],t.byteLength+i.byteLength);return(0,rte.default)(ie(o))}async function*nte(r,e){let t=yNe(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!oP.equals(o)){let s=await r.get(o),a=qt(s);yield*nte(r,a)}}else yield i.Hash;n++}}async function*z8(r,e,t){let n=e.Links.find(s=>s.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=qt(i);yield*nte(r,o)}function bNe(r,e){return t(e,0);async function t(n,i){let o=aP.encode({version:1,fanout:pw,seed:i}).finish(),s=mw.default.encode(o.length),a=Ye([s,o]),c=[];for(let l=0;l<pw;l++)c.push({Name:"",Tsize:1,Hash:oP});if(n.length<=tte){let l=n.map(f=>({link:{Name:"",Tsize:1,Hash:f.key},data:f.data||new Uint8Array})).sort((f,m)=>_4(f.link.Hash.bytes,m.link.Hash.bytes)),d=c.concat(l.map(f=>f.link));return{Data:Ye([a,...l.map(f=>f.data)]),Links:d}}else{let l=n.reduce((h,f)=>{let m=wNe(i,f.key)%pw;return h[m]=m in h?h[m].concat([f]):[f],h},[]),d=0;for(let h of l){let f=await t(h,i+1);await u(f,d),d++}return{Data:a,Links:c}}async function u(l,d){let h=dt(l),f=await ot.digest(h),m=$.createV0(f);await r.put(m,h);let w=l.Links.reduce((_,E)=>_+(E.Tsize||0),0)+h.length;c[d]={Name:"",Tsize:w,Hash:m}}}}async function cP(r,e,t){let n=await bNe(r,t.map(c=>({key:c}))),i=dt(n),o=await ot.digest(i),s=$.createV0(o);await r.put(s,i);let a=n.Links.reduce((c,u)=>c+u.Tsize,0)+i.length;return{Name:e,Tsize:a,Hash:s}}async function vNe(r,e,t,n){if(!await e.has(V8))return;let i=await e.get(V8),o=$.decode(i),s=await r.get(o),a=qt(s),c=0,u=await Ua(z8(r,a,t3.recursive))+await Ua(z8(r,a,t3.direct));for await(let l of z8(r,a,t3.recursive)){c++;let d={depth:1/0};l.version!==0&&(d.version=l.version),l.code!==St&&(d.codec=l.code),await t.put(sP(l),Lc(d)),n(c/u*100,`Migrated recursive pin ${l}`)}for await(let l of z8(r,a,t3.direct)){c++;let d={depth:0};l.version!==0&&(d.version=l.version),l.code!==St&&(d.codec=l.code),await t.put(sP(l),Lc(d)),n(c/u*100,`Migrated direct pin ${l}`)}await r.delete(o),await e.delete(V8)}async function ENe(r,e,t,n){let i=[],o=[],s=0,a=await Ua(t.queryKeys({}));for await(let{key:h,value:f}of t.query({})){s++;let m=Cs(f),w=$.create(m.version||0,m.codec||St,Jr(zt.decode("b"+h.toString().toLowerCase().split("/").pop())));m.depth===0?(n(s/a*100,`Reverted direct pin ${w}`),o.push(w)):(n(s/a*100,`Reverted recursive pin ${w}`),i.push(w))}n(100,"Updating pin root");let c={Links:[await cP(r,t3.direct,o),await cP(r,t3.recursive,i)]},u=dt(c),l=await ot.digest(u),d=$.createV0(l);await r.put(d,u),await e.put(V8,d.bytes)}async function ite(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var ote={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>ite(r,e,vNe),revert:(r,e=()=>{})=>ite(r,e,ENe)};var ste=new Re("/config"),q8=new Re("/version");function $8(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function xNe(r,e,t){let n=await e(r);if(n)return n;let i=$8(t);return i?new Promise((o,s)=>{let a=i.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{o(!!a.result)}}):!1}async function SNe(r,e,t,n){if(await t(r))return e(r);let i=$8(n);if(!i)throw _n();return new Promise((o,s)=>{let a=i.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return o(a.result);s(_n())}})}function gw(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>SNe(n,e,t,r),r.has=n=>xNe(n,t,r),r}function uP(r){return{...r,root:gw(r.root),datastore:gw(r.datastore),pins:gw(r.pins),keys:gw(r.keys)}}async function TNe(r,e,t=()=>{}){let n=$8(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await lte(n,(o,s)=>[{type:"del",key:o},{type:"put",key:oe(o),value:s}])}async function INe(r,e,t=()=>{}){let n=$8(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await lte(n,(o,s)=>[{type:"del",key:o},{type:"put",key:ie(o),value:s}])}function cte(r){return r.child?cte(r.child):r}async function ate(r,e,t){let n=Object.entries(r).map(([s,a])=>({key:s,backend:cte(a)})).filter(({key:s,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:s,backend:a})=>({name:s,store:a}));e(0,`Migrating ${n.length} dbs`);let i=0,o=s=>{e(Math.round(i/n.length*100),s)};for(let{name:s,store:a}of n){await a.open();try{await t(s,a,o)}finally{i++,await a.close()}}e(100,`Migrated ${n.length} dbs`)}var ute={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>ate(r,e,TNe),revert:(r,e=()=>{})=>ate(r,e,INe)};function lte(r,e){function t(n,i){let o=r.store("readwrite"),s=o.transaction,a=0,c;s.onabort=()=>i(c||s.error||new Error("aborted by user")),s.oncomplete=()=>i();function u(){let l=n[a++],d=l.key,h;try{h=l.type==="del"?o.delete(d):o.put(l.value,d)}catch(f){c=f,s.abort();return}a<n.length&&(h.onsuccess=u)}u()}return new Promise((n,i)=>{let o=r.iterator(),s=c=>c;o._deserializeKey=o._deserializeValue=s,a();function a(){let c=(u,l,d)=>{if(u||l===void 0){let h=f=>{if(f){i(f);return}n()};o.end(h);return}t(e(l,d),a)};o.next(c)}})}var Z2=new Re("/local/filesroot");async function ANe(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(Z2)){let t=await r.root.get(Z2);await r.datastore.put(Z2,t),await r.root.delete(Z2)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function CNe(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(Z2)){let t=await r.datastore.get(Z2);await r.root.put(Z2,t),await r.datastore.delete(Z2)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var dte={version:11,description:"Store mfs root in the datastore",migrate:ANe,revert:CNe};var mP=L(s1(),1);var r3=L(s1(),1),fte=r3.default.Reader,RNe=r3.default.Writer,kNe=r3.default.util,yw=r3.default.roots.default||(r3.default.roots.default={}),lP=yw.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=kNe.emptyArray,r.encode=function(t,n){if(n||(n=RNe.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof fte||(t=fte.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new yw.Protocols;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof yw.Protocols)return t;var n=new yw.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,r3.default.util.toJSONOptions)},r})();var Hc=L(s1(),1),v4=Hc.default.Reader,dP=Hc.default.Writer,zr=Hc.default.util,Jn=Hc.default.roots.default||(Hc.default.roots.default={}),fP=Jn.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=zr.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=dP.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)Jn.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&Jn.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof v4||(t=v4.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Jn.Addresses;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(Jn.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=Jn.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Jn.Addresses)return t;var n=new Jn.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=Jn.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=Jn.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=Jn.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=Jn.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Hc.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=zr.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:zr.oneOfGetter(t=["isCertified"]),set:zr.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=dP.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof v4||(i=v4.create(i));for(var s=o===void 0?i.len:i.pos+o,a=new Jn.Addresses.Address;i.pos<s;){var c=i.uint32();switch(c>>>3){case 1:a.multiaddr=i.bytes();break;case 2:a.isCertified=i.bool();break;default:i.skipType(c&7);break}}return a},e.fromObject=function(i){if(i instanceof Jn.Addresses.Address)return i;var o=new Jn.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?zr.base64.decode(i.multiaddr,o.multiaddr=zr.newBuffer(zr.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=!!i.isCertified),o},e.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.multiaddr="":(s.multiaddr=[],o.bytes!==Array&&(s.multiaddr=zr.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=o.bytes===String?zr.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified,o.oneofs&&(s._isCertified="isCertified")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Hc.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=zr.Long?zr.Long.fromBits(0,0,!0):0,e.prototype.raw=zr.newBuffer([]),e.encode=function(n,i){return i||(i=dP.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof v4||(n=v4.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Jn.Addresses.CertifiedRecord;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.seq=n.uint64();break;case 2:s.raw=n.bytes();break;default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof Jn.Addresses.CertifiedRecord)return n;var i=new Jn.Addresses.CertifiedRecord;return n.seq!=null&&(zr.Long?(i.seq=zr.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new zr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?zr.base64.decode(n.raw,i.raw=zr.newBuffer(zr.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(zr.Long){var s=new zr.Long(0,0,!0);o.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=zr.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?zr.Long.prototype.toString.call(n.seq):i.longs===Number?new zr.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?zr.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Hc.default.util.toJSONOptions)},e}(),r})();var Wc=L(s1(),1),E4=Wc.default.Reader,hP=Wc.default.Writer,gr=Wc.default.util,Sn=Wc.default.roots.default||(Wc.default.roots.default={}),pP=Sn.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=gr.emptyArray,r.prototype.protocols=gr.emptyArray,r.prototype.metadata=gr.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:gr.oneOfGetter(e=["pubKey"]),set:gr.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:gr.oneOfGetter(e=["peerRecordEnvelope"]),set:gr.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=hP.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)Sn.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)Sn.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof E4||(n=E4.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Sn.Peer;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(Sn.Address.decode(n,n.uint32()));break;case 2:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(n.string());break;case 3:s.metadata&&s.metadata.length||(s.metadata=[]),s.metadata.push(Sn.Metadata.decode(n,n.uint32()));break;case 4:s.pubKey=n.bytes();break;case 5:s.peerRecordEnvelope=n.bytes();break;default:n.skipType(a&7);break}}return s},r.fromObject=function(n){if(n instanceof Sn.Peer)return n;var i=new Sn.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=Sn.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=Sn.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?gr.base64.decode(n.pubKey,i.pubKey=gr.newBuffer(gr.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?gr.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=gr.newBuffer(gr.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var s=0;s<n.addresses.length;++s)o.addresses[s]=Sn.Address.toObject(n.addresses[s],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var s=0;s<n.protocols.length;++s)o.protocols[s]=n.protocols[s]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var s=0;s<n.metadata.length;++s)o.metadata[s]=Sn.Metadata.toObject(n.metadata[s],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?gr.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?gr.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Wc.default.util.toJSONOptions)},r})(),Uyt=Sn.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=gr.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:gr.oneOfGetter(e=["isCertified"]),set:gr.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=hP.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof E4||(n=E4.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Sn.Address;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.multiaddr=n.bytes();break;case 2:s.isCertified=n.bool();break;default:n.skipType(a&7);break}}return s},r.fromObject=function(n){if(n instanceof Sn.Address)return n;var i=new Sn.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?gr.base64.decode(n.multiaddr,i.multiaddr=gr.newBuffer(gr.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=!!n.isCertified),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=gr.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?gr.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Wc.default.util.toJSONOptions)},r})(),Fyt=Sn.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=gr.newBuffer([]),r.encode=function(t,n){return n||(n=hP.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof E4||(t=E4.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Sn.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Sn.Metadata)return t;var n=new Sn.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?gr.base64.decode(t.value,n.value=gr.newBuffer(gr.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=gr.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?gr.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Wc.default.util.toJSONOptions)},r})();var n3=L(s1(),1),hte=n3.default.Reader,PNe=n3.default.Writer,qr=n3.default.util,ww=n3.default.roots.default||(n3.default.roots.default={}),pte=ww.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=qr.newBuffer([]),r.prototype.payloadType=qr.newBuffer([]),r.prototype.payload=qr.newBuffer([]),r.prototype.signature=qr.newBuffer([]),r.encode=function(t,n){return n||(n=PNe.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof hte||(t=hte.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ww.Envelope;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof ww.Envelope)return t;var n=new ww.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?qr.base64.decode(t.publicKey,n.publicKey=qr.newBuffer(qr.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?qr.base64.decode(t.payloadType,n.payloadType=qr.newBuffer(qr.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?qr.base64.decode(t.payload,n.payload=qr.newBuffer(qr.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?qr.base64.decode(t.signature,n.signature=qr.newBuffer(qr.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=qr.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=qr.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=qr.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=qr.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?qr.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?qr.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?qr.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?qr.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,n3.default.util.toJSONOptions)},r})();var J2=L(s1(),1),bw=J2.default.Reader,mte=J2.default.Writer,nn=J2.default.util,Fa=J2.default.roots.default||(J2.default.roots.default={}),gte=Fa.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=nn.newBuffer([]),r.prototype.seq=nn.Long?nn.Long.fromBits(0,0,!0):0,r.prototype.addresses=nn.emptyArray,r.encode=function(t,n){if(n||(n=mte.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)Fa.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof bw||(t=bw.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Fa.PeerRecord;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Fa.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Fa.PeerRecord)return t;var n=new Fa.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?nn.base64.decode(t.peerId,n.peerId=nn.newBuffer(nn.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(nn.Long?(n.seq=nn.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new nn.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=Fa.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=nn.newBuffer(i.peerId))),nn.Long){var o=new nn.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?nn.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?nn.Long.prototype.toString.call(t.seq):n.longs===Number?new nn.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var s=0;s<t.addresses.length;++s)i.addresses[s]=Fa.PeerRecord.AddressInfo.toObject(t.addresses[s],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,J2.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=nn.newBuffer([]),e.encode=function(n,i){return i||(i=mte.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof bw||(n=bw.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Fa.PeerRecord.AddressInfo;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:s.multiaddr=n.bytes();break;default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof Fa.PeerRecord.AddressInfo)return n;var i=new Fa.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?nn.base64.decode(n.multiaddr,i.multiaddr=nn.newBuffer(nn.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=nn.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?nn.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,J2.default.util.toJSONOptions)},e}(),r})();mP.default.util.Long=void 0;mP.default.configure();async function DNe(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[,a,c,u,l]=s.split("/");if(a==="peers"&&["protos","addrs","metadata","keys"].includes(c)&&u)if(t[u]=t[u]||{addresses:[],protocols:[],metadata:[]},c==="protos"){let d=lP.decode(o);t[u].protocols=d.protocols.sort()}else if(c==="addrs"){let d=fP.decode(o);t[u].addresses=d.addrs.sort((h,f)=>Ee(h.multiaddr).toString().localeCompare(Ee(f.multiaddr).toString())),d.certifiedRecord&&d.certifiedRecord.raw&&(t[u].peerRecordEnvelope=d.certifiedRecord.raw)}else c==="metadata"?t[u].metadata.push({key:l,value:o}):c==="keys"&&(t[u].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((a,c)=>a.key.localeCompare(c.key));let s=pP.encode(o).finish();await r.datastore.put(new Re(`/peers/${i}`),s)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function NNe(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[,,a]=s.split("/");t[a]=pP.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new Re(`/peers/protos/${i}`),lP.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let s=o.peerRecordEnvelope,a;if(s){let c=pte.decode(s),u=gte.decode(c.payload);a={raw:s,seq:u.seq}}await r.datastore.put(new Re(`/peers/addrs/${i}`),fP.encode({addrs:o.addresses,certifiedRecord:a}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:s,value:a}of o.metadata)await r.datastore.put(new Re(`/peers/metadata/${i}/${s}`),a);o.pubKey&&await r.datastore.put(new Re(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var yte={version:12,description:"Store each peerstore peer under a single datastore key",migrate:DNe,revert:NNe};var i3={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},_w=[Object.assign({version:1},i3),Object.assign({version:2},i3),Object.assign({version:3},i3),Object.assign({version:4},i3),Object.assign({version:5},i3),Object.assign({version:6},i3),Object.assign({version:7},i3),Xee,ote,ute,dte,yte];var wte=L(Co(),1);var gP={};it(gP,{InvalidValueError:()=>xw,MissingRepoOptionsError:()=>eu,NonReversibleMigrationError:()=>vw,NotInitializedRepoError:()=>x4,RequiredParameterError:()=>Ew});var vw=class r extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=r.code,this.message=e}};vw.code="ERR_NON_REVERSIBLE_MIGRATION";var x4=class r extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=r.code,this.message=e}};x4.code="ERR_NOT_INITIALIZED_REPO";var Ew=class r extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=r.code,this.message=e}};Ew.code="ERR_REQUIRED_PARAMETER";var xw=class r extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=r.code,this.message=e}};xw.code="ERR_INVALID_VALUE";var eu=class r extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=r.code,this.message=e}};eu.code="ERR_MISSING_REPO_OPTIONS";var yP=(0,wte.default)("ipfs:repo:migrator:repo:init");async function bte(r){if(!r)throw new eu("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(q8),n=await e.has(ste);return!t||!n?(yP(`Version entry present: ${t}`),yP(`Config entry present: ${n}`),!1):!0}catch(t){return yP("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}async function wP(r){if(!await bte(r))throw new x4("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(ie(await e.get(q8)))}finally{await e.close()}}async function K8(r,e){if(!e)throw new eu("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(q8,oe(String(r))),await t.close()}var _te=L(Co(),1),Va=(0,_te.default)("ipfs:repo:migrator");function LNe(r){return r=r||_w,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function vte(r,e,t,n,i={}){let o=i.ignoreLock??!1,s=i.onProgress,a=i.isDryRun??!1,c=i.migrations??_w;if(!r)throw new Us.RequiredParameterError("Path argument is required!");if(!t)throw new Us.RequiredParameterError("repoOptions argument is required!");if(!n)throw new Us.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new Us.InvalidValueError("Version has to be positive integer!");e=uP(e);let u=await wP(e);if(u===n){Va("Nothing to migrate.");return}if(u>n)throw new Us.InvalidValueError(`Current repo's version (${u}) is higher then toVersion (${n}), you probably wanted to revert it?`);xte(c,u,n);let l;!a&&!o&&(l=await t.repoLock.lock(r));try{for(let d of c){if(n!==void 0&&d.version>n)break;if(!(d.version<=u)){Va(`Migrating version ${d.version}`);try{if(!a){let h=()=>{};s&&(h=(f,m)=>s(d.version,f.toFixed(2),m)),await d.migrate(e,h)}}catch(h){let f=d.version-1;throw Va(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${f}`),await K8(f,e),new Error(`During migration to version ${d.version} exception was raised: ${h.stack||h.message||h}`)}Va(`Migrating to version ${d.version} finished`)}}a||await K8(n||LNe(c),e),Va("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!a&&!o&&l&&await l.close()}}async function Ete(r,e,t,n,i={}){let o=i.ignoreLock??!1,s=i.onProgress,a=i.isDryRun??!1,c=i.migrations??_w;if(!r)throw new Us.RequiredParameterError("Path argument is required!");if(!t)throw new Us.RequiredParameterError("repoOptions argument is required!");if(!n)throw new Us.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new Us.InvalidValueError("Version has to be positive integer!");e=uP(e);let u=await wP(e);if(u===n){Va("Nothing to revert.");return}if(u<n)throw new Us.InvalidValueError(`Current repo's version (${u}) is lower then toVersion (${n}), you probably wanted to migrate it?`);xte(c,n,u,!0);let l;!a&&!o&&(l=await t.repoLock.lock(r)),Va(`Reverting from version ${u} to ${n}`);try{let d=c.slice().reverse();for(let h of d){if(h.version<=n)break;if(!(h.version>u)){Va(`Reverting migration version ${h.version}`);try{if(!a){let f=()=>{};s&&(f=(m,w)=>s(h.version,m.toFixed(2),w)),await h.revert(e,f)}}catch(f){let m=h.version;throw Va(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${m}`),await K8(m,e),f.message=`During reversion to version ${h.version} exception was raised: ${f.message}`,f}Va(`Reverting to version ${h.version} finished`)}}a||await K8(n,e),Va(`All migrations successfully reverted to version ${n}!`)}finally{!a&&!o&&l&&await l.close()}}function xte(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new Us.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new Us.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var Us=gP;var Jte=L(Ite(),1);var kte=L(Co(),1);var o3=class r extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=r.code}};o3.code="ERR_LOCK_EXISTS";var za=class r extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=r.code}};za.code="ERR_NOT_FOUND";var j8=class r extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=r.code}};j8.code="ERR_INVALID_REPO_VERSION";var s3="ERR_REPO_NOT_INITIALIZED",Ate="ERR_REPO_ALREADY_OPEN",Cte="ERR_REPO_ALREADY_CLOSED";async function Tw(r,e,t){let n=await e(r);if(n)return n;let i=Rte(t);return i?new Promise((o,s)=>{let a=i.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{o(!!a.result)}}):!1}async function Iw(r,e,t,n){if(await t(r))return e(r);let i=Rte(n);if(!i)throw new za;return new Promise((o,s)=>{let a=i.store("readonly").get(r.toString());a.transaction.onabort=()=>{s(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return o(a.result);s(new za)}})}function Rte(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var qNe=(0,kte.default)("ipfs:repo:version"),bP=new Re("version");function Pte(r){return{async exists(){return Tw(bP,r.has.bind(r),r)},async get(){let e=await Iw(bP,r.get.bind(r),r.has.bind(r),r);return parseInt(ie(e),10)},set(e){return r.put(bP,oe(String(e)))},async check(e){let t=await this.get();return qNe("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}var Aw=L(fe(),1);var $Ne=On.default?On.default:On,_P=new Re("config");function Dte(r){let e=new $Ne({concurrency:1}),t={async getAll(o={}){let s=await Iw(_P,r.get.bind(r),r.has.bind(r),r);return JSON.parse(ie(s))},async get(o,s={}){if(o==null)throw new za(`Key ${o} does not exist in config`);let a=await this.getAll(s),c=F8(a,o);if(c===void 0)throw new za(`Key ${o} does not exist in config`);return c},set(o,s,a={}){if(typeof o!="string"&&!(o instanceof String))throw(0,Aw.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(s===void 0||s instanceof Uint8Array)throw(0,Aw.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:s},a.signal))},replace(o,s={}){if(!o||o instanceof Uint8Array)throw(0,Aw.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},s.signal))},async exists(){return Tw(_P,r.has.bind(r),r)}};return t;async function n(o,s){if(s&&s.aborted)return;let a=o.key,c=o.value;if(a){let u=await t.getAll();return typeof u=="object"&&u!==null&&Vr(u,a,c),i(u)}return i(c)}function i(o){let s=oe(JSON.stringify(o,null,2));return r.put(_P,s)}}function G8(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function vP(r,e={}){if(!G8(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=new WeakMap,o=a=>{let c=i.get(a);if(c!==void 0)return c;let u=[];return i.set(a,u),u.push(...a.map(l=>Array.isArray(l)?o(l):G8(l)?s(l):l)),u},s=a=>{let c=i.get(a);if(c!==void 0)return c;let u={},l=Object.keys(a).sort(n);i.set(a,u);for(let d of l){let h=a[d],f;t&&Array.isArray(h)?f=o(h):f=t&&G8(h)?s(h):h,Object.defineProperty(u,d,{...Object.getOwnPropertyDescriptor(a,d),value:f})}return u};return Array.isArray(r)?t?o(r):[...r]:s(r)}var EP=new Re("datastore_spec");function Nte(r){return{exists(){return r.has(EP)},async get(){let e=await r.get(EP);return JSON.parse(ie(e))},async set(e){return r.put(EP,oe(JSON.stringify(vP(e,{deep:!0}))))}}}var xP=new Re("api");function Ote(r){return{async get(){let e=await r.get(xP);return e&&e.toString()},set(e){return r.put(xP,oe(e.toString()))},delete(){return r.delete(xP)}}}var Lte=L(fe(),1);function Bte(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=ru(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=ru(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=Gt({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await or(r.putMany(async function*(){for await(let{key:o,value:s}of e)ru(o).isIdentity||(yield{key:o,value:s}),n.push({key:o,value:s})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=ru(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=ru(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany(vt(e,n=>!ru(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=ru(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=ru(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function ru(r){let e=$.asCID(r);if(e==null)throw(0,Lte.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==bn.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}var Mte=L(Co(),1),Ute=(0,Mte.default)("ipfs:repo:lock:memory"),Fte="repo.lock",H8={};async function KNe(r){let e=r+"/"+Fte;if(Ute("locking %s",e),H8[e]===!0)throw new o3(`Lock already being held for file: ${e}`);return H8[e]=!0,{async close(){H8[e]&&delete H8[e]}}}async function jNe(r){let e=r+"/"+Fte;return Ute(`checking lock: ${e}`),!!H8[e]}var Vte={lock:KNe,locked:jNe};var zte={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Vte};var SP={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};var Kte=L(fe(),1),jte=L(Co(),1);var qte=L(fe(),1);function W8(r){let e=$.asCID(r);if(e==null)throw(0,qte.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=zt.encode(e.multihash.bytes);return new Re("/"+t.slice(1).toUpperCase(),!1)}function TP(r){return Jr(zt.decode(`b${r.toString().toLowerCase().substring(1)}`))}var $te=L(Co(),1);var GNe=(0,$te.default)("ipfs:repo:utils:walk-dag");async function*S4(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),s=i4({bytes:i,cid:r,codec:o});for(let[,a]of s.links())yield a,yield*S4(a,e,t,n)}catch(i){throw GNe("Could not walk DAG for CID",r.toString(),i),i}}var Y8=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};var HNe=2048;function WNe(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,Kte.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var Cw=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,jte.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==St&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(W8(e),Lc(n))}unpin(e,t){return this.pinstore.delete(W8(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==St&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(W8(e),Lc(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>Cs(n.value).depth===0]})){let n=Cs(t.value),i=n.version||0,o=n.codec!=null?n.codec:St,s=TP(t.key);yield{cid:$.create(i,o,s),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>Cs(n.value).depth===1/0]})){let n=Cs(t.value),i=n.version||0,o=n.codec!=null?n.codec:St,s=TP(t.key);yield{cid:$.create(i,o,s),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of S4(t,this.blockstore,this.loadCodec,e)){let i=[Mt.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(Mt.all),o=t.includes(Mt.direct),s=t.includes(Mt.recursive),a=t.includes(Mt.indirect);if(s||o||i){let l=await xn(this.pinstore.query({prefix:W8(e).toString(),filters:[d=>{if(i)return!0;let h=Cs(d.value);return t.includes(h.depth===0?Mt.direct:Mt.recursive)}],limit:1}));if(l){let d=Cs(l.value);return{cid:e,pinned:!0,reason:d.depth===0?Mt.direct:Mt.recursive,metadata:d.metadata}}}let c=this;async function*u(l,d){for await(let{cid:h}of d)for await(let f of S4(h,c.blockstore,c.loadCodec))if(f.equals(l)){yield h;return}}if(i||a){let l=await xn(u(e,this.recursiveKeys()));if(l)return{cid:e,pinned:!0,reason:Mt.indirect,parent:l}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let n=new Y8({maxSize:t.cidCacheMaxSize??HNe}),i=async(o,s)=>{if(n.has(o.toString()))return;n.set(o.toString(),!0);let a=await this.blockstore.get(o,s),c=await this.loadCodec(o.code),u=i4({bytes:a,cid:o,codec:c});await Promise.all([...u.links()].map(([,l])=>i(l,s)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(Mt).includes(e))throw WNe(e);return!0}};var Hte=L(fe(),1);function Wte(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await Gte(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany(Ut(t,async i=>(await Gte(i,r),i)),n)},batch(){return e.batch()}}}async function Gte(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,Mt.all);if(t)throw(0,Hte.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}var Yte=L(Co(),1);var X8=(0,Yte.default)("ipfs:repo:gc"),YNe=_n().code,XNe=256,QNe=new Re("/local/filesroot");function Xte({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let s=Date.now();X8("Creating set of marked blocks");let a=await r.writeLock();try{let c=await ZNe({pins:e,blockstore:t,root:n,loadCodec:i}),u=t.queryKeys({});yield*JNe({blockstore:t},c,u),X8(`Complete (${Date.now()-s}ms)`)}finally{a()}}return o}async function ZNe({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let a;try{a=await n.get(QNe)}catch(u){if(u.code===YNe){X8("No blocks in MFS");return}throw u}let c=$.decode(a);yield c,yield*S4(c,e,t)}(),o=Or(Ut(r.recursiveKeys(),({cid:a})=>a),r.indirectKeys(),Ut(r.directKeys(),({cid:a})=>a),i),s=new Set;for await(let a of Or(o,i))s.add(zt.encode(a.multihash.bytes));return s}async function*JNe({blockstore:r},e,t){let n=0,i=0;yield*Ke(Bl(Ut(t,async s=>async function(){n++;try{let c=zt.encode(s.multihash.bytes);if(e.has(c))return null;try{await r.delete(s),i++}catch(u){return{err:new Error(`Could not delete block with CID ${s}: ${u.message}`)}}return{cid:s}}catch(c){let u=`Could delete block with CID ${s}`;return X8(u,c),{err:new Error(u+`: ${c.message}`)}}}),XNe),s=>vt(s,Boolean)),X8(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var po=(0,Zte.default)("ipfs:repo"),eOe=Number.MAX_SAFE_INTEGER,tOe="repoAutoMigrate",IP=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=Je(zte,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,s=n.pins;this.pins=new Cw({pinstore:s,blockstore:o,loadCodec:t});let a=Wte(this.pins,o);this.blocks=Bte(a),this.version=Pte(this.root),this.config=Dte(this.root),this.spec=Nte(this.root),this.apiAddr=Ote(this.root),this.gcLock=Xl({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=Xte({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){po("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(rOe(e)),await this.spec.set(nOe(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,a3.default)(new Error("repo is already open"),Ate);po("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),po("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new j8("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");po("creating datastore"),await this.datastore.open(),po("creating blocks"),await this.blocks.open(),po("creating keystore"),await this.keys.open(),po("creating pins"),await this.pins.pinstore.open(),this.closed=!1,po("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){po("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,a3.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){po("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,a3.default)(new Error("repo is not initialized yet"),s3,{path:this.path}):t}if(!e)throw(0,a3.default)(new Error("repo is not initialized yet"),s3,{path:this.path})}async close(){if(this.closed)throw(0,a3.default)(new Error("repo is already closed"),Cte);po("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==s3&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),po("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Qte(this.datastore),Qte(this.keys)]),s=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:s}}throw(0,a3.default)(new Error("repo is not initialized yet"),s3,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(tOe)}catch(t){if(t.code===za.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?(po(`reverting to version ${e}`),Ete(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(po(`migrating to version ${e}`),vte(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,Jte.default)(e))}catch{return BigInt(eOe)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function Qte(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function ere(r,e,t,n){return new IP(r,e,t,n)}function rOe(r){return r.Datastore=Object.assign({},SP,F8(r,"datastore")),r}function nOe(r){let e={...SP.Spec,...F8(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}var soe=L(require("path"),1);var Yo=L(require("fs"),1),UP=L(DP(),1),Pw=L(Xre(),1),Yc=L(require("path"),1),lne=require("util");var J8=L(Zre(),1),Dw=L(rne(),1),dne=L(cne(),1),rLe=(0,lne.promisify)(dne.default);async function une(r,e){try{await rLe(r,e)}catch(t){if(t.code==="EPERM"&&t.syscall==="rename"){await Yo.default.promises.access(r,Yo.default.constants.F_OK|Yo.default.constants.W_OK);return}throw t}}var R4=class extends hn{constructor(e,t){super(),this.path=Yc.default.resolve(e),this.opts=Object.assign({},{createIfMissing:!0,errorIfExists:!1,extension:".data",deleteManyConcurrency:50,getManyConcurrency:50,putManyConcurrency:50},t)}open(){try{if(!Yo.default.existsSync(this.path))throw vn.notFoundError(new Error(`Datastore directory: ${this.path} does not exist`));if(this.opts.errorIfExists)throw vn.dbOpenFailedError(new Error(`Datastore directory: ${this.path} already exists`));return Promise.resolve()}catch(e){if(e.code==="ERR_NOT_FOUND"&&this.opts.createIfMissing)return Pw.default.sync(this.path,{fs:Yo.default}),Promise.resolve();throw e}}close(){return Promise.resolve()}_encode(e){let t=e.parent().toString(),n=Yc.default.join(this.path,t),i=e.toString().slice(t.length),o=Yc.default.join(n,i+this.opts.extension);return{dir:n,file:o}}_decode(e){let t=this.opts.extension;if(Yc.default.extname(e)!==t)throw new Error(`Invalid extension: ${Yc.default.extname(e)}`);let n=e.slice(this.path.length,-t.length).split(Yc.default.sep).join("/");return new Re(n)}async putRaw(e,t){let n=this._encode(e),i=n.file;this.opts.extension.length&&(i=n.file.slice(0,-this.opts.extension.length)),await(0,Pw.default)(n.dir,{fs:Yo.default}),await une(i,t)}async put(e,t){let n=this._encode(e);try{await(0,Pw.default)(n.dir,{fs:Yo.default}),await une(n.file,t)}catch(i){throw vn.dbWriteFailedError(i)}}async*putMany(e){yield*(0,Dw.default)((0,J8.default)(e,({key:t,value:n})=>async()=>(await this.put(t,n),{key:t,value:n})),this.opts.putManyConcurrency)}async getRaw(e){let n=this._encode(e).file;this.opts.extension.length&&(n=n.slice(0,-this.opts.extension.length));let i;try{i=await Yo.default.promises.readFile(n)}catch(o){throw vn.notFoundError(o)}return i}async get(e){let t=this._encode(e),n;try{n=await Yo.default.promises.readFile(t.file)}catch(i){throw vn.notFoundError(i)}return n}async*getMany(e){yield*(0,Dw.default)((0,J8.default)(e,t=>async()=>this.get(t)),this.opts.getManyConcurrency)}async*deleteMany(e){yield*(0,Dw.default)((0,J8.default)(e,t=>async()=>(await this.delete(t),t)),this.opts.deleteManyConcurrency)}async has(e){let t=this._encode(e);try{await Yo.default.promises.access(t.file)}catch{return!1}return!0}async delete(e){let t=this._encode(e);try{await Yo.default.promises.unlink(t.file)}catch(n){if(n.code==="ENOENT")return;throw vn.dbDeleteFailedError(n)}}async*_all(e){let t=e.prefix||"**";t=t.replace(/^\/+/,"");let n=`${t}/*${this.opts.extension}`.split(Yc.default.sep).join("/"),i=(0,UP.default)(this.path,n,{absolute:!0});for await(let o of i)try{let s=await Yo.default.promises.readFile(o);yield{key:this._decode(o),value:s}}catch(s){if(s.code!=="ENOENT")throw s}}async*_allKeys(e){let t=e.prefix||"**";t=t.replace(/^\/+/,"");let n=`${t}/*${this.opts.extension}`.split(Yc.default.sep).join("/"),i=(0,UP.default)(this.path,n,{absolute:!0});yield*(0,J8.default)(i,o=>this._decode(o))}};async function*ou(r,e){yield*(await Pn(r)).sort(e)}var bie=L(wie(),1),x7=class extends hn{constructor(e,t={}){super(),this.db=typeof e=="string"?new bie.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw vn.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw vn.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?vn.notFoundError(n):vn.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw vn.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,s)=>vt(o,s),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,s)=>ou(o,s),t));let{offset:n,limit:i}=e;if(n){let o=0;t=vt(t,()=>o++>=n)}return i&&(t=$i(t,i)),t}queryKeys(e){let t=Ut(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,s)=>vt(o,s),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,s)=>ou(o,s),t));let{offset:n,limit:i}=e;if(n){let o=0;t=vt(t,()=>o++>=n)}return i&&(t=$i(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return iBe(n);if(n.next!=null&&n.end!=null)return oBe(n);throw new Error("Level returned incompatible iterator")}};async function*iBe(r){for await(let[e,t]of r)yield{key:new Re(e,!1),value:t};await r.close()}function oBe(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(s=>{if(s)return t(s);e({done:!0,value:void 0})});e({done:!1,value:{key:new Re(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}var vie=L(fe(),1);var _ie=(r,e)=>async function*(){yield*(await Pn(r)).sort(e)}(),U1=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await or(this.putMany(e,n)),e=[],await or(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=vt(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>vt(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>_ie(i,o),n)),e.offset!=null){let i=0;n=vt(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=$i(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=vt(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>vt(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>_ie(i,o),n)),e.offset!=null){let i=0;n=vt(n,()=>i++>=e.offset)}return e.limit!=null&&(n=$i(n,e.limit)),n}};function K4(r){let e=$.asCID(r);if(!e)throw(0,vie.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Re("/"+zt.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function gu(r){return $.createV1(jn,Jr(zt.decode("b"+r.toString().slice(1).toLowerCase())))}function DD(r){let e=r.substring(0,1);if(e==="/")return DD(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>zt.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>ZS.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>nt.decode(o).subarray(2):e==="Q"?t=o=>nt.decode("z"+o):t=o=>zt.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(s){if(s.message!=="Unexpected end of data")throw s}let i="/C";return n&&(i=`/${zt.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function sBe(r){return{...r,prefix:r.prefix?DD(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:gu(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:gu(t.key),value:t.value},{key:gu(n.key),value:n.value})):void 0}}function aBe(r){return{...r,prefix:r.prefix?DD(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(gu(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(gu(t),gu(n))):void 0}}var ab=class extends U1{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(sBe(e),t))yield{key:gu(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(aBe(e),t))yield gu(n)}async get(e,t){return this.child.get(K4(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(K4(e),t,n)}async*putMany(e,t){let n=Gt({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await or(this.child.putMany(async function*(){for await(let s of e){let a=K4(s.key);await o.has(a,t)||(yield{key:a,value:s.value}),n.push(s)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(K4(e),t)}delete(e,t){return this.child.delete(K4(e),t)}deleteMany(e,t){let n=Gt({objectMode:!0});return or(this.child.deleteMany(async function*(){for await(let i of e)yield K4(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};var GD=L(require("path"),1),eoe=L(Co(),1),bb=L(Jie(),1),MBe=(0,eoe.default)("ipfs:repo:lock:fs"),toe="repo.lock",roe=2e4,UBe=async r=>{let e=GD.default.join(r,toe);MBe("locking %s",e);let t;try{t=await(0,bb.lock)(r,{lockfilePath:e,stale:roe})}catch(n){throw n.code==="ELOCKED"?new o3(`Lock already being held for file: ${e}`):n}return{close:t}},FBe=r=>{let e=GD.default.join(r,toe);return(0,bb.check)(r,{lockfilePath:e,stale:roe})},noe={lock:UBe,locked:FBe};var ioe=L(E6(),1);async function*_b(r,e){for await(let t of r)await e(t),yield t}var vb=class extends hn{constructor(e,t){super(),this.lru=(0,ioe.default)(e),this.child=t}open(){return this.child.open()}close(){return this.child.close()}put(e,t,n){return this.lru.set(e.toString(),t),this.child.put(e,t,n)}async get(e,t){return this.lru.has(e.toString())?this.lru.get(e.toString()):this.child.get(e,t)}async has(e,t){return this.lru.has(e.toString())?!0:this.child.has(e,t)}delete(e,t){return this.lru.remove(e.toString()),this.child.delete(e,t)}async*putMany(e,t){yield*this.child.putMany(_b(e,n=>{this.lru.set(n.key.toString(),n.value)}),t)}async*getMany(e,t){for await(let n of e)this.lru.has(n.toString())&&(yield this.lru.get(n.toString())),yield this.child.get(n,t)}async*deleteMany(e,t){yield*this.child.deleteMany(_b(e,n=>{this.lru.remove(n.toString())}),t)}batch(){return this.child.batch()}async*query(e,t){yield*this.child.query(e,t)}async*queryKeys(e,t){yield*this.child.queryKeys(e,t)}};function aoe(r,e,t={}){let n=t.path||soe.default.join(ooe.default.homedir(),".jsipfs"),i=t.peerStoreCacheSize||1024,o,s=t.onMigrationProgress||function(c,u,l){c!==o&&(o=c,r(`Migrating repo from v${c-1} to v${c}`)),r(`${u.toString().padStart(6," ")}% ${l}`)},a=new x7(`${n}/datastore`);return ere(n,c=>e.getCodec(c),{root:new R4(n,{extension:""}),blocks:new ab(new k6(new R4(`${n}/blocks`,{extension:".data"}),new A6(2))),datastore:new P6([{prefix:new Re("/peers"),datastore:new vb(i,a)},{prefix:new Re("/"),datastore:a}]),keys:new R4(`${n}/keys`),pins:new x7(`${n}/pins`)},{autoMigrate:t.autoMigrate!=null?t.autoMigrate:!0,onMigrationProgress:s,repoLock:noe})}var pr=L(Ig(),1);var q8e=L(fe(),1);function Eb(r){return r instanceof Uint8Array?{get(e){return r[e]},set(e,t){r[e]=t}}:{get(e){return r.get(e)},set(e,t){r.set(e,t)}}}var coe=4294967296,A7=class r{constructor(e=0,t=0){this.hi=e,this.lo=t}toBigInt(e){if(e===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){let e=-(this.lo&1),t=((this.lo>>>1|this.hi<<31)^e)>>>0,n=(this.hi>>>1^e)>>>0;return new r(n,t)}zzEncode(){let e=this.hi>>31,t=((this.hi<<1|this.lo>>>31)^e)>>>0,n=(this.lo<<1^e)>>>0;return new r(t,n)}toBytes(e,t=0){let n=Eb(e);for(;this.hi>0;)n.set(t++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(t++,this.lo&127|128),this.lo=this.lo>>>7;n.set(t++,this.lo)}static fromBigInt(e){if(e===0n)return new r;let t=e<0;t&&(e=-e);let n=Number(e>>32n)|0,i=Number(e-(BigInt(n)<<32n))|0;return t&&(n=~n>>>0,i=~i>>>0,++i>coe&&(i=0,++n>coe&&(n=0))),new r(n,i)}static fromNumber(e){if(e===0)return new r;let t=e<0;t&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(i,n)}static fromBytes(e,t=0){let n=Eb(e),i=new r,o=0;if(e.length-t>4){for(;o<4;++o)if(i.lo=(i.lo|(n.get(t)&127)<<o*7)>>>0,n.get(t++)<128)return i;if(i.lo=(i.lo|(n.get(t)&127)<<28)>>>0,i.hi=(i.hi|(n.get(t)&127)>>4)>>>0,n.get(t++)<128)return i;o=0}else for(;o<4;++o){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(i.lo=(i.lo|(n.get(t)&127)<<o*7)>>>0,n.get(t++)<128)return i}if(e.length-t>4){for(;o<5;++o)if(i.hi=(i.hi|(n.get(t)&127)<<o*7+3)>>>0,n.get(t++)<128)return i}else if(t<e.byteLength)for(;o<5;++o){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(i.hi=(i.hi|(n.get(t)&127)<<o*7+3)>>>0,n.get(t++)<128)return i}throw RangeError("invalid varint encoding")}};var VBe=Math.pow(2,7),zBe=Math.pow(2,14),qBe=Math.pow(2,21),$Be=Math.pow(2,28),KBe=Math.pow(2,35),jBe=Math.pow(2,42),GBe=Math.pow(2,49),HBe=Math.pow(2,56),WBe=Math.pow(2,63),Zo={encodingLength(r){return r<VBe?1:r<zBe?2:r<qBe?3:r<$Be?4:r<KBe?5:r<jBe?6:r<GBe?7:r<HBe?8:r<WBe?9:10},encode(r,e,t=0){if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return e==null&&(e=c2(Zo.encodingLength(r))),A7.fromNumber(r).toBytes(e,t),e},decode(r,e=0){return A7.fromBytes(r,e).toNumber(!0)}};var uoe={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var C7;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.publicKey!=null&&t.publicKey.byteLength>0&&(n.uint32(10),n.bytes(t.publicKey)),t.payloadType!=null&&t.payloadType.byteLength>0&&(n.uint32(18),n.bytes(t.payloadType)),t.payload!=null&&t.payload.byteLength>0&&(n.uint32(26),n.bytes(t.payload)),t.signature!=null&&t.signature.byteLength>0&&(n.uint32(42),n.bytes(t.signature)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.publicKey=t.bytes();break;case 2:i.payloadType=t.bytes();break;case 3:i.payload=t.bytes();break;case 5:i.signature=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(C7||(C7={}));var bu=class bu{constructor(e){F(this,"peerId");F(this,"payloadType");F(this,"payload");F(this,"signature");F(this,"marshaled");let{peerId:t,payloadType:n,payload:i,signature:o}=e;this.peerId=t,this.payloadType=n,this.payload=i,this.signature=o}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=C7.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return ct(this.marshal(),e.marshal())}async validate(e){let t=loe(e,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return ao(this.peerId.publicKey).verify(t.subarray(),this.signature)}};F(bu,"createFromProtobuf",async e=>{let t=C7.decode(e),n=await Sr(t.publicKey);return new bu({peerId:n,payloadType:t.payloadType,payload:t.payload,signature:t.signature})}),F(bu,"seal",async(e,t)=>{if(t.privateKey==null)throw new Error("Missing private key");let n=e.domain,i=e.codec,o=e.marshal(),s=loe(n,i,o),c=await(await Xn(t.privateKey)).sign(s.subarray());return new bu({peerId:t,payloadType:i,payload:o,signature:c})}),F(bu,"openAndCertify",async(e,t)=>{let n=await bu.createFromProtobuf(e);if(!await n.validate(t))throw new X("envelope signature is not valid for the given domain",uoe.ERR_SIGNATURE_NOT_VALID);return n});var go=bu,loe=(r,e,t)=>{let n=oe(r),i=Zo.encode(n.byteLength),o=Zo.encode(e.length),s=Zo.encode(t.length);return new lt(i,n,o,e,s,t)};function doe(r,e){let t=(n,i)=>n.toString().localeCompare(i.toString());return r.length!==e.length?!1:(e.sort(t),r.sort(t).every((n,i)=>e[i].equals(n)))}var foe="libp2p-peer-record",hoe=Uint8Array.from([3,1]);var R7;(function(r){let e;(function(n){let i;n.codec=()=>(i==null&&(i=Dt((o,s,a={})=>{a.lengthDelimited!==!1&&s.fork(),o.multiaddr!=null&&o.multiaddr.byteLength>0&&(s.uint32(10),s.bytes(o.multiaddr)),a.lengthDelimited!==!1&&s.ldelim()},(o,s)=>{let a={multiaddr:new Uint8Array(0)},c=s==null?o.len:o.pos+s;for(;o.pos<c;){let u=o.uint32();switch(u>>>3){case 1:a.multiaddr=o.bytes();break;default:o.skipType(u&7);break}}return a})),i),n.encode=o=>Pt(o,n.codec()),n.decode=o=>kt(o,n.codec())})(e=r.AddressInfo||(r.AddressInfo={}));let t;r.codec=()=>(t==null&&(t=Dt((n,i,o={})=>{if(o.lengthDelimited!==!1&&i.fork(),n.peerId!=null&&n.peerId.byteLength>0&&(i.uint32(10),i.bytes(n.peerId)),n.seq!=null&&n.seq!==0n&&(i.uint32(16),i.uint64(n.seq)),n.addresses!=null)for(let s of n.addresses)i.uint32(26),r.AddressInfo.codec().encode(s,i);o.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{let o={peerId:new Uint8Array(0),seq:0n,addresses:[]},s=i==null?n.len:n.pos+i;for(;n.pos<s;){let a=n.uint32();switch(a>>>3){case 1:o.peerId=n.bytes();break;case 2:o.seq=n.uint64();break;case 3:o.addresses.push(r.AddressInfo.codec().decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return o})),t),r.encode=n=>Pt(n,r.codec()),r.decode=n=>kt(n,r.codec())})(R7||(R7={}));var r0=class r0{constructor(e){F(this,"peerId");F(this,"multiaddrs");F(this,"seqNumber");F(this,"domain",r0.DOMAIN);F(this,"codec",r0.CODEC);F(this,"marshaled");let{peerId:t,multiaddrs:n,seqNumber:i}=e;this.peerId=t,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=R7.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))})),this.marshaled}equals(e){return!(!(e instanceof r0)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!doe(this.multiaddrs,e.multiaddrs))}};F(r0,"createFromProtobuf",e=>{let t=R7.decode(e),n=Mr(t.peerId),i=(t.addresses??[]).map(s=>Br(s.multiaddr)),o=t.seq;return new r0({peerId:n,multiaddrs:i,seqNumber:o})}),F(r0,"DOMAIN",foe),F(r0,"CODEC",hoe);var qs=r0;var xb=Symbol.for("@libp2p/topology");function poe(r){return r!=null&&!!r[xb]}var moe=()=>{},goe,yoe,HD=class{constructor(e){F(this,"min");F(this,"max");F(this,"peers");F(this,"onConnect");F(this,"onDisconnect");F(this,"registrar");F(this,goe,!0);this.min=e.min??0,this.max=e.max??1/0,this.peers=new Set,this.onConnect=e.onConnect??moe,this.onDisconnect=e.onDisconnect??moe}get[(yoe=Symbol.toStringTag,goe=xb,yoe)](){return xb.toString()}async setRegistrar(e){this.registrar=e}disconnect(e){this.onDisconnect(e)}};function _u(r){return new HD(r)}var F1,at=class extends EventTarget{constructor(){super(...arguments);mr(this,F1,new Map)}listenerCount(t){let n=Se(this,F1).get(t);return n==null?0:n.length}addEventListener(t,n,i){super.addEventListener(t,n,i);let o=Se(this,F1).get(t);o==null&&(o=[],Se(this,F1).set(t,o)),o.push({callback:n,once:(i!==!0&&i!==!1&&(i==null?void 0:i.once))??!1})}removeEventListener(t,n,i){super.removeEventListener(t.toString(),n??null,i);let o=Se(this,F1).get(t);o!=null&&(o=o.filter(({callback:s})=>s!==n),Se(this,F1).set(t,o))}dispatchEvent(t){let n=super.dispatchEvent(t),i=Se(this,F1).get(t.type);return i==null||(i=i.filter(({once:o})=>!o),Se(this,F1).set(t.type,i)),n}safeDispatchEvent(t,n){return this.dispatchEvent(new be(t,n))}};F1=new WeakMap;var WD=class extends Event{constructor(t,n){super(t,n);F(this,"detail");this.detail=n==null?void 0:n.detail}},be=globalThis.CustomEvent??WD;var Sb=class{constructor(e,t,n){this.gossip=e,this.msgs=new Map,this.history=[],this.notValidatedCount=0,this.msgIdToStrFn=n;for(let i=0;i<t;i++)this.history[i]=[]}get size(){return this.msgs.size}put(e,t,n=!1){let{msgIdStr:i}=e;return this.msgs.has(i)?!1:(this.msgs.set(i,{message:t,validated:n,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),n||this.notValidatedCount++,!0)}observeDuplicate(e,t){let n=this.msgs.get(e);n&&!n.validated&&n.originatingPeers.add(t)}get(e){var t;return(t=this.msgs.get(this.msgIdToStrFn(e)))==null?void 0:t.message}getWithIWantCount(e,t){let n=this.msgs.get(e);if(!n)return null;let i=(n.iwantCounts.get(t)??0)+1;return n.iwantCounts.set(t,i),{msg:n.message,count:i}}getGossipIDs(e){let t=new Map;for(let n=0;n<this.gossip;n++)this.history[n].forEach(i=>{let o=this.msgs.get(i.msgIdStr);if(o&&o.validated&&e.has(i.topic)){let s=t.get(i.topic);s||(s=[],t.set(i.topic,s)),s.push(i.msgId)}});return t}validate(e){let t=this.msgs.get(e);if(!t)return null;t.validated||this.notValidatedCount--;let{message:n,originatingPeers:i}=t;return t.validated=!0,t.originatingPeers=new Set,{message:n,originatingPeers:i}}shift(){this.history[this.history.length-1].forEach(t=>{let n=this.msgs.get(t.msgIdStr);n&&(this.msgs.delete(t.msgIdStr),n.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(e){let t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}};var Xoe=L(Yoe(),1),{RPC:O7}=Xoe.default;var cN="/floodsub/1.0.0",uN="/meshsub/1.0.0",lN="/meshsub/1.1.0";var Qoe="ERR_TOPIC_VALIDATOR_REJECT",Zoe="ERR_TOPIC_VALIDATOR_IGNORE";function q1(r){if(r.length<=1)return r;let e=()=>Math.floor(Math.random()*Math.floor(r.length));for(let t=0;t<r.length;t++){let n=e(),i=r[t];r[t]=r[n],r[n]=i}return r}function Joe(r){return ie(r,"base64")}var A3="StrictSign",X4="StrictNoSign",wo;(function(r){r.Accept="accept",r.Ignore="ignore",r.Reject="reject"})(wo||(wo={}));var ese;(function(r){r.StrictSign="StrictSign",r.StrictNoSign="StrictNoSign"})(ese||(ese={}));var Su;(function(r){r[r.Signing=0]="Signing",r[r.Anonymous=1]="Anonymous"})(Su||(Su={}));var Xi;(function(r){r.Error="error",r.Ignore="ignore",r.Reject="reject",r.Blacklisted="blacklisted"})(Xi||(Xi={}));var Ti;(function(r){r.InvalidSignature="invalid_signature",r.InvalidSeqno="invalid_seqno",r.InvalidPeerId="invalid_peerid",r.SignaturePresent="signature_present",r.SeqnoPresent="seqno_present",r.FromPresent="from_present",r.TransformFailed="transform_failed"})(Ti||(Ti={}));var Ks;(function(r){r.duplicate="duplicate",r.invalid="invalid",r.valid="valid"})(Ks||(Ks={}));function dN(r){switch(r){case wo.Ignore:return Xi.Ignore;case wo.Reject:return Xi.Reject}}async function fN(r,e){switch(r){case A3:{if(!e)throw Error("Must provide PeerId");if(e.privateKey==null)throw Error("Cannot sign message, no private key present");if(e.publicKey==null)throw Error("Cannot sign message, no public key present");let t=await Xn(e.privateKey);return{type:Su.Signing,author:e,key:e.publicKey,privateKey:t}}case X4:return{type:Su.Anonymous};default:throw new Error(`Unknown signature policy "${r}"`)}}var yr="ERR_INVALID_PEER_SCORE_PARAMS";var nMe={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},iMe={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function tse(r={}){return{...nMe,...r,topics:r.topics?Object.entries(r.topics).reduce((e,[t,n])=>(e[t]=oMe(n),e),{}):{}}}function oMe(r={}){return{...iMe,...r}}function rse(r){for(let[e,t]of Object.entries(r.topics))try{sMe(t)}catch(n){throw new X(`invalid score parameters for topic ${e}: ${n.message}`,yr)}if(r.topicScoreCap<0)throw new X("invalid topic score cap; must be positive (or 0 for no cap)",yr);if(r.appSpecificScore===null||r.appSpecificScore===void 0)throw new X("missing application specific score function",yr);if(r.IPColocationFactorWeight>0)throw new X("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",yr);if(r.IPColocationFactorWeight!==0&&r.IPColocationFactorThreshold<1)throw new X("invalid IPColocationFactorThreshold; must be at least 1",yr);if(r.behaviourPenaltyWeight>0)throw new X("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",yr);if(r.behaviourPenaltyWeight!==0&&(r.behaviourPenaltyDecay<=0||r.behaviourPenaltyDecay>=1))throw new X("invalid BehaviourPenaltyDecay; must be between 0 and 1",yr);if(r.decayInterval<1e3)throw new X("invalid DecayInterval; must be at least 1s",yr);if(r.decayToZero<=0||r.decayToZero>=1)throw new X("invalid DecayToZero; must be between 0 and 1",yr)}function sMe(r){if(r.topicWeight<0)throw new X("invalid topic weight; must be >= 0",yr);if(r.timeInMeshQuantum===0)throw new X("invalid TimeInMeshQuantum; must be non zero",yr);if(r.timeInMeshWeight<0)throw new X("invalid TimeInMeshWeight; must be positive (or 0 to disable)",yr);if(r.timeInMeshWeight!==0&&r.timeInMeshQuantum<=0)throw new X("invalid TimeInMeshQuantum; must be positive",yr);if(r.timeInMeshWeight!==0&&r.timeInMeshCap<=0)throw new X("invalid TimeInMeshCap; must be positive",yr);if(r.firstMessageDeliveriesWeight<0)throw new X("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",yr);if(r.firstMessageDeliveriesWeight!==0&&(r.firstMessageDeliveriesDecay<=0||r.firstMessageDeliveriesDecay>=1))throw new X("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",yr);if(r.firstMessageDeliveriesWeight!==0&&r.firstMessageDeliveriesCap<=0)throw new X("invalid FirstMessageDeliveriesCap; must be positive",yr);if(r.meshMessageDeliveriesWeight>0)throw new X("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",yr);if(r.meshMessageDeliveriesWeight!==0&&(r.meshMessageDeliveriesDecay<=0||r.meshMessageDeliveriesDecay>=1))throw new X("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",yr);if(r.meshMessageDeliveriesWeight!==0&&r.meshMessageDeliveriesCap<=0)throw new X("invalid MeshMessageDeliveriesCap; must be positive",yr);if(r.meshMessageDeliveriesWeight!==0&&r.meshMessageDeliveriesThreshold<=0)throw new X("invalid MeshMessageDeliveriesThreshold; must be positive",yr);if(r.meshMessageDeliveriesWindow<0)throw new X("invalid MeshMessageDeliveriesWindow; must be non-negative",yr);if(r.meshMessageDeliveriesWeight!==0&&r.meshMessageDeliveriesActivation<1e3)throw new X("invalid MeshMessageDeliveriesActivation; must be at least 1s",yr);if(r.meshFailurePenaltyWeight>0)throw new X("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",yr);if(r.meshFailurePenaltyWeight!==0&&(r.meshFailurePenaltyDecay<=0||r.meshFailurePenaltyDecay>=1))throw new X("invalid MeshFailurePenaltyDecay; must be between 0 and 1",yr);if(r.invalidMessageDeliveriesWeight>0)throw new X("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",yr);if(r.invalidMessageDeliveriesDecay<=0||r.invalidMessageDeliveriesDecay>=1)throw new X("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",yr)}var aMe={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function nse(r={}){return{...aMe,...r}}function ise(r,e,t,n){let i=0;Object.entries(e.topics).forEach(([s,a])=>{let c=t.topics[s];if(c===void 0)return;let u=0;if(a.inMesh){let f=a.meshTime/c.timeInMeshQuantum;f>c.timeInMeshCap&&(f=c.timeInMeshCap),u+=f*c.timeInMeshWeight}let l=a.firstMessageDeliveries;if(l>c.firstMessageDeliveriesCap&&(l=c.firstMessageDeliveriesCap),u+=l*c.firstMessageDeliveriesWeight,a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<c.meshMessageDeliveriesThreshold){let f=c.meshMessageDeliveriesThreshold-a.meshMessageDeliveries,m=f*f;u+=m*c.meshMessageDeliveriesWeight}let d=a.meshFailurePenalty;u+=d*c.meshFailurePenaltyWeight;let h=a.invalidMessageDeliveries*a.invalidMessageDeliveries;u+=h*c.invalidMessageDeliveriesWeight,i+=u*c.topicWeight}),t.topicScoreCap>0&&i>t.topicScoreCap&&(i=t.topicScoreCap);let o=t.appSpecificScore(r);if(i+=o*t.appSpecificWeight,e.knownIPs.forEach(s=>{if(t.IPColocationFactorWhitelist.has(s))return;let a=n.get(s),c=a?a.size:0;if(c>t.IPColocationFactorThreshold){let u=c-t.IPColocationFactorThreshold,l=u*u;i+=l*t.IPColocationFactorWeight}}),e.behaviourPenalty>t.behaviourPenaltyThreshold){let s=e.behaviourPenalty-t.behaviourPenaltyThreshold,a=s*s;i+=a*t.behaviourPenaltyWeight}return i}var ase=L(sse(),1),Qi;(function(r){r[r.unknown=0]="unknown",r[r.valid=1]="valid",r[r.invalid=2]="invalid",r[r.ignored=3]="ignored"})(Qi||(Qi={}));var Ab=class{constructor(){this.records=new Map,this.queue=new ase.default}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:Qi.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);let n={msgId:e,expire:Date.now()+12e4};return this.queue.push(n),t}gc(){let e=Date.now(),t=this.queue.peekFront();for(;t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};function Rb(r,e,t=()=>!0){let n=new Set;if(e<=0)return n;for(let i of r){if(n.size>=e)break;t(i)&&(n.add(i),r.delete(i))}return n}function cse(r,e){return Rb(r,e,()=>!0)}var Cb=class extends Map{constructor(e){super(),this.getDefault=e}getOrDefault(e){let t=super.get(e);return t===void 0&&(t=this.getDefault(),this.set(e,t)),t}};var Q4=z("libp2p:gossipsub:score"),kb=class{constructor(e,t,n){this.params=e,this.metrics=t,this.peerStats=new Map,this.peerIPs=new Cb(()=>new Set),this.scoreCache=new Map,this.deliveryRecords=new Ab,rse(e),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=n.computeScore??ise}get size(){return this.peerStats.size}start(){if(this._backgroundInterval){Q4("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),Q4("started")}stop(){if(!this._backgroundInterval){Q4("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),Q4("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([e,t])=>[e,t]))}refreshScores(){let e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach((n,i)=>{if(!n.connected){e>n.expire&&(this.removeIPsForPeer(i,n.knownIPs),this.peerStats.delete(i),this.scoreCache.delete(i));return}Object.entries(n.topics).forEach(([o,s])=>{let a=this.params.topics[o];a!==void 0&&(s.firstMessageDeliveries*=a.firstMessageDeliveriesDecay,s.firstMessageDeliveries<t&&(s.firstMessageDeliveries=0),s.meshMessageDeliveries*=a.meshMessageDeliveriesDecay,s.meshMessageDeliveries<t&&(s.meshMessageDeliveries=0),s.meshFailurePenalty*=a.meshFailurePenaltyDecay,s.meshFailurePenalty<t&&(s.meshFailurePenalty=0),s.invalidMessageDeliveries*=a.invalidMessageDeliveriesDecay,s.invalidMessageDeliveries<t&&(s.invalidMessageDeliveries=0),s.inMesh&&(s.meshTime=e-s.graftTime,s.meshTime>a.meshMessageDeliveriesActivation&&(s.meshMessageDeliveriesActive=!0)))}),n.behaviourPenalty*=this.params.behaviourPenaltyDecay,n.behaviourPenalty<t&&(n.behaviourPenalty=0)})}score(e){var a,c,u;(a=this.metrics)==null||a.scoreFnCalls.inc();let t=this.peerStats.get(e);if(!t)return 0;let n=Date.now(),i=this.scoreCache.get(e);if(i&&i.cacheUntil>n)return i.score;(c=this.metrics)==null||c.scoreFnRuns.inc();let o=this.computeScore(e,t,this.params,this.peerIPs),s=n+this.scoreCacheValidityMs;return i?((u=this.metrics)==null||u.scoreCachedDelta.observe(Math.abs(o-i.score)),i.score=o,i.cacheUntil=s):this.scoreCache.set(e,{score:o,cacheUntil:s}),o}addPenalty(e,t,n){var o;let i=this.peerStats.get(e);i&&(i.behaviourPenalty+=t,(o=this.metrics)==null||o.onScorePenalty(n))}addPeer(e){let t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){let n=this.peerStats.get(e);n&&n.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){let n=this.peerStats.get(e);n&&n.knownIPs.delete(t);let i=this.peerIPs.get(t);i&&(i.delete(e),i.size===0&&this.peerIPs.delete(t))}removePeer(e){let t=this.peerStats.get(e);if(t){if(this.score(e)>0){this.removeIPsForPeer(e,t.knownIPs),this.peerStats.delete(e);return}Object.entries(t.topics).forEach(([n,i])=>{i.firstMessageDeliveries=0;let o=this.params.topics[n].meshMessageDeliveriesThreshold;if(i.inMesh&&i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<o){let s=o-i.meshMessageDeliveries;i.meshFailurePenalty+=s*s}i.inMesh=!1,i.meshMessageDeliveriesActive=!1}),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){let n=this.peerStats.get(e);if(n){let i=this.getPtopicStats(n,t);i&&(i.inMesh=!0,i.graftTime=Date.now(),i.meshTime=0,i.meshMessageDeliveriesActive=!1)}}prune(e,t){let n=this.peerStats.get(e);if(n){let i=this.getPtopicStats(n,t);if(i){let o=this.params.topics[t].meshMessageDeliveriesThreshold;if(i.meshMessageDeliveriesActive&&i.meshMessageDeliveries<o){let s=o-i.meshMessageDeliveries;i.meshFailurePenalty+=s*s}i.meshMessageDeliveriesActive=!1,i.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,n){this.markFirstMessageDelivery(e,n);let i=this.deliveryRecords.ensureRecord(t),o=Date.now();if(i.status!==Qi.unknown){Q4("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,o-i.firstSeen,Qi[i.status]);return}i.status=Qi.valid,i.validated=o,i.peers.forEach(s=>{s!==e.toString()&&this.markDuplicateMessageDelivery(s,n)})}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,n,i){switch(i){case Xi.Error:this.markInvalidMessageDelivery(e,n);return;case Xi.Blacklisted:return}let o=this.deliveryRecords.ensureRecord(t);if(o.status!==Qi.unknown){Q4("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-o.firstSeen,Qi[o.status]);return}if(i===Xi.Ignore){o.status=Qi.ignored,o.peers.clear();return}o.status=Qi.invalid,this.markInvalidMessageDelivery(e,n),o.peers.forEach(s=>{this.markInvalidMessageDelivery(s,n)}),o.peers.clear()}duplicateMessage(e,t,n){let i=this.deliveryRecords.ensureRecord(t);if(!i.peers.has(e))switch(i.status){case Qi.unknown:i.peers.add(e);break;case Qi.valid:i.peers.add(e),this.markDuplicateMessageDelivery(e,n,i.validated);break;case Qi.invalid:this.markInvalidMessageDelivery(e,n);break;case Qi.ignored:break}}markInvalidMessageDelivery(e,t){let n=this.peerStats.get(e);if(n){let i=this.getPtopicStats(n,t);i&&(i.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){let n=this.peerStats.get(e);if(n){let i=this.getPtopicStats(n,t);if(i){let o=this.params.topics[t].firstMessageDeliveriesCap;i.firstMessageDeliveries=Math.min(o,i.firstMessageDeliveries+1),i.inMesh&&(o=this.params.topics[t].meshMessageDeliveriesCap,i.meshMessageDeliveries=Math.min(o,i.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,n){var o;let i=this.peerStats.get(e);if(i){let s=n!==void 0?Date.now():0,a=this.getPtopicStats(i,t);if(a&&a.inMesh){let c=this.params.topics[t];if(n!==void 0){let l=s-n,d=l>c.meshMessageDeliveriesWindow;if((o=this.metrics)==null||o.onDuplicateMsgDelivery(t,l,d),d)return}let u=c.meshMessageDeliveriesCap;a.meshMessageDeliveries=Math.min(u,a.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(let n of t){let i=this.peerIPs.get(n);i&&(i.delete(e),i.size===0&&this.peerIPs.delete(n))}}getPtopicStats(e,t){let n=e.topics[t];return n!==void 0?n:this.params.topics[t]!==void 0?(n={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=n,n):null}};var Pb=class{constructor(e,t,n){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=n,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){let n=Math.floor(Math.random()*t.length),i=t[n],o=this.msgIdToStrFn(i),s=this.promises.get(o);s||(s=new Map,this.promises.set(o,s));let a=Date.now();s.has(e)||(s.set(e,a+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(o)||this.requestMsByMsg.set(o,a)))}getBrokenPromises(){var i;let e=Date.now(),t=new Map,n=0;return this.promises.forEach((o,s)=>{o.forEach((a,c)=>{a<e&&(t.set(c,(t.get(c)??0)+1),o.delete(c),n++)}),o.size||this.promises.delete(s)}),(i=this.metrics)==null||i.iwantPromiseBroken.inc(n),t}deliverMessage(e,t=!1){this.trackMessage(e);let n=this.promises.get(e);n&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(n.size)))}rejectMessage(e,t){switch(this.trackMessage(e),t){case Xi.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){var n;let e=Date.now()-this.requestMsByMsgExpire,t=0;for(let[i,o]of this.requestMsByMsg.entries())if(o<e)this.requestMsByMsg.delete(i),t++;else break;(n=this.metrics)==null||n.iwantMessagePruned.inc(t)}trackMessage(e){if(this.metrics){let t=this.requestMsByMsg.get(e);t!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}};var Z4=class{constructor(e){this.entries=new Map,this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return this.entries.has(e)?!0:(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){let e=Date.now();for(let[t,n]of this.entries.entries())if(n.validUntilMs<e)this.entries.delete(t);else break}has(e){return this.entries.has(e)}get(e){let t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}};var use;(function(r){r.forward="forward",r.publish="publish"})(use||(use={}));var n0;(function(r){r.Fanout="fanout",r.Random="random",r.Subscribed="subscribed",r.Outbound="outbound",r.NotEnough="not_enough",r.Opportunistic="opportunistic"})(n0||(n0={}));var C3;(function(r){r.Dc="disconnected",r.BadScore="bad_score",r.Prune="prune",r.Unsub="unsubscribed",r.Excess="excess"})(C3||(C3={}));var e5;(function(r){r.GraftBackoff="graft_backoff",r.BrokenPromise="broken_promise",r.MessageDeficit="message_deficit",r.IPColocation="IP_colocation"})(e5||(e5={}));var t5;(function(r){r.LowScore="low_score",r.MaxIhave="max_ihave",r.MaxIasked="max_iasked"})(t5||(t5={}));var J4;(function(r){r.graylist="graylist",r.publish="publish",r.gossip="gossip",r.mesh="mesh"})(J4||(J4={}));function lse(r,e,t){return{protocolsEnabled:r.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:r.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:r.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:r.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:r.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:r.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:r.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:r.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:r.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:r.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:r.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),peerReadStreamError:r.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:r.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:r.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:r.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:r.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:r.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:r.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:r.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:r.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:r.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:r.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:r.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:r.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:r.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:r.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:r.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:r.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:r.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:r.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:r.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:r.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:r.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:r.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:r.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:r.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:r.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:r.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:r.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:r.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:r.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),msgReceivedStatus:r.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:r.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:r.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*t.maxMeshMessageDeliveriesWindowSec,.5*t.maxMeshMessageDeliveriesWindowSec,1*t.maxMeshMessageDeliveriesWindowSec,2*t.maxMeshMessageDeliveriesWindowSec,4*t.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:r.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:r.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:r.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:r.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:r.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:r.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:r.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:r.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:r.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:r.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:r.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*t.behaviourPenaltyThreshold,.5*t.behaviourPenaltyThreshold,1*t.behaviourPenaltyThreshold,2*t.behaviourPenaltyThreshold,4*t.behaviourPenaltyThreshold]}),ihaveRcvIgnored:r.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:r.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:r.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:r.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:r.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:r.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:r.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:r.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:r.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:r.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:r.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:r.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*t.gossipPromiseExpireSec,1*t.gossipPromiseExpireSec,2*t.gossipPromiseExpireSec,4*t.gossipPromiseExpireSec]}),iwantPromiseUntracked:r.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),cacheSize:r.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:r.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:r.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:r.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:r.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:e,toTopic(n){return this.topicStrToLabel.get(n)??n},onJoin(n){this.topicSubscriptionStatus.set({topicStr:n},1),this.meshPeerCounts.set({topicStr:n},0)},onLeave(n){this.topicSubscriptionStatus.set({topicStr:n},0),this.meshPeerCounts.set({topicStr:n},0)},onAddToMesh(n,i,o){let s=this.toTopic(n);this.meshPeerInclusionEvents.inc({topic:s,reason:i},o)},onRemoveFromMesh(n,i,o){let s=this.toTopic(n);this.meshPeerChurnEvents.inc({topic:s,reason:i},o)},onReportValidationMcacheHit(n){this.asyncValidationMcacheHit.inc({hit:n?"hit":"miss"})},onReportValidation(n,i){let o=this.toTopic(n);this.asyncValidationResult.inc({topic:o,acceptance:i})},onScorePenalty(n){this.scoringPenalties.inc({penalty:n},1)},onIhaveRcv(n,i,o){let s=this.toTopic(n);this.ihaveRcvMsgids.inc({topic:s},i),this.ihaveRcvNotSeenMsgids.inc({topic:s},o)},onIwantRcv(n,i){for(let[o,s]of n){let a=this.toTopic(o);this.iwantRcvMsgids.inc({topic:a},s)}this.iwantRcvDonthaveMsgids.inc(i)},onForwardMsg(n,i){let o=this.toTopic(n);this.msgForwardCount.inc({topic:o},1),this.msgForwardPeers.inc({topic:o},i)},onPublishMsg(n,i,o,s){let a=this.toTopic(n);this.msgPublishCount.inc({topic:a},1),this.msgPublishBytes.inc({topic:a},o*s),this.msgPublishPeers.inc({topic:a},o),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"direct"},i.direct),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"floodsub"},i.floodsub),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"mesh"},i.mesh),this.msgPublishPeersByGroup.inc({topic:a,peerGroup:"fanout"},i.fanout)},onMsgRecvPreValidation(n){let i=this.toTopic(n);this.msgReceivedPreValidation.inc({topic:i},1)},onMsgRecvError(n){let i=this.toTopic(n);this.msgReceivedError.inc({topic:i},1)},onMsgRecvResult(n,i){let o=this.toTopic(n);this.msgReceivedStatus.inc({topic:o,status:i})},onMsgRecvInvalid(n,i){let o=this.toTopic(n),s=i.reason===Xi.Error?i.error:i.reason;this.msgReceivedInvalid.inc({topic:o,error:s},1)},onDuplicateMsgDelivery(n,i,o){if(this.duplicateMsgDeliveryDelay.observe(i/1e3),o){let s=this.toTopic(n);this.duplicateMsgLateDelivery.inc({topic:s},1)}},onPublishDuplicateMsg(n){let i=this.toTopic(n);this.duplicateMsgIgnored.inc({topic:i},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(n,i){this.rpcRecvBytes.inc(i),this.rpcRecvCount.inc(1),n.subscriptions&&this.rpcRecvSubscription.inc(n.subscriptions.length),n.messages&&this.rpcRecvMessage.inc(n.messages.length),n.control&&(this.rpcRecvControl.inc(1),n.control.ihave&&this.rpcRecvIHave.inc(n.control.ihave.length),n.control.iwant&&this.rpcRecvIWant.inc(n.control.iwant.length),n.control.graft&&this.rpcRecvGraft.inc(n.control.graft.length),n.control.prune&&this.rpcRecvPrune.inc(n.control.prune.length))},onRpcSent(n,i){var o,s,a,c;if(this.rpcSentBytes.inc(i),this.rpcSentCount.inc(1),n.subscriptions&&this.rpcSentSubscription.inc(n.subscriptions.length),n.messages&&this.rpcSentMessage.inc(n.messages.length),n.control){let u=((o=n.control.ihave)==null?void 0:o.length)??0,l=((s=n.control.iwant)==null?void 0:s.length)??0,d=((a=n.control.graft)==null?void 0:a.length)??0,h=((c=n.control.prune)==null?void 0:c.length)??0;u>0&&this.rpcSentIHave.inc(u),l>0&&this.rpcSentIWant.inc(l),d>0&&this.rpcSentGraft.inc(d),h>0&&this.rpcSentPrune.inc(h),(u>0||l>0||d>0||h>0)&&this.rpcSentControl.inc(1)}},registerScores(n,i){let o=0,s=0,a=0,c=0;for(let u of n)u>=i.graylistThreshold&&o++,u>=i.publishThreshold&&s++,u>=i.gossipThreshold&&a++,u>=0&&c++;this.peersByScoreThreshold.set({threshold:J4.graylist},o),this.peersByScoreThreshold.set({threshold:J4.publish},s),this.peersByScoreThreshold.set({threshold:J4.gossip},a),this.peersByScoreThreshold.set({threshold:J4.mesh},c),this.score.set(n)},registerScoreWeights(n){for(let[i,o]of n.byTopic)this.scoreWeights.set({topic:i,p:"p1"},o.p1w),this.scoreWeights.set({topic:i,p:"p2"},o.p2w),this.scoreWeights.set({topic:i,p:"p3"},o.p3w),this.scoreWeights.set({topic:i,p:"p3b"},o.p3bw),this.scoreWeights.set({topic:i,p:"p4"},o.p4w);this.scoreWeights.set({p:"p5"},n.p5w),this.scoreWeights.set({p:"p6"},n.p6w),this.scoreWeights.set({p:"p7"},n.p7w)},registerScorePerMesh(n,i){let o=new Map;n.forEach((s,a)=>{let c=this.topicStrToLabel.get(a)??"unknown",u=o.get(c);u||(u=new Set,o.set(c,u)),s.forEach(l=>u==null?void 0:u.add(l))});for(let[s,a]of o){let c=[];a.forEach(u=>{c.push(i.get(u)??0)}),this.scorePerMesh.set({topic:s},c)}}}}var hN=L(require("crypto"),1),uMe=hN.default.createCipheriv,lMe=hN.default.createDecipheriv;var fse=L(OA(),1),hse=L(Tr(),1),dse={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function L7(r,e,t,n,i){if(i!=="sha1"&&i!=="sha2-256"&&i!=="sha2-512"){let a=Object.keys(dse).join(" / ");throw new X(`Hash '${i}' is unknown or not supported. Must be ${a}`,"ERR_UNSUPPORTED_HASH_TYPE")}let o=dse[i],s=(0,fse.default)(r,e,t,n,o);return hse.default.encode64(s,null)}var pse=oe("libp2p-pubsub:");async function mse(r,e,t,n){switch(r.type){case Su.Signing:{let i={from:r.author.toBytes(),data:n,seqno:qi(8),topic:e,signature:void 0,key:void 0},o=Ye([pse,O7.Message.encode(i).finish()]);i.signature=await r.privateKey.sign(o),i.key=r.key;let s={type:"signed",from:r.author,data:t,sequenceNumber:BigInt(`0x${ie(i.seqno,"base16")}`),topic:e,signature:i.signature,key:i.key};return{raw:i,msg:s}}case Su.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:e,signature:void 0,key:void 0},msg:{type:"unsigned",data:t,topic:e}}}}async function gse(r,e){switch(r){case X4:return e.signature!=null?{valid:!1,error:Ti.SignaturePresent}:e.seqno!=null?{valid:!1,error:Ti.SeqnoPresent}:e.key!=null?{valid:!1,error:Ti.FromPresent}:{valid:!0,message:{type:"unsigned",topic:e.topic,data:e.data??new Uint8Array(0)}};case A3:{if(e.seqno==null)return{valid:!1,error:Ti.InvalidSeqno};if(e.seqno.length!==8)return{valid:!1,error:Ti.InvalidSeqno};if(e.signature==null)return{valid:!1,error:Ti.InvalidSignature};if(e.from==null)return{valid:!1,error:Ti.InvalidPeerId};let t;try{t=Mr(e.from)}catch{return{valid:!1,error:Ti.InvalidPeerId}}let n;if(e.key){if(n=ao(e.key),t.publicKey!==void 0&&!ct(n.bytes,t.publicKey))return{valid:!1,error:Ti.InvalidPeerId}}else{if(t.publicKey==null)return{valid:!1,error:Ti.InvalidPeerId};n=ao(t.publicKey)}let i={from:e.from,data:e.data,seqno:e.seqno,topic:e.topic,signature:void 0,key:void 0},o=Ye([pse,O7.Message.encode(i).finish()]);return await n.verify(o,e.signature)?{valid:!0,message:{type:"signed",from:t,data:e.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${ie(e.seqno,"base16")}`),topic:e.topic,signature:e.signature,key:e.key??l6(n)}}:{valid:!1,error:Ti.InvalidSignature}}}}var Ln={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_MISSING_KEY:"ERR_MISSING_KEY",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_MISSING_FROM:"ERR_MISSING_FROM",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO",ERR_TOPIC_VALIDATOR_REJECT:"ERR_TOPIC_VALIDATOR_REJECT"};function yse(){return BigInt(`0x${ie(qi(8),"base16")}`)}var Db=(r,e)=>{let t=oe(e.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n},wse=r=>ot.encode(r);var bse=function(r){return Array.isArray(r)?r:[r]},hMe=async r=>{if(r.sequenceNumber==null||r.from==null||r.signature==null)return!1;let e=Mr(r.from);return e.publicKey!=null?!0:r.key!=null?(await Sr(r.key)).equals(e):!1},_se=async r=>{if(r.from==null)throw new X("RPC message was missing from",Ln.ERR_MISSING_FROM);if(!await hMe(r))return{type:"unsigned",topic:r.topic??"",data:r.data??new Uint8Array(0)};let e=Mr(r.from),t={type:"signed",from:Mr(r.from),topic:r.topic??"",sequenceNumber:mMe(r.sequenceNumber??new Uint8Array(0)),data:r.data??new Uint8Array(0),signature:r.signature??new Uint8Array(0),key:r.key??e.publicKey??new Uint8Array(0)};if(t.key.length===0)throw new X("Signed RPC message was missing key",Ln.ERR_MISSING_KEY);return t},B7=r=>r.type==="signed"?{from:r.from.multihash.bytes,data:r.data,sequenceNumber:pMe(r.sequenceNumber),topic:r.topic,signature:r.signature,key:r.key}:{data:r.data,topic:r.topic},pMe=r=>{let e=r.toString(16);return e.length%2!==0&&(e=`0${e}`),oe(e,"base16")},mMe=r=>BigInt(`0x${ie(r,"base16")}`);function vse(r){if(r.type!=="signed")throw new Error("expected signed message type");if(r.sequenceNumber==null)throw Error("missing seqno field");return Db(r.from.toBytes(),r.sequenceNumber)}async function Ese(r){return await ot.encode(r.data)}function gMe(r,e,t,n,i){let o=0,s=new Map;if(Object.entries(e.topics).forEach(([h,f])=>{let m=i.get(h)??"unknown",w=t.topics[h];if(w===void 0)return;let _=s.get(m);_||(_={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},s.set(m,_));let E=0,S=0,p=0,g=0,y=0;if(f.inMesh){let T=Math.max(f.meshTime/w.timeInMeshQuantum,w.timeInMeshCap);E+=T*w.timeInMeshWeight}let b=f.firstMessageDeliveries;if(b>w.firstMessageDeliveriesCap&&(b=w.firstMessageDeliveriesCap),S+=b*w.firstMessageDeliveriesWeight,f.meshMessageDeliveriesActive&&f.meshMessageDeliveries<w.meshMessageDeliveriesThreshold){let T=w.meshMessageDeliveriesThreshold-f.meshMessageDeliveries,I=T*T;p+=I*w.meshMessageDeliveriesWeight}let x=f.meshFailurePenalty;g+=x*w.meshFailurePenaltyWeight;let v=f.invalidMessageDeliveries*f.invalidMessageDeliveries;y+=v*w.invalidMessageDeliveriesWeight,o+=(E+S+p+g+y)*w.topicWeight,_.p1w+=E,_.p2w+=S,_.p3w+=p,_.p3bw+=g,_.p4w+=y}),t.topicScoreCap>0&&o>t.topicScoreCap){o=t.topicScoreCap;let h=t.topicScoreCap/o;for(let f of s.values())f.p1w*=h,f.p2w*=h,f.p3w*=h,f.p3bw*=h,f.p4w*=h}let a=0,c=0,u=0,l=t.appSpecificScore(r);a+=l*t.appSpecificWeight,e.knownIPs.forEach(h=>{if(t.IPColocationFactorWhitelist.has(h))return;let f=n.get(h),m=f?f.size:0;if(m>t.IPColocationFactorThreshold){let w=m-t.IPColocationFactorThreshold,_=w*w;c+=_*t.IPColocationFactorWeight}});let d=e.behaviourPenalty*e.behaviourPenalty;return u+=d*t.behaviourPenaltyWeight,o+=a+c+u,{byTopic:s,p5w:a,p6w:c,p7w:u,score:o}}function xse(r,e,t,n,i){let o={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(let s of r){let a=e.get(s);if(a){let c=gMe(s,a,t,n,i);for(let[u,l]of c.byTopic){let d=o.byTopic.get(u);d||(d={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},o.byTopic.set(u,d)),d.p1w.push(l.p1w),d.p2w.push(l.p2w),d.p3w.push(l.p3w),d.p3bw.push(l.p3bw),d.p4w.push(l.p4w)}o.p5w.push(c.p5w),o.p6w.push(c.p6w),o.p7w.push(c.p7w),o.score.push(c.score)}else o.p5w.push(0),o.p6w.push(0),o.p7w.push(0),o.score.push(0)}return o}var M7=class extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}};function Nb(r){if(r!=null){if(typeof r[Symbol.iterator]=="function")return r[Symbol.iterator]();if(typeof r[Symbol.asyncIterator]=="function")return r[Symbol.asyncIterator]();if(typeof r.next=="function")return r}throw new Error("argument is not an iterator or iterable")}function Ii(r,e,t){let n=t??{},i=Nb(r);async function*o(){let s,a=()=>{s!=null&&s()};for(e.addEventListener("abort",a);;){let c;try{if(e.aborted){let{abortMessage:l,abortCode:d}=n;throw new M7(l,d)}let u=new Promise((l,d)=>{s=()=>{let{abortMessage:h,abortCode:f}=n;d(new M7(h,f))}});c=await Promise.race([u,i.next()]),s=null}catch(u){e.removeEventListener("abort",a);let l=u.type==="aborted"&&e.aborted;if(l&&n.onAbort!=null&&await n.onAbort(r),typeof i.return=="function")try{let d=i.return();d instanceof Promise&&d.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(d){n.onReturnError!=null&&n.onReturnError(d)}if(l&&n.returnOnAbort===!0)return;throw u}if(c.done===!0)break;yield c.value}e.removeEventListener("abort",a)}return o()}function yMe(r,e,t){return n=>r(Ii(n,e,t))}function Ai(r,e,t){return{sink:yMe(r.sink,e,{...t,onAbort:void 0}),source:Ii(r.source,e,t)}}function Sse(r){var e;return((e=globalThis==null?void 0:globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var Ob=r=>{let e=Zo.encodingLength(r),t=Sse(e);return Zo.encode(r,t),Ob.bytes=e,t};Ob.bytes=0;function Bn(r){r=r??{};let e=r.lengthEncoder??Ob;return async function*(n){for await(let i of n){let o=e(i.byteLength);o instanceof Uint8Array?yield o:yield*o,i instanceof Uint8Array?yield i:yield*i}}}Bn.single=(r,e)=>{e=e??{};let t=e.lengthEncoder??Ob;return new lt(t(r.byteLength),r)};var U7=L(fe(),1),wMe=8,bMe=1024*1024*4,R3;(function(r){r[r.LENGTH=0]="LENGTH",r[r.DATA=1]="DATA"})(R3||(R3={}));var pN=r=>{let e=Zo.decode(r);return pN.bytes=Zo.encodingLength(e),e};pN.bytes=0;function gn(r){return async function*(t){let n=new lt,i=R3.LENGTH,o=-1,s=(r==null?void 0:r.lengthDecoder)??pN,a=(r==null?void 0:r.maxLengthLength)??wMe,c=(r==null?void 0:r.maxDataLength)??bMe;for await(let u of t)for(n.append(u);n.byteLength>0;){if(i===R3.LENGTH)try{if(o=s(n),o<0)throw(0,U7.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(o>c)throw(0,U7.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let l=s.bytes;n.consume(l),(r==null?void 0:r.onLength)!=null&&r.onLength(o),i=R3.DATA}catch(l){if(l instanceof RangeError){if(n.byteLength>a)throw(0,U7.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw l}if(i===R3.DATA){if(n.byteLength<o)break;let l=n.sublist(0,o);n.consume(o),(r==null?void 0:r.onData)!=null&&r.onData(l),yield l,i=R3.LENGTH}}if(n.byteLength>0)throw(0,U7.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}gn.fromReader=(r,e)=>{let t=1,n=async function*(){for(;;)try{let{done:o,value:s}=await r.next(t);if(o===!0)return;s!=null&&(yield s)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{t=1}}();return gn({...e??{},onLength:o=>{t=o}})(n)};var Lb=class{constructor(e,t,n){this.rawStream=e,this.pushable=Gt({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=n.maxBufferSize??1/0,Ke(Ii(this.pushable,this.closeController.signal,{returnOnAbort:!0}),Bn(),this.rawStream).catch(t)}get protocol(){return this.rawStream.stat.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}close(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}},Bb=class{constructor(e,t={}){this.rawStream=e,this.closeController=new AbortController,this.source=Ii(Ke(this.rawStream,gn(t)),this.closeController.signal,{returnOnAbort:!0})}close(){this.closeController.abort(),this.rawStream.close()}};var Tse=L(aN(),1),Ise={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function Ase(r,e){e={...e};let t=Tse.default.Reader.create(r),n=r.length,i=n===void 0?t.len:t.pos+n,o={};for(;t.pos<i;){let s=t.uint32();switch(s>>>3){case 1:o.subscriptions&&o.subscriptions.length||(o.subscriptions=[]),o.subscriptions.length<e.maxSubscriptions?o.subscriptions.push(_Me(t,t.uint32())):t.skipType(s&7);break;case 2:o.messages&&o.messages.length||(o.messages=[]),o.messages.length<e.maxMessages?o.messages.push(vMe(t,t.uint32())):t.skipType(s&7);break;case 3:o.control=EMe(t,t.uint32(),e);break;default:t.skipType(s&7);break}}return o}function _Me(r,e){let t=e===void 0?r.len:r.pos+e,n={};for(;r.pos<t;){let i=r.uint32();switch(i>>>3){case 1:n.subscribe=r.bool();break;case 2:n.topic=r.string();break;default:r.skipType(i&7);break}}return n}function vMe(r,e){let t=e===void 0?r.len:r.pos+e,n={};for(;r.pos<t;){let i=r.uint32();switch(i>>>3){case 1:n.from=r.bytes();break;case 2:n.data=r.bytes();break;case 3:n.seqno=r.bytes();break;case 4:n.topic=r.string();break;case 5:n.signature=r.bytes();break;case 6:n.key=r.bytes();break;default:r.skipType(i&7);break}}if(!n.topic)throw Error("missing required 'topic'");return n}function EMe(r,e,t){let n=e===void 0?r.len:r.pos+e,i={};for(;r.pos<n;){let o=r.uint32();switch(o>>>3){case 1:i.ihave&&i.ihave.length||(i.ihave=[]),i.ihave.length<t.maxControlMessages?i.ihave.push(xMe(r,r.uint32(),t)):r.skipType(o&7);break;case 2:i.iwant&&i.iwant.length||(i.iwant=[]),i.iwant.length<t.maxControlMessages?i.iwant.push(SMe(r,r.uint32(),t)):r.skipType(o&7);break;case 3:i.graft&&i.graft.length||(i.graft=[]),i.graft.length<t.maxControlMessages?i.graft.push(TMe(r,r.uint32())):r.skipType(o&7);break;case 4:i.prune&&i.prune.length||(i.prune=[]),i.prune.length<t.maxControlMessages?i.prune.push(IMe(r,r.uint32(),t)):r.skipType(o&7);break;default:r.skipType(o&7);break}}return i}function xMe(r,e,t){let n=e===void 0?r.len:r.pos+e,i={};for(;r.pos<n;){let o=r.uint32();switch(o>>>3){case 1:i.topicID=r.string();break;case 2:i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),t.maxIhaveMessageIDs-- >0?i.messageIDs.push(r.bytes()):r.skipType(o&7);break;default:r.skipType(o&7);break}}return i}function SMe(r,e,t){let n=e===void 0?r.len:r.pos+e,i={};for(;r.pos<n;){let o=r.uint32();switch(o>>>3){case 1:i.messageIDs&&i.messageIDs.length||(i.messageIDs=[]),t.maxIwantMessageIDs-- >0?i.messageIDs.push(r.bytes()):r.skipType(o&7);break;default:r.skipType(o&7);break}}return i}function TMe(r,e){let t=e===void 0?r.len:r.pos+e,n={};for(;r.pos<t;){let i=r.uint32();switch(i>>>3){case 1:n.topicID=r.string();break;default:r.skipType(i&7);break}}return n}function IMe(r,e,t){let n=e===void 0?r.len:r.pos+e,i={};for(;r.pos<n;){let o=r.uint32();switch(o>>>3){case 1:i.topicID=r.string();break;case 2:i.peers&&i.peers.length||(i.peers=[]),t.maxPeerInfos-- >0?i.peers.push(AMe(r,r.uint32())):r.skipType(o&7);break;case 3:i.backoff=r.uint64();break;default:r.skipType(o&7);break}}return i}function AMe(r,e){let t=e===void 0?r.len:r.pos+e,n={};for(;r.pos<t;){let i=r.uint32();switch(i>>>3){case 1:n.peerID=r.bytes();break;case 2:n.signedPeerRecord=r.bytes();break;default:r.skipType(i&7);break}}return n}var Mb;(function(r){r[r.ip4=4]="ip4",r[r.ip6=41]="ip6"})(Mb||(Mb={}));function Cse(r){for(let e of r.tuples())switch(e[0]){case Mb.ip4:case Mb.ip6:return Mh(e[0],e[1])}return null}var Jo;(function(r){r[r.started=0]="started",r[r.stopped=1]="stopped"})(Jo||(Jo={}));var Ub=class extends at{constructor(e,t={}){super(),this.multicodecs=[lN,uN],this.peers=new Set,this.streamsInbound=new Map,this.streamsOutbound=new Map,this.outboundInflightQueue=Gt({objectMode:!0}),this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.directPeerInitial=null,this.status={code:Jo.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{var o;let i=(o=this.metrics)==null?void 0:o.heartbeatDuration.startTimer();this.heartbeat().catch(s=>{this.log("Error running heartbeat",s)}).finally(()=>{var s;if(i!=null&&i(),this.status.code===Jo.started){clearTimeout(this.status.heartbeatTimeout);let a=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;a<this.opts.heartbeatInterval*.25&&(a+=this.opts.heartbeatInterval,(s=this.metrics)==null||s.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,a)}})};let n={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...t,scoreParams:tse(t.scoreParams),scoreThresholds:nse(t.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=n.decodeRpcLimits??Ise,this.globalSignaturePolicy=n.globalSignaturePolicy??A3,n.fallbackToFloodsub&&this.multicodecs.push(cN),this.log=z(n.debugName??"libp2p:gossipsub"),this.opts=n,this.direct=new Set(n.directPeers.map(i=>i.id.toString())),this.seenCache=new Z4({validityMs:n.seenTTL}),this.publishedMessageIds=new Z4({validityMs:n.seenTTL}),t.msgIdFn)this.msgIdFn=t.msgIdFn;else switch(this.globalSignaturePolicy){case A3:this.msgIdFn=vse;break;case X4:this.msgIdFn=Ese;break}if(t.fastMsgIdFn&&(this.fastMsgIdFn=t.fastMsgIdFn,this.fastMsgIdCache=new Z4({validityMs:n.seenTTL})),this.msgIdToStrFn=t.msgIdToStrFn??Joe,this.mcache=t.messageCache||new Sb(n.mcacheGossip,n.mcacheLength,this.msgIdToStrFn),t.dataTransform&&(this.dataTransform=t.dataTransform),t.metricsRegister){if(!t.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");let i=Math.max(...Object.values(n.scoreParams.topics).map(s=>s.meshMessageDeliveriesWindow),1e3),o=lse(t.metricsRegister,t.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:n.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:i/1e3});o.mcacheSize.addCollect(()=>this.onScrapeMetrics(o));for(let s of this.multicodecs)o.protocolsEnabled.set({protocol:s},1);this.metrics=o}else this.metrics=null;this.gossipTracer=new Pb(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new kb(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:n.heartbeatInterval}),this.maxInboundStreams=t.maxInboundStreams,this.maxOutboundStreams=t.maxOutboundStreams,this.allowedTopics=n.allowedTopics?new Set(n.allowedTopics):null}getPeers(){return[...this.peers.keys()].map(e=>Be(e))}isStarted(){return this.status.code===Jo.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await fN(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=Gt({objectMode:!0}),Ke(this.outboundInflightQueue,async o=>{for await(let{peerId:s,connection:a}of o)await this.createOutboundStream(s,a)}).catch(o=>this.log.error("outbound inflight queue error",o)),await Promise.all(this.opts.directPeers.map(async o=>{await this.components.peerStore.addressBook.add(o.id,o.addrs)}));let e=this.components.registrar;await Promise.all(this.multicodecs.map(o=>e.handle(o,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})));let t=_u({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),n=await Promise.all(this.multicodecs.map(o=>e.register(o,t))),i=setTimeout(this.runHeartbeat,100);this.status={code:Jo.started,registrarTopologyIds:n,heartbeatTimeout:i,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async o=>await this.connect(o)))}).catch(o=>{this.log(o)})},1e3),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==Jo.started)return;let{registrarTopologyIds:e}=this.status;this.status={code:Jo.stopped};let t=this.components.registrar;e.forEach(n=>t.unregister(n)),this.outboundInflightQueue.end();for(let n of this.streamsOutbound.values())n.close();this.streamsOutbound.clear();for(let n of this.streamsInbound.values())n.close();this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;let n=t.remotePeer;this.addPeer(n,t.stat.direction,t.remoteAddr),this.createInboundStream(n,e),this.outboundInflightQueue.push({peerId:n,connection:t})}onPeerConnected(e,t){var n;(n=this.metrics)==null||n.newConnectionCount.inc({status:t.stat.status}),!(!this.isStarted()||t.stat.status!=="OPEN")&&(this.addPeer(e,t.stat.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){var i;if(!this.isStarted())return;let n=e.toString();if(this.peers.has(n)&&!this.streamsOutbound.has(n))try{let o=new Lb(await t.newStream(this.multicodecs),a=>this.log.error("outbound pipe error",a),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(n,o);let s=o.protocol;s===cN&&this.floodsubPeers.add(n),(i=this.metrics)==null||i.peersPerProtocol.inc({protocol:s},1),this.subscriptions.size>0&&(this.log("send subscriptions to",n),this.sendSubscriptions(n,Array.from(this.subscriptions),!0))}catch(o){this.log.error("createOutboundStream error",o)}}async createInboundStream(e,t){if(!this.isStarted())return;let n=e.toString();if(!this.peers.has(n))return;let i=this.streamsInbound.get(n);i!==void 0&&(this.log("replacing existing inbound steam %s",n),i.close()),this.log("create inbound stream %s",n);let o=new Bb(t,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(n,o),this.pipePeerReadStream(e,o.source).catch(s=>this.log(s))}addPeer(e,t,n){let i=e.toString();if(!this.peers.has(i)){this.log("new peer %p",e),this.peers.add(i),this.score.addPeer(i);let o=Cse(n);o!==null?this.score.addIP(i,o):this.log("Added peer has no IP in current address %s %s",i,n.toString()),this.outbound.has(i)||this.outbound.set(i,t==="outbound")}}removePeer(e){var o,s;let t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);let n=this.streamsOutbound.get(t),i=this.streamsInbound.get(t);n&&((o=this.metrics)==null||o.peersPerProtocol.inc({protocol:n.protocol},-1)),n==null||n.close(),i==null||i.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(let a of this.topics.values())a.delete(t);for(let[a,c]of this.mesh)c.delete(t)===!0&&((s=this.metrics)==null||s.onRemoveFromMesh(a,C3.Dc,1));for(let a of this.fanout.values())a.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===Jo.started}getMeshPeers(e){let t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){let t=this.topics.get(e);return(t?Array.from(t):[]).map(n=>Be(n))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){var n;try{await Ke(t,async i=>{var o,s,a;for await(let c of i)try{let u=c.subarray(),l=Ase(u,this.decodeRpcLimits);if((o=this.metrics)==null||o.onRpcRecv(l,u.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,l)}catch(d){(s=this.metrics)==null||s.onRpcRecvError(),this.log(d)}else this.handleReceivedRpc(e,l).catch(d=>{var h;(h=this.metrics)==null||h.onRpcRecvError(),this.log(d)})}catch(u){(a=this.metrics)==null||a.onRpcDataError(),this.log(u)}})}catch(i){(n=this.metrics)==null||n.onPeerReadStreamError(),this.handlePeerReadStreamError(i,e)}}handlePeerReadStreamError(e,t){this.log.error(e),this.onPeerDisconnected(t)}async handleReceivedRpc(e,t){var u;if(!this.acceptFrom(e.toString())){this.log("received message from unacceptable peer %p",e),(u=this.metrics)==null||u.rpcRecvNotAccepted.inc();return}let n=t.subscriptions?t.subscriptions.length:0,i=t.messages?t.messages.length:0,o=0,s=0,a=0,c=0;if(t.control&&(t.control.ihave&&(o=t.control.ihave.length),t.control.iwant&&(s=t.control.iwant.length),t.control.graft&&(a=t.control.graft.length),t.control.prune&&(c=t.control.prune.length)),this.log(`rpc.from ${e.toString()} subscriptions ${n} messages ${i} ihave ${o} iwant ${s} graft ${a} prune ${c}`),t.subscriptions&&t.subscriptions.length>0){let l=[];t.subscriptions.forEach(d=>{let h=d.topic,f=d.subscribe===!0;if(h!=null){if(this.allowedTopics&&!this.allowedTopics.has(h))return;this.handleReceivedSubscription(e,h,f),l.push({topic:h,subscribe:f})}}),this.dispatchEvent(new be("subscription-change",{detail:{peerId:e,subscriptions:l}}))}if(t.messages)for(let l of t.messages){if(this.allowedTopics&&!this.allowedTopics.has(l.topic))continue;let d=this.handleReceivedMessage(e,l).catch(h=>{var f;(f=this.metrics)==null||f.onMsgRecvError(l.topic),this.log(h)});this.opts.awaitRpcMessageHandler&&await d}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t,n){this.log("subscription update from %p topic %s",e,t);let i=this.topics.get(t);i==null&&(i=new Set,this.topics.set(t,i)),n?i.add(e.toString()):i.delete(e.toString())}async handleReceivedMessage(e,t){var i,o,s;(i=this.metrics)==null||i.onMsgRecvPreValidation(t.topic);let n=await this.validateReceivedMessage(e,t);switch((o=this.metrics)==null||o.onMsgRecvResult(t.topic,n.code),n.code){case Ks.duplicate:this.score.duplicateMessage(e.toString(),n.msgIdStr,t.topic),this.gossipTracer.deliverMessage(n.msgIdStr,!0),this.mcache.observeDuplicate(n.msgIdStr,e.toString());return;case Ks.invalid:if(n.msgIdStr){let a=n.msgIdStr;this.score.rejectMessage(e.toString(),a,t.topic,n.reason),this.gossipTracer.rejectMessage(a,n.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);(s=this.metrics)==null||s.onMsgRecvInvalid(t.topic,n);return;case Ks.valid:this.score.validateMessage(n.messageId.msgIdStr),this.gossipTracer.deliverMessage(n.messageId.msgIdStr),this.mcache.put(n.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)&&(!this.components.peerId.equals(e)||this.opts.emitSelf)&&(super.dispatchEvent(new be("gossipsub:message",{detail:{propagationSource:e,msgId:n.messageId.msgIdStr,msg:n.msg}})),super.dispatchEvent(new be("message",{detail:n.msg}))),this.opts.asyncValidation||this.forwardMessage(n.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){var d,h,f;let n=(d=this.fastMsgIdFn)==null?void 0:d.call(this,t),i=n!==void 0?(h=this.fastMsgIdCache)==null?void 0:h.get(n):void 0;if(i)return{code:Ks.duplicate,msgIdStr:i};let o=await gse(this.globalSignaturePolicy,t);if(!o.valid)return{code:Ks.invalid,reason:Xi.Error,error:o.error};let s=o.message;try{this.dataTransform&&(s.data=this.dataTransform.inboundTransform(t.topic,s.data))}catch(m){return this.log("Invalid message, transform failed",m),{code:Ks.invalid,reason:Xi.Error,error:Ti.TransformFailed}}let a=await this.msgIdFn(s),c=this.msgIdToStrFn(a),u={msgId:a,msgIdStr:c};if(n!==void 0&&this.fastMsgIdCache&&this.fastMsgIdCache.put(n,c)&&((f=this.metrics)==null||f.fastMsgIdCacheCollision.inc()),this.seenCache.has(c))return{code:Ks.duplicate,msgIdStr:c};this.seenCache.put(c);let l=this.topicValidators.get(t.topic);if(l!=null){let m;try{m=await l(e,s)}catch(w){let _=w.code;_===Zoe&&(m=wo.Ignore),_===Qoe?m=wo.Reject:m=wo.Ignore}if(m!==wo.Accept)return{code:Ks.invalid,reason:dN(m),msgIdStr:c}}return{code:Ks.valid,messageId:u,msg:s}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,n){this.sendRpc(e,{subscriptions:t.map(i=>({topic:i,subscribe:n}))})}async handleControlMessage(e,t){var c,u;if(t===void 0)return;let n=t.ihave?this.handleIHave(e,t.ihave):[],i=t.iwant?this.handleIWant(e,t.iwant):[],o=t.graft?await this.handleGraft(e,t.graft):[];if(t.prune&&await this.handlePrune(e,t.prune),!n.length&&!i.length&&!o.length)return;let s=this.sendRpc(e,{messages:i,control:{iwant:n,prune:o}}),a=(c=n[0])==null?void 0:c.messageIDs;a&&(s?this.gossipTracer.addPromise(e,a):(u=this.metrics)==null||u.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;let t=Date.now(),n=this.acceptFromWhitelist.get(e);if(n&&n.messagesAccepted<128&&n.acceptUntil>=t)return n.messagesAccepted+=1,!0;let i=this.score.score(e);return i>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),i>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){var u,l,d;if(!t.length)return[];let n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,n),(u=this.metrics)==null||u.ihaveRcvIgnored.inc({reason:t5.LowScore}),[];let i=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,i),i>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,i),(l=this.metrics)==null||l.ihaveRcvIgnored.inc({reason:t5.MaxIhave}),[];let o=this.iasked.get(e)??0;if(o>=5e3)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,o),(d=this.metrics)==null||d.ihaveRcvIgnored.inc({reason:t5.MaxIasked}),[];let s=new Map;if(t.forEach(({topicID:h,messageIDs:f})=>{var w;if(!h||!f||!this.mesh.has(h))return;let m=0;f.forEach(_=>{let E=this.msgIdToStrFn(_);this.seenCache.has(E)||(s.set(E,_),m++)}),(w=this.metrics)==null||w.onIhaveRcv(h,f.length,m)}),!s.size)return[];let a=s.size;a+o>5e3&&(a=5e3-o),this.log("IHAVE: Asking for %d out of %d messages from %s",a,s.size,e);let c=Array.from(s.values());return q1(c),c=c.slice(0,a),this.iasked.set(e,o+a),[{messageIDs:c}]}handleIWant(e,t){var a;if(!t.length)return[];let n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];let i=new Map,o=new Map,s=0;return t.forEach(({messageIDs:c})=>{c&&c.forEach(u=>{let l=this.msgIdToStrFn(u),d=this.mcache.getWithIWantCount(l,e);if(d==null){s++;return}if(o.set(d.msg.topic,1+(o.get(d.msg.topic)??0)),d.count>3){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,u);return}i.set(l,d.msg)})}),(a=this.metrics)==null||a.onIwantRcv(o,s),i.size?(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){let n=[],i=this.score.score(e),o=Date.now(),s=this.opts.doPX;return t.forEach(({topicID:a})=>{var l,d;if(!a)return;let c=this.mesh.get(a);if(!c){s=!1;return}if(c.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),n.push(a),s=!1;return}let u=(l=this.backoff.get(a))==null?void 0:l.get(e);if(typeof u=="number"&&o<u){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,e5.GraftBackoff),s=!1;let h=u+this.opts.graftFloodThreshold-this.opts.pruneBackoff;o<h&&this.score.addPenalty(e,1,e5.GraftBackoff),this.addBackoff(e,a),n.push(a);return}if(i<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,i,a),n.push(a),s=!1,this.addBackoff(e,a);return}if(c.size>=this.opts.Dhi&&!this.outbound.get(e)){n.push(a),this.addBackoff(e,a);return}this.log("GRAFT: Add mesh link from %s in %s",e,a),this.score.graft(e,a),c.add(e),(d=this.metrics)==null||d.onAddToMesh(a,n0.Subscribed,1)}),n.length?await Promise.all(n.map(a=>this.makePrune(e,a,s))):[]}async handlePrune(e,t){var i;let n=this.score.score(e);for(let{topicID:o,backoff:s,peers:a}of t){if(o==null)continue;let c=this.mesh.get(o);if(!c)return;if(this.log("PRUNE: Remove mesh link to %s in %s",e,o),this.score.prune(e,o),c.has(e)&&(c.delete(e),(i=this.metrics)==null||i.onRemoveFromMesh(o,C3.Unsub,1)),typeof s=="number"&&s>0?this.doAddBackoff(e,o,s*1e3):this.addBackoff(e,o),a&&a.length){if(n<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,n,o);continue}await this.pxConnect(a)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,n){let i=this.backoff.get(t);i||(i=new Map,this.backoff.set(t,i));let o=Date.now()+n;(i.get(e)??0)<o&&i.set(e,o)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,e5.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%15!==0)return;let e=Date.now();this.backoff.forEach((t,n)=>{t.forEach((i,o)=>{i<e&&t.delete(o)}),t.size===0&&this.backoff.delete(n)})}async directConnect(){let e=[];this.direct.forEach(t=>{this.streamsOutbound.has(t)||e.push(t)}),await Promise.all(e.map(async t=>await this.connect(t)))}async pxConnect(e){e.length>this.opts.prunePeers&&(q1(e),e=e.slice(0,this.opts.prunePeers));let t=[];await Promise.all(e.map(async n=>{if(!n.peerID)return;let i=Mr(n.peerID).toString();if(!this.peers.has(i)){if(!n.signedPeerRecord){t.push(i);return}try{let o=await go.openAndCertify(n.signedPeerRecord,"libp2p-peer-record"),s=o.peerId;if(!o.peerId.equals(i)){this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",s,i);return}if(!await this.components.peerStore.addressBook.consumePeerRecord(o)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}t.push(i)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),t.length&&await Promise.all(t.map(async n=>await this.connect(n)))}async connect(e){this.log("Initiating connection with %s",e);let t=Be(e),n=await this.components.connectionManager.openConnection(t);for(let i of this.multicodecs)for(let o of this.components.registrar.getTopologies(i))o.onConnect(t,n)}subscribe(e){if(this.status.code!==Jo.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(let t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==Jo.started)throw new Error("Pubsub is not started");let t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(let n of this.peers.keys())this.sendSubscriptions(n,[e],!1);this.leave(e)}join(e){var i,o,s;if(this.status.code!==Jo.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),(i=this.metrics)==null||i.onJoin(e);let t=new Set,n=this.fanout.get(e);if(n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach(a=>{!this.direct.has(a)&&this.score.score(a)>=0&&t.add(a)}),(o=this.metrics)==null||o.onAddToMesh(e,n0.Fanout,t.size)),t.size<this.opts.D){let a=t.size;this.getRandomGossipPeers(e,this.opts.D,u=>!t.has(u)&&!this.direct.has(u)&&this.score.score(u)>=0).forEach(u=>{t.add(u)}),(s=this.metrics)==null||s.onAddToMesh(e,n0.Random,t.size-a)}this.mesh.set(e,t),t.forEach(a=>{this.log("JOIN: Add mesh link to %s in %s",a,e),this.sendGraft(a,e)})}leave(e){var n;if(this.status.code!==Jo.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),(n=this.metrics)==null||n.onLeave(e);let t=this.mesh.get(e);t&&(Promise.all(Array.from(t).map(async i=>(this.log("LEAVE: Remove mesh link to %s in %s",i,e),await this.sendPrune(i,e)))).catch(i=>{this.log("Error sending prunes to mesh peers",i)}),this.mesh.delete(e))}selectPeersToForward(e,t,n){let i=new Set,o=this.topics.get(e);o&&(this.direct.forEach(a=>{o.has(a)&&t!==a&&!(n!=null&&n.has(a))&&i.add(a)}),this.floodsubPeers.forEach(a=>{o.has(a)&&t!==a&&!(n!=null&&n.has(a))&&this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&i.add(a)}));let s=this.mesh.get(e);return s&&s.size>0&&s.forEach(a=>{t!==a&&!(n!=null&&n.has(a))&&i.add(a)}),i}selectPeersToPublish(e){let t=new Set,n={direct:0,floodsub:0,mesh:0,fanout:0},i=this.topics.get(e);if(i)if(this.opts.floodPublish)i.forEach(o=>{this.direct.has(o)?(t.add(o),n.direct++):this.score.score(o)>=this.opts.scoreThresholds.publishThreshold&&(t.add(o),n.floodsub++)});else{this.direct.forEach(s=>{i.has(s)&&(t.add(s),n.direct++)}),this.floodsubPeers.forEach(s=>{i.has(s)&&this.score.score(s)>=this.opts.scoreThresholds.publishThreshold&&(t.add(s),n.floodsub++)});let o=this.mesh.get(e);if(o&&o.size>0)o.forEach(s=>{t.add(s),n.mesh++});else{let s=this.fanout.get(e);if(s&&s.size>0)s.forEach(a=>{t.add(a),n.fanout++});else{let a=this.getRandomGossipPeers(e,this.opts.D,c=>this.score.score(c)>=this.opts.scoreThresholds.publishThreshold);a.size>0&&(this.fanout.set(e,a),a.forEach(c=>{t.add(c),n.fanout++}))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:n}}forwardMessage(e,t,n,i){var s;n&&this.score.deliverMessage(n,e,t.topic);let o=this.selectPeersToForward(t.topic,n,i);o.forEach(a=>{this.sendRpc(a,{messages:[t]})}),(s=this.metrics)==null||s.onForwardMsg(t.topic,o.size)}async publish(e,t,n){var m,w;let i=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");let{raw:o,msg:s}=await mse(this.publishConfig,e,t,i),a=await this.msgIdFn(s),c=this.msgIdToStrFn(a),u=(n==null?void 0:n.ignoreDuplicatePublishError)??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(c)){if(u)return(m=this.metrics)==null||m.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}let{tosend:l,tosendCount:d}=this.selectPeersToPublish(e),h=this.opts.emitSelf===!0&&this.subscriptions.has(e),f=(n==null?void 0:n.allowPublishToZeroPeers)??this.opts.allowPublishToZeroPeers;if(l.size===0&&!f&&!h)throw Error("PublishError.InsufficientPeers");this.seenCache.put(c),this.mcache.put({msgId:a,msgIdStr:c},o,!0),this.publishedMessageIds.put(c);for(let _ of l)this.sendRpc(_,{messages:[o]})||l.delete(_);return(w=this.metrics)==null||w.onPublishMsg(e,d,l.size,o.data!=null?o.data.length:0),h&&(l.add(this.components.peerId.toString()),super.dispatchEvent(new be("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:c,msg:s}})),super.dispatchEvent(new be("message",{detail:s}))),{recipients:Array.from(l.values()).map(_=>Be(_))}}reportMessageValidationResult(e,t,n){var i,o,s,a;if(n===wo.Accept){let c=this.mcache.validate(e);if((i=this.metrics)==null||i.onReportValidationMcacheHit(c!==null),c!=null){let{message:u,originatingPeers:l}=c;this.score.deliverMessage(t.toString(),e,u.topic),this.forwardMessage(e,c.message,t.toString(),l),(o=this.metrics)==null||o.onReportValidation(u.topic,n)}}else{let c=this.mcache.remove(e);if((s=this.metrics)==null||s.onReportValidationMcacheHit(c!==null),c){let u=dN(n),{message:l,originatingPeers:d}=c;this.score.rejectMessage(t.toString(),e,l.topic,u);for(let h of d)this.score.rejectMessage(h,e,l.topic,u);(a=this.metrics)==null||a.onReportValidation(l.topic,n)}}}sendGraft(e,t){let n=[{topicID:t}];this.sendRpc(e,{control:{graft:n}})}async sendPrune(e,t){let n=[await this.makePrune(e,t,this.opts.doPX)];this.sendRpc(e,{control:{prune:n}})}sendRpc(e,t){var a;let n=this.streamsOutbound.get(e);if(!n)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;let i=this.control.get(e);i&&(this.piggybackControl(e,t,i),this.control.delete(e));let o=this.gossip.get(e);o&&(this.piggybackGossip(e,t,o),this.gossip.delete(e));let s=O7.encode(t).finish();try{n.push(s)}catch(c){return this.log.error(`Cannot send rpc to ${e}`,c),i&&this.control.set(e,i),o&&this.gossip.set(e,o),!1}return(a=this.metrics)==null||a.onRpcSent(t,s.length),!0}piggybackControl(e,t,n){var i,o;if(n.graft){t.control||(t.control={}),t.control.graft||(t.control.graft=[]);for(let s of n.graft)s.topicID&&((i=this.mesh.get(s.topicID))!=null&&i.has(e))&&t.control.graft.push(s)}if(n.prune){t.control||(t.control={}),t.control.prune||(t.control.prune=[]);for(let s of n.prune)s.topicID&&!((o=this.mesh.get(s.topicID))!=null&&o.has(e))&&t.control.prune.push(s)}}piggybackGossip(e,t,n){t.control||(t.control={}),t.control.ihave=n}async sendGraftPrune(e,t,n){let i=this.opts.doPX;for(let[o,s]of e){let a=s.map(l=>({topicID:l})),c=[],u=t.get(o);u&&(c=await Promise.all(u.map(async l=>await this.makePrune(o,l,i&&!(n.get(o)??!1)))),t.delete(o)),this.sendRpc(o,{control:{graft:a,prune:c}})}for(let[o,s]of t){let a=await Promise.all(s.map(async c=>await this.makePrune(o,c,i&&!(n.get(o)??!1))));this.sendRpc(o,{control:{prune:a}})}}emitGossip(e){let t=this.mcache.getGossipIDs(new Set(e.keys()));for(let[n,i]of e)this.doEmitGossip(n,i,t.get(n)??[])}doEmitGossip(e,t,n){if(!n.length||(q1(n),n.length>5e3&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",n.length),!t.size))return;let i=this.opts.Dlazy,o=.25*t.size,s=t;o>i&&(i=o),i>s.size?i=s.size:s=q1(Array.from(s)).slice(0,i),s.forEach(a=>{let c=n;n.length>5e3&&(c=q1(c.slice()).slice(0,5e3)),this.pushGossip(a,{topicID:e,messageIDs:c})})}flush(){for(let[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,{control:{ihave:t}});for(let[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,{control:{graft:t.graft,prune:t.prune}})}pushGossip(e,t){this.log("Add gossip to %s",e);let n=this.gossip.get(e)||[];this.gossip.set(e,n.concat(t))}async makePrune(e,t,n){if(this.score.prune(e,t),this.streamsOutbound.get(e).protocol===uN)return{topicID:t,peers:[]};let i=this.opts.pruneBackoff/1e3;if(!n)return{topicID:t,peers:[],backoff:i};let o=this.getRandomGossipPeers(t,this.opts.prunePeers,a=>a!==e&&this.score.score(a)>=0),s=await Promise.all(Array.from(o).map(async a=>{let c=Be(a);return{peerID:c.toBytes(),signedPeerRecord:await this.components.peerStore.addressBook.getRawEnvelope(c)}}));return{topicID:t,peers:s,backoff:i}}async heartbeat(){var m,w;let{D:e,Dlo:t,Dhi:n,Dscore:i,Dout:o,fanoutTTL:s}=this.opts;this.heartbeatTicks++;let a=new Map,c=_=>{let E=a.get(_);return E===void 0&&(E=this.score.score(_),a.set(_,E)),E},u=new Map,l=new Map,d=new Map;this.clearBackoff(),this.peerhave.clear(),(m=this.metrics)==null||m.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),(w=this.fastMsgIdCache)==null||w.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();let h=new Map;this.mesh.forEach((_,E)=>{let S=this.topics.get(E),p=new Set,g=new Set;if(h.set(E,g),S){let x=q1(Array.from(S)),v=this.backoff.get(E);for(let T of x){let I=this.streamsOutbound.get(T);if(I&&this.multicodecs.includes(I.protocol)&&!_.has(T)&&!this.direct.has(T)){let R=c(T);(!v||!v.has(T))&&R>=0&&p.add(T),R>=this.opts.scoreThresholds.gossipThreshold&&g.add(T)}}}let y=(x,v)=>{var I;this.log("HEARTBEAT: Remove mesh link to %s in %s",x,E),this.addBackoff(x,E),_.delete(x),c(x)>=this.opts.scoreThresholds.gossipThreshold&&g.add(x),(I=this.metrics)==null||I.onRemoveFromMesh(E,v,1);let T=l.get(x);T?T.push(E):l.set(x,[E])},b=(x,v)=>{var I;this.log("HEARTBEAT: Add mesh link to %s in %s",x,E),this.score.graft(x,E),_.add(x),g.delete(x),(I=this.metrics)==null||I.onAddToMesh(E,v,1);let T=u.get(x);T?T.push(E):u.set(x,[E])};if(_.forEach(x=>{let v=c(x);v<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",x,v,E),y(x,C3.BadScore),d.set(x,!0))}),_.size<t){let x=e-_.size;cse(p,x).forEach(T=>{b(T,n0.NotEnough)})}if(_.size>n){let x=Array.from(_);x.sort((T,I)=>c(I)-c(T)),x=x.slice(0,i).concat(q1(x.slice(i)));let v=0;if(x.slice(0,e).forEach(T=>{this.outbound.get(T)&&v++}),v<o){let T=R=>{let M=x[R];for(let U=R;U>0;U--)x[U]=x[U-1];x[0]=M};if(v>0){let R=v;for(let M=1;M<e&&R>0;M++)this.outbound.get(x[M])&&(T(M),R--)}let I=e-v;for(let R=e;R<x.length&&I>0;R++)this.outbound.get(x[R])&&(T(R),I--)}x.slice(e).forEach(T=>{y(T,C3.Excess)})}if(_.size>=t){let x=0;if(_.forEach(v=>{this.outbound.get(v)&&x++}),x<o){let v=o-x;Rb(p,v,I=>this.outbound.get(I)===!0).forEach(I=>{b(I,n0.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&_.size>1){let x=Array.from(_).sort((I,R)=>c(I)-c(R)),v=Math.floor(_.size/2),T=c(x[v]);if(T<this.opts.scoreThresholds.opportunisticGraftThreshold){let I=this.opts.opportunisticGraftPeers,R=Rb(p,I,M=>c(M)>T);for(let M of R)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",M,E),b(M,n0.Opportunistic)}}});let f=Date.now();this.fanoutLastpub.forEach((_,E)=>{_+s<f&&(this.fanout.delete(E),this.fanoutLastpub.delete(E))}),this.fanout.forEach((_,E)=>{let S=this.topics.get(E);_.forEach(b=>{(!S.has(b)||c(b)<this.opts.scoreThresholds.publishThreshold)&&_.delete(b)});let p=this.topics.get(E),g=[],y=new Set;if(h.set(E,y),p){let b=q1(Array.from(p));for(let x of b){let v=this.streamsOutbound.get(x);if(v&&this.multicodecs.includes(v.protocol)&&!_.has(x)&&!this.direct.has(x)){let T=c(x);T>=this.opts.scoreThresholds.publishThreshold&&g.push(x),T>=this.opts.scoreThresholds.gossipThreshold&&y.add(x)}}}if(_.size<e){let b=e-_.size;g.slice(0,b).forEach(x=>{_.add(x),y==null||y.delete(x)})}}),this.emitGossip(h),await this.sendGraftPrune(u,l,d),this.flush(),this.mcache.shift(),this.dispatchEvent(new be("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,n=()=>!0){let i=this.topics.get(e);if(!i)return new Set;let o=[];return i.forEach(s=>{let a=this.streamsOutbound.get(s);a&&this.multicodecs.includes(a.protocol)&&n(s)&&o.push(s)}),o=q1(o),t>0&&o.length>t&&(o=o.slice(0,t)),new Set(o)}onScrapeMetrics(e){var s,a;e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},((s=this.fastMsgIdCache)==null?void 0:s.size)??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0;for(let c of this.backoff.values())t+=c.size;e.cacheSize.set({cache:"backoff"},t);for(let[c,u]of this.topics)e.topicPeersCount.set({topicStr:c},u.size);for(let[c,u]of this.mesh)e.meshPeerCounts.set({topicStr:c},u.size);let n=[],i=new Map;e.behaviourPenalty.reset();for(let c of this.peers.keys()){let u=this.score.score(c);n.push(u),i.set(c,u),e.behaviourPenalty.observe(((a=this.score.peerStats.get(c))==null?void 0:a.behaviourPenalty)??0)}e.registerScores(n,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,i);let o=xse(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(o)}};Ub.multicodec=lN;function kse(r={}){return e=>new Ub(e,r)}function tUe(r){return r[Symbol.asyncIterator]!=null}function rUe(...r){let e=[];for(let t of r)tUe(t)||e.push(t);return e.length===r.length?function*(){for(let t of e)yield*t}():async function*(){let t=Gt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async n=>{for await(let i of n)t.push(i)})),t.end()}catch(n){t.end(n)}}),yield*t}()}var mN=rUe;function k3(r,...e){if(r==null)throw new Error("Empty pipeline");if(gN(r)){let n=r;r=()=>n.source}else if(Dse(r)||Pse(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&gN(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)gN(t[n])&&(t[n]=iUe(t[n]));return nUe(...t)}var nUe=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},Pse=r=>(r==null?void 0:r[Symbol.asyncIterator])!=null,Dse=r=>(r==null?void 0:r[Symbol.iterator])!=null,gN=r=>r==null?!1:r.sink!=null&&r.source!=null,iUe=r=>e=>{let t=r.sink(e);if((t==null?void 0:t.then)!=null){let n=Gt({objectMode:!0});t.then(()=>{n.end()},s=>{n.end(s)});let i,o=r.source;if(Pse(o))i=async function*(){yield*o,n.end()};else if(Dse(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return mN(n,i())}return r.source};function Fb(r){return r[Symbol.asyncIterator]!=null}var Vb=r=>{let e=Gn(r),t=oo(e);return u2(r,t),Vb.bytes=e,t};Vb.bytes=0;function Tu(r,e){e=e??{};let t=e.lengthEncoder??Vb;function*n(i){let o=t(i.byteLength);o instanceof Uint8Array?yield o:yield*o,i instanceof Uint8Array?yield i:yield*i}return Fb(r)?async function*(){for await(let i of r)yield*n(i)}():function*(){for(let i of r)yield*n(i)}()}Tu.single=(r,e)=>{e=e??{};let t=e.lengthEncoder??Vb;return new lt(t(r.byteLength),r)};var zb=class extends Error{constructor(){super(...arguments);F(this,"name","InvalidMessageLengthError");F(this,"code","ERR_INVALID_MSG_LENGTH")}},qb=class extends Error{constructor(){super(...arguments);F(this,"name","InvalidDataLengthError");F(this,"code","ERR_MSG_DATA_TOO_LONG")}},$b=class extends Error{constructor(){super(...arguments);F(this,"name","InvalidDataLengthLengthError");F(this,"code","ERR_MSG_LENGTH_TOO_LONG")}},F7=class extends Error{constructor(){super(...arguments);F(this,"name","UnexpectedEOFError");F(this,"code","ERR_UNEXPECTED_EOF")}};var oUe=8,sUe=1024*1024*4,P3;(function(r){r[r.LENGTH=0]="LENGTH",r[r.DATA=1]="DATA"})(P3||(P3={}));var yN=r=>{let e=Ic(r);return yN.bytes=Gn(e),e};yN.bytes=0;function D3(r,e){let t=new lt,n=P3.LENGTH,i=-1,o=(e==null?void 0:e.lengthDecoder)??yN,s=(e==null?void 0:e.maxLengthLength)??oUe,a=(e==null?void 0:e.maxDataLength)??sUe;function*c(){for(;t.byteLength>0;){if(n===P3.LENGTH)try{if(i=o(t),i<0)throw new zb("Invalid message length");if(i>a)throw new qb("Message length too long");let u=o.bytes;t.consume(u),(e==null?void 0:e.onLength)!=null&&e.onLength(i),n=P3.DATA}catch(u){if(u instanceof RangeError){if(t.byteLength>s)throw new $b("Message length length too long");break}throw u}if(n===P3.DATA){if(t.byteLength<i)break;let u=t.sublist(0,i);t.consume(i),(e==null?void 0:e.onData)!=null&&e.onData(u),yield u,n=P3.LENGTH}}}return Fb(r)?async function*(){for await(let u of r)t.append(u),yield*c();if(t.byteLength>0)throw new F7("Unexpected end of input")}():function*(){for(let u of r)t.append(u),yield*c();if(t.byteLength>0)throw new F7("Unexpected end of input")}()}D3.fromReader=(r,e)=>{let t=1,n=async function*(){for(;;)try{let{done:o,value:s}=await r.next(t);if(o===!0)return;s!=null&&(yield s)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{t=1}}();return D3(n,{...e??{},onLength:o=>{t=o}})};var aUe=z("libp2p-pubsub:peer-streams"),Kb=class extends at{constructor(e){super(),this.id=e.id,this.protocol=e.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return!!this.inboundStream}get isWritable(){return!!this.outboundStream}write(e){if(this.outboundStream==null){let t=this.id.toString();throw new Error("No writable connection to "+t)}this.outboundStream.push(e instanceof Uint8Array?new lt(e):e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=Ii(k3(this._rawInboundStream,t=>D3(t)),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new be("stream:inbound")),this.inboundStream}async attachOutboundStream(e){let t=this.outboundStream;return this.outboundStream!=null&&this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=Gt({objectMode:!0,onEnd:n=>{this._rawOutboundStream!=null&&this._rawOutboundStream.reset!=null&&this._rawOutboundStream.reset(),this._rawOutboundStream=void 0,this.outboundStream=void 0,n!=null&&this.dispatchEvent(new be("close"))}}),k3(this.outboundStream,n=>Tu(n),this._rawOutboundStream).catch(n=>{aUe.error(n)}),t==null&&this.dispatchEvent(new be("stream:outbound")),this.outboundStream}close(){this.closed||(this.closed=!0,this.outboundStream!=null&&this.outboundStream.end(),this.inboundStream!=null&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new be("close")))}};var Nse=oe("libp2p-pubsub:");async function Ose(r,e,t){if(r.privateKey==null)throw new Error("Cannot sign message, no private key present");if(r.publicKey==null)throw new Error("Cannot sign message, no public key present");let n={type:"signed",topic:e.topic,data:e.data,sequenceNumber:e.sequenceNumber,from:r},i=Ye([Nse,t(B7(n)).subarray()]),o=await Cl.unmarshalPrivateKey(r.privateKey);return n.signature=await o.sign(i),n.key=r.publicKey,n}async function Lse(r,e){if(r.type!=="signed")throw new Error('Message type must be "signed" to be verified');if(r.signature==null)throw new Error("Message must contain a signature to be verified");if(r.from==null)throw new Error("Message must contain a from property to be verified");let t=Ye([Nse,e({...B7(r),signature:void 0,key:void 0}).subarray()]),n=await cUe(r);return await Cl.unmarshalPublicKey(n).verify(t,r.signature)}async function cUe(r){if(r.type!=="signed")throw new Error('Message type must be "signed" to have a public key');if(r.from==null)throw new Error("Could not get the public key from the originator id");if(r.key!=null){let e=await Sr(r.key);if(e.publicKey!=null)return e.publicKey}if(r.from.publicKey!=null)return r.from.publicKey;throw new Error("Could not get the public key from the originator id")}function N3(r,e){let t={[Symbol.iterator]:()=>t,next:()=>{let n=r.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:e(i)}}};return t}var O3=class{constructor(e){F(this,"map");if(this.map=new Map,e!=null)for(let[t,n]of e.entries())this.map.set(t.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return N3(this.map.entries(),e=>[Be(e[0]),e[1]])}forEach(e){this.map.forEach((t,n)=>{e(t,Be(n),this)})}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return N3(this.map.keys(),e=>Be(e))}values(){return this.map.values()}get size(){return this.map.size}};var js=class r{constructor(e){F(this,"set");if(this.set=new Set,e!=null)for(let t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return N3(this.set.entries(),e=>{let t=Be(e[0]);return[t,t]})}forEach(e){this.set.forEach(t=>{let n=Be(t);e(n,n,this)})}has(e){return this.set.has(e.toString())}values(){return N3(this.set.values(),e=>Be(e))}intersection(e){let t=new r;for(let n of e)this.has(n)&&t.add(n);return t}difference(e){let t=new r;for(let n of this)e.has(n)||t.add(n);return t}union(e){let t=new r;for(let n of e)t.add(n);for(let n of this)t.add(n);return t}};var Lr=z("libp2p:pubsub"),jb=class extends at{constructor(e,t){super();let{multicodecs:n=[],globalSignaturePolicy:i="StrictSign",canRelayMessage:o=!1,emitSelf:s=!1,messageProcessingConcurrency:a=10,maxInboundStreams:c=1,maxOutboundStreams:u=1}=t;this.components=e,this.multicodecs=bse(n),this.enabled=t.enabled!==!1,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new O3,this.globalSignaturePolicy=i==="StrictNoSign"?"StrictNoSign":"StrictSign",this.canRelayMessage=o,this.emitSelf=s,this.topicValidators=new Map,this.queue=new On({concurrency:a}),this.maxInboundStreams=c,this.maxOutboundStreams=u,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started||!this.enabled)return;Lr("starting");let e=this.components.registrar;await Promise.all(this.multicodecs.map(async n=>{await e.handle(n,this._onIncomingStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})}));let t=_u({onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected});this._registrarTopologyIds=await Promise.all(this.multicodecs.map(async n=>await e.register(n,t))),Lr("started"),this.started=!0}async stop(){var t;if(!this.started||!this.enabled)return;let e=this.components.registrar;this._registrarTopologyIds!=null&&((t=this._registrarTopologyIds)==null||t.forEach(n=>{e.unregister(n)})),await Promise.all(this.multicodecs.map(async n=>{await e.unhandle(n)})),Lr("stopping");for(let n of this.peers.values())n.close();this.peers.clear(),this.subscriptions=new Set,this.started=!1,Lr("stopped")}isStarted(){return this.started}_onIncomingStream(e){let{stream:t,connection:n}=e,i=n.remotePeer;if(t.stat.protocol==null){t.abort(new Error("Stream was not multiplexed"));return}let o=this.addPeer(i,t.stat.protocol),s=o.attachInboundStream(t);this.processMessages(i,s,o).catch(a=>{Lr(a)})}_onPeerConnected(e,t){Lr("connected %p",e),Promise.resolve().then(async()=>{try{let n=await t.newStream(this.multicodecs);if(n.stat.protocol==null){n.abort(new Error("Stream was not multiplexed"));return}await this.addPeer(e,n.stat.protocol).attachOutboundStream(n)}catch(n){Lr.error(n)}this.send(e,{subscriptions:Array.from(this.subscriptions).map(n=>n.toString()),subscribe:!0})}).catch(n=>{Lr.error(n)})}_onPeerDisconnected(e,t){let n=e.toString();Lr("connection ended",n),this._removePeer(e)}addPeer(e,t){let n=this.peers.get(e);if(n!=null)return n;Lr("new peer %p",e);let i=new Kb({id:e,protocol:t});return this.peers.set(e,i),i.addEventListener("close",()=>this._removePeer(e),{once:!0}),i}_removePeer(e){let t=this.peers.get(e);if(t!=null){t.close(),Lr("delete peer %p",e),this.peers.delete(e);for(let n of this.topics.values())n.delete(e);return t}}async processMessages(e,t,n){try{await k3(t,async i=>{for await(let o of i){let s=this.decodeRpc(o),a=[];for(let c of s.messages??[]){if(c.from==null||c.data==null||c.topic==null){Lr("message from %p was missing from, data or topic fields, dropping",e);continue}a.push({from:c.from,data:c.data,topic:c.topic,sequenceNumber:c.sequenceNumber??void 0,signature:c.signature??void 0,key:c.key??void 0})}this.processRpc(e,n,{subscriptions:(s.subscriptions??[]).map(c=>({subscribe:!!c.subscribe,topic:c.topic??""})),messages:a}).catch(c=>{Lr(c)})}})}catch(i){this._onPeerDisconnected(n.id,i)}}async processRpc(e,t,n){if(!this.acceptFrom(e))return Lr("received message from unacceptable peer %p",e),!1;Lr("rpc from %p",e);let{subscriptions:i,messages:o}=n;return i!=null&&i.length>0&&(Lr("subscription update from %p",e),i.forEach(s=>{this.processRpcSubOpt(e,s)}),super.dispatchEvent(new be("subscription-change",{detail:{peerId:t.id,subscriptions:i.map(({topic:s,subscribe:a})=>({topic:`${s??""}`,subscribe:!!a}))}}))),o!=null&&o.length>0&&(Lr("messages from %p",e),this.queue.addAll(o.map(s=>async()=>{if(s.topic==null||!this.subscriptions.has(s.topic)&&!this.canRelayMessage)return Lr("received message we didn't subscribe to. Dropping."),!1;try{let a=await _se(s);await this.processMessage(e,a)}catch(a){Lr.error(a)}})).catch(s=>{Lr(s)})),!0}processRpcSubOpt(e,t){let n=t.topic;if(n==null)return;let i=this.topics.get(n);i==null&&(i=new js,this.topics.set(n,i)),t.subscribe===!0?i.add(e):i.delete(e)}async processMessage(e,t){if(!(this.components.peerId.equals(e)&&!this.emitSelf)){try{await this.validate(e,t)}catch(n){Lr("Message is invalid, dropping it. %O",n);return}this.subscriptions.has(t.topic)&&(!this.components.peerId.equals(e)||this.emitSelf)&&super.dispatchEvent(new be("message",{detail:t})),await this.publishMessage(e,t)}}getMsgId(e){switch(this.globalSignaturePolicy){case"StrictSign":if(e.type!=="signed")throw new X('Message type should be "signed" when signature policy is StrictSign but it was not',Ln.ERR_MISSING_SIGNATURE);if(e.sequenceNumber==null)throw new X("Need seqno when signature policy is StrictSign but it was missing",Ln.ERR_MISSING_SEQNO);if(e.key==null)throw new X("Need key when signature policy is StrictSign but it was missing",Ln.ERR_MISSING_KEY);return Db(e.key,e.sequenceNumber);case"StrictNoSign":return wse(e.data);default:throw new X("Cannot get message id: unhandled signature policy",Ln.ERR_UNHANDLED_SIGNATURE_POLICY)}}acceptFrom(e){return!0}send(e,t){let{messages:n,subscriptions:i,subscribe:o}=t;this.sendRpc(e,{subscriptions:(i??[]).map(s=>({topic:s,subscribe:!!o})),messages:(n??[]).map(B7)})}sendRpc(e,t){let n=this.peers.get(e);if(n==null||!n.isWritable){Lr.error("Cannot send RPC to %p as there is no open stream to it available",e);return}n.write(this.encodeRpc(t))}async validate(e,t){switch(this.globalSignaturePolicy){case"StrictNoSign":if(t.type!=="unsigned")throw new X('Message type should be "unsigned" when signature policy is StrictNoSign but it was not',Ln.ERR_MISSING_SIGNATURE);if(t.signature!=null)throw new X("StrictNoSigning: signature should not be present",Ln.ERR_UNEXPECTED_SIGNATURE);if(t.key!=null)throw new X("StrictNoSigning: key should not be present",Ln.ERR_UNEXPECTED_KEY);if(t.sequenceNumber!=null)throw new X("StrictNoSigning: seqno should not be present",Ln.ERR_UNEXPECTED_SEQNO);break;case"StrictSign":if(t.type!=="signed")throw new X('Message type should be "signed" when signature policy is StrictSign but it was not',Ln.ERR_MISSING_SIGNATURE);if(t.signature==null)throw new X("StrictSigning: Signing required and no signature was present",Ln.ERR_MISSING_SIGNATURE);if(t.sequenceNumber==null)throw new X("StrictSigning: Signing required and no sequenceNumber was present",Ln.ERR_MISSING_SEQNO);if(!await Lse(t,this.encodeMessage.bind(this)))throw new X("StrictSigning: Invalid message signature",Ln.ERR_INVALID_SIGNATURE);break;default:throw new X("Cannot validate message: unhandled signature policy",Ln.ERR_UNHANDLED_SIGNATURE_POLICY)}let i=this.topicValidators.get(t.topic);if(i!=null){let o=await i(e,t);if(o===wo.Reject||o===wo.Ignore)throw new X("Message validation failed",Ln.ERR_TOPIC_VALIDATOR_REJECT)}}async buildMessage(e){switch(this.globalSignaturePolicy){case"StrictSign":return await Ose(this.components.peerId,e,this.encodeMessage.bind(this));case"StrictNoSign":return await Promise.resolve({type:"unsigned",...e});default:throw new X("Cannot build message: unhandled signature policy",Ln.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw new X("not started yet","ERR_NOT_STARTED_YET");if(e==null)throw new X("topic is required","ERR_NOT_VALID_TOPIC");let t=this.topics.get(e.toString());return t==null?[]:Array.from(t.values())}async publish(e,t){if(!this.started)throw new Error("Pubsub has not started");let n={from:this.components.peerId,topic:e,data:t??new Uint8Array(0),sequenceNumber:yse()};Lr("publish topic: %s from: %p data: %m",e,n.from,n.data);let i=await this.buildMessage(n),o=!1;this.emitSelf&&this.subscriptions.has(e)&&(o=!0,super.dispatchEvent(new be("message",{detail:i})));let s=await this.publishMessage(this.components.peerId,i);return o&&(s.recipients=[...s.recipients,this.components.peerId]),s}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");if(Lr("subscribe to topic: %s",e),!this.subscriptions.has(e)){this.subscriptions.add(e);for(let t of this.peers.keys())this.send(t,{subscriptions:[e],subscribe:!0})}}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");super.removeEventListener(e);let t=this.subscriptions.has(e);if(Lr("unsubscribe from %s - am subscribed %s",e,t),t){this.subscriptions.delete(e);for(let n of this.peers.keys())this.send(n,{subscriptions:[e],subscribe:!1})}}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}getPeers(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.peers.keys())}};var iIt=z("libp2p:floodsub"),Bse="/floodsub/1.0.0";var Gb=class{constructor(e){this.lastPruneTime=0,this.entries=new Map,this.validityMs=e.validityMs}put(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){let e=Date.now();if(!(e-this.lastPruneTime<200)){this.lastPruneTime=e;for(let[t,n]of this.entries.entries())if(n.validUntilMs<e)this.entries.delete(t);else break}}has(e){return this.entries.has(e)}get(e){let t=this.entries.get(e);return t!=null&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}};var L3;(function(r){let e;(function(i){let o;i.codec=()=>(o==null&&(o=Dt((s,a,c={})=>{c.lengthDelimited!==!1&&a.fork(),s.subscribe!=null&&(a.uint32(8),a.bool(s.subscribe)),s.topic!=null&&(a.uint32(18),a.string(s.topic)),c.lengthDelimited!==!1&&a.ldelim()},(s,a)=>{let c={},u=a==null?s.len:s.pos+a;for(;s.pos<u;){let l=s.uint32();switch(l>>>3){case 1:c.subscribe=s.bool();break;case 2:c.topic=s.string();break;default:s.skipType(l&7);break}}return c})),o),i.encode=s=>Pt(s,i.codec()),i.decode=s=>kt(s,i.codec())})(e=r.SubOpts||(r.SubOpts={}));let t;(function(i){let o;i.codec=()=>(o==null&&(o=Dt((s,a,c={})=>{c.lengthDelimited!==!1&&a.fork(),s.from!=null&&(a.uint32(10),a.bytes(s.from)),s.data!=null&&(a.uint32(18),a.bytes(s.data)),s.sequenceNumber!=null&&(a.uint32(26),a.bytes(s.sequenceNumber)),s.topic!=null&&(a.uint32(34),a.string(s.topic)),s.signature!=null&&(a.uint32(42),a.bytes(s.signature)),s.key!=null&&(a.uint32(50),a.bytes(s.key)),c.lengthDelimited!==!1&&a.ldelim()},(s,a)=>{let c={},u=a==null?s.len:s.pos+a;for(;s.pos<u;){let l=s.uint32();switch(l>>>3){case 1:c.from=s.bytes();break;case 2:c.data=s.bytes();break;case 3:c.sequenceNumber=s.bytes();break;case 4:c.topic=s.string();break;case 5:c.signature=s.bytes();break;case 6:c.key=s.bytes();break;default:s.skipType(l&7);break}}return c})),o),i.encode=s=>Pt(s,i.codec()),i.decode=s=>kt(s,i.codec())})(t=r.Message||(r.Message={}));let n;r.codec=()=>(n==null&&(n=Dt((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.subscriptions!=null)for(let a of i.subscriptions)o.uint32(10),r.SubOpts.codec().encode(a,o);if(i.messages!=null)for(let a of i.messages)o.uint32(18),r.Message.codec().encode(a,o);i.control!=null&&(o.uint32(26),Hb.codec().encode(i.control,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={subscriptions:[],messages:[]},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.subscriptions.push(r.SubOpts.codec().decode(i,i.uint32()));break;case 2:s.messages.push(r.Message.codec().decode(i,i.uint32()));break;case 3:s.control=Hb.codec().decode(i,i.uint32());break;default:i.skipType(c&7);break}}return s})),n),r.encode=i=>Pt(i,r.codec()),r.decode=i=>kt(i,r.codec())})(L3||(L3={}));var Hb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.ihave!=null)for(let o of t.ihave)n.uint32(10),Wb.codec().encode(o,n);if(t.iwant!=null)for(let o of t.iwant)n.uint32(18),Yb.codec().encode(o,n);if(t.graft!=null)for(let o of t.graft)n.uint32(26),Xb.codec().encode(o,n);if(t.prune!=null)for(let o of t.prune)n.uint32(34),Qb.codec().encode(o,n);i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={ihave:[],iwant:[],graft:[],prune:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.ihave.push(Wb.codec().decode(t,t.uint32()));break;case 2:i.iwant.push(Yb.codec().decode(t,t.uint32()));break;case 3:i.graft.push(Xb.codec().decode(t,t.uint32()));break;case 4:i.prune.push(Qb.codec().decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Hb||(Hb={}));var Wb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.topic!=null&&(n.uint32(10),n.string(t.topic)),t.messageIDs!=null)for(let o of t.messageIDs)n.uint32(18),n.bytes(o);i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={messageIDs:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.topic=t.string();break;case 2:i.messageIDs.push(t.bytes());break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Wb||(Wb={}));var Yb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.messageIDs!=null)for(let o of t.messageIDs)n.uint32(10),n.bytes(o);i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={messageIDs:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.messageIDs.push(t.bytes());break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Yb||(Yb={}));var Xb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.topic!=null&&(n.uint32(10),n.string(t.topic)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.topic=t.string();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Xb||(Xb={}));var Qb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.topic!=null&&(n.uint32(10),n.string(t.topic)),t.peers!=null)for(let o of t.peers)n.uint32(18),Zb.codec().encode(o,n);t.backoff!=null&&(n.uint32(24),n.uint64(t.backoff)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={peers:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.topic=t.string();break;case 2:i.peers.push(Zb.codec().decode(t,t.uint32()));break;case 3:i.backoff=t.uint64();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Qb||(Qb={}));var Zb;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.peerID!=null&&(n.uint32(10),n.bytes(t.peerID)),t.signedPeerRecord!=null&&(n.uint32(18),n.bytes(t.signedPeerRecord)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.peerID=t.bytes();break;case 2:i.signedPeerRecord=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Zb||(Zb={}));var Jb=z("libp2p:floodsub");var bN=class extends jb{constructor(e,t){super(e,{...t,canRelayMessage:!0,multicodecs:[Bse]}),this.seenCache=new Gb({validityMs:(t==null?void 0:t.seenTTL)??3e4})}decodeRpc(e){return L3.decode(e)}encodeRpc(e){return L3.encode(e)}decodeMessage(e){return L3.Message.decode(e)}encodeMessage(e){return L3.Message.encode(e)}async processMessage(e,t){let n=await super.getMsgId(t),i=ie(n,"base64");this.seenCache.has(i)||(this.seenCache.put(i,!0),await super.processMessage(e,t))}async publishMessage(e,t){let n=this.getSubscribers(t.topic),i=[];return n==null||n.length===0?(Jb("no peers are subscribed to topic %s",t.topic),{recipients:i}):(n.forEach(o=>{if(this.components.peerId.equals(o)){Jb("not sending message on topic %s to myself",t.topic);return}if(o.equals(e)){Jb("not sending message on topic %s to sender %p",t.topic,o);return}Jb("publish msgs on topics %s %p",t.topic,o),i.push(o),this.send(o,{messages:[t]})}),{recipients:i})}};function Mse(r={}){return e=>new bN(e,r)}var Use=()=>({gossipsub:kse({fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128}),floodsub:Mse({emitSelf:!0})});var es=L(Co(),1);es.default.formatters.b=r=>r==null?"undefined":Bi.baseEncode(r);es.default.formatters.t=r=>r==null?"undefined":s2.baseEncode(r);es.default.formatters.m=r=>r==null?"undefined":pI.baseEncode(r);es.default.formatters.p=r=>r==null?"undefined":r.toString();es.default.formatters.c=r=>r==null?"undefined":r.toString();es.default.formatters.k=r=>r==null?"undefined":r.toString();es.default.formatters.a=r=>r==null?"undefined":r.toString();function uUe(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function e_(r){let e=uUe(`${r}:trace`);return es.default.enabled(`${r}:trace`)&&es.default.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=(0,es.default)(`${r}:trace`)),Object.assign((0,es.default)(r),{error:(0,es.default)(`${r}:error`),trace:e})}var Fse=Symbol.for("@libp2p/peer-id");var lUe=Symbol.for("nodejs.util.inspect.custom"),Vse=Object.values(Yd).map(r=>r.decoder).reduce((r,e)=>r.or(e),Yd.identity.decoder),qse=114,$se=36,Kse=37,zse,V7=class{constructor(e){F(this,"type");F(this,"multihash");F(this,"privateKey");F(this,"publicKey");F(this,"string");F(this,zse,!0);this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Bi.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Ec.createV1(qse,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return ct(this.multihash.bytes,e);if(typeof e=="string")return dUe(e).equals(this);if(((t=e==null?void 0:e.multihash)==null?void 0:t.bytes)!=null)return ct(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[(zse=Fse,lUe)](){return`PeerId(${this.toString()})`}},z7=class extends V7{constructor(t){super({...t,type:"RSA"});F(this,"type","RSA");F(this,"publicKey");this.publicKey=t.publicKey}},q7=class extends V7{constructor(t){super({...t,type:"Ed25519"});F(this,"type","Ed25519");F(this,"publicKey");this.publicKey=t.multihash.digest}},$7=class extends V7{constructor(t){super({...t,type:"secp256k1"});F(this,"type","secp256k1");F(this,"publicKey");this.publicKey=t.multihash.digest}};function dUe(r,e){if(e=e??Vse,r.charAt(0)==="1"||r.charAt(0)==="Q"){let t=Dh(Bi.decode(`z${r}`));return r.startsWith("12D")?new q7({multihash:t}):r.startsWith("16U")?new $7({multihash:t}):new z7({multihash:t})}return _N(Vse.decode(r))}function _N(r){try{let e=Dh(r);if(e.code===dm.code){if(e.digest.length===$se)return new q7({multihash:e});if(e.digest.length===Kse)return new $7({multihash:e})}if(e.code===fm.code)return new z7({multihash:e})}catch{return fUe(Ec.decode(r))}throw new Error("Supplied PeerID CID is invalid")}function fUe(r){if(r==null||r.multihash==null||r.version==null||r.version===1&&r.code!==qse)throw new Error("Supplied PeerID CID is invalid");let e=r.multihash;if(e.code===fm.code)return new z7({multihash:r.multihash});if(e.code===dm.code){if(e.digest.length===$se)return new q7({multihash:r.multihash});if(e.digest.length===Kse)return new $7({multihash:r.multihash})}throw new Error("Supplied PeerID CID is invalid")}function Gs(r){let e=new globalThis.AbortController;function t(){e.abort();for(let o of r)(o==null?void 0:o.removeEventListener)!=null&&o.removeEventListener("abort",t)}for(let o of r){if((o==null?void 0:o.aborted)===!0){t();break}(o==null?void 0:o.addEventListener)!=null&&o.addEventListener("abort",t)}function n(){for(let o of r)(o==null?void 0:o.removeEventListener)!=null&&o.removeEventListener("abort",t)}let i=e.signal;return i.clear=n,i}var B3=e_("libp2p:delegated-peer-routing"),jse=3e4,hUe=4,Gse;(function(r){r[r.SENDING_QUERY=0]="SENDING_QUERY",r[r.PEER_RESPONSE=1]="PEER_RESPONSE",r[r.FINAL_PEER=2]="FINAL_PEER",r[r.QUERY_ERROR=3]="QUERY_ERROR",r[r.PROVIDER=4]="PROVIDER",r[r.VALUE=5]="VALUE",r[r.ADDING_PEER=6]="ADDING_PEER",r[r.DIALING_PEER=7]="DIALING_PEER"})(Gse||(Gse={}));var Hse;(function(r){r[r.PUT_VALUE=0]="PUT_VALUE",r[r.GET_VALUE=1]="GET_VALUE",r[r.ADD_PROVIDER=2]="ADD_PROVIDER",r[r.GET_PROVIDERS=3]="GET_PROVIDERS",r[r.FIND_NODE=4]="FIND_NODE",r[r.PING=5]="PING"})(Hse||(Hse={}));var vN=class{constructor(e){F(this,"client");F(this,"httpQueue");F(this,"started");F(this,"abortController");if(e==null)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new On({concurrency:hUe});let{protocol:t,host:n,port:i}=e.getEndpointConfig();B3(`enabled DelegatedPeerRouting via ${t}://${n}:${i}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(e,t={}){B3("findPeer starts: %p",e),t.timeout=t.timeout??jse;let n=Gs([this.abortController.signal,t.signal]),i=jt(),o=jt();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;for await(let s of this.client.dht.findPeer(e,{...t,signal:n}))if(s.name==="FINAL_PEER"&&s.peer.multiaddrs.length>0)return{id:s.peer.id,multiaddrs:s.peer.multiaddrs,protocols:[]};throw new X("Not found","ERR_NOT_FOUND")}catch(s){throw B3.error("findPeer errored: %o",s),s}finally{n.clear(),o.resolve(),B3("findPeer finished: %p",e)}}async*getClosestPeers(e,t={}){let n,i=Ec.asCID(e);i!=null?n=i:n=_N(e),B3("getClosestPeers starts: %s",n),t.timeout=t.timeout??jse;let o=Gs([this.abortController.signal,t.signal]),s=jt(),a=jt();this.httpQueue.add(async()=>(s.resolve(),a.promise));try{await s.promise;for await(let c of this.client.dht.query(n,{...t,signal:o}))c.name==="PEER_RESPONSE"&&(yield*c.closer.map(u=>({id:u.id,multiaddrs:u.multiaddrs,protocols:[]})))}catch(c){throw B3.error("getClosestPeers errored:",c),c}finally{o.clear(),a.resolve(),B3("getClosestPeers finished: %b",e)}}};function Wse(r){return()=>new vN(r)}var Qse=L(fe(),1);function pUe(r){return r[Symbol.asyncIterator]!=null}function mUe(r){if(pUe(r))return(async()=>{for await(let e of r);})();for(let e of r);}var EN=mUe;var bo=e_("libp2p:delegated-content-routing"),t_=3e4,gUe=4,yUe=2,Yse;(function(r){r[r.SENDING_QUERY=0]="SENDING_QUERY",r[r.PEER_RESPONSE=1]="PEER_RESPONSE",r[r.FINAL_PEER=2]="FINAL_PEER",r[r.QUERY_ERROR=3]="QUERY_ERROR",r[r.PROVIDER=4]="PROVIDER",r[r.VALUE=5]="VALUE",r[r.ADDING_PEER=6]="ADDING_PEER",r[r.DIALING_PEER=7]="DIALING_PEER"})(Yse||(Yse={}));var Xse;(function(r){r[r.PUT_VALUE=0]="PUT_VALUE",r[r.GET_VALUE=1]="GET_VALUE",r[r.ADD_PROVIDER=2]="ADD_PROVIDER",r[r.GET_PROVIDERS=3]="GET_PROVIDERS",r[r.FIND_NODE=4]="FIND_NODE",r[r.PING=5]="PING"})(Xse||(Xse={}));var xN=class{constructor(e){F(this,"client");F(this,"httpQueue");F(this,"httpQueueRefs");F(this,"started");F(this,"abortController");if(e==null)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new On({concurrency:gUe}),this.httpQueueRefs=new On({concurrency:yUe});let{protocol:t,host:n,port:i}=e.getEndpointConfig();bo(`enabled DelegatedContentRouting via ${t}://${n}:${i}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(e,t={}){bo("findProviders starts: %c",e),t.timeout=t.timeout??t_;let n=Gs([this.abortController.signal,t.signal]),i=jt(),o=jt();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;for await(let s of this.client.dht.findProvs(e,{...t,signal:n}))s.name==="PROVIDER"&&(yield*s.providers.map(a=>({id:a.id,protocols:[],multiaddrs:a.multiaddrs})))}catch(s){throw bo.error("findProviders errored:",s),s}finally{n.clear(),o.resolve(),bo("findProviders finished: %c",e)}}async provide(e,t={}){bo("provide starts: %c",e),t.timeout=t.timeout??t_;let n=Gs([this.abortController.signal,t.signal]),i=jt(),o=jt();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise,await this.client.block.stat(e,{...t,signal:n}),await EN(this.client.dht.provide(e,{...t,signal:n}))}catch(s){throw bo.error("provide errored:",s),s}finally{n.clear(),o.resolve(),bo("provide finished: %c",e)}}async put(e,t,n={}){bo("put value start: %b",e),n.timeout=n.timeout??t_;let i=Gs([this.abortController.signal,n.signal]),o=jt(),s=jt();this.httpQueue.add(async()=>(o.resolve(),s.promise));try{await o.promise,await EN(this.client.dht.put(e,t,{...n,signal:i}))}catch(a){throw bo.error("put errored:",a),a}finally{i.clear(),s.resolve(),bo("put finished: %b",e)}}async get(e,t={}){bo("get value start: %b",e),t.timeout=t.timeout??t_;let n=Gs([this.abortController.signal,t.signal]),i=jt(),o=jt();this.httpQueue.add(async()=>(i.resolve(),o.promise));try{await i.promise;for await(let s of this.client.dht.get(e,{...t,signal:n}))if(s.name==="VALUE")return bo("get value finished: %b",e),s.value;throw(0,Qse.default)(new Error("Not found"),"ERR_NOT_FOUND")}catch(s){throw bo.error("put errored:",s),s}finally{n.clear(),o.resolve(),bo("put finished: %b",e)}}};function Zse(r){return()=>new xN(r)}var wUe=r=>Promise.reject(new Error(`No base found for "${r}"`)),i5=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||wUe;for(let t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let t=await this._loadBase(e);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}};var bUe=r=>Promise.reject(new Error(`No codec found for "${r}"`)),o5=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||bUe;for(let t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let t=typeof e=="string"?this._codecsByName:this._codecsByCode;if(t[e])return t[e];let n=await this._loadCodec(e);return t[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var _Ue=r=>Promise.reject(new Error(`No hasher found for "${r}"`)),s5=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||_Ue;for(let t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let t=typeof e=="string"?this._hashersByName:this._hashersByCode;if(t[e])return t[e];let n=await this._loadHasher(e);return t[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var $1=L(fh(),1);var M3=L(T8(),1);function SN(r){try{r=s4(Ee(r))}catch{}return r=r.toString(),r}var Jse=L(require("http"),1),eae=L(require("https"),1),tae=r=>{if(!r)throw new Error("URL required");return r.protocol.startsWith("https")?eae.default.Agent:Jse.default.Agent};var rae=z("ipfs-http-client:lib:error-handler"),vUe=Je.bind({ignoreUndefined:!0}),EUe=$1.isBrowser||$1.isWebWorker?location.protocol:"http",xUe=$1.isBrowser||$1.isWebWorker?location.hostname:"localhost",SUe=$1.isBrowser||$1.isWebWorker?location.port:"5001",TUe=(r={})=>{let e,t={},n;if(typeof r=="string"||Ki(r))e=new URL(SN(r));else if(r instanceof URL)e=r;else if(typeof r.url=="string"||Ki(r.url))e=new URL(SN(r.url)),t=r;else if(r.url instanceof URL)e=r.url,t=r;else{t=r||{};let i=(t.protocol||EUe).replace(":",""),o=(t.host||xUe).split(":")[0],s=t.port||SUe;e=new URL(`${i}://${o}:${s}`)}if(t.apiPath?e.pathname=t.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),$1.isNode){let i=tae(e);n=t.agent||new i({keepAlive:!0,maxSockets:6})}return{...t,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},IUe=async r=>{let e;try{if((r.headers.get("Content-Type")||"").startsWith("application/json")){let n=await r.json();rae(n),e=n.Message||n.message}else e=await r.text()}catch(n){rae("Failed to parse error response",n),e=n.message}let t=new M3.default.HTTPError(r);throw e&&(e.includes("deadline has elapsed")&&(t=new M3.default.TimeoutError),e&&e.includes("context deadline exceeded")&&(t=new M3.default.TimeoutError)),e&&e.includes("request timed out")&&(t=new M3.default.TimeoutError),e&&(t.message=e),t},AUe=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,nae=r=>r.replace(AUe,function(e){return"-"+e.toLowerCase()}),CUe=r=>typeof r=="string"?p2(r):r,Iu=class extends M3.default{constructor(e={}){let t=TUe(e);super({timeout:CUe(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:IUe,transformSearchParams:i=>{let o=new URLSearchParams;for(let[s,a]of i)a!=="undefined"&&a!=="null"&&s!=="signal"&&o.append(nae(s),a),s==="timeout"&&!isNaN(a)&&o.append(nae(s),a);return o},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(i,o={})=>(typeof i=="string"&&!i.startsWith("/")&&(i=`${t.url}/${i}`),n.call(this,i,vUe(o,{method:"POST"})))}},yAt=M3.default.HTTPError;var K=r=>e=>r(new Iu(e),e);function r_(r){if(r!=null)return typeof r=="string"?r:r.toString(8).padStart(4,"0")}var iae=L(fe(),1);function n_(r){if(r==null)return;let e;if(r.secs!=null&&(e={secs:r.secs,nsecs:r.nsecs}),r.Seconds!=null&&(e={secs:r.Seconds,nsecs:r.FractionalNanoseconds}),Array.isArray(r)&&(e={secs:r[0],nsecs:r[1]}),r instanceof Date){let t=r.getTime(),n=Math.floor(t/1e3);e={secs:n,nsecs:(t-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,iae.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function W({arg:r,searchParams:e,hashAlg:t,mtime:n,mode:i,...o}={}){e&&(o={...o,...e}),t&&(o.hash=t),n!=null&&(n=n_(n),o.mtime=n.secs,o.mtimeNsecs=n.nsecs),i!=null&&(o.mode=r_(i)),o.timeout&&!isNaN(o.timeout)&&(o.timeout=`${o.timeout}ms`),r==null?r=[]:Array.isArray(r)||(r=[r]);let s=new URLSearchParams(o);return r.forEach(a=>s.append("arg",a)),s}var oae=K(r=>{async function e(t={}){return((await(await r.post("bitswap/wantlist",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).Keys||[]).map(i=>$.parse(i["/"]))}return e});var sae=K(r=>{async function e(t,n={}){return((await(await r.post("bitswap/wantlist",{signal:n.signal,searchParams:W({...n,peer:t.toString()}),headers:n.headers})).json()).Keys||[]).map(o=>$.parse(o["/"]))}return e});var i_=K(r=>{async function e(t={}){let n=await r.post("bitswap/stat",{searchParams:W(t),signal:t.signal,headers:t.headers});return RUe(await n.json())}return e});function RUe(r){return{provideBufLen:r.ProvideBufLen,wantlist:(r.Wantlist||[]).map(e=>$.parse(e["/"])),peers:(r.Peers||[]).map(e=>Be(e)),blocksReceived:BigInt(r.BlocksReceived),dataReceived:BigInt(r.DataReceived),blocksSent:BigInt(r.BlocksSent),dataSent:BigInt(r.DataSent),dupBlksReceived:BigInt(r.DupBlksReceived),dupDataReceived:BigInt(r.DupDataReceived)}}var aae=K(r=>{async function e(t,n={}){return(await r.post("bitswap/unwant",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers})).json()}return e});function cae(r){return{wantlist:oae(r),wantlistForPeer:sae(r),unwant:aae(r),stat:i_(r)}}var o_=K(r=>{async function e(t,n={}){let i=await r.post("block/get",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await i.arrayBuffer())}return e});var Dae=L(fh(),1);function s_(r){if(r!=null)return typeof r=="string"?r:r.toString(8).padStart(4,"0")}var Tae=L(Sae(),1);var zUe=Je.bind({ignoreUndefined:!0}),qUe=z("ipfs:core-utils:multipart-request");async function Iae(r,e,t={},n=`-----------------------------${rf()}`){async function*i(c){try{let u=0;for await(let{content:l,path:d,mode:h,mtime:f}of c){let m="",w=l?"file":"dir";u>0&&(yield`\r
`,m=`-${u}`);let _=w+m,E=[];if(h!=null&&E.push(`mode=${s_(h)}`),f!=null){let{secs:S,nsecs:p}=f;E.push(`mtime=${S}`),p!=null&&E.push(`mtime-nsecs=${p}`)}E.length&&(_=`${_}?${E.join("&")}`),yield`--${n}\r
`,yield`Content-Disposition: form-data; name="${_}"; filename="${encodeURIComponent(d||"")}"\r
`,yield`Content-Type: ${l?"application/octet-stream":"application/x-directory"}\r
`,yield`\r
`,l&&(yield*l),u++}}catch(u){qUe(u),e.abort()}finally{yield`\r
--${n}--\r
`}}let o=Vo(oy(r)),{value:s,done:a}=await o.peek();return a||o.push(s),{parts:null,total:-1,headers:zUe(t,{"Content-Type":`multipart/form-data; boundary=${n}`}),body:(0,Tae.default)(i(o))}}var Cae=L(fe(),1);async function Rae(r){if(Ds(r))return new Blob([r]);if(typeof r=="string"||r instanceof String)return new Blob([r.toString()]);if(Fc(r))return r;if(Vc(r)&&(r=uo(r)),Symbol.iterator in r||Symbol.asyncIterator in r){let e=Vo(r),{value:t,done:n}=await e.peek();if(n)return Aae(e);if(e.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await Pn(e))]);if(Ds(t)||typeof t=="string"||t instanceof String)return Aae(e)}throw(0,Cae.default)(new Error(`Unexpected input: ${r}`),"ERR_UNEXPECTED_INPUT")}async function Aae(r){let e=[];for await(let t of r)e.push(t);return new Blob(e)}function kae(r){return iy(r,Rae,!0)}async function Pae(r,e,t={}){let n=[],i=new FormData,o=0,s=0;for await(let{content:a,path:c,mode:u,mtime:l}of kae(r)){let d="",h=a?"file":"dir";o>0&&(d=`-${o}`);let f=h+d,m=[];if(u!=null&&m.push(`mode=${s_(u)}`),l!=null){let{secs:w,nsecs:_}=l;m.push(`mtime=${w}`),_!=null&&m.push(`mtime-nsecs=${_}`)}if(m.length&&(f=`${f}?${m.join("&")}`),a){i.set(f,a,c!=null?encodeURIComponent(c):void 0);let w=s+a.size;n.push({name:c,start:s,end:w}),s=w}else if(c!=null)i.set(f,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");o++}return{total:s,parts:n,headers:t,body:i}}async function Tn(r,e,t={},n=`-----------------------------${rf()}`){let i=Iae;return Dae.isElectronRenderer&&(i=Pae),i(r,e,t,n)}var Nae=L(va(),1);function $Ue(r){return r.filter(Boolean)}function In(...r){return(0,Nae.anySignal)($Ue(r))}var Oae=K(r=>{async function e(t,n={}){let i=new AbortController,o=In(i.signal,n.signal),s;try{s=await(await r.post("block/put",{signal:o,searchParams:W(n),...await Tn([t],i,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return e(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return e(t,{...n,format:"cbor"});throw a}return $.parse(s.Key)}return e});var Lae=K(r=>{async function*e(t,n={}){Array.isArray(t)||(t=[t]);let i=await r.post("block/rm",{signal:n.signal,searchParams:W({arg:t.map(o=>o.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let o of i.ndjson())yield KUe(o)}return e});function KUe(r){let e={cid:$.parse(r.Hash)};return r.Error&&(e.error=new Error(r.Error)),e}var Bae=K(r=>{async function e(t,n={}){let o=await(await r.post("block/stat",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:$.parse(o.Key),size:o.Size}}return e});function Mae(r){return{get:o_(r),put:Oae(r),rm:Lae(r),stat:Bae(r)}}var Uae=K(r=>{async function e(t,n={}){let i=await r.post("bootstrap/add",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),{Peers:o}=await i.json();return{Peers:o.map(s=>Ee(s))}}return e});var Fae=K(r=>{async function e(t={}){let n=await r.post("bootstrap/rm",{signal:t.signal,searchParams:W({...t,all:!0}),headers:t.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>Ee(o))}}return e});var Vae=K(r=>{async function e(t={}){let n=await r.post("bootstrap/list",{signal:t.signal,searchParams:W(t),headers:t.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>Ee(o))}}return e});var zae=K(r=>{async function e(t={}){let n=await r.post("bootstrap/add",{signal:t.signal,searchParams:W({...t,default:!0}),headers:t.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>Ee(o))}}return e});var qae=K(r=>{async function e(t,n={}){let i=await r.post("bootstrap/rm",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),{Peers:o}=await i.json();return{Peers:o.map(s=>Ee(s))}}return e});function $ae(r){return{add:Uae(r),clear:Fae(r),list:Vae(r),reset:zae(r),rm:qae(r)}}var Kae=K(r=>{async function e(t,n={}){let o=await(await r.post("config/profile/apply",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json();return{original:o.OldCfg,updated:o.NewCfg}}return e});function Ft(r){if(r==null)return r;let e=/^[A-Z]+$/,t={};return Object.keys(r).reduce((n,i)=>(e.test(i)?n[i.toLowerCase()]=r[i]:e.test(i[0])?n[i[0].toLowerCase()+i.slice(1)]=r[i]:n[i]=r[i],n),t)}var jae=K(r=>{async function e(t={}){return(await(await r.post("config/profile/list",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).map(o=>Ft(o))}return e});function Gae(r){return{apply:Kae(r),list:jae(r)}}var Hae=K(r=>async(t,n={})=>{if(!t)throw new Error("key argument is required");return(await(await r.post("config",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json()).Value});var Wae=K(r=>async(t={})=>await(await r.post("config/show",{signal:t.signal,searchParams:W({...t}),headers:t.headers})).json());var Yae=K(r=>async(t,n={})=>{let i=new AbortController,o=In(i.signal,n.signal);await(await r.post("config/replace",{signal:o,searchParams:W(n),...await Tn([oe(JSON.stringify(t))],i,n.headers)})).text()});var Xae=K(r=>async(t,n,i={})=>{if(typeof t!="string")throw new Error("Invalid key type");let o={...i,...jUe(t,n)};await(await r.post("config",{signal:i.signal,searchParams:W(o),headers:i.headers})).text()}),jUe=(r,e)=>{switch(typeof e){case"boolean":return{arg:[r,e.toString()],bool:!0};case"string":return{arg:[r,e]};default:return{arg:[r,JSON.stringify(e)],json:!0}}};function Qae(r){return{getAll:Wae(r),get:Hae(r),set:Xae(r),replace:Yae(r),profiles:Gae(r)}}var Zae=K(r=>{async function*e(t,n={}){yield*(await r.post("dag/export",{signal:n.signal,searchParams:W({arg:t.toString()}),headers:n.headers})).iterator()}return e});var kN=L(fe(),1);async function*PN(r,e,t,n,i){let o=async u=>{let l=await t.getCodec(u.code),d=await n(u,i);return l.decode(d)},s=e.split("/").filter(Boolean),a=await o(r),c=r;for(;s.length;){let u=s.shift();if(!u)throw(0,kN.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:s.join("/")};else throw(0,kN.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let l=$.asCID(a);l&&(c=l,a=await o(a))}yield{value:a,remainderPath:""}}var Jae=L(fe(),1);var e1e=(r,e)=>K((n,i)=>{let o=o_(i);return async(a,c={})=>{if(c.path){let f=c.localResolve?await xn(PN(a,c.path,r,o,c)):await _r(PN(a,c.path,r,o,c));if(!f)throw(0,Jae.default)(new Error("Not found"),"ERR_NOT_FOUND");return f}let u=await r.getCodec(a.code),l=await o(a,c);return{value:u.decode(l),remainderPath:""}}})(e);var t1e=K(r=>{async function*e(t,n={}){let i=new AbortController,o=In(i.signal,n.signal),{headers:s,body:a}=await Tn(t,i,n.headers),c=await r.post("dag/import",{signal:o,headers:s,body:a,searchParams:W({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:$.parse(l),pinErrorMsg:d}}}}return e});var a_=(r,e)=>K(n=>async(o,s={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...s},c;if(a.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=o}else c=(await r.getCodec(a.storeCodec)).encode(o),a.inputCodec=a.storeCodec;let u=new AbortController,l=In(u.signal,a.signal),h=await(await n.post("dag/put",{timeout:a.timeout,signal:l,searchParams:W(a),...await Tn([c],u,a.headers)})).json();return $.parse(h.Cid["/"])})(e);var r1e=K(r=>async(t,n={})=>{let o=await(await r.post("dag/resolve",{signal:n.signal,searchParams:W({arg:`${t}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:$.parse(o.Cid["/"]),remainderPath:o.RemPath}});function n1e(r,e){return{export:Zae(e),get:e1e(r,e),import:t1e(e),put:a_(r,e),resolve:r1e(e)}}var Hs=r=>{if(r.Type===0)return{name:"SENDING_QUERY",type:r.Type};if(r.Type===1)return{from:Be(r.ID),name:"PEER_RESPONSE",type:r.Type,messageType:0,messageName:"PUT_VALUE",closer:(r.Responses||[]).map(({ID:e,Addrs:t})=>({id:Be(e),multiaddrs:t.map(n=>Ee(n)),protocols:[]})),providers:(r.Responses||[]).map(({ID:e,Addrs:t})=>({id:Be(e),multiaddrs:t.map(n=>Ee(n)),protocols:[]}))};if(r.Type===2){let e={id:r.ID??Be(r.ID),multiaddrs:[],protocols:[]};return r.Responses&&r.Responses.length&&(e={id:Be(r.Responses[0].ID),multiaddrs:r.Responses[0].Addrs.map(t=>Ee(t)),protocols:[]}),{name:"FINAL_PEER",type:r.Type,peer:e}}if(r.Type===3)return{name:"QUERY_ERROR",type:r.Type,error:new Error(r.Extra)};if(r.Type===4)return{name:"PROVIDER",type:r.Type,providers:r.Responses.map(({ID:e,Addrs:t})=>({id:Be(e),multiaddrs:t.map(n=>Ee(n)),protocols:[]}))};if(r.Type===5)return{name:"VALUE",type:r.Type,value:oe(r.Extra,"base64pad")};if(r.Type===6){let e=r.Responses.map(({ID:t})=>Be(t));if(!e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:r.Type,peer:e[0]}}if(r.Type===7)return{name:"DIALING_PEER",type:r.Type,peer:Be(r.ID)};throw new Error("Unknown DHT event type")};var i1e=K(r=>{async function*e(t,n={}){let i=await r.post("dht/findpeer",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers});for await(let o of i.ndjson())yield Hs(o)}return e});var o1e=K(r=>{async function*e(t,n={}){let i=await r.post("dht/findprovs",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers});for await(let o of i.ndjson())yield Hs(o)}return e});var s1e=K(r=>{async function*e(t,n={}){let i=await r.post("dht/get",{signal:n.signal,searchParams:W({arg:t instanceof Uint8Array?ie(t):t.toString(),...n}),headers:n.headers});for await(let o of i.ndjson())yield Hs(o)}return e});var a1e=K(r=>{async function*e(t,n={recursive:!1}){let i=Array.isArray(t)?t:[t],o=await r.post("dht/provide",{signal:n.signal,searchParams:W({arg:i.map(s=>s.toString()),...n}),headers:n.headers});for await(let s of o.ndjson())yield Hs(s)}return e});var c1e=K(r=>{async function*e(t,n,i={}){let o=new AbortController,s=In(o.signal,i.signal),a=await r.post("dht/put",{signal:s,searchParams:W({arg:t instanceof Uint8Array?ie(t):t.toString(),...i}),...await Tn([n],o,i.headers)});for await(let c of a.ndjson())yield Hs(c)}return e});var u1e=K(r=>{async function*e(t,n={}){let i=await r.post("dht/query",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers});for await(let o of i.ndjson())yield Hs(o)}return e});function l1e(r){return{findPeer:i1e(r),findProvs:o1e(r),get:s1e(r),provide:a1e(r),put:c1e(r),query:u1e(r)}}var d1e=K(r=>{async function e(t={}){return(await r.post("diag/cmds",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()}return e});var f1e=K(r=>{async function e(t={}){return(await r.post("diag/net",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()}return e});var h1e=K(r=>{async function e(t={}){return(await r.post("diag/sys",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()}return e});function p1e(r){return{cmds:d1e(r),net:f1e(r),sys:h1e(r)}}var m1e=K(r=>{async function e(t,n,i={}){await(await r.post("files/chmod",{signal:i.signal,searchParams:W({arg:t,mode:n,...i}),headers:i.headers})).text()}return e});var g1e=K(r=>{async function e(t,n,i={}){let o=Array.isArray(t)?t:[t];await(await r.post("files/cp",{signal:i.signal,searchParams:W({arg:o.concat(n).map(a=>$.asCID(a)?`/ipfs/${a}`:a),...i}),headers:i.headers})).text()}return e});var y1e=K(r=>{async function e(t,n={}){if(!t||typeof t!="string")throw new Error("ipfs.files.flush requires a path");let o=await(await r.post("files/flush",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json();return $.parse(o.Cid)}return e});function K7(r){let e=Ft(r);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}var b1e=K(r=>{async function*e(t,n={}){if(!t)throw new Error("ipfs.files.ls requires a path");let i=await r.post("files/ls",{signal:n.signal,searchParams:W({arg:$.asCID(t)?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(let o of i.ndjson())if("Entries"in o)for(let s of o.Entries||[])yield w1e(K7(s));else yield w1e(K7(o))}return e});function w1e(r){return r.hash&&(r.cid=$.parse(r.hash)),delete r.hash,r.type=r.type===1?"directory":"file",r}var _1e=K(r=>{async function e(t,n={}){await(await r.post("files/mkdir",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).text()}return e});var v1e=K(r=>{async function e(t,n,i={}){Array.isArray(t)||(t=[t]),await(await r.post("files/mv",{signal:i.signal,searchParams:W({arg:t.concat(n),...i}),headers:i.headers})).text()}return e});var x1e=L(j7(),1),S1e=K(r=>{async function*e(t,n={}){let i=await r.post("files/read",{signal:n.signal,searchParams:W({arg:t,count:n.length,...n}),headers:n.headers});yield*(0,x1e.default)(i.body)}return e});var T1e=L(T8(),1),I1e=K(r=>{async function e(t,n={}){let i=await r.post("files/rm",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),o=await i.text();if(o!==""){let s=new T1e.default.HTTPError(i);throw s.message=o,s}}return e});var c_=K(r=>{async function e(t,n={}){let o=await(await r.post("files/stat",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json();return o.WithLocality=o.WithLocality||!1,eFe(K7(o))}return e});function eFe(r){return r.cid=$.parse(r.hash),delete r.hash,r}var A1e=K(r=>{async function e(t,n={}){await(await r.post("files/touch",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).text()}return e});var C1e=K(r=>{async function e(t,n,i={}){let o=new AbortController,s=In(o.signal,i.signal);await(await r.post("files/write",{signal:s,searchParams:W({arg:t,streamChannels:!0,count:i.length,...i}),...await Tn([{content:n,path:"arg",mode:r_(i.mode),mtime:n_(i.mtime)}],o,i.headers)})).text()}return e});function R1e(r){return{chmod:m1e(r),cp:g1e(r),flush:y1e(r),ls:b1e(r),mkdir:_1e(r),mv:v1e(r),read:S1e(r),rm:I1e(r),stat:c_(r),touch:A1e(r),write:C1e(r)}}var k1e=L(fe(),1),P1e=K(r=>async(t,n,i={})=>{throw(0,k1e.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var D1e=K(r=>{async function e(t,n){let i=n??{type:"Ed25519"},s=await(await r.post("key/gen",{signal:i.signal,searchParams:W({arg:t,...i}),headers:i.headers})).json();return Ft(s)}return e});var N1e=K(r=>{async function e(t,n,i,o={}){let a=await(await r.post("key/import",{signal:o.signal,searchParams:W({arg:t,pem:n,password:i,...o}),headers:o.headers})).json();return Ft(a)}return e});var O1e=L(fe(),1),L1e=K(r=>async(t,n={})=>{throw(0,O1e.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var B1e=K(r=>{async function e(t={}){return((await(await r.post("key/list",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).Keys||[]).map(o=>Ft(o))}return e});var M1e=K(r=>{async function e(t,n,i={}){let o=await r.post("key/rename",{signal:i.signal,searchParams:W({arg:[t,n],...i}),headers:i.headers});return Ft(await o.json())}return e});var U1e=K(r=>{async function e(t,n={}){let o=await(await r.post("key/rm",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json();return Ft(o.Keys[0])}return e});function F1e(r){return{export:P1e(r),gen:D1e(r),import:N1e(r),info:L1e(r),list:B1e(r),rename:M1e(r),rm:U1e(r)}}var V1e=K(r=>{async function e(t,n,i={}){let o=await r.post("log/level",{signal:i.signal,searchParams:W({arg:[t,n],...i}),headers:i.headers});return Ft(await o.json())}return e});var z1e=K(r=>{async function e(t={}){return(await(await r.post("log/ls",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).Strings}return e});var q1e=K(r=>{async function*e(t={}){yield*(await r.post("log/tail",{signal:t.signal,searchParams:W(t),headers:t.headers})).ndjson()}return e});function $1e(r){return{level:V1e(r),ls:z1e(r),tail:q1e(r)}}var K1e=K(r=>{async function e(t,n={}){let i=await r.post("name/publish",{signal:n.signal,searchParams:W({arg:`${t}`,...n}),headers:n.headers});return Ft(await i.json())}return e});var j1e=K(r=>{async function*e(t,n={}){let i=await r.post("name/resolve",{signal:n.signal,searchParams:W({arg:t,stream:!0,...n}),headers:n.headers});for await(let o of i.ndjson())yield o.Path}return e});var G1e=K(r=>{async function e(t,n={}){let i=await r.post("name/pubsub/cancel",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers});return Ft(await i.json())}return e});var H1e=K(r=>{async function e(t={}){let n=await r.post("name/pubsub/state",{signal:t.signal,searchParams:W(t),headers:t.headers});return Ft(await n.json())}return e});var W1e=K(r=>{async function e(t={}){return(await(await r.post("name/pubsub/subs",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).Strings||[]}return e});function Y1e(r){return{cancel:G1e(r),state:H1e(r),subs:W1e(r)}}function X1e(r){return{publish:K1e(r),resolve:j1e(r),pubsub:Y1e(r)}}var Q1e=K(r=>{async function e(t,n={}){let o=await(await r.post("object/data",{signal:n.signal,searchParams:W({arg:`${t instanceof Uint8Array?$.decode(t):t}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(o,0,o.byteLength)}return e});var Z1e=K(r=>{async function e(t,n={}){let o=await(await r.post("object/get",{signal:n.signal,searchParams:W({arg:`${t instanceof Uint8Array?$.decode(t):t}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:oe(o.Data,"base64pad"),Links:(o.Links||[]).map(s=>({Name:s.Name,Hash:$.parse(s.Hash),Tsize:s.Size}))}}return e});var J1e=K(r=>{async function e(t,n={}){return((await(await r.post("object/links",{signal:n.signal,searchParams:W({arg:`${t instanceof Uint8Array?$.decode(t):t}`,...n}),headers:n.headers})).json()).Links||[]).map(s=>({Name:s.Name,Tsize:s.Size,Hash:$.parse(s.Hash)}))}return e});var ece=K(r=>{async function e(t={}){let n=await r.post("object/new",{signal:t.signal,searchParams:W({arg:t.template,...t}),headers:t.headers}),{Hash:i}=await n.json();return $.parse(i)}return e});var tce=(r,e)=>K(n=>{let i=a_(r,e);async function o(s,a={}){return i(s,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return o})(e);var rce=K(r=>{async function e(t,n={}){let o=await(await r.post("object/stat",{signal:n.signal,searchParams:W({arg:`${t}`,...n}),headers:n.headers})).json();return{...o,Hash:$.parse(o.Hash)}}return e});var nce=K(r=>{async function e(t,n,i={}){let o=await r.post("object/patch/add-link",{signal:i.signal,searchParams:W({arg:[`${t}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...i}),headers:i.headers}),{Hash:s}=await o.json();return $.parse(s)}return e});var ice=K(r=>{async function e(t,n,i={}){let o=new AbortController,s=In(o.signal,i.signal),a=await r.post("object/patch/append-data",{signal:s,searchParams:W({arg:`${t}`,...i}),...await Tn([n],o,i.headers)}),{Hash:c}=await a.json();return $.parse(c)}return e});var oce=K(r=>{async function e(t,n,i={}){let o=await r.post("object/patch/rm-link",{signal:i.signal,searchParams:W({arg:[`${t}`,n.Name||n.name||null],...i}),headers:i.headers}),{Hash:s}=await o.json();return $.parse(s)}return e});var sce=K(r=>{async function e(t,n,i={}){let o=new AbortController,s=In(o.signal,i.signal),a=await r.post("object/patch/set-data",{signal:s,searchParams:W({arg:[`${t}`],...i}),...await Tn([n],o,i.headers)}),{Hash:c}=await a.json();return $.parse(c)}return e});function ace(r){return{addLink:nce(r),appendData:ice(r),rmLink:oce(r),setData:sce(r)}}function cce(r,e){return{data:Q1e(e),get:Z1e(e),links:J1e(e),new:ece(e),put:tce(r,e),stat:rce(e),patch:ace(e)}}var u_=K(r=>{async function*e(t,n={}){for await(let{path:i,recursive:o,metadata:s}of l1(t)){let a=await r.post("pin/add",{signal:n.signal,searchParams:W({...n,arg:i,recursive:o,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:n.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield $.parse(u);continue}yield $.parse(c)}}}return e});function uce(r){let e=u_(r);return K(()=>{async function t(n,i={}){return _r(e([{path:n,...i}],i))}return t})(r)}function lce(r,e,t){let n={type:r,cid:$.parse(e)};return t&&(n.metadata=t),n}var dce=K(r=>{async function*e(t={}){let n=[];t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);let i=await r.post("pin/ls",{signal:t.signal,searchParams:W({...t,arg:n.map(o=>`${o}`),stream:!0}),headers:t.headers});for await(let o of i.ndjson()){if(o.Keys){for(let s of Object.keys(o.Keys))yield lce(o.Keys[s].Type,s,o.Keys[s].Metadata);return}yield lce(o.Type,o.Cid,o.Metadata)}}return e});var l_=K(r=>{async function*e(t,n={}){for await(let{path:i,recursive:o}of l1(t)){let s=new URLSearchParams(n.searchParams);s.append("arg",`${i}`),o!=null&&s.set("recursive",String(o));let a=await r.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:W({...n,arg:`${i}`,recursive:o})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>$.parse(u));continue}yield $.parse(c)}}}return e});var fce=r=>{let e=l_(r);return K(()=>{async function t(n,i={}){return _r(e([{path:n,...i}],i))}return t})(r)};var d_=({Name:r,Status:e,Cid:t})=>({cid:$.parse(t),name:r,status:e}),hce=r=>{if(typeof r=="string"&&r!=="")return r;throw new TypeError("service name must be passed")},pce=r=>{if($.asCID(r))return r.toString();throw new TypeError(`CID instance expected instead of ${typeof r}`)},c5=({service:r,cid:e,name:t,status:n,all:i})=>{let o=W({service:hce(r),name:t,force:i?!0:void 0});if(e)for(let s of e)o.append("cid",pce(s));if(n)for(let s of n)o.append("status",s);return o},mce=({cid:r,service:e,background:t,name:n,origins:i})=>{let o=W({arg:pce(r),service:hce(e),name:n,background:t?!0:void 0});if(i)for(let s of i)o.append("origin",s.toString());return o};function gce(r){async function e(t,{timeout:n,signal:i,headers:o,...s}){let a=await r.post("pin/remote/add",{timeout:n,signal:i,headers:o,searchParams:mce({cid:t,...s})});return d_(await a.json())}return e}function yce(r){async function*e({timeout:t,signal:n,headers:i,...o}){let s=await r.post("pin/remote/ls",{timeout:t,signal:n,headers:i,searchParams:c5(o)});for await(let a of s.ndjson())yield d_(a)}return e}function wce(r){async function e({timeout:t,signal:n,headers:i,...o}){await r.post("pin/remote/rm",{timeout:t,signal:n,headers:i,searchParams:c5({...o,all:!1})})}return e}function bce(r){async function e({timeout:t,signal:n,headers:i,...o}){await r.post("pin/remote/rm",{timeout:t,signal:n,headers:i,searchParams:c5({...o,all:!0})})}return e}function _ce(r){let e=String(r);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function vce(r){return{service:r.Service,endpoint:new URL(r.ApiEndpoint),...r.Stat&&{stat:tFe(r.Stat)}}}function tFe(r){switch(r.Status){case"valid":{let{Pinning:e,Pinned:t,Queued:n,Failed:i}=r.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:t,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:r.Status}}}function Ece(r){async function e(t,n){let{endpoint:i,key:o,headers:s,timeout:a,signal:c}=n;await r.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:W({arg:[t,_ce(i),o]}),headers:s})}return e}function xce(r){async function e(t={}){let{stat:n,headers:i,timeout:o,signal:s}=t,a=await r.post("pin/remote/service/ls",{timeout:o,signal:s,headers:i,searchParams:n===!0?W({stat:n}):void 0}),{RemoteServices:c}=await a.json();return c.map(vce)}return e}function Sce(r){async function e(t,n={}){await r.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:W({arg:t})})}return e}function Tce(r){let e=new Iu(r);return{add:Ece(e),ls:xce(e),rm:Sce(e)}}function Ice(r){let e=new Iu(r);return{add:gce(e),ls:yce(e),rm:wce(e),rmAll:bce(e),service:Tce(r)}}function Ace(r){return{addAll:u_(r),add:uce(r),ls:dce(r),rmAll:l_(r),rm:fce(r),remote:Ice(r)}}var Cce=r=>Array.isArray(r)?r.map(f_):r,f_=r=>ie(u5(r)),u5=r=>Z0.decode(r),Rce=r=>BigInt(`0x${ie(Z0.decode(r),"base16")}`),l5=r=>Z0.encode(oe(r));var kce=K(r=>{async function e(t={}){let{Strings:n}=await(await r.post("pubsub/ls",{signal:t.signal,searchParams:W(t),headers:t.headers})).json();return Cce(n)||[]}return e});var Pce=K(r=>{async function e(t,n={}){let i=await r.post("pubsub/peers",{signal:n.signal,searchParams:W({arg:l5(t),...n}),headers:n.headers}),{Strings:o}=await i.json();return o||[]}return e});var Dce=K(r=>{async function e(t,n,i={}){let o=W({arg:l5(t),...i}),s=new AbortController,a=In(s.signal,i.signal);await(await r.post("pubsub/pub",{signal:a,searchParams:o,...await Tn([n],s,i.headers)})).text()}return e});var rFe=z("ipfs-http-client:pubsub:subscribe"),Nce=(r,e)=>K(t=>{async function n(i,o,s={}){s.signal=e.subscribe(i,o,s.signal);let a,c,u=new Promise((d,h)=>{a=d,c=h}),l=setTimeout(()=>a(),1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:W({arg:l5(i),...s}),headers:s.headers}).catch(d=>{e.unsubscribe(i,o),c(d)}).then(d=>{clearTimeout(l),d&&(nFe(d,{onMessage:h=>{if(o){if(typeof o=="function"){o(h);return}typeof o.handleEvent=="function"&&o.handleEvent(h)}},onEnd:()=>e.unsubscribe(i,o),onError:s.onError}),a())}),u}return n})(r);async function nFe(r,{onMessage:e,onEnd:t,onError:n}){n=n||rFe;try{for await(let i of r.ndjson())try{if(!i.from)continue;i.from!=null&&i.seqno!=null?e({type:"signed",from:Be(i.from),data:u5(i.data),sequenceNumber:Rce(i.seqno),topic:f_(i.topicIDs[0]),key:u5(i.key??"u"),signature:u5(i.signature??"u")}):e({type:"unsigned",data:u5(i.data),topic:f_(i.topicIDs[0])})}catch(o){o.message=`Failed to parse pubsub message: ${o.message}`,n(o,!1,i)}}catch(i){iFe(i)||n(i,!0)}finally{t()}}var iFe=r=>{switch(r.type){case"aborted":return!0;case"abort":return!0;default:return r.name==="AbortError"}};var Oce=(r,e)=>{async function t(n,i){e.unsubscribe(n,i)}return t};var h_=class{constructor(){this._subs=new Map}subscribe(e,t,n){let i=this._subs.get(e)||[];if(i.find(s=>s.handler===t))throw new Error(`Already subscribed to ${e} with this handler`);let o=new AbortController;return this._subs.set(e,[{handler:t,controller:o}].concat(i)),n&&n.addEventListener("abort",()=>this.unsubscribe(e,t)),o.signal}unsubscribe(e,t){let n=this._subs.get(e)||[],i;t?(this._subs.set(e,n.filter(o=>o.handler!==t)),i=n.filter(o=>o.handler===t)):(this._subs.set(e,[]),i=n),(this._subs.get(e)||[]).length||this._subs.delete(e),i.forEach(o=>o.controller.abort())}};function Lce(r){let e=new h_;return{ls:kce(r),peers:Pce(r),publish:Dce(r),subscribe:Nce(r,e),unsubscribe:Oce(r,e)}}var Bce=K(r=>{async function*e(t={}){yield*(await r.post("refs/local",{signal:t.signal,transform:Ft,searchParams:W(t),headers:t.headers})).ndjson()}return e});var Mce=K((r,e)=>Object.assign(async function*(n,i={}){let o=Array.isArray(n)?n:[n];yield*(await r.post("refs",{signal:i.signal,searchParams:W({arg:o.map(a=>`${a instanceof Uint8Array?$.decode(a):a}`),...i}),headers:i.headers,transform:Ft})).ndjson()},{local:Bce(e)}));var Uce=K(r=>{async function*e(t={}){yield*(await r.post("repo/gc",{signal:t.signal,searchParams:W(t),headers:t.headers,transform:i=>({err:i.Error?new Error(i.Error):null,cid:(i.Key||{})["/"]?$.parse(i.Key["/"]):null})})).ndjson()}return e});var p_=K(r=>{async function e(t={}){let i=await(await r.post("repo/stat",{signal:t.signal,searchParams:W(t),headers:t.headers})).json();return{numObjects:BigInt(i.NumObjects),repoSize:BigInt(i.RepoSize),repoPath:i.RepoPath,version:i.Version,storageMax:BigInt(i.StorageMax)}}return e});var Fce=K(r=>{async function e(t={}){return(await(await r.post("repo/version",{signal:t.signal,searchParams:W(t),headers:t.headers})).json()).Version}return e});function Vce(r){return{gc:Uce(r),stat:p_(r),version:Fce(r)}}var zce=K(r=>{async function*e(t={}){yield*(await r.post("stats/bw",{signal:t.signal,searchParams:W(t),headers:t.headers,transform:i=>({totalIn:BigInt(i.TotalIn),totalOut:BigInt(i.TotalOut),rateIn:parseFloat(i.RateIn),rateOut:parseFloat(i.RateOut)})})).ndjson()}return e});function qce(r){return{bitswap:i_(r),repo:p_(r),bw:zce(r)}}var $ce=K(r=>{async function e(t={}){let n=await r.post("swarm/addrs",{signal:t.signal,searchParams:W(t),headers:t.headers}),{Addrs:i}=await n.json();return Object.keys(i).map(o=>({id:Be(o),addrs:(i[o]||[]).map(s=>Ee(s))}))}return e});var Kce=K(r=>{async function e(t,n={}){let i=await r.post("swarm/connect",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),{Strings:o}=await i.json();return o||[]}return e});var jce=K(r=>{async function e(t,n={}){let i=await r.post("swarm/disconnect",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),{Strings:o}=await i.json();return o||[]}return e});var Gce=K(r=>{async function e(t={}){let n=await r.post("swarm/addrs/local",{signal:t.signal,searchParams:W(t),headers:t.headers}),{Strings:i}=await n.json();return(i||[]).map(o=>Ee(o))}return e});var Hce=K(r=>{async function e(t={}){let n=await r.post("swarm/peers",{signal:t.signal,searchParams:W(t),headers:t.headers}),{Peers:i}=await n.json();return(i||[]).map(o=>({addr:Ee(o.Addr),peer:Be(o.Peer),muxer:o.Muxer,latency:o.Latency,streams:o.Streams,direction:o.Direction==null?void 0:o.Direction===0?"inbound":"outbound"}))}return e});function Wce(r){return{addrs:$ce(r),connect:Kce(r),disconnect:jce(r),localAddrs:Gce(r),peers:Hce(r)}}var m_=K(r=>{async function*e(t,n={}){let i=new AbortController,o=In(i.signal,n.signal),{headers:s,body:a,total:c,parts:u}=await Tn(t,i,n.headers),[l,d]=typeof n.progress=="function"?oFe(c,u,n.progress):[void 0,void 0],h=await r.post("add",{searchParams:W({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:o,headers:s,body:a});for await(let f of h.ndjson())f=Ft(f),f.hash!==void 0?yield aFe(f):l&&l(f.bytes||0,f.name)}return e}),oFe=(r,e,t)=>e?[void 0,sFe(r,e,t)]:[t,void 0],sFe=(r,e,t)=>{let n=0,i=e.length;return({loaded:o,total:s})=>{let a=Math.floor(o/s*r);for(;n<i;){let{start:c,end:u,name:l}=e[n];if(a<u){t(a-c,l);break}else t(u-c,l),n+=1}}};function aFe({name:r,hash:e,size:t,mode:n,mtime:i,mtimeNsecs:o}){let s={path:r,cid:$.parse(e),size:parseInt(t)};return n!=null&&(s.mode=parseInt(n,8)),i!=null&&(s.mtime={secs:i,nsecs:o||0}),s}function Yce(r){let e=m_(r);return K(()=>{async function t(n,i={}){return await _r(e(Zg(n),i))}return t})(r)}var Xce=K(r=>{async function*e(t,n={}){yield*(await r.post("cat",{signal:n.signal,searchParams:W({arg:t.toString(),...n}),headers:n.headers})).iterator()}return e});var Qce=K(r=>async(t={})=>(await r.post("commands",{signal:t.signal,searchParams:W(t),headers:t.headers})).json());var Zce=K(r=>async(t,n={})=>(await(await r.post("dns",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers})).json()).Path);var Jce=K(r=>()=>{let e=new URL(r.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}});var e0e=K(r=>{async function*e(t,n={}){let i={arg:`${t instanceof Uint8Array?$.decode(t):t}`,...n};i.compressionLevel&&(i["compression-level"]=i.compressionLevel,delete i.compressionLevel),yield*(await r.post("get",{signal:n.signal,searchParams:W(i),headers:n.headers})).iterator()}return e});var g_=K(r=>{async function e(t={}){let i=await(await r.post("id",{signal:t.signal,searchParams:W({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),o={...Ft(i)};return o.id=Be(o.id),o.addresses&&(o.addresses=o.addresses.map(s=>Ee(s))),o}return e});var t0e=r=>{let e=g_(r);async function t(n={}){let i=await e(n);return!!(i&&i.addresses&&i.addresses.length)}return t};var r0e=K((r,e)=>{async function*t(n,i={}){let o=`${n instanceof Uint8Array?$.decode(n):n}`;async function s(c){let u=c.Hash;if(u.includes("/")){let d=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await c_(e)(d)).cid}else u=$.parse(u);let l={name:c.Name,path:o+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:cFe(c)};return c.Mode&&(l.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(l.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(l.mtime.nsecs=c.MtimeNsecs)),l}let a=await r.post("ls",{signal:i.signal,searchParams:W({arg:o,...i}),headers:i.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield s(c);return}yield*u.map(s)}}return t});function cFe(r){switch(r.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var n0e=K(r=>{async function e(t={}){let n=await r.post("dns",{signal:t.signal,searchParams:W(t),headers:t.headers});return Ft(await n.json())}return e});var i0e=K(r=>{async function*e(t,n={}){yield*(await r.post("ping",{signal:n.signal,searchParams:W({arg:`${t}`,...n}),headers:n.headers,transform:Ft})).ndjson()}return e});var o0e=K(r=>{async function e(t,n={}){let i=await r.post("resolve",{signal:n.signal,searchParams:W({arg:t,...n}),headers:n.headers}),{Path:o}=await i.json();return o}return e});var s0e=L(fe(),1),a0e=K(r=>async(t={})=>{throw(0,s0e.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var c0e=K(r=>{async function e(t={}){await(await r.post("shutdown",{signal:t.signal,searchParams:W(t),headers:t.headers})).text()}return e});var u0e=K(r=>{async function e(t={}){let n=await r.post("version",{signal:t.signal,searchParams:W(t),headers:t.headers});return{...Ft(await n.json()),"ipfs-http-client":"1.0.0"}}return e});var yFe=L(DN(),1),wFe=L(NN(),1);function h0e(r={}){let e={name:bn.name,code:bn.code,encode:u=>u,decode:u=>u},t=Object.values(vc);(r.ipld&&r.ipld.bases?r.ipld.bases:[]).forEach(u=>t.push(u));let n=new i5({bases:t,loadBase:r.ipld&&r.ipld.loadBase}),i=Object.values(um);[$t,_c,Fd,Rh,e].concat(r.ipld&&r.ipld.codecs||[]).forEach(u=>i.push(u));let o=new o5({codecs:i,loadCodec:r.ipld&&r.ipld.loadCodec}),s=Object.values(cm);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach(u=>s.push(u));let a=new s5({hashers:s,loadHasher:r.ipld&&r.ipld.loadHasher});return{add:Yce(r),addAll:m_(r),bitswap:cae(r),block:Mae(r),bootstrap:$ae(r),cat:Xce(r),commands:Qce(r),config:Qae(r),dag:n1e(o,r),dht:l1e(r),diag:p1e(r),dns:Zce(r),files:R1e(r),get:e0e(r),getEndpointConfig:Jce(r),id:g_(r),isOnline:t0e(r),key:F1e(r),log:$1e(r),ls:r0e(r),mount:n0e(r),name:X1e(r),object:cce(o,r),pin:Ace(r),ping:i0e(r),pubsub:Lce(r),refs:Mce(r),repo:Vce(r),resolve:o0e(r),start:a0e(r),stats:qce(r),stop:c0e(r),swarm:Wce(r),version:u0e(r),bases:n,codecs:o,hashers:a}}var O0e=L(require("net"),1);var D0e=L(w0e(),1);function y_(r){return this.subnetMask<r.subnetMask?!1:this.mask(r.subnetMask)===r.mask()}function w_(r){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===r&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}var f5=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,BN=/\/\d{1,2}$/;var Ci=class extends Error{constructor(e,t){super(e),this.name="AddressError",t!==null&&(this.parseMessage=t)}};var h5=L(MN(),1),U3=L(G7(),1),ts=class r{constructor(e){this.groups=4,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=w_(32),this.isInSubnet=y_,this.address=e;let t=BN.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>32)throw new Ci("Invalid subnet mask.");e=e.replace(BN,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new r(e),!0}catch{return!1}}parse(e){let t=e.split(".");if(!e.match(f5))throw new Ci("Invalid IPv4 address.");return t}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){let t=e.replace(/:/g,"").padStart(8,"0"),n=[],i;for(i=0;i<8;i+=2){let o=t.slice(i,i+2);n.push(parseInt(o,16))}return new r(n.join("."))}static fromInteger(e){return r.fromHex(e.toString(16))}static fromArpa(e){let n=e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new r(n)}toHex(){return this.parsedAddress.map(e=>(0,U3.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){let e=[],t;for(t=0;t<4;t+=2){let n=(0,U3.sprintf)("%02x%02x",parseInt(this.parsedAddress[t],10),parseInt(this.parsedAddress[t+1],10));e.push((0,U3.sprintf)("%x",parseInt(n,16)))}return e.join(":")}bigInteger(){return new h5.BigInteger(this.parsedAddress.map(e=>(0,U3.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new h5.BigInteger(this.mask()+"0".repeat(32-this.subnetMask),2)}startAddress(){return r.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new h5.BigInteger("1");return r.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new h5.BigInteger(this.mask()+"1".repeat(32-this.subnetMask),2)}endAddress(){return r.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new h5.BigInteger("1");return r.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return r.fromInteger(parseInt(e.toString(),10))}mask(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}reverseForm(e){e||(e={});let t=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?t:(0,U3.sprintf)("%s.in-addr.arpa.",t)}isMulticast(){return this.isInSubnet(new r("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(32,"0")}groupForV6(){let e=this.parsedAddress;return this.address.replace(f5,(0,U3.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}};var x0e={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},UN={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},FN=/([^0-9a-f:/%])/gi,VN=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,zN=/\/\d{1,3}(?=%|$)/,qN=/%.*$/,S0e=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),T0e=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);var A0e=L(G7(),1);function xFe(r){return r.replace(/^(0+)/,'<span class="zero">$1</span>')}function v_(r,e=0){return r.split(":").map((n,i)=>/group-v4/.test(n)?n:(0,A0e.sprintf)('<span class="hover-group group-%d">%s</span>',i+e,xFe(n)))}var V3=L(G7(),1);function KN(r){return(0,V3.sprintf)("(%s)",r.join("|"))}function $N(r){return r.length<4?(0,V3.sprintf)("0{0,%d}%s",4-r.length,r):r}var jN="[^A-Fa-f0-9:]";function E_(r){let e=[];r.forEach((n,i)=>{parseInt(n,16)===0&&e.push(i)});let t=e.map(n=>r.map((i,o)=>{if(o===n){let s=o===0||o===7?":":"";return KN([$N(i),s])}return $N(i)}).join(":"));return t.push(r.map($N).join(":")),KN(t)}function GN(r,e,t){let n=e?"":":",i=t?"":":",o=[];!e&&!t&&o.push("::"),e&&t&&o.push(""),(t&&!e||!t&&e)&&o.push(":"),o.push((0,V3.sprintf)("%s(:0{1,4}){1,%d}",n,r-1)),o.push((0,V3.sprintf)("(0{1,4}:){1,%d}%s",r-1,i)),o.push((0,V3.sprintf)("(0{1,4}:){%d}0{1,4}",r-1));for(let s=1;s<r-1;s++)for(let a=1;a<r-s;a++)o.push((0,V3.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",a,r-a-s-1));return KN(o)}var Ri=L(MN(),1),ki=L(G7(),1);function x_(r){if(!r)throw new Error("Assertion failed.")}function SFe(r){let e=/(\d+)(\d{3})/;for(;e.test(r);)r=r.replace(e,"$1,$2");return r}function TFe(r){return r=r.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),r=r.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),r}function IFe(r,e){let t=[],n=[],i;for(i=0;i<r.length;i++)i<e[0]?t.push(r[i]):i>e[1]&&n.push(r[i]);return t.concat(["compact"]).concat(n)}function R0e(r){return(0,ki.sprintf)("%04x",parseInt(r,16))}function k0e(r){return r&255}var H7=class r{constructor(e,t){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=y_,this.isCorrect=w_(128),t===void 0?this.groups=8:this.groups=t,this.address=e;let n=zN.exec(e);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>128)throw new Ci("Invalid subnet mask.");e=e.replace(zN,"")}else if(/\//.test(e))throw new Ci("Invalid subnet mask.");let i=qN.exec(e);i&&(this.zone=i[0],e=e.replace(qN,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new r(e),!0}catch{return!1}}static fromBigInteger(e){let t=e.toString(16).padStart(32,"0"),n=[],i;for(i=0;i<8;i++)n.push(t.slice(i*4,(i+1)*4));return new r(n.join(":"))}static fromURL(e){let t,n=null,i;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(i=T0e.exec(e),i===null)return{error:"failed to parse address with port",address:null,port:null};t=i[1],n=i[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),i=S0e.exec(e),i===null)return{error:"failed to parse address from URL",address:null,port:null};t=i[1]}else t=e;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new r(t),port:n}}static fromAddress4(e){let t=new ts(e),n=128-(32-t.subnetMask);return new r(`::ffff:${t.correctForm()}/${n}`)}static fromArpa(e){let t=e.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(t.length!==63)throw new Ci("Invalid 'ip6.arpa' form.");let i=t.split(".").reverse();for(let o=n;o>0;o--){let s=o*4;i.splice(s,0,":")}return t=i.join(""),new r(t)}microsoftTranscription(){return(0,ki.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){let t=128-this.subnetMask,n=Math.abs(e-128),i=t-n;return i<0?"0":SFe(new Ri.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new Ri.BigInteger(this.mask()+"0".repeat(128-this.subnetMask),2)}startAddress(){return r.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new Ri.BigInteger("1");return r.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new Ri.BigInteger(this.mask()+"1".repeat(128-this.subnetMask),2)}endAddress(){return r.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new Ri.BigInteger("1");return r.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=x0e[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"}getType(){for(let e of Object.keys(UN))if(this.isInSubnet(new r(e)))return UN[e];return"Global unicast"}getBits(e,t){return new Ri.BigInteger(this.getBitsBase2(e,t),2)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}getBitsBase16(e,t){let n=t-e;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,t).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,128)}reverseForm(e){e||(e={});let t=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?n:(0,ki.sprintf)("%s.ip6.arpa.",n):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e,t=[],n=0,i=[];for(e=0;e<this.parsedAddress.length;e++){let a=parseInt(this.parsedAddress[e],16);a===0&&n++,a!==0&&n>0&&(n>1&&i.push([e-n,e-1]),n=0)}n>1&&i.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let o=i.map(a=>a[1]-a[0]+1);if(i.length>0){let a=o.indexOf(Math.max(...o));t=IFe(this.parsedAddress,i[a])}else t=this.parsedAddress;for(e=0;e<t.length;e++)t[e]!=="compact"&&(t[e]=parseInt(t[e],16).toString(16));let s=t.join(":");return s=s.replace(/^compact$/,"::"),s=s.replace(/^compact|compact$/,":"),s=s.replace(/compact/,""),s}binaryZeroPad(){return this.bigInteger().toString(2).padStart(128,"0")}parse4in6(e){let t=e.split(":"),i=t.slice(-1)[0].match(f5);if(i){this.parsedAddress4=i[0],this.address4=new ts(this.parsedAddress4);for(let o=0;o<this.address4.groups;o++)if(/^0[0-9]+/.test(this.address4.parsedAddress[o]))throw new Ci("IPv4 addresses can't have leading zeroes.",e.replace(f5,this.address4.parsedAddress.map(TFe).join(".")));this.v4=!0,t[t.length-1]=this.address4.toGroup6(),e=t.join(":")}return e}parse(e){e=this.parse4in6(e);let t=e.match(FN);if(t)throw new Ci((0,ki.sprintf)("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),e.replace(FN,'<span class="parse-error">$1</span>'));let n=e.match(VN);if(n)throw new Ci((0,ki.sprintf)("Address failed regex: %s",n.join("")),e.replace(VN,'<span class="parse-error">$1</span>'));let i=[],o=e.split("::");if(o.length===2){let s=o[0].split(":"),a=o[1].split(":");s.length===1&&s[0]===""&&(s=[]),a.length===1&&a[0]===""&&(a=[]);let c=this.groups-(s.length+a.length);if(!c)throw new Ci("Error parsing groups");this.elidedGroups=c,this.elisionBegin=s.length,this.elisionEnd=s.length+this.elidedGroups,i=i.concat(s);for(let u=0;u<c;u++)i.push("0");i=i.concat(a)}else if(o.length===1)i=e.split(":"),this.elidedGroups=0;else throw new Ci("Too many :: groups found");if(i=i.map(s=>(0,ki.sprintf)("%x",parseInt(s,16))),i.length!==this.groups)throw new Ci("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(R0e).join(":")}decimal(){return this.parsedAddress.map(e=>(0,ki.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new Ri.BigInteger(this.parsedAddress.map(R0e).join(""),16)}to4(){let e=this.binaryZeroPad().split("");return ts.fromHex(new Ri.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){let e=this.to4(),n=new r(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+e.address}inspectTeredo(){let e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new Ri.BigInteger("ffff",16)).toString(),n=ts.fromHex(this.getBitsBase16(32,64)),i=ts.fromHex(this.getBits(96,128).xor(new Ri.BigInteger("ffffffff",16)).toString(16)),o=this.getBits(64,80),s=this.getBitsBase2(64,80),a=o.testBit(15),c=o.testBit(14),u=o.testBit(8),l=o.testBit(9),d=new Ri.BigInteger(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:(0,ki.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:n.address,client4:i.address,flags:s,coneNat:a,microsoft:{reserved:c,universalLocal:l,groupIndividual:u,nonce:d},udpPort:t}}inspect6to4(){let e=this.getBitsBase16(0,16),t=ts.fromHex(this.getBitsBase16(16,48));return{prefix:(0,ki.sprintf)("%s",e.slice(0,4)),gateway:t.address}}to6to4(){if(!this.is4())return null;let e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new r(e)}toByteArray(){let e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(k0e)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(k0e))}static fromUnsignedByteArray(e){let t=new Ri.BigInteger("256",10),n=new Ri.BigInteger("0",10),i=new Ri.BigInteger("1",10);for(let o=e.length-1;o>=0;o--)n=n.add(i.multiply(new Ri.BigInteger(e[o].toString(10),10))),i=i.multiply(t);return r.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new r("2001::/32"))}is6to4(){return this.isInSubnet(new r("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(e){return e===void 0?e="":e=(0,ki.sprintf)(":%s",e),(0,ki.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);let t=this.correctForm;return e.v4&&(t=this.to4in6),e.className?(0,ki.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):(0,ki.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))}group(){if(this.elidedGroups===0)return v_(this.address).join(":");x_(typeof this.elidedGroups=="number"),x_(typeof this.elisionBegin=="number");let e=[],[t,n]=this.address.split("::");t.length?e.push(...v_(t)):e.push("");let i=["hover-group"];for(let o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)i.push((0,ki.sprintf)("group-%d",o));return e.push((0,ki.sprintf)('<span class="%s"></span>',i.join(" "))),n.length?e.push(...v_(n,this.elisionEnd)):e.push(""),this.is4()&&(x_(this.address4 instanceof ts),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let t=[],n=new r(this.correctForm());if(n.elidedGroups===0)t.push(E_(n.parsedAddress));else if(n.elidedGroups===8)t.push(GN(8));else{let i=n.address.split("::");i[0].length&&t.push(E_(i[0].split(":"))),x_(typeof n.elidedGroups=="number"),t.push(GN(n.elidedGroups,i[0].length!==0,i[1].length!==0)),i[1].length&&t.push(E_(i[1].split(":"))),t=[t.join(":")]}return e||(t=["(?=^|",jN,"|[^\\w\\:])(",...t,")(?=[^\\w\\:]|",jN,"|$)"]),t.join("")}regularExpression(e=!1){return new RegExp(this.regularExpressionString(e),"i")}};var AFe=z("libp2p:ip-port-to-multiaddr"),HN={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function S_(r,e){if(typeof r!="string")throw new X(`invalid ip provided: ${r}`,HN.ERR_INVALID_IP_PARAMETER);if(typeof e=="string"&&(e=parseInt(e)),isNaN(e))throw new X(`invalid port provided: ${e}`,HN.ERR_INVALID_PORT_PARAMETER);try{return new ts(r),Br(`/ip4/${r}/tcp/${e}`)}catch{}try{let t=new H7(r);return t.is4()?Br(`/ip4/${t.to4().correctForm()}/tcp/${e}`):Br(`/ip6/${r}/tcp/${e}`)}catch{let n=`invalid ip:port for creating a multiaddr: ${r}:${e}`;throw AFe.error(n),new X(n,HN.ERR_INVALID_IP)}}var WN=L(require("os"),1),P0e=L(require("path"),1),CFe={ip4:"IPv4",ip6:"IPv6"};function m5(r,e={}){let t=r.getPath();return t!=null?WN.default.platform()==="win32"?{path:P0e.default.join("\\\\.\\pipe\\",t)}:{path:t}:{...r.toOptions(),...e}}function YN(r,e,t){let n=i=>Br(`/${r}/${i}/tcp/${t}`);return(RFe(e)?PFe(CFe[r]):[e]).map(n)}function RFe(r){return["0.0.0.0","::"].includes(r)}var kFe=WN.default.networkInterfaces();function PFe(r){let e=[];for(let[,t]of Object.entries(kFe))if(t!=null)for(let n of t)n.family===r&&e.push(n.address);return e}var Ga=z("libp2p:tcp:socket"),T_=(r,e)=>{var h,f;let t=e.metrics,n=e.metricPrefix??"",i=e.socketInactivityTimeout??3e5,o=e.socketCloseTimeout??2e3;((h=e.listeningAddr)==null?void 0:h.getPath())!=null&&(e.remoteAddr=e.listeningAddr),((f=e.remoteAddr)==null?void 0:f.getPath())!=null&&(e.localAddr=e.remoteAddr);let s;if(e.remoteAddr!=null)s=e.remoteAddr;else{if(r.remoteAddress==null||r.remotePort==null)throw new X("Could not determine remote address or port","ERR_NO_REMOTE_ADDRESS");s=S_(r.remoteAddress,r.remotePort)}let a=m5(s),c=a.path??`${a.host??""}:${a.port??""}`,{sink:u,source:l}=D0e.default.duplex(r);r.setTimeout(i,()=>{Ga("%s socket read timeout",c),t==null||t.increment({[`${n}timeout`]:!0});let m;r.readable&&(m=new X("Socket read timeout","ERR_SOCKET_READ_TIMEOUT")),r.destroy(m)}),r.once("close",()=>{Ga("%s socket close",c),t==null||t.increment({[`${n}close`]:!0}),d.timeline.close==null&&(d.timeline.close=Date.now())}),r.once("end",()=>{Ga("%s socket end",c),t==null||t.increment({[`${n}end`]:!0})});let d={async sink(m){try{await u(m)}catch(w){w.type!=="aborted"&&Ga(w)}r.end()},source:l,remoteAddr:s,timeline:{open:Date.now()},async close(){if(r.destroyed){Ga("%s socket was already destroyed when trying to close",c);return}Ga("%s closing socket",c),await new Promise((m,w)=>{let _=Date.now(),E;r.once("close",()=>{Ga("%s socket closed",c),E!==void 0&&clearTimeout(E),m()}),r.once("error",S=>{Ga("%s socket error",c,S),d.timeline.close==null&&(d.timeline.close=Date.now()),r.destroyed&&E!==void 0&&clearTimeout(E),w(S)}),r.setTimeout(o),r.end(),r.writableLength>0?(E=setTimeout(()=>{r.destroyed?(Ga("%s is already destroyed",c),m()):(Ga("%s socket close timeout after %dms, destroying it manually",c,Date.now()-_),r.destroy(new X("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT")))},o).unref(),r.once("drain",()=>{Ga("%s socket drained",c),r.destroy()})):r.destroy()})}};return d};var N0e=L(require("net"),1);var rs=z("libp2p:tcp:listener");async function XN(r){try{await r.close()}catch(e){rs.error("an error occurred closing the connection",e)}}var OFe=1,LFe=0,I_=class extends at{constructor(e){if(super(),this.context=e,this.connections=new Set,this.status={started:!1},e.keepAlive=e.keepAlive??!0,this.addr="unknown",this.server=N0e.default.createServer(e,this.onSocket.bind(this)),e.maxConnections!==void 0&&(this.server.maxConnections=e.maxConnections),e.closeServerOnMaxConnections!=null&&e.closeServerOnMaxConnections.closeAbove<e.closeServerOnMaxConnections.listenBelow)throw Error("closeAbove must be >= listenBelow");this.server.on("listening",()=>{var t,n;if(e.metrics!=null){let i=this.server.address();i==null?this.addr="unknown":typeof i=="string"?this.addr=i:this.addr=`${i.address}:${i.port}`,(t=e.metrics)==null||t.registerMetricGroup("libp2p_tcp_inbound_connections_total",{label:"address",help:"Current active connections in TCP listener",calculate:()=>({[this.addr]:this.connections.size})}),this.metrics={status:e.metrics.registerMetricGroup("libp2p_tcp_listener_status_info",{label:"address",help:"Current status of the TCP listener socket"}),errors:e.metrics.registerMetricGroup("libp2p_tcp_listener_errors_total",{label:"address",help:"Total count of TCP listener errors by type"}),events:e.metrics.registerMetricGroup("libp2p_tcp_listener_events_total",{label:"address",help:"Total count of TCP listener events by type"})},(n=this.metrics)==null||n.status.update({[this.addr]:OFe})}this.dispatchEvent(new be("listening"))}).on("error",t=>{var n;(n=this.metrics)==null||n.errors.increment({[`${this.addr} listen_error`]:!0}),this.dispatchEvent(new be("error",{detail:t}))}).on("close",()=>{var t;(t=this.metrics)==null||t.status.update({[this.addr]:LFe}),this.dispatchEvent(new be("close"))})}onSocket(e){var n,i;e.on("error",o=>{var s;rs("socket error",o),(s=this.metrics)==null||s.events.increment({[`${this.addr} error`]:!0})});let t;try{t=T_(e,{listeningAddr:this.status.started?this.status.listeningAddr:void 0,socketInactivityTimeout:this.context.socketInactivityTimeout,socketCloseTimeout:this.context.socketCloseTimeout,metrics:(n=this.metrics)==null?void 0:n.events,metricPrefix:`${this.addr} `})}catch(o){rs.error("inbound connection failed",o),(i=this.metrics)==null||i.errors.increment({[`${this.addr} inbound_to_connection`]:!0});return}rs("new inbound connection %s",t.remoteAddr);try{this.context.upgrader.upgradeInbound(t).then(o=>{rs("inbound connection upgraded %s",t.remoteAddr),this.connections.add(t),e.once("close",()=>{this.connections.delete(t),this.context.closeServerOnMaxConnections!=null&&this.connections.size<this.context.closeServerOnMaxConnections.listenBelow&&this.netListen().catch(s=>{var a,c;rs.error("error attempting to listen server once connection count under limit",s),(c=(a=this.context.closeServerOnMaxConnections)==null?void 0:a.onListenError)==null||c.call(a,s)})}),this.context.handler!=null&&this.context.handler(o),this.context.closeServerOnMaxConnections!=null&&this.connections.size>=this.context.closeServerOnMaxConnections.closeAbove&&this.netClose(),this.dispatchEvent(new be("connection",{detail:o}))}).catch(async o=>{var s;rs.error("inbound connection failed",o),(s=this.metrics)==null||s.errors.increment({[`${this.addr} inbound_upgrade`]:!0}),await XN(t)}).catch(o=>{rs.error("closing inbound connection failed",o)})}catch(o){rs.error("inbound connection failed",o),XN(t).catch(s=>{var a;rs.error("closing inbound connection failed",s),(a=this.metrics)==null||a.errors.increment({[`${this.addr} inbound_closing_failed`]:!0})})}}getAddrs(){if(!this.status.started)return[];let e=[],t=this.server.address(),{listeningAddr:n,peerId:i}=this.status;if(t==null)return[];if(typeof t=="string")e=[n];else try{n.toString().startsWith("/ip4")?e=e.concat(YN("ip4",t.address,t.port)):t.family==="IPv6"&&(e=e.concat(YN("ip6",t.address,t.port)))}catch(o){rs.error("could not turn %s:%s into multiaddr",t.address,t.port,o)}return e.map(o=>i!=null?o.encapsulate(`/p2p/${i}`):o)}async listen(e){if(this.status.started)throw Error("server is already listening");let t=e.getPeerId(),n=t==null?e.decapsulateCode(421):e,{backlog:i}=this.context;this.status={started:!0,listeningAddr:n,peerId:t,netConfig:m5(n,{backlog:i})},await this.netListen()}async close(){await Promise.all(Array.from(this.connections.values()).map(async e=>{await XN(e)})),this.netClose()}async netListen(){if(!this.status.started||this.server.listening)return;let e=this.status.netConfig;await new Promise((t,n)=>{this.server.once("error",n),this.server.listen(e,t)}),rs("Listening on %s",this.server.address())}netClose(){!this.status.started||!this.server.listening||(rs("Closing server on %s",this.server.address()),this.server.close())}};var g5=Symbol.for("@libp2p/transport");var Au;(function(r){r[r.FATAL_ALL=0]="FATAL_ALL",r[r.NO_FATAL=1]="NO_FATAL"})(Au||(Au={}));var o0=z("libp2p:tcp"),ZN=class{constructor(e,t={}){this.opts=t,this.components=e,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_tcp_dialer_events_total",{label:"event",help:"Total count of TCP dialer events by type"})})}get[g5](){return!0}get[Symbol.toStringTag](){return"@libp2p/tcp"}async dial(e,t){var a,c,u,l;t.keepAlive=t.keepAlive??!0;let n=await this._connect(e,t);n.on("error",d=>{o0("socket error",d)});let i=T_(n,{remoteAddr:e,socketInactivityTimeout:this.opts.outboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout,metrics:(a=this.metrics)==null?void 0:a.dialerEvents}),o=()=>{i.close().catch(d=>{o0.error("Error closing maConn after abort",d)})};(c=t.signal)==null||c.addEventListener("abort",o,{once:!0}),o0("new outbound connection %s",i.remoteAddr);let s=await t.upgrader.upgradeOutbound(i);if(o0("outbound connection %s upgraded",i.remoteAddr),(u=t.signal)==null||u.removeEventListener("abort",o),((l=t.signal)==null?void 0:l.aborted)===!0)throw s.close().catch(d=>{o0.error("Error closing conn after abort",d)}),new Rc;return s}async _connect(e,t){var n;if(((n=t.signal)==null?void 0:n.aborted)===!0)throw new Rc;return await new Promise((i,o)=>{let s=Date.now(),a=m5(e),c=a.path??`${a.host??""}:${a.port}`;o0("dialing %j",a);let u=O0e.default.connect(a),l=w=>{var _;w.message=`connection error ${c}: ${w.message}`,(_=this.metrics)==null||_.dialerEvents.increment({error:!0}),m(w)},d=()=>{var _;o0("connection timeout %s",c),(_=this.metrics)==null||_.dialerEvents.increment({timeout:!0});let w=new X(`connection timeout after ${Date.now()-s}ms`,"ERR_CONNECT_TIMEOUT");u.emit("error",w)},h=()=>{var w;o0("connection opened %j",a),(w=this.metrics)==null||w.dialerEvents.increment({connect:!0}),m()},f=()=>{var w;o0("connection aborted %j",a),(w=this.metrics)==null||w.dialerEvents.increment({abort:!0}),u.destroy(),m(new Rc)},m=w=>{if(u.removeListener("error",l),u.removeListener("timeout",d),u.removeListener("connect",h),t.signal!=null&&t.signal.removeEventListener("abort",f),w!=null){o(w);return}i(u)};u.on("error",l),u.on("timeout",d),u.on("connect",h),t.signal!=null&&t.signal.addEventListener("abort",f)})}createListener(e){return new I_({...e,maxConnections:this.opts.maxConnections,backlog:this.opts.backlog,closeServerOnMaxConnections:this.opts.closeServerOnMaxConnections,socketInactivityTimeout:this.opts.inboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout,metrics:this.components.metrics})}filter(e){return e=Array.isArray(e)?e:[e],e.filter(t=>t.protoCodes().includes(290)?!1:t.protoCodes().includes(400)?!0:h2.matches(t.decapsulateCode(421)))}};function L0e(r={}){return(e={})=>new ZN(e,r)}var s2e=L(R_(),1);var dO=L(require("os"),1);var Y7=z("libp2p:mdns:query");function Z0e(r,e,t){let n=()=>{Y7("query",e),r.query({questions:[{name:e,type:"PTR"}]})};return n(),setInterval(n,t)}function J0e(r,e,t){if(r.answers==null)return;let n={a:[],aaaa:[]};if(r.answers.forEach(c=>{switch(c.type){case"PTR":n.ptr=c;break;case"SRV":n.srv=c;break;case"TXT":n.txt=c;break;case"A":n.a.push(c);break;case"AAAA":n.aaaa.push(c);break;default:break}}),n.ptr==null||n.ptr.name!==t||n.txt==null||n.srv==null)return;let i=n.txt.data[0].toString(),o=n.srv.data.port,s=[];if(n.a.forEach(c=>{let u=Ee(`/ip4/${c.data}/tcp/${o}`);s.some(l=>l.equals(u))||s.push(u)}),n.aaaa.forEach(c=>{let u=Ee(`/ip6/${c.data}/tcp/${o}`);s.some(l=>l.equals(u))||s.push(u)}),e.toString()===i)return;let a=Be(i);return Y7("peer found %p",a),{id:a,multiaddrs:s,protocols:[]}}function e2e(r,e,t,n,i,o){if(!o){Y7("not responding to mDNS query as broadcast mode is false");return}let s=n.reduce((a,c)=>(c.decapsulateCode(Ht("p2p").code).isThinWaistAddress()&&a.push(c.toOptions()),a),[]);if(s.length===0){Y7("no thin waist addresses present, cannot respond to query");return}if(r.questions[0]!=null&&r.questions[0].name===i){let a=[];a.push({name:i,type:"PTR",class:"IN",ttl:120,data:t.toString()+"."+i});let c=s[0].port;a.push({name:t.toString()+"."+i,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:c,target:dO.default.hostname()}}),a.push({name:t.toString()+"."+i,type:"TXT",class:"IN",ttl:120,data:t.toString()}),s.forEach(u=>{[4,6].includes(u.family)&&a.push({name:dO.default.hostname(),type:u.family===4?"A":"AAAA",class:"IN",ttl:120,data:u.host})}),Y7("responding to query"),e.respond(a)}}var fO=L(require("os"),1),n2e=L(R_(),1);var nVe="_ipfs-discovery._udp",g0=`${nVe}.local`,t2e="224.0.0.251",r2e=5353;var k_=z("libp2p:mdns:compat:responder"),P_=class{constructor(e){this.components=e,this._onQuery=this._onQuery.bind(this)}start(){this._mdns=(0,n2e.default)(),this._mdns.on("query",this._onQuery)}_onQuery(e,t){let n=this.components.addressManager.getAddresses().reduce((a,c)=>(c=c.decapsulateCode(Ht("p2p").code),c.isThinWaistAddress()&&a.push(c.toOptions()),a),[]);if(n.length===0){k_("no tcp addresses configured so cannot respond to mDNS query");return}if(!(e.questions??[]).some(a=>a.name===g0))return;k_.trace("got query",e,t);let o=[],s=`${this.components.peerId.toString()}.${g0}`;o.push({name:g0,type:"PTR",class:"IN",ttl:120,data:s}),o.push({name:s,type:"TXT",class:"IN",ttl:120,data:[Buffer.from(this.components.peerId.toString())]}),n.forEach(a=>{[4,6].includes(a.family)&&(o.push({name:s,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:a.port,target:fO.default.hostname()}}),o.push({name:fO.default.hostname(),type:a.family===4?"A":"AAAA",class:"IN",ttl:120,data:a.host}))}),this._mdns!=null&&(k_.trace("responding to query"),k_.trace("query answers",o),this._mdns.respond(o,t))}stop(){if(this._mdns!=null)return this._mdns.removeListener("query",this._onQuery),new Promise(e=>{this._mdns!=null?this._mdns.destroy(e):e()})}};var o2e=L(R_(),1);var X7=z("libp2p:mdns:compat:utils");function i2e(r,e){if(r.find(c=>c.type==="PTR"&&c.name===g0)==null)return;X7.trace("got response",g0);let n=r.find(c=>c.type==="TXT");if(n==null||n.type!=="TXT"){X7("missing TXT record in response");return}let i;try{i=n.data[0].toString()}catch(c){X7("failed to extract peer ID from TXT record data",n,c);return}let o;try{o=Be(i)}catch(c){X7("failed to create peer ID from TXT record data",i,c);return}if(e.equals(o)){X7("ignoring reply to myself");return}let s=[],a={A:{},AAAA:{}};return r.forEach(c=>{c.type==="A"&&(a.A[c.name]=c.data),c.type==="AAAA"&&(a.AAAA[c.name]=c.data)}),r.forEach(c=>{c.type==="SRV"&&(a.A[c.data.target]!=null?s.push(Ee(`/ip4/${a.A[c.data.target]}/tcp/${c.data.port}/p2p/${o.toString()}`)):a.AAAA[c.data.target]!=null?s.push(Ee(`/ip6/${a.AAAA[c.data.target]}/tcp/${c.data.port}/p2p/${o.toString()}`)):s.push(Ee(`/dnsaddr/${c.data.target}/tcp/${c.data.port}/p2p/${o.toString()}`)))}),{id:o,multiaddrs:s,protocols:[]}}var rzt=Symbol.for("@libp2p/peer-discovery"),vo=Symbol.for("@libp2p/peer-discovery");var Q7=z("libp2p:mdns:compat:querier"),D_=class extends at{constructor(e,t={}){super();let{queryInterval:n,queryPeriod:i}=t;this.components=e,this._init={queryInterval:n??6e4,queryPeriod:Math.min(n??6e4,i??5e3)},this._onResponse=this._onResponse.bind(this)}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/go-mdns-querier"}isStarted(){return!!this._handle}start(){this._handle=iVe(()=>{let e=(0,o2e.default)({multicast:!1,interface:"0.0.0.0",port:0});return e.on("response",this._onResponse),e.query({id:oVe(),questions:[{name:g0,type:"PTR",class:"IN"}]},null,{address:t2e,port:r2e}),{stop:async()=>(e.removeListener("response",this._onResponse),await new Promise(t=>e.destroy(t)))}},{period:this._init.queryPeriod,interval:this._init.queryInterval})}_onResponse(e,t){Q7.trace("received mDNS query response");let n=e.answers??[],i=i2e(n,this.components.peerId);if(i==null){Q7("could not read peer data from query response");return}if(i.multiaddrs.length===0){Q7("could not parse multiaddrs from mDNS response");return}Q7("discovered peer in mDNS qeury response %p",i.id),this.dispatchEvent(new be("peer",{detail:i}))}async stop(){this._handle!=null&&await this._handle.stop()}};function iVe(r,e){let t,n,i=!1,o=()=>{t=r(),n=setTimeout(()=>{t!=null&&t.stop().catch(Q7),i||(n=setTimeout(o,e.interval)),t=null},e.period)};return o(),{async stop(){i=!0,clearTimeout(n),t!=null&&await t.stop()}}}var oVe=(()=>{let r=0;return()=>(r++,r===Number.MAX_SAFE_INTEGER&&(r=1),r)})();var N_=class extends at{constructor(e,t={}){super();let{queryPeriod:n,queryInterval:i}=t;this._started=!1,this._responder=new P_(e),this._querier=new D_(e,{queryInterval:i,queryPeriod:n}),this._querier.addEventListener("peer",o=>{this.dispatchEvent(new be("peer",{detail:o.detail}))})}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/go-mdns"}isStarted(){return this._started}async start(){this.isStarted()||(this._started=!0,await Promise.all([this._responder.start(),this._querier.start()]))}async stop(){this.isStarted()&&(this._started=!1,await Promise.all([this._responder.stop(),this._querier.stop()]))}};var O_=z("libp2p:mdns"),hO=class extends at{constructor(e,t={}){super(),this.components=e,this.broadcast=t.broadcast!==!1,this.interval=t.interval??1e3*10,this.serviceTag=t.serviceTag??"ipfs.local",this.ip=t.ip??"224.0.0.251",this.port=t.port??5353,this._queryInterval=null,this._onPeer=this._onPeer.bind(this),this._onMdnsQuery=this._onMdnsQuery.bind(this),this._onMdnsResponse=this._onMdnsResponse.bind(this),t.compat!==!1&&(this._goMdns=new N_(e,{queryPeriod:t.compatQueryPeriod,queryInterval:t.compatQueryInterval}),this._goMdns.addEventListener("peer",this._onPeer))}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/mdns"}isStarted(){return!!this.mdns}async start(){this.mdns==null&&(this.mdns=(0,s2e.default)({port:this.port,ip:this.ip}),this.mdns.on("query",this._onMdnsQuery),this.mdns.on("response",this._onMdnsResponse),this._queryInterval=Z0e(this.mdns,this.serviceTag,this.interval),this._goMdns!=null&&await this._goMdns.start())}_onMdnsQuery(e){this.mdns!=null&&(O_.trace("received incoming mDNS query"),e2e(e,this.mdns,this.components.peerId,this.components.addressManager.getAddresses(),this.serviceTag,this.broadcast))}_onMdnsResponse(e){O_.trace("received mDNS query response");try{let t=J0e(e,this.components.peerId,this.serviceTag);t!=null&&(O_("discovered peer in mDNS qeury response %p",t.id),this.dispatchEvent(new be("peer",{detail:t})))}catch(t){O_.error("Error processing peer response",t)}}_onPeer(e){this.mdns!=null&&this.dispatchEvent(new be("peer",{detail:e.detail}))}async stop(){var e,t;this.mdns!=null&&(this.mdns.removeListener("query",this._onMdnsQuery),this.mdns.removeListener("response",this._onMdnsResponse),(e=this._goMdns)==null||e.removeEventListener("peer",this._onPeer),this._queryInterval!=null&&(clearInterval(this._queryInterval),this._queryInterval=null),await Promise.all([(t=this._goMdns)==null?void 0:t.stop(),new Promise(n=>{this.mdns!=null?this.mdns.destroy(n):n()})]),this.mdns=void 0)}};function a2e(r={}){return e=>new hO(e,r)}var sle=L(require("os"),1);function sVe(r){let[e,t]=r[Symbol.asyncIterator]!=null?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}var c2e=sVe;function aVe(r){return r[Symbol.asyncIterator]!=null}function u2e(r){return(r==null?void 0:r.then)!=null}function cVe(r,e){let t=0;if(aVe(r))return async function*(){for await(let c of r){let u=e(c,t++);u2e(u)&&await u,yield c}}();let n=c2e(r),{value:i,done:o}=n.next();if(o===!0)return function*(){}();let s=e(i,t++);if(typeof(s==null?void 0:s.then)=="function")return async function*(){yield i;for await(let c of n){let u=e(c,t++);u2e(u)&&await u,yield c}}();let a=e;return function*(){yield i;for(let c of n)a(c,t++),yield c}()}var pO=cVe;var W_=L(x5(),1);var tle=L(x5(),1);function Pi(r){return r.replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_")}var K_=class{constructor(e,t){F(this,"counter");F(this,"label");F(this,"calculators");e=Pi(e);let n=Pi(t.help??e),i=this.label=Pi(t.label??e),o;if(this.calculators=[],(t==null?void 0:t.calculate)!=null){this.calculators.push(t.calculate);let s=this;o=async function(){await Promise.all(s.calculators.map(async a=>{let c=await a();Object.entries(c).forEach(([u,l])=>{this.inc({[i]:u},l)})}))}}this.counter=new tle.Counter({name:e,help:n,labelNames:[this.label],registers:t.registry!==void 0?[t.registry]:void 0,collect:o})}addCalculator(e){this.calculators.push(e)}increment(e){Object.entries(e).forEach(([t,n])=>{let i=typeof n=="number"?n:1;this.counter.inc({[this.label]:t},i)})}reset(){this.counter.reset()}};var rle=L(x5(),1);var j_=class{constructor(e,t){F(this,"counter");F(this,"calculators");e=Pi(e);let n=Pi(t.help??e),i=t.label!=null?[Pi(t.label)]:[],o;if(this.calculators=[],(t==null?void 0:t.calculate)!=null){this.calculators.push(t.calculate);let s=this;o=async function(){let c=(await Promise.all(s.calculators.map(async u=>u()))).reduce((u,l)=>u+l,0);this.inc(c)}}this.counter=new rle.Counter({name:e,help:n,labelNames:i,registers:t.registry!==void 0?[t.registry]:void 0,collect:o})}addCalculator(e){this.calculators.push(e)}increment(e=1){this.counter.inc(e)}reset(){this.counter.reset()}};var nle=L(x5(),1);var G_=class{constructor(e,t){F(this,"gauge");F(this,"label");F(this,"calculators");e=Pi(e);let n=Pi(t.help??e),i=this.label=Pi(t.label??e),o;if(this.calculators=[],(t==null?void 0:t.calculate)!=null){this.calculators.push(t.calculate);let s=this;o=async function(){await Promise.all(s.calculators.map(async a=>{let c=await a();Object.entries(c).forEach(([u,l])=>{this.set({[i]:u},l)})}))}}this.gauge=new nle.Gauge({name:e,help:n,labelNames:[this.label],registers:t.registry!==void 0?[t.registry]:void 0,collect:o})}addCalculator(e){this.calculators.push(e)}update(e){Object.entries(e).forEach(([t,n])=>{this.gauge.set({[this.label]:t},n)})}increment(e){Object.entries(e).forEach(([t,n])=>{let i=typeof n=="number"?n:1;this.gauge.inc({[this.label]:t},i)})}decrement(e){Object.entries(e).forEach(([t,n])=>{let i=typeof n=="number"?n:1;this.gauge.dec({[this.label]:t},i)})}reset(){this.gauge.reset()}timer(e){return this.gauge.startTimer({key:0})}};var ile=L(x5(),1);var H_=class{constructor(e,t){F(this,"gauge");F(this,"calculators");e=Pi(e);let n=Pi(t.help??e),i=t.label!=null?[Pi(t.label)]:[],o;if(this.calculators=[],(t==null?void 0:t.calculate)!=null){this.calculators.push(t.calculate);let s=this;o=async function(){let c=(await Promise.all(s.calculators.map(async u=>u()))).reduce((u,l)=>u+l,0);this.set(c)}}this.gauge=new ile.Gauge({name:e,help:n,labelNames:i,registers:t.registry!==void 0?[t.registry]:void 0,collect:o})}addCalculator(e){this.calculators.push(e)}update(e){this.gauge.set(e)}increment(e=1){this.gauge.inc(e)}decrement(e=1){this.gauge.dec(e)}reset(){this.gauge.reset()}timer(){return this.gauge.startTimer()}};var Ys=z("libp2p:prometheus-metrics"),Xs=new Map,dL=class{constructor(e){F(this,"transferStats");F(this,"registry");var t;this.registry=e==null?void 0:e.registry,(e==null?void 0:e.preserveExistingMetrics)!==!0&&(Ys("Clearing existing metrics"),Xs.clear(),(this.registry??W_.register).clear()),(e==null?void 0:e.collectDefaultMetrics)!==!1&&(Ys("Collecting default metrics"),(0,W_.collectDefaultMetrics)({...e==null?void 0:e.defaultMetrics,register:this.registry??((t=e==null?void 0:e.defaultMetrics)==null?void 0:t.register)})),this.transferStats=new Map,Ys("Collecting data transfer metrics"),this.registerCounterGroup("libp2p_data_transfer_bytes_total",{label:"protocol",calculate:()=>{let n={};for(let[i,o]of this.transferStats.entries())n[i]=o;return this.transferStats=new Map,n}}),Ys("Collecting memory metrics"),this.registerMetricGroup("nodejs_memory_usage_bytes",{label:"memory",calculate:()=>({...process.memoryUsage()})})}_incrementValue(e,t){let n=this.transferStats.get(e)??0;this.transferStats.set(e,n+t)}_track(e,t){let n=this,i=e.sink;e.sink=async function(a){await i(pO(a,c=>{n._incrementValue(`${t} sent`,c.byteLength)}))};let o=e.source;e.source=pO(o,s=>{n._incrementValue(`${t} received`,s.byteLength)})}trackMultiaddrConnection(e){this._track(e,"global")}trackProtocolStream(e,t){e.stat.protocol!=null&&this._track(e,e.stat.protocol)}registerMetric(e,t={}){if(e==null)throw new Error("Metric name is required");let n=Xs.get(e);if(Xs.has(e))return Ys("Reuse existing metric",e),t.calculate!=null&&n.addCalculator(t.calculate),Xs.get(e);if(Ys("Register metric",e),n=new H_(e,{registry:this.registry,...t}),Xs.set(e,n),t.calculate==null)return n}registerMetricGroup(e,t={}){if(e==null)throw new Error("Metric group name is required");let n=Xs.get(e);if(n!=null)return Ys("Reuse existing metric group",e),t.calculate!=null&&n.addCalculator(t.calculate),n;if(Ys("Register metric group",e),n=new G_(e,{registry:this.registry,...t}),Xs.set(e,n),t.calculate==null)return n}registerCounter(e,t={}){if(e==null)throw new Error("Counter name is required");let n=Xs.get(e);if(n!=null)return Ys("Reuse existing counter",e),t.calculate!=null&&n.addCalculator(t.calculate),Xs.get(e);if(Ys("Register counter",e),n=new j_(e,{registry:this.registry,...t}),Xs.set(e,n),t.calculate==null)return n}registerCounterGroup(e,t={}){if(e==null)throw new Error("Counter group name is required");let n=Xs.get(e);if(n!=null)return Ys("Reuse existing counter group",e),t.calculate!=null&&n.addCalculator(t.calculate),n;if(Ys("Register counter group",e),n=new K_(e,{registry:this.registry,...t}),Xs.set(e,n),t.calculate==null)return n}};function ole(r){return()=>new dL(r)}function ale(){let r={transports:[L0e()],peerDiscovery:[a2e()],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!0,description:`ipfs@${sle.default.hostname()}`}};return process.env.IPFS_MONITORING!=null&&(r.metrics=ole()),r}function b0(r){return r!=null&&typeof r.start=="function"&&typeof r.stop=="function"}var np=L(fe(),1);var Ot;(function(r){r.NOT_STARTED_YET="The libp2p node is not started yet",r.DHT_DISABLED="DHT is not available",r.PUBSUB_DISABLED="PubSub is not available",r.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",r.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",r.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",r.NOT_FOUND="Not found"})(Ot||(Ot={}));var ee;(function(r){r.DHT_DISABLED="ERR_DHT_DISABLED",r.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",r.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",r.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",r.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",r.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",r.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",r.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",r.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",r.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",r.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",r.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",r.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",r.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",r.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",r.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",r.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",r.ERR_DIALED_SELF="ERR_DIALED_SELF",r.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",r.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",r.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",r.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",r.ERR_INVALID_KEY="ERR_INVALID_KEY",r.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",r.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",r.ERR_INVALID_PEER="ERR_INVALID_PEER",r.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",r.ERR_NOT_FOUND="ERR_NOT_FOUND",r.ERR_TIMEOUT="ERR_TIMEOUT",r.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",r.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",r.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",r.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",r.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",r.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",r.ERR_FIND_SELF="ERR_FIND_SELF",r.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",r.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",r.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",r.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",r.ERR_INVALID_CMS="ERR_INVALID_CMS",r.ERR_MISSING_KEYS="ERR_MISSING_KEYS",r.ERR_NO_KEY="ERR_NO_KEY",r.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",r.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",r.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",r.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",r.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",r.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",r.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",r.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",r.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",r.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",r.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",r.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",r.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",r.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",r.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",r.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",r.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",r.ERR_INVALID_RECORD="ERR_INVALID_RECORD",r.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",r.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",r.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",r.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",r.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED"})(ee||(ee={}));var cle=L(fe(),1);async function*rp(r,e){yield*Ut(r,async t=>(await e.addressBook.add(t.id,t.multiaddrs),t))}function Y_(r){let e=new Set;return vt(r,t=>e.has(t.id.toString())?!1:(e.add(t.id.toString()),!0))}async function*X_(r,e=1){let t=0;for await(let n of r)t++,yield n;if(t<e)throw(0,cle.default)(new Error("not found"),"NOT_FOUND")}var dle=L(Dn(),1);var Z_=L(fL(),1),fle=require("events"),lle=z("libp2p:peer-routing"),Q_=class{constructor(e,t){this.components=e,this.routers=t.routers??[],this.refreshManagerInit=t.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||this.routers.length===0||this.timeoutId!=null||this.refreshManagerInit.enabled===!1||(this.timeoutId=(0,Z_.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){var e,t;if(this.abortController==null)try{this.abortController=new dle.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(e=fle.setMaxListeners)==null||e(1/0,this.abortController.signal)}catch{}await or(this.getClosestPeers(this.components.peerId.toBytes(),{signal:this.abortController.signal}))}catch(n){lle.error(n)}finally{(t=this.abortController)==null||t.clear(),this.abortController=void 0}}async stop(){var e;(0,Z_.clearDelayedInterval)(this.timeoutId),(e=this.abortController)==null||e.abort(),this.started=!1}async findPeer(e,t){if(this.routers.length===0)throw(0,np.default)(new Error("No peer routers available"),ee.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.peerId.toString())throw(0,np.default)(new Error("Should not try to find self"),ee.ERR_FIND_SELF);let n=await Ke(Or(...this.routers.map(i=>async function*(){try{yield await i.findPeer(e,t)}catch(o){lle.error(o)}}())),i=>vt(i,Boolean),i=>rp(i,this.components.peerStore),async i=>await xn(i));if(n!=null)return n;throw(0,np.default)(new Error(Ot.NOT_FOUND),ee.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(this.routers.length===0)throw(0,np.default)(new Error("No peer routers available"),ee.ERR_NO_ROUTERS_AVAILABLE);yield*Ke(Or(...this.routers.map(n=>n.getClosestPeers(e,t))),n=>rp(n,this.components.peerStore),n=>Y_(n),n=>X_(n))}};var Pu=L(fe(),1);var J_=class{constructor(e,t){this.routers=t.routers??[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,t={}){if(this.routers.length===0)throw(0,Pu.default)(new Error("No content this.routers available"),ee.ERR_NO_ROUTERS_AVAILABLE);yield*Ke(Or(...this.routers.map(n=>n.findProviders(e,t))),n=>rp(n,this.components.peerStore),n=>Y_(n),n=>X_(n))}async provide(e,t={}){if(this.routers.length===0)throw(0,Pu.default)(new Error("No content routers available"),ee.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(async n=>await n.provide(e,t)))}async put(e,t,n){if(!this.isStarted())throw(0,Pu.default)(new Error(Ot.NOT_STARTED_YET),ee.DHT_NOT_STARTED);let i=this.components.dht;i!=null&&await or(i.put(e,t,n))}async get(e,t){if(!this.isStarted())throw(0,Pu.default)(new Error(Ot.NOT_STARTED_YET),ee.DHT_NOT_STARTED);let n=this.components.dht;if(n!=null){for await(let i of n.get(e,t))if(i.name==="VALUE")return i.value}throw(0,Pu.default)(new Error(Ot.NOT_FOUND),ee.ERR_NOT_FOUND)}async*getMany(e,t,n){if(!this.isStarted())throw(0,Pu.default)(new Error(Ot.NOT_STARTED_YET),ee.DHT_NOT_STARTED);if(t==null||t===0)return;let i=0,o=this.components.dht;if(o!=null){for await(let s of o.get(e,n))if(s.name==="VALUE"&&(yield{from:s.from,val:s.value},i++,i===t))break}if(i===0)throw(0,Pu.default)(new Error(Ot.NOT_FOUND),ee.ERR_NOT_FOUND)}};var tqe=r=>r,ev=class extends at{constructor(e,t){super();let{listen:n=[],announce:i=[]}=t;this.components=e,this.listen=n.map(o=>o.toString()),this.announce=new Set(i.map(o=>o.toString())),this.observed=new Set,this.announceFilter=t.announceFilter??tqe}getListenAddrs(){return Array.from(this.listen).map(e=>Ee(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>Ee(e))}getObservedAddrs(){return Array.from(this.observed).map(e=>Ee(e))}confirmObservedAddr(e){}removeObservedAddr(e){}addObservedAddr(e){let t=Ee(e),n=t.getPeerId();n!=null&&Be(n).equals(this.components.peerId)&&(t=t.decapsulate(Ee(`/p2p/${this.components.peerId.toString()}`)));let i=t.toString();this.observed.has(i)||(this.observed.add(i),this.dispatchEvent(new be("change:addresses")))}getAddresses(){let e=this.getAnnounceAddrs().map(n=>n.toString());e.length===0&&(e=this.components.transportManager.getAddrs().map(n=>n.toString())),e=e.concat(this.getObservedAddrs().map(n=>n.toString()));let t=new Set(e);return this.announceFilter(Array.from(t).map(n=>Ee(n))).map(n=>{var i;return((i=n.protos().pop())==null?void 0:i.path)===!0||n.getPeerId()===this.components.peerId.toString()?n:n.encapsulate(`/p2p/${this.components.peerId.toString()}`)})}};var av=L(fe(),1);var hle=z("libp2p:connection-manager:latency-monitor:visibility-change-emitter"),tv=class extends at{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",globalThis.document!=null&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let e="hidden",t="visibilitychange";typeof globalThis.document.hidden<"u"?(e="hidden",t="visibilitychange"):typeof globalThis.document.mozHidden<"u"?(e="mozHidden",t="mozvisibilitychange"):typeof globalThis.document.msHidden<"u"?(e="msHidden",t="msvisibilitychange"):typeof globalThis.document.webkitHidden<"u"&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}_addVisibilityChangeListener(){typeof globalThis.document.addEventListener>"u"||typeof document[this.hidden]>"u"?hle("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this.hidden===void 0||document[this.hidden]===void 0))return document[this.hidden]==null}_handleVisibilityChange(){let e=globalThis.document[this.hidden]===!1;hle(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new be("visibilityChange",{detail:e}))}};var _0=z("libp2p:connection-manager:latency-monitor"),rv=class extends at{constructor(e={}){var s,a;super();let{latencyCheckIntervalMs:t,dataEmitIntervalMs:n,asyncTestFn:i,latencyRandomPercentage:o}=e;this.latencyCheckIntervalMs=t??500,this.latencyRandomPercentage=o??10,this.latencyCheckMultiply=2*(this.latencyRandomPercentage/100)*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=n===null||n===0?void 0:n??5*1e3,_0("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),this.dataEmitIntervalMs!=null?_0("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):_0("Not emitting summaries"),this.asyncTestFn=i,((s=globalThis.process)==null?void 0:s.hrtime)!=null?(_0("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=c=>{let u=this.now(c);return u[0]*1e3+u[1]/1e6}):typeof window<"u"&&((a=window.performance)==null?void 0:a.now)!=null?(_0("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=c=>Math.round(this.now()-c)):(_0("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=c=>this.now()-c),this.latencyData=this.initLatencyData()}start(){var e;rqe()&&(this.visibilityChangeEmitter=new tv,this.visibilityChangeEmitter.addEventListener("visibilityChange",t=>{let{detail:n}=t;n?this._startTimers():(this._emitSummary(),this._stopTimers())})),((e=this.visibilityChangeEmitter)==null?void 0:e.isVisible())===!0&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this.checkLatencyID==null&&(this.checkLatency(),this.dataEmitIntervalMs!=null&&(this.emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this.emitIntervalID.unref=="function"&&this.emitIntervalID.unref()))}_stopTimers(){this.checkLatencyID!=null&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),this.emitIntervalID!=null&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){let e=this.getSummary();e.events>0&&this.dispatchEvent(new be("data",{detail:e}))}getSummary(){let e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),_0.trace("Summary: %O",e),e}checkLatency(){let e=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,t={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+e),startTime:this.now()},n=()=>{if(this.checkLatencyID==null)return;let i=this.getDeltaMS(t.startTime)-t.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,i),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,i),this.latencyData.totalMs+=i,_0.trace("MS: %s Data: %O",i,this.latencyData)};_0.trace("localData: %O",t),this.checkLatencyID=setTimeout(()=>{this.asyncTestFn!=null?(t.deltaOffset=0,t.startTime=this.now(),this.asyncTestFn(n)):(t.deltaOffset-=1,n())},t.deltaOffset),typeof this.checkLatencyID.unref=="function"&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function rqe(){return typeof globalThis.window<"u"}var cv=require("events");var nv="OPEN",hL="CLOSING",iv="CLOSED";var RL=L(Dn(),1);var ple="keep-alive";var u3e=L(CL(),1);var c3e=L(fe(),1);function sv(r){if(Mi(r))return{peerId:r};if(Ki(r)){let e=r.getPeerId();return{multiaddr:r,peerId:e==null?void 0:Be(e)}}throw(0,c3e.default)(new Error(`${r} is not a PeerId or a Multiaddr`),ee.ERR_INVALID_MULTIADDR)}var An=z("libp2p:connection-manager"),Fqe={maxConnections:1/0,minConnections:0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,inboundConnectionThreshold:5,maxIncomingPendingConnections:10},Vqe=6e4,uv=class extends at{constructor(e,t){var n;if(super(),this.opts=Je.call({ignoreUndefined:!0},Fqe,t),this.opts.maxConnections<this.opts.minConnections)throw(0,av.default)(new Error("Connection Manager maxConnections must be greater than minConnections"),ee.ERR_INVALID_PARAMETERS);An("options: %o",this.opts),this.components=e,this.connections=new Map,this.started=!1,t.maxEventLoopDelay!=null&&t.maxEventLoopDelay>0&&t.maxEventLoopDelay!==1/0&&(this.latencyMonitor=new rv({latencyCheckIntervalMs:t.pollInterval,dataEmitIntervalMs:t.pollInterval}));try{(n=cv.setMaxListeners)==null||n(1/0,this)}catch{}this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.startupReconnectTimeout=t.startupReconnectTimeout??Vqe,this.dialTimeout=t.dialTimeout??3e4,this.allow=(t.allow??[]).map(i=>Ee(i)),this.deny=(t.deny??[]).map(i=>Ee(i)),this.inboundConnectionRateLimiter=new u3e.RateLimiterMemory({points:this.opts.inboundConnectionThreshold,duration:1}),this.incomingPendingConnections=0}isStarted(){return this.started}async start(){var e,t,n,i,o;(e=this.components.metrics)==null||e.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{let s={inbound:0,outbound:0};for(let a of this.connections.values())for(let c of a)c.stat.direction==="inbound"?s.inbound++:s.outbound++;return s}}),(t=this.components.metrics)==null||t.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{let s={};for(let a of this.connections.values())for(let c of a)for(let u of c.streams){let l=`${u.stat.direction} ${u.stat.protocol??"unnegotiated"}`;s[l]=(s[l]??0)+1}return s}}),(n=this.components.metrics)==null||n.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{let s={};for(let c of this.connections.values())for(let u of c){let l={};for(let d of u.streams){let h=`${d.stat.direction} ${d.stat.protocol??"unnegotiated"}`;l[h]=(l[h]??0)+1}for(let[d,h]of Object.entries(l))s[d]=s[d]??[],s[d].push(h)}let a={};for(let[c,u]of Object.entries(s)){u=u.sort((d,h)=>d-h);let l=Math.floor(u.length*.9);a[c]=u[l]}return a}}),(i=this.latencyMonitor)==null||i.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),(o=this.latencyMonitor)==null||o.addEventListener("data",this._onLatencyMeasure),this.started=!0,An("started")}async afterStart(){this.components.upgrader.addEventListener("connection",this.onConnect),this.components.upgrader.addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then(async()=>{var t,n;let e=[];for(let i of await this.components.peerStore.all())(await this.components.peerStore.getTags(i.id)).filter(a=>a.name===ple).length>0&&e.push(i.id);(t=this.connectOnStartupController)==null||t.clear(),this.connectOnStartupController=new RL.TimeoutController(this.startupReconnectTimeout);try{(n=cv.setMaxListeners)==null||n(1/0,this.connectOnStartupController.signal)}catch{}await Promise.all(e.map(async i=>{var o;await this.openConnection(i,{signal:(o=this.connectOnStartupController)==null?void 0:o.signal}).catch(s=>{An.error(s)})}))}).catch(e=>{An.error(e)}).finally(()=>{var e;(e=this.connectOnStartupController)==null||e.clear()})}async beforeStop(){var e;(e=this.connectOnStartupController)==null||e.abort(),this.components.upgrader.removeEventListener("connection",this.onConnect),this.components.upgrader.removeEventListener("connectionEnd",this.onDisconnect)}async stop(){var e,t;(e=this.latencyMonitor)==null||e.removeEventListener("data",this._onLatencyMeasure),(t=this.latencyMonitor)==null||t.stop(),this.started=!1,await this._close(),An("stopped")}async _close(){let e=[];for(let t of this.connections.values())for(let n of t)e.push((async()=>{try{await n.close()}catch(i){An.error(i)}})());An("closing %d connections",e.length),await Promise.all(e),this.connections.clear()}onConnect(e){this._onConnect(e).catch(t=>{An.error(t)})}async _onConnect(e){let{detail:t}=e;if(!this.started){await t.close();return}let n=t.remotePeer,i=n.toString(),o=this.connections.get(i);o!=null?o.push(t):this.connections.set(i,[t]),n.publicKey!=null&&await this.components.peerStore.keyBook.set(n,n.publicKey);let s=this.getConnections().length,a=s-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",s,a),this.dispatchEvent(new be("peer:connect",{detail:t}))}onDisconnect(e){let{detail:t}=e;if(!this.started)return;let n=t.remotePeer.toString(),i=this.connections.get(n);i!=null&&i.length>1?(i=i.filter(o=>o.id!==t.id),this.connections.set(n,i)):i!=null&&(this.connections.delete(n),this.dispatchEvent(new be("peer:disconnect",{detail:t})))}getConnections(e){if(e!=null)return this.connections.get(e.toString())??[];let t=[];for(let n of this.connections.values())t=t.concat(n);return t}async openConnection(e,t={}){var s;let{peerId:n,multiaddr:i}=sv(e);if(n==null&&i==null)throw(0,av.default)(new TypeError("Can only open connections to PeerIds or Multiaddrs"),ee.ERR_INVALID_PARAMETERS);if(n!=null){An("dial to",n);let a=this.getConnections(n);if(a.length>0)return An("had an existing connection to %p",n),a[0]}let o;if((t==null?void 0:t.signal)==null){o=new RL.TimeoutController(this.dialTimeout),t.signal=o.signal;try{(s=cv.setMaxListeners)==null||s(1/0,o.signal)}catch{}}try{let a=await this.components.dialer.dial(e,t),c=this.connections.get(a.remotePeer.toString());c==null&&(c=[],this.connections.set(a.remotePeer.toString(),c));let u=!1;for(let l of c)l.id===a.id&&(u=!0);return u||c.push(a),a}finally{o!=null&&o.clear()}}async closeConnections(e){let t=this.connections.get(e.toString())??[];await Promise.all(t.map(async n=>await n.close()))}getAll(e){if(!Mi(e))throw(0,av.default)(new Error("peerId must be an instance of peer-id"),ee.ERR_INVALID_PARAMETERS);let t=e.toString(),n=this.connections.get(t);return n!=null?n.filter(i=>i.stat.status===nv):[]}_onLatencyMeasure(e){let{detail:t}=e;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch(n=>{An.error(n)})}async _checkMaxLimit(e,t,n=1){let i=this.opts[e];if(i==null){An.trace("limit %s was not set so it cannot be applied",e);return}An.trace("checking limit of %s. current value: %d of %d",e,t,i),t>i&&(An("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.peerId,e,t,i,n),await this._pruneConnections(n))}async _pruneConnections(e){let t=this.getConnections(),n=new O3;for(let s of t){let a=s.remotePeer;if(n.has(a))continue;let c=await this.components.peerStore.getTags(a);n.set(a,c.reduce((u,l)=>u+l.value,0))}let i=t.sort((s,a)=>{let c=n.get(s.remotePeer)??0,u=n.get(a.remotePeer)??0;if(c>u)return 1;if(c<u)return-1;let l=s.stat.timeline.open,d=a.stat.timeline.open;return l<d?1:l>d?-1:0}),o=[];for(let s of i)if(An("too many connections open - closing a connection to %p",s.remotePeer),o.push(s),o.length===e)break;await Promise.all(o.map(async s=>{try{await s.close()}catch(a){An.error(a)}this.onDisconnect(new be("connectionEnd",{detail:s}))}))}async acceptIncomingConnection(e){if(this.deny.some(i=>e.remoteAddr.toString().startsWith(i.toString())))return An("connection from %s refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some(i=>e.remoteAddr.toString().startsWith(i.toString())))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.opts.maxIncomingPendingConnections)return An("connection from %s refused - incomingPendingConnections exceeded by peer %s",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){let i=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(i,1)}catch{return An("connection from %s refused - inboundConnectionThreshold exceeded by host %s",i,e.remoteAddr),!1}}return this.getConnections().length<this.opts.maxConnections?(this.incomingPendingConnections++,!0):(An("connection from %s refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}};var kL=L(CI(),1);var Du=z("libp2p:connection-manager:auto-dialler"),zqe={enabled:!0,minConnections:0,autoDialInterval:1e4},lv=class{constructor(e,t){this.components=e,this.options=Je.call({ignoreUndefined:!0},zqe,t),this.running=!1,this._autoDial=this._autoDial.bind(this),Du("options: %j",this.options)}isStarted(){return this.running}async start(){if(!this.options.enabled){Du("not enabled");return}this.running=!0,this._autoDial().catch(e=>{Du.error("could start autodial",e)}),Du("started")}async stop(){if(!this.options.enabled){Du("not enabled");return}this.running=!1,this.autoDialTimeout!=null&&this.autoDialTimeout.clear(),Du("stopped")}async _autoDial(){this.autoDialTimeout!=null&&this.autoDialTimeout.clear();let e=this.options.minConnections;if(this.components.connectionManager.getConnections().length>=e){this.autoDialTimeout=(0,kL.default)(this._autoDial,this.options.autoDialInterval);return}let t=await this.components.peerStore.all(),n=await Ke(t.sort(()=>Math.random()>.5?1:-1),i=>vt(i,o=>!o.id.equals(this.components.peerId)),i=>ou(i,(o,s)=>s.protocols.length>o.protocols.length||s.id.publicKey!=null&&o.id.publicKey==null?1:-1),async i=>await Pn(i));for(let i=0;this.running&&i<n.length&&this.components.connectionManager.getConnections().length<e;i++){if(!this.running)return;let o=n[i];if(this.components.connectionManager.getConnections(o.id).length===0){Du("connecting to a peerStore stored peer %p",o.id);try{await this.components.connectionManager.openConnection(o.id)}catch(s){Du.error("could not connect to peerStore stored peer",s)}}}this.running&&(this.autoDialTimeout=(0,kL.default)(this._autoDial,this.options.autoDialInterval))}};var w3e=L(fe(),1);var mt;(function(r){let e;(function(a){a.SUCCESS="SUCCESS",a.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",a.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",a.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",a.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",a.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",a.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",a.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",a.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",a.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",a.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",a.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",a.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",a.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",a.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",a.MALFORMED_MESSAGE="MALFORMED_MESSAGE"})(e=r.Status||(r.Status={}));let t;(function(a){a[a.SUCCESS=100]="SUCCESS",a[a.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",a[a.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",a[a.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",a[a.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",a[a.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",a[a.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",a[a.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",a[a.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",a[a.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",a[a.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",a[a.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",a[a.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",a[a.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",a[a.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",a[a.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"})(t||(t={})),function(a){a.codec=()=>R2(t)}(e=r.Status||(r.Status={}));let n;(function(a){a.HOP="HOP",a.STOP="STOP",a.STATUS="STATUS",a.CAN_HOP="CAN_HOP"})(n=r.Type||(r.Type={}));let i;(function(a){a[a.HOP=1]="HOP",a[a.STOP=2]="STOP",a[a.STATUS=3]="STATUS",a[a.CAN_HOP=4]="CAN_HOP"})(i||(i={})),function(a){a.codec=()=>R2(i)}(n=r.Type||(r.Type={}));let o;(function(a){let c;a.codec=()=>(c==null&&(c=Na((u,l,d={})=>{if(d.lengthDelimited!==!1&&l.fork(),(d.writeDefaults===!0||u.id!=null&&u.id.byteLength>0)&&(l.uint32(10),l.bytes(u.id)),u.addrs!=null)for(let h of u.addrs)l.uint32(18),l.bytes(h);d.lengthDelimited!==!1&&l.ldelim()},(u,l)=>{let d={id:new Uint8Array(0),addrs:[]},h=l==null?u.len:u.pos+l;for(;u.pos<h;){let f=u.uint32();switch(f>>>3){case 1:d.id=u.bytes();break;case 2:d.addrs.push(u.bytes());break;default:u.skipType(f&7);break}}return d})),c),a.encode=u=>Da(u,a.codec()),a.decode=u=>Pa(u,a.codec())})(o=r.Peer||(r.Peer={}));let s;r.codec=()=>(s==null&&(s=Na((a,c,u={})=>{u.lengthDelimited!==!1&&c.fork(),a.type!=null&&(c.uint32(8),r.Type.codec().encode(a.type,c)),a.srcPeer!=null&&(c.uint32(18),r.Peer.codec().encode(a.srcPeer,c,{writeDefaults:!1})),a.dstPeer!=null&&(c.uint32(26),r.Peer.codec().encode(a.dstPeer,c,{writeDefaults:!1})),a.code!=null&&(c.uint32(32),r.Status.codec().encode(a.code,c)),u.lengthDelimited!==!1&&c.ldelim()},(a,c)=>{let u={},l=c==null?a.len:a.pos+c;for(;a.pos<l;){let d=a.uint32();switch(d>>>3){case 1:u.type=r.Type.codec().decode(a);break;case 2:u.srcPeer=r.Peer.codec().decode(a,a.uint32());break;case 3:u.dstPeer=r.Peer.codec().decode(a,a.uint32());break;case 4:u.code=r.Status.codec().decode(a);break;default:a.skipType(d&7);break}}return u})),s),r.encode=a=>Da(a,r.codec()),r.decode=a=>Pa(a,r.codec())})(mt||(mt={}));var op=class extends Error{constructor(t,n,i){super(t??"The operation was aborted");F(this,"type");F(this,"code");this.type="aborted",this.code=n??"ABORT_ERR",this.name=i??"AbortError"}};function sp(r,e,t){let n=t??{},i=Nb(r);async function*o(){let s,a=()=>{s!=null&&s()};for(e.addEventListener("abort",a);;){let c;try{if(e.aborted){let{abortMessage:l,abortCode:d,abortName:h}=n;throw new op(l,d,h)}let u=new Promise((l,d)=>{s=()=>{let{abortMessage:h,abortCode:f,abortName:m}=n;d(new op(h,f,m))}});c=await Promise.race([u,i.next()]),s=null}catch(u){e.removeEventListener("abort",a);let l=u.type==="aborted"&&e.aborted;if(l&&n.onAbort!=null&&n.onAbort(r),typeof i.return=="function")try{let d=i.return();d instanceof Promise&&d.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(d){n.onReturnError!=null&&n.onReturnError(d)}if(l&&n.returnOnAbort===!0)return;throw u}if(c.done===!0)break;yield c.value}e.removeEventListener("abort",a)}return o()}var qqe=z("libp2p:stream:converter");function PL(r,e={}){let{stream:t,remoteAddr:n}=r,{sink:i,source:o}=t,s=async function*(){for await(let u of o)u instanceof Uint8Array?yield u:yield*u}(),a={async sink(u){e.signal!=null&&(u=sp(u,e.signal));try{await i(u),await c()}catch(l){l.type!=="aborted"&&qqe(l)}},source:e.signal!=null?sp(s,e.signal):s,remoteAddr:n,timeline:{open:Date.now(),close:void 0},async close(){await i(async function*(){yield new Uint8Array(0)}()),await c()}};async function c(){a.timeline.close==null&&(a.timeline.close=Date.now()),await Promise.resolve()}return a}var Z1="/libp2p/circuit/relay/0.1.0";function l3e(r){let e=new Map;async function t(o){let s=o.toString().split("/p2p-circuit").find(h=>h!==""),a=Ee(s),c=a.getPeerId();if(c==null)throw new Error("Could not determine relay peer from multiaddr");let u=Be(c);await r.peerStore.addressBook.add(u,[a]);let l=await r.connectionManager.openConnection(u),d=l.remoteAddr.encapsulate("/p2p-circuit");e.set(l.remotePeer.toString(),d),i.dispatchEvent(new be("listening"))}function n(){let o=[];for(let s of e.values())o.push(s);return o}let i=Object.assign(new at,{close:async()=>await Promise.resolve(),listen:t,getAddrs:n});return r.connectionManager.addEventListener("peer:disconnect",o=>{let{detail:s}=o;e.delete(s.remotePeer.toString())&&i.dispatchEvent(new be("close"))}),i}var DL=L(fe(),1);function d3e(r,e){r.write({type:mt.Type.STATUS,code:e})}function dv(r,e){var t,n;try{((t=r.dstPeer)==null?void 0:t.addrs)!=null&&r.dstPeer.addrs.forEach(i=>Ee(i))}catch(i){throw d3e(e,r.type===mt.Type.HOP?mt.Status.HOP_DST_MULTIADDR_INVALID:mt.Status.STOP_DST_MULTIADDR_INVALID),i}try{((n=r.srcPeer)==null?void 0:n.addrs)!=null&&r.srcPeer.addrs.forEach(i=>Ee(i))}catch(i){throw d3e(e,r.type===mt.Type.HOP?mt.Status.HOP_SRC_MULTIADDR_INVALID:mt.Status.STOP_SRC_MULTIADDR_INVALID),i}}function R5(r){let e=Gt(),t=vy(r.source),n=jt(),i,o=r.sink(async function*(){yield*e,yield*await n.promise}());return o.catch(a=>{i=a}),{reader:t,writer:e,stream:{sink:async a=>{if(i!=null){await Promise.reject(i);return}n.resolve(a),await o},source:t},rest:()=>e.end(),write:e.push,read:async()=>{let a=await t.next();if(a.value!=null)return a.value}}}var ap=z("libp2p:circuit:stream-handler"),v0=class{constructor(e){let{stream:t,maxLength:n=4096}=e;this.stream=t,this.shake=R5(this.stream),this.decoder=gn.fromReader(this.shake.reader,{maxDataLength:n})}async read(){let e=await this.decoder.next();if(e.value!=null){let t=mt.decode(e.value);return ap("read message type",t.type),t}ap("read received no value, closing stream"),this.close()}write(e){ap("write message type %s",e.type),this.shake.write(Bn.single(mt.encode(e)))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){ap("closing the stream"),this.rest().sink([]).catch(e=>{ap.error(e)})}};var cp=z("libp2p:circuit:stop");function f3e(r){let{connection:e,request:t,streamHandler:n}=r;try{dv(t,n)}catch(i){cp.error("invalid stop request via peer %p %o",e.remotePeer,i);return}return cp("stop request is valid"),n.write({type:mt.Type.STATUS,code:mt.Status.SUCCESS}),n.rest()}async function h3e(r){let{connection:e,request:t,signal:n}=r,i=await e.newStream(Z1,{signal:n});cp("starting stop request to %p",e.remotePeer);let o=new v0({stream:i});o.write(t);let s=await o.read();if(s==null){o.close();return}if(s.code===mt.Status.SUCCESS)return cp("stop request to %p was successful",e.remotePeer),o.rest();cp("stop request failed with code %d",s.code),o.close()}var Zs=z("libp2p:circuit:hop");async function p3e(r){let{connection:e,request:t,streamHandler:n,circuit:i,connectionManager:o}=r;if(!i.hopEnabled())return Zs("HOP request received but we are not acting as a relay"),n.end({type:mt.Type.STATUS,code:mt.Status.HOP_CANT_SPEAK_RELAY});try{dv(t,n)}catch(d){Zs.error("invalid hop request via peer %p %o",e.remotePeer,d);return}if(t.dstPeer==null){Zs("HOP request received but we do not receive a dstPeer");return}let s=Mr(t.dstPeer.id),a=o.getConnections(s);if(a.length===0&&!i.hopActive())return Zs("HOP request received but we are not connected to the destination peer"),n.end({type:mt.Type.STATUS,code:mt.Status.HOP_NO_CONN_TO_DST});if(a.length===0)return Zs("did not have connection to remote peer"),n.end({type:mt.Type.STATUS,code:mt.Status.HOP_NO_CONN_TO_DST});let c={type:mt.Type.STOP,dstPeer:t.dstPeer,srcPeer:t.srcPeer},u;try{Zs("performing STOP request");let d=await h3e({connection:a[0],request:c});if(d==null)throw new Error("Could not stop");u=d}catch(d){Zs.error(d);return}Zs("hop request from %p is valid",e.remotePeer),n.write({type:mt.Type.STATUS,code:mt.Status.SUCCESS});let l=n.rest();return Zs("creating related connections"),await Ke(l,u,l)}async function m3e(r){let{connection:e,request:t,signal:n}=r,i=await e.newStream(Z1,{signal:n}),o=new v0({stream:i});o.write(t);let s=await o.read();if(s==null)throw(0,DL.default)(new Error("HOP request had no response"),ee.ERR_HOP_REQUEST_FAILED);if(s.code===mt.Status.SUCCESS)return Zs("hop request was successful"),o.rest();throw Zs("hop request failed with code %d, closing stream",s.code),o.close(),(0,DL.default)(new Error(`HOP request failed with code "${s.code??"unknown"}"`),ee.ERR_HOP_REQUEST_FAILED)}async function g3e(r){let{connection:e,signal:t}=r,n=await e.newStream(Z1,{signal:t}),i=new v0({stream:n});i.write({type:mt.Type.CAN_HOP});let o=await i.read();return await i.close(),!(o==null||o.code!==mt.Status.SUCCESS)}function y3e(r){let{connection:e,streamHandler:t,circuit:n}=r,i=n.hopEnabled();Zs("can hop (%s) request from %p",i,e.remotePeer),t.end({type:mt.Type.STATUS,code:i?mt.Status.SUCCESS:mt.Status.HOP_CANT_SPEAK_RELAY})}var b3e=L(Dn(),1),_3e=require("events"),Js=z("libp2p:circuit"),fv=class{constructor(e,t){this._init=t,this.components=e,this._started=!1}isStarted(){return this._started}async start(){this._started||(this._started=!0,await this.components.registrar.handle(Z1,e=>{this._onProtocol(e).catch(t=>{Js.error(t)})},{...this._init}).catch(e=>{Js.error(e)}))}async stop(){await this.components.registrar.unhandle(Z1)}hopEnabled(){return!0}hopActive(){return!0}get[g5](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(e){var o,s,a;let{connection:t,stream:n}=e,i=new b3e.TimeoutController(this._init.hop.timeout);try{(o=_3e.setMaxListeners)==null||o(1/0,i.signal)}catch{}try{let c=Ai(n,i.signal),u=new v0({stream:{...n,...c}}),l=await u.read();if(l==null){Js("request was invalid, could not read from stream"),u.write({type:mt.Type.STATUS,code:mt.Status.MALFORMED_MESSAGE}),u.close();return}let d;switch(l.type){case mt.Type.CAN_HOP:{Js("received CAN_HOP request from %p",t.remotePeer),await y3e({circuit:this,connection:t,streamHandler:u});break}case mt.Type.HOP:{Js("received HOP request from %p",t.remotePeer),await p3e({connection:t,request:l,streamHandler:u,circuit:this,connectionManager:this.components.connectionManager});break}case mt.Type.STOP:{Js("received STOP request from %p",t.remotePeer),d=await f3e({connection:t,request:l,streamHandler:u});break}default:{Js("Request of type %s not supported",l.type),u.write({type:mt.Type.STATUS,code:mt.Status.MALFORMED_MESSAGE}),u.close();return}}if(d!=null){let h=t.remoteAddr.encapsulate("/p2p-circuit").encapsulate(Ee((s=l.dstPeer)==null?void 0:s.addrs[0])),f=Ee((a=l.srcPeer)==null?void 0:a.addrs[0]),m=PL({stream:d,remoteAddr:h,localAddr:f}),w=l.type===mt.Type.HOP?"relay":"inbound";Js("new %s connection %s",w,m.remoteAddr);let _=await this.components.upgrader.upgradeInbound(m);Js("%s connection %s upgraded",w,m.remoteAddr),this.handler!=null&&this.handler(_)}}finally{i.clear()}}async dial(e,t={}){let n=e.toString().split("/p2p-circuit"),i=Ee(n[0]),o=Ee(n[n.length-1]),s=i.getPeerId(),a=o.getPeerId();if(s==null||a==null){let f="Circuit relay dial failed as addresses did not have peer id";throw Js.error(f),(0,w3e.default)(new Error(f),ee.ERR_RELAYED_DIAL)}let c=Be(s),u=Be(a),l=!1,h=this.components.connectionManager.getConnections(c)[0];h==null&&(await this.components.peerStore.addressBook.add(c,[i]),h=await this.components.connectionManager.openConnection(c,t),l=!0);try{let f=await m3e({...t,connection:h,request:{type:mt.Type.HOP,srcPeer:{id:this.components.peerId.toBytes(),addrs:this.components.addressManager.getAddresses().map(_=>_.bytes)},dstPeer:{id:u.toBytes(),addrs:[Ee(o).bytes]}}}),m=i.encapsulate(`/p2p-circuit/p2p/${this.components.peerId.toString()}`),w=PL({stream:f,remoteAddr:e,localAddr:m});return Js("new outbound connection %s",w.remoteAddr),await this.components.upgrader.upgradeOutbound(w)}catch(f){throw Js.error("Circuit relay dial failed",f),l&&await h.close(),f}}createListener(e){return this.handler=e.handler,l3e({connectionManager:this.components.connectionManager,peerStore:this.components.peerStore})}filter(e){return e=Array.isArray(e)?e:[e],e.filter(t=>Nl.matches(t))}};var bv=L(fL(),1);async function hv(r){let e=new TextEncoder().encode(r),t=await ot.digest(e);return $.createV0(t)}var NL="hop_relay",OL="true",pv="/libp2p/relay";var A3e=L(v3e(),1);var E3e="[a-fA-F\\d:]",Nu=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${E3e})|(?<=${E3e})(?=\\s|$))`:"",Qa="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Cn="[a-fA-F\\d]{1,4}",mv=`
(?:
(?:${Cn}:){7}(?:${Cn}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Cn}:){6}(?:${Qa}|:${Cn}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Cn}:){5}(?::${Qa}|(?::${Cn}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Cn}:){4}(?:(?::${Cn}){0,1}:${Qa}|(?::${Cn}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Cn}:){3}(?:(?::${Cn}){0,2}:${Qa}|(?::${Cn}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Cn}:){2}(?:(?::${Cn}){0,3}:${Qa}|(?::${Cn}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Cn}:){1}(?:(?::${Cn}){0,4}:${Qa}|(?::${Cn}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Cn}){0,5}:${Qa}|(?::${Cn}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Kqe=new RegExp(`(?:^${Qa}$)|(?:^${mv}$)`),jqe=new RegExp(`^${Qa}$`),Gqe=new RegExp(`^${mv}$`),LL=r=>r&&r.exact?Kqe:new RegExp(`(?:${Nu(r)}${Qa}${Nu(r)})|(?:${Nu(r)}${mv}${Nu(r)})`,"g");LL.v4=r=>r&&r.exact?jqe:new RegExp(`${Nu(r)}${Qa}${Nu(r)}`,"g");LL.v6=r=>r&&r.exact?Gqe:new RegExp(`${Nu(r)}${mv}${Nu(r)}`,"g");var x3e=LL;var C3e=L(T3e(),1),{isValid:Hqe,parse:Wqe}=C3e.default,Yqe=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],Xqe=Yqe.map(r=>new A3e.Netmask(r));function Qqe(r){for(let e of Xqe)if(e.contains(r))return!0;return!1}function I3e(r){return/^::$/.test(r)||/^::1$/.test(r)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(r)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(r)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(r)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(r)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(r)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(r)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(r)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(r)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(r)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(r)||/^ff([0-9a-fA-F]{2,2}):/i.test(r)}var R3e=r=>{if(Hqe(r)){let e=Wqe(r);if(e.kind()==="ipv4")return Qqe(e.toNormalizedString());if(e.kind()==="ipv6")return I3e(r)}else if(u1(r)&&x3e.v6().test(r))return I3e(r)};var j3=R3e;function BL(r){try{let{address:e}=r.nodeAddress();return!!j3(e)}catch{return!0}}function k5(r,e){let t=BL(r.multiaddr),n=BL(e.multiaddr);return t&&!n?1:!t&&n||r.isCertified&&!e.isCertified?-1:!r.isCertified&&e.isCertified?1:0}var lp=z("libp2p:auto-relay"),Jqe=()=>{},yv=class{constructor(e,t){this.components=e,this.addressSorter=t.addressSorter??k5,this.maxListeners=t.maxListeners??1,this.listenRelays=new Set,this.onError=t.onError??Jqe,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.peerStore.addEventListener("change:protocols",n=>{this._onProtocolChange(n).catch(i=>{lp.error(i)})}),this.components.connectionManager.addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(e){let{peerId:t,protocols:n}=e.detail,i=t.toString();if(n.find(s=>s===Z1)==null){this.listenRelays.has(i)&&await this._removeListenRelay(i);return}if(!this.listenRelays.has(i))try{let s=this.components.connectionManager.getConnections(t);if(s.length===0)return;let a=s[0];if(a.remoteAddr.protoCodes().includes(290)){lp(`relayed connection to ${i} will not be used to hop on`);return}await g3e({connection:a})&&(await this.components.peerStore.metadataBook.setValue(t,NL,oe(OL)),await this._addListenRelay(a,i))}catch(s){this.onError(s)}}_onPeerDisconnected(e){let i=e.detail.remotePeer.toString();this.listenRelays.has(i)&&this._removeListenRelay(i).catch(o=>{lp.error(o)})}async _addListenRelay(e,t){try{if(this.listenRelays.size>=this.maxListeners)return;let n=await Ke(await this.components.peerStore.addressBook.get(e.remotePeer),o=>ou(o,this.addressSorter),async o=>await Pn(o));(await Promise.all(n.map(async o=>{try{let s=o.multiaddr;return s.getPeerId()==null&&(s=s.encapsulate(`/p2p/${e.remotePeer.toString()}`)),s=s.encapsulate("/p2p-circuit"),await this.components.transportManager.listen([s]),!0}catch(s){lp.error("error listening on circuit address",s),this.onError(s)}return!1}))).includes(!0)&&this.listenRelays.add(t)}catch(n){this.onError(n),this.listenRelays.delete(t)}}async _removeListenRelay(e){this.listenRelays.delete(e)&&await this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this.listenRelays.size>=this.maxListeners)return;let t=[],n=await this.components.peerStore.all();for(let{id:i,metadata:o}of n){let s=i.toString();if(this.listenRelays.has(s)||e.includes(s))continue;let a=o.get(NL);if(a==null||ie(a)!==OL)continue;let c=this.components.connectionManager.getConnections(i);if(c.length===0){t.push(i);continue}if(await this._addListenRelay(c[0],s),this.listenRelays.size>=this.maxListeners)return}for(let i of t)if(await this._tryToListenOnRelay(i),this.listenRelays.size>=this.maxListeners)return;try{let i=await hv(pv);for await(let o of this.components.contentRouting.findProviders(i)){if(o.multiaddrs.length===0)continue;let s=o.id;if(!s.equals(this.components.peerId)&&(await this.components.peerStore.addressBook.add(s,o.multiaddrs),await this._tryToListenOnRelay(s),this.listenRelays.size>=this.maxListeners))return}}catch(i){this.onError(i)}}async _tryToListenOnRelay(e){try{let t=await this.components.connectionManager.openConnection(e);await this._addListenRelay(t,e.toString())}catch(t){lp.error("Could not use %p as relay",e,t),this.onError(t,`could not connect and listen on known hop relay ${e.toString()}`)}}};var k3e=z("libp2p:relay"),wv=class{constructor(e,t){var n;this.components=e,this.autoRelay=((n=t.autoRelay)==null?void 0:n.enabled)!==!1?new yv(e,{addressSorter:t.addressSorter,...t.autoRelay}):void 0,this.started=!1,this.init=t,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){this.init.hop.enabled!==!1&&this.init.advertise.enabled!==!1&&(this.timeout=(0,bv.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){this.timeout!=null&&(0,bv.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{let e=await hv(pv);await this.components.contentRouting.provide(e)}catch(e){e.code===ee.ERR_NO_ROUTERS_AVAILABLE?(k3e.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),await this.stop()):k3e.error(e)}}};var sde=L(M3e(),1);var eGt=L(tde(),1),tGt=L(KA(),1),E0=L(Kt(),1);var Zjt=L(UL(),1),nde=L(Kt(),1),rde=nde.default.pki,ide=(r,e)=>{let t=rde.rsa.setPublicKey(e.n,e.e),n=rde.createCertificate();n.publicKey=t,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);let i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:r.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n};async function ode(r,e){let t=r.map(e),i=(await Promise.all(t)).findIndex(o=>o);return r[i]}var x0=L(fe(),1);var A$e=z("libp2p:keychain:cms"),zL=new WeakMap,xv=class{constructor(e,t){if(e==null)throw(0,x0.default)(new Error("keychain is required"),ee.ERR_KEYCHAIN_REQUIRED);this.keychain=e,zL.set(this,{dek:t})}async encrypt(e,t){if(!(t instanceof Uint8Array))throw(0,x0.default)(new Error("Plain data must be a Uint8Array"),ee.ERR_INVALID_PARAMETERS);let n=await this.keychain.findKeyByName(e),i=await this.keychain.getPrivateKey(e),o=zL.get(this);if(o==null)throw(0,x0.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let s=o.dek,a=E0.default.pki.decryptRsaPrivateKey(i,s),c=await ide(n,a),u=E0.default.pkcs7.createEnvelopedData();u.addRecipient(c),u.content=E0.default.util.createBuffer(t),u.encrypt();let l=E0.default.asn1.toDer(u.toAsn1()).getBytes();return oe(l,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw(0,x0.default)(new Error("CMS data is required"),ee.ERR_INVALID_PARAMETERS);let t;try{let l=E0.default.util.createBuffer(ie(e,"ascii")),d=E0.default.asn1.fromDer(l);t=E0.default.pkcs7.messageFromAsn1(d)}catch(l){throw A$e.error(l),(0,x0.default)(new Error("Invalid CMS"),ee.ERR_INVALID_CMS)}let n=t.recipients.filter(l=>l.issuer.find(d=>d.shortName==="O"&&d.value==="ipfs")).filter(l=>l.issuer.find(d=>d.shortName==="CN")).map(l=>({recipient:l,keyId:l.issuer.find(d=>d.shortName==="CN").value})),i=await ode(n,async l=>{try{if(await this.keychain.findKeyById(l.keyId)!=null)return!0}catch{return!1}return!1});if(i==null){let l=n.map(d=>d.keyId);throw(0,x0.default)(new Error(`Decryption needs one of the key(s): ${l.join(", ")}`),ee.ERR_MISSING_KEYS,{missingKeys:l})}let o=await this.keychain.findKeyById(i.keyId);if(o==null)throw(0,x0.default)(new Error("No key available to decrypto"),ee.ERR_NO_KEY);let s=await this.keychain.getPrivateKey(o.name),a=zL.get(this);if(a==null)throw(0,x0.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let c=a.dek,u=E0.default.pki.decryptRsaPrivateKey(s,c);return t.decrypt(i.recipient,u),oe(t.content.getBytes(),"ascii")}};var ar=L(fe(),1);var Sv=z("libp2p:keychain"),C$e="/pkcs8/",ade="/info/",Lu=new WeakMap,W3={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},qL={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function S0(r){return r==null||typeof r!="string"?!1:r===(0,sde.default)(r.trim())&&r.length>0}async function wr(){let t=Math.random()*800+200;await new Promise(n=>setTimeout(n,t))}function J1(r){return new Re(C$e+r)}function T0(r){return new Re(ade+r)}var Y3=class{constructor(e,t){var i,o,s,a,c,u,l,d,h,f;if(this.components=e,this.init=Je(qL,t),this.init.pass!=null&&((i=this.init.pass)==null?void 0:i.length)<20)throw new Error("pass must be least 20 characters");if(((o=this.init.dek)==null?void 0:o.keyLength)!=null&&this.init.dek.keyLength<W3.minKeyLength)throw new Error(`dek.keyLength must be least ${W3.minKeyLength} bytes`);if(((a=(s=this.init.dek)==null?void 0:s.salt)==null?void 0:a.length)!=null&&this.init.dek.salt.length<W3.minSaltLength)throw new Error(`dek.saltLength must be least ${W3.minSaltLength} bytes`);if(((c=this.init.dek)==null?void 0:c.iterationCount)!=null&&this.init.dek.iterationCount<W3.minIterationCount)throw new Error(`dek.iterationCount must be least ${W3.minIterationCount}`);let n=this.init.pass!=null&&((u=this.init.dek)==null?void 0:u.salt)!=null?L7(this.init.pass,(l=this.init.dek)==null?void 0:l.salt,(d=this.init.dek)==null?void 0:d.iterationCount,(h=this.init.dek)==null?void 0:h.keyLength,(f=this.init.dek)==null?void 0:f.hash):"";Lu.set(this,{dek:n}),this.started=!1}isStarted(){return this.started}async start(){let e=T0("self");await this.components.datastore.has(e)||await this.importPeer("self",this.components.peerId),this.started=!0}stop(){this.started=!1}get cms(){let e=Lu.get(this);if(e==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let t=e.dek;return new xv(this,t)}static generateOptions(){let e=Object.assign({},qL),t=Math.ceil(W3.minSaltLength/3)*3;return e.dek.salt=ie(qi(t),"base64"),e}static get options(){return qL}async createKey(e,t,n=2048){if(!S0(e)||e==="self")throw await wr(),(0,ar.default)(new Error("Invalid key name"),ee.ERR_INVALID_KEY_NAME);if(typeof t!="string")throw await wr(),(0,ar.default)(new Error("Invalid key type"),ee.ERR_INVALID_KEY_TYPE);let i=J1(e);if(await this.components.datastore.has(i))throw await wr(),(0,ar.default)(new Error("Key name already exists"),ee.ERR_KEY_ALREADY_EXISTS);switch(t.toLowerCase()){case"rsa":if(!Number.isSafeInteger(n)||n<2048)throw await wr(),(0,ar.default)(new Error("Invalid RSA key size"),ee.ERR_INVALID_KEY_SIZE);break;default:break}let s;try{let a=await If(t,n),c=await a.id(),u=Lu.get(this);if(u==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let l=u.dek,d=await a.export(l);s={name:e,id:c};let h=this.components.datastore.batch();h.put(i,oe(d)),h.put(T0(e),oe(JSON.stringify(s))),await h.commit()}catch(a){throw await wr(),a}return s}async listKeys(){let e={prefix:ade},t=[];for await(let n of this.components.datastore.query(e))t.push(JSON.parse(ie(n.value)));return t}async findKeyById(e){try{return(await this.listKeys()).find(n=>n.id===e)}catch(t){throw await wr(),t}}async findKeyByName(e){if(!S0(e))throw await wr(),(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);let t=T0(e);try{let n=await this.components.datastore.get(t);return JSON.parse(ie(n))}catch(n){throw await wr(),Sv.error(n),(0,ar.default)(new Error(`Key '${e}' does not exist.`),ee.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!S0(e)||e==="self")throw await wr(),(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);let t=J1(e),n=await this.findKeyByName(e),i=this.components.datastore.batch();return i.delete(t),i.delete(T0(e)),await i.commit(),n}async renameKey(e,t){if(!S0(e)||e==="self")throw await wr(),(0,ar.default)(new Error(`Invalid old key name '${e}'`),ee.ERR_OLD_KEY_NAME_INVALID);if(!S0(t)||t==="self")throw await wr(),(0,ar.default)(new Error(`Invalid new key name '${t}'`),ee.ERR_NEW_KEY_NAME_INVALID);let n=J1(e),i=J1(t),o=T0(e),s=T0(t);if(await this.components.datastore.has(i))throw await wr(),(0,ar.default)(new Error(`Key '${t}' already exists`),ee.ERR_KEY_ALREADY_EXISTS);try{let c=await this.components.datastore.get(n),u=await this.components.datastore.get(o),l=JSON.parse(ie(u));l.name=t;let d=this.components.datastore.batch();return d.put(i,c),d.put(s,oe(JSON.stringify(l))),d.delete(n),d.delete(o),await d.commit(),l}catch(c){throw await wr(),c}}async exportKey(e,t){if(!S0(e))throw await wr(),(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);if(t==null)throw await wr(),(0,ar.default)(new Error("Password is required"),ee.ERR_PASSWORD_REQUIRED);let n=J1(e);try{let i=await this.components.datastore.get(n),o=ie(i),s=Lu.get(this);if(s==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let a=s.dek;return await(await b1(o,a)).export(t)}catch(i){throw await wr(),i}}async exportPeerId(e){let t="temporary-password",n=await this.exportKey(e,t),i=await b1(n,t);return await Sr(i.public.bytes,i.bytes)}async importKey(e,t,n){if(!S0(e)||e==="self")throw await wr(),(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);if(t==null)throw await wr(),(0,ar.default)(new Error("PEM encoded key is required"),ee.ERR_PEM_REQUIRED);let i=J1(e);if(await this.components.datastore.has(i))throw await wr(),(0,ar.default)(new Error(`Key '${e}' already exists`),ee.ERR_KEY_ALREADY_EXISTS);let s;try{s=await b1(t,n)}catch{throw await wr(),(0,ar.default)(new Error("Cannot read the key, most likely the password is wrong"),ee.ERR_CANNOT_READ_KEY)}let a;try{a=await s.id();let l=Lu.get(this);if(l==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let d=l.dek;t=await s.export(d)}catch(l){throw await wr(),l}let c={name:e,id:a},u=this.components.datastore.batch();return u.put(i,oe(t)),u.put(T0(e),oe(JSON.stringify(c))),await u.commit(),c}async importPeer(e,t){try{if(!S0(e))throw(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);if(t==null)throw(0,ar.default)(new Error("PeerId is required"),ee.ERR_MISSING_PRIVATE_KEY);if(t.privateKey==null)throw(0,ar.default)(new Error("PeerId.privKey is required"),ee.ERR_MISSING_PRIVATE_KEY);let n=await Xn(t.privateKey),i=J1(e);if(await this.components.datastore.has(i))throw await wr(),(0,ar.default)(new Error(`Key '${e}' already exists`),ee.ERR_KEY_ALREADY_EXISTS);let s=Lu.get(this);if(s==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let a=s.dek,c=await n.export(a),u={name:e,id:t.toString()},l=this.components.datastore.batch();return l.put(i,oe(c)),l.put(T0(e),oe(JSON.stringify(u))),await l.commit(),u}catch(n){throw await wr(),n}}async getPrivateKey(e){if(!S0(e))throw await wr(),(0,ar.default)(new Error(`Invalid key name '${e}'`),ee.ERR_INVALID_KEY_NAME);try{let t=J1(e),n=await this.components.datastore.get(t);return ie(n)}catch(t){throw await wr(),Sv.error(t),(0,ar.default)(new Error(`Key '${e}' does not exist.`),ee.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){var a,c,u,l;if(typeof e!="string")throw await wr(),(0,ar.default)(new Error(`Invalid old pass type '${typeof e}'`),ee.ERR_INVALID_OLD_PASS_TYPE);if(typeof t!="string")throw await wr(),(0,ar.default)(new Error(`Invalid new pass type '${typeof t}'`),ee.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await wr(),(0,ar.default)(new Error(`Invalid pass length ${t.length}`),ee.ERR_INVALID_PASS_LENGTH);Sv("recreating keychain");let n=Lu.get(this);if(n==null)throw(0,ar.default)(new Error("dek missing"),ee.ERR_INVALID_PARAMETERS);let i=n.dek;this.init.pass=t;let o=t!=null&&((a=this.init.dek)==null?void 0:a.salt)!=null?L7(t,this.init.dek.salt,(c=this.init.dek)==null?void 0:c.iterationCount,(u=this.init.dek)==null?void 0:u.keyLength,(l=this.init.dek)==null?void 0:l.hash):"";Lu.set(this,{dek:o});let s=await this.listKeys();for(let d of s){let h=await this.components.datastore.get(J1(d.name)),f=ie(h),m=await b1(f,i),w=o.toString(),_=await m.export(w),E=this.components.datastore.batch(),S={name:d.name,id:d.id};E.put(J1(d.name),oe(_)),E.put(T0(d.name),oe(JSON.stringify(S))),await E.commit()}Sv("keychain reconstructed")}};async function dp(r){try{return{status:"fulfilled",value:await r,isFulfilled:!0,isRejected:!1}}catch(e){return{status:"rejected",reason:e,isFulfilled:!1,isRejected:!0}}}var $L=class{constructor(e){F(this,"value");F(this,"next");this.value=e}},ta,X3,Q3,fp=class{constructor(){mr(this,ta);mr(this,X3);mr(this,Q3);this.clear()}enqueue(e){let t=new $L(e);Se(this,ta)?(Se(this,X3).next=t,Vt(this,X3,t)):(Vt(this,ta,t),Vt(this,X3,t)),Hu(this,Q3)._++}dequeue(){let e=Se(this,ta);if(e)return Vt(this,ta,Se(this,ta).next),Hu(this,Q3)._--,e.value}peek(){if(Se(this,ta))return Se(this,ta).value}clear(){Vt(this,ta,void 0),Vt(this,X3,void 0),Vt(this,Q3,0)}get size(){return Se(this,Q3)}*[Symbol.iterator](){let e=Se(this,ta);for(;e;)yield e.value,e=e.next}};ta=new WeakMap,X3=new WeakMap,Q3=new WeakMap;function KL(r){if(!((Number.isInteger(r)||r===Number.POSITIVE_INFINITY)&&r>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let e=new fp,t=0,n=()=>{t--,e.size>0&&e.dequeue()()},i=async(a,c,u)=>{t++;let l=(async()=>a(...u))();c(l);try{await l}catch{}n()},o=(a,c,u)=>{e.enqueue(i.bind(void 0,a,c,u)),(async()=>(await Promise.resolve(),t<r&&e.size>0&&e.dequeue()()))()},s=(a,...c)=>new Promise(u=>{o(a,u,c)});return Object.defineProperties(s,{activeCount:{get:()=>t},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),s}async function jL(r,e={}){let{concurrency:t=Number.POSITIVE_INFINITY}=e,n=KL(t);return Promise.all(r.map(i=>i&&typeof i.then=="function"?dp(i):typeof i=="function"?dp(n(()=>i())):dp(Promise.resolve(i))))}var O5=L(fe(),1);var GL=class extends Map{constructor(t){super();F(this,"metric");let{name:n,metrics:i}=t;this.metric=i.registerMetric(n),this.updateComponentMetric()}set(t,n){return super.set(t,n),this.updateComponentMetric(),this}delete(t){let n=super.delete(t);return this.updateComponentMetric(),n}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}};function as(r){let{name:e,metrics:t}=r,n;return t!=null?n=new GL({name:e,metrics:t}):n=new Map,n}var Z3=z("libp2p:transports"),Tv=class extends at{constructor(e,t={}){super(),this.components=e,this.started=!1,this.transports=new Map,this.listeners=as({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=t.faultTolerance??Au.FATAL_ALL}add(e){let t=e[Symbol.toStringTag];if(t==null)throw(0,O5.default)(new Error("Transport must have a valid tag"),ee.ERR_INVALID_KEY);if(this.transports.has(t))throw(0,O5.default)(new Error("There is already a transport with this tag"),ee.ERR_DUPLICATE_TRANSPORT);Z3("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}async start(){let e=this.components.addressManager.getListenAddrs();await this.listen(e),this.started=!0}async stop(){let e=[];for(let[t,n]of this.listeners)for(Z3("closing listeners for %s",t);n.length>0;){let i=n.pop();i!=null&&e.push(i.close())}await Promise.all(e),Z3("all listeners closed");for(let t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){let n=this.transportForMultiaddr(e);if(n==null)throw(0,O5.default)(new Error(`No transport available for address ${String(e)}`),ee.ERR_TRANSPORT_UNAVAILABLE);try{return await n.dial(e,{...t,upgrader:this.components.upgrader})}catch(i){throw i.code==null&&(i.code=ee.ERR_TRANSPORT_DIAL_FAILED),i}}getAddrs(){let e=[];for(let t of this.listeners.values())for(let n of t)e=[...e,...n.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(e){for(let t of this.transports.values())if(t.filter([e]).length>0)return t}async listen(e){if(e==null||e.length===0){Z3("no addresses were provided for listening, this node is dial only");return}let t=[];for(let[n,i]of this.transports.entries()){let o=i.filter(e),s=[];for(let u of o){Z3("creating listener for %s on %s",n,u);let l=i.createListener({upgrader:this.components.upgrader}),d=this.listeners.get(n);d==null&&(d=[],this.listeners.set(n,d)),d.push(l),l.addEventListener("listening",()=>{this.dispatchEvent(new be("listener:listening",{detail:l}))}),l.addEventListener("close",()=>{this.dispatchEvent(new be("listener:close",{detail:l}))}),s.push(l.listen(u))}if(s.length===0){t.push(n);continue}if((await jL(s)).find(u=>u.isFulfilled)==null&&this.faultTolerance!==Au.NO_FATAL)throw(0,O5.default)(new Error(`Transport (${n}) could not listen on any available address`),ee.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){let n=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===Au.FATAL_ALL)throw(0,O5.default)(new Error(n),ee.ERR_NO_VALID_ADDRESSES);Z3(`libp2p in dial mode only: ${n}`)}}async remove(e){Z3("removing %s",e);for(let t of this.listeners.get(e)??[])await t.close();this.transports.delete(e),this.listeners.delete(e)}async removeAll(){let e=[];for(let t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}};var Mn=L(fe(),1);var I0="/multistream/1.0.0";function R$e(r){return r[Symbol.asyncIterator]!=null}function k$e(r){if(R$e(r))return(async()=>{for await(let e of r)return e})();for(let e of r)return e}var Iv=k$e;var D$e=z("libp2p:mss"),cde=oe(`
`);function hp(r){let e=new lt(r,cde);return Tu.single(e)}function J3(r,e,t={}){let n=hp(e);t.writeBytes===!0?r.push(n.subarray()):r.push(n)}function ude(r,e,t={}){let n=new lt;for(let i of e)n.append(hp(i));t.writeBytes===!0?r.push(n.subarray()):r.push(n)}async function N$e(r,e){let t=1,n={[Symbol.asyncIterator]:()=>n,next:async()=>r.next(t)},i=n;(e==null?void 0:e.signal)!=null&&(i=sp(n,e.signal));let o=a=>{t=a},s=await k3(i,a=>D3(a,{onLength:o,maxDataLength:1024}),async a=>Iv(a));if(s==null||s.length===0)throw new X("no buffer returned","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(s.get(s.byteLength-1)!==cde[0])throw D$e.error("Invalid mss message - missing newline - %s",s.subarray()),new X("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return s.sublist(0,-1)}async function L5(r,e){let t=await N$e(r,e);return ie(t.subarray())}var pp=z("libp2p:mss:select");async function mp(r,e,t={}){e=Array.isArray(e)?[...e]:[e];let{reader:n,writer:i,rest:o,stream:s}=R5(r),a=e.shift();if(a==null)throw new Error("At least one protocol must be specified");pp.trace('select: write ["%s", "%s"]',I0,a);let c=oe(I0),u=oe(a);ude(i,[c,u],t);let l=await L5(n,t);if(pp.trace('select: read "%s"',l),l===I0&&(l=await L5(n,t),pp.trace('select: read "%s"',l)),l===a)return o(),{stream:s,protocol:a};for(let d of e){pp.trace('select: write "%s"',d),J3(i,oe(d),t);let h=await L5(n,t);if(pp.trace('select: read "%s" for "%s"',h,d),h===d)return o(),{stream:s,protocol:d}}throw o(),new X("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}var gp=z("libp2p:mss:handle");async function yp(r,e,t){e=Array.isArray(e)?e:[e];let{writer:n,reader:i,rest:o,stream:s}=R5(r);for(;;){let a=await L5(i,t);if(gp.trace('read "%s"',a),a===I0){gp.trace('respond with "%s" for "%s"',I0,a),J3(n,oe(I0),t);continue}if(e.includes(a))return J3(n,oe(a),t),gp.trace('respond with "%s" for "%s"',a,a),o(),{stream:s,protocol:a};if(a==="ls"){J3(n,new lt(...e.map(c=>hp(oe(c)))),t),gp.trace('respond with "%s" for %s',e,a);continue}J3(n,oe("na"),t),gp('respond with "na" for "%s"',a)}}var HL=L(fe(),1);var dde=Symbol.for("@libp2p/connection");var L$e=z("libp2p:connection"),WL=class{constructor(e){let{remoteAddr:t,remotePeer:n,newStream:i,close:o,getStreams:s,stat:a}=e;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=n,this.stat={...a,status:nv},this._newStream=i,this._close=o,this._getStreams=s,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[dde](){return!0}get streams(){return this._getStreams()}async newStream(e,t){if(this.stat.status===hL)throw(0,HL.default)(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===iv)throw(0,HL.default)(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);let n=await this._newStream(e,t);return n.stat.direction="outbound",n}addStream(e){e.stat.direction="inbound"}removeStream(e){}async close(){if(!(this.stat.status===iv||this._closing)){this.stat.status=hL;try{this.streams.forEach(e=>e.close())}catch(e){L$e.error(e)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=iv}}};function fde(r){return new WL(r)}var Av=L(fe(),1);var YL=z("libp2p:registrar"),XL=32,QL=64,Cv=class{constructor(e){this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this._onConnect=this._onConnect.bind(this),this.components.connectionManager.addEventListener("peer:disconnect",this._onDisconnect),this.components.connectionManager.addEventListener("peer:connect",this._onConnect),this.components.peerStore.addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){return Array.from(new Set([...this.topologies.keys(),...this.handlers.keys()])).sort()}getHandler(e){let t=this.handlers.get(e);if(t==null)throw(0,Av.default)(new Error(`No handler registered for protocol ${e}`),ee.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){let t=this.topologies.get(e);return t==null?[]:[...t.values()]}async handle(e,t,n){if(this.handlers.has(e))throw(0,Av.default)(new Error(`Handler already registered for protocol ${e}`),ee.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);let i=Je.bind({ignoreUndefined:!0})({maxInboundStreams:XL,maxOutboundStreams:QL},n);this.handlers.set(e,{handler:t,options:i}),await this.components.peerStore.protoBook.add(this.components.peerId,[e])}async unhandle(e){let t=Array.isArray(e)?e:[e];t.forEach(n=>{this.handlers.delete(n)}),await this.components.peerStore.protoBook.remove(this.components.peerId,t)}async register(e,t){if(!poe(t))throw YL.error("topology must be an instance of interfaces/topology"),(0,Av.default)(new Error("topology must be an instance of interfaces/topology"),ee.ERR_INVALID_PARAMETERS);let n=`${(Math.random()*1e9).toString(36)}${Date.now()}`,i=this.topologies.get(e);return i==null&&(i=new Map,this.topologies.set(e,i)),i.set(n,t),await t.setRegistrar(this),n}unregister(e){for(let[t,n]of this.topologies.entries())n.has(e)&&(n.delete(e),n.size===0&&this.topologies.delete(t))}_onDisconnect(e){let t=e.detail;this.components.peerStore.protoBook.get(t.remotePeer).then(n=>{for(let i of n){let o=this.topologies.get(i);if(o!=null)for(let s of o.values())s.onDisconnect(t.remotePeer)}}).catch(n=>{YL.error(n)})}_onConnect(e){let t=e.detail;this.components.peerStore.protoBook.get(t.remotePeer).then(n=>{for(let i of n){let o=this.topologies.get(i);if(o!=null)for(let s of o.values())s.onConnect(t.remotePeer,t)}}).catch(n=>{YL.error(n)})}_onProtocolChange(e){let{peerId:t,protocols:n,oldProtocols:i}=e.detail,o=i.filter(a=>!n.includes(a)),s=n.filter(a=>!i.includes(a));for(let a of o){let c=this.topologies.get(a);if(c!=null)for(let u of c.values())u.onDisconnect(t)}for(let a of s){let c=this.topologies.get(a);if(c!=null)for(let u of c.values()){let l=this.components.connectionManager.getConnections(t)[0];l!=null&&u.onConnect(t,l)}}}};var ZL=L(Dn(),1);var JL=require("events"),Ar=z("libp2p:upgrader");function B$e(r,e){try{let{options:t}=e.getHandler(r);return t.maxInboundStreams}catch(t){if(t.code!==ee.ERR_NO_HANDLER_FOR_PROTOCOL)throw t}return XL}function M$e(r,e){try{let{options:t}=e.getHandler(r);return t.maxOutboundStreams}catch(t){if(t.code!==ee.ERR_NO_HANDLER_FOR_PROTOCOL)throw t}return QL}function hde(r,e,t){let n=0;return t.streams.forEach(i=>{i.stat.direction===e&&i.stat.protocol===r&&n++}),n}var Rv=class extends at{constructor(e,t){super(),this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach(n=>{this.connectionEncryption.set(n.protocol,n)}),this.muxers=new Map,t.muxers.forEach(n=>{this.muxers.set(n.protocol,n)}),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout}async upgradeInbound(e,t){var l,d;if(!await this.components.connectionManager.acceptIncomingConnection(e))throw(0,Mn.default)(new Error("connection denied"),ee.ERR_CONNECTION_DENIED);let i,o,s,a,c,u=new ZL.TimeoutController(this.inboundUpgradeTimeout);try{(l=JL.setMaxListeners)==null||l(1/0,u.signal)}catch{}try{let h=Ai(e,u.signal);if(e.source=h.source,e.sink=h.sink,await this.components.connectionGater.denyInboundConnection(e))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by gater.acceptConnection"),ee.ERR_CONNECTION_INTERCEPTED);(d=this.components.metrics)==null||d.trackMultiaddrConnection(e),Ar("starting the inbound connection upgrade");let f=e;if((t==null?void 0:t.skipProtection)!==!0){let m=this.components.connectionProtector;m!=null&&(Ar("protecting the inbound connection"),f=await m.protect(e))}try{if(i=f,(t==null?void 0:t.skipEncryption)!==!0){if({conn:i,remotePeer:o,protocol:c}=await this._encryptInbound(f),await this.components.connectionGater.denyInboundEncryptedConnection(o,{...f,...i}))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),ee.ERR_CONNECTION_INTERCEPTED)}else{let m=e.remoteAddr.getPeerId();if(m==null)throw(0,Mn.default)(new Error("inbound connection that skipped encryption must have a peer id"),ee.ERR_INVALID_MULTIADDR);let w=Be(m);c="native",o=w}if(s=i,(t==null?void 0:t.muxerFactory)!=null)a=t.muxerFactory;else if(this.muxers.size>0){let m=await this._multiplexInbound({...f,...i},this.muxers);a=m.muxerFactory,s=m.stream}}catch(m){throw Ar.error("Failed to upgrade inbound connection",m),m}if(await this.components.connectionGater.denyInboundUpgradedConnection(o,{...f,...i}))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),ee.ERR_CONNECTION_INTERCEPTED);return Ar("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:c,direction:"inbound",maConn:e,upgradedConn:s,muxerFactory:a,remotePeer:o})}finally{this.components.connectionManager.afterUpgradeInbound(),u.clear()}}async upgradeOutbound(e,t){var d;let n=e.remoteAddr.getPeerId(),i;if(n!=null&&(i=Be(n),await this.components.connectionGater.denyOutboundConnection(i,e)))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),ee.ERR_CONNECTION_INTERCEPTED);let o,s,a,c,u;(d=this.components.metrics)==null||d.trackMultiaddrConnection(e),Ar("Starting the outbound connection upgrade");let l=e;if((t==null?void 0:t.skipProtection)!==!0){let h=this.components.connectionProtector;h!=null&&(l=await h.protect(e))}try{if(o=l,(t==null?void 0:t.skipEncryption)!==!0){if({conn:o,remotePeer:s,protocol:c}=await this._encryptOutbound(l,i),await this.components.connectionGater.denyOutboundEncryptedConnection(s,{...l,...o}))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),ee.ERR_CONNECTION_INTERCEPTED)}else{if(i==null)throw(0,Mn.default)(new Error("Encryption was skipped but no peer id was passed"),ee.ERR_INVALID_PEER);c="native",s=i}if(a=o,(t==null?void 0:t.muxerFactory)!=null)u=t.muxerFactory;else if(this.muxers.size>0){let h=await this._multiplexOutbound({...l,...o},this.muxers);u=h.muxerFactory,a=h.stream}}catch(h){throw Ar.error("Failed to upgrade outbound connection",h),await e.close(h),h}if(await this.components.connectionGater.denyOutboundUpgradedConnection(s,{...l,...o}))throw(0,Mn.default)(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),ee.ERR_CONNECTION_INTERCEPTED);return Ar("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:e,upgradedConn:a,muxerFactory:u,remotePeer:s})}_createConnection(e){let{cryptoProtocol:t,direction:n,maConn:i,upgradedConn:o,remotePeer:s,muxerFactory:a}=e,c,u,l;a!=null&&(c=a.createStreamMuxer({direction:n,onIncomingStream:f=>{l!=null&&Promise.resolve().then(async()=>{var p;let m=this.components.registrar.getProtocols(),{stream:w,protocol:_}=await yp(f,m);if(Ar("%s: incoming stream opened on %s",n,_),l==null)return;let E=B$e(_,this.components.registrar);if(hde(_,"inbound",l)===E){f.abort((0,Mn.default)(new Error(`Too many inbound protocol streams for protocol "${_}" - limit ${E}`),ee.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS));return}f.source=w.source,f.sink=w.sink,f.stat.protocol=_,this.components.peerStore.protoBook.add(s,[_]).catch(g=>Ar.error(g)),l.addStream(f),(p=this.components.metrics)==null||p.trackProtocolStream(f,l),this._onStream({connection:l,stream:f,protocol:_})}).catch(m=>{Ar.error(m),f.stat.timeline.close==null&&f.close()})},onStreamEnd:f=>{l==null||l.removeStream(f.id)}}),u=async(f,m={})=>{var E,S;if(c==null)throw(0,Mn.default)(new Error("Stream is not multiplexed"),ee.ERR_MUXER_UNAVAILABLE);Ar("%s: starting new stream on %s",n,f);let w=await c.newStream(),_;try{if(m.signal==null){Ar("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",f),_=new ZL.TimeoutController(3e4),m.signal=_.signal;try{(E=JL.setMaxListeners)==null||E(1/0,_.signal)}catch{}}let{stream:p,protocol:g}=await mp(w,f,m),y=M$e(g,this.components.registrar);if(hde(g,"outbound",l)===y){let x=(0,Mn.default)(new Error(`Too many outbound protocol streams for protocol "${g}" - limit ${y}`),ee.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw w.abort(x),x}return this.components.peerStore.protoBook.add(s,[g]).catch(x=>Ar.error(x)),w.source=p.source,w.sink=p.sink,w.stat.protocol=g,(S=this.components.metrics)==null||S.trackProtocolStream(w,l),w}catch(p){throw Ar.error("could not create new stream",p),w.stat.timeline.close==null&&w.close(),p.code!=null?p:(0,Mn.default)(p,ee.ERR_UNSUPPORTED_PROTOCOL)}finally{_!=null&&_.clear()}},Promise.all([c.sink(o.source),o.sink(c.source)]).catch(f=>{Ar.error(f)}));let d=i.timeline;i.timeline=new Proxy(d,{set:(...f)=>(l!=null&&f[1]==="close"&&f[2]!=null&&d.close==null&&(async()=>{try{l.stat.status==="OPEN"&&await l.close()}catch(m){Ar.error(m)}finally{this.dispatchEvent(new be("connectionEnd",{detail:l}))}})().catch(m=>{Ar.error(m)}),Reflect.set(...f))}),i.timeline.upgraded=Date.now();let h=()=>{throw(0,Mn.default)(new Error("connection is not multiplexed"),ee.ERR_CONNECTION_NOT_MULTIPLEXED)};return l=fde({remoteAddr:i.remoteAddr,remotePeer:s,stat:{status:"OPEN",direction:n,timeline:i.timeline,multiplexer:c==null?void 0:c.protocol,encryption:t},newStream:u??h,getStreams:()=>c!=null?c.streams:h(),close:async()=>{await i.close(),c!=null&&c.close()}}),this.dispatchEvent(new be("connection",{detail:l})),l}_onStream(e){let{connection:t,stream:n,protocol:i}=e,{handler:o}=this.components.registrar.getHandler(i);o({connection:t,stream:n})}async _encryptInbound(e){let t=Array.from(this.connectionEncryption.keys());Ar("handling inbound crypto protocol selection",t);try{let{stream:n,protocol:i}=await yp(e,t,{writeBytes:!0}),o=this.connectionEncryption.get(i);if(o==null)throw new Error(`no crypto module found for ${i}`);return Ar("encrypting inbound connection..."),{...await o.secureInbound(this.components.peerId,n),protocol:i}}catch(n){throw(0,Mn.default)(n,ee.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){let n=Array.from(this.connectionEncryption.keys());Ar("selecting outbound crypto protocol",n);try{let{stream:i,protocol:o}=await mp(e,n,{writeBytes:!0}),s=this.connectionEncryption.get(o);if(s==null)throw new Error(`no crypto module found for ${o}`);return Ar("encrypting outbound connection to %p",t),{...await s.secureOutbound(this.components.peerId,i,t),protocol:o}}catch(i){throw(0,Mn.default)(i,ee.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){let n=Array.from(t.keys());Ar("outbound selecting muxer %s",n);try{let{stream:i,protocol:o}=await mp(e,n,{writeBytes:!0});Ar("%s selected as muxer protocol",o);let s=t.get(o);return{stream:i,muxerFactory:s}}catch(i){throw Ar.error("error multiplexing outbound stream",i),(0,Mn.default)(i,ee.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){let n=Array.from(t.keys());Ar("inbound handling muxers %s",n);try{let{stream:i,protocol:o}=await yp(e,n,{writeBytes:!0}),s=t.get(o);return{stream:i,muxerFactory:s}}catch(i){throw Ar.error("error multiplexing inbound stream",i),(0,Mn.default)(i,ee.ERR_MUXER_UNAVAILABLE)}}};var td=L(fe(),1);var ed;(function(r){let e;r.codec=()=>(e==null&&(e=Na((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.protocolVersion!=null&&(n.uint32(42),n.string(t.protocolVersion)),t.agentVersion!=null&&(n.uint32(50),n.string(t.agentVersion)),t.publicKey!=null&&(n.uint32(10),n.bytes(t.publicKey)),t.listenAddrs!=null)for(let o of t.listenAddrs)n.uint32(18),n.bytes(o);if(t.observedAddr!=null&&(n.uint32(34),n.bytes(t.observedAddr)),t.protocols!=null)for(let o of t.protocols)n.uint32(26),n.string(o);t.signedPeerRecord!=null&&(n.uint32(66),n.bytes(t.signedPeerRecord)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={listenAddrs:[],protocols:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 5:i.protocolVersion=t.string();break;case 6:i.agentVersion=t.string();break;case 1:i.publicKey=t.bytes();break;case 2:i.listenAddrs.push(t.bytes());break;case 4:i.observedAddr=t.bytes();break;case 3:i.protocols.push(t.string());break;case 8:i.signedPeerRecord=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Da(t,r.codec()),r.decode=t=>Pa(t,r.codec())})(ed||(ed={}));var kv="0.0.0",pde="libp2p";var eB=`js-libp2p/${kv}`;var mde="0.1.0",gde="id",yde="id/push",wde="1.0.0",bde="1.0.0";var wp=L(Dn(),1);var bp=require("events"),vr=z("libp2p:identify"),_de=1024*8,Pv=class r{constructor(e,t){this.components=e,this.started=!1,this.init=t,this.identifyProtocolStr=`/${t.protocolPrefix}/${gde}/${wde}`,this.identifyPushProtocolStr=`/${t.protocolPrefix}/${yde}/${bde}`,this.host={protocolVersion:`${t.protocolPrefix}/${mde}`,...t.host},this.components.connectionManager.addEventListener("peer:connect",n=>{let i=n.detail;this.identify(i).catch(vr.error)}),this.components.peerStore.addEventListener("change:multiaddrs",n=>{let{peerId:i}=n.detail;this.components.peerId.equals(i)&&this.pushToPeerStore().catch(o=>vr.error(o))}),this.components.peerStore.addEventListener("change:protocols",n=>{let{peerId:i}=n.detail;this.components.peerId.equals(i)&&this.pushToPeerStore().catch(o=>vr.error(o))})}isStarted(){return this.started}async start(){this.started||(await this.components.peerStore.metadataBook.setValue(this.components.peerId,"AgentVersion",oe(this.host.agentVersion)),await this.components.peerStore.metadataBook.setValue(this.components.peerId,"ProtocolVersion",oe(this.host.protocolVersion)),await this.components.registrar.handle(this.identifyProtocolStr,e=>{this._handleIdentify(e).catch(t=>{vr.error(t)})},{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),await this.components.registrar.handle(this.identifyPushProtocolStr,e=>{this._handlePush(e).catch(t=>{vr.error(t)})},{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams}),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.identifyProtocolStr),await this.components.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async push(e){let t=await this.components.peerStore.addressBook.getRawEnvelope(this.components.peerId),n=this.components.addressManager.getAddresses().map(s=>s.bytes),i=await this.components.peerStore.protoBook.get(this.components.peerId),o=e.map(async s=>{var u;let a,c=new wp.TimeoutController(this.init.timeout);try{(u=bp.setMaxListeners)==null||u(1/0,c.signal)}catch{}try{a=await s.newStream([this.identifyPushProtocolStr],{signal:c.signal}),await Ai(a,c.signal).sink(Ke([ed.encode({listenAddrs:n,signedPeerRecord:t,protocols:i})],Bn()))}catch(l){vr.error("could not push identify update to peer",l)}finally{a!=null&&a.close(),c.clear()}});await Promise.all(o)}async pushToPeerStore(){if(!this.isStarted())return;let e=[];for(let t of this.components.connectionManager.getConnections()){let n=t.remotePeer;(await this.components.peerStore.get(n)).protocols.includes(this.identifyPushProtocolStr)&&e.push(t)}await this.push(e)}async _identify(e,t={}){var s;let n,i=t.signal,o;if(i==null){n=new wp.TimeoutController(this.init.timeout),i=n.signal;try{(s=bp.setMaxListeners)==null||s(1/0,n.signal)}catch{}}try{o=await e.newStream([this.identifyProtocolStr],{signal:i});let a=Ai(o,i),c=await Ke([],a,gn({maxDataLength:this.init.maxIdentifyMessageSize??_de}),async u=>await xn(u));if(c==null)throw(0,td.default)(new Error("No data could be retrieved"),ee.ERR_CONNECTION_ENDED);try{return ed.decode(c)}catch(u){throw(0,td.default)(u,ee.ERR_INVALID_MESSAGE)}}finally{n!=null&&n.clear(),o!=null&&o.close()}}async identify(e,t={}){let n=await this._identify(e,t),{publicKey:i,listenAddrs:o,protocols:s,observedAddr:a,signedPeerRecord:c,agentVersion:u,protocolVersion:l}=n;if(i==null)throw(0,td.default)(new Error("public key was missing from identify message"),ee.ERR_MISSING_PUBLIC_KEY);let d=await Sr(i);if(!e.remotePeer.equals(d))throw(0,td.default)(new Error("identified peer does not match the expected peer"),ee.ERR_INVALID_PEER);if(this.components.peerId.equals(d))throw(0,td.default)(new Error("identified peer is our own peer id?"),ee.ERR_INVALID_PEER);let h=r.getCleanMultiaddr(a);if(c!=null){vr("received signed peer record from %p",d);try{let f=await go.openAndCertify(c,qs.DOMAIN);if(!f.peerId.equals(d))throw(0,td.default)(new Error("identified peer does not match the expected peer"),ee.ERR_INVALID_PEER);if(await this.components.peerStore.addressBook.consumePeerRecord(f)){await this.components.peerStore.protoBook.set(d,s),u!=null&&await this.components.peerStore.metadataBook.setValue(d,"AgentVersion",oe(u)),l!=null&&await this.components.peerStore.metadataBook.setValue(d,"ProtocolVersion",oe(l)),vr("identify completed for peer %p and protocols %o",d,s);return}}catch(f){vr("received invalid envelope, discard it and fallback to listenAddrs is available",f)}}else vr("no signed peer record received from %p",d);vr("falling back to legacy addresses from %p",d);try{await this.components.peerStore.addressBook.set(d,o.map(f=>Ee(f)))}catch(f){vr.error("received invalid addrs",f)}await this.components.peerStore.protoBook.set(d,s),u!=null&&await this.components.peerStore.metadataBook.setValue(d,"AgentVersion",oe(u)),l!=null&&await this.components.peerStore.metadataBook.setValue(d,"ProtocolVersion",oe(l)),vr("identify completed for peer %p and protocols %o",d,s),vr("received observed address of %s",h==null?void 0:h.toString())}async _handleIdentify(e){var o;let{connection:t,stream:n}=e,i=new wp.TimeoutController(this.init.timeout);try{(o=bp.setMaxListeners)==null||o(1/0,i.signal)}catch{}try{let s=this.components.peerId.publicKey??new Uint8Array(0),a=await this.components.peerStore.get(this.components.peerId),c=this.components.addressManager.getAddresses().map(f=>f.decapsulateCode(Ht("p2p").code)),u=a.peerRecordEnvelope;if(c.length>0&&u==null){let f=new qs({peerId:this.components.peerId,multiaddrs:c}),m=await go.seal(f,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(m),u=m.marshal().subarray()}let l=ed.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:s,listenAddrs:c.map(f=>f.bytes),signedPeerRecord:u,observedAddr:t.remoteAddr.bytes,protocols:a.protocols}),d=Ai(n,i.signal),h=Ke([l],Bn());await d.sink(h)}catch(s){vr.error("could not respond to identify request",s)}finally{n.close(),i.clear()}}async _handlePush(e){var a;let{connection:t,stream:n}=e,i=new wp.TimeoutController(this.init.timeout);try{(a=bp.setMaxListeners)==null||a(1/0,i.signal)}catch{}let o;try{let c=Ai(n,i.signal),u=await Ke([],c,gn({maxDataLength:this.init.maxIdentifyMessageSize??_de}),async l=>await xn(l));u!=null&&(o=ed.decode(u))}catch(c){return vr.error("received invalid message",c)}finally{n.close(),i.clear()}if(o==null)return vr.error("received invalid message");let s=t.remotePeer;if(this.components.peerId.equals(s)){vr("received push from ourselves?");return}if(vr("received push from %p",s),o.signedPeerRecord!=null){vr("received signedPeerRecord in push");try{let c=await go.openAndCertify(o.signedPeerRecord,qs.DOMAIN);if(await this.components.peerStore.addressBook.consumePeerRecord(c)){vr("consumed signedPeerRecord sent in push"),await this.components.peerStore.protoBook.set(s,o.protocols);return}else vr("failed to consume signedPeerRecord sent in push")}catch(c){vr("received invalid envelope, discard it and fallback to listenAddrs is available",c)}}else vr("did not receive signedPeerRecord in push");try{await this.components.peerStore.addressBook.set(s,o.listenAddrs.map(c=>Ee(c)))}catch(c){vr.error("received invalid addrs",c)}try{await this.components.peerStore.protoBook.set(s,o.protocols)}catch(c){vr.error("received invalid protocols",c)}vr("handled push from %p",s)}static getCleanMultiaddr(e){if(e!=null&&e.length>0)try{return Ee(e)}catch{}}};var B5=L(fe(),1);var _p;(function(r){let e;r.codec=()=>(e==null&&(e=Na((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||t.identifier!=="")&&(n.uint32(10),n.string(t.identifier)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={identifier:""},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.identifier=t.string();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Da(t,r.codec()),r.decode=t=>Pa(t,r.codec())})(_p||(_p={}));var Za;(function(r){let e;(function(i){i.OK="OK",i.NOT_FOUND="NOT_FOUND",i.ERROR="ERROR"})(e=r.StatusCode||(r.StatusCode={}));let t;(function(i){i[i.OK=0]="OK",i[i.NOT_FOUND=1]="NOT_FOUND",i[i.ERROR=2]="ERROR"})(t||(t={})),function(i){i.codec=()=>R2(t)}(e=r.StatusCode||(r.StatusCode={}));let n;r.codec=()=>(n==null&&(n=Na((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),(s.writeDefaults===!0||i.status!=null&&t[i.status]!==0)&&(o.uint32(8),r.StatusCode.codec().encode(i.status,o)),(s.writeDefaults===!0||i.data!=null&&i.data.byteLength>0)&&(o.uint32(18),o.bytes(i.data)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={status:e.OK,data:new Uint8Array(0)},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.status=r.StatusCode.codec().decode(i);break;case 2:s.data=i.bytes();break;default:i.skipType(c&7);break}}return s})),n),r.encode=i=>Da(i,r.codec()),r.decode=i=>Pa(i,r.codec())})(Za||(Za={}));var vde="0.0.1",Ede="fetch";var xde=L(Dn(),1),Sde=require("events");var ra=z("libp2p:fetch"),Dv=class{constructor(e,t){this.started=!1,this.components=e,this.protocol=`/${t.protocolPrefix??"libp2p"}/${Ede}/${vde}`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=t}async start(){await this.components.registrar.handle(this.protocol,e=>{this.handleMessage(e).catch(t=>{ra.error(t)}).finally(()=>{e.stream.close()})},{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(e,t,n={}){var c;ra("dialing %s to %p",this.protocol,e);let i=await this.components.connectionManager.openConnection(e,n),o,s=n.signal,a;if(s==null){ra("using default timeout of %d ms",this.init.timeout),o=new xde.TimeoutController(this.init.timeout),s=o.signal;try{(c=Sde.setMaxListeners)==null||c(1/0,o.signal)}catch{}}try{a=await i.newStream(this.protocol,{signal:s});let u=Ai(a,s);return ra("fetch %s",t),await Ke([_p.encode({identifier:t})],Bn(),u,gn(),async function(d){let h=await xn(d);if(h==null)throw(0,B5.default)(new Error("No data received"),ee.ERR_INVALID_MESSAGE);let f=Za.decode(h);switch(f.status){case Za.StatusCode.OK:return ra("received status for %s ok",t),f.data;case Za.StatusCode.NOT_FOUND:return ra("received status for %s not found",t),null;case Za.StatusCode.ERROR:{ra("received status for %s error",t);let m=ie(f.data);throw(0,B5.default)(new Error("Error in fetch protocol response: "+m),ee.ERR_INVALID_PARAMETERS)}default:throw ra("received status for %s unknown",t),(0,B5.default)(new Error("Unknown response status"),ee.ERR_INVALID_MESSAGE)}})??null}finally{o!=null&&o.clear(),a!=null&&a.close()}}async handleMessage(e){let{stream:t}=e,n=this;await Ke(t,gn(),async function*(i){let o=await xn(i);if(o==null)throw(0,B5.default)(new Error("No data received"),ee.ERR_INVALID_MESSAGE);let s=_p.decode(o),a,c=n._getLookupFunction(s.identifier);if(c!=null){ra("look up data with identifier %s",s.identifier);let u=await c(s.identifier);u!=null?(ra("sending status for %s ok",s.identifier),a={status:Za.StatusCode.OK,data:u}):(ra("sending status for %s not found",s.identifier),a={status:Za.StatusCode.NOT_FOUND,data:new Uint8Array(0)})}else{ra("sending status for %s error",s.identifier);let u=oe(`No lookup function registered for key: ${s.identifier}`);a={status:Za.StatusCode.ERROR,data:u}}yield Za.encode(a)},Bn(),t)}_getLookupFunction(e){for(let t of this.lookupFunctions.keys())if(e.startsWith(t))return this.lookupFunctions.get(t)}registerLookupFunction(e,t){if(this.lookupFunctions.has(e))throw(0,B5.default)(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),ee.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}unregisterLookupFunction(e,t){t!=null&&this.lookupFunctions.get(e)!==t||this.lookupFunctions.delete(e)}};var Cde=L(fe(),1);var Tde="1.0.0",Ide="ping";var Rde=L(Dn(),1),kde=require("events"),Ade=z("libp2p:ping"),Nv=class{constructor(e,t){this.components=e,this.started=!1,this.protocol=`/${t.protocolPrefix}/${Ide}/${Tde}`,this.init=t}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){let{stream:t}=e;Ke(t,t).catch(n=>{Ade.error(n)})}async ping(e,t={}){var u;Ade("dialing %s to %p",this.protocol,e);let n=Date.now(),i=qi(32),o=await this.components.connectionManager.openConnection(e,t),s,a=t.signal,c;if(a==null){s=new Rde.TimeoutController(this.init.timeout),a=s.signal;try{(u=kde.setMaxListeners)==null||u(1/0,s.signal)}catch{}}try{c=await o.newStream([this.protocol],{signal:a});let l=Ai(c,a),d=await Ke([i],l,async f=>await xn(f)),h=Date.now();if(d==null||!ct(i,d.subarray()))throw(0,Cde.default)(new Error("Received wrong ping ack"),ee.ERR_WRONG_PING_ACK);return h-n}finally{s!=null&&s.clear(),c!=null&&c.close()}}};var q4e=L(require("os"),1);var Nde=L(require("tty"),1),Fv=L(require("util"),1);function V$e(r,e){try{if(typeof r=="string"&&r.length>0)return z$e(r);if(typeof r=="number"&&isFinite(r))return e!=null&&e.long?$$e(r):q$e(r);throw new Error("Value is not a string or number.")}catch(t){let n=K$e(t)?`${t.message}. value=${JSON.stringify(r)}`:"An unknown error has occured.";throw new Error(n)}}function z$e(r){if(r=String(r),r.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");let e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!e)return NaN;let t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*315576e5;case"weeks":case"week":case"w":return t*6048e5;case"days":case"day":case"d":return t*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return t*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return t*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return t*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}var Lv=V$e;function q$e(r){let e=Math.abs(r);return e>=864e5?`${Math.round(r/864e5)}d`:e>=36e5?`${Math.round(r/36e5)}h`:e>=6e4?`${Math.round(r/6e4)}m`:e>=1e3?`${Math.round(r/1e3)}s`:`${r}ms`}function $$e(r){let e=Math.abs(r);return e>=864e5?Ov(r,e,864e5,"day"):e>=36e5?Ov(r,e,36e5,"hour"):e>=6e4?Ov(r,e,6e4,"minute"):e>=1e3?Ov(r,e,1e3,"second"):`${r} ms`}function Ov(r,e,t,n){let i=e>=t*1.5;return`${Math.round(r/t)} ${n}${i?"s":""}`}function K$e(r){return typeof r=="object"&&r!==null&&"message"in r}var Mv=L(require("process"),1),Dde=L(require("os"),1),tB=L(require("tty"),1);function na(r,e=globalThis.Deno?globalThis.Deno.args:Mv.default.argv){let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}var{env:Yr}=Mv.default,Bv;na("no-color")||na("no-colors")||na("color=false")||na("color=never")?Bv=0:(na("color")||na("colors")||na("color=true")||na("color=always"))&&(Bv=1);function j$e(){if("FORCE_COLOR"in Yr)return Yr.FORCE_COLOR==="true"?1:Yr.FORCE_COLOR==="false"?0:Yr.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Yr.FORCE_COLOR,10),3)}function G$e(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function H$e(r,{streamIsTTY:e,sniffFlags:t=!0}={}){let n=j$e();n!==void 0&&(Bv=n);let i=t?Bv:n;if(i===0)return 0;if(t){if(na("color=16m")||na("color=full")||na("color=truecolor"))return 3;if(na("color=256"))return 2}if("TF_BUILD"in Yr&&"AGENT_NAME"in Yr)return 1;if(r&&!e&&i===void 0)return 0;let o=i||0;if(Yr.TERM==="dumb")return o;if(Mv.default.platform==="win32"){let s=Dde.default.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Yr)return"GITHUB_ACTIONS"in Yr||"GITEA_ACTIONS"in Yr?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(s=>s in Yr)||Yr.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Yr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Yr.TEAMCITY_VERSION)?1:0;if(Yr.COLORTERM==="truecolor"||Yr.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in Yr){let s=Number.parseInt((Yr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Yr.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Yr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Yr.TERM)||"COLORTERM"in Yr?1:o}function Pde(r,e={}){let t=H$e(r,{streamIsTTY:r&&r.isTTY,...e});return G$e(t)}var W$e={stdout:Pde({isTTY:tB.default.isatty(1)}),stderr:Pde({isTTY:tB.default.isatty(2)})},Uv=W$e;function rB(r){t.debug=t,t.default=t,t.coerce=c,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Lv,t.destroy=u,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(l){let d,h=null,f,m;function w(..._){if(!w.enabled)return;let E=w,S=Number(new Date),p=S-(d||S);E.diff=p,E.prev=d,E.curr=S,d=S,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let g=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";g++;let v=t.formatters[x];if(typeof v=="function"){let T=_[g];b=v.call(E,T),_.splice(g,1),g--}return b}),t.formatArgs.call(E,_),(E.log||t.log).apply(E,_)}return w.namespace=l,w.useColors=t.useColors(),w.color=t.selectColor(l),w.extend=n,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==t.namespaces&&(f=t.namespaces,m=t.enabled(l)),m),set:_=>{h=_}}),typeof t.init=="function"&&t.init(w),w}function n(l,d){let h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d,h=(typeof l=="string"?l:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var Ode=[6,2,3,4,5,1];Uv.stderr!==!1&&(Uv.stderr??Uv).level>=2&&(Ode=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]);var M5=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Y$e(){return"colors"in M5?!!M5.colors:Nde.default.isatty(process.stderr.fd)}function X$e(r){let{namespace:e,useColors:t}=this;if(t===!0){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+Lv(this.diff)+"\x1B[0m")}else r[0]=Q$e()+e+" "+r[0]}function Q$e(){return M5.hideDate!=null?"":new Date().toISOString()+" "}function Z$e(...r){return process.stderr.write(Fv.default.format(...r)+`
`)}function J$e(r){r!=null?process.env.DEBUG=r:delete process.env.DEBUG}function eKe(){return process.env.DEBUG}function tKe(r){r.inspectOpts={};let e=Object.keys(M5);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=M5[e[t]]}function rKe(r){r.o=function(e){return this.inspectOpts.colors=this.useColors,Fv.default.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,Fv.default.inspect(e,this.inspectOpts)}}var Lde=rB({init:tKe,log:Z$e,formatArgs:X$e,save:J$e,load:eKe,useColors:Y$e,setupFormatters:rKe,colors:Ode,inspectOpts:M5});var xo=Lde;xo.formatters.b=r=>r==null?"undefined":ai.baseEncode(r);xo.formatters.t=r=>r==null?"undefined":ms.baseEncode(r);xo.formatters.m=r=>r==null?"undefined":Ud.baseEncode(r);xo.formatters.p=r=>r==null?"undefined":r.toString();xo.formatters.c=r=>r==null?"undefined":r.toString();xo.formatters.k=r=>r==null?"undefined":r.toString();xo.formatters.a=r=>r==null?"undefined":r.toString();xo.formatters.e=r=>r==null?"undefined":r.stack??r.message;function nKe(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function ia(r){let e=nKe(`${r}:trace`);return xo.enabled(`${r}:trace`)&&xo.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=xo(`${r}:trace`)),Object.assign(xo(r),{error:xo(`${r}:error`),trace:e})}var N4e=require("events"),O4e=L(oB(),1);var sB=class{constructor(){F(this,"adverts");this.adverts=[]}add(e){this.adverts.push(e)}remove(e){this.adverts=this.adverts.filter(t=>t!==e)}clear(){this.adverts=[]}forEach(e){this.adverts.forEach(t=>{e(t.service)})}async stopAll(){await Promise.all(this.adverts.map(async e=>e.stop()))}},rd=new sB;var aB=class{constructor(){F(this,"services");this.services=new Map}hasService(e,t){let n=this.services.get(e);return n==null?!1:n.has(t)}getService(e,t){let n=this.services.get(e);if(n==null)return;let i=n.get(t);if(i!=null)return i}deleteService(e,t){let n=this.services.get(e);n!=null&&(n.delete(t),n.size===0&&this.services.delete(e))}cacheService(e){let t=this.services.get(e.serviceType)??new Map;t.set(e.uniqueServiceName,e),this.services.set(e.serviceType,t)}clear(){this.services=new Map}},nd=new aB;var c4e=L(iE(),1);var o4e=L(require("http"),1),s4e=L(require("https"),1);function oKe(r,e){if(r.protocol==="http:")return o4e.default.request(r,{method:e.method,headers:e.headers});if(r.protocol==="https:")return s4e.default.request(r,{method:e.method,headers:e.headers,rejectUnauthorized:!1});throw new Error("Invalid protocol "+r.protocol)}async function a4e(r,e={}){return new Promise((t,n)=>{let i=oKe(new URL(r),e);e.body!=null&&i.write(e.body),i.end(),i.on("error",o=>{n(o)}),i.on("response",o=>{if(o.headers["content-type"]!=null&&!o.headers["content-type"].includes("/xml")){n(new Error(`Bad content type ${o.headers["content-type"]}`));return}let s="";o.on("data",a=>{s+=a.toString()}),o.on("end",()=>{t(s)}),o.on("error",a=>{n(a)})})})}async function u4e(r){r.substring(0,4)!=="http"&&(r=`http://${r}`);let e=await a4e(r,{method:"GET",headers:{accept:"application/xml"}}),t=await(0,c4e.parseStringPromise)(e,{normalize:!0,explicitArray:!1,explicitRoot:!0});return t==null?{}:t.root??t}async function oE(r,e,t,n,i){if(r==null||e==null||t==null||n==null||i==null)return;let o=!1,s=nd.getService(t,e);if(s==null&&(o=!0,s={location:new URL(n),details:{pending:!0},expires:0,serviceType:t,uniqueServiceName:e},nd.cacheService(s)),!o&&s.details.pending===!0)return;let a=null;o||(a=JSON.stringify(s.details));try{if(s.details=await u4e(n),s.expires=Date.now()+i,nd.cacheService(s),a===JSON.stringify(s.details))return;o?r.emit("service:discover",s):r.emit("service:update",s)}catch(c){nd.deleteService(t,e),r.emit("error",c)}}var l4e="ssdp:alive",sE="ssdp:byebye";function d4e(r,e){if(!(e.LOCATION==null||e.USN==null||e.NT==null||e.NTS==null)){if(e.NTS===sE){nd.deleteService(e.NT,e.USN),r.emit("service:remove",e.USN);return}oE(r,e.USN,e.NT,e.LOCATION,e.ttl()).catch(t=>{r.emit("error",t)})}}var aE=(r,e,t)=>{r.emit("ssdp:send-message","NOTIFY * HTTP/1.1",{NT:e.usn,NTS:t,USN:`${r.udn}::${e.usn}`,"CACHE-CONTROL":`max-age=${Math.round(e.ttl/1e3)}`,SERVER:r.signature,LOCATION:e.location})};var y4e=L(require("http"),1);var f4e=require("net");async function h4e(){return await new Promise((r,e)=>{let t=(0,f4e.createServer)(),n=0;t.once("listening",()=>{let i=t.address();if(i==null)return e(new Error("Server was not listening"));if(typeof i=="string")return e(new Error("Server was Unix Socket"));n=i.port,t.close()}),t.once("close",()=>{r(n)}),t.once("error",e),t.listen(0,"127.0.0.1")})}function p4e(r,e,t){r().then(n=>{t.writeHead(200,{"Content-Type":"text/xml"}),t.end(n)}).catch(n=>{t.writeHead(500),t.end(n)})}var m4e=L(require("os"),1);function g4e(r,e){let t=[],n=m4e.default.networkInterfaces();return Object.values(n).forEach(i=>{i!=null&&i.forEach(o=>{o.internal||(o.family==="IPv4"&&r&&t.push(o),o.family==="IPv6"&&e&&t.push(o))})}),t}async function w4e(r,e){if(e.location!=null)return async()=>Promise.resolve();let t=[];return e.location={},await Promise.all(r.sockets.map(async n=>Promise.all(g4e(n.type==="udp4"&&e.ipv4,n.type==="udp6"&&e.ipv6).map(async i=>{await h4e().then(async o=>{await new Promise((s,a)=>{let c="http://";n.type==="udp6"?c+=`[${i.address}]`:c+=i.address,c+=`:${o}`,e.location[n.type]=c;let u=y4e.default.createServer((d,h)=>{p4e(e.details,d,h)}),l=n.address();u.listen(o,l.address,()=>{s()}),u.on("error",d=>{a(d)}),t.push(u)})})})))),async()=>{await Promise.all(t.map(async n=>new Promise((i,o)=>{n.close(),i()})))}}var b4e=L(iE(),1);function _4e(r,e){if(e==null)throw new Error("Empty advert passed");if(e.usn==null)throw new Error("Advert should have a usn property");let t=Je(e,{usn:e.usn,interval:1e4,ttl:18e5,ipv4:!0,ipv6:!0,location:null,details:{$:{xmlns:"urn:schemas-upnp-org:device-1-0"},specVersion:{major:1,minor:1},URLBase:"http://example.com",device:{deviceType:e.usn,friendlyName:"A friendly device name",manufacturer:"Manufactuer name",manufacturerURL:"http://example.com",modelDescription:"A description of the device",modelName:"A model name",modelNumber:"A vendor specific model number",modelURL:"http://example.com",serialNumber:"A device specific serial number",UDN:r.udn,presentationURL:"index.html"}}}),n=t.details;return t.details=async()=>new Promise((i,o)=>{try{let s=new b4e.default.Builder;i(s.buildObject(n))}catch(s){o(s)}}),t}async function v4e(r,e){let t=_4e(r,e),n=await w4e(r,t),i,o=()=>{aE(r,t,l4e),i=setTimeout(o,t.interval)};aE(r,t,sE),o();let s={service:t,stop:async()=>{clearTimeout(i),aE(r,t,sE),await n(),rd.remove(s)}};return rd.add(s),s}function E4e(r,e,t){e.ST!=null&&rd.forEach(n=>{(e.ST==="ssdp:all"||n.usn.toLowerCase()===e.ST.toLowerCase())&&r.emit("ssdp:send-message","HTTP/1.1 200 OK",{ST:e.ST==="ssdp:all"?n.usn:e.ST,USN:`${r.udn}::${n.usn}`,LOCATION:n.location,"CACHE-CONTROL":`max-age=${Math.round(n.ttl/1e3)}`,DATE:new Date().toUTCString(),SERVER:r.signature,EXT:""},t)})}var x4e=require("dgram");async function S4e(r,e){return Promise.all(r.options.sockets.map(async t=>new Promise((n,i)=>{let o=(0,x4e.createSocket)({type:t.type,reuseAddr:!0,signal:e},(s,a)=>{r.emit("transport:incoming-message",s,a)});o.bind(t.bind.port,t.bind.address),o.options=t,o.on("error",s=>{r.emit("error",s)}),o.on("listening",()=>{try{o.addMembership(t.broadcast.address,o.address().address),o.setBroadcast(!0),o.setMulticastTTL(t.maxHops),n(o)}catch(s){s.message=`Adding membership ${t.broadcast.address} failed - ${s.message}`,i(s)}})})))}var I4e=require("crypto"),A4e=require("module");function T4e(r){return Je(r??{},{type:"udp4",broadcast:{address:"239.255.255.250",port:1900},bind:{address:"0.0.0.0",port:1900},maxHops:4})}var lKe={},sKe=(0,A4e.createRequire)(lKe.url),{name:aKe,version:cKe}=sKe("../../package.json"),uKe=`node.js/${process.version.substring(1)} UPnP/1.1 ${aKe}/${cKe}`;function C4e(r){return Je(r??{},{usn:`uuid:${I4e.webcrypto.randomUUID()}`,signature:uKe,sockets:[{}].map(T4e),retry:{times:5,interval:5e3}})}function R4e(r,e){e=e??"ssdp:all",r.emit("ssdp:send-message","M-SEARCH * HTTP/1.1",{ST:e,MAN:"ssdp:discover",MX:0})}function k4e(r,e){oE(r,e.USN,e.ST,e.LOCATION,e.ttl()).catch(t=>{r.emit("error",t)})}var dKe="SEARCH-RESPONSE";function P4e(r,e,t){let n=e.toString("utf8").trim().split(/\r?\n/),i=n.shift();if(i==null)return;let o={remote:()=>t};if(i.endsWith("* HTTP/1.1"))i=i.split(" ")[0];else if(i==="HTTP/1.1 200 OK")i=dKe;else return;if(n.forEach(function(s){let a=s.indexOf(":"),c=s.substring(0,a).toUpperCase();c=c.trim();let u=s.substring(a+1);if(u=u.trim(),o[c]=fKe(u),c==="CACHE-CONTROL"){let l=parseInt(u.toLowerCase().split("max-age=")[1],10);o.ttl=()=>l*1e3}}),i=i.toLowerCase(),!["m-search","notify","search-response"].includes(i))throw new Error(`unknown ssdp message type ${i}`);r.emit(`ssdp:${i}`,o,t)}function fKe(r){let e=r.length;r.substring(0,1)==='"'&&r.substring(e-1)==='"'&&(r=r.substring(1,e-1));let t=parseFloat(r);return!isNaN(t)&&t.toString()===r?t:r.trim()}function hKe(r){let e=r.trim().split(".");if(e.length!==4)return!1;for(let t=0;t<e.length;t++){let n=parseInt(e[t],10);if(n<0||n>255)return!1}return!0}var pKe=(r,e)=>!(e.type==="udp4"&&hKe(r.address));function D4e(r,e,t,n){Promise.all(r.sockets.map(async i=>{await new Promise((o,s)=>{if(i.closed){o();return}let a=n??i.options.broadcast;if(a!=null&&pKe(a,i)){o();return}t.LOCATION!=null&&(t.LOCATION=t.LOCATION[i.type]);let c=[e];e.startsWith("HTTP/1.1")||c.push(`HOST: ${i.options.broadcast.address}:${i.options.broadcast.port}`),Object.keys(t).forEach(function(l){c.push(`${l}: ${t[l]}`)}),c.push(`\r
`);let u=Buffer.from(c.join(`\r
`));r.emit("transport:outgoing-message",i,u,a),i.send(u,0,u.length,a.port,a.address,l=>{if(l!=null){s(l);return}o()})})})).catch(i=>{r.emit("error",i)})}var wB=class extends N4e.EventEmitter{constructor(t){super();F(this,"udn");F(this,"signature");F(this,"sockets");F(this,"options");F(this,"abortController");this.options=C4e(t),this.udn=this.options.udn,this.signature=this.options.signature,this.sockets=[],this.abortController=new AbortController}async start(){this.sockets=await S4e(this,this.abortController.signal),this.on("transport:incoming-message",P4e.bind(null,this)),this.on("ssdp:send-message",D4e.bind(null,this)),this.on("ssdp:m-search",E4e.bind(null,this)),this.on("ssdp:notify",d4e.bind(null,this)),this.on("ssdp:search-response",k4e.bind(null,this))}async stop(){await rd.stopAll(),await Promise.all(this.sockets.map(async t=>{await new Promise(n=>{t.on("close",()=>{n()}),t.close(),t.closed=!0})})),this.abortController.abort()}async advertise(t){return v4e(this,t)}async*discover(t){let n=new O4e.EventIterator(({push:i})=>{let o=s=>{t!=null&&s.serviceType!==t||i(s)};return this.addListener("service:discover",o),()=>{this.removeListener("service:discover",o)}});R4e(this,t),yield*n}};async function L4e(r={}){let e=new wB(r);return r.start!==!1&&await e.start(),e}var cE=ia("nat-port-mapper:discovery"),B4e="urn:schemas-upnp-org:device:InternetGatewayDevice:1",M4e=6e4,mKe=M4e*60;function U4e(r={}){let e=r.timeout??mKe,t=r.discoveryTimeout??M4e,n,i;return()=>{let o,s;return{gateway:async()=>{if(n!=null&&!(i<Date.now()))return n;if(r.gateway!=null)cE("Using overridden gateway address %s",r.gateway),r.gateway.startsWith("http")||(r.gateway=`http://${r.gateway}`),i=Date.now()+e,n={location:new URL(r.gateway),details:{device:{serviceList:{service:[]},deviceList:{device:[]}}},expires:i,serviceType:B4e,uniqueServiceName:"unknown"};else{o==null&&(o=await L4e({start:!1}),o.on("error",l=>{cE.error("ssdp error",l)}),await o.start()),cE("Discovering gateway");let c=jc(Iv(o.discover(B4e)),{milliseconds:t});s=c.clear;let u=await c;if(u==null)throw new Error("Could not discover gateway");cE("Discovered gateway %s",u.location),n=u,i=Date.now()+e}return n},cancel:async()=>{o!=null&&await o.stop(),s!=null&&s()}}}}var gKe=L(fe(),1);var QYt=ia("nat-port-mapper:pmp");var z4e=L(iE(),1);var F4e=L(require("http"),1),V4e=L(require("https"),1);var yKe=ia("nat-port-mapper:upnp:fetch");function wKe(r,e){if(r.protocol==="http:")return F4e.default.request(r,{method:e.method,headers:e.headers,signal:e.signal});if(r.protocol==="https:")return V4e.default.request(r,{method:e.method,headers:e.headers,rejectUnauthorized:!1,signal:e.signal});throw new Error("Invalid protocol "+r.protocol)}async function bB(r,e){return new Promise((t,n)=>{let i=wKe(r,e);e.body!=null&&i.write(e.body),i.end(),i.on("error",o=>{n(o)}),i.on("response",o=>{if(o.statusCode===302&&o.headers.location!=null){yKe("Redirecting to %s",o.headers.location),bB(new URL(o.headers.location),e).then(t,n);return}if(o.statusCode!==200)throw new Error(`Request failed: ${o.statusCode}`);if(o.headers["content-type"]!=null&&!o.headers["content-type"].includes("/xml")){n(new Error("Bad content type "+o.headers["content-type"]));return}let s="";o.on("data",a=>{s+=a.toString()}),o.on("end",()=>{t(s)}),o.on("error",a=>{n(a)})})})}var _B=ia("nat-port-mapper:upnp:device"),uE=class{constructor(e){F(this,"service");F(this,"services");this.service=e,this.services=["urn:schemas-upnp-org:service:WANIPConnection:1","urn:schemas-upnp-org:service:WANIPConnection:2","urn:schemas-upnp-org:service:WANPPPConnection:1"]}async run(e,t,n){let i=this.getService(this.services),o=`<?xml version="1.0"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <s:Body>
    <u:${e} xmlns:u="${i.service}">${t.map(l=>`
      <${l[0]}>${l[1]??""}</${l[0]}>`).join("")}
    </u:${e}>
  </s:Body>
</s:Envelope>`;_B.trace("-> POST",i.controlURL),_B.trace("->",o);let s=await bB(new URL(i.controlURL),{method:"POST",headers:{"Content-Type":"text/xml","Content-Length":o.length.toString(),SOAPAction:JSON.stringify(i.service+"#"+e)},body:o,signal:n});_B.trace("<-",s);let c=await new z4e.default.Parser({explicitRoot:!1,explicitArray:!1,attrkey:"@"}).parseStringPromise(s),u=this.getNamespace(c,"http://schemas.xmlsoap.org/soap/envelope/");return c[u+"Body"]}getService(e){let[t]=this.parseDescription(this.service.details).services.filter(function(o){return e.includes(o.serviceType)});if((t==null?void 0:t.controlURL)==null||t.SCPDURL==null)throw new Error("Service not found");let n=new URL(this.service.location);function i(o){let s;try{s=new URL(o)}catch{s=new URL(o,n.href)}return s.host=s.host??n.host,s.protocol=s.protocol??n.protocol,s.toString()}return{service:t.serviceType,SCPDURL:i(t.SCPDURL),controlURL:i(t.controlURL)}}parseDescription(e){let t=[],n=[];function i(a){return Array.isArray(a)?a:[a]}function o(a){a!=null&&t.push(a)}function s(a){var c,u;a!=null&&(n.push(a),((c=a.deviceList)==null?void 0:c.device)!=null&&i(a.deviceList.device).forEach(s),((u=a.serviceList)==null?void 0:u.service)!=null&&i(a.serviceList.service).forEach(o))}return s(e.device),{services:t,devices:n}}getNamespace(e,t){let n;return e["@"]!=null&&Object.keys(e["@"]).some(function(i){return!/^xmlns:/.test(i)||e["@"][i]!==t?!1:(n=i.replace(/^xmlns:/,""),!0)}),n!=null?`${n}:`:""}};var vB=ia("nat-port-mapper:upnp"),lE=class r{constructor(e){F(this,"closed");F(this,"discoverGateway");F(this,"cancelGatewayDiscovery");F(this,"abortController");this.discoverGateway=e,this.closed=!1,this.abortController=new AbortController}static createClient(e){return new r(e)}async map(e){if(this.closed)throw new Error("client is closed");let t=await this.findGateway(),n=e.description??"node:nat:upnp",i=e.protocol==="TCP"?e.protocol:"UDP",o=60*30;typeof e.ttl=="number"&&(o=e.ttl),typeof e.ttl=="string"&&!isNaN(e.ttl)&&(o=Number(e.ttl)),vB("Mapping local port %d to public port %d",e.localPort,e.publicPort),await t.run("AddPortMapping",[["NewExternalPort",e.publicPort],["NewProtocol",i],["NewInternalPort",e.localPort],["NewInternalClient",e.localAddress],["NewEnabled",1],["NewPortMappingDescription",n],["NewLeaseDuration",o],["NewProtocol",e.protocol]],this.abortController.signal)}async unmap(e){if(this.closed)throw new Error("client is closed");await(await this.findGateway()).run("DeletePortMapping",[["NewExternalPort",e.publicPort],["NewProtocol",e.protocol]],this.abortController.signal)}async externalIp(){if(this.closed)throw new Error("client is closed");vB("Discover external IP address");let t=await(await this.findGateway()).run("GetExternalIPAddress",[],this.abortController.signal),n=null;if(Object.keys(t).some(function(i){return/:GetExternalIPAddressResponse$/.test(i)?(n=i,!0):!1}),n==null)throw new Error("Incorrect response");return vB("Discovered external IP address %s",t[n].NewExternalIPAddress),t[n].NewExternalIPAddress}async findGateway(){if(this.closed)throw new Error("client is closed");let e=this.discoverGateway();this.cancelGatewayDiscovery=e.cancel;let t=await e.gateway();return this.cancelGatewayDiscovery=void 0,new uE(t)}async close(){this.closed=!0,this.abortController.abort(),this.cancelGatewayDiscovery!=null&&await this.cancelGatewayDiscovery()}};var Sp=ia("nat-port-mapper"),EB=class{constructor(e={},t){F(this,"openPorts");F(this,"ttl");F(this,"description");F(this,"gateway");F(this,"keepAlive");F(this,"keepAliveInterval");F(this,"destroyed");F(this,"client");F(this,"updateIntervals");this.ttl=e.ttl!=null?Math.max(e.ttl,60):7200,this.description=e.description??"NatAPI",this.gateway=e.gateway,this.keepAlive=e.keepAlive??!0,this.client=t,this.updateIntervals=new Map,this.keepAliveInterval=(this.ttl-600)*1e3,this.destroyed=!1,this.openPorts=[]}async map(e){if(this.destroyed)throw new Error("client is destroyed");let t=this.validateInput(e);await this.client.map(t),this.openPorts.push(t),this.keepAlive&&this.updateIntervals.set(`${t.publicPort}:${t.localPort}-${t.protocol}`,setInterval(()=>{this.client.map(t).catch(n=>{Sp("Error refreshing port mapping %d:%d for protocol %s mapped on router",t.publicPort,t.localPort,t.protocol,n)})},this.keepAliveInterval)),Sp("Port %d:%d for protocol %s mapped on router",t.publicPort,t.localPort,t.protocol)}async unmap(e){if(this.destroyed)throw new Error("client is destroyed");let t=this.validateInput(e);await this.client.unmap(t),this.openPorts=this.openPorts.filter(i=>i.publicPort!==t.publicPort&&i.protocol!==t.protocol);let n=`${t.publicPort}:${t.localPort}-${t.protocol}`;clearInterval(this.updateIntervals.get(n)),this.updateIntervals.delete(n),Sp("Port %d:%d for protocol %s unmapped on router",t.publicPort,t.localPort,t.protocol)}async close(){if(this.destroyed)throw new Error("client already closed");this.client!=null&&(Sp("Close UPnP client"),await this.client.close());for(let e of this.updateIntervals.values())clearInterval(e);this.updateIntervals.clear(),await Promise.all(this.openPorts.map(async e=>this.unmap(e)))}validateInput(e={}){if(e.localPort==null)throw new Error("invalid parameters");return{localPort:e.localPort,localAddress:e.localAddress??bKe(),publicPort:e.publicPort??e.localPort,protocol:e.protocol??"TCP",description:e.description??this.description,ttl:e.ttl??this.ttl,gateway:e.gateway??this.gateway}}async externalIp(){return this.client.externalIp()}};function bKe(){let r=q4e.default.networkInterfaces();for(let e of Object.values(r))if(e!=null){for(let t of e)if(!t.internal&&t.family!=="IPv6")return Sp("Found local address",t.address),t.address}throw new Error("Please pass a `localAddress` to the map function")}function $4e(r={}){let e=lE.createClient(U4e(r));return new EB(r,e)}var K4e=L(VS(),1),xB=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,dE=(0,K4e.default)(),od=xB&&!dE,j4e=dE&&!xB,G4e=dE&&xB,H4e=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!dE,fE=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,yXt=typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+"_"+"ENV"]==="test",W4e=typeof navigator<"u"&&navigator.product==="ReactNative";var Q4e=L(fe(),1);function Y4e(r){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r)||/^::1$/.test(r)}function X4e(r){let{address:e}=r.nodeAddress();return Y4e(e)}var SB=z("libp2p:nat"),TB=7200;function _Ke(r=1024,e=65535){return Math.floor(Math.random()*(e-r+1)+r)}var hE=class{constructor(e,t){if(this.components=e,this.started=!1,this.enabled=t.enabled,this.externalAddress=t.externalAddress,this.localAddress=t.localAddress,this.description=t.description??`${pde}@${kv} ${this.components.peerId.toString()}`,this.ttl=t.ttl??TB,this.keepAlive=t.keepAlive??!0,this.gateway=t.gateway,this.ttl<TB)throw(0,Q4e.default)(new Error(`NatManager ttl should be at least ${TB} seconds`),ee.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){od||!this.enabled||this.started||(this.started=!0,this._start().catch(e=>{SB.error(e)}))}async _start(){let e=this.components.transportManager.getAddrs();for(let t of e){let{family:n,host:i,port:o,transport:s}=t.toOptions();if(!t.isThinWaistAddress()||s!=="tcp"||X4e(t)||n!==4)continue;let a=await this._getClient(),c=this.externalAddress??await a.externalIp(),u=j3(c);if(u===!0)throw new Error(`${c} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);if(u==null)throw new Error(`${c} is not an IP address`);let l=_Ke();SB(`opening uPnP connection from ${c}:${l} to ${i}:${o}`),await a.map({publicPort:l,localPort:o,localAddress:this.localAddress,protocol:s.toUpperCase()==="TCP"?"TCP":"UDP"}),this.components.addressManager.addObservedAddr(PY({family:4,address:c,port:l},s))}}async _getClient(){return this.client!=null?this.client:(this.client=await $4e({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway}),this.client)}async stop(){if(!(od||this.client==null))try{await this.client.close(),this.client=void 0}catch(e){SB.error(e)}}};var vKe=z("libp2p:peer-record-updater"),pE=class{constructor(e){this.components=e,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.transportManager.addEventListener("listener:listening",this.update),this.components.transportManager.addEventListener("listener:close",this.update),this.components.addressManager.addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.transportManager.removeEventListener("listener:listening",this.update),this.components.transportManager.removeEventListener("listener:close",this.update),this.components.addressManager.removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then(async()=>{let e=new qs({peerId:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map(n=>n.decapsulateCode(Ht("p2p").code))}),t=await go.seal(e,this.components.peerId);await this.components.peerStore.addressBook.consumePeerRecord(t)}).catch(e=>{vKe.error("Could not update self peer record: %o",e)})}};var Z4e=L(fe(),1);var mE=class{constructor(e){this.dht=e}async findPeer(e,t={}){for await(let n of this.dht.findPeer(e,t))if(n.name==="FINAL_PEER")return n.peer;throw(0,Z4e.default)(new Error(Ot.NOT_FOUND),ee.ERR_NOT_FOUND)}async*getClosestPeers(e,t={}){for await(let n of this.dht.getClosestPeers(e,t))n.name==="FINAL_PEER"&&(yield n.peer)}};var At={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"};var br=z("libp2p:peer-store:address-book"),gE="change:multiaddrs";async function EKe(){return!0}var yE=class{constructor(e,t,n){this.dispatchEvent=e,this.store=t,this.addressFilter=n??EKe}async consumePeerRecord(e){br.trace("consumePeerRecord await write lock");let t=await this.store.lock.writeLock();br.trace("consumePeerRecord got write lock");let n,i,o;try{let s;try{s=qs.createFromProtobuf(e.payload)}catch{return br.error("invalid peer record received"),!1}n=s.peerId;let a=s.multiaddrs;if(!n.equals(e.peerId))return br("signing key does not match PeerId in the PeerRecord"),!1;if(a==null||a.length===0)return!1;if(await this.store.has(n)&&(i=await this.store.load(n),i.peerRecordEnvelope!=null)){let u=await go.createFromProtobuf(i.peerRecordEnvelope),l=qs.createFromProtobuf(u.payload);if(l.seqNumber>=s.seqNumber)return br("sequence number was lower or equal to existing sequence number - stored: %d received: %d",l.seqNumber,s.seqNumber),!1}let c=await IB(n,a,this.addressFilter,!0);o=await this.store.patchOrCreate(n,{addresses:c,peerRecordEnvelope:e.marshal().subarray()}),br("stored provided peer record for %p",s.peerId)}finally{br.trace("consumePeerRecord release write lock"),t()}return this.dispatchEvent(new be(gE,{detail:{peerId:n,multiaddrs:o.addresses.map(({multiaddr:s})=>s),oldMultiaddrs:i==null?[]:i.addresses.map(({multiaddr:s})=>s)}})),!0}async getRawEnvelope(e){br.trace("getRawEnvelope await read lock");let t=await this.store.lock.readLock();br.trace("getRawEnvelope got read lock");try{return(await this.store.load(e)).peerRecordEnvelope}catch(n){if(n.code!==At.ERR_NOT_FOUND)throw n}finally{br.trace("getRawEnvelope release read lock"),t()}}async getPeerRecord(e){let t=await this.getRawEnvelope(e);if(t!=null)return await go.createFromProtobuf(t)}async get(e){e=fn(e),br.trace("get wait for read lock");let t=await this.store.lock.readLock();br.trace("get got read lock");try{return(await this.store.load(e)).addresses}catch(n){if(n.code!==At.ERR_NOT_FOUND)throw n}finally{br.trace("get release read lock"),t()}return[]}async set(e,t){if(e=fn(e),!Array.isArray(t))throw br.error("multiaddrs must be an array of Multiaddrs"),new X("multiaddrs must be an array of Multiaddrs",At.ERR_INVALID_PARAMETERS);br.trace("set await write lock");let n=await this.store.lock.writeLock();br.trace("set got write lock");let i=!1,o,s;try{let a=await IB(e,t,this.addressFilter);if(a.length===0)return;try{if(o=await this.store.load(e),i=!0,new Set([...a.map(({multiaddr:c})=>c.toString()),...o.addresses.map(({multiaddr:c})=>c.toString())]).size===o.addresses.length&&a.length===o.addresses.length)return}catch(c){if(c.code!==At.ERR_NOT_FOUND)throw c}s=await this.store.patchOrCreate(e,{addresses:a}),br("set multiaddrs for %p",e)}finally{br.trace("set multiaddrs for %p",e),br("set release write lock"),n()}this.dispatchEvent(new be(gE,{detail:{peerId:e,multiaddrs:s.addresses.map(a=>a.multiaddr),oldMultiaddrs:o==null?[]:o.addresses.map(({multiaddr:a})=>a)}})),i||this.dispatchEvent(new be("peer",{detail:{id:e,multiaddrs:s.addresses.map(a=>a.multiaddr),protocols:s.protocols}}))}async add(e,t){if(e=fn(e),!Array.isArray(t))throw br.error("multiaddrs must be an array of Multiaddrs"),new X("multiaddrs must be an array of Multiaddrs",At.ERR_INVALID_PARAMETERS);br.trace("add await write lock");let n=await this.store.lock.writeLock();br.trace("add got write lock");let i,o,s;try{let a=await IB(e,t,this.addressFilter);if(a.length===0)return;try{if(o=await this.store.load(e),i=!0,new Set([...a.map(({multiaddr:c})=>c.toString()),...o.addresses.map(({multiaddr:c})=>c.toString())]).size===o.addresses.length)return}catch(c){if(c.code!==At.ERR_NOT_FOUND)throw c}s=await this.store.mergeOrCreate(e,{addresses:a}),br("added multiaddrs for %p",e)}finally{br.trace("set release write lock"),n()}this.dispatchEvent(new be(gE,{detail:{peerId:e,multiaddrs:s.addresses.map(a=>a.multiaddr),oldMultiaddrs:o==null?[]:o.addresses.map(({multiaddr:a})=>a)}})),i===!0&&this.dispatchEvent(new be("peer",{detail:{id:e,multiaddrs:s.addresses.map(a=>a.multiaddr),protocols:s.protocols}}))}async delete(e){e=fn(e),br.trace("delete await write lock");let t=await this.store.lock.writeLock();br.trace("delete got write lock");let n;try{try{n=await this.store.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(e,{addresses:[]})}finally{br.trace("delete release write lock"),t()}n!=null&&this.dispatchEvent(new be(gE,{detail:{peerId:e,multiaddrs:[],oldMultiaddrs:n==null?[]:n.addresses.map(({multiaddr:i})=>i)}}))}};async function IB(r,e,t,n=!1){let i=[];return await Promise.all(e.map(async o=>{if(!Ki(o))throw br.error("multiaddr must be an instance of Multiaddr"),new X("multiaddr must be an instance of Multiaddr",At.ERR_INVALID_PARAMETERS);await t(r,o)&&i.push({multiaddr:o,isCertified:n})})),i}var tc=z("libp2p:peer-store:key-book"),J4e="change:pubkey",wE=class{constructor(e,t){this.dispatchEvent=e,this.store=t}async set(e,t){if(e=fn(e),!(t instanceof Uint8Array))throw tc.error("publicKey must be an instance of Uint8Array to store data"),new X("publicKey must be an instance of PublicKey",At.ERR_INVALID_PARAMETERS);tc.trace("set await write lock");let n=await this.store.lock.writeLock();tc.trace("set got write lock");let i=!1,o;try{try{if(o=await this.store.load(e),o.pubKey!=null&&ct(o.pubKey,t))return}catch(s){if(s.code!==At.ERR_NOT_FOUND)throw s}await this.store.patchOrCreate(e,{pubKey:t}),i=!0}finally{tc.trace("set release write lock"),n()}i&&this.dispatchEvent(new be(J4e,{detail:{peerId:e,publicKey:t,oldPublicKey:o==null?void 0:o.pubKey}}))}async get(e){e=fn(e),tc.trace("get await write lock");let t=await this.store.lock.readLock();tc.trace("get got write lock");try{return(await this.store.load(e)).pubKey}catch(n){if(n.code!==At.ERR_NOT_FOUND)throw n}finally{tc("get release write lock"),t()}}async delete(e){e=fn(e),tc.trace("delete await write lock");let t=await this.store.lock.writeLock();tc.trace("delete got write lock");let n;try{try{n=await this.store.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(e,{pubKey:void 0})}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}finally{tc.trace("delete release write lock"),t()}this.dispatchEvent(new be(J4e,{detail:{peerId:e,publicKey:void 0,oldPublicKey:n==null?void 0:n.pubKey}}))}};var Rn=z("libp2p:peer-store:metadata-book"),bE="change:metadata",_E=class{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){e=fn(e),Rn.trace("get await read lock");let t=await this.store.lock.readLock();Rn.trace("get got read lock");try{return(await this.store.load(e)).metadata}catch(n){if(n.code!==At.ERR_NOT_FOUND)throw n}finally{Rn.trace("get release read lock"),t()}return new Map}async getValue(e,t){e=fn(e),Rn.trace("getValue await read lock");let n=await this.store.lock.readLock();Rn.trace("getValue got read lock");try{return(await this.store.load(e)).metadata.get(t)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}finally{Rn.trace("getValue release write lock"),n()}}async set(e,t){if(e=fn(e),!(t instanceof Map))throw Rn.error("valid metadata must be provided to store data"),new X("valid metadata must be provided",At.ERR_INVALID_PARAMETERS);Rn.trace("set await write lock");let n=await this.store.lock.writeLock();Rn.trace("set got write lock");let i;try{try{i=await this.store.load(e)}catch(o){if(o.code!==At.ERR_NOT_FOUND)throw o}await this.store.mergeOrCreate(e,{metadata:t})}finally{Rn.trace("set release write lock"),n()}this.dispatchEvent(new be(bE,{detail:{peerId:e,metadata:t,oldMetadata:i==null?new Map:i.metadata}}))}async setValue(e,t,n){if(e=fn(e),typeof t!="string"||!(n instanceof Uint8Array))throw Rn.error("valid key and value must be provided to store data"),new X("valid key and value must be provided",At.ERR_INVALID_PARAMETERS);Rn.trace("setValue await write lock");let i=await this.store.lock.writeLock();Rn.trace("setValue got write lock");let o,s;try{try{o=await this.store.load(e);let a=o.metadata.get(t);if(a!=null&&ct(n,a))return}catch(a){if(a.code!==At.ERR_NOT_FOUND)throw a}s=await this.store.mergeOrCreate(e,{metadata:new Map([[t,n]])})}finally{Rn.trace("setValue release write lock"),i()}this.dispatchEvent(new be(bE,{detail:{peerId:e,metadata:s.metadata,oldMetadata:o==null?new Map:o.metadata}}))}async delete(e){e=fn(e),Rn.trace("delete await write lock");let t=await this.store.lock.writeLock();Rn.trace("delete got write lock");let n;try{try{n=await this.store.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}n!=null&&await this.store.patch(e,{metadata:new Map})}finally{Rn.trace("delete release write lock"),t()}n!=null&&this.dispatchEvent(new be(bE,{detail:{peerId:e,metadata:new Map,oldMetadata:n.metadata}}))}async deleteValue(e,t){e=fn(e),Rn.trace("deleteValue await write lock");let n=await this.store.lock.writeLock();Rn.trace("deleteValue got write lock");let i,o;try{o=await this.store.load(e),i=o.metadata,i.delete(t),await this.store.patch(e,{metadata:i})}catch(s){if(s.code!==At.ERR_NOT_FOUND)throw s}finally{Rn.trace("deleteValue release write lock"),n()}i!=null&&this.dispatchEvent(new be(bE,{detail:{peerId:e,metadata:i,oldMetadata:o==null?new Map:o.metadata}}))}};var kn=z("libp2p:peer-store:proto-book"),vE="change:protocols",EE=class{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){kn.trace("get wait for read lock");let t=await this.store.lock.readLock();kn.trace("get got read lock");try{return(await this.store.load(e)).protocols}catch(n){if(n.code!==At.ERR_NOT_FOUND)throw n}finally{kn.trace("get release read lock"),t()}return[]}async set(e,t){if(e=fn(e),!Array.isArray(t))throw kn.error("protocols must be provided to store data"),new X("protocols must be provided",At.ERR_INVALID_PARAMETERS);kn.trace("set await write lock");let n=await this.store.lock.writeLock();kn.trace("set got write lock");let i,o;try{try{if(i=await this.store.load(e),new Set([...t]).size===i.protocols.length)return}catch(s){if(s.code!==At.ERR_NOT_FOUND)throw s}o=await this.store.patchOrCreate(e,{protocols:t}),kn("stored provided protocols for %p",e)}finally{kn.trace("set release write lock"),n()}this.dispatchEvent(new be(vE,{detail:{peerId:e,protocols:o.protocols,oldProtocols:i==null?[]:i.protocols}}))}async add(e,t){if(e=fn(e),!Array.isArray(t))throw kn.error("protocols must be provided to store data"),new X("protocols must be provided",At.ERR_INVALID_PARAMETERS);kn.trace("add await write lock");let n=await this.store.lock.writeLock();kn.trace("add got write lock");let i,o;try{try{if(i=await this.store.load(e),new Set([...i.protocols,...t]).size===i.protocols.length)return}catch(s){if(s.code!==At.ERR_NOT_FOUND)throw s}o=await this.store.mergeOrCreate(e,{protocols:t}),kn("added provided protocols for %p",e)}finally{kn.trace("add release write lock"),n()}this.dispatchEvent(new be(vE,{detail:{peerId:e,protocols:o.protocols,oldProtocols:i==null?[]:i.protocols}}))}async remove(e,t){if(e=fn(e),!Array.isArray(t))throw kn.error("protocols must be provided to store data"),new X("protocols must be provided",At.ERR_INVALID_PARAMETERS);kn.trace("remove await write lock");let n=await this.store.lock.writeLock();kn.trace("remove got write lock");let i,o;try{try{i=await this.store.load(e);let s=new Set(i.protocols);for(let a of t)s.delete(a);if(i.protocols.length===s.size)return;t=Array.from(s)}catch(s){if(s.code!==At.ERR_NOT_FOUND)throw s}o=await this.store.patchOrCreate(e,{protocols:t})}finally{kn.trace("remove release write lock"),n()}this.dispatchEvent(new be(vE,{detail:{peerId:e,protocols:o.protocols,oldProtocols:i==null?[]:i.protocols}}))}async delete(e){e=fn(e),kn.trace("delete await write lock");let t=await this.store.lock.writeLock();kn.trace("delete got write lock");let n;try{try{n=await this.store.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i}await this.store.patchOrCreate(e,{protocols:[]})}finally{kn.trace("delete release write lock"),t()}n!=null&&this.dispatchEvent(new be(vE,{detail:{peerId:e,protocols:[],oldProtocols:n.protocols}}))}};var Tp;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.addresses!=null)for(let o of t.addresses)n.uint32(10),xE.codec().encode(o,n);if(t.protocols!=null)for(let o of t.protocols)n.uint32(18),n.string(o);if(t.metadata!=null)for(let o of t.metadata)n.uint32(26),SE.codec().encode(o,n);t.pubKey!=null&&(n.uint32(34),n.bytes(t.pubKey)),t.peerRecordEnvelope!=null&&(n.uint32(42),n.bytes(t.peerRecordEnvelope)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={addresses:[],protocols:[],metadata:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.addresses.push(xE.codec().decode(t,t.uint32()));break;case 2:i.protocols.push(t.string());break;case 3:i.metadata.push(SE.codec().decode(t,t.uint32()));break;case 4:i.pubKey=t.bytes();break;case 5:i.peerRecordEnvelope=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Tp||(Tp={}));var xE;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.multiaddr!=null&&t.multiaddr.byteLength>0&&(n.uint32(10),n.bytes(t.multiaddr)),t.isCertified!=null&&(n.uint32(16),n.bool(t.isCertified)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={multiaddr:new Uint8Array(0)},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.multiaddr=t.bytes();break;case 2:i.isCertified=t.bool();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(xE||(xE={}));var SE;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.key!=null&&t.key!==""&&(n.uint32(10),n.string(t.key)),t.value!=null&&t.value.byteLength>0&&(n.uint32(18),n.bytes(t.value)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={key:"",value:new Uint8Array(0)},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.key=t.string();break;case 2:i.value=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(SE||(SE={}));var e5e=z("libp2p:peer-store:store"),t5e="/peers/",TE=class{constructor(e){this.components=e,this.lock=Xl({name:"peer-store",singleProcess:!0})}_peerIdToDatastoreKey(e){if(e.type==null)throw e5e.error("peerId must be an instance of peer-id to store data"),new X("peerId must be an instance of peer-id",At.ERR_INVALID_PARAMETERS);let t=e.toCID().toString();return new Re(`${t5e}${t}`)}async has(e){return await this.components.datastore.has(this._peerIdToDatastoreKey(e))}async delete(e){await this.components.datastore.delete(this._peerIdToDatastoreKey(e))}async load(e){let t=await this.components.datastore.get(this._peerIdToDatastoreKey(e)),n=Tp.decode(t),i=new Map;for(let o of n.metadata)i.set(o.key,o.value);return{...n,id:e,addresses:n.addresses.map(({multiaddr:o,isCertified:s})=>({multiaddr:Ee(o),isCertified:s??!1})),metadata:i,pubKey:n.pubKey??void 0,peerRecordEnvelope:n.peerRecordEnvelope??void 0}}async save(e){if(e.pubKey!=null&&e.id.publicKey!=null&&!ct(e.pubKey,e.id.publicKey))throw e5e.error("peer publicKey bytes do not match peer id publicKey bytes"),new X("publicKey bytes do not match peer id publicKey bytes",At.ERR_INVALID_PARAMETERS);let t=new Set,n=e.addresses.filter(s=>t.has(s.multiaddr.toString())?!1:(t.add(s.multiaddr.toString()),!0)).sort((s,a)=>s.multiaddr.toString().localeCompare(a.multiaddr.toString())).map(({multiaddr:s,isCertified:a})=>({multiaddr:s.bytes,isCertified:a})),i=[];[...e.metadata.keys()].sort().forEach(s=>{let a=e.metadata.get(s);a!=null&&i.push({key:s,value:a})});let o=Tp.encode({addresses:n,protocols:e.protocols.sort(),pubKey:e.pubKey,metadata:i,peerRecordEnvelope:e.peerRecordEnvelope});return await this.components.datastore.put(this._peerIdToDatastoreKey(e.id),o.subarray()),await this.load(e.id)}async patch(e,t){let n=await this.load(e);return await this._patch(e,t,n)}async patchOrCreate(e,t){let n;try{n=await this.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i;n={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._patch(e,t,n)}async _patch(e,t,n){return await this.save({...n,...t,id:e})}async merge(e,t){let n=await this.load(e);return await this._merge(e,t,n)}async mergeOrCreate(e,t){let n;try{n=await this.load(e)}catch(i){if(i.code!==At.ERR_NOT_FOUND)throw i;n={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._merge(e,t,n)}async _merge(e,t,n){var o,s;let i=new Map;return n.addresses.forEach(a=>{i.set(a.multiaddr.toString(),a.isCertified)}),(t.addresses??[]).forEach(a=>{let c=a.multiaddr.toString(),l=!!i.get(c)||a.isCertified;i.set(c,l)}),await this.save({id:e,addresses:Array.from(i.entries()).map(([a,c])=>({multiaddr:Ee(a),isCertified:c})),protocols:Array.from(new Set([...n.protocols??[],...t.protocols??[]])),metadata:new Map([...((o=n.metadata)==null?void 0:o.entries())??[],...((s=t.metadata)==null?void 0:s.entries())??[]]),pubKey:t.pubKey??(n!=null?n.pubKey:void 0),peerRecordEnvelope:t.peerRecordEnvelope??(n!=null?n.peerRecordEnvelope:void 0)})}async*all(){for await(let e of this.components.datastore.queryKeys({prefix:t5e})){let t=e.toString().split("/")[2],n=zt.decode(t);yield this.load(Mr(n))}}};var R0;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.tags!=null)for(let o of t.tags)n.uint32(10),IE.codec().encode(o,n);i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={tags:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.tags.push(IE.codec().decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(R0||(R0={}));var IE;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.name!=null&&t.name!==""&&(n.uint32(10),n.string(t.name)),t.value!=null&&(n.uint32(16),n.uint32(t.value)),t.expiry!=null&&(n.uint32(24),n.uint64(t.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={name:""},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.name=t.string();break;case 2:i.value=t.uint32();break;case 3:i.expiry=t.uint64();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(IE||(IE={}));var oa=z("libp2p:peer-store"),AE=class extends at{constructor(e,t={}){super(),this.components=e,this.store=new TE(e),this.addressBook=new yE(this.dispatchEvent.bind(this),this.store,t.addressFilter),this.keyBook=new wE(this.dispatchEvent.bind(this),this.store),this.metadataBook=new _E(this.dispatchEvent.bind(this),this.store),this.protoBook=new EE(this.dispatchEvent.bind(this),this.store)}async forEach(e){oa.trace("getPeers await read lock");let t=await this.store.lock.readLock();oa.trace("getPeers got read lock");try{for await(let n of this.store.all())n.id.equals(this.components.peerId)||e(n)}finally{oa.trace("getPeers release read lock"),t()}}async all(){let e=[];return await this.forEach(t=>{e.push(t)}),e}async delete(e){oa.trace("delete await write lock");let t=await this.store.lock.writeLock();oa.trace("delete got write lock");try{await this.store.delete(e)}finally{oa.trace("delete release write lock"),t()}}async get(e){oa.trace("get await read lock");let t=await this.store.lock.readLock();oa.trace("get got read lock");try{return await this.store.load(e)}finally{oa.trace("get release read lock"),t()}}async has(e){oa.trace("has await read lock");let t=await this.store.lock.readLock();oa.trace("has got read lock");try{return await this.store.has(e)}finally{oa.trace("has release read lock"),t()}}async tagPeer(e,t,n={}){let i=n.value??0,o=Math.round(i),s=n.ttl??void 0;if(o!==i||o<0||o>100)throw new X("Tag value must be between 0-100","ERR_TAG_VALUE_OUT_OF_BOUNDS");let a=await this.metadataBook.getValue(e,"tags"),c=[];a!=null&&(c=R0.decode(a).tags),c=c.filter(u=>u.name!==t),c.push({name:t,value:o,expiry:s==null?void 0:BigInt(Date.now()+s)}),await this.metadataBook.setValue(e,"tags",R0.encode({tags:c}).subarray())}async unTagPeer(e,t){let n=await this.metadataBook.getValue(e,"tags"),i=[];n!=null&&(i=R0.decode(n).tags),i=i.filter(o=>o.name!==t),await this.metadataBook.setValue(e,"tags",R0.encode({tags:i}).subarray())}async getTags(e){let t=await this.metadataBook.getValue(e,"tags"),n=[];t!=null&&(n=R0.decode(t).tags);let i=BigInt(Date.now()),o=n.filter(s=>s.expiry==null||s.expiry>i);return o.length!==n.length&&await this.metadataBook.setValue(e,"tags",R0.encode({tags:o}).subarray()),o.map(s=>({name:s.name,value:s.value??0}))}};var r5e=L(fe(),1),CE=class{constructor(e){this.dht=e}async provide(e){await or(this.dht.provide(e))}async*findProviders(e,t={}){for await(let n of this.dht.findProviders(e,t))n.name==="PROVIDER"&&(yield*n.providers)}async put(e,t,n){await or(this.dht.put(e,t,n))}async get(e,t){for await(let n of this.dht.get(e,t))if(n.name==="VALUE")return n.value;throw(0,r5e.default)(new Error("Not found"),"ERR_NOT_FOUND")}};var us=L(fe(),1);var RE=class{constructor(e={}){this._started=!1,this._peerId=e.peerId,this._addressManager=e.addressManager,this._peerStore=e.peerStore,this._upgrader=e.upgrader,this._metrics=e.metrics,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._connectionGater=e.connectionGater,this._contentRouting=e.contentRouting,this._peerRouting=e.peerRouting,this._datastore=e.datastore,this._connectionProtector=e.connectionProtector,this._dht=e.dht,this._pubsub=e.pubsub,this._dialer=e.dialer}isStarted(){return this._started}async beforeStart(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{e.beforeStart!=null&&await e.beforeStart()}))}async start(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{await e.start()})),this._started=!0}async afterStart(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{e.afterStart!=null&&await e.afterStart()}))}async beforeStop(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{e.beforeStop!=null&&await e.beforeStop()}))}async stop(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{await e.stop()})),this._started=!1}async afterStop(){await Promise.all(Object.values(this).filter(e=>b0(e)).map(async e=>{e.afterStop!=null&&await e.afterStop()}))}get peerId(){if(this._peerId==null)throw(0,us.default)(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this._peerId}set peerId(e){this._peerId=e}get addressManager(){if(this._addressManager==null)throw(0,us.default)(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this._addressManager}set addressManager(e){this._addressManager=e}get peerStore(){if(this._peerStore==null)throw(0,us.default)(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this._peerStore}set peerStore(e){this._peerStore=e}get upgrader(){if(this._upgrader==null)throw(0,us.default)(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this._upgrader}set upgrader(e){this._upgrader=e}get registrar(){if(this._registrar==null)throw(0,us.default)(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this._registrar}set registrar(e){this._registrar=e}get connectionManager(){if(this._connectionManager==null)throw(0,us.default)(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this._connectionManager}set connectionManager(e){this._connectionManager=e}get transportManager(){if(this._transportManager==null)throw(0,us.default)(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this._transportManager}set transportManager(e){this._transportManager=e}get connectionGater(){if(this._connectionGater==null)throw(0,us.default)(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this._connectionGater}set connectionGater(e){this._connectionGater=e}get contentRouting(){if(this._contentRouting==null)throw(0,us.default)(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this._contentRouting}set contentRouting(e){this._contentRouting=e}get peerRouting(){if(this._peerRouting==null)throw(0,us.default)(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this._peerRouting}set peerRouting(e){this._peerRouting=e}get datastore(){if(this._datastore==null)throw(0,us.default)(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this._datastore}set datastore(e){this._datastore=e}get connectionProtector(){return this._connectionProtector}set connectionProtector(e){this._connectionProtector=e}get dialer(){if(this._dialer==null)throw(0,us.default)(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this._dialer}set dialer(e){this._dialer=e}get metrics(){return this._metrics}set metrics(e){this._metrics=e}get dht(){return this._dht}set dht(e){this._dht=e}get pubsub(){return this._pubsub}set pubsub(e){this._pubsub=e}};var n5e=require("dns/promises"),i5e=n5e.Resolver;var{code:xKe}=Ht("dnsaddr");async function o5e(r,e={}){let t=new i5e;e.signal!=null&&e.signal.addEventListener("abort",()=>{t.cancel()});let n=r.getPeerId(),[,i]=r.stringTuples().find(([a])=>a===xKe)??[];if(i==null)throw new Error("No hostname found in multiaddr");let s=(await t.resolveTxt(`_dnsaddr.${i}`)).flat().map(a=>a.split("=")[1]).filter(Boolean);return n!=null&&(s=s.filter(a=>a.includes(n))),s}var kE=L(fe(),1);var CKe={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:r=>r},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:3e4,inboundUpgradeTimeout:3e4,resolvers:{dnsaddr:o5e},addressSorter:k5},connectionGater:{},transportManager:{faultTolerance:Au.FATAL_ALL},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:eB},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};function s5e(r){var t,n;let e=Je(CKe,r);if(e.transports==null||e.transports.length<1)throw(0,kE.default)(new Error(Ot.ERR_TRANSPORTS_REQUIRED),ee.ERR_TRANSPORTS_REQUIRED);if(e.connectionEncryption==null||e.connectionEncryption.length===0)throw(0,kE.default)(new Error(Ot.CONN_ENCRYPTION_REQUIRED),ee.CONN_ENCRYPTION_REQUIRED);if(e.connectionProtector===null&&((n=(t=globalThis.process)==null?void 0:t.env)==null?void 0:n.LIBP2P_FORCE_PNET)!=null)throw(0,kE.default)(new Error(Ot.ERR_PROTECTOR_REQUIRED),ee.ERR_PROTECTOR_REQUIRED);return e.identify.host.agentVersion===eB&&(H4e||j4e?e.identify.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(od||fE||G4e||W4e)&&(e.identify.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`)),e}var kB;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.id!=null&&(n.uint32(10),n.bytes(t.id)),t.pubKey!=null&&(n.uint32(18),n.bytes(t.pubKey)),t.privKey!=null&&(n.uint32(26),n.bytes(t.privKey)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.id=t.bytes();break;case 2:i.pubKey=t.bytes();break;case 3:i.privKey=t.bytes();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(kB||(kB={}));var PE=async()=>{let r=await If("Ed25519"),e=await c5e(r);if(e.type==="Ed25519")return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)};var a5e=async r=>{let e=await If("RSA",(r==null?void 0:r.bits)??2048),t=await c5e(e);if(t.type==="RSA")return t;throw new Error(`Generated unexpected PeerId type "${t.type}"`)};async function c5e(r){return Sr(l6(r.public),bC(r))}var Ap=L(fe(),1);var sa=L(fe(),1);var DE=class extends at{get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}get lan(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}get(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}findProviders(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}findPeer(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}getClosestPeers(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}provide(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}put(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}async getMode(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}async setMode(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}async refreshRoutingTable(){throw(0,sa.default)(new Error(Ot.DHT_DISABLED),ee.DHT_DISABLED)}};var k0=L(fe(),1);var NE=class extends at{constructor(){super(...arguments),this.topicValidators=new Map}isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}get multicodecs(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}getPeers(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}getTopics(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}subscribe(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}unsubscribe(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}getSubscribers(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}async publish(){throw(0,k0.default)(new Error(Ot.PUBSUB_DISABLED),ee.ERR_PUBSUB_DISABLED)}};var U5=L(fe(),1);var h5e=L(Dn(),1),DB=L(va(),1),p5e=require("events");var Ip=L(fe(),1),l5e=L(va(),1),d5e=L(AN(),1),PB=require("events");var u5e=z("libp2p:dialer:dial-request"),OE=class{constructor(e){let{addrs:t,dialAction:n,dialer:i}=e;this.addrs=t,this.dialer=i,this.dialAction=n}async run(e={}){var a;let t=this.dialer.getTokens(this.addrs.length);if(t.length<1)throw(0,Ip.default)(new Error("No dial tokens available"),ee.ERR_NO_DIAL_TOKENS);let n=new d5e.default;for(let c of t)n.push(c).catch(u=>{u5e.error(u)});let i=this.addrs.map(()=>{var u;let c=new AbortController;try{(u=PB.setMaxListeners)==null||u(1/0,c.signal)}catch{}return c});if(e.signal!=null)try{(a=PB.setMaxListeners)==null||a(1/0,e.signal)}catch{}let o=0,s=!1;try{return await Promise.any(this.addrs.map(async(c,u)=>{let l=await n.shift();if(s)throw this.dialer.releaseToken(t.splice(t.indexOf(l),1)[0]),(0,Ip.default)(new Error("dialAction already succeeded"),ee.ERR_ALREADY_SUCCEEDED);let d=i[u];if(d==null)throw(0,Ip.default)(new Error("dialAction did not come with an AbortController"),ee.ERR_INVALID_PARAMETERS);let h;try{let f=d.signal;h=await this.dialAction(c,{...e,signal:e.signal!=null?(0,l5e.anySignal)([f,e.signal]):f}),i[u]=void 0}finally{o++,this.addrs.length-o>=t.length?n.push(l).catch(f=>{u5e.error(f)}):this.dialer.releaseToken(t.splice(t.indexOf(l),1)[0])}if(h==null)throw(0,Ip.default)(new Error("dialAction led to empty object"),ee.ERR_TRANSPORT_DIAL_FAILED);return s=!0,h}))}finally{i.forEach(c=>{c!==void 0&&c.abort()}),t.forEach(c=>this.dialer.releaseToken(c))}}};var rc=z("libp2p:dialer"),LE=class{constructor(e,t={}){this.started=!1,this.addressSorter=t.addressSorter??k5,this.maxAddrsToDial=t.maxAddrsToDial??25,this.timeout=t.dialTimeout??3e4,this.maxDialsPerPeer=t.maxDialsPerPeer??4,this.tokens=[...new Array(t.maxParallelDials??100)].map((n,i)=>i),this.components=e,this.pendingDials=as({name:"libp2p_dialler_pending_dials",metrics:e.metrics}),this.pendingDialTargets=as({name:"libp2p_dialler_pending_dial_targets",metrics:e.metrics});for(let[n,i]of Object.entries(t.resolvers??{}))wR.set(n,i)}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(let e of this.pendingDials.values())try{e.controller.abort()}catch(t){rc.error(t)}this.pendingDials.clear();for(let e of this.pendingDialTargets.values())e.abort();this.pendingDialTargets.clear()}async dial(e,t={}){let{peerId:n,multiaddr:i}=sv(e);if(n!=null){if(this.components.peerId.equals(n))throw(0,U5.default)(new Error("Tried to dial self"),ee.ERR_DIALED_SELF);if(i!=null&&(rc("storing multiaddrs %p",n,i),await this.components.peerStore.addressBook.add(n,[i])),await this.components.connectionGater.denyDialPeer(n))throw(0,U5.default)(new Error("The dial request is blocked by gater.allowDialPeer"),ee.ERR_PEER_DIAL_INTERCEPTED)}rc("creating dial target for %p",n);let o=new AbortController,s=f5e();this.pendingDialTargets.set(s,o);let a=o.signal;t.signal!=null&&(a=(0,DB.anySignal)([a,t.signal]));let c;try{c=await this._createDialTarget({peerId:n,multiaddr:i},{...t,signal:a})}finally{this.pendingDialTargets.delete(s)}if(c.addrs.length===0)throw(0,U5.default)(new Error("The dial request has no valid addresses"),ee.ERR_NO_VALID_ADDRESSES);let u=this.pendingDials.get(c.id)??this._createPendingDial(c,t);try{let l=await u.promise;return rc("dial succeeded to %s",c.id),l}catch(l){throw rc("dial failed to %s",c.id,l),u.controller.signal.aborted&&(l.code=ee.ERR_TIMEOUT),rc.error(l),l}finally{u.destroy()}}async _createDialTarget(e,t){let n=[];if(Ki(e.multiaddr)&&n.push(e.multiaddr),!Ki(e.multiaddr)&&Mi(e.peerId)&&n.push(...await this._loadAddresses(e.peerId)),n=(await Promise.all(n.map(async o=>await this._resolve(o,t)))).flat().filter(o=>!!this.components.transportManager.transportForMultiaddr(o)),n=[...new Set(n.map(o=>o.toString()))].map(o=>Ee(o)),n.length>this.maxAddrsToDial)throw(0,U5.default)(new Error("dial with more addresses than allowed"),ee.ERR_TOO_MANY_ADDRESSES);let i=Mi(e.peerId)?e.peerId:void 0;if(i!=null){let o=`/p2p/${i.toString()}`;n=n.map(s=>{let a=s.getPeerId();return a==null||!i.equals(a)?s.encapsulate(o):s})}return{id:i==null?f5e():i.toString(),addrs:n}}async _loadAddresses(e){let t=await this.components.peerStore.addressBook.get(e);return(await Promise.all(t.map(async n=>await this.components.connectionGater.denyDialMultiaddr(e,n.multiaddr)?!1:n))).filter(kKe).sort(this.addressSorter).map(n=>n.multiaddr)}_createPendingDial(e,t={}){var u;let n=async(l,d={})=>{var h;if(((h=d.signal)==null?void 0:h.aborted)===!0)throw(0,U5.default)(new Error("already aborted"),ee.ERR_ALREADY_ABORTED);return await this.components.transportManager.dial(l,d).catch(f=>{throw rc.error("dial to %s failed",l,f),f})},i=new OE({addrs:e.addrs,dialAction:n,dialer:this}),o=new h5e.TimeoutController(this.timeout),s=[o.signal];t.signal!=null&&s.push(t.signal);let a=(0,DB.anySignal)(s);try{(u=p5e.setMaxListeners)==null||u(1/0,a)}catch{}let c={dialRequest:i,controller:o,promise:i.run({...t,signal:a}),destroy:()=>{o.clear(),this.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,c),c}getTokens(e){let t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),n=this.tokens.splice(0,t);return rc("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),n}releaseToken(e){this.tokens.includes(e)||(rc("token %d released",e),this.tokens.push(e))}async _resolve(e,t){if(!e.protoNames().includes("dnsaddr"))return[e];let i=await this._resolveRecord(e,t);return(await Promise.all(i.map(async a=>await this._resolve(a,t)))).flat().reduce((a,c)=>(a.find(u=>u.equals(c))==null&&a.push(c),a),[])}async _resolveRecord(e,t){try{return e=Ee(e.toString()),await e.resolve(t)}catch(n){return rc.error(`multiaddr ${e.toString()} could not be resolved`,n),[]}}};function kKe(r){return!!r}function f5e(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}var P0=z("libp2p"),NB=class extends at{constructor(e){super(),this.started=!1,this.peerId=e.peerId;let t=this.components=new RE({peerId:e.peerId,datastore:e.datastore??new C6,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...e.connectionGater}});t.peerStore=new AE(t,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore}),this.services=[t],e.metrics!=null&&(this.metrics=this.components.metrics=this.configureComponent(e.metrics(this.components))),this.peerStore=this.components.peerStore,this.peerStore.addEventListener("peer",s=>{let{detail:a}=s;this.dispatchEvent(new be("peer:discovery",{detail:a}))}),e.connectionProtector!=null&&(this.components.connectionProtector=e.connectionProtector(t)),this.components.upgrader=new Rv(this.components,{connectionEncryption:(e.connectionEncryption??[]).map(s=>this.configureComponent(s(this.components))),muxers:(e.streamMuxers??[]).map(s=>this.configureComponent(s(this.components))),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout}),this.components.dialer=new LE(this.components,e.connectionManager),this.connectionManager=this.components.connectionManager=new uv(this.components,e.connectionManager),this.components.connectionManager.addEventListener("peer:disconnect",s=>{this.dispatchEvent(new be("peer:disconnect",{detail:s.detail}))}),this.components.connectionManager.addEventListener("peer:connect",s=>{this.dispatchEvent(new be("peer:connect",{detail:s.detail}))}),this.registrar=this.components.registrar=new Cv(this.components),this.components.transportManager=new Tv(this.components,e.transportManager),this.components.addressManager=new ev(this.components,e.addresses),this.configureComponent(new pE(this.components)),this.configureComponent(new lv(this.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));let n=Y3.generateOptions();this.keychain=this.configureComponent(new Y3(this.components,{...n,...e.keychain})),this.services.push(new hE(this.components,e.nat)),e.transports.forEach(s=>{this.components.transportManager.add(this.configureComponent(s(this.components)))}),this.identifyService=new Pv(this.components,{...e.identify}),this.configureComponent(this.identifyService),e.dht!=null?this.dht=this.components.dht=e.dht(this.components):this.dht=new DE,e.pubsub!=null?this.pubsub=this.components.pubsub=e.pubsub(this.components):this.pubsub=new NE;let i=(e.peerRouters??[]).map(s=>this.configureComponent(s(this.components)));e.dht!=null&&(i.push(this.configureComponent(new mE(this.dht))),this.dht.addEventListener("peer",s=>{this.onDiscoveryPeer(s)})),this.peerRouting=this.components.peerRouting=this.configureComponent(new Q_(this.components,{...e.peerRouting,routers:i}));let o=(e.contentRouters??[]).map(s=>this.configureComponent(s(this.components)));e.dht!=null&&o.push(this.configureComponent(new CE(this.dht))),this.contentRouting=this.components.contentRouting=this.configureComponent(new J_(this.components,{routers:o})),e.relay.enabled&&(this.components.transportManager.add(this.configureComponent(new fv(this.components,e.relay))),this.configureComponent(new wv(this.components,{addressSorter:e.connectionManager.addressSorter,...e.relay}))),this.fetchService=this.configureComponent(new Dv(this.components,{...e.fetch})),this.pingService=this.configureComponent(new Nv(this.components,{...e.ping}));for(let s of e.peerDiscovery??[])this.configureComponent(s(this.components)).addEventListener("peer",c=>{this.onDiscoveryPeer(c)})}configureComponent(e){return b0(e)&&this.services.push(e),e}async start(){if(!this.started){this.started=!0,P0("libp2p is starting");try{await Promise.all(this.services.map(async e=>{e.beforeStart!=null&&await e.beforeStart()})),await Promise.all(this.services.map(e=>e.start())),await Promise.all(this.services.map(async e=>{e.afterStart!=null&&await e.afterStart()})),P0("libp2p has started")}catch(e){throw P0.error("An error occurred starting libp2p",e),await this.stop(),e}}}async stop(){this.started&&(P0("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map(async e=>{e.beforeStop!=null&&await e.beforeStop()})),await Promise.all(this.services.map(e=>e.stop())),await Promise.all(this.services.map(async e=>{e.afterStop!=null&&await e.afterStop()})),P0("libp2p has stopped"))}isStarted(){return this.started}getConnections(e){return this.components.connectionManager.getConnections(e)}getPeers(){let e=new js;for(let t of this.components.connectionManager.getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e,t={}){return await this.components.connectionManager.openConnection(e,t)}async dialProtocol(e,t,n={}){if(t==null)throw(0,Ap.default)(new Error("no protocols were provided to open a stream"),ee.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(t=Array.isArray(t)?t:[t],t.length===0)throw(0,Ap.default)(new Error("no protocols were provided to open a stream"),ee.ERR_INVALID_PROTOCOLS_FOR_STREAM);return await(await this.dial(e,n)).newStream(t,n)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e){Ki(e)&&(e=Be(e.getPeerId()??"")),await this.components.connectionManager.closeConnections(e)}async getPublicKey(e,t={}){if(P0("getPublicKey %p",e),e.publicKey!=null)return e.publicKey;let n=await this.peerStore.get(e);if(n.pubKey!=null)return n.pubKey;if(this.dht==null)throw(0,Ap.default)(new Error("Public key was not in the peer store and the DHT is not enabled"),ee.ERR_NO_ROUTERS_AVAILABLE);let i=Ye([oe("/pk/"),e.multihash.digest]);for await(let o of this.dht.get(i,t))if(o.name==="VALUE"){let s=ao(o.value);return await this.peerStore.keyBook.set(e,o.value),s.bytes}throw(0,Ap.default)(new Error(`Node not responding with its public key: ${e.toString()}`),ee.ERR_INVALID_RECORD)}async fetch(e,t,n={}){if(Ki(e)){let i=Be(e.getPeerId()??"");await this.components.peerStore.addressBook.add(i,[e]),e=i}return await this.fetchService.fetch(e,t,n)}async ping(e,t={}){if(Ki(e)){let n=Be(e.getPeerId()??"");await this.components.peerStore.addressBook.add(n,[e]),e=n}return await this.pingService.ping(e,t)}async handle(e,t,n){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async i=>{await this.components.registrar.handle(i,t,n)}))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async t=>{await this.components.registrar.unhandle(t)}))}async register(e,t){return await this.registrar.register(e,t)}unregister(e){this.registrar.unregister(e)}onDiscoveryPeer(e){let{detail:t}=e;if(t.id.toString()===this.peerId.toString()){P0.error(new Error(ee.ERR_DISCOVERED_SELF));return}t.multiaddrs.length>0&&this.components.peerStore.addressBook.add(t.id,t.multiaddrs).catch(n=>P0.error(n)),t.protocols.length>0&&this.components.peerStore.protoBook.set(t.id,t.protocols).catch(n=>P0.error(n)),this.dispatchEvent(new be("peer:discovery",{detail:t}))}};async function m5e(r){if(r.peerId==null){let e=r.datastore;if(e!=null)try{let t=new Y3({datastore:e},{...Y3.generateOptions(),...r.keychain??{}});r.peerId=await t.exportPeerId("self")}catch(t){if(t.code!=="ERR_NOT_FOUND")throw t}}return r.peerId==null&&(r.peerId=await PE()),new NB(s5e(r))}async function g5e(r){let e=await m5e(r);return r.start!==!1&&await e.start(),e}var P5e=L(v5e(),1);var E5e="/lan",x5e="/ipfs",S5e="/kad/1.0.0",T5e="/dht/record",BB="/dht/provider";var NKe=oe("/pk/");function F5(r){return{...r,multiaddrs:r.multiaddrs.filter(e=>{let[[t,n]]=e.stringTuples();if(t===53||t===54||t===55)return n!=="localhost";if(t!==4&&t!==6||n==null)return!1;let i=j3(n);return i==null?!0:!i})}}function V5(r){return{...r,multiaddrs:r.multiaddrs.filter(e=>{let[[t,n]]=e.stringTuples();if(n==="localhost")return!0;if(t!==4&&t!==6||n==null)return!1;let i=j3(n);return i??!1})}}async function nc(r){return(await ot.digest(r)).digest}async function ls(r){return await nc(r.toBytes())}function D0(r){return new Re(`${T5e}/${ie(r,"base32")}`,!1)}function I5e(r){return Ye([NKe,r.toBytes()])}function A5e(r){return ie(r.subarray(0,4))==="/pk/"}function C5e(r){return Mr(r.subarray(4))}function MB(r,e){let t=new Date;return new En(r,e,t).serialize()}function R5e(r,e=100){let t;return()=>{clearTimeout(t),t=setTimeout(()=>{r()},e)}}var D5e=L(Dn(),1);var OKe="kad-close",LKe=50,k5e=20,BKe=1e4,MKe=10,BE=class{constructor(e,t){let{kBucketSize:n,pingTimeout:i,lan:o,pingConcurrency:s,protocol:a,tagName:c,tagValue:u}=t;this.components=e,this.log=z(`libp2p:kad-dht:${o?"lan":"wan"}:routing-table`),this.kBucketSize=n??k5e,this.pingTimeout=i??BKe,this.pingConcurrency=s??MKe,this.lan=o,this.running=!1,this.protocol=a,this.tagName=c??OKe,this.tagValue=u??LKe;let l=()=>{var d,h;(d=this.metrics)==null||d.pingQueueSize.update(this.pingQueue.size),(h=this.metrics)==null||h.pingRunning.update(this.pingQueue.pending)};this.pingQueue=new On({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",l),this.pingQueue.addListener("next",l),this._onPing=this._onPing.bind(this)}isStarted(){return this.running}async start(){this.running=!0,this.components.metrics!=null&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_routing_table_size`),pingQueueSize:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_queue_size`),pingRunning:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_ping_running`)});let e=new P5e.default({localNodeId:await ls(this.components.peerId),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});this.kb=e,e.on("ping",this._onPing),this._tagPeers(e)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(e){let t=new js,n=R5e(()=>{let i=new js(e.closest(e.localNodeId,k5e).map(a=>a.peer)),o=i.difference(t),s=t.difference(i);Promise.resolve().then(async()=>{for(let a of o)await this.components.peerStore.tagPeer(a,this.tagName,{value:this.tagValue});for(let a of s)await this.components.peerStore.unTagPeer(a,this.tagName)}).catch(a=>{this.log.error("Could not update peer tags",a)}),t=i});e.on("added",()=>{n()}),e.on("removed",()=>{n()})}_onPing(e,t){this.pingQueue.add(async()=>{if(!this.running)return;let n=0;try{await Promise.all(e.map(async i=>{var s;let o;try{o=new D5e.TimeoutController(this.pingTimeout);let a={signal:o.signal};this.log("pinging old contact %p",i.peer),(await(await this.components.connectionManager.openConnection(i.peer,a)).newStream(this.protocol,a)).close(),n++}catch(a){this.running&&this.kb!=null&&(this.log.error("could not ping peer %p",i.peer,a),this.log("evicting old contact after ping failed %p",i),this.kb.remove(i.id))}finally{o!=null&&o.clear(),(s=this.metrics)==null||s.routingTableSize.update(this.size)}})),this.running&&n<e.length&&this.kb!=null&&(this.log("adding new contact %p",t.peer),this.kb.add(t))}catch(i){this.log.error("could not process k-bucket ping event",i)}}).catch(n=>{this.log.error("could not process k-bucket ping event",n)})}get size(){return this.kb==null?0:this.kb.count()}async find(e){let t=await ls(e),n=this.closestPeer(t);if(n!=null&&e.equals(n))return n}closestPeer(e){let t=this.closestPeers(e,1);if(t.length>0)return t[0]}closestPeers(e,t=this.kBucketSize){return this.kb==null?[]:this.kb.closest(e,t).map(i=>i.peer)}async add(e){var n;if(this.kb==null)throw new Error("RoutingTable is not started");let t=await ls(e);this.kb.add({id:t,peer:e}),this.log("added %p with kad id %b",e,t),(n=this.metrics)==null||n.routingTableSize.update(this.size)}async remove(e){var n;if(this.kb==null)throw new Error("RoutingTable is not started");let t=await ls(e);this.kb.remove(t),(n=this.metrics)==null||n.routingTableSize.update(this.size)}};function N0(r,e){if(r.length!==e.length)throw new Error("Inputs should have the same length");let t=c2(r.length);for(let n=0;n<r.length;n++)t[n]=r[n]^e[n];return i2(t)}var N5e=[77591,94053,60620,45849,22417,13238,102507,179931,43971,15812,24466,64694,28421,80794,13447,118511,740,6439,164565,160996,29829,65024,115728,46297,71467,26874,47057,19864,228973,57886,62422,50382,196661,98858,8131,154708,78537,104511,53134,136579,27689,126238,28199,3679,36431,48892,2655,57939,44415,38209,7970,34780,14362,51843,23108,52670,19456,36805,408716,129012,106025,12683,780,36702,96308,73261,165714,94326,2882,15786,65607,80947,49509,13763,104712,13107,21149,137011,223495,30903,87173,75141,2533,121964,131409,110026,108394,16009,75844,196819,1440,7629,23676,111231,127712,61087,121838,51872,29103,7233,30291,24088,110490,92353,17492,113372,16487,97612,2953,9394,210912,8964,7564,3852,97455,42207,110620,22643,65016,7253,129477,46969,7830,43238,127283,37807,65596,47230,53113,68778,42174,3025,72417,113389,61485,3233,165166,23272,207684,1480,109690,77717,146330,35614,21200,125839,9167,183529,102125,27762,21718,34784,24049,54922,44135,54112,71504,58952,18652,36112,90342,97581,105898,116695,25307,71711,19850,443067,72039,164371,99358,141908,26812,37120,222981,92235,26715,2272,38699,277092,32264,2507,11509,41396,133800,81066,75726,51643,71161,32364,125073,195906,88956,8820,58708,60150,171987,43866,50300,27077,51779,41724,18910,42608,24425,59574,40645,30367,16671,106324,56018,73410,30251,125091,17154,23172,186294,741,111661,148919,247761,71695,148683,76545,14202,32826,57291,56464,2121,52187,36887,19845,8465,15701,42227,10603,35024,129005,20364,271992,4876,54659,43090,48318,85917,40506,60228,35848,169730,2400,19908,21535,3638,2880,105194,37121,256836,27972,59367,47659,96184,20378,6352,132486,943,210847,347244,42708,18678,161556,4520,63681,6583,138160,207565,4182,52907,72891,36505,33320,35807,152018,13288,904,112254,139219,23049,24474,214097,14830,47960,50966,18796,25821,749,61464,11595,123216,5285,37544,9243,80395,22070,63873,23554,106570,90364,35779,887,61552,55147,3791,268203,76040,13872,53070,382004,149091,9411,70938,24590,26314,23297,60821,111335,56198,123964,28317,11625,39656,33077,122186,16619,2762,8556,43622,29039,54719,141778,30583,102425,30319,55618,4660,69006,75066,46293,24767,97976,8387,5680,68535,92362,327684,180600,43548,32552,905,167743,10812,63717,48600,4157,19832,41433,44366,169717,362623,128974,242972,74944,25914,137630,138732,9905,65119,59943,13001,10439,346877,10019,72338,47424,90540,13986,32605,74311,36273,35430,43274,490600,15654,33665,40911,16891,132492,108037,118859,30430,45629,43799,65831,25824,63966,43280,70552,34778,102075,38195,5993,20515,11742,29078,67047,980,30234,58629,68076,5792,59696,18265,2627,47407,29302,14425,46647,15604,15925,46832,5440,684,42003,235538,28764,54452,25101,40830,8023,6501,50689,77881,5650,16800,16147,110717,28112,219637,1634,58937,32412,88801,6927,3463,157022,94779,442571,325358,276,141280,75559,51300,58421,109559,35845,47623,321870,24845,42379,117252,19971,14e3,130543,19007,191657,1705,32933,10170,64831,2632,89911,20540,14737,53476,30106,91237,23474,41156,76048,294813,109786,153316,31289,4951,134188,5698,58898,79841,8216,13373,150001,56232,83956,179514,40785,36270,150581,38142,36729,128547,27488,48397,32074,69209,83991,69639,44375,66275,50325,46119,4588,100156,57453,106674,3707,32063,12250,176480,94462,73531,42286,44132,42292,34439,205098,23362,170867,80937,18578,35224,8003,28892,73415,50905,36012,44466,3377,68122,77350,88595,16048,139321,45304,216307,26958,49160,2333,32583,197092,51650,27957,49620,28596,32484,40154,16605,3672,19287,14394,82127,113881,101822,55495,45807,22719,49287,17105,21630,9213,225560,184754,78726,55879,1187,55736,20235,48276,60072,8055,40163,71435,10613,66014,111007,30011,11754,32797,96926,8244,35114,58420,5567,8879,4349,36989,72083,27721,80502,31714,21665,68483,67e3,32243,58844,22490,151524,85501,39419,31544,46585,60252,179767,135313,38991,99008,48328,21411,230904,25457,42662,73162,35923,104338,51550,37715,30664,24386,5251,34179,21686,23914,37811,77986,123822,22186,49608,218194,113768,119158,81056,136532,36573,4335,50854,77454,36591,786,55513,89905,64981,78223,20922,90512,58e3,187805,18891,142810,7204,125174,197409,232663,64781,31572,164656,137833,103498,55315,32593,91963,91694,30505,71449,150025,16975,134836,220474,56258,1789,23900,58919,39771,52833,15954,85682,182360,82050,60999,67854,36289,50792,14607,13758,73909,111848,63880,35066,107613,145156,26237,3565,8173,214338,1836,61905,82544,35483,19741,214793,18510,3395,10924,119572,75264,17466,43207,141419,82668,39303,19609,21504,19695,19065,6944,10302,38666,102996,88789,27354,75138,70106,135106,67003,20045,60619,54525,46131,115306,12445,86777,32668,68413,32737,64388,15165,34095,171569,11093,64871,119058,92294,117952,34450,66009,203796,6258,17821,52488,314552,125812,2757,95795,15139,46369,11452,76801,3035,9101,34189,14945,7202,149174,5160,74854,169046,30085,12257,76562,92934,170882,85523,121128,60225,45744,560,62173,205019,128933,53385,94,81804,5962,65887,9406,75139,46078,119549,87470,126330,115083,135620,90768,93971,66716,312353,69610,203240,65196,115979,13452,77397,23,122356,131305,48028,43698,10867,95182,47337,60657,193231,4430,32675,100177,124537,49701,68459,417255,54783,44031,66481,29365,90675,20969,21022,49332,120791,87739,113524,8715,4715,33049,64432,86239,142253,763,145381,11942,50943,44118,117335,69368,17271,82615,97767,8516,43358,61812,117693,77645,25331,71884,62816,56740,4917,126017,38232,39911,120566,45088,86073,19308,34580,62715,98835,12238,12878,32818,80514,190672,33786,124897,32390,13707,160528,8239,24113,94911,32523,8473,305619,143741,4869,226676,116030,72714,301307,245805,49902,13070,104817,63744,25320,14079,81491,66562,24649,6335,23276,12633,45891,31344,8832,19031,49267,95191,97911,27244,61726,53839,31265,81626,4566,137532,52065,115327,11846,252068,7998,22402,10126,209408,49622,16068,12953,24383,9715,82577,95468,95106,43998,60754,21093,14837,34091,72540,179063,7433,84587,192802,47914,4438,20664,45500,8855,16934,69041,12731,29041,217180,29419,22657,137482,2887,53205,550,70043,123839,10838,164726,42397,184876,58288,26641,22447,12131,116145,22995,97093,108266,6185,2832,52427,64656,5154,49928,144137,12044,141795,129976,31641,84599,35924,2502,28404,26e3,21307,63600,20886,165871,144738,353334,45550,4235,43730,54853,149395,14340,12085,6025,82291,127186,8279,7961,81927,74078,10002,50016,8795,38560,119,45637,190798,21574,133779,97318,19903,27528,199668,1330,66035,21635,72938,31184,60710,108060,31768,145285,89744,113430,39176,71121,10578,19002,67875,39253,95870,17637,38453,35956,214432,92498,9700,51981,75487,140364,44144,248414,34793,35244,4121,13131,29680,132109,116048,51552,20482,69742,41733,134398,163626,2676,12868,9786,36799,26675,82669,19252,28098,76936,92308,127797,49202,5337,128,27975,178978,22753,34262,94544,214584,43276,11332,665,58732,8484,7712,180682,90181,28567,90764,20944,68372,62049,36141,29920,115786,1365,13553,110638,163556,207080,71312,250718,214174,18727,77470,23807,32279,108909,117314,4887,61022,41180,96549,116044,1081,78818,49135,8305,20213,10021,23602,148923,39033,76575,54468,41625,121743,61361,28605,110339,97381,108784,6327,58565,37906,2722,62308,42415,120829,226683,17171,16955,32278,42441,67531,82112,7044,8333,21319,4625,67693,83024,14105,107392,18658,14247,894,35117,78964,71644,107722,11889,4981,16504,46157,86476,243104,110164,8503,65279,38377,50730,51069,170106,155778,36441,100472,8367,14072,2456,45138,1449,85419,56978,15246,51849,58602,75312,14577,34388,14985,214746,35609,94173,205371,29378,191464,60659,83825,4266,1757,79901,4005,96090,13364,26836,20634,9902,161349,52221,57608,45087,32067,12041,24449,122590,91705,4841,5595,1962,81144,94514,7189,65466,52339,115937,30039,184359,5408,37938,13094,131687,91066,50656,3538,308588,21983,117880,124083,8740,14157,207581,132848,24615,100545,35998,13259,94379,4372,221513,9160,14015,26630,42025,87194,4685,129112,37014,5514,1659,1423,35031,86869,42243,29676,77384,91770,8949,213626,219087,14943,2758,4397,146113,19935,39810,88436,21548,15622,47174,99190,170858,31675,22540,6877,25282,66955,39440,49958,3702,59942,3443,26122,118447,24469,28429,114348,66350,72579,194,60661,14964,70751,30122,29818,134851,14530,25859,293118,32210,11158,134437,50042,50868,124554,56791,179738,112687,67437,80580,16400,32499,35433,38147,163423,62209,109887,21489,89627,8619,37255,42560,31040,3283,221255,26057,43973,176482,84209,74565,36638,128029,50150,53376,45952,23372,136030,19408,5153,189398,9461,12142,1894,150004,6947,43095,109322,74270,235743,8877,1898,12589,62161,150831,134021,76036,32418,114411,12402,9784,152424,2030,112077,39948,15299,91532,68309,58254,74157,68071,190269,1807,48227,14614,69866,175786,53526,77245,31938,86410,49785,5548,107383,26754,6925,99713,11522,112823,36879,191627,105232,112178,9544,115058,11248,121092,115523,216088,14868,164602,6984,12211,39852,3557,11388,124397,71707,42768,81029,87167,186525,134029,24303,29049,16530,60454,1801,70482,38162,186140,17626,75869,106212,3301,149347,83560,11700,132692,2213,6118,5130,19621,133100,5413,16608,6316,6903,20826,26998,46988,14742,36801,59586,438,115651,12542,108399,50888,73600,74851,230033,11883,313836,13563,43683,27664,16986,54266,48135,20496,78612,90668,82179,65157,159306,244506,2073,113828,34210,8905,5015,124130,30133,30478,196684,40526,10545,25933,189293,20827,73483,91579,16378,24561,168921,100351,23452,105211,31749,3947,8301,235867,175604,4648,35640,22045,10909,12114,11632,81578,50578,17722,214551,40781,131060,242797,29240,41868,116245,182350,57644,27787,59645,42511,33137,64292,86072,2870,91949,108278,14903,186497,55157,48398,10332,2801,52384,20759,10283,88468,117313,23727,138084,65635,5090,14195,126767,300,17717,38157,16186,114320,89668,96676,9742,203368,49363,5035,28964,65388,82238,67525,39995,13922,241035,69735,11154,193950,66216,72997,12434,16882,29066,91839,31743,96167,184088,75620,1030,139617,97206,15695,244555,101352,62820,44153,114812,120196,26595,72217,5935,28488,4241,7832,101557,27041,135635,10308,337586,23855,173672,15924,5051,10103,8202,360,45227,30801,459,13982,27256,9104,71355,53611,81898,79904,146294,57705,99956,35919,29587,21273,89804,41886,3008,100905,29691,22814,135385,101754,7790,16486,141203,186158,135150,17125,14803,43200,23042,70352,6634,27432,14596,27017,45094,251700,107172,92556,69362,224587,20275,239867,50925,67860,22054,35132,546,107574,11246,15583,51884,52526,41469,90704,62011,30436,4192,20677,83296,40746,43027,18829,234584,59250,10989,12045,44515,87149,5814,22428,56050,1304,54193,102712,89476,74967,28363,182054,87751,63858,4667,36435,19373,13180,80439,20298,12691,59200,175067,68478,149923,65774,50785,75599,19794,24659,40763,18905,13833,221290,11814,27472,35846,256569,9769,37905,87557,16393,61774,29056,58339,67859,122835,31673,2884,29565,225212,50663,19145,154284,7940,13382,25647,46917,107024,18714,12224,8197,11896,129114,11024,5323,163976,216168,77338,91508,61901,29134,64608,87645,71475,46110,122297,22635,34837,26310,53025,53017,10622,90942,7205,22145,163437,101344,36189,355381,3469,59647,36294,29028,61676,33071,170779,1619,42455,55588,21750,12494,53664,106939,7739,60501,600,42951,173883,121950,75147,44445,75192,26282,17177,6729,35664,13478,22319,74388,224240,51121,128054,19973,113121,26367,20959,71130,30181,27274,83822,65840,26267,141848,7294,161141,27036,20489,14220,74392,117827,12263,18511,12425,92015,38371,93826,46517,106516,24959,428957,108509,55628,41208,28538,6694,203549,200020,130157,14026,67949,261382,34954,75428,60462,34936,69163,8775,60844,95271,14668,58597,35911,163570,17395,41268,20457,77077,15920,195151,1820,1127,108523,1201,920,64420,142690,3800,19773,18589,25204,114010,8738,45928,72305,27317,73173,58181,4109,38698,181993,2002,91269,6577,38521,64761,34725,2779,98254,99182,109347,42999,76257,42992,2481,76329,46008,9716,174991,37659,92796,26911,126742,21977,5384,89414,18739,22923,26868,2989,52591,14973,151566,3554,169141,41484,22124,26749,78963,86727,2411,21918,43055,36709,15919,32188,39853,31407,186872,106163,35231,3970,180021,86213,133789,47183,28099,10825,8315,193036,152961,12221,96811,33623,78811,61925,91812,72246,80237,171243,144270,12504,62352,69843,208025,139707,102653,182703,42668,65058,74259,143770,10084,32242,184890,53802,20214,60407,16792,41310,4184,1636,123702,13335,68718,46717,224945,64844,113887,41497,29940,10587,27431,128017,19512,17506,17671,26070,75283,42125,47504,37731,14059,88044,36619,847,112691,14770,55376,575,92811,347152,96947,9385,233329,3093,22326,45207,20411,273167,31247,6125,138569,8663,357575,28073,53341,234780,21561,48933,109802,48919,46462,50800,50600,21098,18940,1091,134528,14935,2398,127145,66747,34702,127805,27345,5529,139548,51994,127312,166531,11082,36587,50668,31578,37535,46230,2150,64732,41722,91822,21109,67189,47573,20129,8421,1596,16448,126415,81846,126357,140669,1937,32338,967,39499,14778,48543,167999,24888,12192,41633,206598,60067,160162,11609,109752,3487,45910,15601,119431,19179,93578,31236,207825,71291,47437,21034,78791,32425,31613,91908,91938,6225,26499,49240,10301,34970,12824,99989,27311,35324,133950,14043,24233,61362,22243,35045,252343,28863,12365,8224,28831,215245,73325,83362,32812,116785,100940,77100,66002,61855,60149,24654,112267,65835,54563,141839,90895,174574,34653,8453,8786,174076,167014,20249,8095,14050,68580,299481,16824,48793,24856,15716,22866,165280,33060,49389,21813,47387,179304,131281,60507,145727,21710,16780,174833,11187,19174,11577,19549,89709,114442,11917,130985,53665,52636,32837,117051,78060,79585,45117,52110,74026,86227,52956,6938,48219,29286,23852,81923,55204,370875,58300,123864,14993,25906,17004,38061,191997,56608,197099,919,5046,126484,79803,18680,145935,124511,60333,53534,6979,35404,23791,46739,36466,2445,19890,112893,35958,11939,45333,161529,38751,76585,129315,85429,125900,37046,110236,26761,13725,20554,21155,11900,10186,81185,44323,81121,127313,181376,68138,91968,77284,14617,15815,15390,1425,15586,9037,217947,19393,2643,291035,56524,1195,154070,7980,1713,2618,18959,70645,6654,8986,122964,149447,37089,79358,120676,39867,85630,173326,14161,103857,138866,98205,107118,105847,61850,48312,3318,110656,16491,22884,29985,202016,75577,7108,49432,450007,16884,60351,28287,31574,98296,153369,5508,59238,73523,2766,134247,6922,6140,15761,20766,33247,44645,98662,62705,5296,6062,16713,27012,204193,36366,4251,6513,1097,29844,148369,4030,44421,57946,57215,45204,63057,37932,100525,276977,104126,42472,13150,108317,106038,5266,1004,31351,41691,20834,27119,14871,42058,19309,18264,15714,128645,33753,97813,14991,36632,127182,38788,23800,23029,134259,141169,22689,9008,35810,85196,80190,175150,41805,96633,36654,189935,45878,63838,3242,5356,312001,228710,66129,4509,14881,203932,11812,70030,47757,276830,122405,33146,49251,2261,162697,5363,120050,24738,211941,21746,44252,31697,2242,4877,3708,85573,85060,82434,25856,115291,56583,56567,107864,962,58671,54581,120347,39508,201071,94108,1228,71194,12513,225594,36550,6911,160283,35838,41682,115576,28022,16436,34496,5034,74108,10228,47025,11047,141530,3837,8393,65028,55696,31079,173365,61729,57479,106029,246526,10526,54647,134609,12894,3537,244,16862,161607,118386,60183,141700,35670,22051,179401,24135,90785,29822,122577,87924,126572,2459,80584,28905,2095,87804,54240,102268,124731,60006,15202,109796,157033,21466,164665,37695,58694,81513,83134,208222,554,5651,7656,87297,12786,33576,15075,146538,9642,40949,163656,9760,4817,21064,83245,14829,16136,95061,68060,24365,47864,1179,105850,5322,174698,19385,5399,111971,66992,363067,36771,86468,4639,166195,77004,80406,69284,96401,199722,27643,10625,105066,89724,58878,40710,29791,24556,99909,27763,9231,35125,110086,51738,12458,116193,41661,30404,41774,96495,7041,264105,37287,172797,19867,137904,45042,61041,151622,109882,58327,51284,132939,52487,238,24806,356262,42824,71570,114506,221874,57514,290906,425324,6771,2740,77666,51262,18017,10479,14457,11137,19547,146799,74299,1986,193822,107390,66292,13142,8549,16586,41783,4738,83585,88038,9102,61338,33010,174951,5451,103430,20873,9410,71603,254445,29027,16185,19139,109385,57580,44158,18457,29275,116743,5568,32928,91629,19307,40658,229962,46426,15411,46108,30487,67181,20224,12763,92267,69682,41491,97385,46327,89571,20801,26175,104473,82178,53280,108859,90329,60749,15258,664,104876,189856,72942,230732,51261,34901,19996,67470,20008,38335,18089,46663,52358,14286,59726,14395,26243,124071,9514,50750,71549,45061,44126,141320,2803,58061,44739,93140,659,64128,26178,15361,168531,40344,8977,47997,172770,68707,16055,55784,23990,20994,19090,6791,21011,244531,47352,307840,16546,63361,164913,118569,30189,34941,229229,107326,24202,160409,1575,18056,16156,162544,1298,58281,140814,38998,4285,260415,19797,24212,11490,54691,125241,149765,53575,8790,98579,39432,49317,73332,17200,47059,6532,45633,17042,110013,4418,7511,26786,2639,40536,45674,39902,37280,138726,143373,16114,16063,95339,14031,18222,148011,134245,11799,36311,103728,15146,94491,24149,24405,126162,35646,2622,13619,190698,96544,59993,46574,579,14560,43052,125756,11698,26049,139612,76126,94179,32983,27506,5021,32417,25791,73423,53795,119140,83814,24222,419,60678,42094,36193,71555,167797,231370,39846,78400,68056,63955,1124,59895,8546,139212,47144,37860,26891,2359,163343,60583,105848,169908,4972,13013,132896,3108,44849,132211,4330,183486,14009,10090,75230,105867,102476,3031,44769,28197,21633,23419,68902,32941,109556,36098,52255,124968,209278,40772,6698,26402,57023,171822,87578,88267,23469,27050,64577,149768,71917,89979,16941,23053,7594,106397,125192,3078,35227,9172,18615,19091,182038,12549,48594,52924,6894,86017,20427,25383,22580,75986,18233,19209,61027,86544,26111,111548,24619,166688,24272,97361,51184,78541,14792,3959,2430,71174,280134,24880,85091,19069,48720,235061,148747,27783,40579,9099,95152,259500,59221,24921,73721,170222,102157,161254,66033,357515,82190,151405,105610,28252,213067,20508,97281,6878,87399,7159,45662,182676,27626,34381,71179,112126,12802,20133,56316,50576,70823,11434,14879,96554,27582,74036,24193,21984,147179,19974,41451,8452,161213,34769,115,18749,115303,36585,8710,130627,54462,1076,15711,78215,45693,22454,41595,35658,31785,17354,64339,5699,30987,38727,113863,1046,127166,235160,27501,82135,137484,111547,143478,71619,20477,96454,65400,93505,9234,117448,71966,130201,9407,156940,10894,113917,102178,91330,3786,25046,137247,37299,14204,156671,48589,7310,119658,1019,3147,26915,389655,28024,29905,117060,110822,603,9922,51369,186019,151553,53930,22620,65936,33869,50466,61861,18339,116756,22544,322264,178320,134504,32779,106850,51259,7921,18753,111694,76143,15475,39056,15091,96327,38933,146365,2624,6183,303617,83865,40345,8720,102137,208016,300446,153481,62817,17230,177064,59995,17444,96781,1707,62069,105642,215627,27389,113620,8641,39778,54792,22640,92614,72033,327783,56938,97175,28337,132669,24810,100695,42694,183543,96612,26568,321,59003,67147,64475,124682,17744,254962,92433,55393,20603,153319,316603,192699,151134,16030,30713,5369,106923,79389,15318,196516,53084,229057,32215,2061,71803,15710,68210,36730,279424,61974,109245,21881,319816,40889,10178,55054,11579,30821,76533,48007,21946,12530,41523,56504,16728,146955,90643,77497,38274,58777,12829,83673,72711,24324,131406,209463,5085,14864,2408,146954,83391,104916,53219,39654,88646,106083,13930,24286,40159,28744,20399,11792,25027,26454,82556,24039,34680,36361,145006,21872,10752,107608,27995,36258,12988,66287,75099,84038,54126,38128,56142,14292,30365,99229,9312,5952,18338,50601,15454,40761,100445,4866,42787,168097,230674,27,4416,59458,44874,21538,13837,21543,84974,32659,181908,81485,143877,1443,22510,44084,123253,114222,131683,77045,139372,123203,151023,23972,28082,30654,30914,61473,91477,143646,51334,8042,144002,18818,47219,30784,13096,53692,57020,125132,219729,72133,94451,32149,46016,5231,19109,89053,50029,67191,30812,104508,42377,43699,106368,9836,14601,54570,18766,12632,6660,155889,71980,75016,58244,83344,7256,100628,58978,56720,58199,118422,23918,11726,37394,463,88206,139614,253619,539,113611,38238,154196,29350,64452,9692,12873,4429,17541,32212,6089,18497,41032,117229,60868,14143,10942,926,24793,66470,12021,18956,23792,155539,49189,11284,84405,157831,10978,12543,64410,50098,40175,82131,32892,21615,37156,5526,99592,36215,10947,19241,20602,2093,71709,93588,80808,10971,106894,25921,413,34040,112538,180819,118821,72357,57007,79329,16870,137412,137486,10245,90727,18898,150608,14622,19833,22840,152719,29427,209294,4232,40615,60643,170375,22011,7746,28136,332881,60551,279716,193813,38074,19946,13101,16840,117701,27751,19524,59518,5857,368,28708,105821,12973,27739,40578,900,41397,104380,72320,33862,8409,34652,1096,35868,72140,8303,182051,82682,33389,5630,94527,27756,204584,39519,51275,31654,10240,28759,22833,178542,47192,48182,45164,83416,42256,42796,81917,217466,53292,37786,77519,106347,83381,18672,48508,13787,77506,13385,5421,76619,372545,27228,140302,83313,3227,42955,37845,66043,76055,149143,149830,12497,9759,138621,5587,153959,83576,136204,27579,39401,30659,75311,5357,6559,74434,7707,428725,26547,2082,18025,248187,41435,176983,82585,6326,238794,27806,33103,206760,30220,62067,73068,39814,3267,31130,1487,32585,16095,47315,334742,89923,102036,75915,77001,44341,23722,4933,28107,288753,33496,67090,13693,284443,67130,6821,12171,96368,120123,128906,6889,31201,197218,124216,25556,94189,226026,49191,116420,119504,22368,28238,62479,20359,140859,29908,42319,52073,25021,11717,171363,103216,48554,148106,44322,179,62550,142748,5200,27934,626834,53683,40353,32801,386580,59130,42350,96035,956,88884,71218,34111,41335,31551,1556,34309,7435,32506,89091,101326,35050,97836,7566,18198,14509,235440,30012,20704,338945,90305,62331,210266,5359,86970,67633,37643,51918,7476,35122,27880,2530,23516,55992,141873,9269,20887,235173,106e3,53315,71177,78367,19414,8455,3948,72358,56614,93522,50567,6412,167714,32465,101863,1914,66483,142566,61810,14328,107885,75527,21510,22073,86602,3162,170297,80142,4379,139776,150756,52344,20796,126580,47459,31811,75467,203428,2360,109945,4987,40280,38609,247457,5017,131195,52873,51358,118857,25612,54684,86642,26003,82237,10347,74817,34308,134385,105661,2079,114428,3924,56947,20197,29198,93080,30441,23003,6686,189968,44029,59712,29697,69462,47863,6319,73632,71419,54022,228432,3739,11617,144267,6304,69795,159284,38182,88987,16798,60652,18367,39753,41504,26776,44767,4986,7207,326091,10211,275129,30722,15983,114324,26287,21436,250022,386,16493,36735,47994,4425,57498,28067,7086,86124,96341,28545,29897,71934,19803,3239,94102,112964,21957,11221,53105,41589,82164,36031,6367,42771,2307,41889,128904,54967,59098,100010,163061,65256,39405,19247,129504,97081,10279,317673,79950,84866,47576,29495,35727,17138,23769,174554,168948,28307,137478,6424,65666,84059,28007,129725,112584,87500,22631,53845,9237,125865,12109,94986,62791,47377,95747,7955,119822,43499,77478,59676,37816,112528,83870,2604,10721,277540,129593,191497,1803,103962,39100,19735,137806,184562,831,102214,21611,10860,96243,62954,12392,277571,104806,23844,21269,30123,51663,11872,3731,70610,110093,179525,50391,26607,87825,261436,17108,19172,65210,34492,179038,18937,8799,428,29645,11956,61342,78404,376484,132083,73837,142035,103650,20615,4466,16747,74934,38480,234599,17246,46547,32844,24552,27578,22737,103773,39027,37021,1234,22307,95862,33672,4191,11010,27369,57944,36384,94490,7931,26056,163500,146122,22564,135760,93787,61065,30077,2369,6137,12659,3122,61674,56540,24935,25675,122066,26194,26305,22069,31327,2064,15705,149614,19374,89531,613,93086,157065,5730,15360,6683,40553,8430,74835,94791,130982,74032,11372,90140,69619,36036,16092,112362,71290,44790,23930,155440,38855,195955,61949,49611,72100,9710,26268,41136,92903,169781,27353,78082,95940,112981,249266,45995,51422,17889,6210,74226,165999,87787,28659,84558,65713,42221,17212,99031,57873,122295,227056,76534,50726,57460,287606,77186,7288,29042,88166,172092,20272,22733,128506,113493,2081,55443,102934,214,42326,28948,53196,24237,22624,21099,13480,39377,81120,35325,45300,24047,57914,47609,64670,25672,79352,7747,71834,161803,19447,8688,10183,9684,1684,6277,61421,45761,72302,118558,18353,10661,11774,128325,16327,2665,302559,70280,76546,45579,161481,169457,36438,37410,96396,127007,10776,56760,13692,115406,41747,83908,414988,69549,169745,58040,3721,62350,104731,13605,79066,14490,121161,108219,56627,83538,32335,35780,46883,23245,40346,24451,21150,129629,31758,47729,11747,2392,5660,43534,12184,23309,97227,201922,5856,75935,22492,245478,113458,122567,38892,52163,176117,98436,387939,127565,84416,26809,1689,44206,52079,78841,20795,5683,27933,162169,34126,12822,3354,45811,72520,20811,59765,13615,3254,29527,141359,123305,19887,90838,2212,8885,33750,29379,216309,13657,7475,88895,2555,55375,35969,66537,23458,112987,1751,75280,196722,96722,67717,118130,142463,83824,80129,105478,45701,183568,315287,14884,44548,167199,36212,100715,28798,95743,42919,6271,19418,59193,16434,72701,215,108179,34472,75818,29916,15862,29177,1351,9396,129616,4305,86650,10574,51218,914,206197,114226,53103,156910,12946,84475,16322,71666,47108,13520,81329,27088,120745,18694,174187,3645,72390,34056,18867,220604,95316,4524,97988,41515,586619,90302,23520,19632,127752,62930,258836,36988,204585,13539,57180,13517,6044,19407,65336,268952,132299,77209,53483,3327,22672,7728,50216,2729,12196,38088,36872,5799,111465,9535,11303,51899,76725,2263,23913,3675,253827,23875,65387,63019,12817,183945,28678,43266,62072,17750,269599,29961,5765,26274,6555,2446,55197,67172,1910,71875,19799,10585,1419,27911,88939,28042,167002,124915,104112,22199,47768,14066,16710,7478,99068,196517,131507,51331,27291,42046,63842,66030,117306,144818,41353,26774,14822,38660,171065,192929,121185,116712,28895,31434,3911,52612,111118,25850,18697,65634,4147,50197,74729,15097,117548,52926,274499,54590,79384,178158,113803,36365,137334,4679,5949,253573,27681,181256,356354,65776,146248,70184,2871,18045,156661,229600,6542,22726,9001,9959,34743,33915,7460,105594,269690,12482,86077,72158,12017,58753,24594,73974,3029,1912,30079,2726,109412,146145,35326,35085,862,90862,85609,78087,43053,160170,33043,23284,4515,162825,69896,35568,601,13016,1407,51713,90134,750,45520,155676,21397,168585,187237,5401,125230,5635,89220,27254,54715,98930,113085,11966,3030,1855,149700,17569,56634,16775,51586,223253,10938,121033,70787,71993,76450,39521,26162,103357,94057,56597,26906,111477,293134,42368,24553,55722,30882,11930,19889,30504,35653,6466,203139,26034,287857,19452,2522,46774,8228,76457,83553,35392,6216,12166,56704,36285,6768,54803,1726,214814,6895,182419,26778,41143,53690,13669,45646,163465,22665,198804,39125,1051,54093,61411,31560,16094,26798,90341,277777,81044,169520,129829,46588,6636,71429,29098,27473,76489,47101,118137,125121,179102,29265,57351,60270,20712,59437,33382,18626,39178,70695,80048,54642,35683,106381,97513,43264,125177,120906,35533,22522,54219,7788,92290,6116,30617,6801,86129,39209,52994,53661,59735,17738,25324,24278,105977,13689,50123,36059,130088,54180,2543,36656,87050,59769,87529,20220,367,68705,58995,26101,26380,43246,10688,79793,82063,59968,125199,31463,19802,62223,12388,70063,151361,3296,60158,33268,27121,110554,125481,31240,69489,60334,131646,25391,20034,24248,7642,55281,33709,57581,133350,77700,27095,3522,65874,30518,61307,126098,3438,49052,9849,78050,97277,50748,175256,49826,101450,107315,118984,13409,10075,128877,62205,13193,56344,25228,87810,2143,116821,7648,113840,19459,50778,131885,88512,13697,60547,58403,210177,34494,98016,51781,47807,12099,106135,16443,16925,19635,13859,8422,14030,4756,14255,48634,3275,4837,16300,230472,6616,53129,77373,22360,111581,9662,173521,71655,15044,5531,8285,190633,62896,54909,45932,34330,16255,17909,37426,152464,256859,18903,4054,67227,5705,135855,114295,14380,28822,86386,55947,44796,22159,43163,7703,65450,5829,97182,39114,652,2216,44468,52,74475,73693,208207,51119,111015,105280,42780,128135,3956,13974,30409,19714,40616,22185,44115,60715,199079,86742,81192,9554,53876,58171,29597,50492,316379,10539,3453,88180,23111,24529,93240,2823,46332,22213,8752,118271,197846,6618,8946,52993,21325,30302,17074,122625,9575,29441,295253,97919,3130,132791,140156,23859,8941,106857,22772,37895,107740,9471,34989,25040,85180,21330,47109,33614,110324,23189,24151,32102,171390,19981,29005,20431,121,38106,170174,3577,46060,182390,13411,9275,119138,47329,30160,15686,30347,7585,10003,43031,29151,20512,144355,157741,153623,16851,99315,110358,156059,69556,9859,1884,75126,4225,180276,40291,131485,17863,1299,125391,75039,111409,31614,13736,31156,97629,65733,5008,14589,129738,29549,64881,29351,75196,52675,87336,57594,21161,14655,77381,35333,37937,262082,70711,100777,11065,52574,43032,79308,11911,5569,49155,8990,20956,71672,118587,90936,6794,2889,70494,14885,17291,20073,4318,33042,38735,27931,10168,11340,174780,29799,30126,32276,416159,9138,12580,186182,69114,30093,10524,55369,90592,23723,280104,31769,43457,134915,104001,3107,52049,3483,145413,4347,87847,8340,2862,22905,12749,10655,84140,32339,14853,21123,6603,75082,30462,29877,106005,84964,69112,129634,13566,31377,1731,2591,12780,75605,9265,203857,11251,95054,43621,106786,42830,115761,76779,15968,571,316548,48436,23152,179910,24939,4039,62740,82443,162336,105433,153188,13146,12020,11190,145468,469,151738,6924,16613,42714,25880,5783,38804,32591,110905,81649,189448,265217,122177,28046,8852,424024,1774,13702,37891,92553,66876,68996,31394,54721,100409,93602,51349,134100,42960,121568,58272,6007,12605,20028,3624,15242,25008,65373,95897,114681,115646,2589,33333,59030,148878,4427,719,16718,23118,3261,37212,85465,55213,20762,7510,200214,136975,141829,8623,85982,9053,8985,13680,55174,20625,8519,15392,165013,16648,8679,27707,23493,74409,23572,32138,56964,21537,197403,32462,82529,23420,28463,4528,109150,117327,76538,9244,32706,84770,24954,49185,27568,3481,35176,25954,82442,152974,131562,69937,5350,25825,141497,121347,14976,75327,17713,2839,13165,257262,30030,30105,44890,162261,56625,19734,60021,19579,1465,101402,21343,50719,82005,23880,33978,2744,4244,16973,17264,25584,4273,85481,4655,19471,172622,36425,22328,212066,128477,64373,27819,33935,83439,54538,75730,73945,182416,338,16567,164442,82351,56235,55483,38729,47137,36504,14510,39166,16573,4712,17926,119742,48289,74781,45827,314393,143249,63030,150609,33960,254056,83767,3704,81354,45727,6473,7385,36244,6886,18673,272531,4187,62156,112398,161543,82887,4358,87142,76904,76583,39823,167961,122163,68178,11770,14478,52405,50115,29516,109139,2039,4206,65909,23385,19165,89405,28262,22275,41623,3099,70734,12924,14423,41773,25426,95066,228354,10150,40311,18456,3369,167019,217588,126793,176360,66455,4269,8444,85491,121695,17697,323,7122,20991,35726,50184,35789,94066,146437,243045,303724,21794,8433,198209,4465,23672,80873,33604,13628,46964,2602,33500,2233,8434,6196,25551,55311,64859,90756,733,118771,16152,16282,13527,20713,42651,69883,78249,10006,70583,164285,102376,221519,42660,9468,65430,45115,136780,41566,157119,71021,40395,88297,10249,35650,41778,28731,28138,29775,49179,39391,51182,7337,14843,4441,103029,10864,81753,72912,49213,20665,88374,112909,1667,21142,63823,38287,19613,1746,41069,30542,41967,15080,138315,9822,40857,1624,120146,62254,46115,32449,11046,21374,514828,10905,260390,38829,21553,105743,7303,96235,38405,229797,32678,23538,112753,7701,37587,64813,15914,3940,40782,259364,20373,22997,77967,19173,76602,178467,82126,9044,83531,57208,74018,5950,34656,389057,21826,6662,16035,39683,55167,129407,79420,59403,152449,39047,31506,63344,27006,12334,147213,63125,155934,26422,197447,54847,124681,52392,3641,69691,15548,83724,62974,18336,43641,194003,56605,56448,6561,195097,103908,3362,8507,99274,120393,37202,12934,69852,54075,18282,7789,50160,102080,29648,97272,47381,12391,138224,47286,208664,50910,35867,32185,28804,64164,10495,11850,159760,137513,5911,76063,12977,6056,28814,21821,2163,130,26653,229563,675,34076,31514,47917,92810,44791,176702,25297,80044,28279,26550,62323,9943,101265,45621,173758,88568,219069,11734,117073,111186,26075,4525,39923,16003,12712,40543,7197,150583,16316,73944,199805,158502,7166,121080,2343,53537,17725,27858,14692,138991,22323,155561,72448,37087,173360,14887,2310,89844,54066,44670,35610,30471,49008,30742,32492,123549,16741,8796,69544,57441,97055,107455,22125,10594,123866,113472,2733,85686,54673,56369,34761,5044,12915,75581,8965,47647,30073,183777,13677,34414,87158,240095,56678,23997,13674,133699,17662,364,13753,153299,27177,51527,30243,8768,26167,16767,50595,160464,166312,23739,14534,26058,9664,63302,110621,49078,86820,10195,18754,103971,41541,46431,27835,21875,167947,172353,12902,71486,20686,45374,12571,44888,12274,1818,10422,17156,10122,31744,9367,9678,87337,19033,70558,89541,21373,2670,9033,123019,13271,234210,43826,102337,11809,135892,7723,3972,64409,19618,54008,83930,155668,38822,37966,21245,24138,260,246255,87852,28211,156411,8088,109660,68896,82086,248065,287918,183132,99271,104331,183019,20735,38511,16336,686,18533,18914,36568,10100,17413,11801,17493,39177,49978,80098,133024,283941,8179,153303,913,11274,22090,73741,81799,24736,36017,34397,5355,26793,74880,144578,239455,26214,19233,17629,106193,25995,57924,89963,116991,77011,261582,364267,12039,141580,15178,36187,9064,4070,21836,104740,12532,23742,192159,139401,14516,46285,50127,9705,30183,46632,6312,66032,10073,30700,26025,26702,43421,26669,6136,155289,120269,19056,202531,43062,10321,35951,149425,302834,15999,115575,92927,51885,95094,174034,1831,20175,39292,56097,9329,155235,20052,35463,55521,17719,122027,87425,145479,31818,5229,24575,132139,118737,52992,44245,16168,78384,56556,38701,11367,88487,19022,82317,214446,53146,132874,85922,28449,40982,81866,281616,112901,26578,190706,100333,155311,101029,171716,147697,12430,68023,26065,61503,69034,60721,126933,7730,7965,21463,59048,84330,17699,17875,37832,8530,54375,218360,53773,59917,9867,92197,54218,61597,39007,87092,58775,17173,53529,33744,101641,9092,6126,34354,17856,32658,23212,16624,40012,90288,66804,30957,193996,193136,3361,126541,62118,39023,18809,8034,19719,20381,66386,64493,20206,56654,11892,180795,70430,31132,148921,124862,23413,7779,38708,40301,16544,1919,80033,29947,93475,1375,135168,156926,69211,117128,57078,75276,39285,30819,18464,3044,51097,11169,214069,300112,18592,40938,132884,51336,55473,23935,202263,99605,7252,115201,18984,268130,87746,101155,21993,7612,2978,151034,53745,151729,174929,4835,64678,53387,27068,11231,14136,30257,163776,74550,15754,8669,6350,89388,45349,422995,68021,59951,87642,86425,54667,91704,28427,56079,64527,107312,2367,6715,32058,167882,83377,9472,24984,115062,35722,33140,156862,12732,24084,23697,34539,72738,20672,102578,11210,88703,7244,19853,19168,464019,27128,46941,50269,158267,8850,158112,51669,57995,41368,58379,14134,60496,91738,13630,44359,737,15344,120328,46261,14371,8214,53796,49253,123867,56387,104801,7333,4174,48503,43922,3083,243339,116418,479757,153147,159946,19349,47019,17868,7568,17831,7985,56769,16025,112323,7079,40969,134556,11297,18538,58669,110916,153620,73377,72354,38103,205536,68495,102706,191,10869,164292,31753,80226,87342,114379,12760,88794,19334,85112,20828,29688,22880,32405,3197,27230,29826,77087,46535,10454,11432,110215,23620,76308,72189,116329,168613,57647,19673,10378,1049,77409,28757,24133,588,113483,16684,61242,31088,66864,24674,161602,3529,14745,90530,299150,6673,19808,84006,14057,114223,12023,167545,57708,91489,46583,15662,2782,13163,84805,1309,47528,68166,16015,48871,44523,145426,17102,65184,54856,101626,2231,162868,38087,134570,20611,72893,296437,103821,3547,51502,32402,63371,95740,8947,63165,25224,250131,70323,10235,39906,34559,51697,134092,90702,108894,201322,13521,98255,8498,173210,61323,5939,15853,2071,83348,11131,159169,47234,2625,1728,148920,59236,14351,20915,20942,19005,8569,220082,2813,129877,76369,208632,93160,15477,19266,71454,45188,37118,21981,734,210613,24054,1267,258926,45531,14333,1358,4214,52587,73176,70405,3934,149062,67102,129336,24604,39782,144525,88004,81838,28194,51093,36216,42928,57849,8118,2715,191067,60965,105811,65180,7052,84954,70694,46912,219608,89766,22029,26626,102536,84453,50777,25605,105083,100927,20688,87599,26842,16501,4589,1582,37485,27658,50645,120746,2335,165311,11419,118946,1635,103841,81324,26376,135646,54192,116632,21545,33403,207341,58353,177692,33129,19558,9632,75823,7780,20084,107884,116296,109946,319622,58315,14925,134360,5672,15528,113198,68474,205467,66116,49681,2705,98462,83417,21258,159469,61849,81586,62636,15482,36279,20980,9940,193129,13609,130807,18949,73964,147177,131897,86637,146769,24726,30328,30775,29789,165015,16356,4333,5505,209489,79847,8748,132099,59591,103870,50045,162834,31157,71923,122346,6112,6551,139841,45179,43676,117580,19506,44727,106994,75060,69628,17203,46010,141146,9659,247052,66602,277310,21659,46258,176126,21072,87,20184,63737,22023,124145,55015,107649,106474,147290,65612,13076,63041,16396,150430,62688,137443,6987,49604,88814,122965,88723,27058,177180,68371,34502,30567,11200,5383,48204,26504,19554,42146,47062,6975,51017,98961,25976,71879,161741,113467,13050,91074,277058,30863,61884,41533,46948,23794,16521,149829,35815,4843,40881,56017,95769,99630,72286,99851,13623,30392,51474,63363,63865,82679,1059,168866,25195,13699,121522,234449,35601,241612,30212,73616,264919,33601,161573,60734,72643,93146,104874,19083,97309,24319,146272,53100,87181,18643,3074,12143,84691,32155,10902,38113,83987,95669,22320,37308,44763,40440,203540,152769,7319,15333,37687,43812,63607,34089,899,246178,71268,67799,16016,114972,58528,142144,3955,144552,72635,58245,136701,104014,243,38633,62199,14295,9747,114531,27309,21640,159861,117400,124053,13195,210463,77861,81073,239628,226797,188726,25428,49381,139825,5507,45355,15269,48541,2568,12101,40308,1768,8853,78278,55853,27498,10987,12866,22855,16207,107222,28940,68976,28505,2663,277982,71506,191712,2421,165066,37699,52827,11530,112085,187070,14784,13345,2370,197969,71689,30075,93786,97183,71992,41785,19656,26541,5218,118661,37497,14909,185795,104786,64176,31138,67561,17459,21130,111703,11368,12490,45880,38409,147530,16281,12336,20898,10505,71936,39455,49254,62813,193555,86430,18811,97787,17431,50448,85973,4047,5944,9900,65788,238170,71758,45771,89284,65578,26485,49627,32381,33713,77317,8559,35413,14870,20803,34468,81897,94234,367167,24080,137854,191387,158,7578,65751,15809,7362,17010,196493,65502,93430,391382,2879,10420,11735,7147,23542,17615,172445,156086,37413,42670,46002,31761,57780,41672,11532,25360,90866,49967,54482,3553,67022,173415,930,48911,25321,44848,62911,34519,229774,187702,2235,26813,21693,1315,23004,97752,23681,170907,179236,168028,11780,33446,4764,8196,13633,286646,101859,29094,37084,18677,208113,11037,67253,68845,22477,60395,22179,83654,55163,30814,111690,84894,95579,111070,15123,2301,14098,14628,22693,64944,67320,32427,113228,8450,162556,30175,61058,80543,90709,143529,88741,208523,156949,1923,33966,23151,3826,241299,16138,83350,57492,27183,107353,138052,4025,107597,35297,67773,34092,30452,43300,6957,87442,94684,16965,217438,104565,70559,98891,21648,6718,16784,149691,99066,186015,19497,66551,37693,28214,16720,64083,40532,14209,87486,1612,145702,10039,70355,14323,130951,107186,119516,74814,104148,233912,48066,30803,17404,58877,26118,50223,44594,81637,205665,99360,81833,55265,26920,28438,30781,39828,1038,31826,48903,6194,56604,14761,59828,145813,74771,74706,51758,50831,37050,3597,24506,105849,6593,4154,16139,4974,46766,28473,30674,88319,27775,32504,6677,122296,25830,25628,152679,10272,18637,3167,49269,197216,13892,17101,74035,95714,67486,53321,82319,51540,39761,17803,187333,72418,71349,30143,35120,23324,149892,42804,9890,91555,30670,7507,27360,8743,12725,15462,94244,140452,44821,17416,38926,250249,54572,82822,54752,51666,63387,47442,57021,34124,37290,40715,29430,7229,111417,75006,22299,38592,3207,31696,25882,129641,85221,119327,11951,78169,25237,51044,149983,174242,9947,220995,4324,22464,397659,78193,25301,149964,59306,234039,11815,51450,116927,58974,159239,14034,75956,10213,91547,10026,88574,19060,33083,95376,47430,31034,61653,26190,36085,5131,14374,120062,15192,280008,9263,14401,19099,200440,66652,8700,156222,62663,66966,265,110,148040,36034,31386,104323,17822,32638,143573,164335,16580,50402,7203,38721,213812,21515,229889,8504,38602,75516,61567,60579,12745,46326,4227,18582,60229,59397,140981,39037,55638,17735,2466,3755,51288,30552,72052,186323,70031,82764,10787,256,117464,143130,10062,6313,63167,28509,30958,1511,26452,130270,6099,62843,2008,134723,38471,103714,11981,137269,30103,21650,155870,27623,23202,21416,31748,136202,208101,42177,21612,97179,70847,80823,26151,15957,467,19669,80201,152985,58934,49413,43187,165152,32271,3413,278897,95326,32984,22407,4165,5889,36637,54267,154498,84424,24107,32263,13642,61899,30771,48906,53541,77288,17109,68812,133945,23919,73353,73829,91032,251994,13650,62276,107145,232161,2098,1645,1664,247395,157040,42258,5942,117930,67366,16060,9794,122685,66904,16976,197964,13983,106018,68009,103583,28958,265380,17355,73225,43935,107238,21443,155998,64685,18535,31098,26652,188152,44025,21291,51390,24741,32681,22989,67962,69432,144983,171068,156235,7891,62505,30254,83172,66755,91295,123868,35802,115707,56120,334807,135497,21871,3082,226529,127778,48841,77508,143672,108714,27565,10322,144014,44830,149778,63023,9719,13437,27943,36700,13695,163539,196344,81885,30099,44647,4703,224127,11553,28255,159827,16721,24326,85789,18228,45023,10808,22936,17273,239261,46240,15558,55286,111272,53778,10007,200688,13852,33199,25937,118127,7866,95568,13550,69075,149243,18187,18054,139272,204199,48032,9916,53168,32309,66646,20390,30523,22084,55674,32559,215681,42029,99514,103068,63726,38316,8856,122667,9308,126644,295281,11559,40999,104973,114406,69105,9022,14406,80819,104640,60160,43454,8575,34276,11096,67322,37022,36926,101052,61310,36620,61086,109693,15789,9610,221009,16189,40285,3194,57111,7696,24026,1071,17787,219517,181047,102229,1436,19143,6301,110183,37601,45487,70927,56572,105459,74084,23319,69989,91217,16551,115823,99155,38977,40934,27248,94397,86590,107504,66693,29641,1379,47255,115875,1054,8435,39144,278566,3140,317123,121774,63007,54,8414,27632,146844,17916,144167,46464,56841,9985,60753,54973,59007,15854,105030,302270,87368,102284,52117,2320,180001,24004,45415,28122,22370,12080,4179,143103,42114,5196,9147,23819,80605,58583,158409,10286,12022,7119,150321,118598,10374,25544,101645,10354,308,97195,61157,56511,25079,3266,28236,118492,14689,20295,135126,19093,12618,57448,107655,29480,63368,199518,134395,42712,7936,62939,58228,35501,264973,47880,112138,63936,212291,63680,36241,9561,136713,9208,3926,120889,95999,43551,83774,6921,105801,11525,3247,91697,18965,18822,61436,115290,32075,47003,24387,26636,48700,190949,19812,48361,52230,62488,108527,105631,35119,118159,8412,2552,96912,124705,45876,32587,32992,107747,77489,51983,8586,88880,11803,52063,16606,162643,143626,89658,101333,22654,101310,38641,101812,20259,123750,2503,14969,219100,8690,57801,39930,59910,37399,71781,759,10810,116498,88252,193090,2214,139472,14511,27387,12596,1241,7718,42914,11603,116092,73428,12937,23266,15835,53439,5058,18649,34255,102275,62646,29092,74301,111969,64528,103339,89133,263917,38624,31458,186803,51532,25743,71285,12736,12343,37502,180824,143025,172311,3716,6203,6498,22229,4435,2166,66689,87857,30352,26521,32385,19406,178687,47754,51273,121646,26461,8198,36440,4640,132611,45114,31837,69521,42002,24437,25080,46669,138442,89271,46945,24420,35833,124503,8025,46899,59582,24849,44172,115277,16345,29941,42848,14801,8048,26136,36090,41362,60319,2074,33712,41656,49349,63229,13209,66031,309,4824,48391,36461,47800,73514,39421,155688,49739,46104,1216,56340,90482,5712,163879,113513,26405,9919,71117,80878,34470,7576,186,167527,63786,17343,68724,45616,32479,50203,8150,47235,85028,41439,143352,4168,39866,18661,19475,52046,47846,51344,13929,353722,11649,34406,89897,29002,23934,68639,14094,75872,29466,43863,63280,169603,2816,5244,32027,29855,42864,45790,121470,68468,31828,7242,12594,14488,7410,33485,88169,76478,74885,61809,68536,70978,49632,26100,42262,112129,47629,15034,77852,1153,111801,32807,15276,117727,90749,35188,38118,105626,19536,124809,8721,101778,18767,7320,62401,5488,105764,8155,101412,36533,59606,23477,13883,40321,21223,13491,12275,43235,10746,12781,61840,152362,76298,7826,23347,19020,22220,93982,66332,35455,39408,6329,112746,96397,7190,38758,5458,105620,79654,98403,59395,11902,64856,56883,35273,53643,11602,20326,70616,82969,82156,35788,123268,58910,272765,24592,15867,1454,17079,21042,67057,18817,70089,24840,111862,91164,245473,26466,103325,34583,51813,59727,75940,43370,184407,39378,10508,122637,384678,128473,172589,103341,1576,55027,79993,6639,122249,56459,5014,77265,5064,51717,32582,2149,27481,34880,18933,503,6188,76698,48184,81280,25790,6378,5599,159007,74361,6010,125775,18286,27541,83541,66715,25065,318284,67687,26494,145603,45430,73737,1093,24588,31488,141097,46614,41796,620,39230,75054,18365,93579,36160,184470,32372,45723,48418,250572,261817,192118,22725,77160,79580,22670,4248,83282,74287,51913,89394,15782,18868,4162,31369,195445,114671,70244,80847,32760,73941,35966,33327,48176,61263,26397,21891,35782,51428,16199,17361,60996,162215,50899,70443,196905,14327,209613,277476,31457,115726,121702,1643,41064,101937,287507,200215,40259,17132,2993,39858,66709,78788,36101,45516,276535,10475,132229,74041,85837,4489,67345,47555,70268,21923,33062,17585,37566,31019,76295,41197,33727,44308,118628,54158,74493,8091,78705,83923,8776,31089,52316,104384,21180,13077,34375,98798,124584,38929,107083,5305,11827,45799,107454,122628,99613,39711,44863,77878,47979,163774,127561,55355,79908,233991,33964,8846,147975,196384,3073,181199,4641,18878,154010,234469,1978,29642,190914,72852,147040,33070,55967,226887,13739,90555,39074,42255,11101,11143,6272,2958,5785,149827,31047,148068,44726,20098,5550,34454,68139,117608,41123,74247,21830,126493,26154,125253,9928,34238,98638,40988,315243,29780,47110,42038,38685,1249,19998,18504,2563,17213,148091,6500,13838,19244,50229,4746,251846,112081,31329,48587,8296,216791,59900,99134,13938,168292,195442,43920,20408,15133,19106,21571,58002,11833,61347,98426,10306,95246,73497,108255,62936,13502,70015,18245,80358,41111,682,47734,11486,103861,45850,5615,51099,134183,25776,191909,70530,132159,38022,64318,63079,172030,148951,284196,101745,31146,6288,10262,10014,172794,37411,22511,4387,112723,232526,23910,161525,17672,109277,67584,32161,96383,27286,345858,68047,143833,32342,125891,44280,13086,9262,166694,69189,41261,5220,24538,15818,21924,16651,109563,5340,30385,23175,91017,49288,45540,46740,114503,244673,25970,129438,46907,33785,227986,78614,21905,31585,114441,121925,1940,19917,21156,66914,81575,3244,30495,88710,29655,12313,83379,127952,105486,99459,88635,5563,32187,8229,94749,21500,48758,166385,14479,34521,359597,72504,153813,10739,78835,39295,138067,14863,122543,48540,34380,191006,11035,196034,9752,62956,65440,80639,387,17359,20899,93399,207191,16749,28093,88121,92904,67027,59025,67931,87918,56284,135160,87875,81632,69134,75164,29710,188499,43301,19047,13422,106967,35039,65093,55023,107550,58883,53155,1578,14587,54466,100984,69351,32950,60823,25977,174836,15869,404451,6689,11576,4477,75743,45266,31052,16005,59856,29472,81237,29067,86979,42164,23945,46676,7923,90552,46853,182972,34273,42374,17945,13686,83785,52585,13309,23870,32142,64343,98952,28074,7693,4539,24893,39020,268986,16664,39061,84393,197428,80361,205940,1224,282681,6882,9445,49939,17049,191596,29434,55100,22346,54975,127831,732,22990,126521,11455,86007,92245,138159,51749,151336,107180,1069,19546,41449,3357,159316,6574,4724,37104,15238,26063,24160,96724,37317,18138,7223,49153,51769,152694,7631,7683,64472,8352,2685,31197,127743,6860,92869,43267,85011,42057,23724,82231,8741,18674,7910,164276,4096,12771,7586,23696,47054,195099,1416,20848,13504,357403,2764,188364,105560,295,178445,22309,57234,22103,107666,24821,35099,28676,58490,158707,25657,23518,61519,1018,46602,17455,53294,22514,62556,170305,115366,70922,69405,15098,71322,27792,76230,27885,2441,45589,36981,150699,24146,59709,81228,22766,66205,10765,37617,9373,49056,736,99650,67177,559,35218,47852,5803,7500,63479,81545,7010,84110,51987,114840,24620,8163,24275,88890,163648,134506,63588,23081,142828,65953,55361,67896,114542,9127,92929,19906,111372,38827,81964,49480,42737,12268,4658,112744,27101,301,20122,14673,94899,206599,12330,76979,31622,74309,44058,128517,56436,14073,13065,23339,21315,103178,311456,16278,14920,198146,72224,420550,41727,777,8337,104777,24184,25793,211229,26740,119387,100011,38979,100498,23747,45421,22590,8336,22845,14459,138478,53166,57049,20497,52757,82151,2460,50662,32595,50914,9779,140220,133600,20746,24104,216217,8838,122361,11593,28760,31549,816,28187,5501,94412,60114,28281,153116,43391,8488,90398,47350,90056,27922,39104,94601,1585,8966,10638,10171,94802,8318,14529,110590,127271,73877,11430,2830,6223,27005,16811,21014,31889,241922,77341,77320,137038,18139,50332,123737,132910,94235,16743,82586,2165,47123,21947,68249,57616,1395,50542,129396,230152,209588,78454,147757,6080,219127,4180,9021,10748,81158,64973,29190,36737,228622,98804,17829,74579,16417,183595,101604,134062,17306,3644,19380,50525,72396,159940,117382,180532,78857,55739,98983,119270,38236,8379,25607,34556,33219,34803,98799,76155,37523,75966,6648,82394,4084,98676,3845,52595,13580,58240,1922,29258,10438,105425,26130,31435,85783,87939,115936,87820,77028,181067,59464,67996,9819,19251,40273,26943,18184,84410,39092,183878,10146,8789,33548,38007,71479,208117,24698,2410,113333,13181,6605,13526,49339,7061,64271,180297,17014,2971,168674,69856,33945,110699,265836,3503,115232,136418,50952,187396,40638,4807,156118,167700,13849,57520,81231,7838,11640,12170,5741,16701,16659,125534,15317,9199,52795,24781,6825,56267,83437,204926,74158,3661,59223,14235,194403,37407,20530,23146,12357,65994,11931,56380,259451,23767,79929,18293,110440,5708,110566,1381,116346,62508,48437,65252,42437,221700,23408,20821,78800,67088,5214,80178,40659,86978,3139,87525,38590,46776,96503,7226,124649,84434,21210,52718,39533,32088,11610,48883,48993,5612,36169,74879,111083,9149,156582,123119,79206,88244,36781,6276,121833,21685,67708,562,32969,95151,49905,11821,49025,46750,363738,60238,7126,189612,23817,135205,79928,2979,54100,109851,73077,506311,12222,150050,90908,2594,81368,57202,25388,3628,28737,8460,86804,40074,10968,92876,5499,105039,2695,47351,172227,78243,121715,27084,78833,28523,73676,464,68232,6651,130040,127800,48799,38058,37843,5052,96560,71999,133710,27378,191856,30992,147444,29030,53817,12764,121245,60444,26643,68261,39242,16699,155639,108991,19332,42990,80805,6165,95293,82667,375680,26450,33561,31227,248811,61961,7643,142037,7514,13400,107606,34976,50694,22426,151745,198926,23162,7490,69785,8890,277275,60890,30537,37432,49609,109623,3559,109101,157822,2070,19341,18250,88785,12958,30738,47073,37163,50355,61092,55664,18154,67979,11874,16017,16832,257096,63841,46836,35435,7213,39562,77677,20617,42578,32643,98441,139236,52121,64862,68450,282715,35716,2199,97719,13226,65461,127411,66119,58368,7516,8148,55990,6956,124758,9239,3153,62014,39268,163536,46944,43855,302,6682,207287,15207,64712,56673,22223,78977,14977,22415,238137,21853,1467,6198,107406,33222,219452,21709,119024,34391,2840,1157,34974,22756,34229,50276,12565,13069,11121,120511,69104,16271,21602,41109,62931,15756,19270,52519,17405,24235,63574,6789,324542,136115,8024,15348,17892,47562,1532,70350,35583,71230,17331,3309,46253,26611,79839,99277,117997,65915,78885,32688,25828,19004,52029,50625,9248,17400,180767,38886,29357,68385,57957,5909,37897,76460,6069,20372,5141,50706,91265,87494,32650,234722,61380,65571,34714,45634,55767,26279,65231,106901,8927,283,16073,103627,32881,18500,150143,38519,287603,17485,853,34227,22149,485770,39484,23090,35029,31381,51798,78528,68876,38737,36453,236345,6428,12075,1812,27252,199567,13210,14175,2341,46926,622,28321,38887,13412,97447,15960,114377,104132,9242,11929,173622,21434,107890,50877,49e3,366616,878,47215,100194,45060,104282,141046,35203,110046,219551,85771,84943,81924,108674,74715,12699,128910,32654,6935,167969,45886,48348,61573,81800,52821,34060,4242,56585,130416,152475,207991,171093,29416,186493,59505,34175,77342,15376,12990,99902,21762,74649,5423,65516,67329,11829,84139,241464,121432,34713,85742,187730,79924,6579,77428,24207,11724,110158,32973,112280,38625,29086,83056,3907,81006,88966,16041,71498,102033,825,26490,10662,28338,69696,48093,65072,13326,134496,36471,61179,3250,65892,28533,314299,82056,101706,7567,64574,82526,61878,9810,151779,38212,40297,107886,9224,21112,83917,6731,127019,12382,20817,46524,7526,111495,45460,29077,14716,3263,2776,32734,117361,7414,4263,57298,257932,86274,32666,76331,77614,93490,72983,103093,41179,40844,68943,116063,4284,30224,160402,11643,2596,45212,159780,15217,214380,24019,8607,90193,25716,48411,93174,97695,187108,71367,40950,51935,149531,24941,24881,32250,21110,76729,22520,11901,44780,57776,164255,34822,2491,3769,55143,92422,73099,38114,63649,64110,240212,202019,107803,52205,22566,197745,21239,67424,3015,31953,41591,28285,76949,237533,40323,293650,232903,33270,251467,176985,24164,201580,38564,156136,59809,255648,80672,240807,90052,100798,140429,105726,10493,44741,91259,58405,10701,32241,77032,19646,28622,98468,71458,27207,84089,106931,6037,21906,10904,10085,71638,18970,12327,15090,155131,570,57108,170358,184285,20866,9713,33154,17127,1501,66684,66787,23409,12207,87238,18819,102498,86382,527,69760,37855,28336,40134,25061,472,119634,283057,234005,72393,63914,13795,82660,81969,21503,42354,6295,133186,18259,34816,131975,111080,119914,6227,16874,28237,109468,13462,9076,139909,173435,140650,4094,59998,72608,46830,25005,51675,154533,146622,17740,201648,55660,9846,40908,71868,61190,22963,19533,38545,29300,44101,220019,36593,119629,19665,44330,108853,121109,89385,99792,69972,191515,2180,50040,29432,18069,77343,19619,123487,256669,76631,13950,296596,1597,129830,55228,1167,160849,18579,24423,59175,11879,3471,31253,98945,59597,119156,95308,79988,122939,9124,103177,84168,28969,42697,184795,16008,50199,163322,28590,6494,60509,135058,82285,113064,23838,104824,5059,80031,14223,11317,3210,366149,3627,19284,75525,82629,76433,17398,49894,214741,20201,17960,70007,4469,41765,94300,56178,35669,3059,41367,10580,141243,173468,16012,36051,146008,6174,145965,139681,7800,110797,7035,21617,33212,25669,13652,98736,51362,38127,761,3555,31131,121667,108117,106306,16338,122989,66956,164189,15339,82154,24542,37352,59255,110432,16682,63915,228093,103923,44235,47824,168857,93914,68839,24883,16577,41048,298253,145530,10841,15100,232215,61904,5837,125998,35069,28444,58263,14138,85433,11483,143759,34386,73214,19837,19344,20822,8109,145446,6859,87391,91712,30420,47415,145201,71828,112972,41730,28283,170664,85939,141658,70333,124812,11835,2977,84882,9672,191233,7890,112346,19182,2262,159541,16980,12043,20705,67775,24464,209857,58630,270281,312308,672,1753,46565,82263,33826,148334,55096,120377,20727,1197,4386,5122,5934,144714,56754,767,46661,6887,16011,3279,258372,11223,169694,25814,42211,107667,126684,25371,63630,60879,20178,24287,89912,77914,7710,134186,56763,4151,13041,161212,270864,57417,45691,139371,26391,81594,36360,47120,2894,96681,102899,35717,25696,169430,114986,52356,18242,1784,96852,53673,123031,20444,64937,107271,5906,95138,129637,2569,61992,254041,52369,35639,117271,27038,96678,122654,59573,596,42424,23209,68851,7117,86087,20253,129099,72808,8253,236489,10640,13759,33512,12847,68886,3353,51042,54954,88292,126776,35156,39154,26608,21074,3070,132841,36168,55322,31705,21862,73120,27081,96769,100873,33028,36942,66613,15763,33080,39547,359328,23281,74973,139830,177478,3930,86190,179275,148581,122851,1431,4453,146240,239658,55165,713,274,94886,73822,8722,26916,78701,67472,71399,84867,279082,235,19204,9012,17044,1382,25785,9114,9013,22506,22794,59383,85470,19980,23923,137385,187894,268567,104114,23511,100004,3566,11291,14071,28270,6390,25458,111325,4382,14700,102309,41377,7731,3431,88396,37035,150133,15643,75288,106289,2777,70941,230440,48316,25116,63976,206396,108620,37151,125702,104551,113811,119436,24384,58447,4370,24435,50488,130857,124278,18387,112999,37247,26953,4538,30899,94734,101716,114630,179272,31548,49963,38658,24697,176529,190718,62623,4144,226077,300866,53306,58044,65159,50710,63541,128908,20104,14650,142818,6874,10096,32173,44239,137621,66881,7672,38865,45456,94191,63198,21654,91466,237909,17433,116850,23799,27109,61860,54732,29400,37404,38958,56953,81848,1520,34230,4135,97322,27421,31838,21240,26409,25220,95856,25488,56829,113003,1614,126,147771,23423,14373,49546,49817,24884,86146,38695,42648,50585,27147,193187,63419,6286,46605,45100,136759,231877,33670,291180,89716,150800,7898,65327,43541,11789,18785,15127,92917,3226,15816,97588,148034,90004,14309,143531,120478,60642,53426,39390,100241,5053,47683,6092,593,202400,56336,48570,70208,61442,84297,267745,16889,132531,63667,41905,51392,175329,104653,24808,36173,57138,33742,25613,30817,30116,31004,44827,110763,103847,17367,29721,39397,9973,205794,68528,30464,75367,6167,3182,143724,16452,179801,44257,60822,32360,50545,12909,46081,59119,5222,30976,74231,21246,4141,25122,44442,10191,152872,60307,6528,164804,64131,52788,203594,23305,109174,33076,95817,61051,86156,81508,7369,37348,36961,59494,6598,154530,185385,273203,32275,13214,173245,225200,147861,5468,57563,4172,27997,50403,22253,19697,3607,66754,52590,44551,213850,130976,17828,3407,9965,50559,26417,20257,207504,80515,11064,40718,15057,14436,175751,41158,92093,155492,7541,10270,291817,84017,120763,131324,93378,5472,128009,141787,144291,43107,11112,64353,20597,41240,29285,7429,182466,2890,9936,4645,26881,90431,118441,79842,3776,70188,15995,35014,25366,382,86180,8302,14503,76234,35504,66433,25753,48040,723,30764,17878,50211,19521,103260,1405,281038,12735,16639,6710,237007,94746,1277,43465,32115,22848,2422,33178,142178,8284,101691,76065,1536,28121,15450,56901,22761,37468,57257,336438,96429,11719,1339,3953,1811,118327,157186,30335,31243,47049,38381,35215,1679,161267,29632,17925,49143,35370,24607,25287,55209,163958,71839,121011,17402,66842,70491,9817,235054,64483,2945,109216,61494,17696,18951,2128,7462,147844,39181,147057,77030,240256,162500,11568,34925,71572,23258,33113,87609,57032,31715,36819,78002,84868,113775,145786,9499,100577,142045,35652,9027,79217,24550,93584,73289,21361,23766,32016,201078,16815,17921,88359,101379,56165,78318,16489,63544,35992,463196,76115,27666,30809,69632,109853,5469,105799,39876,72304,10642,81042,91087,82633,30029,3451,39557,9601,49816,43559,44570,24502,132979,33107,74019,68885,95620,43778,22107,80168,58086,115607,53717,44189,351930,66820,12176,349081,116300,9e4,19710,15777,2110,12072,7937,100473,2043,23575,189759,185285,30845,204583,141343,98357,6154,24850,10033,166394,11279,9588,63358,66619,16727,29173,29298,22369,4122,1113,93975,2373,2277,6248,25424,144362,27281,10791,31674,136149,4971,5091,109071,28111,3650,74833,33069,99452,39060,31553,103088,6083,61970,35073,42159,39447,65951,82331,17467,274725,39674,192758,99239,74038,75686,221820,29305,145449,38151,141438,74464,8701,11370,40356,35644,219664,130809,33760,32012,65616,177895,96022,44668,36789,32665,181104,107837,21508,63725,164836,5861,54679,122267,20346,83568,92187,7857,2055,91980,45529,39618,46036,44095,43635,118483,55547,30683,9026,44792,15349,9572,31258,157755,62006,13108,41088,178624,42632,108286,57576,136994,75081,20067,213455,24260,59651,156381,28506,41308,51673,109778,35539,22471,31926,60313,141628,12404,177355,186764,8270,21707,53992,20210,175836,12486,35418,68014,148679,30473,15016,74384,2134,52781,50454,39034,16954,50246,149675,90227,90639,20247,105483,42840,84149,39065,6265,28880,153724,909,158044,52031,189995,56825,89732,14963,79537,103158,77948,193052,23904,128603,35173,103922,50144,31542,77257,10193,261793,1089,61599,83679,56827,41935,34672,1669,32964,32744,192677,84032,84980,12428,221609,53227,16700,37963,17089,18238,394,84420,5956,18576,76244,33134,135230,52741,9872,72921,31874,99863,233313,208449,55160,197159,30521,42622,223154,80731,30948,168151,65889,42412,23756,127335,110467,63177,112577,147107,45515,164144,8147,46699,185194,12846,5150,38216,15288,59319,209454,12591,1396,2748,213994,94342,174981,9164,7542,85814,79347,3079,43844,31423,356287,9839,64046,24944,181828,21425,105878,2605,75931,24468,28548,87542,72786,33573,9795,67473,52048,18016,14242,192551,248913,95190,112505,4496,31534,647,69179,56321,161887,101346,161387,91819,19636,11691,343909,17630,27347,151697,2034,6300,29522,1714,19625,256183,30736,41363,146757,114569,40479,15465,2041,202090,13378,121579,195034,33209,67524,29264,68859,35289,9132,124566,11834,34897,23701,17860,41618,24967,44272,55538,9772,40520,67880,13672,5691,43470,43146,59144,18400,5344,99162,20283,21126,10199,286754,157014,57352,34810,134947,22482,13869,14283,3260,39498,50188,10381,85601,130984,2037,10017,115073,41784,35604,62923,26892,47516,14669,49924,117650,194265,354551,23233,13596,123144,1265,64539,13442,26226,983,13051,82353,130403,88007,35686,34010,54566,1384,19698,66960,132131,70625,11570,29263,50727,110849,135555,4078,19496,118621,120868,32514,188800,161569,44924,24501,105062,111736,87065,308308,30954,10824,52318,42959,6951,9830,52335,136608,31619,248564,47586,44794,93623,23889,140906,33780,30924,50467,245885,88351,90491,46859,109834,48432,37672,25466,78668,2856,51536,53156,9065,1466,166162,149156,46990,132982,13320,58757,25258,298,22182,22431,72022,12639,39287,100922,61243,26416,20111,29015,40838,101281,1681,96725,4545,9838,11567,53063,146387,341555,34114,20033,10537,143943,157042,19848,11557,42577,57214,27640,17470,179231,12836,195453,36930,46768,313283,35513,68104,39738,86287,104695,46711,4413,25433,60207,24264,18023,111517,45375,79401,20865,226464,27841,81043,41593,204624,25039,18225,20244,170119,22971,120488,189962,74489,159216,24746,58887,156006,65825,84338,9196,33923,25183,81652,80939,67675,13888,28266,18067,6244,68109,13776,69394,105951,38639,21878,12025,34471,14990,46973,71457,38263,85696,1047,50364,18100,216604,230465,75354,183859,29794,73357,27757,58872,122255,95777,108826,40410,784,24973,20666,10256,47191,210160,225901,92342,20564,62210,15357,81223,47348,58404,136370,87219,182975,110633,231019,5557,114090,169651,152695,39659,10697,6937,15420,20820,60557,41870,16729,133108,27320,9909,108465,192359,16498,26822,325219,33762,172522,191062,29716,26412,2097,76553,124900,73484,69292,27519,32870,80707,31445,96256,2314,70692,4058,239070,10821,41413,95014,2478,35503,100322,236799,205678,14889,48762,33792,67955,41529,176353,46713,58532,62997,179242,111905,20601,174290,2473,21736,50120,80978,284366,50101,19148,151810,71043,69116,78501,13969,1032,82510,195724,299148,161084,64084,110740,1411,917,60413,8249,4449,10658,28635,109665,28104,30492,131970,27446,20499,71921,6814,30568,42498,32084,9024,57631,161122,111788,30728,31425,149345,39864,222740,49752,100795,1957,8606,32820,154188,210448,11604,65504,95671,26463,47243,50079,54263,5121,8044,3663,137567,25561,3942,102256,169116,15687,13454,219898,132483,29600,88533,23849,44708,41198,121112,211315,30822,9110,14874,14645,19626,55733,131599,4359,111315,126666,2148,91767,12358,87695,65691,9528,60012,39959,13807,12449,60771,165784,80519,49366,58389,57808,299274,7941,94765,85206,7523,49763,49374,51040,4812,107848,65929,26938,37068,8930,3191,21092,30208,27086,3979,56324,7705,50686,214096,86621,19678,9744,23869,7714,49971,10447,184404,140264,142028,81935,37,202638,112289,39513,2767,321704,16548,46514,195686,36295,202214,1670,15988,55688,23659,29229,21347,47074,163169,6172,123566,96740,17816,22312,79026,119292,332453,137280,39511,41020,11253,97759,113084,67597,99824,9806,100148,19488,91425,14445,10529,86640,119945,22976,1450,21578,8642,56458,34421,23850,768,73391,11534,64803,221561,34983,50337,3048,86930,93760,26610,60674,110754,174219,46834,94439,84023,52573,9508,44750,79062,33149,17148,39204,179378,59747,33608,33811,72388,2429,27413,53657,1209,136277,15611,10977,18270,75123,18305,73001,65038,165263,120353,2992,111846,91040,8711,81068,66699,7446,2463,19348,218110,57632,110134,4755,34160,48633,72482,249,46281,97140,33462,11352,40714,246081,28361,46130,98911,84766,36082,51109,34148,151684,2936,76243,94584,79918,12929,460,42550,93268,134209,37100,16896,120346,21124,21414,16833,54059,191099,201522,102272,54875,84073,3895,2436,77858,10986,154654,5409,32996,56761,49453,346111,103590,58996,21227,37368,45276,61068,74997,6502,11968,190483,2851,4516,19600,140163,119135,18019,25849,122333,26208,1253,17159,181641,62390,34359,132907,44619,54140,33110,42828,34002,172033,159324,16817,22862,123567,246066,4913,39475,57181,11836,99462,39965,20158,295279,103303,15191,12523,31976,27395,89881,26366,36188,5737,4209,27937,51814,74184,36752,26910,75407,20749,114757,80471,12921,21160,166449,33748,61876,14377,111451,28376,51624,77062,4759,31489,8667,131403,35903,220511,203998,158735,57711,23070,54147,10999,74048,6529,32621,27799,92313,30581,51320,77785,63583,107525,10443,9320,51511,19427,121556,34366,33241,41042,128493,51593,169332,49002,178217,61070,171,83380,12254,33746,11674,26248,60875,47048,3811,107521,60945,29268,895,49016,21834,36675,58110,5989,35500,30262,101556,212477,10165,53297,39091,41022,9791,9832,14567,19009,19068,82e3,3875,37180,186532,20188,14835,74440,7293,122292,25795,49957,53535,39917,123027,87789,17677,7331,89007,2300,35386,18160,6491,51684,21618,68301,13263,285552,298645,185935,298900,126950,20478,134830,182343,19829,12011,15031,116530,76262,15413,4935,40625,164987,49386,10004,44236,39740,43773,165845,43832,56688,2815,185534,81592,56245,1437,46923,129294,23698,129303,30109,58443,14904,122152,44134,27588,5195,37064,122631,43995,372314,387837,18874,47379,277,22234,22903,9497,40286,16763,112790,89200,17537,20682,26561,7025,122064,142767,18549,18358,38049,62248,348902,41526,76877,7321,82871,209789,117544,83895,140345,134154,56621,61740,255565,75916,191295,230290,135390,60673,50087,3175,63556,59497,24739,20520,103747,5481,54327,78229,145055,27141,91354,101583,179600,37968,51679,147604,145662,21758,1468,32673,296111,37226,10401,244665,61661,62743,33793,21290,211987,31229,36498,109014,23952,5664,68430,117386,52342,279268,1383,16178,126343,21917,67779,80496,48450,28456,37591,11298,32919,75914,48144,42628,44277,135351,43365,68058,82185,31919,36044,33488,9591,46231,87880,19683,62139,164744,13946,67759,205363,64547,24950,14744,376969,125444,36207,34787,394874,9391,29970,31633,108461,29004,95508,16726,18040,1474,161241,87333,120885,78180,1312,156395,14798,49849,30378,61417,39863,215063,70563,17245,16571,4898,117368,45833,16794,119877,56493,56667,58271,114337,11790,85404,81025,1115,70207,196483,55206,75037,286099,52410,14640,28529,108282,19807,118656,48399,13926,14142,6361,12773,19250,37526,44092,14182,3300,24788,85970,100512,5089,93502,6262,1470,30526,6736,153863,47611,5419,5204,108244,23917,15546,201845,180200,9222,61948,51408,72264,60586,13704,87398,79947,75005,105096,35548,38044,163143,46082,43224,10050,223780,42559,63853,5735,24066,14942,134623,61221,29913,32948,152876,80712,15291,19415,47687,5471,16468,19049,875,115689,4926,141440,86953,11391,96224,41116,29097,11661,9977,16554,59410,184257,4916,59752,123609,20010,44968,127762,3094,60116,31503,22578,77738,30320,46196,21138,9271,19327,143121,101458,26727,134598,33180,123460,124908,45455,1725,24171,1975,27542,3320,81552,83876,18004,21115,5583,180685,125092,158497,38663,698,452272,14139,42821,65816,1549,15658,88083,33362,91523,14865,6630,176968,46567,36614,16181,20495,180063,61084,102959,47886,156026,28065,8610,114642,2608,73306,8419,8283,11174,348806,348428,8950,58848,3040,12266,87926,37788,7990,32289,57688,65907,28786,408131,92280,80194,123266,156847,70303,30490,3057,70321,174337,5786,5649,71496,65938,40775,32358,26015,20333,119519,11504,86693,47220,106241,179717,45913,80350,11323,10871,42117,44122,156297,8264,34534,74130,8425,20168,19195,95738,61495,86901,91525,56486,2617,21807,76315,32644,29675,132700,187527,94065,2425,48583,146946,19438,59886,21696,112525,185026,112582,107474,21779,520,49142,27517,27611,26275,59618,68585,34382,269197,4863,78549,51824,198549,50597,91695,79132,75817,86710,86822,13732,13511,50650,3411,18621,279970,168632,42104,4038,32572,27693,8881,65349,54005,85641,7547,8478,41579,83643,30439,9416,5869,18993,49065,16745,12818,25768,25667,58681,44991,84284,204061,61201,50637,28090,5082,34635,107900,93592,201432,170018,36616,36627,200119,6933,53709,312804,36724,17312,3158,43381,5167,26919,23400,9887,26673,28631,66018,9402,230847,24255,102572,100931,154504,170013,201115,97165,34404,357,179763,3311,108,53023,171976,173330,95887,211961,23099,66805,113640,18352,46361,28935,107138,46668,51711,4963,45839,54816,7932,184460,1611,103983,141455,3201,270150,175156,43537,78102,12443,37971,414715,19126,6340,130684,52220,21607,284399,102147,95375,37496,136001,219663,16689,24938,7390,85416,109375,22615,13046,57826,15407,16153,137199,62614,211231,32862,32298,16119,175170,134792,46807,3951,27849,153318,105648,120022,22136,61120,56637,91935,136213,6067,4114,134337,42278,2812,85502,6569,159359,12826,125922,25619,62295,12792,79563,100822,11222,23825,49867,29919,872,37559,4587,112918,136034,64662,126530,131167,14498,202250,56243,23092,121186,102694,22868,89387,64332,155488,39744,156087,176575,85881,39781,47236,12249,149193,26406,1951,155992,46233,184401,41366,8036,65383,139356,189733,213982,15521,49577,159577,2521,106982,58186,55467,51702,11358,8682,17785,29934,176786,109645,122828,41281,25752,29762,94798,25186,39717,17547,52095,8022,34208,129165,49581,119910,24510,12967,247959,15952,32464,81364,137598,14637,77742,123065,16222,61255,39371,43724,57019,24082,72028,104622,27929,89643,138229,10055,122728,41443,60688,136821,3274,7812,71386,67606,3295,100611,102834,3428,102932,35148,132477,142278,25402,33288,2208,132017,146591,21568,11548,73095,756,36537,63670,246597,20653,141984,271279,12711,23553,27463,28351,23214,77413,75614,30338,23444,235758,28565,38620,46299,28150,5788,32491,43962,168549,29503,99845,200267,70204,12986,143885,941,50969,55284,152266,187576,3532,57733,13252,143761,54421,60086,2825,16104,18211,69263,178663,103869,8702,98648,108097,15531,162361,61008,1775,84427,119944,23016,78201,82106,24005,236154,14897,34582,63819,36233,113573,102759,41120,42814,163346,29508,164161,54185,62292,9036,39296,6640,171129,26814,9984,294489,22183,40191,69406,90599,96598,18066,85600,87824,38733,247243,7387,161131,64971,38204,92974,85988,166776,29624,69098,72876,117445,68760,22363,52379,9968,148571,26622,186006,146393,31071,60120,13612,44677,19448,68338,7874,74867,64490,29421,124401,20908,16585,60838,7384,97328,50410,20319,19156,12761,5816,351477,2786,25656,165861,173732,7123,26785,149182,20793,27143,9148,25949,18006,7795,112344,192537,14513,5682,26115,40202,70306,48084,99176,7153,108473,44332,110121,9428,8180,27860,22437,60581,205918,99858,49547,116936,35145,8901,6180,5175,18803,16208,79320,28649,38726,54774,5835,30655,86440,25966,31392,70939,20843,111672,43328,94380,88995,15321,33377,2984,16233,43332,75870,19044,156499,127031,119860,122514,65060,17517,69497,64192,44374,6455,80273,40630,92629,46425,7325,37171,79359,140226,155219,32133,40753,22059,43167,16881,38630,50086,111173,44484,5941,101815,28347,373200,356553,74832,20222,177340,108041,180076,3763,27194,171523,10928,71752,148205,39888,74776,55041,6358,148477,294704,47252,52974,89175,4682,14618,39392,58585,50619,28088,100276,36110,31596,15012,93646,4953,6629,97805,46485,18765,9249,194698,52307,85352,33772,54636,209534,25378,210,2036,151416,255499,40976,41349,134520,150432,11157,6173,62536,56094,34646,96604,85745,27243,6622,61530,18737,8699,115599,51859,41290,143452,40201,43782,14061,74656,29726,13361,136026,23149,4742,24334,18683,24925,85168,22668,224320,16450,76194,24792,35366,2119,56976,7070,16021,24155,51463,23441,3622,46105,126702,16789,276646,86393,21589,3209,111511,12134,13169,36211,227939,16170,16148,208475,99712,10351,419718,26242,79670,44112,4569,32880,339579,30648,97335,122181,70716,13387,85134,182407,26932,273051,12495,21444,28811,92202,62532,31060,48235,131669,47086,88459,54224,9712,80410,29929,35255,5466,174314,77907,10011,1541,31577,12716,153148,263135,100373,10934,79991,36589,35238,97005,23398,171539,8580,20599,128843,2723,53858,31690,44768,11242,19051,8403,12581,30429,200097,58445,64447,17535,77337,30303,7870,87634,120825,22700,347,32033,8588,10336,47933,95540,18314,86731,43480,122415,48270,103115,61655,3386,11664,337709,27487,202769,59646,72556,173070,8469,81115,46788,18684,133404,96594,112566,86812,64663,85306,47684,65109,21999,787,67089,42642,9467,104964,53548,77932,89601,50531,36874,103369,55381,55386,56487,110574,42321,104493,41387,87478,10390,37145,125985,271334,8940,28636,26893,223188,56969,202288,40071,34929,116962,28213,106683,28231,42013,24525,73712,66578,95581,82535,18787,2469,64097,192370,40105,33082,137529,8248,72992,28876,9399,7582,67246,4830,5079,188992,137276,8793,145644,146116,50802,69878,200577,15640,36790,214109,63824,55941,70328,47477,2167,52953,138827,24284,37429,16033,22466,117793,20960,43422,39263,48912,81141,192574,183295,1837,14713,28579,29858,381,62358,27575,50975,47277,158226,20747,9322,21799,8759,19551,57397,25924,60257,23908,10654,24152,18912,12247,24364,134961,117953,43806,30383,28739,36894,57851,55799,12140,208514,12059,41600,16395,47450,48286,23584,118890,25589,8681,127295,234074,47071,125810,296610,11331,18254,15170,129078,16080,226323,40895,143558,94050,23705,131198,244131,60925,25356,21260,86397,300199,46792,88237,36049,206902,15590,21351,1085,93619,11791,83320,80677,34168,26403,64840,3820,15926,1847,16734,108139,3510,11982,209610,5476,22002,108428,55260,34767,29252,98069,88530,24683,25427,54524,21159,7758,58183,73508,29449,13060,45920,148846,105330,7239,2883,81088,12697,131671,7549,43047,4805,250593,12157,34279,12914,59556,76223,25084,20506,103392,43609,100817,171460,29810,37880,81256,174784,4188,149828,64134,59705,252323,25997,44940,97369,39404,5069,90268,85619,116877,19634,56035,36905,7651,33380,130707,133829,43600,25142,75703,40295,40338,60316,24687,44342,13554,8678,9961,1732,157253,93469,29687,49688,39196,21767,41224,21529,25978,36956,66355,33481,144387,50146,129773,13311,61211,62169,77703,101581,234,27986,9318,13341,50104,58984,15733,9924,6129,59308,32036,85687,10449,47782,8891,25720,93777,35277,8953,13811,9240,22192,6432,17202,356378,52015,66393,12508,274148,255059,67115,30737,4439,11480,231776,166051,72970,82790,96236,26126,3724,86291,14281,11950,147770,105431,20726,77543,78680,17490,13496,21992,62570,4476,98692,112842,115877,74277,124883,83834,40027,21132,19464,47232,40547,89457,28687,14573,36817,103723,300665,15319,224392,26400,40495,22877,64609,18201,23154,72374,34795,27583,78778,23667,165027,32508,73622,56731,67440,2495,103298,105353,2477,41716,11030,8686,37206,79590,125885,13625,23431,4395,220465,150736,50754,5523,27215,232561,164797,91433,63055,7083,46018,251531,40722,70383,94995,7924,77757,28613,170982,867,21717,13321,27051,21566,114874,18681,7957,7438,19655,84979,22767,101166,277403,47583,3674,112331,65307,4882,27900,40861,34152,26594,56419,29707,25132,78891,18930,58166,23382,32025,60701,65952,21108,607,41302,44913,98469,73043,2692,100592,76874,140991,84749,15560,29248,219368,339721,48121,96609,79943,61996,45630,28536,16244,111094,26428,57889,25111,80221,69552,27326,124506,50129,75574,64173,83505,1045,142814,170324,19671,8153,208336,12576,12623,62945,184743,32415,73714,19202,2698,136438,116392,8250,15337,70178,157991,37208,8242,26035,58589,37418,6014,58480,1274,32560,127652,47847,148702,79477,92504,29034,87904,41106,61295,72948,79082,88569,164147,34772,53574,33963,129292,2501,7461,36693,68888,18880,65806,5892,424331,17516,24390,30570,2113,9490,25280,1581,110856,24330,24537,66471,15890,104155,126634,49647,82695,115436,114480,11922,54150,34729,37512,160717,69615,2014,40558,29442,49537,9489,90588,5643,197221,9955,87575,114865,94728,2057,19542,82962,71746,2865,8021,95982,61016,32535,150782,132098,15408,30334,114765,22633,27477,74001,34329,22838,9812,99985,6414,94726,41615,168290,212638,54556,24532,127124,32488,28566,631,37608,9436,205039,166709,41813,62681,162340,51007,104187,135517,33216,370029,46677,42823,16849,22305,32170,4155,35847,216420,4908,9704,221339,1461,36764,69322,94851,163847,168141,1238,26533,64284,196577,46554,71469,97500,18030,75035,1805,59036,59485,22807,3804,35946,47500,82026,12935,1196,59186,36123,45483,48905,122736,84743,71020,21859,105891,19409,36310,14933,324632,9477,65381,15301,17544,116221,192960,28345,33914,9479,34240,10843,107872,10760,35165,170015,15849,66429,59773,117561,48895,53810,1248,297457,78131,22215,46954,15473,66440,19176,155332,67372,63874,27562,96864,44731,33316,68027,4246,61528,60417,153158,388800,242889,139912,30680,16129,184234,14284,220334,57133,2684,29537,163409,74592,22341,14608,7820,44807,52082,34669,735,442014,5199,156652,115585,38203,46928,26751,41163,42574,23e3,40485,193202,80818,24685,30063,46336,91592,38350,16019,204886,26377,35729,24114,14839,36424,82137,58468,208317,65760,107517,111976,169534,977,88148,88506,104279,77387,49741,55001,102462,22628,16787,70803,44152,147610,49926,3305,34988,28018,39850,1762,172940,30561,35822,23734,154547,98454,6287,35558,37540,6969,16948,182134,68275,119628,26385,69050,27987,63648,91787,15241,69688,18170,23405,63549,172789,36854,149944,199582,50387,26601,61662,165764,15740,64018,188861,204663,14506,22027,34003,37949,76827,37279,69128,41728,50954,51395,91070,77327,418272,152934,102026,34299,2147,21153,7074,4236,29765,9430,213559,43803,10595,58760,69911,261653,87745,194742,224,344942,28518,5330,188455,29445,39380,55115,37739,135330,40527,34158,67980,2019,20921,28917,61353,29277,143760,174111,25315,233758,5380,13171,38385,49725,63589,122326,12646,695,115120,1526,21427,111543,128260,43896,37771,92334,46393,66094,257494,18659,47526,25325,7287,24994,1200,4234,136264,35864,150235,148354,9687,28790,43378,11450,185999,16029,3010,275,54840,18620,5465,18999,14941,133430,7102,112191,67383,37978,43984,44365,118346,5294,4294,22723,21609,95097,56653,68409,57456,462,22817,8733,4115,95791,28344,57746,79153,1397,207599,96565,211156,90894,88357,75007,67110,7600,143795,14196,17993,7370,47401,108844,40816,2129,578,29475,1352,164155,115861,88599,265011,72917,44900,177563,66133,61076,81186,100792,66415,27198,24480,106156,32719,8226,19302,86323,65704,91571,74710,93726,40774,166720,71206,14248,159482,104866,13711,135341,12882,22933,26886,194131,14226,57391,10865,40126,114370,59004,62802,47099,37870,61471,61712,14779,23150,60956,17913,8272,31742,43627,355564,39597,43789,24868,17215,95983,10850,171578,95826,171398,43329,52382,39205,65882,22816,30560,5482,28052,257734,116033,49489,10393,42391,140158,74221,47213,10652,133629,42182,40689,31081,114221,24833,22120,71238,95884,1589,72212,29981,49555,59882,106829,22147,12985,19337,34964,98868,7993,32641,109146,79730,82886,12040,753,26623,20550,6160,648,37626,156500,74280,21660,112069,102650,29846,30047,37920,38707,22416,17527,43165,20567,16777,181025,163230,77041,93275,5619,104536,14442,35376,145357,711,91293,267964,4085,61569,2548,27538,216883,57568,2256,60727,9359,183328,33919,77609,186951,2807,102609,77085,24779,43042,7697,75938,53931,15103,12294,16402,24545,7447,558,128098,36197,23062,46707,17077,223296,66504,27982,13141,62628,55296,54207,95832,168101,45485,3146,80848,4243,2868,16953,33358,107313,27188,53837,35648,30321,5098,8014,6864,26642,216648,15542,69518,13049,164033,260760,92714,51059,3646,38963,53961,31027,65718,8441,195966,107912,99428,28516,18239,807,22455,35712,38565,73550,133659,118825,32367,26551,30301,28367,11762,84369,86004,37814,44184,122422,57026,4072,40865,165872,25809,54060,35341,49754,17581,103700,118548,74213,178685,2053,49373,234264,17223,35164,99392,33151,130808,2338,24598,52014,213186,156444,16006,33100,87907,2116,183683,87183,121897,25550,4995,22365,1221,128172,24344,52500,5554,89782,2016,40013,70221,66896,49588,23302,76353,61452,21765,5652,195585,31863,21028,72723,127694,101106,10744,21404,46840,4864,158406,26107,219205,22949,68216,48434,46124,8871,21467,587,110874,46178,110709,94049,110687,194252,73380,168493,40871,84591,4279,96418,78366,113568,80733,32871,103415,9257,39835,70860,74701,43788,318366,31709,7528,5382,22765,25128,2525,52257,20911,443,56027,55517,12403,71597,15617,196829,263547,166253,113889,151910,27229,15670,56695,27118,39691,70994,5859,9227,98270,26341,176547,121365,69700,133675,164631,110015,41477,28280,6013,20657,210461,75491,126050,3380,248649,54756,7374,93034,88191,47955,22642,141231,44151,56028,10051,42742,54389,26182,179888,17595,29573,11952,45860,19676,264,113272,40733,10627,68835,472197,159006,64051,34066,64640,150352,25206,68762,110753,23633,22112,20042,17919,163270,55949,19557,337,124601,60155,130764,50642,63188,8357,143714,22576,35676,36362,24812,142,40272,89438,24448,87371,105259,16947,36015,53391,136,23199,36073,93210,18431,41934,10593,126694,48847,17533,34029,15285,65070,33592,113537,19642,73194,284546,137425,85667,129350,26968,6511,14148,31670,30205,11076,1506,220046,7034,329567,42092,19955,30867,21935,52962,31820,69932,14236,33243,12574,10827,39690,11970,174135,28153,146891,20734,126712,21323,40265,135843,199355,58115,49038,57044,54396,16409,31133,58880,32408,26984,27298,13002,35976,171154,61387,219134,82951,17625,78088,22876,4261,5497,9679,64754,2492,263964,159492,232519,20547,74430,377501,4257,30374,461,33465,43120,162710,65294,50518,321573,5955,131205,93895,24799,9658,5858,13871,64526,19652,2901,70075,124728,146097,98082,100551,52579,153823,113631,22528,81472,25792,60475,32767,70831,74749,72861,41755,276848,7157,25389,110028,17403,27510,251623,58039,74359,18091,50708,89467,23021,20850,106672,3962,182101,38811,122104,32394,74597,3381,18651,101115,23744,97817,110293,37253,148267,36198,3519,55601,12055,42944,34271,133263,7976,95413,91635,5598,5349,58679,57950,154564,11772,149366,22890,8626,67540,3799,18687,5012,167347,116945,44732,33287,65318,71035,71417,65941,18720,30185,48199,202749,127832,1587,3246,105625,108238,117159,28014,104782,22828,55738,81738,11163,90233,17250,4750,188510,9987,20638,16031,14461,259080,49305,190390,14691,118185,22004,72005,37574,73209,86700,86886,144339,79270,53654,14505,129204,13775,25931,7131,15330,90100,52622,10877,9834,137742,2258,125407,10878,90799,219424,85936,9073,70569,42871,11487,17205,15699,176689,145652,13840,19961,3187,108771,19907,9087,61130,38770,130505,67475,29769,18202,59283,57872,91097,48087,6535,39731,194914,82462,72799,8810,20369,69590,161138,134897,1655,228453,124246,131868,32125,24266,32982,146849,36964,41316,2497,19898,151088,186502,25460,3334,5126,116461,28025,2281,35537,44808,12910,167061,87358,186367,9640,91073,100691,122545,45892,60356,46145,149118,90693,467742,151743,138009,53160,74712,7571,311165,28817,188,2377,69313,29598,53179,50217,129275,459470,137679,65308,18477,51126,92769,135453,6508,23061,29241,3159,63876,36946,9537,41270,4306,50909,132595,108954,42730,19664,80119,116744,47895,141726,1041,20154,230804,208216,88962,27133,7095,34643,5976,24608,31719,12859,40171,32072,88409,11313,44911,91010,24472,25842,102859,76732,14848,25181,139059,102051,109383,112500,104558,41471,92391,7314,98987,4288,8166,373942,47761,86881,41222,3712,19272,32290,21185,46273,71472,64765,57109,135608,113864,48751,60216,15724,175377,27567,112796,18273,73338,51592,245687,100900,10857,55010,31720,50806,23402,71732,1067,129268,23758,39673,37515,71954,1591,31733,27822,35424,139864,46227,8017,50399,5644,74021,28076,85584,4076,127136,37464,102260,118760,24879,11109,28407,16427,136669,88300,8782,134198,49502,5217,243528,18853,31871,85719,9313,20291,111347,8859,232793,100849,152830,105869,31365,37423,46174,5288,386390,22038,11906,5770,10139,36677,146746,11499,81033,19071,79322,71912,26542,195521,10379,25001,31339,57445,2750,6263,58554,11069,15459,87289,89651,31869,529,435067,57142,55718,10724,15530,50660,66882,102319,10462,143371,148490,217411,10252,44760,44,24999,38673,7037,41296,7080,103758,32647,75242,101191,76455,28603,49704,54470,60157,16716,166810,63760,52521,49375,9906,135040,4540,38220,20943,103257,50219,154213,122258,73230,121482,29653,49112,43518,71058,63793,105667,44288,91681,25034,15969,72202,23056,81246,10344,93662,911,44819,6408,52562,5953,16497,187694,1131,63578,47977,21399,61396,149533,57971,72742,5611,13207,221621,58970,79728,27059,171306,14867,7768,72956,52885,14376,30921,9280,8158,81889,33376,39155,71120,41856,131166,105010,30693,23225,58453,31791,3690,15042,11816,43900,117272,56993,64225,105202,54205,16074,71491,22908,25691,131389,59527,11646,42043,74276,34270,28537,26163,72407,41791,219412,115141,53875,38258,76312,84827,383108,40765,11202,132777,53597,167648,158387,30192,37363,40773,1146,72250,68993,32806,59487,128806,44854,6158,96774,39870,122548,5997,50579,45575,430927,3282,94975,100509,198279,200501,32872,18750,38430,107646,104178,8936,80409,100084,192864,160858,12245,67627,83578,90755,2981,54132,8983,55539,628,33889,292355,74386,2818,172034,214107,19271,17760,834,34352,169686,37437,145284,73189,54617,238229,4948,71657,94135,7968,30905,23213,304209,46892,61572,104947,117623,2200,107472,204184,88505,3730,10311,20501,150712,34190,70936,38672,37360,65983,2571,19225,134448,37959,151534,4637,20807,112291,80673,5980,35705,87850,61874,47965,31875,70827,182878,35126,164376,6522,43040,97902,71998,20750,38267,227637,76251,73913,116387,6656,46715,111621,13498,6684,248541,41652,32337,11354,14685,19587,16826,46225,7338,2780,13317,78374,44055,58668,1088,55437,86278,25916,40461,78119,116159,85259,146157,14297,2255,18200,39030,6734,42798,168962,119973,38038,22310,95781,125342,77701,24562,42445,51140,84077,79797,102050,55904,96004,87841,7776,193841,23065,73430,57662,41418,52176,99003,103313,45282,85005,26027,47742,65487,4547,20906,96358,53110,36530,18902,41964,66288,159127,54902,66174,22317,184026,50221,100396,167624,175279,22979,29069,146485,480,42086,204735,209840,27750,486,19679,2874,101071,35317,27978,40196,245641,90054,7479,4028,52060,61770,40264,884,39262,47984,22534,2991,111271,48232,61183,27973,80376,56009,36081,165143,131566,47390,107436,17924,139245,18948,58223,25723,60245,119466,14680,77779,96719,17119,23002,182396,70393,3161,101311,78419,54640,23621,24716,19555,111633,409,124108,27386,2245,258216,12908,23526,10212,69858,5646,124783,685,22255,31750,16915,43e3,28583,40380,54912,117699,74670,14215,28794,179610,6571,232799,21298,4374,40448,102772,82421,69208,18356,14122,42989,68207,134104,96775,342439,22630,77974,61398,44393,92954,93632,50917,174764,71894,24307,12096,8836,209934,117370,149880,80277,3249,24377,67833,1203,220478,45163,598749,19930,49756,19462,124194,104517,87257,36828,155871,228667,44446,48887,49216,262088,45585,33699,790,142940,1214,51939,14677,49283,82736,30811,65319,13215,29155,8388,56917,46741,80552,21318,7440,61972,13877,113912,145744,1135,64582,45451,95701,94255,93908,15993,12206,4906,63468,345616,49405,22021,38717,72500,129269,41952,6995,118167,76199,30271,54602,17741,45732,43176,108447,54078,9767,2976,31141,98669,11058,3418,36920,28316,9047,12901,81784,44333,210885,31029,19486,48518,11051,76288,43203,81787,7392,48679,35182,66212,26307,52539,2090,49456,2130,146238,10565,420461,8132,25081,22634,263972,147526,30634,102378,79556,20802,111069,161896,208679,232698,76981,47548,35236,115660,54019,196404,365534,50060,190162,23999,64445,59789,24002,10716,4605,57344,32663,9089,10394,107623,22597,164592,49576,80343,5393,4211,9135,112676,3507,56842,26209,23291,13451,13815,72724,9866,28546,4585,11238,160971,144491,17045,4629,34032,57499,26471,40064,118291,51528,233736,42900,15719,86514,25147,31587,59730,27331,34546,93487,164911,55981,1017,52398,28975,111773,14576,7163,2659,23748,94127,7591,58046,118031,293274,2302,78480,108856,26363,33313,21854,78915,9334,18530,66209,195667,8136,17789,53863,87424,64346,25683,109085,21080,41596,10885,116045,55411,15616,32700,29021,102829,16981,4307,46481,113835,166601,106369,107552,19257,124248,5139,22130,56921,41150,3696,18764,5694,250839,81058,70254,74576,7048,33695,31272,9587,51251,12329,11300,219240,77500,229429,52460,62159,41229,11359,43933,8689,31439,145750,84738,78427,136685,118384,20721,79633,31973,11098,53869,52988,3196,72237,190840,185112,79139,28639,79673,97047,9398,15414,105300,137313,85877,40993,7561,3929,57151,108868,321817,76740,180609,35166,66924,90464,82436,5838,13940,45290,67026,19641,33281,26857,36996,98291,101046,54893,50303,114759,183181,305580,14099,33514,32176,17094,121586,67669,71878,42975,11177,90273,5678,12886,12867,27433,62924,67753,13445,21183,79535,24720,155338,122583,56646,51283,120295,43762,40303,86530,14604,190243,19559,88421,25961,150460,27703,51292,26294,109748,93042,39631,12236,40405,73368,57016,74750,36429,42187,74845,176283,98118,3670,19744,24913,39170,37376,11919,150215,7637,46440,61291,85017,262212,7023,214701,15499,13794,36816,64790,2778,127954,109628,14013,60615,35098,20680,32322,6631,27129,5940,3801,64451,3605,276440,16166,42526,46620,275233,3268,98778,42589,170848,13985,52719,40320,112093,58444,41626,122502,136996,26123,73872,45093,14984,31647,91921,180982,20226,196060,19058,85542,111441,139969,139431,39188,77693,106755,134828,38509,112960,28035,81045,32920,48577,41211,1169,51509,39370,57152,7562,65585,55707,16633,123632,42194,50314,21232,7589,10730,123404,177035,1102,100263,26570,53756,25965,84962,54281,98616,1761,302765,61372,4231,11004,6580,123391,152361,53908,15894,4857,138528,185271,79781,35928,183068,199461,71306,246740,25571,212575,29887,132507,135536,39243,171966,106646,38340,64208,46548,44241,12489,59841,52248,7196,49745,18871,214620,92258,92083,128377,10678,9825,273,124186,8170,37688,47121,81217,46232,51197,22560,24038,76445,303141,269387,168244,7423,5590,148765,8018,44136,15476,24093,81595,151484,132986,88790,24759,249112,10955,113624,1490,61893,85782,267543,81516,155220,34486,85773,20198,5827,26696,182958,47877,133459,7991,47474,35921,5055,28813,58299,36457,2282,18858,199851,25971,38032,39546,9892,80469,94210,11703,7530,262048,119116,11365,73348,20636,76662,38185,147830,33090,12842,5716,136557,29208,2738,93555,29435,37866,29232,11925,18290,200392,9150,40121,28353,66557,42934,60002,7949,165121,44607,6985,46265,88952,117927,10976,127994,45713,196202,171384,16237,17072,82678,3887,53943,11497,25289,43394,194558,17520,13713,13337,10319,13519,27977,56346,1512,69563,16655,6381,207119,32722,52407,252336,7634,295451,137340,39573,12588,51167,91362,75042,12378,44599,44996,53711,62621,59425,154573,1028,6863,70608,89277,31781,37585,33115,45438,44295,19441,13395,85115,95925,51396,98398,31173,131713,76310,2356,18575,7214,48396,22367,234325,68125,225602,25129,98668,43571,24981,27341,97198,70954,116350,138790,6397,213234,6496,199647,33078,1628,16810,38131,5432,8760,45379,187797,54575,13391,66830,185263,43959,65485,1291,64470,193537,17320,32341,19589,46922,56038,16790,33933,93128,1710,22162,60010,166501,25248,110735,133168,19601,60803,25674,33996,3691,57399,83385,754,371286,19839,26834,28124,75623,3870,66122,97406,47346,326,7492,166,56406,281556,73496,63104,70066,50945,17847,47599,57275,72400,26598,25290,133091,21460,6170,26197,90337,316244,23380,15810,44542,75619,115807,61180,160228,56246,187764,113793,119939,98775,14502,129669,102901,481,18772,33749,181939,13513,80163,57426,95677,55765,123256,156375,131050,50427,85036,176699,53355,7388,116459,9415,65345,123519,14467,53003,35892,32929,29108,141336,7280,57908,121975,16321,66321,27124,17980,13278,64623,61316,27319,33770,106870,101097,65509,32584,7662,57467,42561,35131,72066,30228,57341,330807,12061,48792,30042,47357,5873,10788,40943,43598,71460,20402,3772,196771,8512,37318,98225,52470,20068,50526,32163,6724,21,155730,109241,153690,41562,34456,4040,322,2322,158065,82495,155777,84593,145305,52472,4167,12757,17832,20800,6523,97949,43733,5158,13272,52760,64052,64053,5758,88849,4506,28625,252038,68417,35072,144810,45051,20202,205355,88775,28776,58617,177028,20250,77055,25756,184004,13595,134521,29706,187081,41138,39350,69874,68616,45852,200508,35308,35938,187989,19158,97,83703,30783,33740,8875,10367,31971,9154,23524,36892,35352,34135,16609,93186,10325,61501,123818,260137,38611,132695,10376,51934,40069,47671,13891,89970,27882,128001,251194,4985,3138,130144,157048,23445,50690,120275,98986,26755,15060,110524,20070,21558,21044,241916,81443,7948,110867,98839,117178,78741,134771,8767,9438,23376,10179,78727,73418,124405,70709,73897,174550,85594,44683,44048,151892,68596,110549,32110,143310,57536,6531,94425,3086,49351,16758,85882,1621,12619,28857,47203,30663,56593,71986,13128,49100,132668,101411,14597,17845,99924,49653,254641,68928,109728,11860,46362,38227,71844,106860,76428,22535,71935,47939,100970,214387,196018,26420,64e3,108949,65464,85292,57337,107755,17617,127677,45676,32224,14987,15885,23365,73603,89701,45904,16644,214947,143773,45929,4638,50137,33997,6717,227758,15712,8687,13499,81744,240749,22701,43383,31416,14599,33258,22158,46890,13056,2914,36843,11727,56468,4436,2709,77185,66068,72108,79794,13174,6017,85610,25092,117935,33783,9671,20404,190908,59e3,49067,32677,203049,32652,2327,64872,122696,32308,82988,180624,3995,109656,1361,89288,58639,34932,1672,23129,114033,56989,44033,18540,122789,23587,35777,124932,162078,37243,30269,38337,87579,108472,24057,7318,56171,14522,10605,36398,2675,68455,82236,229893,28011,180822,616,32685,24540,51512,15793,167325,12485,108625,13919,125674,46942,46777,47249,192801,19663,7112,112086,41046,136949,15147,116698,102811,103661,220539,9484,36775,262931,43580,80207,119020,20707,35285,90574,74644,25380,59691,33304,112273,100827,37498,68624,28392,22953,10192,93127,6246,78709,81865,56101,3539,141381,87190,42210,15605,33843,301219,160929,15074,16495,322258,4827,113897,61108,7004,38995,49556,40164,186048,38095,7638,85669,24310,4701,41162,181937,6723,125119,103514,13105,42284,5027,699,66990,9452,33680,16754,14243,12215,9236,9693,21846,11245,231236,26285,119411,107569,14135,13418,13188,12438,87837,154259,13184,45250,23318,104289,32255,140998,70261,10596,72378,28503,78893,204776,26664,107431,30151,53770,139833,72090,81482,31259,9478,50013,14332,4473,8040,96916,1084,3459,15193,216567,74256,68159,8514,64488,27532,4063,51181,118473,46644,135301,17479,19499,79185,32968,60750,136481,3148,433,1609,42629,62615,19220,27930,149236,6981,35309,3835,52812,55672,37988,64541,83189,31668,21678,96359,51037,36825,16611,55113,22398,1849,16045,71184,149329,14536,231005,89158,27040,37446,89933,98572,9183,14738,180870,66669,119194,23779,41333,133198,165958,43058,12753,4695,25960,162749,13009,104735,168462,72199,56087,30780,17289,1168,63376,32319,148939,21346,183499,57766,111111,5592,163921,51902,6385,85932,38348,98269,48430,85302,6828,144609,62182,9668,31728,14877,74838,18351,19716,44331,8938,57135,111212,35796,196509,150360,14184,81850,64400,2080,43786,89260,297313,228015,4259,2273,106355,77953,79956,258556,39080,34670,38042,9041,17580,119302,94867,12312,65168,151751,14199,84612,41781,31009,41498,2644,8135,106725,11873,65756,50677,84265,100278,19103,25944,45214,71109,29333,199959,59289,28006,82735,73888,74178,9357,31611,55567,113071,91025,22225,16280,263206,143472,82038,1016,111009,3454,111282,6624,4021,148481,82606,3337,44449,87085,117440,117450,188119,96922,66328,69088,192629,7164,177681,13842,123592,13678,3709,1404,392506,88363,34011,3111,292847,35632,135945,165656,114487,28103,36070,105813,12831,13767,283706,20001,205858,222376,26231,74767,9852,14707,55251,21778,20780,81817,61071,27574,79648,73651,59592,26903,75767,1269,47843,22121,357014,1880,118720,33888,97721,25074,162232,165250,18166,101436,126490,14600,21005,87059,98216,138975,67950,11357,183453,60893,33226,31203,30167,34258,204009,158681,64517,2772,16536,8063,37505,72518,2987,13469,1060,70404,11335,58467,606,80478,66717,28334,72244,111835,144910,7759,9382,16929,47950,24768,18442,3812,17262,78772,57860,139250,55060,192875,157943,1432,15063,5317,91497,24602,2934,71481,112610,7454,51038,67723,15783,27576,26775,96465,16801,41801,178497,1952,4258,35229,66008,12359,80274,39191,3427,79381,23113,37373,49433,369,197495,44949,128592,41764,85267,26089,20036,84751,45080,183648,157553,6777,354790,8756,63861,32306,73479,133947,3089,129130,28938,68599,23015,83388,4921,46304,51210,118961,162098,13808,28696,56249,178796,65420,35933,130109,17053,154383,49942,34368,45185,215004,71135,72056,58502,92030,231518,3061,31419,84551,99620,59670,13439,24874,17248,49981,120,101486,21835,11954,21387,80202,176536,69099,25576,83929,20676,54972,21235,121229,16944,207747,17151,62192,38700,14914,67294,97250,165831,65091,88309,65140,233253,78072,119737,2388,295625,75403,48047,5295,36723,97958,31105,11399,13023,94081,105941,87375,52745,78093,142695,58118,10907,36936,47744,98453,19423,63195,135090,155076,67972,116671,181141,76674,125868,7497,7282,18173,95473,37926,40931,83084,82875,9577,10786,82123,1183,13043,25845,7930,108455,108021,144839,298080,52685,25893,74303,83892,33417,167899,3363,124169,64095,3491,11574,30740,21433,19985,31353,13355,52438,74347,30435,24346,33191,43579,92911,14343,127809,55919,202307,87794,44505,85592,45,37946,211823,75477,10315,11020,7810,8418,14824,32246,2752,43445,78058,51648,95548,28128,139532,78431,162031,54035,118501,105304,7185,33563,841,39346,91196,67423,12694,225158,47563,63637,48178,53247,61721,57205,32651,77002,33359,256934,6389,100897,17897,60470,2058,38569,23682,58623,3141,225129,42806,36558,74186,65297,178101,65934,727,11385,22874,28253,252846,104582,49707,66565,52743,129552,199897,4526,6020,48400,75419,48628,13529,146713,82456,3396,19131,77933,8618,26055,136494,270517,11171,161242,27374,10081,79712,4483,132351,34334,116847,98238,115123,62251,18783,13247,236033,17204,44190,86807,31546,3315,46564,61125,188041,5405,5346,199954,2749,50374,59046,179633,124580,35456,95032,68263,16037,104183,7893,68877,23745,4536,14916,44942,88134,154142,3214,4074,126680,444,26800,13417,122265,141794,24172,9594,4737,198047,121453,10533,56408,70714,34362,74346,24830,15909,10250,226352,86319,65102,17408,113698,65723,192701,18888,29804,92420,119089,4840,52158,6809,47211,68696,127333,9079,122944,22831,10761,65707,48241,13162,83275,41056,127568,36005,52744,10097,2969,32512,44770,40452,180033,14800,160155,1451,16499,62357,50678,47022,118784,41723,26067,60563,169681,45046,58619,46085,32423,27247,64149,46183,1743,37486,3802,17194,24647,5372,19756,118649,4609,2564,83610,112562,46541,34261,17420,81688,66264,298500,194042,239563,21230,66509,23479,154376,33179,133920,158984,47967,146524,89138,72960,127604,25358,31305,13512,95336,27420,117697,9777,159295,2091,19097,4938,15518,81702,108304,448058,126466,7371,81386,239535,1607,211558,84106,53806,374,125065,23802,113479,52151,46803,46411,21764,51063,22432,63304,31295,6642,26992,946,58917,74562,10672,51417,1090,157283,6175,41777,30873,49434,31205,41041,70979,28851,11292,19501,20377,16444,125033,115864,49848,35298,117499,60743,35553,7657,117188,294354,1111,19913,107692,37955,25543,107874,180298,94165,181537,43123,3058,18116,7886,11895,8962,1156,81655,22350,1372,17937,241608,114745,32122,20645,31944,32077,3682,57114,6050,45126,4535,90804,42423,18205,88298,58042,4218,130816,58944,48643,192539,3516,129850,92288,67482,5645,6008,9861,19038,25523,48393,2557,163977,7711,69978,88546,98350,106098,5102,61333,26201,45643,21353,101008,50380,9018,90864,12853,151908,45670,48604,5148,32715,39819,1925,87856,45697,2007,66226,4152,9542,6588,36053,144503,58516,41489,32328,73841,5629,33075,228550,18718,1278,118540,138339,9789,1171,99245,73118,147565,168255,51267,5701,10846,18e3,6368,25481,42085,30996,30750,21874,12789,33285,67958,162991,30223,14020,26867,21295,8993,66175,79515,148442,56352,397258,104422,69338,67203,81,103746,192218,2448,103541,4268,26498,28215,26795,119536,166999,6052,116957,18923,77982,23540,54054,31372,18430,126319,39890,1756,5893,75933,40146,271195,76657,36689,21496,89710,61547,80235,15197,81995,39003,23231,6321,26632,19783,23561,14948,63802,56505,21383,38408,16252,72824,38800,196129,74267,8127,77548,48102,87833,36171,102798,47900,15495,173684,21234,30001,52403,46069,31468,16788,57124,45489,158608,82654,59957,10410,46188,171714,31155,59538,63960,149773,98372,22924,191679,82803,49057,16752,8051,157358,24903,23142,67014,23023,30666,6199,11185,61761,108153,49193,170078,64795,286604,157605,42186,22327,189946,54197,28827,199449,44686,59637,34777,152898,16645,83206,41930,102775,24648,36524,212079,95709,1548,100504,12421,68448,31268,474576,34750,218355,92781,134981,24111,67882,54747,174240,110344,94961,114973,72370,73918,15923,15159,7647,45171,65568,43530,34464,70826,34474,60365,197139,141949,210472,46891,121996,40063,94408,12981,134679,23979,51874,24714,19995,24254,36223,157770,7326,37309,94133,22106,78205,26724,2537,25382,106656,27179,66311,110415,22901,24718,57112,55550,53766,83648,13063,9413,49639,54938,59353,51453,13425,14591,124743,17157,12381,17425,61233,6845,73147,29525,129664,27744,5277,102675,54090,98234,13352,48975,17754,16594,102750,48654,39678,70262,34873,12316,8508,46395,134713,8929,37841,2872,44089,60640,45964,41710,35853,41709,32561,10847,30533,50168,131914,35502,7179,63264,101004,13098,13461,89812,195792,68289,50907,50716,618,42226,56670,48632,3817,23883,6968,38755,21629,7154,3872,138583,91142,62213,50389,160123,68183,5493,38,55579,58839,15930,157836,71829,40468,28030,16196,24230,33693,43412,1608,233277,6049,16708,17549,46322,16760,153973,62078,39650,117125,26112,36797,166388,166224,101342,69645,34718,6450,41096,88450,24108,54215,7626,56703,98252,7498,5996,104382,7031,18513,1464,20355,106695,12121,15785,39445,62498,113,143048,42438,18258,69031,20970,28430,35062,185809,306428,189608,217827,3480,29084,79447,78731,32985,65014,127203,34824,4550,257781,321144,33354,3217,218324,88938,19520,11596,43514,141333,60852,65248,6297,11095,2432,14119,13748,7469,60224,12819,57422,64540,8587,52981,73978,23601,2836,30776,142181,19639,62955,10337,595,211745,702,140990,56342,19255,20227,135292,29499,348456,42285,59021,23153,398,40560,12943,20085,118311,95592,31441,30421,18709,62486,96516,37157,85251,11094,115980,17285,128523,53035,4890,10141,87821,143291,78302,59857,33639,18842,69975,11769,10009,46177,505118,54757,192067,77994,12960,50591,24130,1770,3662,133316,209915,9657,48891,39791,15630,107422,16844,81827,8655,172915,60826,36740,246774,32655,23684,174097,93563,128716,9168,16463,138739,25886,3373,1869,35842,25164,41241,1126,17486,156740,84370,68201,98020,119928,18998,6457,120651,165875,3291,58021,5480,85817,5424,7918,43877,11007,125299,24181,67060,89110,233405,35096,471,33956,19798,152016,168120,12652,156405,133111,116254,65156,42113,9958,120153,180266,111540,269252,123200,8494,34196,8578,82607,36889,12572,69053,33057,19958,67796,22249,3640,20955,15759,9894,33572,96,8969,80871,33260,1264,67165,9108,87451,118288,65977,59131,17708,135769,66193,98679,61993,44754,23134,122439,76614,86671,113511,7544,55848,5632,21119,183800,40580,19026,82001,99485,55491,168220,108940,236173,16220,289120,163513,75470,32902,33569,88755,3113,96883,93821,299927,114933,5574,66144,80618,43070,125428,70635,119887,3673,55958,7687,101495,5831,97794,5642,23968,7105,10753,2714,39381,104590,82035,55445,30394,30985,36078,56636,42720,49190,134117,71545,2558,567,53812,184182,144,41897,149050,93133,9426,48576,19715,7332,68965,74846,31701,37389,27344,9014,157686,12643,17067,29166,15457,52315,133218,97956,26560,22729,19455,100687,66306,11014,31241,157229,1036,158742,1911,18856,8404,17050,49637,105257,26263,152889,33300,24194,15449,50178,57835,89431,93344,34601,52068,6811,39076,41945,41909,38286,221235,52136,190373,62204,7398,9948,20577,17514,97470,26914,13538,27727,115631,63548,60637,26694,36204,95721,237466,17635,8311,115951,155407,372775,119613,40759,7149,153893,29766,8960,16679,2573,75649,158258,17939,56612,138333,38938,4371,39651,46863,49232,4029,76050,62734,48325,4870,8916,70189,42234,482,51761,85517,81523,299332,91771,91710,253019,32687,95521,66713,66128,29849,16707,26650,40978,43719,4139,42193,20048,230595,55007,13024,238048,4557,73590,107873,38760,29575,21439,27927,62928,129083,22364,3858,122560,50006,32925,40998,118532,6970,5412,10487,43687,53543,72899,67285,137472,16857,46509,32903,163689,209351,336887,206325,26680,147850,10276,166671,9878,111570,4130,56293,17448,129038,49791,3323,51035,77462,50111,20907,16211,5982,24162,56278,60834,28521,209493,95578,36749,39356,52739,208999,29178,58645,19127,12057,14241,39982,78123,80813,59868,6719,15571,19762,150086,20349,278029,2666,2305,133772,121203,3570,26477,55785,32824,6151,42422,310941,94923,18190,34342,18288,70657,25029,165341,34909,320097,33308,83279,75404,45112,17301,33894,4577,18669,9219,14257,107253,512,36710,29928,16653,7279,43478,12743,3862,3899,37090,13957,212990,2895,53197,125571,40119,7450,95395,89134,18938,54751,39220,66712,44978,98747,35334,10952,9840,217378,35750,16507,209521,52915,36820,147839,56525,13285,1981,30146,51236,7364,104143,7249,222095,6399,165008,16565,13029,27969,105952,45399,41770,169129,53714,39874,7853,68938,61382,114565,59737,77275,29135,215780,6342,153711,36717,31990,50742,2834,52961,230881,31804,87897,73954,171477,9339,91416,34110,102,54930,1613,11876,196546,591,20460,50406,44538,17056,34267,74596,10880,9193,96244,29689,84948,20424,26253,45632,281705,119042,185961,44497,86651,192207,11795,114742,10617,265712,62568,92499,31395,217897,187475,50383,2342,23312,42405,26096,453658,416,133446,93547,43569,10623,121978,21757,60561,74826,42853,104403,132901,72040,67234,59013,21845,102518,153642,11146,17727,102632,86313,72775,58556,407048,21027,6844,258242,89512,3527,107940,22262,23956,4850,30270,58728,16998,117875,20689,4008,14646,93e3,1170,77997,167859,54531,246835,11806,26637,167713,64014,37431,88103,62362,304585,30599,44120,31653,42563,81375,43712,1534,49941,109137,145866,103885,146125,185787,22202,33673,3681,114085,22277,2072,10477,217292,47874,25630,61064,97453,94351,180344,34224,169085,68184,1881,53451,30593,100128,39311,3509,60212,90102,7297,23473,11544,261844,8370,27945,102056,100221,39918,115112,65580,27264,10582,66982,2384,29292,51255,8837,91655,60384,127046,34788,4855,82574,50338,58959,95725,135206,28047,308666,7295,41193,95306,61581,157994,185542,36976,28033,16228,38830,10448,15213,20669,49883,2493,9951,53276,25223,13971,17396,141590,48264,32377,28668,105246,22993,20557,139621,17334,37996,19658,20744,25440,34122,116482,22910,76067,36796,67819,11102,17967,9536,55606,117501,39321,17563,65478,3571,38911,73504,54583,10444,11362,66927,89439,14702,28559,7682,1513,70102,63807,20057,46270,21001,21627,256959,184942,165920,26468,36183,112227,4448,85816,65617,77464,8502,40120,56527,77638,3102,1025,32749,21811,153766,15234,14725,328941,53852,58319,90203,39231,68729,69516,3450,70578,52687,66512,8474,90859,4090,124548,66064,39981,28642,75845,40634,22064,107475,78873,112238,18036,60258,22137,89278,35142,92257,46681,60200,168934,5658,51242,3324,71459,64772,85683,32,475,18068,32909,134334,1380,31213,76747,9749,4201,23438,35555,83518,23878,30619,43396,224662,33147,28171,101465,60063,34256,71664,1765,160809,93427,22239,73094,35152,17172,38091,1077,83764,93545,57605,2962,9185,13119,81080,39028,85967,49835,9330,66777,27605,184827,77443,57831,49230,57654,174766,42048,200323,166050,27249,15828,76305,4194,44524,13962,51363,67697,14701,36041,69963,72263,4470,63657,47301,159567,22495,52412,69094,411,3653,5242,4607,116518,99099,58846,58552,89470,53229,2141,273007,27018,137017,5506,4365,159178,120422,219012,127162,69641,26407,134451,42927,9321,12622,3936,145843,24141,64837,182230,170529,104842,135255,17558,17348,53327,12872,17153,10391,30,74060,152237,14185,205380,31566,22621,30796,108736,26638,49377,673,90154,51194,170216,63571,45050,32131,35257,17360,55199,20393,68233,118377,63209,4669,65374,65781,84411,92579,6510,108160,56952,192831,11126,55557,110245,73583,212151,16429,369879,20590,7184,24497,41359,86934,2480,131718,116501,37833,22517,9731,10757,78661,3437,19565,6471,13896,33073,74906,286,53375,30156,29608,44034,13989,16557,36336,11786,9016,3768,30883,52210,33318,55067,37827,143891,319150,86829,93201,25144,48395,91e3,56891,94800,60129,12350,105311,185,78672,148650,2793,13582,54814,66017,22898,190292,69218,79424,1785,10144,90001,70885,6226,65791,123504,49066,19757,151381,633,28250,21135,4879,91112,21369,79333,54846,138302,51213,7684,96590,49597,34533,30172,13591,193897,11510,1702,73010,42908,3258,13889,151689,47726,18176,159526,179101,31058,18465,26752,188829,15744,84413,58916,38458,15452,6315,50155,89783,5933,36411,8754,11471,15409,163765,12966,2808,36697,4346,161209,70415,56116,356,211098,14356,36846,107618,53672,48457,30017,598,176513,81011,18982,13727,86974,48130,58055,285026,119331,69388,22734,162695,127129,6676,10209,8749,19120,28354,35996,14583,2294,21774,7098,7132,30506,68020,26105,63521,287047,31652,29144,184253,45019,59739,54276,32378,4681,28618,155387,25991,60268,28085,115514,5604,89273,73475,54698,30961,26093,14648,29343,53675,45157,6691,46637,4874,13617,45597,95292,84693,71181,195063,4205,5086,45424,49483,57401,34811,81433,10920,60312,26978,122016,164823,61302,56564,35695,36714,67995,7904,42503,11148,636,33519,45175,78078,5252,51221,95264,51178,64304,113942,105499,51841,54146,69253,1646,75338,105535,6664,10892,158642,62272,125563,215912,33549,19391,22055,105382,20979,20764,220680,38079,4062,13641,102008,4203,20143,28206,742,47639,13458,8201,51930,16197,22187,25787,19494,75134,114304,94871,176108,45555,116,160484,44424,12397,146985,10330,35123,239546,28027,7835,13025,82191,412132,7092,75685,170210,25010,106234,11759,43065,8341,715,74335,50832,12326,62728,22250,132367,15166,1485,181453,100489,159053,49558,131147,218225,72843,179732,16984,57645,5036,111986,132115,50930,114625,1202,154311,67481,16722,47767,11991,40423,208598,57602,76452,34425,3714,48128,52609,81295,9952,36845,85351,16065,20654,19823,196,24873,26870,1297,30969,9296,54228,102469,9198,72519,70039,108396,74919,85172,66125,101377,2529,117805,96810,24778,56838,145070,22575,3889,71779,55500,69200,56256,29187,1545,88869,2923,116304,4719,101420,2691,3504,4334,13196,24283,62330,11167,46433,98976,41190,4304,38379,134621,86153,55398,18685,16560,28393,104952,236521,190161,254926,97238,29381,35076,104228,132048,21165,43831,105189,81338,60610,75143,13264,30942,42614,10992,84359,171469,36755,2955,3574,50858,7720,113363,12415,1082,8309,16640,8534,89729,1994,39280,57147,259158,159887,14424,10175,59116,66944,434056,188174,112776,24021,39757,59504,17275,18210,6474,60932,53833,48968,4909,66318,8851,66549,14450,16407,3384,60036,132244,107921,15561,173708,120543,17638,31452,27253,351,99103,3968,104995,54896,49278,134414,51028,59123,28403,11528,46089,883,39786,58165,83022,52349,145865,50737,25618,47214,8462,6871,83132,9635,3558,132475,8680,97166,43406,3898,139071,89536,142271,8320,29089,83232,29139,37374,11887,13573,21989,22330,18987,8277,36552,94008,13402,19357,93955,192242,23973,19276,72365,83440,43343,20913,7176,15598,107084,9241,13556,46936,46456,48864,106185,54904,62326,15469,37957,3365,221144,71002,321774,79203,35192,114690,17782,21700,10335,97643,129017,125386,115842,123788,51154,15859,74495,30765,27938,35855,55933,25082,24952,27639,71742,23512,1935,32522,98612,72854,39366,29090,7051,75719,2791,156786,23966,41744,33489,127417,36727,13017,41582,128016,125842,141281,56078,108220,31920,77429,24558,59290,9558,18760,9311,51229,19776,17252,5449,45702,18396,21552,218786,72761,87355,23965,27808,90969,38872,26050,190429,178071,13825,15009,68013,27591,38972,14110,36020,50172,200538,281255,86003,53465,47708,215042,29735,28534,1368,69656,3404,24318,47650,37653,87348,40656,8697,25748,119357,39951,51347,22849,115714,1560,13392,73201,2324,35889,27677,41987,86796,378138,63587,34445,81973,5437,94808,11707,40992,27780,19572,62130,43376,35564,204011,21987,93621,4561,146551,233073,28784,56146,1533,99739,16808,78879,204037,27916,36367,31905,55776,19527,2517,49088,49061,67853,2909,67751,72529,12945,191926,57369,47731,345715,24978,37675,6961,26371,55303,17783,45945,57303,53308,102816,50376,152609,205724,29088,100615,14981,60068,20755,67912,22984,3098,119389,76407,31834,21375,86387,71132,54368,64784,154591,7007,38915,23949,15688,86044,32410,26579,72957,140702,2534,63121,109577,36571,7087,12319,38027,139635,69422,80145,58104,77565,134884,39967,128121,122239,98149,97861,77841,122108,53941,6757,105412,5433,45309,70143,41083,108846,68195,67642,48548,22786,15898,37082,16924,108012,18926,34698,130920,7208,84736,69140,115981,3166,30758,122883,16988,18278,9920,46151,31634,162250,22353,62187,128316,15612,158856,80934,678,6963,76542,429,111036,69613,18534,19437,41943,186274,23104,135071,64054,152408,69055,137885,55427,70719,41478,222647,50820,94953,48990,13331,245898,18180,15149,154065,124925,217145,82559,327,139288,191206,14470,61778,6536,73668,129358,74257,25611,26141,105172,40116,65034,30807,96573,37493,33559,28049,4551,14855,7513,48252,20443,85079,69697,8617,95869,237641,48366,36858,128756,42342,3347,3587,16403,102164,201481,17664,68064,199965,62177,224396,15650,71204,12089,125579,76206,4662,192158,115192,18064,29368,28388,88784,93189,5042,144274,26733,112088,113914,8714,3328,85297,122214,129118,14482,6034,8955,1500,17059,143211,13149,46390,180700,11460,102503,31711,124947,75478,43173,42126,146701,30953,5659,29827,78342,38880,163787,38389,57177,12232,69003,35027,31713,32846,307084,9190,1177,53022,63392,36783,49720,204857,171080,2218,24668,46908,21390,44902,5316,16460,81918,10429,22493,40140,86666,28478,19197,39367,36622,197757,35536,74,24126,27886,49478,60977,28887,159663,25478,34942,5736,100422,11653,280716,28054,76213,269086,56854,207170,12900,26987,34564,163428,35718,204153,14178,79891,154374,93383,82977,346467,2260,194527,234413,95363,223815,84524,24639,38980,45400,11669,39361,111806,107478,23180,284178,80828,13760,60535,160002,9200,111334,9377,23027,19288,10467,219338,9403,294896,38891,13604,6964,114468,33089,246026,89623,87405,73198,53282,51034,111715,3542,21564,14671,141705,108308,240720,1039,7015,84375,20894,62644,72754,61580,52142,32302,68463,27046,8380,114459,48738,174003,101876,70865,243147,15573,1008,73339,33397,75662,295288,97483,101210,83260,287998,315229,37051,33599,14151,14676,98801,6611,61888,45855,82847,52987,104357,56918,20397,29312,1971,1398,4940,37732,8028,358536,185559,183958,188192,3892,18716,73119,6906,4369,54718,83934,109096,203506,83491,133450,4849,4027,11725,13003,142499,87752,40803,56197,37560,36968,1128,46164,119031,23432,12128,100279,84518,28176,23060,41295,20799,1558,5174,23677,97773,39548,7745,10446,105114,10769,67007,87718,236680,161719,46701,32017,4931,19125,1571,28423,43674,64085,27807,77944,8529,13223,180186,17974,13548,140128,256996,51253,43890,57544,18975,7744,44658,28313,16837,105,127130,126370,7877,20389,133921,174075,212758,64619,11797,47857,250379,30209,1917,86594,15440,21744,135164,34325,87954,11946,12540,311,57755,56815,231078,40529,24719,141657,31438,81877,124057,251942,13765,33986,83461,63216,7231,198398,258,90044,88181,173923,50864,61645,10174,54553,8874,28481,1537,50513,29038,39872,84988,57246,71289,12015,94709,4871,31627,279590,81311,43545,15429,59109,71443,10416,9005,6896,26184,104749,4061,38580,23344,2875,113851,13804,63848,29618,107716,136811,54885,33689,82819,50624,149592,114467,13651,11306,73580,85777,79656,166366,222515,39565,117851,47704,43581,137265,17539,25867,43261,1034,111446,117360,32008,3664,12938,250542,16992,14203,39724,83746,187150,20582,190787,110150,10914,42740,4352,122213,31831,49606,15402,8583,34572,18519,21070,72128,605,14069,62708,68579,26360,45158,8539,33700,23921,174967,23777,21086,47035,21403,73853,29070,14402,55968,13552,25123,132516,99114,38810,83727,93287,108584,86117,4037,69026,148748,16285,151286,2526,67336,56400,114949,38156,64061,1718,14168,68963,19987,75342,72606,92460,25819,142863,865,10759,102417,29033,128297,176851,239106,378,3476,126764,880,110113,35294,142380,60787,180321,12139,33148,3243,32586,75807,8895,69743,23606,76161,0,32234,26393,15253,101159,37444,160984,100458,106798,118153,207987,94453,31068,199369,23783,55406,72063,196753,8406,65985,6649,169369,16904,2912,14378,60219,24596,44552,22129,79241,47274,46556,155072,25,11693,93339,175196,82189,46539,25983,55777,39522,60524,133678,18470,77553,78595,83411,33676,121561,48423,93395,74963,17181,31718,50927,45519,1283,20170,4973,55435,106949,9009,50903,7663,1685,146268,116269,1759,101910,15183,77271,25151,101108,191060,44211,30237,101323,172765,81369,7540,8670,1349,2983,72423,57110,138436,10840,116808,148570,37365,13235,144011,326438,10970,137859,245169,166948,40509,8825,6884,140489,225817,339638,308668,14440,20021,172262,20842,35348,70394,77862,44480,114795,152138,205967,80249,66813,21541,21337,74233,246096,66559,255232,7873,74405,66544,78592,41670,16122,89352,272783,66583,16290,2725,97449,74073,152635,17258,14662,164479,7400,91345,77718,116341,23495,7313,145703,66781,95536,3815,59962,62075,48667,115868,88403,11136,31573,8660,48458,10303,30913,40362,76502,54728,210919,4071,10395,14132,19281,103524,46479,2475,9346,39388,11097,7103,61594,118275,49094,17865,16935,21950,49474,38996,44270,6549,83808,6663,54784,38226,40402,13514,51690,32754,33017,146868,3834,209574,31460,2290,5991,29201,189025,95100,116204,43495,37630,621,42790,18028,147636,74713,72101,20296,39620,52377,149079,40597,71087,48840,41861,18370,78232,9624,43707,47520,67447,30945,84196,202450,110891,61689,177365,24134,22168,57538,47780,2219,96079,30892,4049,8195,17695,2313,196966,69545,7785,159038,116984,38041,85191,95576,35677,136934,87868,8522,47264,46374,90011,2454,121060,19041,15646,218596,20647,159811,5273,78222,5790,84865,690,36264,169096,58620,49769,19870,56574,846,44944,30096,21418,98749,62549,49755,90559,13569,65527,23045,35183,30714,1120,129237,133919,97246,73893,1242,5886,32186,73097,9292,172076,4479,48341,159618,10702,27355,9327,3896,145089,92973,127562,80631,140609,35214,40087,6621,60953,151491,93233,133991,5681,75963,13834,189749,48238,37631,42943,70301,22025,1561,101790,52288,23519,27200,15594,330,128333,238083,77116,27436,14656,23182,176130,43018,93766,60756,68727,36117,110670,12291,90265,17003,86775,25766,50378,97783,72630,39355,51597,76915,9532,102333,333464,26234,91954,87362,18461,14063,123415,65741,87119,13821,69651,59906,29250,5334,111676,19538,14466,71314,49631,201575,100994,81169,99402,48772,1958,86381,84313,102938,3927,14847,115137,24438,1719,106468,14344,292580,113808,25709,4422,39964,14448,9781,167464,66366,38612,21306,135701,9004,3967,14882,60987,61379,70755,79621,230123,50548,251137,45013,68059,37622,8601,52714,131016,38732,161564,5054,17043,28379,100315,11542,22026,68180,40581,195387,5840,76622,286510,15220,21299,17488,10435,34592,77414,69849,292262,92100,61536,5963,40657,72834,85029,7219,137580,32702,24398,48143,18315,7679,10221,43413,55964,56264,22174,55358,421,32944,33586,540,28638,297324,19055,58691,13123,1457,13545,29506,12292,90917,28767,19245,95156,15265,9677,52193,329199,120474,31550,48621,32454,173844,6940,5518,104662,27465,11002,13048,23406,127455,219189,118625,966,55994,71978,44755,44425,58484,81947,191081,71933,4128,149448,42061,45036,34993,81007,89197,17973,12644,20286,2259,12086,128406,38420,60665,7439,63696,63513,66994,154461,3204,269842,71210,72373,47920,147744,51232,11668,11964,5455,3585,62466,87325,135079,142096,6038,3351,59851,55024,90797,96831,151965,7892,59192,18848,84506,8345,62542,50046,26538,58653,123823,70584,33087,463307,52217,94498,162262,65658,37813,1798,133237,64319,20468,342279,2483,137941,174532,134882,13053,136323,101319,14858,315661,53499,38349,1883,36549,12746,4783,17315,26629,43492,1433,30848,103477,6978,53491,254027,59138,95163,23047,130383,71358,29925,104048,147110,20605,60175,141493,1502,26372,5128,8043,160154,205752,7352,24589,41005,8787,41463,180084,35056,128767,184756,116446,216131,52109,121146,31824,120507,78611,20473,80909,52814,53045,18426,47765,19434,251918,4598,37752,2736,30186,5309,104505,61873,39702,54580,60995,6795,78461,14277,102209,56595,76365,121151,84271,40571,22053,10691,60167,8833,12920,56711,2593,16106,101890,43880,47882,105443,26296,63409,2286,236404,3535,76682,31275,91877,94825,11830,60322,77261,14017,172218,120226,23764,296,264898,128743,243138,11474,32632,32455,30389,37844,66536,221177,32878,17990,81062,25157,197499,6108,31649,68174,4883,39604,25788,24670,22233,11063,92774,167596,40860,103202,60222,67201,150525,69109,11100,21724,207627,23699,63159,50235,17317,132722,9432,137156,14594,85114,224657,60669,32727,134466,25240,42617,6453,86119,53613,52551,39633,95001,152,22181,33930,6888,138620,139630,14275,67967,163829,44096,23693,35554,2397,2230,20289,26508,85345,44002,373,23558,12501,6393,128738,2065,37507,108535,43648,37304,64932,28919,39223,9316,38575,60236,72946,52874,43522,3500,42635,18532,65789,350700,113725,232391,80198,62151,18623,5216,78796,80102,187580,46871,35226,102412,1673,53825,3851,294484,119721,213745,108891,1551,16270,77,73311,86689,90501,11580,3060,174403,54046,2060,28391,42872,40600,5734,93671,48215,33532,19766,39663,848,33334,33841,46142,2841,116488,9276,30982,41267,161026,52345,66041,22012,75546,14211,37281,137475,48692,71432,68157,27935,25905,26558,26553,91667,162874,41931,71872,49342,134603,3964,81142,58684,69664,61624,211527,194930,43281,38136,39747,141202,109912,103720,118119,105830,244717,53752,22695,3660,15950,115237,2859,29995,32157,26681,11066,63677,2677,27475,20232,20055,83960,187268,168911,71409,21339,67656,7933,3860,3943,4936,197005,39134,94952,21684,17066,56970,61053,6076,111071,9161,30747,75947,44434,9778,40744,3960,133994,16681,158292,120209,120798,124190,20560,28017,12766,9520,51106,98867,227798,634,8951,16361,45756,34211,71984,20818,132852,2771,8039,31695,29917,46819,43140,4911,36076,31350,146547,12832,55352,87682,102259,20181,65281,125529,76789,74087,129800,20270,210263,10610,41958,199960,136842,106466,18944,91106,109596,45385,84678,1826,26239,13942,18580,74780,96474,109106,168093,58817,77576,139329,132621,264328,131918,3004,39997,277046,10657,188062,54092,9389,208482,138342,27740,112130,141428,159919,32354,78912,10848,248488,3770,58675,143326,309222,114118,121341,21213,104326,103242,247904,10251,17363,43918,50107,99756,9914,15899,1529,57591,10958,18574,191645,27047,33819,145944,50973,10931,515,3190,56895,26750,118357,123469,6582,232402,185264,219903,14816,104060,2257,24169,2672,34078,85037,100571,54688,18794,11296,62403,48268,85546,58594,16776,5744,7336,60494,92779,55136,31725,41292,14535,43085,170495,62016,17168,20160,13301,31775,16475,23866,68028,7708,14304,27024,412982,50360,37231,31172,8313,18133,1712,149874,165108,53176,28218,60812,11433,110651,242754,239758,103026,54413,61688,60159,42554,63279,28980,26817,24147,239906,1318,94868,66949,9143,51359,25429,40100,150526,222657,6742,15209,35877,99200,23325,5454,116860,67989,20127,66101,152710,31772,35795,93237,22499,23932,217156,63347,85225,35351,44967,43097,63722,201251,232588,42922,76661,49041,51431,91264,26250,27306,16146,171707,8346,19128,15883,46818,14147,40135,98017,121209,5750,3986,4803,194061,109091,77333,135407,15726,139517,19649,240604,296254,18468,120683,261045,15054,49607,151927,90876,33988,94815,21081,4338,3114,25278,7076,168237,197598,5263,78375,28858,96610,1656,77501,139877,164638,29453,101599,77549,15067,106520,8011,191624,67048,47927,89585,15567,16358,40740,96715,19262,3368,257227,58179,82342,164701,77237,5378,183488,891,51832,102138,1421,126828,72223,106793,152999,9464,38181,26051,369537,47723,127195,217276,19701,87052,2899,4197,91519,1222,71232,16297,58674,236388,7640,27014,38262,53246,56437,46721,45960,154554,93517,13322,57858,23476,62092,22806,29494,60980,59522,5278,152497,10089,42687,29629,152505,1415,65715,70632,27834,5144,69061,9647,106305,17509,83636,71519,6066,32864,49020,58818,62070,83328,51524,40603,27209,14130,13006,128530,34289,191758,175447,8903,6644,258111,1630,36770,19694,13099,93412,56900,8695,92739,9361,31483,22727,24402,12783,26935,64112,50162,73354,43845,97824,38035,43333,34265,4521,118246,36777,34920,27802,62580,75613,87658,36480,37311,41140,6114,54859,37921,25174,84767,123137,100067,76401,64250,31608,5782,50390,47318,8602,146787,57571,50720,184949,26374,49411,19264,59669,72340,61,162514,37868,20961,23322,33357,104140,12370,75813,13117,173944,10984,8143,6705,185922,4223,25479,46696,78515,10296,173037,75032,3611,146130,87547,71054,20284,76208,179291,87004,88099,25915,10612,42035,58634,8935,45162,69138,29960,4954,9827,11903,75332,189060,145940,99854,68852,2428,35935,102328,55387,95597,31446,19611,66526,25614,75226,34525,91178,34821,57507,69312,5965,54613,73567,6431,38968,305485,72661,49842,46229,13066,35961,101600,6117,6625,94731,133178,5938,14272,71096,108751,55431,8310,74568,41829,15997,69572,115173,89939,33817,27169,164256,225664,113979,208705,24886,48916,4745,105265,2285,99556,76020,16691,17685,9195,67243,29412,15704,130387,12347,87154,6073,5960,22667,45766,126328,36857,50552,563,58566,116724,31042,63335,55856,53518,24055,44320,132215,94002,7583,31931,161536,39077,14213,37853,130359,53996,47829,71470,59662,6945,70919,15101,29373,22261,65721,32624,111143,64291,96324,23614,39737,8314,9557,132103,65689,152785,54960,122712,73272,57588,3782,8427,101263,16522,3063,1332,9763,9091,103598,131811,79941,5048,53350,22985,72314,87671,137942,20832,32726,35441,97544,14838,32661,39509,25235,12815,229677,1945,18478,104804,53001,12423,99415,90412,47427,158923,19643,66679,33927,178413,13851,2378,163553,37549,4735,113147,13151,14095,34868,84260,49719,1475,55719,70677,22297,73188,7304,101811,35472,62878,110472,31193,7011,4819,44319,37242,22235,24012,34311,34630,8117,68534,47855,55542,88606,42606,10807,64311,44304,4010,54889,48956,37274,120809,12117,36576,15154,57497,55581,76707,88824,59564,29146,75878,346295,101758,137754,84121,153651,103718,85489,61427,59883,32701,4692,17006,92343,80116,63122,3829,201429,12345,10158,29504,164968,95834,119755,125824,142638,46918,23943,90123,20494,21468,29167,157195,24079,53213,49163,19311,138007,15665,149198,44724,55347,31200,1573,21255,26337,3867,100570,205427,109262,5140,8979,83224,17644,96013,1279,32509,16380,250744,103649,111338,4321,21016,68917,10756,39197,10069,10563,184865,35905,13968,1109,7847,19871,35449,21656,7996,38626,180829,25293,37599,10356,27683,46005,32258,8111,39704,15702,161889,13627,59956,21006,29672,64295,22893,319443,755,33239,3115,11630,35242,316161,26293,180051,34293,25262,32785,45248,4291,1345,75934,380808,185068,5400,62445,95085,113696,37657,141162,2763,1716,31145,62720,101394,197152,222158,2018,103950,53054,8291,83638,37618,74005,127265,19949,171632,21168,31182,114012,109942,16057,103239,95006,48470,141582,50740,3330,57743,91063,68640,99829,25131,192726,1408,130935,113922,160076,66999,309272,153746,62089,54683,9565,23036,233538,39614,55874,51238,28998,51475,121727,56411,33932,53786,37017,49406,91778,26837,23586,252174,2540,47569,319858,177485,2308,5581,40970,118880,34878,1602,27602,64100,36001,13488,8625,28038,116561,45356,112329,100,159062,48033,61060,53312,14278,30173,100088,27580,20456,230013,118525,51822,34883,100756,25922,52426,18317,13881,16232,8187,317935,69863,1907,53514,75569,36902,60671,5105,60024,76920,51583,106419,20458,110614,44553,36111,187025,173919,80993,52249,116521,11851,5262,26289,48960,29999,94679,33367,125032,72126,8676,211498,44721,235091,940,97176,26565,5948,20736,10278,50485,12407,11823,41971,135546,103878,3020,21249,253851,97728,16476,7536,49750,6746,12340,94756,71789,16549,152600,40488,30681,120494,97416,90981,75736,36235,3703,36522,4051,90148,25744,143233,74114,50674,66826,186399,55544,63905,16245,17811,43885,57562,16876,12660,11009,92234,46446,722,137637,44043,84798,27042,5314,21312,74227,10917,92213,211986,176020,52818,44610,174541,45192,85977,66236,78509,61955,14788,256627,12032,75496,83996,101534,82235,23946,104883,3183,12850,23626,57697,3225,16042,40372,9541,108356,126495,26036,101893,24582,39880,6149,95087,46546,59092,11822,168583,82335,18729,30582,146256,6074,39807,16541,11986,80148,61456,41914,80721,142480,21004,82385,83655,47670,4769,232823,41862,437909,4116,40921,59664,133104,38104,80773,101843,38426,90874,14930,55522,12793,23708,3631,8582,3112,415975,7517,106586,112390,31555,39619,56075,6299,30930,4348,38188,23437,11888,36180,29057,78844,52556,126106,24776,65214,92664,138939,39642,153427,17494,62611,31501,49371,27056,1477,16503,156270,23995,113512,205238,84709,77316,47321,67623,42436,36548,25052,10369,19122,181758,14546,6743,124696,124095,118881,58058,29158,24211,29060,38102,144694,42736,23589,64142,131963,43763,128322,42128,13330,35824,36795,108915,43897,15657,18401,58900,14806,118110,137921,30097,47026,4142,104699,4185,87711,85997,267929,153261,228359,20660,36194,54339,43073,5692,172791,8213,26146,5686,18113,28694,17786,77352,4766,1852,168140,76409,188215,2179,198971,53244,30083,37124,32195,48123,332586,62934,88005,15880,94089,68377,87929,133891,5805,11217,130365,104237,77909,44881,6260,14391,22194,42271,49170,261884,68234,79361,14141,107542,154976,30425,14602,73251,43220,47978,4990,19457,40660,21608,104477,3582,70001,38324,113052,201756,184893,168071,1921,43965,138095,106316,100248,3825,11128,115487,18833,101956,103010,11802,30806,12615,22663,5074,17663,19426,5108,141373,42930,183720,212615,34077,17051,59686,8485,22524,8691,78244,5565,124298,80099,217111,49222,20498,66793,529503,54614,4186,75927,40419,26530,57883,5327,44876,42639,19706,60003,74433,16319,1599,26748,132682,55062,6955,63969,38461,152662,43166,12979,233,105595,18768,75949,56729,21114,135004,23948,42101,22216,320051,21698,23811,10294,826,29297,123324,68158,26264,158791,95573,10436,191222,9993,12298,86950,123108,20858,320830,7206,182464,11757,81755,62115,101508,64002,77412,3977,47597,13370,37935,3657,20526,27967,53371,59874,220318,6962,46594,456,88484,47078,50207,118617,53233,59503,10872,18156,12054,11152,77825,106663,95945,18093,1644,112229,13310,264515,9070,80992,55835,162270,15035,17442,111426,61158,71574,8217,10224,82739,45979,55551,15768,183976,64417,5133,165269,38884,710,34344,57175,27784,31790,251927,69733,22676,125462,51153,73708,53147,16750,39364,77866,28089,2461,201321,1010,4858,82482,7816,123565,3065,124019,66803,1441,2105,147722,23057,2238,2465,109286,156724,37091,60022,193667,145664,52352,15876,275211,14276,101280,2609,1583,95705,18345,47036,168953,979,1876,17511,99269,2796,7756,45223,209272,6875,13501,19972,3039,13429,88164,40587,48347,212525,23645,107978,39326,50602,71127,74343,5725,26276,95436,69705,115587,28284,114395,42685,63375,3424,66319,70412,12400,19465,68740,40524,83167,52397,11466,284475,42974,46963,1472,38647,63800,31420,5787,41395,21919,51399,116728,34891,76404,206476,116758,145291,39684,92317,182072,3771,102030,48851,66664,589915,408336,637,73775,252578,42675,100820,82225,43433,158753,83349,100070,42160,13599,10317,42154,91152,132379,60227,237752,99758,270587,21972,37249,93833,30614,6908,73035,2132,42490,282439,134241,47775,14940,32857,14647,284209,112665,224767,50372,44452,85605,95629,194385,241460,28172,83882,169721,7505,79753,42106,57611,175719,33441,87338,1110,81138,125252,69757,29461,19692,61492,29840,67754,2077,4100,68709,14021,73781,501,37665,25322,62392,106943,45244,60281,4687,224380,114577,31964,38842,6435,49188,3526,19117,97765,175943,38531,30032,27448,54009,25775,5789,30779,186746,7022,85999,42272,106158,428476,5637,191524,70168,172347,5932,69204,3358,12019,9877,55515,234002,64516,10898,36793,50555,139948,27732,39934,9221,14752,203772,22375,129338,7278,3245,117137,9562,29787,9323,102610,20118,12371,39558,8236,32923,70519,19395,17047,78479,97791,16130,89463,118280,22050,37024,89641,65752,52765,71810,108442,4977,44545,69952,19070,10474,23484,18908,21788,102174,82995,4717,97497,60947,27112,3005,36385,129006,15642,16432,25512,10570,43825,108125,73183,83451,75116,95227,44522,8598,15990,22094,1787,8078,14629,33317,78398,159367,125840,12669,67807,123785,64349,37447,22738,80438,10768,15104,98321,16742,22746,11237,41146,5905,13127,47595,35425,5281,12465,54216,37342,181513,107706,142857,10267,42402,87816,7247,28472,6977,228601,32966,2076,163136,1044,31531,56439,93179,59512,313709,36615,42191,80611,121959,23989,14968,38253,2001,194381,50421,88797,45161,11328,112401,85555,7543,130762,105440,130853,18911,12575,33456,139214,29318,62849,57347,85786,171698,27142,121611,1138,80752,54791,4221,77844,47524,140582,94954,18043,313972,120855,36517,63651,18688,30456,24046,74888,58460,70311,27796,50699,84011,20285,6255,200303,74910,57724,33394,16958,104867,22244,72990,7001,57825,20114,135408,43742,54632,30820,116627,34162,194876,27214,1233,2542,89114,33428,57874,24432,73244,13342,25654,36812,42775,137065,95419,3034,109640,69998,68156,15470,40930,43371,401399,12617,9352,26808,313338,55155,36975,17890,55208,52186,226992,16324,45573,22248,14465,65809,93124,76501,130378,8533,119251,28580,43089,52170,47200,44870,76202,54398,38196,30768,33917,36165,11909,25697,353546,54562,130667,372979,149630,9125,45391,144756,57973,19599,73904,2645,258411,25268,64964,61348,128044,132867,167846,141414,52489,108908,4137,41282,39617,33797,115606,493331,11554,30049,52036,71190,77943,31602,62214,2239,12602,19146,7969,18428,131922,852,160925,6259,23383,165390,7187,12808,189017,142381,1132,41841,18701,29043,134835,99,15791,9068,40309,98444,127461,27332,73195,112064,5097,39453,64494,72450,24011,7695,80472,162172,41084,177912,444841,55640,51858,96982,61111,3710,41637,100576,26500,116386,75146,6890,45323,42246,54944,26323,40743,9228,36712,134278,53625,8230,40754,28377,52797,241804,26552,261558,22659,53109,11974,49532,15631,300307,18096,92,29739,107565,55632,22306,36706,120177,123369,52145,28841,81811,2967,6374,39147,48191,58003,205210,102836,34591,52967,14473,26794,120917,61270,53041,10536,41117,108058,363097,14845,27166,219697,10564,87305,3185,20437,15052,45874,8849,48484,35021,12241,1310,87883,136400,127587,39626,11562,40667,83833,19748,78478,3152,57183,48701,22123,86751,79722,116436,5100,237306,30844,5999,191075,65796,41304,91788,24098,149740,84655,17286,186934,44080,20825,86063,13887,29758,92500,168321,114890,64965,3722,47787,198506,43466,25655,5407,13240,101325,27811,1251,36859,37980,10157,135970,13500,104703,81634,106088,4011,23578,31362,89054,38594,186633,34088,336505,15479,9229,92487,49521,16527,53016,70123,18389,75248,16479,22190,140271,80094,10382,185100,9051,71918,40905,72658,25068,29185,15832,139035,62499,80063,154077,192523,94489,96542,73906,88241,73266,64690,151133,2078,76322,24201,11290,230490,211312,36153,103,44528,9539,36954,4068,85638,788,127939,83761,100198,46098,285530,41414,22088,50928,15371,56983,29982,53638,112051,38452,291233,156894,16748,48674,241062,61341,921,24898,13865,8071,235453,118716,4445,177183,19708,21189,137791,14558,145674,60895,37835,46685,36314,3038,107218,25232,61381,204828,31726,43310,143414,32798,19718,11254,127092,88407,38234,37863,143492,19751,72528,6573,60076,8937,23046,86273,12926,43848,19177,134938,18033,102451,66695,155909,57463,34776,5109,25338,58091,2353,17251,3298,36065,271,28077,50946,7379,25203,5617,135531,5335,33853,21554,1514,322875,85207,47839,81931,162589,73080,72425,41666,2205,107217,133825,13839,41951,21025,1486,3869,68800,11775,73065,13658,35920,41391,181275,74450,84216,8800,141508,82895,22465,8542,21768,13e3,8240,5971,62971,23798,245635,47169,63082,25334,10884,141547,2512,44744,8650,42190,34200,155357,119815,26059,9904,121764,22752,11476,120309,20694,128696,2930,6392,69057,11264,13880,91243,58841,35178,12534,68416,70963,20428,809,268253,4190,31257,66625,41199,52789,24931,112688,116757,6355,182513,90872,138551,2904,50394,19487,185526,10604,30792,10910,41246,165026,42224,113107,28986,50164,19196,60791,4093,348976,132032,123165,19057,48820,65522,51163,17295,95175,4484,1308,4148,239196,12160,143978,245766,14112,90855,4531,122360,139905,44798,12441,35356,12686,74598,10815,112075,44675,49095,131228,20301,124634,94533,9419,75441,56741,243625,2690,10998,35598,155583,1231,7977,46730,242597,113005,19769,157864,288814,15932,62922,81227,227889,46275,937,11294,103072,3033,63547,8861,201131,23991,100196,49148,38402,10013,26427,1584,47267,32310,157820,36321,1694,31226,20983,78184,30061,128167,236696,33413,66741,24836,22935,47910,35635,2678,8140,12435,14911,265634,90315,43108,109685,72546,156004,8866,37002,25727,47204,51301,8652,23492,140973,93561,41906,95949,7726,23391,15506,42212,45097,63870,38047,35887,52725,285299,46733,43623,22636,21753,30231,2194,23436,125735,107590,55499,257282,66930,21546,157729,105247,1991,14483,140680,522,45784,342095,166370,88389,122072,21358,24129,216031,54089,2437,107595,202204,163607,26303,41895,46812,40542,78707,2821,211666,62835,14082,13734,19693,1603,38978,130765,68828,24577,173255,173341,81691,26679,29930,3426,45925,32463,13450,24567,11256,19340,65455,7397,30292,9441,111484,57305,372,668,19439,90961,5236,16883,27753,170633,167826,153144,144689,113366,88328,50765,15108,221902,232776,9372,46450,174146,151611,40736,105766,1040,5360,65342,48072,55757,82104,206605,5190,78870,18841,118613,78897,18174,80393,27669,110040,158621,25465,12309,35524,25100,18285,9967,2817,4292,20320,37594,50630,17986,72377,87322,63433,19730,31730,51337,57653,20420,33160,147371,43603,49870,45803,188912,85055,11824,38715,173010,66391,15353,27705,31430,7938,120390,37379,123726,25452,345,24163,78121,86371,105015,18360,52480,28116,10182,103586,12625,43431,22706,4015,110996,23635,211386,32305,9669,5607,79602,269494,361,52e3,75409,91252,16133,217163,25649,20080,40640,108653,52740,36567,24900,6769,93887,54650,108271,21897,49233,7797,97128,54633,281648,57073,36934,16265,167589,12650,209086,62181,5542,31164,122349,81815,67651,42209,38682,31383,122219,6375,11705,72211,22777,261663,21772,69350,85211,105528,83301,31254,16229,81661,5138,1814,117287,106002,97442,104335,3e3,2800,69084,40361,68511,5375,11262,76099,146464,17247,106291,8526,92034,43151,22579,624,893,4442,9159,34683,63801,15727,54296,36030,7741,194619,26966,57386,521,100855,29101,4249,27495,144898,122045,157745,29287,62320,13800,162790,170925,78465,1720,58206,24580,39929,46731,7089,342751,16454,254942,25844,55945,1967,64379,6774,82424,28311,43620,50135,58126,61363,144665,15325,125247,17219,113505,10215,205466,9395,52783,670,169135,8745,37048,58689,91650,121445,22644,27467,23132,76939,233859,30141,24917,80385,41981,8292,35986,162380,57998,43320,212379,22009,3420,17253,49172,54191,105827,25802,3604,44248,112875,6127,145960,16299,26569,47356,14611,122830,30067,21003,192364,48151,121965,327180,5291,74429,11440,101228,65667,78291,16492,12720,3052,64755,138800,114706,157348,14238,155607,17452,62457,44966,41313,98226,78628,2511,99734,74253,133560,17712,1897,74082,2056,67954,146843,392522,79571,93583,59314,13047,43084,829,117157,13262,38703,105899,54574,104172,22161,49935,96314,98235,13239,84750,53580,34154,114889,11591,72967,66707,104862,33185,16902,22355,42766,85447,36865,165090,84531,42717,343264,93849,81105,27409,214283,113392,12987,208542,45776,2947,83062,28965,25376,24971,20612,62052,26121,83563,52492,52525,3766,104113,40486,5597,125,87057,6525,25694,6096,199883,183361,65594,40734,5880,182733,16343,16696,86236,796,63224,7501,54031,26465,276188,66868,2954,84925,12475,2514,223628,75284,9331,78770,22694,89261,127507,56323,111184,138073,38522,10128,31041,55066,57287,41322,157136,126272,24128,75696,37221,12395,133161,60386,24760,6499,79723,24499,76440,34317,105548,60338,146011,210310,133695,189639,390311,10417,48917,77547,25558,125695,27558,50249,50758,54053,43278,12651,41946,33e3,46520,10764,46950,144684,13778,1185,25117,155135,141954,96252,124109,34349,110785,24351,73685,9493,83366,25352,100253,91513,17715,18369,120888,58948,46317,59607,74045,40939,105763,18522,3886,43064,66298,18918,33778,108305,147013,68203,169050,212793,41086,17383,9620,80428,94180,46324,90898,384293,16478,2162,57856,4565,220447,72458,27818,12844,44611,11585,8997,5614,730,93897,76702,124308,19722,10289,81775,44327,78975,156207,11289,31827,117889,212382,163177,125496,125643,46366,29130,40665,26254,99947,10510,84091,16574,120313,104829,138305,18480,16829,8176,17121,65006,22646,16279,64878,15806,31922,5544,11868,38549,32569,219914,15814,246418,24003,289255,313945,46052,157270,10005,11234,36056,153288,35135,63031,8440,1275,43404,298391,34984,44385,45317,14880,30170,5875,12546,45344,3163,4914,1779,66305,59800,72227,6487,36265,4458,73948,78254,47797,115442,39130,71796,11449,4283,30975,181777,25982,41970,19821,110322,41466,33507,69754,31950,489525,104078,4158,69239,85214,1653,56217,34223,9944,22,35473,131427,25058,121158,166086,254762,9745,276486,4120,33379,30250,3655,10419,70458,24518,6338,80002,3419,4757,24048,2139,938,210466,133421,8823,35575,1574,23641,94423,17694,113822,2161,40833,49449,5625,24422,131600,516,97149,36006,24910,111249,104788,8086,63142,17790,49461,10675,30015,25712,12492,181474,43374,19331,39246,12307,170327,251360,85956,29514,4826,115208,41680,59143,108007,189711,48650,14729,28727,61638,233522,52509,9807,83278,43091,87128,205247,225046,135671,122470,46278,118683,70557,19446,17394,5920,32166,80852,8067,86203,410557,33314,48904,140515,16642,24573,28653,11481,199433,119864,5958,55298,63357,14237,29162,73299,12246,9652,101149,98618,9611,57779,9592,43988,1014,6612,44197,23629,95201,51851,69205,94416,985,15284,36462,143673,5555,98871,71794,26730,9761,90581,198325,133604,57541,124466,1970,23017,51130,156831,80242,24852,47760,21190,76629,13862,175502,22015,38086,18855,52006,71380,1872,6332,88866,161906,10811,92768,111004,87247,58129,1244,4815,69201,134735,125070,78458,18392,146150,4886,66816,17908,31646,6778,69889,108470,70270,87563,7366,72962,13622,24210,28614,40719,40963,61900,8988,14338,191234,63447,35774,17911,12734,257831,101714,95260,78005,17582,88301,43339,8921,3918,82471,20610,84864,253574,21526,78916,58506,1435,433170,20710,147863,28259,4548,72451,2742,1878,156795,11315,75234,32104,46510,31448,15513,60382,37929,17263,142357,16994,34753,58853,23100,69236,5182,178878,2545,32116,152276,48111,71595,81171,93964,116002,57412,4245,19877,45497,156962,37019,27777,80506,87318,64770,13895,82605,511,8366,87800,85880,42605,80454,41603,36300,27404,35498,82743,121755,128166,1871,81847,25215,5995,60337,177660,36118,54831,138197,126290,301929,182977,7852,68390,88728,111588,58683,115820,405223,74730,36671,37592,276136,25471,6538,61648,553,89532,101905,27590,34704,25370,42539,28362,212438,98439,26905,4804,49970,60393,7138,33248,78329,11555,51340,1796,922,17391,17952,3534,20711,34703,17977,21148,25036,13075,6201,46397,257130,73731,213188,107033,38295,56744,112539,122324,145369,82762,25343,6279,18128,140444,35989,4474,15385,14399,63732,21041,30829,98387,31090,23985,55656,40284,132675,4230,48345,64072,15739,73537,8012,23754,107906,9060,3561,183232,19339,47011,28004,85175,46305,37773,122041,123221,100918,79448,192900,143005,63829,123166,58338,37779,33298,109415,112508,115553,68473,184384,41085,82184,61692,70292,29976,115765,134590,89398,87040,39038,8330,21348,47117,350,39878,167810,23905,28058,42971,15124,4336,12612,11230,18966,92061,59408,12185,128370,138880,27612,27335,49677,97407,61794,36678,60848,42083,7518,89496,57735,172121,74451,85960,144252,6256,110791,28888,21551,25192,5388,80308,1657,172671,42290,48,195157,5,36476,3307,89171,93568,157177,7894,66766,1420,14058,167637,30649,12677,121794,69021,13231,31605,230408,111760,67720,56743,31038,52660,61746,40620,81659,12864,14180,6015,215868,90084,141993,78415,116175,52441,7100,231077,112914,39586,51204,31298,52736,64704,3584,80026,74802,13972,215480,13902,93110,20076,42335,19048,41860,36983,169990,24924,34272,70434,20851,170586,12670,115383,39041,32955,71225,30362,30667,176119,19860,10392,48818,87859,7042,111918,36751,36731,38144,156426,19519,6773,997,29515,53787,27711,72672,159500,51584,24658,40226,1920,70951,26475,36713,58252,424939,115216,30508,35252,34310,133207,17198,8490,5530,93250,121485,122775,66308,95820,59227,108938,53397,88522,6280,46904,14869,8317,25024,14413,98196,5714,54882,8596,43570,124047,5657,302052,35,55219,105769,57203,241055,86860,6086,121752,2426,19677,79643,9137,36087,23961,35741,73879,95404,22928,151374,193172,7078,162209,225418,143148,102355,8904,2279,71928,20953,225992,15275,49711,9805,359835,337011,5747,97478,56084,49629,13712,164652,96201,13261,69730,256157,29392,154079,57395,17417,96558,76159,89103,154068,86071,1481,55845,81677,93643,5966,26830,128209,55114,215629,46997,96220,13347,6748,42089,26362,8183,87721,60802,344,95129,74756,31533,58592,82012,86256,21385,21021,2017,92952,1400,17103,123336,48961,24557,31513,34219,94330,102993,33899,115554,104210,45821,24373,157159,41476,17357,64836,47747,20243,42746,100702,101684,123185,46219,68593,41008,135956,132526,17386,18735,62966,27255,23471,193781,89150,2616,57853,104151,97883,5292,181287,226906,114560,56557,82841,7552,61282,26131,1854,179874,74127,60152,17376,124113,21668,38821,14260,31159,29704,82096,204953,21162,64569,11540,37899,44010,79498,50023,39667,14771,235800,15254,382134,51268,23240,7289,52385,166128,26710,362,239,31382,28658,33227,60344,73124,109004,15966,14103,77438,65958,13394,9762,92830,27896,85690,1773,205709,14225,11061,49451,12113,15690,22771,34399,1292,19355,16900,29634,38937,103120,45588,32502,13114,67382,21201,255605,1334,78137,14683,11960,2118,39992,111625,158751,15597,47752,3544,123201,69581,8045,25346,232034,14449,70422,61526,29243,21934,152079,39735,29007,76618,18195,153,27890,48728,123899,68311,48831,67038,51326,21747,8692,14967,4922,69709,15204,51495,12889,28173,172579,24243,12645,53481,33706,87736,191077,102314,17799,147249,101629,161049,4798,26720,45298,89381,76472,11119,5522,59583,86712,46063,85661,57137,135132,43749,6257,4316,44510,5843,232177,211804,97913,44147,11778,5876,129172,152629,43931,5404,124003,133428,97102,297704,57882,65703,24717,67411,23646,14269,13007,172728,4591,45604,57195,12344,102301,57982,61997,95626,254590,28672,129544,121196,14934,55616,30754,102467,25644,45957,41766,105011,59359,8438,80296,37663,282854,95433,8167,10263,65749,37698,56099,237283,25218,220862,42641,90021,45007,132034,144203,26155,333670,39456,63723,27049,39050,61870,153573,33337,28349,4161,99154,19089,5689,26501,109719,53252,38261,73560,103696,77848,61508,56418,8146,14836,30856,9845,7946,131232,127176,4654,201895,63780,158964,20916,91453,54086,43072,10456,54618,169463,46325,88920,26447,165915,26064,119358,76658,11753,55625,9015,143112,11520,269278,65931,121236,179251,9829,96507,5826,140198,247937,48029,31061,53953,19018,38534,95073,117331,37745,21676,22041,2439,21017,109081,12120,58943,64119,43078,113509,30640,37723,34943,350151,79862,143849,25089,16375,77573,16298,6131,168435,40662,50028,28766,133195,55258,45544,23665,5135,54199,18072,5477,69501,106176,37245,10255,33562,9039,7013,16695,29965,30540,106269,67,100273,20386,1936,45778,12653,4617,22300,42443,22525,113152,24837,42770,66959,15725,52734,29534,17022,9388,334890,23733,206600,71568,50746,100513,18013,100834,84319,62617,6595,63101,185162,42630,76641,44106,8165,48746,35407,72152,6974,14191,19580,30414,39009,43753,63797,66647,169610,50295,55790,16670,533,26007,9475,35597,110160,8792,8536,3652,9896,57243,120506,37648,15821,43119,131495,35035,35955,54725,31031,169396,210089,164253,337858,11412,77625,58250,28866,7134,37720,112304,27676,81211,65246,131796,9378,94506,130705,25165,11403,69938,129091,4651,244698,53305,17335,3188,92793,26039,26725,24831,59363,5282,15758,47748,53877,45181,5916,3705,107447,7016,107200,19540,12998,120359,9387,13211,7466,190758,9392,102095,49540,128418,188973,5593,50901,14566,196318,18699,54825,76278,15395,23666,36e3,88985,17589,32005,23087,139968,578970,117571,145460,7486,3620,33541,117754,26398,27210,60584,18889,20981,1633,74573,38616,14563,6638,86311,86421,25557,42564,99443,36130,97953,1966,25172,83868,86024,136991,27222,67124,48935,48573,168938,36866,83414,114109,7143,95340,16828,116402,11853,106392,138070,12698,53560,1736,35550,51146,18834,22574,37375,59652,19960,32431,133520,38384,86522,43137,73914,52482,28217,63002,68351,25347,53266,74606,37238,64254,117700,2458,69113,78847,72989,4146,51993,68944,34323,36106,26991,208463,18721,68637,46037,28177,66450,253789,306984,98512,34346,8717,62376,80238,74056,18246,43446,108106,47217,76264,2682,95684,202002,20293,22279,7215,46269,5998,50165,12049,9429,33348,73125,27380,68582,110884,139796,3350,75458,44810,10607,55791,37823,11401,91589,124148,82843,54499,20716,21192,96652,231365,33208,41522,32549,31981,17453,40828,145144,39135,25049,9457,27958,103347,32810,43385,19820,53369,126180,23951,158086,100187,144947,109980,31955,45450,139714,69089,201406,73593,53985,61675,135379,20004,20095,20957,31207,58416,82105,5163,192545,15375,4004,14708,12950,3007,33958,201104,51704,2284,38239,215421,9094,170678,68181,18112,248263,264771,5839,65767,76147,15661,13266,123439,64028,57174,54342,51589,110009,117919,35421,20125,79407,23467,26562,86760,89345,56253,2635,17366,99284,45433,65377,5392,223492,45675,94215,41399,47966,42373,88171,10577,26848,109297,198937,27318,15359,54014,189688,14526,201137,11181,412,4944,2861,25417,41460,9506,110507,60409,42693,128247,71231,35793,106673,70206,72297,6817,45319,20585,31851,34828,8363,13868,118777,52262,102674,38674,71039,6463,77753,62309,151051,2673,41364,138637,240855,165918,128697,37821,16333,64502,32568,39824,50766,20504,14159,65654,14727,29996,6383,42332,7939,14308,8137,87581,4149,88311,165279,7060,80908,49103,28053,140076,418780,65632,172843,34187,88378,29997,545,51172,59276,68688,2146,123301,1327,93829,16449,152910,7284,87749,23351,3595,38576,26223,23401,96146,79814,32323,172636,114120,65820,86539,208708,76711,42199,188268,14011,15148,84860,5832,11441,25143,49574,6953,65399,115759,62596,134341,14187,18034,12396,16855,108734,25950,70598,14918,2364,136070,40117,153617,71320,115693,8648,35391,90995,4541,7994,124212,8041,66856,16836,11191,127474,68712,7630,145631,110314,22066,14047,1763,167187,174630,359699,151667,4177,41323,106878,1793,50733,69877,525,43923,4828,82891,29037,171929,324595,65899,28064,91271,65021,37989,13380,31251,2943,407325,11675,18588,38513,8392,50669,90077,18495,9450,74216,88387,45547,81293,103539,10795,31036,15610,180314,21332,14365,65897,27449,55756,149067,98485,56299,40269,32366,5250,172344,23410,92231,18561,19274,44347,122063,8423,7301,50878,28326,38202,246099,51058,26017,51056,32043,22795,132375,6943,19422,300889,9098,15040,36506,86225,57465,49440,129317,12410,39803,48164,6806,32451,82234,132656,30140,15444,60069,3760,4614,25897,159,28083,46639,99936,101909,30904,66926,173983,34220,17421,932,21450,21043,113018,86600,42052,132088,128256,6322,29,124274,99295,27847,33188,30130,20462,233103,11629,82802,23282,10541,47224,44501,68401,39025,9673,4555,49397,34887,30110,111225,33589,3517,74773,153162,143852,12972,3530,24385,31076,26220,32573,109457,43144,2031,300519,129953,9238,66561,196911,99752,28368,115015,174339,10996,8970,48658,26284,10285,694,47596,445399,13275,71937,12714,3528,3654,55811,33845,269037,118340,11397,3893,231593,42203,2159,16165,12556,48781,72601,35237,68887,18601,17941,89983,98696,97413,15006,14769,128317,13607,7426,11962,244737,72660,28493,147224,62322,6982,534,47018,29199,6388,175620,29977,6018,54235,144119,27979,74453,23072,144966,5552,22680,20439,8839,82338,13010,108618,484,86023,58829,612076,306318,131368,51558,106387,22146,1218,11904,270917,87286,24853,275508,76852,5463,237840,82183,83602,44537,132193,104954,15511,29147,15455,20088,13624,153696,40873,90309,158996,18756,3668,32089,12462,41486,65351,2207,126590,223126,53388,4077,30070,25994,15229,66181,63714,79318,59889,160619,15153,12456,272245,42542,24758,47453,47934,65558,28145,13413,11858,21191,27021,92095,34347,32570,60556,197324,18038,189522,6812,28247,90853,8634,180039,7329,86981,148519,9289,4888,300602,74523,9708,49271,19343,63426,74637,174896,114181,28008,26788,8747,29362,99695,52578,19976,84921,101587,24035,38033,6095,92547,36135,72547,106059,4207,181943,47905,79472,24101,58847,20037,38015,46536,22348,109208,1206,45622,37915,26165,48741,7232,1005,4065,6208,18528,151721,62784,8e4,18897,5854,32564,21916,4912,34596,201975,17423,134488,54506,154143,6002,72868,7520,36987,108083,112937,75656,32044,24479,15432,40091,58495,34931,9602,16762,2442,56661,153348,22812,98811,9511,56184,1409,9718,26995,197,49218,167694,100694,44775,53809,6725,163853,45609,73,98613,35997,111306,20357,36132,81254,14735,26511,23223,58321,51715,70878,210120,18919,64042,68936,3280,171890,120028,29382,125765,86877,48327,105142,9969,91341,1198,32748,184452,74503,188311,34295,291694,70477,184873,41972,33654,53412,208288,120160,47130,7027,83694,30556,99012,59281,43841,119720,74947,39892,41874,34808,25853,131302,33590,193671,96415,5864,20797,100412,35136,15947,13143,28210,28717,61301,5772,22132,12722,67466,83494,128102,176810,162369,37658,11958,19685,47956,184482,37093,126586,27874,17054,70824,29354,35624,31284,22117,80846,282324,89289,5812,73290,21270,10973,15681,37548,111847,5570,82,33861,102548,16344,48551,72401,41482,3442,126293,65750,30955,205735,76092,105960,116737,54740,25948,8274,28264,111716,110866,252362,8592,112975,10016,89336,55458,589,60295,9209,22301,101479,32825,64171,75090,106896,21619,26306,29821,30637,132744,10929,30697,32956,20307,87608,51709,317395,23678,60949,3041,29345,83581,57276,19208,37802,184528,147377,8038,29282,6679,77158,24634,288107,38217,32048,30467,20308,11907,18988,87509,32192,89058,11561,126428,56272,20368,65338,19389,104074,29008,8049,18814,30607,339,30562,152686,25435,16446,78067,20701,122568,3475,39655,83474,29081,12004,116638,45832,69977,107214,46129,80891,11087,68939,167121,105808,42070,117480,33702,11378,25602,124846,110381,153223,6672,47709,80371,120770,144580,11225,22744,98186,104427,63765,10261,150633,71276,51714,50281,49838,190522,8987,235791,9141,340331,86198,17567,12755,210134,6552,101752,30962,11267,2982,8706,5260,70113,110165,127201,74490,93235,145772,35288,21256,25014,2694,10842,31678,81199,6436,125138,65062,15308,22318,40788,33326,9604,145295,6946,289838,90308,57283,326774,187831,2998,288064,53373,20595,188251,90664,58927,89768,31693,379534,13903,2805,2413,50298,47087,58535,56981,59799,135588,10844,74455,88188,208971,70085,92510,18541,33920,12090,24555,11134,23200,2451,6275,135010,5521,138068,6562,161302,44283,98544,214408,65576,50058,24461,33687,92862,93762,4511,119896,3685,41519,6754,9529,39394,26959,41684,51727,24271,311732,28203,45748,149989,111355,3383,25313,20209,43668,65355,32723,38554,67434,82833,42676,66416,25724,30161,223,65165,45436,83924,12283,5232,29830,234361,377903,56,40022,128424,12472,60521,234629,28921,22232,168965,36999,222594,73040,24600,9682,33975,51080,29219,59847,125491,30202,38650,136512,34069,20533,23257,105963,11508,99917,34237,4124,67464,43359,26791,158522,144226,38792,18892,13958,41850,71554,19647,61226,98703,124759,9034,30539,34371,467683,65227,93480,7901,29703,82581,17619,21254,2734,102235,57361,38398,17196,96566,364971,65651,28491,137653,151200,23549,142281,78664,84647,53883,34900,46611,40124,213340,36091,30841,52023,123269,197827,78380,73808,12028,41191,45370,7903,71764,90561,215513,34771,177701,60585,32517,25415,28758,92364,41752,82386,2623,76984,37173,50064,68395,4403,43681,98106,11549,37791,53245,104084,15232,60303,28511,10160,68603,161243,108330,25902,9660,75510,24031,320844,63116,2614,187946,158900,36079,32819,38425,121867,57093,51652,80423,5684,31198,161752,36511,146667,20475,4507,19201,30548,48467,78275,5077,22549,89984,50714,17018,66706,35619,3531,25020,48835,186847,9463,64248,111387,107469,188636,105137,8703,31389,34009,25409,14207,43631,12180,14360,89167,73867,33692,74998,119507,41949,87046,115959,6770,68841,6405,81460,142743,114250,5132,148038,8544,1605,15540,177509,152453,30564,1453,29815,32099,63403,6534,252,11418,17588,16946,116226,138792,27680,101291,14339,60744,99533,194699,39891,16377,12641,146345,141037,140957,70325,42826,21176,19061,50428,51375,12005,144174,73426,76160,46461,129205,78379,40145,25474,133179,11855,127230,80781,27661,91651,396,88286,34420,72081,94521,46013,15403,91720,88126,549,79964,60198,187793,125452,14392,15743,83700,1715,206475,12065,22805,39201,63593,83398,13801,99478,25699,140046,83985,258911,49800,6761,9435,74133,1389,46598,11934,27897,5386,45900,50232,260248,96335,5068,33530,49692,65315,886,4019,40151,91916,62448,10628,13597,141884,148968,14083,261394,163080,37347,1276,8705,22521,19405,57813,55957,200637,9680,15938,42198,23570,15819,166772,12555,37690,43496,26735,63396,52654,63370,37031,83006,34067,75667,18077,2332,127143,163700,1741,5704,42945,37639,34898,146321,65846,3633,51526,134217,9232,22774,1772,66282,48233,34341,21424,13242,67351,183131,97579,28584,80530,134335,38834,239665,40278,37200,32081,53185,40538,23915,99449,228969,44407,7054,17139,112714,101287,14194,810,50801,33269,12970,136397,73876,55691,26438,37462,53441,99617,13350,42910,71168,42168,285521,78217,93695,78702,25594,30022,14876,15315,8219,34298,97268,51265,104410,54835,26232,30943,91039,14205,64948,29544,168804,48486,75782,69559,138480,99517,39422,37873,149734,38422,8276,41956,15907,166205,43978,154555,33818,28840,72911,38423,61132,39592,4460,37088,60082,68918,21965,92108,4622,33094,35917,111849,110187,72295,8713,89755,56736,89742,45364,6790,13551,41957,48065,8188,73571,62739,53050,144415,3945,24426,98109,2450,73463,37147,78116,9166,65498,53281,120479,179965,17758,17052,32430,155198,263266,84633,148996,48061,17593,38254,12219,51478,2710,95095,20869,29664,27585,13750,47237,181,54469,7569,60566,139036,38200,24063,28235,13774,45367,230307,83783,80750,63754,95816,43190,122385,28881,144847,15520,94088,3473,3890,113331,76118,12791,80924,118713,104097,98287,136037,67781,10689,31895,90630,43079,93377,65787,61758,1438,103534,4463,1696,4512,120430,94536,3019,34145,75690,24951,53596,58640,11685,36332,6632,11422,26659,59901,43634,130651,33557,28803,3908,133680,9899,52130,43287,6912,145132,86403,177137,54381,65649,7668,54154,97545,91326,181822,89508,11188,2346,74831,83183,79610,47140,18977,54325,82292,130974,9850,25539,71074,133045,177206,71768,81956,28358,145485,83131,29163,37533,109798,18435,75184,52995,7292,6596,2251,2040,31421,19770,177982,2607,26280,108782,69065,324604,77211,91802,37849,30896,58511,49307,70,135829,12507,6486,51031,9444,127004,180981,46202,95370,11113,65980,7248,1864,147,52898,183217,22572,8729,6517,4166,36847,56208,124700,29553,6200,43066,1797,193216,150871,79926,125256,38154,42479,129937,102831,33444,18931,31345,35792,147516,19534,83947,136739,76241,217709,39915,177,29612,176661,46146,21703,66186,15852,98763,32284,15029,20993,42566,64132,96065,164496,1337,178401,214897,22155,13192,119711,143143,16098,18323,17920,25851,94549,105163,90198,141550,124816,80570,619,144085,9847,117753,16770,4661,55732,16555,15568,31762,116903,72883,28446,93397,75397,11077,69803,1471,136227,159438,102246,162403,73442,40764,27766,18455,53335,70933,12129,19140,50321,83329,51649,28681,50106,26066,38874,69436,77741,12276,9285,17504,16474,72059,83880,8401,45101,21655,38252,34797,40053,173836,50540,136368,21585,126713,108126,142751,130247,69454,55138,130179,11656,153482,162984,158538,204679,91585,26846,8149,101037,70644,67384,153679,898,102558,18887,79015,11681,110483,73677,144865,17407,6764,28552,369746,32468,127864,203511,3905,45256,190133,1948,85436,54536,3961,2931,39613,52497,101798,205435,63769,13356,20945,11390,155312,107698,71138,12797,29367,1300,82402,758,56650,14527,90884,61424,194495,23078,69669,175831,14654,112729,44753,232898,27621,99382,923,15115,22648,45524,16939,11503,36250,76362,59700,80609,92077,81783,164258,147964,93190,7889,25969,56255,28476,115588,27082,3104,94697,68454,31399,203455,22046,2756,43846,6544,135118,128148,6306,148500,12599,221886,246093,1024,14109,13441,51342,119104,168855,81131,6153,19221,79225,10911,151581,83444,1795,32090,202801,86292,19784,98045,182731,14239,27382,126354,56475,255797,116118,46059,162188,48612,34197,23712,89426,12944,100256,15683,141356,108578,128764,17528,14355,271397,13200,5464,121815,164025,19217,145007,27536,7271,11898,27670,28023,2020,34004,98721,65257,221829,10108,127625,77523,58581,6914,16301,106668,18199,38690,49947,127314,61987,99158,82020,24947,156159,44297,40008,12790,191552,58504,13996,38796,49380,31168,78568,169698,51893,110268,42109,23555,66459,81335,350079,10725,11018,5903,58576,44573,24333,7047,15096,183083,25940,30092,21527,42088,116405,102404,91943,62716,83434,46226,148493,43265,16668,120110,99611,105958,52689,135626,19929,32050,1904,97814,125365,44067,3747,104,129365,50118,22240,81479,147860,1668,21592,58604,65314,3874,8813,70784,17613,6243,68475,42985,56814,318411,38092,62855,5047,16599,38145,13374,7748,1691,63047,41837,61793,94999,40014,231631,149314,52378,17178,17229,20594,28671,298969,135669,3725,216728,259469,33874,54293,123258,45594,132414,22290,2059,129670,52137,8994,34969,83516,130408,123610,69225,72380,90635,47420,5913,73509,87799,48451,136280,23988,84653,34987,171443,34172,131573,84347,141515,41151,84753,26644,91662,53005,30287,228834,22175,85089,5937,239357,135282,3173,18644,35622,80020,157977,39079,53223,92270,5878,10450,49133,1663,158962,37020,13802,4808,5512,34099,49182,4482,39140,15951,157071,3495,132172,122206,61350,34691,43353,72769,74295,5226,24234,167378,239776,109830,5797,48280,64587,108512,25762,31651,55137,17342,87230,251069,6824,107488,60185,7752,14553,11606,10402,78777,6829,123190,43191,33662,9649,100247,18941,76354,27419,29666,53504,129460,19206,146527,208486,41206,37237,113014,30191,57416,5183,15794,3541,57420,56560,30894,159900,136009,282298,13224,83119,1406,240017,39585,278159,141007,6722,243192,21680,25193,108277,22351,16677,47180,52089,9903,7391,70117,38331,7836,20514,176863,391251,47699,49431,142718,40783,11078,28591,32120,38193,25468,458592,10098,64745,122291,62128,93822,46652,48821,13662,8766,17814,26780,22468,135823,124150,122679,129978,11360,113819,75521,58918,556,93437,81450,77e3,1965,3492,630,26563,1323,193118,4895,24288,80421,444827,92900,45787,6232,74549,55074,50259,138542,21220,74293,14177,86741,20845,17441,108129,27172,542,3563,94640,76494,41896,111657,28829,50902,406663,103102,28983,10586,120692,51613,18805,55476,84562,12318,65439,2351,47041,52370,9553,44550,41604,36191,65155,67526,37264,68245,92017,11541,5842,34269,49599,26889,59557,40445,96850,1906,135711,41354,29246,70287,106660,122901,45259,163034,61670,168604,10682,20890,849,182500,7459,14076,9824,62012,17393,43,55379,42557,140724,7749,356813,11259,106585,56522,117254,24428,38947,52871,9300,115113,20086,55518,10927,86345,43851,62143,258476,12362,54324,10491,40991,3909,2374,125973,57172,78430,341578,168875,62670,86852,965,24965,107818,134602,52017,33775,46473,20459,104509,19147,87014,47853,11886,132839,96809,93879,110609,2365,42726,22577,113945,93171,450,7659,3573,145278,14002,3688,110115,18705,53062,38555,47342,56746,32670,13349,82125,43630,40651,17381,125502,22739,15199,56715,30071,11269,266060,91639,147670,110730,156150,12493,33798,89625,209004,10895,25311,4017,18602,92438,67412,21469,72030,3142,102900,25974,86939,37057,197485,58360,6360,28928,67451,1402,28843,2004,88633,12339,31963,36427,70216,321089,288373,32268,39008,31413,4740,34222,25661,12279,159470,209974,23583,8221,132962,10432,69680,62983,6760,67436,1150,66541,28543,41989,120559,51407,30922,173518,85466,111050,56221,107930,37565,20849,48181,27079,107182,10708,12667,62729,131120,15921,10076,30908,157502,94904,63675,55558,6617,226273,5180,5828,56366,13233,61985,45031,2485,22785,51794,14902,861,156114,2399,53546,23616,69393,128641,8204,20069,47928,35756,144263,9724,28168,77879,60255,33275,30360,2287,14520,139561,6919,38561,88212,24401,123947,83850,86582,113753,3963,10915,109589,75957,42047,64212,69356,27884,27654,1658,8064,25531,26396,43262,47449,97110,27015,18044,8505,10820,6910,15078,66558,7192,123575,29932,16886,91286,41104,63367,4844,40914,6359,2845,52817,88113,9448,105511,111260,18932,4691,644,215129,199771,74460,6293,12941,6495,60621,58746,91118,57660,16174,48568,650,73549,62408,27497,20770,36570,9691,125291,6273,101510,524873,63355,73089,27873,22599,43928,40618,143174,44188,54641,62790,6716,38742,153007,2873,81054,70058,28685,35002,11708,63922,161592,14023,143955,9908,36977,97208,20840,37740,37328,19386,541613,59406,52601,102646,24863,90336,108723,36993,19256,90283,156507,143736,226099,22792,168470,135457,88686,29520,41685,35385,2247,53884,7914,113601,25634,168024,22823,17893,52964,50078,12971,32627,62833,89378,69345,84439,2950,9888,39211,100619,12559,4264,76283,56016,57173,88905,18361,6581,257,15516,18690,57264,152842,167732,100142,172160,177909,114841,98812,45452,152952,146652,57421,111710,33059,83570,109892,203627,18224,13991,11405,70131,54654,97200,72333,24100,8565,145467,50366,322787,161041,7765,55869,1996,48165,55619,16231,35665,59444,21986,40608,70078,91914,2452,11983,22358,46435,113727,327395,90922,54176,3637,61910,83658,16892,19473,12132,4097,10440,32159,34709,63200,53820,279,973,58499,93368,5855,59071,14542,256523,219447,28720,99153,71396,152707,32750,52159,60623,48369,4454,6615,260119,265523,24086,12414,92637,2799,18610,63415,61306,58297,80979,31986,68389,34835,18261,16823,2311,3203,19828,1579,46046,15243,2581,65405,113461,50646,108814,137809,9153,82289,158349,8841,506,90330,157611,16898,11327,131769,58320,48082,107069,6787,166721,259,104429,47373,3486,33014,21454,101722,52682,42375,100879,112359,120319,12260,113213,38656,173961,179850,20340,86e3,5336,73667,112248,73424,114676,91389,8255,33598,167952,98882,313221,141752,163735,29532,164918,42180,9328,17311,38319,9180,42386,326251,90818,26426,1863,41092,62380,5374,95142,5928,29861,105695,62497,20742,89078,12203,22276,44964,36172,50837,165289,48019,238111,16046,2104,43505,99836,25312,70749,9317,81582,61952,108704,49265,17815,1489,44835,6643,115249,21605,88265,192712,163219,138454,48414,48424,56847,23238,77168,163487,20527,64335,82158,19861,31349,187836,102708,20113,52444,125598,1727,70848,111298,11424,155809,31928,96999,24225,14471,105333,16160,91323,49302,23685,29832,218861,101530,78563,93096,11349,110852,14638,43607,123209,91558,54755,35628,107357,380618,7158,28912,18284,4868,24142,51577,38642,239650,44018,991,26090,1960,20774,158291,81907,50593,125255,6485,72743,2966,20331,214561,56587,142157,24280,12387,150,57700,10163,773,45875,97502,1285,41252,206433,50923,2336,113158,120454,130298,39851,20223,103681,48431,4299,190321,123059,33343,117269,71169,26222,33921,46714,32383,97444,133272,63816,37830,49882,50473,87779,17666,112641,59034,159624,26706,33574,47126,11731,63641,16669,933,9971,20216,30684,99703,990,23911,20195,121307,137317,47148,41928,10318,108831,355535,49454,32292,50994,8122,16384,59812,74554,32150,56591,174312,162680,190228,9598,173148,23640,61991,45718,79874,131597,38994,5964,48294,146962,7849,20626,126616,170620,27716,30327,39879,34829,15772,147440,111326,91205,762,39309,61975,21184,41411,43771,23877,1913,5640,44358,29145,63616,7290,39142,49951,18427,231174,53813,32775,93136,7356,69502,40528,156592,58725,18403,57219,17519,27403,39497,64617,67565,18802,347190,3273,115882,171128,6465,87835,138220,37443,12843,45934,78622,101762,40426,16768,88535,152513,46216,13386,18115,79078,49051,26866,2711,79682,103900,31529,33554,8114,97575,47612,109492,22435,45316,90147,54298,70069,6113,94219,971,203886,171510,54098,24914,22343,6068,91601,25863,143464,64459,38876,36363,74653,13924,17888,45715,21595,79494,40396,27099,48946,229942,68108,194995,38040,6364,105256,14299,43792,53868,72865,178181,10801,106043,59704,111488,12611,11620,1615,72395,35357,68088,375,322385,97707,2721,26698,157719,129043,96424,15347,130787,1519,70008,98397,11897,5720,336769,151561,81843,3436,2996,78953,83999,15800,40841,8897,11369,50915,1888,69080,49280,45808,1062,11670,118604,172349,10206,107337,40922,127584,10458,54750,61332,36780,6193,84096,110343,6105,74775,66665,53407,65182,51401,281520,75639,25185,147990,19365,40582,32622,61482,106248,300440,3435,158683,10556,54722,4592,47332,14499,25637,77065,19723,29586,13694,66649,26726,58610,48248,133393,123123,232634,48278,828,68414,56873,194521,5023,64229,14306,56203,86618,265580,48023,52779,84656,3432,27698,48783,165900,55898,24382,72627,95034,100547,13185,10953,158080,190907,81943,376,38482,157736,4714,16733,10368,160286,14619,280238,20156,17445,38808,26351,35060,125894,64807,230789,9972,49181,669,15132,16923,2631,4706,25168,70685,110447,122549,137270,146057,155535,21929,3588,7274,38517,20678,63704,12863,1324,50985,73376,43993,200585,60934,94031,33647,19008,24301,74284,50725,56271,104028,19443,69093,1021,4350,159557,108365,31846,2318,9697,23630,70960,33088,39901,32656,33002,83862,13351,27646,142809,48055,119050,37694,118047,85271,15406,13547,124197,30179,146455,65071,112066,5002,3460,7809,11639,39385,29556,54914,121220,5596,75195,25679,106873,33104,37673,7246,204139,29952,102524,115109,36038,5460,92329,49344,25242,34014,47289,113697,6996,24397,98413,185550,45812,60522,15311,46467,213965,11122,100684,7259,17039,6550,56345,167013,404753,307,7116,56462,5417,73857,95480,78473,10133,19036,11590,36107,100941,53208,7200,60420,95105,119370,167,15524,6653,43384,23610,46388,13093,145345,58426,55680,305451,86847,17730,58567,178140,38965,136656,5628,88811,17675,27944,83441,51603,10939,53151,35212,27904,53967,2701,23131,24488,104154,8824,55304,27690,42802,103124,98578,280054,5662,3017,22793,12906,31495,90744,23983,3464,134399,113588,22474,69068,5099,53216,109191,117048,132077,79736,676,7774,71253,65940,32772,116614,53644,26931,7596,62478,12003,498,19827,108263,47076,29568,168754,31319,6482,80540,13955,111749,21181,143543,7033,26026,51353,21292,85463,42779,24887,1740,14404,130369,63220,59268,97587,33374,6212,16561,43680,36822,42418,180816,18436,9579,74123,42323,147608,27260,24977,50174,61507,10681,205404,40890,85856,53671,11516,52866,109367,117903,74687,10703,42095,18194,187166,57169,32725,8992,137746,4700,203872,80833,23954,17191,61462,362182,13934,4424,17464,76670,12727,93511,23063,65868,71113,49698,1101,33252,57054,166650,125436,48999,126818,26972,5103,5669,11598,48631,1882,120131,84296,165169,35330,3827,13014,82879,103279,159135,24477,69326,96729,88413,114734,202970,9725,43640,83623,4007,109,63529,18092,2376,47112,60271,36164,231325,18597,8868,14797,139592,33580,9437,22241,22119,132398,126879,35116,62851,44339,72086,46648,37504,19320,81584,48809,68816,14329,24943,2579,58345,39374,43873,7046,67398,497785,28225,24722,186643,41257,163961,110230,43331,10072,100738,91543,277416,48225,37125,93902,53749,3511,89864,7794,15746,112345,53732,9563,23102,195132,38187,21737,17432,246976,175275,118156,4793,40293,65384,52281,151138,59278,5431,12606,48822,47893,70528,6708,54265,9483,244562,3448,48203,48689,76888,27624,198688,30465,4820,115925,14305,15512,85317,22487,54287,116889,25533,69671,2291,33041,27717,4838,18018,20643,214146,60357,113378,9119,25030,79694,123260,45067,41450,70902,7180,58600,349673,18393,97549,78338,21978,83130,87027,776,46804,136813,120085,10785,36277,36292,2920,3810,8562,21587,76080,26439,44502,4907,8190,14533,46271,56528,102005,40453,71405,78573,5641,71512,18178,33524,64580,92871,1535,33803,14955,66991,45301,14937,59802,4319,76815,79999,54028,152893,140972,94339,58884,25420,33237,94907,19367,63221,14998,39549,81779,200006,11084,130155,412567,22144,57584,48001,85957,43644,62293,11070,97053,131816,56871,43893,103637,49559,149443,265832,78871,127928,16848,80586,29364,10123,96121,61469,27637,122786,76840,137205,141728,152810,275825,164900,4767,48483,59279,45329,30686,30546,26125,67059,112738,1079,36371,14899,130146,140588,27019,105371,42745,50423,37529,61488,12730,34379,84661,32169,105040,91899,1842,106489,14844,44986,133939,80141,232,29291,19684,156429,210944,61928,43419,24020,36581,39425,29731,17427,152317,27381,12301,14375,135543,5697,113605,107512,29744,107850,5566,76470,3129,115721,13033,87708,55647,1993,5259,8785,58149,147004,120371,11205,46319,4743,14434,21697,27265,15562,219250,35228,17499,95327,51051,18310,28005,166872,77694,6553,59948,33504,13613,41235,7170,2462,19927,201918,34138,6665,48780,7020,5702,48429,19212,60564,293047,10831,70945,188451,110892,514,102527,8278,408,60992,54201,111510,91760,50530,1350,10771,218674,53990,187697,687,18469,10560,105023,46885,46095,53517,5808,50818,81403,2170,22662,47127,14389,748,107058,67959,4610,94719,30947,36510,35672,12468,50291,29921,73060,20353,3271,51468,11006,18654,11663,76382,74848,7193,20342,16187,104820,128163,34980,13510,118143,40642,131,15981,190357,1266,49918,3612,20043,144329,29109,51118,105358,3728,9721,32144,141735,43619,23028,307278,5115,112747,69300,39045,27093,43684,177727,78108,45924,88098,14492,21583,123073,18169,28525,17923,52599,21514,7009,272,29433,16693,69214,94247,9616,71738,25205,9774,238350,23631,52998,161274,78610,112631,168968,6162,24851,53162,47254,154989,58858,17143,112681,166473,26769,71077,10680,22270,31969,225745,12087,104993,24613,70335,68735,124630,18294,157460,57255,111655,4982,2471,133743,52649,32735,12031,93961,124470,39639,39402,65329,63203,143563,23805,22268,105529,112073,16680,215716,21519,202205,53228,247084,41944,12567,2653,65493,34693,4873,34636,23926,71532,88601,71037,5571,115122,44897,69538,89072,43808,81503,36583,28920,133940,101648,191184,4910,9942,81362,14489,27729,4960,34662,1289,52544,14776,85277,65813,125227,8902,17574,23259,36661,1163,48173,42427,11467,98879,21435,10466,35373,39046,221188,185252,93230,99061,40215,21457,5235,36240,39576,128066,115e3,60589,80786,34006,111892,51482,26544,10656,50198,141955,64668,129479,51135,64929,81841,27845,7128,18886,10731,11965,52276,82304,37733,19729,35028,59846,247986,66135,53707,299634,149188,117025,39304,27726,127703,9496,71006,9486,495,94820,47250,266544,18382,101150,6281,60703,54388,207915,132866,58949,72446,26212,10542,172127,43071,62490,4376,56788,30974,24968,91443,11619,198723,24001,15121,136267,89608,160663,33578,82492,41360,46571,2169,9481,190,29283,38373,141023,33045,7619,29792,83332,8386,98498,39183,39255,31658,129170,27144,67660,19992,114184,53128,24534,237838,8463,70363,22205,119015,18826,68254,121728,137622,10868,292971,14603,50890,34277,24430,65197,100913,109419,40103,47081,6460,25365,62207,31961,116233,10816,65775,61031,267230,19629,72115,104486,26621,27002,49635,13334,104129,8378,107732,16558,65114,17477,179978,4220,14190,224493,16453,41872,41542,19134,32179,25813,14888,130609,58701,15362,85962,12751,55045,6635,23342,28105,4224,127171,23041,34303,59129,73656,26453,19410,24291,79837,43725,157265,16625,34377,71809,89485,82437,24305,45186,20785,34798,76873,4770,3923,44346,9874,46452,55654,54665,4785,53894,5025,60017,171215,56616,15749,17762,16761,221286,105132,20523,56343,18973,1037,602,323886,9038,95606,38396,120502,109299,77097,79367,136893,55365,8323,10041,75592,19366,65814,15614,83469,26863,51521,18119,15623,18808,146873,172424,11543,60909,19528,22504,437698,69353,57600,115924,4644,41738,42360,79256,27642,83463,162712,19094,2916,12100,118144,293484,54555,68561,61908,73882,178688,72860,49139,70532,39905,3980,13190,59763,20658,13796,126559,22696,105248,49340,64706,49195,81589,12332,67817,7722,132448,31311,20180,151712,35160,27418,221689,96589,5129,4255,9628,16047,98064,53430,33666,22032,208500,18976,61564,112915,15902,45523,84205,34747,46386,510,76620,34577,24704,14224,18606,4384,109151,30477,37359,74952,30874,26581,19550,21657,13283,4530,93073,46376,122364,3651,181757,62601,2206,101663,118572,17855,52952,139840,62606,278021,77080,22709,7959,241332,42371,150861,39772,27577,14415,31996,13012,109120,42856,63923,41223,14878,182608,120623,29348,36991,15117,262522,7183,54934,3332,3076,65389,287192,49740,10528,35270,56818,22639,2929,61578,23280,30127,14672,3157,47696,21588,130238,62110,52327,56193,18087,130896,142685,109840,9816,18121,57992,97319,121894,80599,54501,27268,100308,81451,3014,47285,25085,7174,5312,74894,55111,160804,29625,46682,14565,172807,29181,36368,18952,75109,124625,24016,53293,186013,58761,87814,2042,89459,35087,63052,369988,86526,54374,118097,23674,2122,110119,15845,61789,10677,100968,183270,133529,81233,103267,198839,28783,73169,17965,361713,108293,136324,42487,26373,35477,218558,27158,71527,47119,331883,45160,78970,36448,156591,71832,96730,71049,146,111991,17781,40015,99088,5627,90890,33055,23338,4252,167723,78598,149826,35613,11228,198442,31532,169906,23323,1833,125495,8102,12897,159937,4522,13990,177607,40654,227310,20082,31598,77444,15467,109179,17723,189245,6218,103555,3422,113153,7920,38581,148584,8621,19962,49090,28195,18599,79279,133222,12709,38553,16730,103630,60913,35223,13228,67419,28730,166072,36003,6493,36652,2375,50657,9527,81998,11659,334160,15168,51380,21786,15122,59275,119745,89523,67219,2185,46735,6032,47447,137690,5166,12116,23018,5022,48313,63046,10829,83429,2746,159398,67335,98418,53999,18454,31569,37892,109132,3678,81620,104491,54681,32521,109973,42533,52504,47626,42504,36807,2633,11411,159915,60573,111310,103527,128644,103027,285252,38896,10950,44585,164005,42946,28131,45971,32359,15696,11312,106951,2917,26370,12048,16052,74680,10185,98893,89672,24790,8413,87026,851,4549,37080,174727,18289,200644,165583,57864,69857,29259,4331,19717,91462,13011,63555,21391,1990,44481,14907,7340,15774,49591,72220,3931,6418,53568,50056,9288,4106,48438,6623,5117,1012,41437,62236,84002,33918,65542,36565,92277,39629,127582,49783,44146,117628,5155,10049,42692,4608,187456,17503,74015,34318,12962,100581,33867,21832,157914,55951,106858,14475,188259,146244,57414,21163,26020,24724,5253,161736,121717,9626,38446,431177,1188,17969,46978,157547,62747,25524,30400,177415,12289,109300,175621,49009,166322,173965,132234,51768,26032,99994,15755,29800,72351,101056,240613,21289,15214,46459,46348,58410,30396,43647,89731,28915,142785,53737,14946,5545,24313,277968,72809,33232,8640,8347,16712,3946,25575,123521,39179,9991,145543,74858,137200,34491,8629,33829,23820,68921,35423,44762,49871,133748,46991,77574,166611,31020,11875,877,44133,33877,3257,81377,73657,30727,46882,222525,70076,137697,69291,123532,18001,25423,188796,30602,16643,53078,60931,43881,38283,3221,355554,53145,80702,59009,39689,2973,60883,77304,1117,16284,24073,22669,122990,81940,39844,12369,18781,61281,133978,1107,20779,127044,44416,157395,5868,63620,24846,35621,48921,9875,41926,56949,22208,14756,163188,3847,68103,114829,35532,76171,42852,19032,34658,126394,15837,9202,15195,40076,88927,52759,150700,23019,8077,119141,224558,88676,134306,23928,48525,115416,76405,120551,21229,51681,188804,19607,12750,33280,20117,3599,57084,87953,20205,33401,81760,13064,16835,76821,64466,84841,46288,73233,87118,9264,13911,117430,86790,13771,24443,39968,82124,15778,63864,36539,3066,24571,55240,7071,149040,28850,48106,5446,69537,2674,42691,121735,29802,93801,222967,194059,30066,53170,4677,15206,107943,39854,31639,45283,53779,59063,2348,6706,195398,48495,2005,15603,165902,265960,30910,65615,207693,136663,32249,1207,87403,19215,33091,165723,49438,43462,11067,92275,62699,44678,45289,34773,17412,48972,1858,104447,181545,1001,119266,8396,153464,132289,115529,32353,7992,172028,54069,205240,29592,91739,119994,164323,113460,108440,30929,13600,17141,120659,18146,60555,88204,146500,273964,79205,25175,90166,44725,25532,113251,4468,67884,22907,53542,14201,46217,33410,54978,26399,177809,57480,121936,45917,11309,107111,19480,6478,34292,69630,3736,25310,244475,32137,29438,9982,103486,47832,52490,37250,2562,70913,5179,136415,91803,33161,9255,18432,13038,20321,49485,6575,115334,2371,33789,7808,45775,117348,14605,42941,98279,10714,95052,76922,21407,86246,16306,223273,15316,1625,250738,2661,32095,11763,40925,49073,29377,17900,1538,17882,8,268,90833,50429,806,78457,6040,177458,105879,99175,24946,48684,55552,97940,1832,81954,48107,101092,1204,34337,93721,86660,78345,46377,86370,32221,80601,7480,46341,14041,65429,7269,59499,128504,5442,8744,14012,125080,161674,6784,14584,53744,130216,6841,122602,124263,31593,18807,113744,31017,885,20344,220948,13897,791,83914,15043,403,15272,20903,38772,31859,100639,117558,55130,21964,75452,165550,31144,5633,18734,4133,25708,111630,157700,635,222034,5547,90494,37283,12982,77329,31122,83775,43379,17961,19477,64730,37597,18241,81216,57923,24610,84995,11492,22811,22078,25984,270901,50439,91195,12983,70850,98931,154004,67491,66969,83799,168671,62168,141041,109484,189545,47262,124643,76032,11984,5241,73085,225,35278,297,65251,11750,150754,51191,49847,161229,99388,7351,7406,114189,8814,8967,13541,57080,44100,147212,116349,149864,40247,82060,41029,37322,87508,16821,59609,20679,68392,782,43253,332,39938,11033,23732,188925,38934,82431,93785,15532,191109,62957,63022,27531,12252,5026,3833,2431,21465,43459,25953,192718,3308,77963,89356,168314,168685,203477,49146,7655,23219,53528,24982,48685,54631,6247,793,74260,48185,191852,3095,172876,179270,87774,154528,7635,7686,74164,17007,112569,121364,215654,111268,13329,18967,13467,122533,140331,36832,1522,10077,18418,42747,219964,6033,9858,108306,28589,3913,123863,178765,244104,135651,14684,90,16242,77118,55574,8651,117821,131103,73529,284295,67725,19246,36974,62269,72570,115836,24484,7412,156792,33054,573360,105103,17186,54299,4686,38563,15979,5729,49563,346297,26990,61110,74313,185151,44128,30657,15134,17195,193014,25751,282233,137910,35276,2087,2963,41221,57125,17228,387574,26559,16212,16812,134202,221232,166451,26462,936,117519,68017,293962,22383,16552,6905,277202,9279,27507,77608,63540,29132,62909,16364,5654,9548,22674,53777,85931,21483,80245,75921,20622,81952,19224,76426,285538,17463,125910,37975,57734,50774,69447,26203,50278,2138,85944,269296,11227,222528,187351,64099,65932,14212,61685,84122,91003,37581,16099,12077,59461,40868,28123,38533,44075,2588,36016,830,15331,10265,75145,4407,11384,111778,70114,20139,984,26926,342,963,46653,91781,6704,43028,132517,82755,31140,38902,59578,21048,53790,42911,10083,25044,133733,37503,46985,29071,44261,83343,70437,43357,137819,85045,60306,103907,440,16979,162235,12666,4636,1165,37911,28310,153557,60835,38997,64064,5185,137387,32320,2362,99853,58380,69321,213523,50218,86990,100948,61020,50950,110066,13348,19342,25918,134540,64060,4579,40959,56331,1462,8265,82320,193845,39437,45216,6839,81238,14382,79046,111178,17922,29276,57365,149704,163093,60574,16827,8286,38744,18611,99128,34812,110641,21069,171408,84764,12502,14627,116407,2999,56404,1193,183004,176249,34862,85940,4493,112158,26865,58572,118875,48672,125964,15384,25939,117101,12965,233142,40136,48959,111648,66007,37557,264020,25547,33774,91392,32277,7771,19724,17197,71573,27196,92454,77107,15576,136980,15649,12242,7975,9555,9118,86424,147261,29551,122983,9583,13549,107158,97365,31540,14053,57885,2089,19688,78428,18831,57090,7772,6023,37705,42279,17489,45843,35505,9504,28240,38671,101742,14357,11556,49552,13970,125707,62503,78,102109,90600,803,39636,62548,22745,124819,19312,124657,21863,74065,15736,23328,7341,72910,29289,11124,153626,25328,14621,89592,68952,122844,51529,146376,37056,32205,119308,248050,105130,5385,9375,6241,68714,119962,30149,22033,32348,9826,10506,18337,1194,11043,20440,80685,7291,6655,39825,29898,34836,89830,2183,11908,77399,230,65020,216623,34971,221825,14543,67721,227257,14033,27652,106162,21776,20020,28180,146610,80549,55471,219506,21377,61817,7021,305922,15085,106336,54962,10257,91552,89739,15956,10310,42041,12349,21713,99929,62560,8880,23249,59633,122532,7065,9930,6740,125336,55124,109173,72328,102365,8889,8209,56963,121537,88838,40700,83507,142559,9284,11988,12130,29693,99684,1851,53782,223919,30273,31841,19809,11515,73342,35465,93163,110495,23975,49885,92376,18776,32648,125596,132210,22494,29891,297641,6024,5895,22238,100417,18472,185059,48669,125656,10048,103592,49510,59226,104204,229351,165617,46718,48516,51220,41125,102032,77586,100102,19702,25341,13898,37027,2385,82750,60716,257855,90865,4079,14003,29359,297913,47142,98916,54123,14508,12634,40487,36066,129289,2029,245241,106493,5810,109583,17298,12244,60441,17678,23488,79258,151032,54077,112594,32002,5397,25330,17562,432,34826,2236,30268,56205,22097,10644,6211,94836,184579,8566,12259,90182,61802,2022,29431,6726,4718,91806,456527,14762,39564,99255,8125,29391,128901,131938,180961,48938,149835,7017,26179,26864,38950,491,20535,38083,43407,78246,137337,60364,35466,21672,57096,3310,39531,1033,46613,60192,3069,21262,288395,14766,77635,29064,99405,205567,154227,179766,14046,57504,99249,29131,64556,110760,88476,228776,3720,22649,302613,85204,95561,24666,38247,51104,2156,46333,117076,191749,48805,21517,16529,57284,34877,3430,71129,30911,56215,13135,122327,141377,4502,28873,12208,183048,148459,27052,44260,166866,49683,158809,197069,27559,78004,11597,48052,1373,159150,20529,206142,12875,61289,6695,68881,22031,2730,23138,107005,59860,1509,22960,36899,42173,70639,37137,51908,72392,61903,45574,102776,400,53585,6545,7660,71705,48771,305877,115853,19814,37969,43423,3477,6989,9730,26153,133461,19482,123699,24769,73107,44361,86286,59844,213778,53573,18022,14501,100344,128105,108914,10430,136734,154864,41259,134352,60618,70173,3694,56169,29875,7038,16127,13213,3067,10956,12306,103432,86864,35882,158228,49523,48003,10223,41242,35181,11563,115948,71725,13435,59826,26330,104459,12408,31199,198177,173879,129475,28833,287276,88609,64620,90587,23797,20565,230854,40940,38005,64403,77390,30876,41640,111472,51990,21480,5502,71562,15653,50942,53320,213339,83248,57060,47482,99892,33466,94511,35134,39153,44571,79902,26028,77887,117828,65872,48866,22019,51481,20695,6816,15468,2187,56218,56453,72760,10559,23157,89968,337727,68019,20454,32792,91871,18021,19811,54181,19785,54895,74209,9868,171144,48247,7928,165277,1104,18354,39238,60324,127799,33737,46441,21125,16451,4554,138540,104181,92183,108595,35070,341328,119439,37288,53479,244682,62059,39767,90048,55516,10156,116707,177198,93755,76515,9175,160572,523,82789,3726,1887,5577,952,108877,14261,74693,168738,21616,69086,93069,2668,83684,168326,89980,40475,49862,993,36286,134733,1938,1799,17016,106908,8543,213196,68388,64036,276466,31847,29247,15775,20134,20323,38300,6990,108498,60387,10008,41213,48770,96703,53469,375632,102254,16286,56810,71072,31914,93491,252525,99457,131520,360748,153227,148240,185291,21359,5538,120533,100559,7782,22500,110558,51890,8141,109666,34083,209,2223,43177,12541,19526,38778,39701,58422,76471,57840,69298,168436,50544,120544,5588,4904,71814,6780,99075,11363,99351,96073,4464,71241,8172,116428,160177,72875,198526,85587,21266,28059,28816,58105,282844,53464,20419,81082,260276,6827,9109,38541,171515,229032,98389,150153,15498,10140,136777,110487,92940,42991,76479,19523,10372,21173,75596,28853,81504,63448,30635,135311,13245,254897,165417,61091,49656,45428,48216,44529,18414,915,120220,22939,12949,64687,25955,67099,25048,22602,211071,8500,87865,14625,39314,101395,81563,141087,24308,43453,50836,133590,32164,3576,59438,10284,2559,731,9526,222252,146280,87697,10901,52647,43403,137838,74591,33197,9233,63356,132528,799,17947,41186,9082,7417,90585,39849,50863,90290,1786,8152,144979,35008,86920,156078,59343,104076,125662,127008,111645,36851,2457,87365,8649,14841,64741,69960,475364,42995,32152,78057,117362,50703,32918,3669,219900,142020,122882,25093,37632,59532,78538,31923,14695,27152,44001,30500,34140,87080,31723,21082,71987,36698,56426,225949,5796,1809,23375,125781,9456,168878,103172,15329,86662,97895,88177,17270,67948,56739,145697,32730,25167,10080,52506,49488,112733,42661,49319,110135,27599,51073,68016,69079,90323,101226,31664,20967,163445,48192,41488,41500,17028,27408,18486,193593,92824,60145,110400,6284,10148,99305,7030,8019,15366,78496,28241,25688,95511,86416,986,31151,29745,215965,109199,10425,23864,62113,19900,54264,8171,31738,42147,21664,39774,126916,56864,9927,2688,85157,65287,33019,23537,6543,49183,29757,1968,29750,7858,70193,1211,62048,24e3,35355,53720,246,30453,1963,267877,27516,840,101181,36344,426,16673,136627,20509,19180,25907,70101,11239,56975,68916,9194,87686,38354,89927,16469,7125,48706,6309,37837,22274,71780,158335,39840,82643,75960,36407,49670,1989,14982,199737,14639,22843,120678,130464,46783,21419,13639,13137,127847,144799,159573,59603,17603,2824,59934,201778,13312,36351,4e4,195292,19891,2315,33443,21015,43785,3891,2636,42466,7039,20196,103143,179062,154987,42658,47584,172561,40055,48647,12739,89492,8870,14895,170930,11075,73935,31376,34999,180407,46254,20836,59075,31868,41037,39680,25099,72493,14732,26639,55562,20998,611,41758,4739,60217,85527,54988,99046,9865,99927,2352,15721,19530,86459,1125,66190,39274,9720,82870,3364,130266,15887,122881,84869,54539,14106,293942,63127,21623,10194,31975,38172,12535,149,62630,75752,13505,13805,8770,88088,40641,208378,14393,38913,73375,44350,32840,22198,4087,10333,34430,44812,85633,122365,38608,134765,2153,192171,2383,3536,3117,54286,96428,28420,70680,12317,147982,4363,55788,39340,6445,40899,92096,24356,221898,26647,47509,10792,131852,24256,98493,19086,25386,75057,37490,10028,45730,184141,271936,286712,1729,81050,151475,2718,8857,7068,3032,70545,10863,172184,16171,61405,54726,3906,96642,17628,2754,24338,34106,1369,8054,98154,78425,52080,132116,61228,125761,72327,27960,23032,19591,19659,80147,103860,3366,33018,35292,39070,19316,88042,12272,53033,54508,18901,21506,21455,24183,122461,20317,27159,50786,118677,19298,4344,194248,97414,153639,16051,91528,37589,38898,5339,33253,113074,39403,51508,34622,24505,11212,76907,108355,126229,77678,8205,41741,10599,69948,101917,705,49260,68715,39750,3814,111125,108544,115867,3883,144663,33293,7255,108929,13737,90748,14774,13203,10588,17244,84607,67831,29180,50860,106727,10142,30125,120708,58131,59754,66460,103711,43126,68208,9476,5110,156651,29128,145052,14949,151686,84820,79229,57233,1002,56880,47904,10010,11807,38794,32039,2140,3550,24972,116011,47660,76086,48571,130683,18131,4450,40821,39353,38655,33743,40476,135664,142086,29489,18137,67555,45205,115281,164254,261470,1105,128217,24064,28118,111832,44643,236309,17929,3024,138171,79181,14368,22266,37872,11282,10626,56113,43632,395,41031,1026,152342,39169,124364,66473,4684,2013,12270,120501,142296,51587,29013,3177,129452,28551,23498,8358,22595,9645,92008,40742,106126,701,194074,1806,54493,109513,2084,33125,5622,115899,14353,11e3,60472,113566,150803,15891,40791,12762,53130,36257,13420,62045,128143,272516,213527,58322,32400,115427,101476,103726,20176,21502,355183,41343,23892,15753,2312,40866,54294,101785,55146,244102,32705,27994,13284,143816,157993,81010,16933,2490,6072,23250,13602,70346,112144,297560,55477,40973,56881,19001,130715,52618,12974,11195,11003,15412,7646,11175,7316,30720,44809,123585,100767,104315,95294,104855,7533,38917,11608,3316,171486,42027,49423,58544,56254,93676,12514,18792,45592,17513,1245,48068,120907,107418,26207,55327,89145,20706,175898,72652,100555,123890,3322,87742,9460,13399,59577,26311,16724,97727,64005,14658,4457,24044,49860,32409,21567,87962,27289,14624,50763,65606,23475,207482,25541,44250,48058,12271,88998,98044,55548,2331,52575,65276,9350,77725,56779,74790,14114,85990,42433,101473,7844,52309,157284,19350,39922,12466,21036,91570,95031,74187,95245,1326,34475,71765,28558,87790,354,27116,254543,172042,18412,35291,39776,7577,28592,29654,42244,100813,7588,48319,48295,86896,40289,229422,2570,85891,10264,76701,52231,41512,127376,230534,93605,108130,23424,36739,233035,27794,95965,35884,151494,14875,843,49833,38010,71431,219272,82428,214192,12835,127240,14345,138207,156250,50941,99644,99417,58135,7353,39821,29812,3759,7415,14572,53830,22476,49857,78175,14915,42176,77853,6530,12126,115873,21641,122781,72383,34686,27915,136002,76130,56523,25687,6527,134727,73643,74722,67478,8251,108505,23843,145891,48731,51491,16182,53915,16603,20838,7395,115375,138355,12721,58670,15892,3735,32863,124677,12604,11997,45700,14999,258154,2720,29496,271082,85521,39973,13700,113046,44485,36482,34294,47751,134797,155904,55360,134690,21770,91135,29206,144711,48744,44674,155942,59875,17918,64497,123812,9144,234966,164534,7706,5270,25090,20339,163234,3097,133900,125161,203,10715,9667,87129,132720,92850,3501,14636,49358,17266,21111,30612,144431,122860,101497,17673,8130,11884,91167,88623,175788,32729,35605,166925,35818,36536,38809,2716,3270,93973,82603,23366,76832,61965,62245,13893,25710,144091,98814,44208,54095,236277,53367,34834,97274,2172,16858,49284,28779,113183,4643,106217,94621,164943,16845,19253,74396,22592,87503,34996,19092,146507,19116,134652,128242,22736,1007,132190,58067,27936,48566,40563,20885,33771,80664,989,14670,14315,21661,187703,93255,27617,245729,44376,15107,49824,93604,106721,63291,5606,153280,101864,23654,28688,6737,43584,126900,7137,67499,145087,129421,24707,105699,311580,59294,11582,211232,92185,262659,717,4752,31126,9798,18631,28374,3367,3251,154411,52363,51023,67344,70678,261560,78059,28600,18070,79850,53359,44629,30869,19073,64045,50672,63508,37203,78992,29072,93421,104033,26081,26999,121749,113974,301732,31526,3016,52083,135740,23183,10650,107815,49863,49175,1554,10166,34286,165843,102866,56807,29193,175455,36495,50639,18134,17282,14831,3286,19214,175411,85620,44203,2339,32022,31760,24711,84552,45989,38675,25767,121791,30298,7929,8128,324,90690,46242,120990,8574,78118,72361,11333,68279,83156,26766,288,27097,23749,6805,96767,122167,35636,198501,41641,29661,31317,217715,8631,12460,7069,78590,46516,87449,80381,45698,49298,44290,94561,24990,13323,11057,133756,4423,12607,21852,14960,88023,10455,58146,97404,38753,9405,216304,6138,24563,206624,146948,41065,115571,46443,96844,78041,42616,20236,11182,32843,47724,12361,122382,16601,14468,3252,1927,34123,58038,88840,63230,9559,119391,241176,12638,146529,181367,152506,46831,123377,113569,91896,1930,96395,154527,81091,102845,54441,92585,4800,95396,42012,27534,62635,8447,84257,129409,12110,25104,123541,51131,36346,44078,10745,2994,120391,4597,22139,55241,51317,125652,106459,267836,35138,15293,11720,7525,66335,62591,150883,14682,152240,38920,172651,34616,1931,48367,154996,53262,13826,3119,110538,5436,54461,84681,4728,16350,250445,69950,53447,94853,13819,81759,25704,73967,266094,36612,2009,10054,152119,181823,71152,47335,164288,150538,119354,57186,395013,2941,21166,126317,18555,208602,66604,161278,109157,190726,1429,126459,64236,8007,216162,49573,170973,56109,8637,53811,49583,16200,122250,46869,24350,5723,63520,11915,9305,41525,27180,215488,96890,13022,29172,40217,11913,5985,36124,147278,26010,452445,276428,85611,7347,12127,107787,9651,6341,2892,77184,25332,29107,20014,4680,81466,12892,58258,14952,10238,70027,35013,104903,128969,46523,15173,24418,103787,139284,30348,14793,9646,156700,29992,51561,15377,15544,84114,52931,20387,129004,6592,8371,57164,36658,17268,26342,292,19324,116062,48526,23357,38167,14524,7118,263554,155894,242917,92066,33509,27485,107820,67280,197352,32547,18520,40653,68664,90091,69796,8847,81434,4751,106853,34597,37923,18335,221713,105438,25972,14464,111785,14198,134281,5575,71227,50163,102398,17570,101686,61188,22480,52263,56951,146286,15008,39203,25408,50315,2155,73767,13685,41205,94069,6395,180692,170829,2835,2103,11342,161496,89214,6026,1302,585,38860,110361,40025,197359,39048,82914,220968,95056,26946,162638,65364,1687,34647,33433,75300,365794,57865,121192,320880,91349,18120,6915,106455,48507,20917,41330,101793,5804,46924,91838,39919,49263,77778,119562,26736,5146,16996,48515,149815,104902,87328,6533,151190,96365,32904,4018,7595,117343,138520,33658,181860,132222,36765,26173,59136,46084,53703,43164,216719,96919,95045,33006,96990,16875,83496,45441,27720,8073,17015,124868,179271,262381,118057,199816,4275,79982,123100,54391,90904,52663,27953,77709,4272,13928,39051,71112,413271,16056,87986,33056,18596,153908,120302,27857,128911,15145,60790,4586,67318,109256,79780,45306,11932,132308,106229,37412,1507,18763,133449,58137,37961,24904,86499,21760,41606,167644,77227,120713,43226,13618,151594,108301,101213,40750,66225,16687,80402,18686,48613,45656,10805,147124,34576,19977,157309,114709,36792,223317,58062,150038,9205,150642,21252,52849,184323,41421,43314,2938,99855,60463,129217,12568,75505,125705,141476,48617,43014,23373,19138,8778,94674,178893,8058,5459,94724,266341,80369,44202,274013,86858,78320,44591,24273,35983,13078,74914,24190,202665,27165,17183,37327,73294,34055,248689,18437,74717,975,13878,8774,64644,71823,7822,6524,56622,7221,80060,16273,88677,19383,23116,127134,154899,68336,194037,241,4615,387990,18487,147941,15391,26006,2067,26484,4709,66156,7798,2820,26469,48765,43077,66027,3606,27342,33678,18421,7829,55334,244028,32856,8103,147672,31320,49696,49702,69018,74273,120264,122020,31808,2794,1867,52845,55295,19466,19329,26414,52167,8218,210642,13654,127707,36280,64707,8564,114550,183997,115833,23481,2828,48124,16340,247,309535,19416,66487,105120,17809,29656,47021,201858,160017,19280,78447,21406,39940,98734,122438,36909,83e3,7715,134747,24473,75401,18311,9336,15781,55262,30701,9503,53173,8524,133602,90200,85568,13433,150307,24618,45822,23920,126956,23395,51943,161287,7378,37763,121912,32196,2933,19681,9297,23283,79903,162071,55832,23137,13178,209527,9418,18467,12593,119121,83307,51772,86571,52216,23349,61608,26604,94854,7575,204746,92446,22189,28677,83268,13574,65266,57786,61446,44205,26661,107681,91716,65699,82006,71722,70318,427599,64286,24112,101430,21118,144724,36334,80349,8245,44912,45640,4276,14407,1378,31347,22711,27877,62250,191999,8464,47936,361021,134866,3976,33542,48109,10852,237219,7916,122443,17484,70725,26460,109271,187381,128014,117762,246379,22586,82080,21596,9055,4112,313930,37818,163471,108924,39581,2249,13074,7431,75393,127359,35494,111020,59720,209394,14051,37123,41719,60044,39589,172595,143831,47677,59508,24424,103244,308089,7173,30716,90486,36791,60870,101299,108569,154971,20715,53888,53901,31417,53959,2728,97125,6998,145934,80463,20412,150042,45242,187078,7592,174360,31180,135274,14872,12255,11730,93361,83265,43009,49328,20215,21789,29335,115863,28254,39036,48739,17655,180783,12531,3912,8728,149240,87661,101398,77276,44669,83920,53340,37769,16150,114794,2580,157793,7167,176552,146939,5647,16877,13855,151295,90625,68053,91363,45360,176357,42521,30918,125275,57667,44098,88883,15273,61531,4145,110202,45383,253407,75996,20238,27456,20964,4620,8638,48761,12194,52351,99825,23314,86104,80185,11840,8750,45404,19895,71824,60801,13493,12198,37669,85823,77592,114135,4393,104759,210654,28711,86484,27894,35912,20614,184536,123685,134244,44348,10862,66968,165136,18647,32424,39480,60719,93213,164629,26917,39935,75223,75930,55290,22975,122323,10513,83305,99747,19500,77541,2696,77867,101290,65344,98390,12816,83594,39244,57569,8468,34263,35071,145853,12146,76941,17746,340733,25910,37273,43127,4919,60464,1992,49562,20024,15497,109739,14126,52268,76976,6239,8384,30884,19155,135974,107147,7413,64546,38363,186999,203685,81795,108201,36022,70989,30403,116774,5379,112855,28461,9025,58269,4129,17604,104476,174522,50536,1225,10900,36288,349518,20856,101414,45229,68205,77322,197569,10875,332641,23358,85554,14077,159581,34721,18791,98700,135361,167675,5e4,42501,236026,75571,5992,17097,37563,20166,101652,40721,176404,19063,36155,59023,64899,33196,98793,70148,6578,69024,242235,52605,122033,81904,12809,15158,63871,107782,1840,4872,1850,29779,34125,98682,85234,116592,82990,12554,82089,63993,168833,149888,66124,10489,196009,53058,74145,69106,89715,51982,121098,13559,95458,107427,107351,113368,3064,70286,12687,4839,22981,48279,36881,55099,198175,73274,117334,75733,3562,5484,13136,64209,184119,61973,14698,16622,73579,36910,85933,42774,90601,40132,93866,19937,45703,23982,18047,5362,11140,39687,32620,25714,60265,77976,310,77325,31712,280974,15094,86261,43015,13789,46e3,100529,1116,137536,88451,20938,134125,17791,23632,63779,256927,29623,36645,219053,83430,48090,27940,27300,14780,109338,87618,34615,102225,42200,80520,6619,74506,194075,58892,76807,27201,60732,20976,110501,170773,84913,27702,21417,5342,72467,140090,178520,122111,33447,96075,4699,53512,17029,67841,174853,17388,16526,103292,6179,27759,37717,238964,22906,23675,59996,87778,65471,88269,10094,107338,46577,43856,31927,17019,15,159648,72870,83427,14710,153353,15418,67522,32362,44785,3937,7302,108965,41424,55752,8261,138626,43498,8777,47570,24353,207472,131958,116787,3156,34108,58412,8730,6898,90267,28837,80484,59214,9439,19087,61772,5722,23159,81837,174422,59842,18102,171770,56005,80656,119313,22496,131193,22339,3665,14366,52875,107272,15645,70022,14588,34482,10876,36184,28471,60828,82588,55312,59817,102390,8845,87428,9586,17179,96409,90979,15720,107181,33777,113545,158155,4326,32422,188604,51307,29601,10067,16201,109734,3998,129448,141025,15196,18904,83270,17683,11025,19743,21493,1552,59331,7581,25652,89130,3884,119328,75611,26479,52626,13590,195115,6807,102602,52190,72507,52467,84797,6467,2334,47785,25158,132580,142359,76578,27314,24766,3969,27500,4437,254621,65367,168149,20488,13843,62310,21136,76214,12671,23644,139645,189248,55341,3302,14123,35023,48936,11475,55049,114952,51698,297764,80767,157376,20881,13336,53207,2827,59849,16592,52991,62439,275657,47305,117196,102878,60777,83027,10464,129749,26707,251779,125019,36405,33132,25562,70233,10329,28189,12385,71977,109339,157513,195426,70901,108633,55857,3229,108445,36662,75267,19054,102039,1254,2391,173276,29374,13267,51771,225351,7237,5470,98738,14316,209876,87105,107056,16157,44140,58004,88474,31907,11831,15397,11396,39700,90254,10434,316,22682,60529,159667,46855,41392,55643,21864,20640,1483,48142,52022,14052,14307,23845,179464,105497,8112,170979,3013,22501,58766,9748,32147,168407,69486,20613,31496,139990,50815,4616,116832,5525,13988,136236,18494,72230,42950,16966,105502,65693,12439,22036,129227,24413,66758,60339,107267,12682,60700,199944,50033,64809,169,18106,13481,63773,97251,21927,9954,10994,61753,132964,24267,269121,315805,17090,22141,89553,60,41720,16257,267739,11800,148430,116154,107691,1495,7110,36185,30330,15572,9879,950,164278,12417,189181,115685,238527,61115,3001,11305,185925,125509,80597,176708,23407,47313,198512,2048,137403,10323,39029,178671,3975,76003,84147,112573,78996,69042,6992,287867,46759,5275,30027,162328,18790,274565,55200,497663,89305,12413,26108,95170,13648,15748,78466,50979,40335,43390,12453,193861,466,66161,87201,50987,94748,32988,22018,30368,175641,225636,53920,136257,72869,274820,12673,31830,21228,5225,4705,46549,105854,3199,16143,15119,48337,134864,57495,169876,45311,13298,54322,23788,14950,42143,49801,17462,217840,101953,63412,249887,9473,75292,729,57377,66067,6712,114078,1949,92149,44063,86259,35448,19529,20598,19485,14791,73304,47309,366,43769,14667,98883,25339,210091,45717,49613,6739,3783,165357,28175,87394,34612,90151,838,17747,282103,59822,30329,68354,88380,37787,19846,9765,245190,63635,236,10025,5457,17502,12156,204683,20491,39054,8070,50911,98908,99317,12186,49875,11402,152980,22961,22075,86899,34073,14755,13282,117916,33225,72465,158235,16028,64557,36732,123058,162584,20479,31391,63733,60644,62683,9917,17310,320177,239647,43989,8876,156096,31699,114739,105603,31065,78174,95969,9220,55876,38786,58411,214643,22e3,140310,88748,26085,77655,28585,109281,7624,9992,7234,98903,60178,23397,75321,53549,53032,13757,109032,64081,19046,317623,1946,71713,62867,63978,3151,56924,47304,215255,182040,74590,48012,2443,24268,69427,33,17648,12518,40668,140511,93231,72823,28791,47052,27388,55205,30906,57350,104529,63338,26728,100624,93807,107269,82876,163825,55505,18547,30605,14974,140477,81686,69012,120278,12046,5605,47923,212928,112040,108335,21336,38303,70887,143240,19855,87583,40152,15587,66375,29394,94365,54674,43272,133291,112353,210955,121711,331352,25063,35707,69840,56454,114679,66792,86743,446056,266061,12010,82324,96915,71248,22037,64756,25091,119555,13915,28628,6675,15589,106123,53880,102126,2244,55885,39035,5738,617,441160,19553,2220,14129,86275,107256,166687,211431,81495,104573,290527,70110,99357,25187,33256,100652,31225,142056,82578,7777,23449,58276,64423,4383,192266,134799,66044,85911,76876,90974,103947,89221,15961,109118,116095,21010,92406,79525,73542,120615,156252,287243,95281,58357,14409,38018,33736,86405,83837,55695,9631,37554,27881,106045,6071,41647,35485,108389,46354,18,34159,180231,126085,15143,13910,144853,93597,69662,64563,23068,38208,60491,41204,62238,141119,14714,38001,3276,56189,186134,91982,65866,6904,148344,128140,61946,3683,42347,4969,38485,12705,5410,78157,91933,103926,168175,15606,288735,6045,44535,20558,34571,13823,42449,6093,11546,37307,343894,81874,112517,50738,129417,141962,5390,118181,99682,16804,16660,107424,20659,45287,22461,55188,27272,10167,12088,17401,140483,17330,78850,45339,63455,16978,199211,80486,222159,13457,1094,18869,17536,103284,31050,17962,13722,71867,76368,286932,42637,10567,2,199412,62324,36676,8181,6401,11976,162,87196,78376,114691,1307,30802,3711,148109,74365,57920,81357,2283,214679,12573,18531,32057,44583,212119,44264,182393,154286,35753,8258,4295,13186,83291,4736,147364,121944,59024,73352,33705,31001,88498,32882,2075,163404,10634,11500,44303,65212,13112,34394,30274,20847,64779,22883,28331,12500,41997,11945,63740,75992,39703,69806,69740,66087,128693,81128,29148,111583,148435,31535,10346,159917,58414,28273,44862,59,33364,21068,33716,46470,1804,73963,73937,219049,103305,218321,153333,233125,63775,105390,12930,127548,60730,109562,38784,53330,627,73923,247159,30199,38362,48641,2515,19205,34500,48846,41053,21212,105356,15212,20256,3616,21849,17211,83368,97044,352396,108368,256189,196693,4226,14922,54639,25114,35849,320,115240,41400,60330,23377,5096,75542,3178,56889,24661,12431,135214,63314,175419,239496,41215,13379,153552,73270,37517,105147,26516,27776,68242,1357,141,71029,155582,76053,138176,8168,4134,134075,63885,2519,46027,51951,34115,79709,5576,10203,47222,15435,34313,43154,55709,9408,82175,88231,2765,52283,66501,65412,28479,574,36643,57430,38875,293893,16069,28162,236608,26442,8613,1622,12229,37482,74496,33264,22921,79056,39384,129956,77291,20463,58349,109725,54426,106360,47581,90881,45388,31487,128197,71530,2860,39582,46028,81826,57787,259117,67523,307547,114579,104215,18723,115699,295139,4428,43172,26618,105782,14781,30313,18939,17826,45064,69594,13204,71066,58366,15231,157682,19119,15787,91984,89607,54364,23607,79019,145509,69385,6604,40313,81481,16568,32756,79187,77128,12323,56725,270449,8124,28057,84040,65629,72616,33346,127078,185998,104454,34919,182273,14609,19947,124763,41923,73459,52863,155533,54653,13742,70467,101386,30438,9573,50346,31644,14370,50550,451,8627,280645,27470,64783,49001,44841,60011,84880,303600,29723,249679,20808,29868,17505,9061,24139,63213,37901,19817,58724,9103,3211,42909,2761,77280,71424,62334,7307,71333,27508,6331,83663,9696,179679,27464,32253,138789,36870,23709,126072,37059,130604,83178,283517,24823,22443,72508,24678,5057,22926,13846,74055,21352,14335,3461,51988,32368,11407,71381,7895,114208,12515,35745,29717,56803,108507,67583,54834,19424,38668,35778,15261,10445,67937,56244,3340,58514,22440,11243,68666,8661,40929,111708,37637,209508,124495,206903,91080,26187,11633,66771,30871,171838,197948,8289,57706,10460,80625,36923,31612,63454,35105,59184,7032,14016,40322,27055,86917,122504,79371,130575,6177,41328,5209,78779,4821,21329,41539,62219,83753,46618,7613,15027,118360,32493,225969,819,120335,38225,84581,17131,15188,7855,3105,30340,78018,31763,5801,31461,10241,7945,13882,30152,4527,29876,21438,25462,64433,8734,24877,74945,14455,6438,107317,52662,50955,24205,109805,38229,13383,97490,25051,32380,7096,139977,101853,1428,42064,130740,33630,82143,110070,47323,64635,163313,6594,33195,6607,12008,3521,85390,10031,28761,7750,57194,65848,171501,76792,13813,65534,81423,13132,60600,4409,31583,87558,21313,106333,155905,153496,96251,3406,49514,9434,7699,87327,46359,66114,27584,74162,19886,252277,170521,22092,82253,115261,139271,47533,52680,202618,1363,11026,363255,99673,4402,33612,20302,28039,336738,1226,38272,13620,129223,13205,3958,19963,84983,18752,42515,68608,69150,39813,30549,41506,13147,4080,5087,15836,3590,70019,16566,11738,163929,27964,83106,22713,207225,34956,53824,5181,155260,90376,13809,102964,55916,44273,1261,26537,20288,96003,17325,62927,4503,126513,63919,15556,8398,46320,36814,33274,98490,42874,152755,42575,11773,27872,33828,220575,27512,172804,16418,95543,37113,708,88986,499,84976,72480,35781,122997,86558,582,113958,53612,28365,4495,11592,12890,11756,81693,108202,42686,116005,805,108429,99193,182148,10373,83443,91669,13733,56065,75316,204077,115313,322052,15302,23067,47644,13460,67103,57307,67208,156322,235278,94136,85069,1418,167462,56633,9347,2641,44606,21287,14995,12747,17526,494,226141,75964,18039,39483,14704,59304,1316,195645,101835,141208,116613,223219,41159,49846,61222,43002,35314,80457,23691,63429,13113,36373,32330,8361,63526,11029,32963,93376,214039,18769,114006,1087,29978,114423,64428,31774,50446,49295,34202,73765,83339,74913,27287,43834,17440,83606,93489,60736,129441,57951,84464,118033,72522,2386,5028,276747,118641,55191,48057,16621,97816,39006,3084,207838,24907,92233,46363,526,73844,2610,25911,60919,15717,85425,136040,70858,118884,18348,172680,47190,167255,11777,29552,95596,96509,115491,19228,15022,162793,7055,54334,45726,30847,5690,94006,54915,36849,132591,172983,1103,51297,9369,114578,16962,78974,112537,1229,44919,77793,29231,3317,48815,10427,19768,100349,70835,1873,26539,93804,85247,2972,161694,16704,323037,9999,22014,49315,152394,35074,21009,44279,9515,28190,8647,79457,53333,64297,16040,25316,4727,146836,234761,5304,67997,46298,88700,122826,40595,60038,132292,15881,9158,163007,47825,221096,91414,108919,98428,57919,266818,61219,43879,63697,17096,2403,17970,81556,16083,75022,59692,100052,43977,127339,40049,119563,17907,4233,35651,47435,66632,110389,15505,25565,177269,69022,40996,21600,19932,9833,15084,84838,139091,128097,47428,7050,1360,88016,32635,67695,9688,79390,38684,76616,96096,222936,46245,114060,64752,22570,74272,1778,64322,94657,115063,64956,78933,28462,67295,52520,30887,56956,34609,42753,10281,38803,27122,98080,117097,81536,9071,86592,83849,30474,44691,14751,101014,152794,5331,6917,12448,19566,55177,112969,39493,16481,84170,80483,83854,147408,10964,69929,25567,74574,33765,31137,41456,81895,68446,44249,35692,20731,44729,68861,17500,1918,8121,12733,11511,1366,110805,162699,45509,76367,53890,22608,6608,187321,92727,87863,8920,54494,50474,3355,13177,24366,3750,4900,105058,21690,24548,61391,41587,61696,71254,21133,115118,33283,43646,8976,11273,107477,5228,145257,193829,77499,89840,14294,15416,31112,552645,70476,18585,414383,91301,197650,85075,74362,201919,31008,6857,18463,18747,80565,258617,218441,23173,30916,2323,120929,143751,107064,20153,59848,60391,289834,31449,258629,45824,75786,49114,201924,23563,35265,68991,69269,10313,17390,67981,454,162917,7572,144990,19989,55673,279099,65066,13054,54343,55277,3568,59894,15271,53443,417392,3623,434,45943,1256,58908,173322,64122,81605,20681,59366,25442,39040,35723,390351,35866,146738,78523,61914,82593,35139,102680,249269,46578,8727,38988,4624,48520,58695,184112,2027,12940,80034,108087,27491,213336,944,50944,22396,85571,42349,132704,181305,10849,1371,52966,36306,27461,21214,21699,5289,15632,19188,18860,17496,112885,63208,96349,12436,34610,13227,201411,150107,21944,52213,82697,377613,11201,44987,85395,150187,38121,21649,95658,8788,60763,9623,5093,194516,47673,70064,6427,97874,32248,15210,177894,45245,129556,10575,44191,36758,23545,141857,32755,22539,162901,95737,26961,59210,28436,11081,155739,67439,17384,48388,6249,69756,55378,34764,31310,113162,97192,14330,81030,18838,35438,13932,26574,120400,101846,130645,84311,174890,23927,28384,120155,7519,67818,55584,86730,120665,55022,167671,113535,159014,209287,66396,7424,10800,50330,93120,48888,11155,16081,102627,13516,33788,137813,74841,45747,35841,21356,6047,98098,4647,73346,95355,20077,37795,143033,12452,183995,86627,142356,34744,81945,11420,26913,10645,43210,5817,54484,55730,26704,91611,17668,52476,40420,51581,44960,150119,75831,205414,177424,80186,45648,15047,63973,15971,11180,3401,50574,45327,6855,127,294368,30972,57927,224035,22536,5728,65528,17692,2498,20700,124096,78896,81810,53646,34851,17737,67858,144208,2598,69506,82387,32829,156633,1376,87537,38787,107572,47042,34484,111751,127352,97800,89687,4576,38169,10102,247669,1385,123845,61475,17048,8281,60142,15760,189275,5043,62722,70423,23446,224950,105584,6317,280103,26981,232364,55457,64267,136900,23211,118951,845,54134,68120,21238,286023,351719,1601,9442,185113,17851,22169,76287,138957,35304,89299,75522,56601,68253,747,100548,4081,2246,258039,9694,51725,15738,80572,37864,139906,92854,7258,4446,72431,8572,152249,3376,43649,25854,11862,510329,182162,28232,101204,130724,77756,137694,8834,65401,19289,56727,121434,112217,15745,51403,33761,31323,43153,136892,19175,85899,25269,38059,133142,52989,1777,1223,46343,18613,28695,87511,40178,223203,15033,135709,48723,7442,84744,52715,3589,26620,71258,37458,41977,8646,41763,91920,30210,33735,64017,14173,38868,120841,22212,152812,62257,17607,2045,16253,10087,16559,33187,61003,82658,60687,45996,131329,87827,28306,207690,248902,90646,20868,109813,9386,16415,77631,94695,12715,47552,53324,61324,84409,351723,34328,65573,16236,28298,8448,4731,7418,72225,87876,82665,6012,91146,32182,85776,95303,272760,52003,18667,6217,1701,78472,2900,125100,11295,44716,79152,6181,1652,8164,31057,77402,109651,90467,194601,7484,300747,17565,61525,99466,51863,9753,72732,128898,198800,907,5759,42875,29446,20325,107060,165430,11794,312,5807,20106,32345,138270,25904,39695,37538,97877,31477,37750,22356,11523,124253,73049,33102,10210,142709,60863,37590,128516,64551,64303,113544,313515,181738,31113,37970,55419,66610,21171,11478,7770,228067,47156,179743,798,147431,50652,25454,19412,37683,4903,103417,111432,203788,3756,59905,35566,26345,21937,221970,77922,9738,6303,105196,61175,21598,10726,145604,59463,162519,29420,7817,116768,16102,128966,164809,62009,21801,6296,102360,37967,27376,20294,16974,106654,129570,55893,75840,88896,68684,52692,255333,13102,29474,23608,56902,95016,21221,14815,6659,24894,19248,23158,1954,30789,75920,14310,645,139270,54809,114378,59400,18159,138353,504,67769,40337,187608,1166,7689,50368,74658,121130,18675,55085,92265,193168,5215,27373,68051,32611,13793,36800,37117,18010,20536,292596,68283,17340,27852,177093,366025,172,3387,59699,119854,49684,29523,615,8943,120515,259718,38781,65830,116121,16860,30836,32413,2567,94625,94075,101496,152484,43143,15550,8257,43438,29245,8300,137692,67582,15848,41480,7018,78578,233581,95833,94811,680,22685,16034,79357,33983,63631,172275,30827,99510,78557,35720,123406,2852,22836,77392,107120,19910,133302,7738,237843,59764,84513,10802,76294,191768,1348,1723,835,44328,51826,15011,147582,11622,47129,100405,10694,21708,98836,9941,210066,1364,58284,76266,30451,238107,1830,218,64337,500320,1749,129373,99321,63068,94642,60327,22930,25615,10933,11881,32269,125198,6145,6468,88776,9729,12506,25930,46197,67476,10975,30498,22641,6110,13879,228714,189675,30112,103781,142137,12074,72148,144434,17332,1205,55723,10268,84346,739,7900,28409,142772,86335,34405,32346,5957,99727,159495,52968,69914,49976,116713,121567,45867,1035,114241,107374,16112,22042,28431,77268,110960,20030,87679,23686,164921,11944,46255,35097,13908,12674,144017,10501,8182,68576,13277,155275,111289,84842,25219,15303,77277,85173,34541,47136,169489,134845,66303,21102,68903,56191,22964,168741,12959,7590,12803,55332,44576,35459,106903,90385,5415,140923,1080,15996,137579,8958,18617,84817,54e3,41832,10520,681,67009,192636,36305,137803,34054,76848,21244,25054,15186,30898,30597,142275,43375,42593,28736,6163,62732,73310,84072,38175,49734,9130,100431,8056,31178,23491,108251,124296,54748,48773,67591,240642,30480,55118,280935,65621,36603,32046,51350,4934,31903,121291,176064,178205,68901,29505,71720,16101,99503,28716,1623,62803,17988,139992,3625,60964,35799,20217,10717,18230,122058,97858,147682,100622,42915,18203,67908,76465,68188,84589,230422,44689,25437,16646,1939,14545,62476,16816,55294,9543,86343,30341,131304,47514,35443,171825,56555,16852,117154,33897,115642,93380,27861,5302,4455,28048,30630,34058,166130,12047,143095,91785,86862,107106,33521,3018,20571,37575,98074,42118,36747,101485,21122,7995,35412,77047,174662,44717,27754,57326,45416,100544,40237,34819,147882,8009,40696,96137,22034,12537,89019,76916,16381,260347,20562,6469,99814,6504,8878,46264,28993,135328,351396,115983,162985,9453,27223,75768,129072,94641,114365,87668,163393,133224,129378,69942,52468,102771,87719,13027,63666,4880,269088,165,102664,209256,8459,8373,115431,33913,89243,114231,39718,48970,84535,26434,89763,13534,52518,52844,4523,118415,84250,42799,85012,51296,129398,182044,164191,23430,172125,23580,17068,100097,165599,146254,103774,23886,5517,38081,6556,39590,7165,43236,9564,11470,79503,33883,6422,32630,507,146220,14032,54871,27774,382894,111499,100220,85905,14606,67028,127208,96410,46035,45103,89938,72023,36481,10463,84711,2184,166621,34621,71767,6005,35417,18397,12328,6245,95382,74094,6382,42236,2957,19896,58715,27397,59384,32742,2546,93465,60428,48668,29303,20252,36358,149322,3193,36701,66343,73618,24279,42201,75378,214932,112583,62412,22267,87725,1442,11196,22950,229298,116569,171221,83528,29153,38927,69087,17577,73532,64199,281267,56474,107520,35241,9230,25285,16464,54961,820,4619,89654,59498,85252,179691,2434,26357,9414,75355,113594,58673,61757,95836,68318,54415,28188,53295,26258,1129,9855,34588,10951,29459,270568,171410,122449,84225,40183,4487,93745,119118,40504,14679,59040,261948,112143,84208,36024,77263,53688,44015,109308,151516,53139,18562,27509,122,78679,109133,27618,9307,11687,54101,37528,73589,23837,11531,15405,27569,34097,86052,88898,452968,106351,174479,16086,12337,33522,303157,114465,20251,93451,28095,29793,32562,4865,9953,17465,73959,11715,35642,25146,120955,73779,14564,70652,194775,127647,39802,8232,15171,32361,16145,146754,54118,51290,77606,61329,94469,20733,117406,168386,13963,5919,53038,27673,29890,70790,121117,125451,109176,9417,53624,27539,61759,90921,22062,12907,8858,21259,1212,82256,83446,126781,7632,49742,4924,99538,127157,121931,106183,86599,237292,72098,87e3,4747,189087,63407,75261,28941,10478,97792,6128,23277,127345,38013,46884,1492,102515,12723,3978,16950,181997,58167,67025,121398,86752,24702,76144,13670,87623,143137,34358,58216,10966,15260,79095,10693,121602,149602,4024,88047,68783,112717,12525,7881,68681,9491,38696,70997,83042,12348,7661,10266,114380,152092,105889,5453,138349,17021,6772,17024,191305,9666,12566,121832,67176,6357,20860,13799,50085,58837,33490,31519,39016,25779,4404,75055,1427,51784,37042,40467,42384,128165,26665,15628,1412,114798,10282,15463,67118,108331,37941,49355,122616,11721,123403,55963,72389,45854,157529,86342,25260,17774,101303,13857,2237,12444,17435,9912,13576,18041,9931,109677,137346,2419,5631,153579,19938,7345,26359,32429,20304,111232,63629,62874,2191,41851,33540,17568,68759,206421,20421,8918,5373,10979,52747,28961,61364,35687,21405,9253,238507,56648,20973,119843,75814,58786,192,23147,23931,351555,317690,34008,69565,12383,22156,37312,38993,98373,54103,108574,131741,105495,23252,10516,38364,418691,1022,31867,12528,57830,10554,28925,87762,73786,45238,3871,5679,49309,1866,15962,129853,7444,10743,34937,5310,18691,186923,15486,186831,78192,56399,34869,32653,116247,7899,91437,90338,131084,26080,707,260176,152285,65289,108488,389531,49652,28839,250236,108118,976,52394,48642,26843,1434,7539,14145,43985,32680,56851,16604,50175,15484,133420,201965,30563,171323,10408,5106,25106,3832,22052,30595,56965,126120,10162,79454,18130,125828,52128,6763,140428,50288,3359,75168,4542,67789,21815,25917,165503,152273,62307,3497,117991,32786,40567,896,24219,83611,40133,65241,229605,317863,103959,90507,1819,29545,15591,32868,129663,93792,44783,13032,1240,5795,26358,21931,3797,229975,8527,45899,76093,223890,32636,329905,18398,40622,43735,5700,71339,108607,70873,19592,51919,16423,4832,81475,93043,49045,105473,57292,27175,161447,88028,82073,47060,1862,6336,34528,216257,49542,1523,13933,6483,12498,143270,12904,35051,32513,38643,137631,1217,10305,15169,34487,16512,91140,101318,54337,80798,39094,72004,164938,129064,45885,110177,68422,13225,211848,134863,65992,69339,9421,7754,97572,8548,19362,46011,26566,237079,65134,52432,108604,72298,156269,99270,75206,2575,146135,49731,81094,34280,39812,5510,134730,51379,103016,61853,94676,117910,64,7934,95122,55671,3205,58333,173791,53345,20418,92151,39998,247552,69993,40897,8758,29486,48394,44428,19361,39328,12796,110850,20923,140821,98505,27484,87170,34681,8696,6881,178272,57045,10428,21956,22625,60177,192367,30337,97408,5004,22803,112181,36456,90269,45503,47341,44581,78522,63489,59424,114517,2479,35959,56238,267536,322607,86378,13479,1160,48474,6182,17033,29824,61296,57555,82202,35730,13057,15270,72386,73223,31558,45570,36450,117667,4678,14390,62433,28769,59271,15277,15374,25119,6699,9480,26668,33155,27044,64427,178,36692,31988,5800,18108,209160,35944,71154,35918,167895,12503,1771,16989,56793,83480,39460,212938,8159,4389,5594,58690,40182,136508,1899,67361,119842,3781,42329,32531,37520,114121,97367,52218,49794,70279,62339,116961,90247,4488,183020,1828,43025,155829,86696,4847,194990,42214,37848,22958,11578,2898,43626,50811,14189,68191,47328,4117,163237,75695,118135,64031,37784,305850,99832,84067,112381,45041,38270,15120,240636,74344,6693,36080,91318,106509,219791,38255,7554,30087,101966,6713,51615,17429,102583,207618,156,93292,28386,62288,34520,12477,25385,50776,72166,290,7825,17764,23980,23080,74965,22645,203791,114802,45119,156694,216,35714,42020,117883,147910,18751,59077,92531,63106,26554,23194,21689,105051,105424,2395,22296,6139,17775,18788,78110,84290,2144,18630,17328,34740,2412,84397,47585,9344,100610,186751,213784,22382,65192,94882,115271,162177,113975,16918,4108,47999,52975,14387,51692,40643,180272,25467,117999,146655,135050,1246,11255,45090,129815,13155,69900,30778,76238,51833,50960,175019,106483,105526,121590,62888,21440,37725,6971,74563,63186,4385,6132,28738,4260,7667,208949,44659,46189,4885,2107,8295,9711,33755,18758,47913,28249,76357,33947,20500,4169,156995,46268,30937,23429,30285,10916,52362,23390,2897,68316,35544,8324,51699,132392,78433,141585,44776,84808,4462,63809,59925,104776,132583,67668,101503,35715,119985,38457,47365,56836,187538,38063,17773,101921,26244,39226,27892,7402,164108,59972,87376,323527,169672,1189,114898,48985,100235,203916,95,21963,6130,62368,812,54658,54753,14403,18099,9204,80661,16949,16703,239430,18692,61767,58048,87844,125829,85801,177571,8915,209065,1739,136288,19402,9552,40147,51786,57185,93178,35049,55789,6563,35663,76757,32960,20303,80517,33124,173105,7464,51755,62102,25470,21379,115520,15780,117655,47580,25076,103593,140889,141531,170341,103009,155483,236319,50667,53484,1496,133657,34260,22952,46940,6610,65362,67973,155084,121252,1114,114645,46684,81892,70092,6566,122003,120281,934,5245,88201,9873,128289,50462,186108,122319,93482,7601,179944,197940,172496,8288,2228,103865,63562,3513,16971,44832,8458,194571,18586,21840,94414,80276,279833,284818,117971,1908,62558,8177,5618,54592,34875,38914,80151,5124,5315,93652,14782,58571,5164,45076,67898,2513,49234,56032,253677,6800,85426,46580,21278,273997,56465,57545,120308,193904,19317,27718,67291,1119,22758,15825,65236,17991,81823,6750,11437,117245,9177,63553,197299,2508,97808,35037,55401,129156,37796,50612,379962,82366,53364,48505,19654,26278,19171,20254,13206,71465,142569,27518,4583,63341,506954,106046,14062,56943,1023,4159,99329,39662,25053,62754,40102,106116,281486,54055,90158,94966,45145,149583,64918,156875,121779,78151,69085,9736,35396,9131,26784,2204,8896,115808,87466,122308,77182,75953,30431,94418,20569,21625,175,27134,19042,38016,95890,1280,29709,5584,120804,24539,41701,33794,262040,49022,72657,12577,34963,45314,122802,119410,33620,3764,35300,297940,221821,50904,31890,33498,679,46424,24998,9549,17126,30699,3402,46901,107591,28087,48118,17943,10684,293839,72628,116809,24752,9400,43553,51404,46957,33646,107115,59781,66313,40165,60892,19582,17483,822,7964,22063,57161,147499,47679,50833,9574,50263,102698,56893,336655,116179,23193,11473,52072,29085,2120,164190,67171,11863,14812,284781,18622,31314,107961,27863,20352,5578,15425,16772,6733,17797,45919,177948,52326,5104,101129,118088,134374,12454,238986,175627,243562,1604,162707,28340,5806,15342,103576,54301,104313,219206,110037,13405,101976,10232,224569,40292,169439,67800,219782,23823,58633,94261,4775,217506,19292,25872,158455,309664,54744,13565,217649,145860,19153,90339,68476,52350,11091,78971,60510,6347,95417,75377,62774,238643,45079,26649,121377,31224,120575,41184,92773,38918,55073,47695,123557,42923,124821,11514,104093,123806,114651,35369,65591,36023,60482,20767,40839,12635,10552,14227,109847,53556,40945,41953,4497,82444,74167,309396,11706,101696,39123,148270,9459,44262,20639,147938,46790,89576,30166,33074,58222,75050,18854,14453,79479,32094,56822,27499,8684,27993,15551,109019,360070,45828,143786,39018,134316,51248,33214,25738,56409,48044,5319,240196,56286,31884,103159,158931,46088,113738,5489,52820,62007,122208,50310,8612,192204,14081,25757,95853,28293,144772,72058,21524,28179,52909,10275,137010,29363,50509,211571,84901,15663,36633,159109,70869,102773,15903,250288,70021,118,136728,103089,116794,6302,4006,31162,48404,98849,21638,10331,38771,92331,17759,19077,6732,77161,31843,1947,1070,61852,19400,133326,70990,71182,53741,56003,187297,38802,52928,47866,49140,42448,132456,52558,5238,95978,34737,124934,576,52602,99772,2211,3564,107992,7854,37619,253975,33502,97130,7194,16027,44625,176640,70109,16483,69386,84445,189507,2811,2911,42607,29686,37775,48856,7024,32934,19034,21522,16906,106835,25259,237775,26587,28815,4053,8604,55942,126681,2e3,45110,26993,6934,70083,18404,97123,242951,95774,28200,35245,126075,19713,54541,26771,41892,33431,6278,43932,28670,92703,22776,5711,39966,91314,25582,90115,25964,42381,57282,8595,60098,288770,91568,25698,84737,48194,43690,3154,56885,95985,54802,176675,182814,3991,18462,12526,110444,77418,13087,68801,15335,13406,7781,13313,67395,241328,90575,70480,44887,245086,30235,7491,81635,56533,280976,128226,12240,35275,20723,261812,18827,62725,32865,19772,70441,9246,31671,4690,16830,51924,18082,12155,52604,70181,56355,9343,45521,95331,89906,123743,26046,16163,794,32226,38434,31410,124030,18573,21412,79016,51513,69499,483,39312,5830,39528,16907,120878,146499,169663,2790,119371,14322,112030,52038,275987,14651,179020,32135,80124,13936,24740,53966,27712,86684,12262,6516,9186,18255,29820,140583,220,99643,29371,88024,23598,104635,329921,84019,146167,73134,35547,58064,85209,47039,3925,35890,68238,152444,111395,26790,282190,22569,83839,77937,57048,132950,95253,79911,31273,2689,38285,60446,30555,86725,98060,37473,80913,23265,231272,356070,17594,117027,84460,79300,75779,181354,106863,2092,59160,174624,41803,31994,135002,52912,60077,41514,101219,16751,143391,28891,189377,73103,110543,14827,29225,18801,72180,15635,96735,20123,8653,54778,60126,24504,72006,22210,62522,119650,6858,20841,104e3,97893,37534,99349,27620,55847,127814,128781,86814,56767,22957,8365,17240,17411,175172,58526,147533,178431,17806,93628,11001,10386,11849,45857,5425,535,4471,45522,43682,11326,69505,150707,410,109497,103689,22109,49460,340469,41561,30428,87270,69036,297676,195760,69480,40499,5201,173640,46315,3997,90953,30510,59448,243249,347379,83361,1816,4707,31440,4789,76201,1555,28507,130215,9431,5428,7565,108357,11788,21925,7664,17680,87960,37326,70316,157989,29063,16049,114035,14852,65539,7305,58413,1877,47347,17700,121084,175922,11678,14590,26324,40935,33846,20487,2960,82286,7008,140230,95020,131093,196704,19819,214983,15557,9895,61765,2774,23793,6753,15070,23136,103206,8633,6988,6539,24357,120892,28654,43247,90291,59970,66616,39279,57954,572824,154282,103289,83945,115934,30357,45667,105824,6646,68979,29029,11138,202559,233721,58053,123432,892,61869,24559,4513,48351,9869,14927,39859,37611,43939,23103,59284,251282,8496,98455,54160,57823,36455,13031,54764,67263,54173,12367,186498,57750,24251,33450,28263,26527,3389,48830,62567,34485,22568,19435,87958,90747,51443,111255,9133,7685,14251,4357,34121,88370,40692,44187,15871,6144,133877,39726,20248,64182,49145,10818,50541,1709,19747,172835,1815,41969,4563,131019,10784,21458,34631,34642,27451,62327,10502,64817,21040,181657,3356,25303,57684,49247,69433,4964,30900,225330,137978,66824,79436,122600,89064,2877,43195,114574,122442,100287,41921,107124,25840,145878,21565,85361,235410,5467,28770,111833,74398,71263,46983,63243,138675,140,48949,71420,26887,24503,148456,15655,33138,34734,7409,191178,14,9258,150881,72430,90902,102763,36586,18063,309662,7191,149392,51425,83681,24587,13296,54002,210523,16626,112474,12364,63416,36624,26506,53225,21831,31787,34,86557,998,49738,86372,18193,23048,18612,8630,97580,38441,26833,25418,41232,78390,16663,190608,138398,35615,30762,41936,67821,38100,49578,39714,128724,43474,548,16126,8944,23862,54057,149293,233212,265993,19560,43377,101353,40854,29299,30997,52099,84221,76059,31238,42127,24282,80418,19725,14006,28929,62417,365698,120107,2583,165916,29207,32789,70495,14426,38831,32132,4652,155719,175722,3498,105465,149732,73487,18123,17955,25073,7848,33758,212117,244871,8698,56058,78012,176282,143192,5779,143466,322846,64979,128760,44417,7522,81933,59888,57516,87550,22759,98869,19786,24780,17277,18445,71895,46515,17698,84702,95788,12963,2088,51911,34015,139375,18024,13234,31480,33157,4088,218379,20152,163491,28846,20093,78589,10362,134905,39031,1665,31913,27636,8074,44238,29175,3880,70195,32932,86265,35934,20708,49901,110247,9629,23462,71547,25903,28239,24355,4901,138539,79668,131384,12295,92413,90944,60189,41168,22999,20952,26390,12629,62314,162675,10403,221931,3072,11764,41060,197102,26233,17299,7140,4,23363,5513,10781,164646,18296,151517,49410,18780,28010,94985,42261,103149,80050,34361,87202,65486,9245,50882,82566,8189,29402,49903,41663,200708,115537,287472,43105,88272,5751,34285,60276,72903,27444,11115,2768,40213,17769,32834,5733,17012,31302,65627,74176,65762,220572,9443,28329,49080,12480,25022,2297,13079,51120,130422,145430,108651,137217,132944,131632,45724,62952,163637,83615,68196,126016,32802,122915,52473,182224,14962,105441,51662,20871,19690,655,19897,140506,6328,224102,127751,71453,69604,5284,37207,87714,44437,136426,34177,153918,197294,67763,66574,112376,9811,16294,44836,174988,254354,188511,2252,79267,9326,32538,195,43583,8887,61049,21719,26734,11871,27893,192270,45063,30090,3394,20502,9111,20810,13951,78445,8154,14291,159099,36402,6237,37096,28542,24459,73277,130650,17930,20147,11211,3687,145360,109503,113181,11464,9492,132383,106568,69961,190122,21790,110379,8476,32285,32541,17180,45498,78855,35803,91050,89637,26440,3026,120111,12708,13570,45990,40699,99704,58648,92464,151437,6667,73908,1742,3256,33631,4239,45909,170962,320179,124561,64828,19263,102210,2444,89057,81206,34535,74172,132424,73378,52206,53131,11865,27025,47218,11468,17209,232859,291876,10794,27550,80459,63364,73566,231061,98585,163639,11623,81336,209888,37838,35343,51998,144543,217838,64710,105694,183409,44047,30481,27765,3985,96950,4163,39768,18053,21140,10328,45473,19463,485,38309,119763,13419,18090,29901,52576,186587,4918,10538,151025,65973,352,154377,192678,90225,68987,76132,45679,99334,22260,92405,1735,27185,48079,24839,129186,20096,21327,11679,132020,9799,26969,3465,457,58718,36333,13449,152147,4317,24297,11637,32905,8133,40341,7824,26227,23026,45709,2337,33165,12703,29202,57754,193021,33150,59750,1260,52775,3601,206,14458,29558,61780,10854,41118,3988,39264,86434,19878,45295,164578,92891,38661,105334,321632,27923,13416,145240,66977,20857,159180,21051,75795,119241,37074,56804,62179,4633,163164,62782,27211,8479,54137,80694,29848,30457,28627,13295,19382,20644,52134,10036,217,6449,184900,22218,8094,95155,8520,119873,16010,180016,40385,43460,98015,169032,29546,317,16757,61276,30502,211577,27875,3900,22386,11672,18862,7483,66527,116135,41410,25526,107458,48136,4627,31485,6850,6851,18832,87836,24022,18326,45152,4289,47983,4584,50159,5227,30603,9757,27848,14186,35083,178388,76847,56645,8934,26884,969,107665,304066,106975,94078,22863,39500,79589,54285,52346,9,105974,10324,22271,28261,14018,68550,223406,33026,33723,167920,84931,77251,18488,61468,140862,9374,16225,134571,126469,44833,2686,49718,124647,116312,1215,83962,5572,34990,71606,73680,62194,29236,49106,112907,45328,63563,57200,134223,119112,125639,20182,135593,81539,135405,182962,6376,2944,165398,71975,43868,92182,159055,10997,72330,18563,55690,2114,39931,35390,88141,54250,18546,28114,69643,110033,69602,11752,236964,2628,45862,81263,31983,28246,80175,121337,25572,22559,17702,19278,20436,10543,47657,113444,36746,10480,87410,12082,60896,959,39265,183075,31850,51426,10828,84058,16179,1273,128039,147289,11828,25587,131393,39952,5888,121379,76269,37043,3043,76094,45039,146616,66368,17415,378876,51710,9750,1764,52374,71144,31167,15312,56281,89753,7915,15678,93391,87084,53111,56512,105225,38442,36430,51574,77376,65903,1333,89929,814,75533,64344,10164,325602,55313,93659,2487,16394,59473,20061,3479,15298,124327,60596,150371,102582,138574,180191,71830,13827,98326,51630,12630,135,27533,6792,27597,14192,33715,30244,143897,92657,4323,43509,2215,32766,14515,101058,82207,7222,111758,22409,5186,141296,24798,420,100838,20522,137775,44210,32883,95696,537,109783,90107,20074,2531,43223,14612,84993,171076,27030,753014,54033,23994,72477,11870,108492,74863,72831,78381,313,219089,32679,44756,39365,53656,29235,112804,4612,118248,7675,9325,61217,115300,47556,1974,176307,5313,12258,24359,49934,241815,39907,4311,18866,14709,149412,89233,46619,83155,84926,117576,37441,44149,118247,9581,245890,19548,24692,61039,81797,23206,71717,37350,97838,6965,105038,174607,122384,5456,86009,3823,64576,41024,45941,19151,16982,5901,41189,12737,28662,9093,89453,59974,36378,119022,29856,38530,16274,104168,52543,25096,44843,20335,30627,25217,83023,20190,226798,32906,48839,122264,67303,25118,78432,77680,59230,99203,52453,97225,67415,116979,48969,59468,34408,89209,24629,71301,1367,86361,58029,35735,99685,35427,110370,109975,16867,184273,35211,185023,128419,6443,43697,58373,52147,56592,116955,32140,4111,14363,213044,135637,125381,38275,50143,17997,117881,101169,57994,9105,16173,1311,63238,37077,44093,61457,62582,8321,102224,43737,126639,70604,31575,13061,20600,75637,23234,165387,187842,19370,24870,41729,18660,37654,83790,66390,28158,66508,127407,6641,102989,100976,239098,111562,135358,12923,3200,3321,50588,83626,994,45525,35195,6785,1255,50764,123683,15659,100903,138375,23653,10925,242275,55742,47613,60776,117266,29543,19014,83593,55116,48171,71871,34800,38205,1776,35402,102985,16140,81921,23789,138566,29662,15032,205698,158837,11307,35577,20517,75918,40414,115830,81388,35444,208793,18557,12624,88971,123355,7306,709,13579,56470,36205,56962,82710,4862,23826,108392,175539,75600,107919,62674,112679,30119,36318,35323,3583,58218,42961,39675,9447,70828,40967,25394,52990,24075,6264,32106,43005,26974,2988,36004,49055,7802,84004,24170,31281,192353,47725,12122,11485,4851,11565,12034,19433,5475,41012,20120,169743,78720,54606,9059,80180,66596,18422,7869,44705,3409,26996,13290,28943,28573,92913,21345,102017,64396,222153,58203,28422,30381,11224,105757,65847,30690,156282,70213,52668,59859,46136,55861,28532,88256,167753,157143,34619,5406,46785,110077,43667,99945,9622,81243,40902,103064,15805,16903,64832,34463,71025,48166,42913,37727,31054,199439,94651,24238,84843,164414,59355,86643,74925,68161,10544,60088,90967,94387,626,4057,59963,60891,3100,23741,51614,57271,43352,5967,76881,11240,21366,162904,80651,76535,13325,38240,4001,24457,67064,28356,59452,277744,118863,93858,59807,37070,46501,25510,47161,7751,47987,122879,281048,12303,65298,6897,37593,95760,68584,3278,26040,46338,79738,7057,17560,16525,65646,11971,76085,47810,37627,4400,76728,5019,19862,35461,120836,69334,34264,211413,192855,77060,103398,21395,73312,37471,37865,59615,99094,60234,101902,39471,232524,96009,116049,87233,34141,2404,47909,55795,180204,127761,116132,128426,111843,49823,18679,3051,65130,52071,17872,22470,42507,67834,142462,41950,81020,33544,172729,14705,32808,43131,39318,3974,48407,145523,8491,180108,104130,40283,86994,80476,22927,7120,102446,78442,34442,85410,33747,204996,201697,144383,153362,91987,218233,24213,28647,15634,10985,37691,14620,67610,11910,119218,53184,139015,23331,10937,4794,142373,40819,40365,31288,35611,63904,95756,235215,51134,76276,11957,30265,10387,46958,85389,177045,4353,39988,117622,35975,153456,14265,42420,3485,57749,23217,14856,159478,181039,125928,75417,128987,14183,7005,18444,37640,68447,15249,32753,189408,151532,34992,102201,115188,21107,39324,56039,38368,36452,94812,113679,87546,20551,11761,60872,2888,3186,69267,53191,52996,46247,44225,33896,98339,46383,32566,16275,88963,129666,176,31427,38271,88736,11275,58147,11767,140662,14422,96597,45066,146243,18516,134527,23160,2066,107751,37546,10292,8360,95441,58117,98151,7978,116856,906,79063,64818,14019,109894,9029,106963,34922,1651,42838,17896,207329,33682,4066,47801,29346,56026,102181,10723,23963,12845,30084,114821,24728,27351,96712,223295,24805,8840,155257,74192,14731,60882,14446,3293,36369,62442,16908,3393,24144,93518,169099,16987,21052,64385,3253,74064,34395,37448,95011,11277,73486,191440,28196,91622,56473,327982,27442,4270,7603,34045,68072,29828,36418,35213,46824,27951,92979,6344,294949,387869,35280,6512,67496,103235,38638,120453,15900,1374,3046,370,32475,61988,25666,311175,38789,120083,14581,62496,17476,477,95410,36028,79370,145892,21060,64274,8593,128378,29734,47799,41023,11779,189177,291116,68655,211263,3096,34673,28182,61354,70851,185841,5926,18221,58964,5624,148475,17869,70577,270,72725,46530,32794,6345,53885,83061,319994,77613,55607,108538,2964,83165,113358,157981,31861,142777,32134,90608,77733,12681,67299,67199,12519,151204,80716,95080,143,88673,73243,49064,70975,92554,194270,195814,37976,26210,15538,12302,590,123979,34036,66307,32917,51270,50898,10348,192749,78998,142567,231346,74689,141501,68754,160732,81034,15915,13236,112859,19495,33767,7063,63633,6869,25702,6584,146558,146882,202224,116085,21271,11451,46600,73942,31037,225039,32805,68328,198802,8912,109275,23107,47622,21867,446,51547,12862,75989,33036,7283,95710,83109,38497,1301,3910,40681,44384,46771,77850,49203,95089,139563,73961,6370,84201,1459,85585,161489,169649,79787,34752,252385,3378,55032,61e3,3120,4672,121269,4082,53803,18080,73246,24595,42389,13731,72203,103679,101774,38710,34206,71107,64573,16007,64268,8208,29590,28108,9501,79568,11666,168288,83632,150019,35196,5403,5176,16615,93441,6104,17287,24961,112281,14480,245496,139857,9685,75837,34655,32664,20702,201412,31683,197366,202353,26591,31589,4559,27910,10695,29436,54735,144360,113352,52336,32696,146974,38124,34893,4126,3855,115855,6057,162019,10972,91491,48259,75698,34626,7354,16587,13916,6749,69092,102728,70108,121378,4399,25253,159638,105250,11905,98411,19834,40029,8256,251243,9349,57694,5558,143250,24675,51457,65260,24058,175560,27907,52475,49070,49643,4320,66836,90101,18206,8928,62901,87851,52459,14454,36601,64627,27992,417,30565,19686,10809,231322,36540,40887,88865,49589,161033,58107,401975,102386,190339,87577,133172,54023,98944,20896,29e3,84825,33172,11781,34558,116897,58352,53344,30915,21521,89,241320,3658,45946,115393,212186,25834,50333,3228,37254,42430,1886,49132,81794,36562,28818,44722,31564,125265,149984,17397,128685,18182,3056,21825,25140,10155,16556,115060,11990,40149,184644,50253,367370,97082,13560,14932,13300,208980,36379,448,106133,19575,21267,68757,93452,60853,5169,34427,16161,90529,142432,73614,192405,66545,49751,90066,65857,9600,4098,80224,55076,789,3798,125169,73968,46420,59540,51655,28547,2317,95529,72038,360298,88593,260668,151609,120315,55595,35600,10778,130706,98980,30010,17825,47077,115302,28222,240315,7342,5742,15051,17234,17561,169155,93735,18784,51808,1073,87638,22486,96835,177901,34933,43751,134471,3472,60107,8319,10366,11189,23719,97590,116678,63711,15095,47410,210265,78643,127925,2850,146459,65472,435141,43043,51101,50459,17859,2597,1029,127979,110999,140586,131287,93,204861,49176,53532,42202,49335,38681,33970,67053,39163,64804,7867,21720,57269,35446,82892,157650,75789,40884,15694,11145,39407,108823,27310,141378,15460,227,20019,42033,6822,24630,75665,22824,20941,64884,46365,85705,3773,32852,75547,79114,70646,91197,26198,35584,16783,11785,51303,15974,155610,115243,9935,1510,56327,108654,387235,54172,2660,22731,69831,28562,32500,45536,94042,12451,40584,20876,3006,104226,49255,2735,68192,19190,61831,13307,161983,97151,164345,4367,129297,73024,45668,60180,126542,20948,27490,11817,6231,5151,13473,7833,109917,81741,27736,71450,26743,21499,244239,47508,47275,29006,25257,7357,18329,84183,112580,118605,3793,198074,159004,32283,17771,54003,17983,52972,70724,45120,24182,47404,99628,170125,8794,46876,41664,26240,122522,32698,169875,35177,43594,40030,96952,28389,22133,1219,1627,64863,236968,142742,94455,79974,94146,13684,19300,60778,15176,21046,112121,176915,177946,121876,170733,232183,45571,52925,2209,45342,34927,19843,1825,2038,21606,30609,39291,80253,114805,22110,67637,41564,11345,145262,126398,40703,91578,60920,14383,32689,114171,33321,22821,5430,118359,18515,41276,100689,31373,44534,57652,5366,38077,63639,246112,23007,50484,65271,114639,134279,23472,42037,36268,14266,3805,20110,106077,26712,83068,3745,48789,73993,11755,10138,6567,24934,1686,24404,64978,64242,102615,49674,64915,52113,102967,47100,123729,102887,34493,5532,124741,61801,68500,69254,101322,46415,189970,103910,112087,201049,82512,10888,99736,54251,19508,119320,20798,62133,100781,96032,438249,122757,112255,29169,17982,164883,72196,54239,5731,30815,71455,40605,9088,139966,231725,23187,27251,2319,15295,22292,9157,30842,13822,93710,35112,766,17075,23218,37794,13362,14364,86554,81170,10287,35041,29695,20186,134518,87266,22035,118809,86111,54826,39227,34957,81665,785,130193,5422,82440,165380,20305,170800,28333,3085,25031,63282,43019,46076,6077,19050,18963,12418,78312,37302,8804,89631,234705,12675,161944,14463,408482,32815,23439,151647,193595,35885,102144,76974,201816,48443,101145,61088,67380,55214,80029,65112,236169,11787,39052,61274,38785,128619,248708,117197,271163,7859,30350,146035,2253,131342,117340,101888,58102,64465,11878,89316,34052,26133,128467,54644,138482,21706,974,21544,138848,29501,138625,13861,594984,69791,63961,7884,49187,75381,5237,3488,22429,62564,74778,10035,87433,84117,61834,89252,99881,82523,67040,20877,122047,11631,43814,146638,2274,23298,13690,16936,14388,11469,65947,133203,65149,34934,33809,57431,38649,14721,232476,110369,46966,79425,115258,73854,38503,168461,181745,103268,1590,73761,28824,23871,104328,10944,94013,11048,79005,77074,9510,89479,89361,8471,10246,73385,17529,51173,93722,40211,452,112593,81976,33181,50233,31287,7217,11605,5815,49818,114383,88600,20714,201753,3493,31374,99143,103003,16014,10855,96263,3215,69045,19108,17235,118289,72692,54171,110308,6337,12145,34602,29627,82100,80981,1942,94550,34461,9507,33064,52111,30229,6692,117458,68421,89525,1620,80775,26613,26281,60820,8784,48514,22303,330444,101568,44180,117514,35474,54648,52855,24987,33962,73393,65642,67569,4797,67532,33609,31625,7053,54521,80888,3839,295463,120005,12078,28541,46445,187065,33145,165188,27026,38584,77641,63748,12491,8511,283918,4716,77988,19152,55724,61518,49524,87047,241122,13621,35675,5771,49017,17443,90947,23528,8917,92592,29114,23367,38345,16221,166705,19640,54603,106502,101385,34100,50779,50417,133782,46043,51856,22308,32704,72281,6041,33229,6186,116558,164648,67105,84595,74801,41853,10043,176031,39148,41713,36877,185623,77660,93112,18322,45966,122806,108388,45184,151302,14234,62763,55556,63069,244438,9876,276168,1699,17487,9500,35260,107491,149204,1781,17579,947,100336,84387,8106,15458,23215,396223,29684,74452,123641,92338,31473,196212,62391,1527,3879,6046,20893,200851,3778,10498,7764,38750,23256,12163,76975,57473,59530,10239,23275,35839,158531,35191,44209,40678,3596,243951,73764,16266,15283,9277,164,9335,59492,9090,7474,66893,9054,29539,12905,6948,246436,54460,50334,52706,46765,22820,125379,163547,191059,26514,8972,72494,117307,112549,40233,12782,33432,60372,35994,32356,367449,51753,39462,62458,34885,48756,795,117374,148644,21812,14674,1704,10995,70861,98992,38556,29671,260326,35167,3569,19709,41,10312,47172,133362,44222,19304,3828,39543,10441,32694,2925,24827,16961,14477,106226,11249,48148,641,182648,47579,138771,11517,1834,5495,216194,89574,56707,54758,5914,36178,72805,5272,52153,156729,2240,13954,53400,68748,63310,189742,212036,48502,106813,55645,56519,64696,48413,131579,26245,26436,62198,36864,10117,183822,41455,133034,45888,134173,151941,23987,15294,9465,151116,213962,138019,23156,20652,128889,90913,19364,219476,43092,26368,135383,5308,63585,43842,38292,83051,52878,42111,91099,61824,86809,23348,16103,1661,1463,6082,2926,10571,10834,194845,212415,28967,55622,161089,61297,359805,83283,156206,39861,2052,124838,51546,15485,2858,116911,11647,165218,246102,28861,30759,90050,115426,107685,302912,221668,43284,28078,262094,15913,108493,34355,8635,56521,33938,107963,78876,130940,120485,7453,26535,294502,79190,217099,35283,16638,827,171026,54183,254986,24436,15975,31183,71531,8757,197433,85484,10671,7791,98566,147873,81926,428971,27061,12989,34063,127862,4570,5197,115338,86529,11135,6356,99904,45008,275758,72894,23300,64365,137852,65347,47170,28144,96791,20150,159397,90399,1362,27370,98131,31669,28527,73787,117782,21103,19726,1493,47288,66521,29621,45918,29807,100648,6707,12366,36485,45413,16410,190217,44950,2222,75028,20724,41617,33388,41062,13858,83447,87017,3916,10981,5912,19979,5885,67449,21903,300914,5663,81213,18877,80072,19338,7553,143149,63928,73907,14115,297533,1424,109439,72242,21063,30733,14100,271517,34775,24860,63700,11842,20737,50067,22773,48310,11235,43957,13183,88743,32209,23321,97092,143726,17704,33289,144394,22177,68374,111967,982,3290,170312,8945,39607,243231,56247,9319,54873,58452,181674,44954,10669,62937,133402,31264,14854,12592,70761,4902,2472,1654,39097,17353,115270,40066,92333,7620,158039,33477,80720,2135,38418,13751,164773,39322,114253,9921,17904,79739,5389,128442,4659,46992,27136,15868,109620,82964,2344,7106,102119,3920,13567,75236,23651,9863,2844,83773,92e3,12422,95077,10775,142605,120027,9048,36938,81154,56545,4754,10482,28907,16084,21873,170465,19577,24905,58130,17368,70780,14531,55034,17469,23293,260571,52064,161508,63795,195965,205503,32752,145584,138232,298398,98340,15352,275003,75638,800,306996,12394,36516,19824,101316,192935,84781,264456,14840,73856,120271,3901,50990,48385,372041,87319,2227,95681,56225,2867,24632,65645,172829,26782,83816,46844,37867,9630,11329,76756,138080,113102,2296,84207,55323,185815,5210,2986,109112,24197,70199,64611,7066,44584,96679,3292,11955,86366,7796,105090,121463,40224,45210,50967,43523,3636,166133,21094,57178,140916,4748,13764,3777,31731,104179,416810,188439,267731,86931,13966,5018,9567,283051,3232,53171,53678,6228,32833,99759,72984,37061,70162,70738,29389,1868,122e3,13671,27963,37380,69277,37341,17106,45005,12564,183,50282,3809,57468,23868,284911,75942,28036,2447,60170,8119,51479,25171,8322,48880,42721,33419,12608,11361,18423,24958,23374,141776,2304,149128,89652,68789,36035,45613,5268,442,159096,63783,39044,4432,34374,26718,229766,59526,23706,15072,8869,12775,73562,76513,151350,46040,29341,58942,31436,8742,195663,155875,177342,9409,11232,106379,12269,40493,135684,74614,183212,41598,44475,43186,120418,263054,22473,36531,116270,43205,64216,41880,2843,3299,84033,48575,78888,37197,53158,44555,69192,29213,80495,156103,7865,86885,75088,21642,184099,132386,508,948,1086,69319,44488,3613,129897,33311,51024,2449,18383,28970,50210,70726,70508,87097,118602,146382,20242,182430,197233,39937,18508,14350,24901,165385,229924,33832,136628,151243,124569,88492,127154,62624,35749,21909,91751,8060,50589,954,105732,25763,55626,146107,1247,64529,9884,13632,16172,1335,83115,126164,36224,170872,40971,2035,7394,46551,30671,53142,107311,75486,18135,69492,12903,96202,14452,18152,49690,77016,38861,2226,385130,21131,17844,57784,84,36610,201826,14842,131564,77270,5549,102741,193961,183742,26413,2474,194304,464074,17189,226650,166968,718,13561,32539,7182,35594,38539,16307,188634,18219,10679,72826,161909,63158,143331,23378,14208,25491,3314,73171,63331,5500,36785,38973,614,1580,171194,97209,137201,91854,49685,50187,10733,91809,187713,62737,172516,6666,67506,4776,58141,30188,4618,392,4013,235640,104039,39136,56441,250251,17060,48306,57483,66360,195080,59703,90208,74747,50648,37806,27833,30715,33159,66182,9356,34911,19238,70986,114677,17409,67559,80594,47694,8643,134840,79148,5452,14070,28599,144163,50434,27535,157523,13810,155,61478,17130,128237,70556,20046,38064,108184,48322,65305,117398,36136,43677,27966,94355,126236,109335,98906,31918,54262,1145,25681,13575,60774,45912,122417,34538,24034,131365,51834,40326,21250,21866,17508,13997,117733,16819,89310,3494,11178,60427,34853,348283,6846,88202,17221,62481,8359,10088,62152,26862,12931,13414,151495,3603,33643,178131,46655,104426,109103,4105,146806,244363,64272,15471,93101,153709,21364,73754,69185,112487,8238,52934,80498,304612,124178,39721,198761,199674,132729,36479,5833,41239,3609,28387,262648,35545,67430,89355,18851,54869,54495,5118,27316,293005,36308,43061,110038,28223,7186,33116,18945,26277,73156,23311,41090,26899,300052,100683,8894,4533,2915,66118,31965,18518,75755,209592,62868,15492,99745,54220,111614,38587,26556,107426,95125,80488,64232,13265,23009,70485,25431,69e3,3572,160395,98028,42484,42093,263,6747,244525,132822,60162,171913,124805,29698,11382,8416,48535,37248,222152,16593,47020,8816,4696,24033,36100,38399,250751,10483,19137,143486,51921,74917,130735,79897,182609,69122,71667,39358,10707,133977,56093,112728,48463,33430,9299,48097,46243,217556,63573,36225,1227,221850,32274,14107,49111,29646,36094,63601,111564,49362,24638,17610,46502,41875,40909,4262,33342,32777,32103,28673,56846,6159,154445,47336,68541,153151,3385,58607,63559,108092,46159,13477,858,2316,24161,128413,139927,11071,88393,110949,16654,34235,73235,37210,229375,76831,194659,71471,76759,4725,28276,29321,26478,117042,46296,101434,33205,67157,6462,3168,95828,54864,23765,55657,23399,39175,47265,10732,92945,59744,14719,35115,2637,23170,162802,33876,35630,38052,9197,83972,28470,19030,22779,259343,143992,229198,23683,129194,50214,30041,34367,134697,14174,184114,144727,23833,21456,25715,53623,10461,166191,57432,28691,157504,65665,67457,16937,12529,1711,168178,4710,9397,21594,15069,102984,295316,78019,30013,49809,108210,97599,11539,20109,22376,111701,47783,890,213373,36,229081,150468,50773,147151,857,99218,78079,110246,83001,17917,78802,189022,112785,40738,2303,43021,10227,101710,85107,30397,3429,72517,49710,40757,160978,8573,100346,131935,103276,38380,105759,42065,28883,402,95838,73335,67055,20011,29906,48039,54843,18117,35768,26596,8518,143614,74994,28984,30865,51327,59362,15102,44276,89118,714,2361,214493,160772,63295,7421,71563,196497,21076,202167,92741,103226,106818,69744,89977,100205,98932,43766,76931,6843,16584,52826,291470,15946,28322,3642,204,258863,106515,83304,32946,12706,41427,33873,27151,56397,63503,75140,34306,73149,29926,63169,91359,77492,74847,192389,42353,148,138944,36551,31192,181456,63005,92748,24635,51573,52932,13039,4741,79294,69836,123959,107948,11123,170654,233220,54352,20575,40997,21738,120351,106134,155424,84447,124076,35541,706,77230,51748,8442,40109,20228,6042,20963,107207,187852,127504,15461,33093,19095,5987,21488,118624,25799,182308,23326,20103,92136,54838,10713,126470,108774,19203,61066,63342,29237,9113,45526,43035,53947,312166,11117,25827,2299,27218,55737,42929,118106,61182,16888,118952,2687,159550,3496,59443,8830,51688,78340,103766,42331,73399,58020,1666,202924,2854,12678,5891,33667,17,36329,9733,2023,40389,124099,86266,73763,17618,9348,9584,30704,89527,11379,88708,19363,71305,80907,163488,19779,4406,18155,125871,16737,4313,24007,71010,35629,59187,181773,171755,48081,282188,44159,41703,24068,63512,20026,20079,101013,4611,19597,169832,162338,158889,21816,59081,291912,51657,16911,142760,13749,22555,50557,197345,24745,28474,5713,171571,328289,6161,7725,36994,167679,62776,62795,52274,70086,34392,130952,4930,48299,107549,36520,19777,23306,51480,107581,7841,16732,37422,72074,99464,17801,125916,10597,40408,43322,87432,24862,37097,54589,32282,167348,17898,3586,19826,146462,1988,63653,28763,132195,94493,43624,52107,37692,42666,53474,25957,8805,222451,925,3055,104713,68687,109177,128137,51766,12112,251316,83233,11015,24963,43805,189880,86830,77075,13082,33163,73548,44568,19511,108517,64550,26047,86565,54739,5095,68246,142182,40984,140026,1750,92461,2773,725,19988,17117,106417,21066,147935,101033,174174,12814,99891,103319,85050,87912,55182,64589,75793,37143,22056,4022,81127,18968,52899,4351,50009,17573,31885,235897,86925,127636,149633,5352,170945,13870,65479,82705,21354,52980,4573,107142,167201,689,25288,46391,60641,14497,192600,156084,61637,16433,20054,5860,781,55170,27826,61365,81069,119317,27123,10558,95773,129802,55875,13045,36330,234176,18058,7717,148e3,254,11979,18357,24975,8185,10718,33922,75655,63067,62116,12590,26192,24136,12861,33065,175633,5001,83234,6928,37537,39570,797,46993,106751,3390,24316,783,56130,98315,10024,46937,84478,81419,119922,67846,100404,45582,91490,8952,68431,40501,170957,26295,27641,117433,78412,6107,100280,74320,156460,119656,6001,172558,13585,18799,5324,39108,12471,17458,37351,39676,88115,50747,61250,125687,5267,4229,23899,71256,32369,179559,203977,81060,24631,112727,201216,111416,67474,118080,91,35301,125372,20683,74602,93673,189634,41464,103487,832,23478,125468,73805,119649,29439,51560,85326,160218,36794,49749,182459,10783,266813,44231,9294,15428,71516,7359,56127,165213,174634,35339,38024,193163,64310,62988,135393,50470,543,136487,82389,59047,12586,67015,11644,14120,11086,5208,84496,75693,97070,29150,13909,133818,28826,24956,25564,136586,132437,105186,4035,36426,22688,48858,283040,60007,145362,6143,70935,12860,88632,18097,251246,43147,88692,6972,46173,87229,69837,16404,61816,34813,41161,73489,67221,80668,80317,58742,40484,31106,50580,97196,213949,58374,30823,36357,82430,16088,18269,164616,424,215366,24797,5834,261900,3248,32765,32267,19570,240015,43546,13746,95242,296368,118754,147733,19239,38636,84832,15113,3902,193061,119038,132091,99171,11021,33759,34127,5030,3999,6802,106298,88781,43305,22438,39729,5081,25109,217719,106426,21384,30890,42599,22294,25962,25245,30497,9780,59534,29560,5927,15602,52507,34738,56980,36213,7273,98748,10870,71502,69490,359492,120808,42808,83335,17061,250432,66802,102331,12384,25660,599,64618,47661,61634,60755,54355,107300,30007,5851,79666,18845,114230,39120,65244,33679,16370,67363,870,69190,700,108623,7199,25596,17155,126368,82661,16291,21557,72770,55038,123010,8616,91263,105277,4143,14045,32486,45280,15555,228392,30596,287,109234,90030,151717,60950,12314,165069,7951,13304,63878,123573,52002,27428,9709,27443,43103,89429,81209,45635,11768,65127,12093,62760,68942,4189,59598,70512,40901,34082,60981,18280,39344,77285,4183,14054,24037,4113,474190,227569,127500,33437,1737,48639,116890,82909,62991,47953,48403,63792,44541,194078,16926,13540,54497,288031,86750,30818,25377,51309,17745,9988,98587,47808,48648,15607,51298,11671,159545,43990,97815,27393,34460,59095,50213,40288,58419,77017,108711,106974,5634,27302,23195,55246,114317,20787,2176,34170,67865,144530,7099,31816,31462,136214,45619,105094,23352,133565,14615,72015,24010,107270,1347,151444,98185,20971,63491,86427,125708,141576,126803,83272,69686,130286,27346,20481,68337,143641,11161,32803,13610,94361,17084,170992,26271,23139,77797,5076,70691,1893,34857,35003,2980,189255,41107,6458,4768,19194,182508,92031,27225,316351,48574,15987,102402,14334,46503,138005,75453,29119,31677,97327,28106,72279,7983,6958,8104,6430,66373,51695,6931,86975,52340,108203,1176,75897,106677,21721,6274,7082,13018,139466,6475,73402,49676,46350,112635,1121,31018,39288,22498,157722,11740,4237,6176,145143,8139,77918,238686,12912,106531,13530,26832,8235,79497,23768,28893,17853,435790,33701,90319,24688,121374,13130,14441,44878,2951,60805,15682,368968,59313,5764,15087,226921,19420,46906,39517,28151,141168,18755,45270,39523,7813,6413,109134,51672,66939,115004,104440,22565,91467,22538,45965,62165,14231,46295,47645,71747,30576,43847,81772,99248,106345,17063,7876,115604,42345,60383,52683,130873,7327,83603,87720,43843,117,49018,12898,24681,9075,145197,4505,69956,86690,8844,185665,73412,8843,2050,2769,61489,84788,765,113401,48729,111522,169599,15664,24750,131177,29882,57592,149057,45527,23022,105229,1754,10064,14643,137381,30538,7740,43774,97059,30153,99882,62539,119268,49329,86015,5395,6876,63855,14385,103785,43309,58548,24380,31077,33886,37135,15365,50313,128363,48659,56802,25981,35476,24927,75162,26509,144249,18559,42480,122475,67013,7834,35825,193197,143587,15263,5498,114311,83367,56008,102437,38184,25703,112278,26497,8942,91436,71042,111589,153704,59347,5258,57333,17950,53236,28574,30025,337749,2289,1610,194412,103935,16519,41580,29330,37510,19844,35382,26043,158342,46309,11301,106938,96214,58558,67686,163604,7639,99834,7952,12195,58864,23313,15895,25042,10540,218816,17583,10486,66978,231303,9956,202649,2197,36388,7432,55426,2224,51333,16871,119452,179548,183535,153812,138057,9695,109792,28563,126806,52451,139277,13092,48380,9516,54306,67549,14696,110080,90139,139123,3236,10377,18235,70961,50653,11129,8275,44976,10027,18291,32710,28012,318969,288958,37677,67929,68821,98990,82464,10181,44498,70197,86025,8013,28549,83043,92204,6171,76895,4556,88842,98320,60377,71627,117723,32809,5961,12916,37570,27325,108946,2654,128723,67148,211765,80004,234242,154947,40300,196564,76350,3941,18870,24018,73795,84945,197515,8338,34896,58219,146191,58500,148247,85921,101683,117085,58424,66764,17133,63784,11105,84682,86491,32061,11744,40778,32197,195238,45746,2576,39893,67918,63372,3938,36907,4069,17118,24568,96382,59551,49772,244074,72416,53854,199520,69813,60862,51724,81902,122032,234459,29839,38004,36647,114474,13978,22911,158690,15088,63654,33752,29885,83141,89560,3125,12877,21039,57564,1995,38775,1392,70857,53792,84731,5519,86340,4689,95886,119040,180041,26909,84982,2582,213702,108150,123127,35785,15401,146062,49004,67250,232281,69674,142589,97906,160196,41811,23716,17807,35367,161444,15020,30993,67673,84855,49859,39473,23557,8999,127662,19183,120775,28561,79489,57003,62500,16731,29948,30509,54712,93937,166789,11042,61414,3189,128681,363904,9363,21967,135864,94929,23174,24890,236852,51310,35602,22943,58275,6351,33135,1356,27798,41855,110968,145300,139274,56821,8658,51569,19894,24832,4253,28802,5732,52333,338701,517,144012,123400,70750,118679,112674,109716,66301,31703,84657,45777,1745,40607,17239,226055,50256,48098,24528,28411,109729,108854,16675,111456,14807,25003,27471,42491,22378,10233,14158,70447,13850,73969,15024,24742,25518,177495,27226,176504,38550,5248,41612,65904,91342,24516,41883,18419,84650,215347,15434,75579,9614,146192,82954,25501,30483,48712,34315,70905,29488,60626,66089,51329,5601,69188,18936,21518,23440,40735,224481,33618,40631,5866,927,128437,30586,586,52791,76586,141284,101541,81564,12333,65243,6509,6267,176039,133405,47590,16079,254143,27357,52129,34758,9267,15970,5969,57732,7254,86956,222045,17428,16267,26799,110933,58017,142888,143524,25733,55763,16175,9560,24223,247240,55864,48197,65339,12856,21320,46799,62812,40007,188763,14523,2414,31539,49494,58075,155418,90186,99708,24554,35819,75001,757,39520,16022,59445,3713,46416,78423,112394,18048,40416,43138,69398,67029,137948,20995,20115,42968,1859,128255,8554,13664,13508,240673,36331,63579,21029,46745,152929,19469,227297,236093,41575,99905,13097,72176,7570,11923,37300,57085,104327,59863,51790,97841,7674,89187,121357,61248,15021,6833,112841,107,73638,39990,166290,36068,78500,50124,104807,193177,49274,90762,21097,105427,14711,17114,26796,55726,20684,123636,20366,215229,140553,26789,7139,20446,136219,5009,2402,47228,5882,154075,61745,100420,43241,49334,149951,87091,86136,329294,49115,14429,27425,36818,111800,121708,18542,6570,27157,23605,12467,6e3,70237,21157,88964,42071,18521,187721,24444,86,29324,21880,145192,303927,17373,2997,108310,171873,60425,203976,18220,116526,69373,99166,6387,84942,187663,95068,21687,241311,45047,25877,42751,35432,9804,7724,82982,23192,146653,98925,132997,92522,87415,83401,53505,150646,8142,4829,58649,25534,26193,13182,71621,73803,70797,18229,39127,69038,57676,13718,58332,31672,65795,239662,77166,190337,3939,38653,96399,34620,237425,116505,13199,102812,5543,153497,1676,111555,5249,30589,10038,44022,32064,89029,4156,84630,183016,38962,20874,41135,5896,181302,141985,28318,41843,43853,109018,101914,14232,78872,97030,13738,107743,180301,8364,79955,206838,4786,1843,19029,45663,248240,2387,51445,145895,7401,82908,16435,28522,106136,4571,2405,140262,112590,26994,36399,3894,77745,48157,81325,9424,19731,7606,25832,161377,60880,3462,68402,63020,77789,8989,94980,140615,125748,101040,138,61603,135487,19491,9072,42404,5975,4730,23228,147617,48627,88470,18481,32183,34084,197974,15306,16406,12419,25554,80789,50074,215770,77760,67732,15820,47557,8552,32891,3397,254582,51747,37440,13256,10364,19078,197381,38702,106495,126239,69247,4048,21856,4277,25578,128895,67539,63586,54687,80647,88981,92208,26195,51852,38805,50151,28772,79952,21428,21251,116522,15445,48732,44111,50224,95470,42316,106832,48425,377321,12149,3533,41847,71691,16078,249001,118133,10711,52808,33393,18850,60881,25327,125536,35507,17128,51322,25298,64567,14087,33850,17830,26983,37516,51147,63624,6036,75728,12253,42565,30641,60123,122354,7767,33831,15668,46077,207921,704,228032,56483,154155,19104,43429,254553,40400,19915,39707,115417,1959,8797,59126,81834,6291,43802,41057,150991,132620,67404,31385,94662,35042,22728,29984,86668,80841,166714,23521,7381,18863,127695,23731,12841,34184,955,46179,100650,105059,92227,35881,18218,34994,30732,65296,15741,79032,12811,2842,22372,120408,11638,298925,68294,83360,60616,1270,50705,35353,39160,65700,15535,87701,7971,17998,84660,24834,3600,57330,61887,43556,70547,21033,22553,123308,92138,46071,72299,43807,86552,3952,31361,45177,11621,157425,24824,87145,1530,1015,17743,64397,14528,84960,46820,135812,40268,205321,64288,83124,142613,20892,31582,178130,41319,47604,77006,38648,45265,69293,111674,38866,30288,90253,116384,11710,162727,119339,30760,74575,99191,114910,80920,74030,166787,23839,86149,70396,8817,71462,77192,61144,7550,263557,51979,2741,12376,38498,79691,27990,88220,46311,60342,115770,32907,654,122805,22347,45779,35595,103800,61077,11173,7981,240873,127729,60554,100208,160744,278120,46400,47854,233114,14783,28068,50186,78962,21368,149837,32533,54920,67698,16575,42220,8608,244187,24441,16118,3484,29636,35155,100272,316104,399,13004,70176,72548,2188,3176,10044,24337,146534,171223,44154,5088,100828,173780,92915,230040,59854,91355,69382,21926,88289,10494,133339,10172,99597,53605,17770,36838,15150,30766,12102,26,22751,93985,48775,86221,110954,26896,56128,83458,19243,10858,11338,102176,1734,27656,45449,12062,47678,227191,104843,17571,33218,31175,80,41929,75064,823,5915,41170,26266,21858,74328,28428,46729,53037,208149,68239,44371,128012,14846,41750,121730,939,16024,103930,2667,3749,72822,2634,17905,21653,37065,18313,12459,26288,15851,53019,237454,82804,43717,34825,6324,223813,34763,97837,74764,131779,54108,63115,77477,133465,158834,24606,172748,8241,11219,73157,67543,21979,44698,152474,62783,25538,151168,14715,17653,20409,10177,91439,51243,33807,21982,37033,28498,20946,82195,109806,89357,35843,62764,140259,29524,15905,148965,30668,242609,18782,55072,174760,95402,12389,60205,380,39535,99410,68744,135597,29770,37761,9074,95673,61075,167448,81798,136073,92495,63964,71292,65073,16100,82788,3903,134249,666,114606,13925,13829,14923,22844,73642,17279,39192,82814,14279,122305,98412,2819,90185,4420,211793,88571,343220,46444,31428,94176,75136,10237,43041,121311,109668,64848,79724,95455,406446,203623,49760,35347,15313,70728,55604,64355,9274,10349,116949,76977,10948,182885,140337,63627,148647,65075,60013,4856,3391,24519,53746,165940,8600,25783,64942,35809,14075,40318,2510,34997,36980,34139,23025,39457,7315,22222,75794,8923,194881,63394,25194,37165,85475,55266,208468,18378,53662,102764,38595,7896,34791,41422,49686,92984,25098,20126,17645,88907,226875,65100,60009,15638,21283,90408,4537,139878,112661,53640,5071,42553,9995,35128,46262,76889,67947,48932,16991,106940,167117,11192,66889,6670,104891,38935,1875,45170,3303,96839,772,3134,41094,34782,66145,43963,48995,39492,21237,117116,33731,19396,265866,122508,109994,41332,31277,72923,726,6250,12016,13536,75815,5511,102922,12522,133050,19492,24257,18746,2693,51304,63505,129615,231652,25936,33108,79906,94200,104466,80492,72337,73422,54099,254560,176028,6993,73771,49079,55319,58712,86115,97967,23109,55938,5080,244577,48923,66103,7669,640,49551,74043,30891,80537,202612,47981,111700,26871,4345,17399,13931,293811,135578,107640,25276,30158,17676,15676,72289,37101,1637,43083,135447,37641,14254,111332,14820,13404,34584,56626,258641,7240,63894,83112,25265,17841,32376,48491,31005,66732,30950,9648,281179,112290,34755,61683,75286,5189,100077,59697,393,103531,23185,179430,95359,298178,110282,125995,14623,78807,24189,26684,13584,47803,47440,29923,6680,25153,12281,81189,101227,5727,57666,53928,80173,157148,23623,17510,44933,56582,107749,28680,76666,75185,175076,32262,54542,14210,77349,27496,13244,83199,3441,55821,39348,3757,3667,123147,458,15e3,19818,5639,25379,68555,51878,6205,109451,7850,13287,9188,134348,386526,16856,19356,81143,264611,26487,30169,6959,42394,96934,7084,65554,79211,22545,21576,12027,4118,60397,13483,51311,75590,42156,36096,8716,11493,42998,11218,57589,275790,7172,33265,140731,69517,43030,8376,28467,43930,2234,31591,23316,47974,14197,146070,17272,6751,33924,168150,30458,113416,293380,11766,25980,203311,28924,162345,55229,20334,34079,27402,77197,13365,186022,69870,83798,55050,364150,25353,28302,1155,109582,70417,114784,7067,16416,132275,7428,45143,48146,46692,34548,35154,92593,5358,26241,23637,54860,9482,14712,7966,32576,13535,39336,35734,47925,187574,103304,90255,22548,13788,18928,36142,63464,150312,54080,263654,319602,6537,12870,133946,9773,20050,334,130222,30305,136258,87722,40831,167627,13993,15208,85494,50771,220399,16895,50769,10053,113498,142098,93461,17165,99681,114262,41550,192972,66158,39820,17436,87519,144390,83913,82212,14723,8746,57817,78233,11144,30225,28682,86362,276167,25943,7721,38719,161361,102297,14900,88287,14336,12092,108672,42339,328,10290,11250,44623,111087,145880,62246,20511,67542,263445,42849,24396,94945,30646,415188,26446,102124,18065,1724,4925,110914,163915,26555,176996,8050,33583,24549,11288,16296,29023,25505,6867,86739,11159,26443,84520,68545,10696,107450,65107,90951,10518,145899,31404,52435,29234,61035,11336,53944,64679,43528,83757,4052,13189,6901,39247,35310,26976,60726,185599,8030,4198,65906,57296,259345,122777,267741,2857,142950,19003,21338,112410,33257,200700,147590,74901,51360,32601,42079,29847,124456,34389,18924,20790,120555,65991,73017,171882,21281,26841,135236,5978,4123,303,15393,27267,28700,249892,5206,105391,162130,107419,4026,62796,18843,50664,84185,9681,10383,108809,1531,34176,8061,39095,5988,39057,7403,4419,113890,60683,85058,11712,82647,76332,51237,903,303391,133929,25009,138549,7386,175781,132183,3037,69844,21065,30442,4101,71611,155271,265989,32740,189865,56230,135927,48500,76523,108510,11776,16685,31877,27734,41614,24689,13315,15066,48022,4309,19314,41098,90569,30515,198575,24381,154303,42859,32821,78665,30662,14747,1928,59755,28149,70209,67641,20901,5264,50251,25913,66241,490439,175537,104475,97516,78264,91266,103489,23865,183520,34766,3297,275917,146670,25323,70391,25755,49964,164202,18406,31978,16441,52632,15446,24429,4215,37736,113347,8883,22563,15500,19295,41760,78521,113283,93790,25764,24081,23658,27856,43669,81754,11052,1792,147034,105048,59257,167471,86802,148695,15116,116449,115822,22405,24926,8541,22171,31801,33192,4408,12297,301197,138987,41757,44743,115490,73003,63233,12310,113745,80287,25765,1137,45241,12509,86680,100507,15502,82114,64501,29571,9042,4784,27034,836,106118,79642,24816,19191,71859,10806,34975,35721,20447,33671,6079,126054,58217,78753,4486,35660,45492,39072,49693,135128,38873,1595,36229,21988,86413,27520,16917,83041,32578,42649,21581,17612,3706,5582,62426,61684,21930,147493,27862,16374,25590,69477,11612,15240,18552,19226,54284,19154,205,44618,35702,62029,11975,135778,194034,34324,9287,92145,355,83533,389,11125,24277,28651,33600,110599,48262,80091,24087,86535,87411,65839,48531,5435,70504,1680,141541,34304,310164,9214,109239,74125,118018,80462,100258,37839,12516,18111,111964,15304,47559,22475,250341,55009,43502,72785,26068,56283,57433,145320,83034,101357,107139,13166,65124,29871,9290,47434,20163,28721,66533,101179,26384,119496,80863,26599,33186,50921,14634,49049,8156,90368,34312,71503,2924,84269,91725,54206,70953,60570,28606,1961,1020,118183,21342,60064,25713,117531,67241,26343,257386,77026,72355,28646,61026,94224,43244,94932,4601,230976,375789,103456,58534,48852,37402,24109,241400,52782,174015,1515,35127,236213,105070,41444,3868,195472,8342,37810,28026,30469,44167,123934,17110,49127,67494,4950,89802,22448,1890,32145,62103,193571,16365,8100,2759,59208,11723,30626,54047,111425,271002,34847,30791,102173,1865,152807,44228,16334,47918,19851,52637,48405,8350,22131,69413,35540,45564,53848,57537,202520,27742,16511,37103,9857,25110,80964,59758,10709,125803,10945,60525,12999,8553,3885,21820,165805,49504,26657,12487,30455,81925,76254,4388,51128,62211,301599,142773,27276,4534,106190,11978,19483,15491,115826,50411,58796,19011,32938,119108,220904,80373,67031,70541,4859,206920,6090,19310,22573,667,55921,9933,6880,102405,3647,62961,136965,128623,63897,23416,79705,245524,144775,47359,10859,5553,97850,6803,18191,113309,30019,22922,29253,192739,61644,10879,93327,65766,71215,147457,80167,19567,55770,29797,29274,22832,23356,42325,44027,261958,72646,19852,9637,29679,36046,49336,14687,21293,77708,14113,74893,71134,200672,39308,12740,20962,86248,26029,50842,105123,136390,98208,22087,24721,49911,106064,73490,860,163439,14873,41067,21752,30501,145265,76566,33448,28437,8815,16951,18372,74873,29462,32916,157167,37777,218069,57242,94822,93459,63003,77897,35770,25963,42205,118099,173224,15519,76989,16637,232737,22211,31315,67805,75729,4140,57334,9310,28937,79865,138213,106821,46828,51030,76484,117312,28062,12545,71393,159499,25453,210547,151602,22228,5207,75071,53864,71005,140366,13537,2178,11825,36665,45071,70308,57129,30652,16553,302183,10738,6169,43148,24995,57331,67920,86667,244672,341687,150458,19053,961,107389,92040,192870,41097,22344,23186,119577,34986,45018,184604,177949,6669,18473,92330,10137,20330,189512,20891,13257,66265,48954,176492,72915,219860,2494,49427,18529,56158,30214,27828,171123,69463,40254,38305,23967,79164,66024,42495,299257,23031,106341,143982,353,39736,75709,49560,70040,243406,1642,25503,56434,81502,48303,90043,52859,24462,43046,29747,41457,23434,42918,65328,52708,5329,21975,47830,3326,160281,95290,12932,95952,35520,107324,11068,52610,109869,64849,77721,9674,61370,154578,9003,27427,87582,116020,25213,95646,34677,3719,94205,2145,19568,65295,140426,3088,26113,131686,46090,188040,30031,72073,89945,2538,23463,34360,138173,3342,84724,64829,192691,8206,251775,2536,33329,64010,2755,48205,112232,33297,244729,27663,129905,107744,55337,67101,35709,152617,74645,44141,27514,12925,107358,33190,1841,66538,7298,34436,19957,54584,3634,41173,31411,2298,3434,77461,127476,54373,77688,7987,53572,15128,19113,176061,17497,39049,101234,59914,173549,48281,54139,65147,55063,16371,43136,40263,175135,13721,69771,59399,19841,1955,57439,88361,69314,130279,804,37567,5192,185175,75166,10500,237921,127018,7558,35337,117660,21372,36787,27678,150697,7,190870,106339,4060,7260,122007,5881,273045,63325,39801,38618,50414,113953,105525,17559,98940,56463,347332,34915,65348,25837,82591,5365,153665,27182,7831,15055,164423,1182,30831,177372,58804,5448,49128,44734,156695,4975,125400,91561,48994,97252,49285,17162,213928,127791,49987,50768,86036,12840,111058,253850,28608,197563,19740,127785,8355,34689,65656,32199,39574,8110,23600,97524,34540,38651,19006,29152,16927,100216,30893,172304,135680,31450,91503,54177,18374,32795,63764,459294,151587,85350,39064,13067,10830,3717,20553,32482,53805,108785,109353,20145,16878,76255,16289,14152,16623,3446,23337,31309,4282,24663,64821,61752,48030,64655,21808,264145,8537,50728,25184,49171,14986,13324,23567,199062,46102,179857,99718,369654,13062,27072,2232,105686,72897,219385,64202,22442,72,52447,22847,94762,33050,52976,8735,2293,108227,50715,42136,12707,39451,45981,114988,190349,45935,22798,12654,1,651,11355,22585,15841,113320,18682,87649,22561,40535,140869,61447,16658,95176,80270,61544,83797,57450,101532,133714,89999,48843,172813,18252,163124,5003,103269,9853,67492,19019,55271,3109,55823,10407,119899,97338,54114,211163,4927,123086,69260,3848,55061,18449,12690,1068,37710,26424,11375,4988,41383,92404,48881,32091,48305,36150,113778,30095,105405,16612,40433,41692,73917,51729,55139,15099,30180,50,16916,43602,95240,47258,86059,107434,94751,15026,33649,50744,49046,74109,13167,7627,11804,18035,3335,171349,35806,44194,37671,16313,34545,198682,35794,150832,210760,258621,12579,352665,110221,193929,21773,207750,141990,78065,65827,33937,281,49827,8372,38256,111292,55786,57932,51091,10740,12648,39213,156e3,72468,27361,213358,87889,22207,42213,35711,90663,88229,37662,37545,84175,5983,52865,9162,24908,28484,109135,3656,114900,154191,40016,143364,50365,4998,47423,91888,31494,33385,89791,113590,83829,74958,6063,23411,5398,3346,29188,43992,169342,124619,152146,38176,47521,837,5847,40491,54818,14886,64782,79830,18935,46064,22834,11304,8356,14908,14164,58309,43094,59761,58932,55478,41212,27362,8157,45308,174536,290996,677,204177,10082,87199,60656,99512,92550,18666,17670,8755,6678,78663,12108,219237,60614,81551,23867,117589,23355,14754,99693,35914,69721,75856,71852,97445,14796,53501,37755,5823,34149,11053,56010,32326,128830,80883,474,3312,58187,4593,94897,82655,3179,117179,34370,37073,208,174,40568,42678,40325,118866,28501,3518,28399,91754,79629,270203,225029,103041,171673,19198,401412,202372,71959,27441,51150,57934,46575,551,31580,48734,52559,6830,207268,88303,10399,26375,6657,26942,1499,28435,10993,84614,864,33684,69818,63313,138059,44306,64282,22203,52406,127830,289845,11019,2908,36009,23308,8408,38414,42453,12961,116672,9638,175093,38447,99982,7614,4603,6681,54049,103103,12820,52944,2652,87605,137098,31855,44982,31388,16335,2572,234999,76439,59626,47646,105458,231,16630,120728,71649,54479,42672,179148,62338,5367,4698,37240,85883,273485,122580,45196,6452,17224,35656,218274,532,77135,92225,4816,24612,23330,78494,3695,84373,30447,293164,21961,19227,40712,50432,50084,83383,130654,3512,35209,106119,26859,2775,18073,188766,9641,22040,51452,7828,120628,59247,27004,7212,84542,50515,6100,130271,27415,45596,33941,106546,4823,107962,1377,42166,117980,25577,84831,24787,184967,17471,171214,62502,4444,8334,85,27407,295919,244072,141510,43179,145423,52704,9078,33296,18231,71008,99227,13981,68573,4322,32610,51176,165546,3853,6417,145489,23086,27479,11718,56566,19653,100740,49868,121955,56420,11535,65579,132995,125548,43942,87902,58981,4510,84294,73018,226515,1295,68198,49062,157567,27234,124146,46280,100486,144184,15600,61742,26572,61714,65125,21512,7799,35874,6311,40862,35522,45414,16108,107733,43364,9206,73819,15941,51689,82329,40065,29168,48562,85845,69609,157765,60708,25387,1180,144919,159797,25726,214431,14487,5968,68537,109664,5767,13490,63443,104676,158014,10404,26593,10161,140070,96476,96798,10196,7241,29156,51314,97628,573,118109,8622,3106,71584,57894,84024,11036,16921,66038,61545,106441,223566,16117,74626,3336,40331,47655,20982,117267,179473,76397,121704,23368,35081,186150,1889,47653,47926,33122,15734,26894,140885,14802,76951,41988,41508,57629,16634,12405,52104,20107,218288,100668,59180,73629,1683,30932,42310,64739,20003,6633,32811,26700,39873,153638,29048,2831,22955,8961,123517,244356,25796,26746,102413,144572,12002,20480,80208,92037,145215,65587,10104,70587,35982,10208,14746,188951,116180,117036,12649,257536,49699,32220,153641,10918,10962,51792,126022,13715,104110,23594,37965,15247,6442,44822,113017,28398,13830,44800,4171,120616,5418,1810,83,42459,4381,81522,142592,107242,4170,85703,2809,7049,62349,190193,6362,36642,21195,33097,50416,52066,84992,65769,71323,20902,52748,114648,116894,25884,34351,102634,260776,19638,86892,17434,16204,19854,106540,27954,1524,13745,42151,138947,5760,153807,35075,95356,30351,27161,68708,53500,12658,22077,63851,8487,20703,57740,44334,64734,54403,39682,77475,5602,36083,1112,36181,71932,45408,99180,206226,42336,74772,77663,25805,117083,4946,39476,36769,30289,14485,5872,59638,72213,50759,23451,882,2453,111222,168615,130208,48836,10890,90002,55698,21422,2195,35834,39131,16781,167147,16091,54925,18399,92962,80011,5820,4726,130534,187899,869,40302,16283,28616,86006,14823,177256,25701,70837,29786,35016,19926,80067,4711,15472,93684,2584,58032,210156,70971,75498,15685,151187,60994,38213,13471,73922,9338,117718,24543,117691,15713,45967,200243,43250,36553,35694,36433,52051,152826,305512,217989,37392,40189,4153,56219,24811,51616,37703,87103,24358,84298,167734,60608,30830,95114,82423,123075,5775,16326,137007,23746,818,184283,59155,49161,21969,92570,27322,24660,1476,194447,116982,30577,127322,117428,1856,80745,151783,5171,15901,75451,58392,49455,93446,42926,31021,17030,17243,171279,106913,15354,115117,51694,65215,88371,23841,28644,89407,71198,6973,57127,90802,67682,21453,30346,28531,59792,72619,106195,11690,597,21636,30078,20234,8145,91408,50011,95249,25250,66246,24442,44602,12103,41001,105897,37256,44489,85248,1331,18707,29983,310182,6411,11928,10116,19299,122916,5161,82625,56098,136518,4410,33338,119068,31371,26571,52839,11442,358,51903,115795,48253,212226,49768,72313,32154,54738,22008,16766,174325,98378,25252,9732,16533,147195,65780,41940,24564,81099,209499,21378,137617,184321,68769,172072,71325,81618,203726,24974,21300,111798,13249,30461,47901,78074,137363,96937,205703,15259,48845,38294,28061,109460,86823,28722,44363,19999,6658,142277,14939,11150,5674,45392,60588,177764,31881,6786,145293,13598,1083,12784,3617,14433,1823,25033,79112,70251,108676,88876,67887,11458,34518,12199,148504,65495,166752,78027,54905,18762,13791,20914,58692,1568,14287,15068,7216,15244,91576,191867,58273,3830,91429,78507,84897,9770,8665,7954,43039,48860,11529,61697,166056,55960,26401,61415,290831,12539,16191,30889,13589,1191,91972,41144,4955,34048,30964,87299,107280,64425,5254,43169,46627,18402,28486,30816,67369,1564,54697,41405,16e3,32524,79613,30190,43938,8057,66520,53870,1494,247505,18447,16053,29278,66743,22870,25668,1648,14080,45203,1341,40989,119871,194466,122534,8385,58819,22822,35970,12729,29360,51703,27032,51912,51956,12278,36617,79242,39507,76716,85023,73180,18140,44595,125017,191485,174629,73455,77570,220522,125113,33546,90187,62766,35279,12235,8675,15151,50393,144843,26013,205214,46310,36154,69776,28572,32563,51247,38454,4595,42074,11116,86835,30706,10273,33040,34204,54246,91737,3180,77652,106293,106121,225753,62203,83244,49829,60864,33244,3262,132227,1972,167168,175800,113557,28469,1342,99125,98666,12891,8033,119055,3277,28879,37357,275688,62785,10338,60445,97431,99394,144157,1870,20794,59985,56294,1569,12614,65686,353058,24023,105292,40234,38302,59113,20587,39754,41447,7733,28382,149537,87532,70154,27770,8584,110616,28877,50839,33339,27065,8349,41578,41373,168438,10230,58202,18179,6557,87189,41859,112308,1213,37229,12748,127395,50804,25519,6813,29126,144643,51945,3761,173270,24817,37177,11538,1953,2390,71610,55025,12286,136531,8290,7081,13438,38174,12201,368643,56955,247513,86715,29189,151151,16190,44518,9116,26301,4059,29547,121363,528,122791,104758,128283,132963,131994,18283,17120,57082,137430,286470,90537,63450,39506,73884,58318,16044,57650,17259,42080,17885,16305,157015,93813,43437,5188,134150,32055,268669,54309,84632,18425,114608,106128,82465,25150,81372,20628,50827,203900,88756,88071,113318,88552,32344,67394,25784,120662,65041,395446,1313,179364,2878,250285,16496,42810,142259,66176,14834,29115,136061,91254,103667,12871,26008,1399,9634,6954,97146,114196,292674,65716,14216,43915,106501,379,35470,60230,24709,71955,28003,44853,42762,19842,9247,27206,76172,35445,42656,106353,30864,56216,217302,43013,490,12455,125743,18733,112917,66668,5890,345105,38120,9856,28648,226453,13944,99130,54004,51202,214051,47536,22937,16607,40104,54194,4979,57106,15086,23012,12071,117175,174267,29878,59251,35492,196132,120077,81399,10476,19539,129457,31908,89598,42460,90787,28424,127439,6776,101077,81013,15187,1074,58103,66003,39624,68595,18810,173127,13688,6576,66630,43484,61570,92693,65418,85754,10615,177935,31294,91906,31111,386524,52324,16388,59370,52508,156372,25357,6238,72256,41599,57828,175252,163986,132645,50076,32143,95350,15564,103443,224492,75148,26023,120071,41388,19532,110427,22508,95408,89126,17624,37562,34384,9140,91145,109567,148238,18379,47470,5638,78307,70465,82451,53859,38959,18925,14088,22217,9340,26777,74821,42124,160091,16523,3150,97181,61443,8097,65561,68601,15737,115420,25095,57655,11216,70875,87640,78471,41244,28465,55017,134190,170,58246,16739,39956,38299,255505,2797,2174,102443,13841,69822,12621,113097,6991,123270,37586,26382,47496,42833,10023,14027,38076,52804,80220,33707,4788,3121,7610,3957,167985,5094,37233,76300,62786,189431,11488,66160,1236,76849,5333,19431,42643,23661,46201,18900,8417,18568,111327,6952,44621,24495,38741,1717,138255,22782,46607,108656,236097,24621,9067,82206,38888,253672,45369,188021,74422,200471,3792,257335,14028,151249,5429,27295,141619,22966,27219,43999,105930,97394,24617,41210,3333,88262,22024,31777,58259,8812,91559,46956,22151,60598,161311,57457,123650,86473,64439,12657,10686,130688,112742,11489,53274,26714,21670,15697,30443,104596,7868,48060,22775,3022,19869,204748,16977,184709,89313,53583,83928,92875,99194,82422,96190,2556,47490,284790,12772,5841,48964,30503,33825,99246,251304,137341,36338,22912,3614,8120,31432,14001,2727,19615,36074,75714,22938,220311,52593,32987,17971,15991,102877,210170,136379,10217,43348,155559,9056,63424,28650,29017,9663,9808,49301,50859,10641,67431,17280,61331,20739,70976,97391,58235,36525,98221,122956,57506,98979,4491,86694,28324,129,15177,9809,3222,215310,28535,4761,16001,1184,144789,181348,54083,88078,751,22452,65081,1577,13230,27685,98822,56681,2394,90263,54478,144599,1504,78572,173001,99606,33977,33470,29437,39886,132104,10699,34506,36978,30316,13646,16311,29262,22230,50283,49086,343445,931,13052,125899,139325,97193,24009,38257,76027,185240,47587,137522,115144,24826,38532,19149,8495,22687,75105,130036,15268,174322,68514,245144,17081,15307,34585,208142,75209,22988,36011,65,2906,1390,60888,44865,144040,188745,118480,95778,32437,180325,4138,10609,92925,29580,8808,159680,42631,59068,29860,171355,10899,74903,33949,320605,9425,18994,26854,7737,53509,29195,107306,35880,21197,79,68771,286937,4362,15436,42681,71303,124778,7622,25028,9618,122572,38462,11060,66457,65269,11566,72952,5073,71968,138710,28743,12069,66022,44828,82002,156524,81292,45774,14165,218072,86389,37768,116234,37323,222673,99236,417011,6380,170851,68137,22809,50851,17147,84083,118504,78497,64504,19282,56977,84684,68011,22698,100149,2846,125107,17134,46339,16369,72262,74807,15652,17984,99115,126662,49499,64245,224198,173497,81277,63478,3449,46248,2829,31143,91485,16938,9355,21751,89231,119735,2651,2158,25221,3212,1095,134321,26633,28292,72271,10874,18895,213652,343495,36158,6930,49013,9714,53844,16595,9975,99720,38334,23140,32180,298162,284394,20189,45660,51804,12038,74719,86250,44131,68813,48629,4801,41574,219878,76411,68788,91859,17071,199893,95490,13890,126132,21590,77482,5070,117208,183553,113751,775,118421,47980,11994,16510,60560,22757,44624,41900,22489,161977,94452,40768,256639,97607,46839,15049,48016,183793,128497,40127,59466,43034,100316,61744,20099,72276,5798,4254,61106,151277,58588,78938,208785,23350,73184,13401,114456,168253,202987,128773,32481,9314,65417,80566,15061,20781,37790,80269,18985,16154,88524,11484,16349,5922,1606,101590,83867,4032,43156,17265,40946,123245,97964,46724,2142,201438,105717,55537,40251,107387,34947,130879,26300,2025,11203,27400,9384,6700,100060,93137,120697,32781,37742,97514,147819,50972,130074,43696,152282,11325,93653,25846,60051,100451,107799,99294,5187,187837,94311,19648,17481,47149,196106,2484,185532,68892,41347,6476,26576,262,8035,144425,16194,7546,10780,99032,192083,18268,16390,38046,139599,36447,27883,48800,8802,104301,118236,16610,9043,30215,167395,15722,14540,10143,1979,18303,245965,6606,25006,56388,720,40122,19375,26986,4175,5283,31628,70617,156858,13338,18916,50924,158448,13314,144723,40846,148751,33355,78502,66354,52938,44935,114047,29390,83010,31740,103107,187158,28282,6840,86492,173457,46403,22614,107686,143217,20089,170121,5844,9860,56485,104630,20934,42133,9301,19064,206963,93906,29729,27462,23556,248023,29615,24218,22591,27525,19222,62444,16562,40084,90324,40232,146333,178921,45549,11142,20167,301568,34164,125423,10471,17862,4749,774,117434,30213,12597,85041,33085,58865,17338,4578,2863,16515,49743,2267,9740,64838,32867,305033,36669,34833,20474,42789,41849,24106,210964,124297,37271,24216,53900,123495,22790,8477,175065,22886,18209,95189,3313,32543,28979,29761,127609,71172,8231,87016,63834,20159,12952,70904,466787,101605,54408,2160,17597,57212,21731,165012,21316,33552,25130,56209,46615,46375,45208,106318,31681,64073,55748,7104,76381,85964,138120,4075,21570,28070,75826,73539,7912,79024,414,177899,313993,67507,29593,5743,4806,12800,9925,25560,9189,117626,292865,50234,102480,16382,25999,50641,18440,9929,683,55242,2340,1064,123149,61826,15245,38280,7036,24794,44030,43924,92159,34247,66141,23809,86055,215911,128281,150909,61827,53182,142185,14010,103680,51751,108481,22354,23176,13327,14346,152541,54918,99104,95228,63611,58466,81038,32483,69723,57578,44054,189180,149427,13305,19749,43628,89334,5709,43087,18148,4104,86479,50105,64469,20382,16697,4708,14117,130911,31064,73543,33459,45627,17660,15860,57462,86199,200919,78755,79677,80038,10770,87019,8576,17552,49793,46030,21495,35725,33423,27589,152364,6318,32370,142933,34912,78214,52047,54699,36052,229203,16488,20327,25789,14697,62555,29116,9656,6836,6459,16067,47438,81922,8426,32236,21951,67133,83493,104694,49662,4774,7763,74850,270584,335979,59725,82959,82821,18110,82812,14354,2193,9843,18628,69780,24991,112338,67760,191557,92348,79071,79405,72842,11351,56088,68557,139675,23222,148134,9612,12610,21344,25747,7673,584,17873,39734,28102,18328,10063,14720,56517,1902,69798,38307,69620,33351,1174,19948,171797,67288,84834,16123,32458,25946,172250,8199,29541,28207,15618,8731,15870,23596,47369,57922,81109,26904,26073,8326,32080,57471,44892,162057,207644,334076,10101,4119,71495,49601,2592,19742,21202,14849,98354,61825,11039,158223,75426,119901,91036,68746,116495,8557,61230,102302,14765,75658,2810,4942,28526,36256,130800,67752,202742,33081,32260,193926,185696,4064,4613,295863,166466,13260,60590,1252,145391,2657,37112,87184,227365,8194,75214,88155,115530,90924,33979,90533,27556,51339,126402,49225,196178,34452,155062,4813,17478,33954,30642,120974,35852,38833,63875,31380,62028,58381,12810,7419,98274,1977,194463,145760,23510,116833,82799,19072,2433,145655,47664,4834,69147,46751,16725,33328,38665,115531,36685,76090,11537,18743,43367,17948,23978,41370,61099,40095,66518,999,449,217319,6688,250897,172150,20516,11330,20451,102867,21452,159960,15660,21691,82391,6601,43312,301838,29124,21637,110211,36745,105335,60833,98115,7130,2470,75962,2011,18671,50489,79569,101266,57316,81095,53258,13308,34852,17013,84541,47478,38034,23762,162120,178016,54182,33123,52028,72197,35578,4602,243630,88186,65900,67107,5029,138288,99486,1235,6540,165347,19771,47835,318100,22891,3456,21803,91103,57561,2658,54417,30476,7012,16914,55333,21913,180607,99866,184639,7485,8405,28390,37172,89244,53674,28109,98360,69082,3525,8262,79773,254797,87253,21147,105791,15807,58442,34353,98558,30931,80675,20006,3002,81642,11376,4228,91457,8547,21430,137085,33238,42307,3087,1675,66687,47814,34117,203023,131032,24008,5970,283196,124604,83088,60714,198286,26339,5149,82518,214375,8762,21409,25932,163329,13237,37495,3608,290603,72236,1508,11575,152574,55633,156361,32414,40471,48043,3556,2415,83506,9556,79122,233954,30068,33325,6305,159939,14730,53878,89577,30054,23177,41063,32980,17345,131539,217504,35311,15300,34759,144987,54877,46496,27668,5784,24491,1354,32178,129844,14953,7360,71896,107476,206892,65803,104799,60213,3795,77961,116305,72186,184835,52495,85430,98086,108950,22959,119262,214032,33931,102185,42860,161725,32444,24541,25160,41398,6650,202950,8911,27523,50156,13935,23428,255875,23753,49759,49437,771,101855,224178,105322,141973,32780,5494,6519,83915,103464,195927,16203,18899,2849,150029,6349,3289,4814,219,74711,59509,333,40550,1230,49476,28787,6325,38045,10647,173625,26321,8540,19101,23643,21796,75165,98886,256858,8390,44736,107620,67566,91614,25909,54320,31937,195737,51026,52019,46128,10676,317034,7784,41102,123264,4984,106475,31610,19260,32281,83653,4280,61891,91312,19136,38931,76940,27060,33501,126832,48333,44431,81276,41771,130533,17817,6320,38313,928,45363,59120,177473,41182,155937,135020,126653,32047,239085,115649,82912,3416,35697,345331,53591,16649,59784,39055,46432,28477,91993,8200,97534,6307,29531,9129,30788,89098,126740,20671,133582,65905,213757,1632,18153,20878,76560,55987,68969,1600,167776,51365,34575,216355,285273,37934,49689,21386,24262,69390,24454,75939,8237,18742,88250,165234,65030,85487,44653,10365,41160,2784,164637,7275,74437,817,5045,54742,48804,217409,12001,99489,118916,8909,10151,74282,13159,165410,3506,39017,37842,24440,5032,93366,1031,93948,42413,34930,75349,36125,57529,29308,1478,45294,1328,29873,11655,72323,80218,16686,108777,112357,19468,161527,23435,67822,30370,4433,277425,199425,1173,8369,101734,76516,110263,4965,67469,27648,64330,158915,70231,148349,33642,19100,124711,6240,206630,5766,43532,60290,1618,11261,28514,49764,75380,44379,65526,33015,1566,161773,54956,37344,69904,6421,1e3,17254,11877,7155,21882,13912,9792,134,17728,212180,90771,66606,25302,43754,11818,134151,40952,12919,28325,57470,52214,30361,5898,7913,149632,18095,212017,195480,1999,139,84069,3822,2111,116190,22381,104936,3259,19369,7470,4564,63362,84396,244911,82844,89961,73711,23902,88689,220561,81148,100516,124589,39777,153793,37780,13806,26335,4176,56333,280949,9063,9260,69363,258594,10572,107880,12115,33299,12416,68082,27837,184178,34551,83293,68854,109274,34623,9210,18491,59555,38604,267,8192,6400,24723,29696,82525,68604,5947,72996,15729,703,15588,23700,2015,100398,69927,427,20207,148402,66252,2099,146853,12510,119177,37939,48402,172082,69173,242876,15286,133076,46629,9996,20910,33571,28714,132255,11444,47791,70715,103704,9226,28482,212408,75092,6197,29216,20521,24,52569,5853,406913,21243,31218,77868,74380,146453,7607,72181,11716,15373,26582,8123,50659,30590,227825,66454,50862,49529,80294,15517,37009,35230,69063,80260,88460,38472,63246,37205,130101,137671,14972,60171,7210,90428,50245,64301,53853,21012,116299,19943,538,102919,143609,50795,65120,122155,20760,41285,151950,28489,62634,48588,55806,151533,4795,3053,163748,44956,565,152058,52837,23981,76468,97083,13153,60576,2112,50486,21100,377,192917,29902,16674,14359,42767,170627,64536,35897,66424,6902,6091,127107,4355,121366,138201,65773,66108,41998,44837,63222,69586,36291,58547,23085,14181,135294,3723,40961,35006,126987,163,9211,49788,117861,2177,37726,91665,22613,32288,24902,24789,76868,85454,74752,103374,11683,34033,48129,1456,23503,8497,70596,92766,70637,14282,304999,76392,9980,25742,4216,140344,193566,10535,16591,137916,20347,10741,5439,17749,74636,79559,244434,10353,2254,117493,6879,36582,273890,243787,15483,5037,43308,49337,29065,64416,85528,100718,19024,222754,60476,79495,44751,64434,4020,40139,30091,121039,83627,42956,12277,115688,38864,7551,37316,31576,348,55433,10897,8383,89713,15421,4329,42444,12217,31509,48867,30445,38228,23034,8090,37931,30345,45081,21129,36808,88429,547,39635,34098,148415,61176,52774,24919,16366,53434,13434,146264,79719,328001,5483,62687,73315,8470,79268,19141,72096,36263,44493,236350,267628,30145,211091,25890,14437,4519,17070,79714,73443,74173,53239,98936,72193,53935,17849,592,6437,11845,802,96206,13472,73774,36519,15404,33551,60211,17322,196495,29339,78025,276332,54124,171051,3,52430,53849,77154,4102,16020,8709,109741,73782,54762,26431,7665,109293,2201,111613,5780,315332,245103,65577,66474,48412,162153,10534,61430,26683,61829,32733,13780,13714,81304,58398,119619,6865,107753,132039,172363,20128,121666,235595,131904,18490,178167,57539,35059,104141,15949,75689,5299,325,57947,48755,8362,39470,20406,30082,13818,171970,31118,19942,97627,115860,172133,40888,75047,15707,107467,49758,2751,7268,102546,139896,5441,73301,107048,22686,65676,74336,38585,54155,188892,31370,24110,165124,94512,2368,74483,9470,16357,111827,4043,96403,170548,107757,169476,28693,28709,136231,117890,11783,151383,142844,158445,124615,108842,97138,165759,118091,170718,96638,151535,50875,26742,84053,96653,22587,72385,38691,81135,2787,15019,23801,14048,175978,40360,1588,63401,3408,17858,10573,129113,76021,1698,122098,41563,91014,29385,77039,205898,31782,66049,240,30201,29388,36852,186135,119600,62862,71976,146101,66513,162780,57466,11996,13198,214801,18524,18143,9123,160460,15278,112963,50571,55357,30128,46171,94183,55715,34086,155836,66742,311911,22315,348769,10015,161530,38573,47795,32056,23574,5351,121213,7806,95295,21922,116266,57531,199257,102740,132515,64909,90793,50599,3344,13994,153769,111152,144804,6819,219255,121782,31286,2640,54412,62437,99187,80216,98506,1973,255838,88342,73727,16363,129694,9582,119806,25823,35894,95168,13820,13961,48779,36969,6826,36122,55235,97975,132524,23098,148582,4514,57373,77831,71967,9045,37633,44748,65282,84429,23687,7236,15174,64021,45128,22679,13920,80494,17542,17632,47080,10822,58383,72334,6147,18237,59831,194844,108242,19788,180510,100731,157593,30326,279827,55366,125025,15314,11547,48137,7136,21272,48386,58395,1286,9368,30466,43535,28957,219088,24784,30339,127956,154838,51263,15865,28402,41075,56222,63661,98813,65963,4997,12583,20805,75481,56536,95023,7532,156833,60839,127105,109417,17040,15236,207517,40610,22003,924,154828,5041,3149,61584,15751,32958,30934,164321,30734,15142,101107,30660,103621,18408,12233,98156,98027,108596,11650,55792,146477,33543,50057,68e3,98194,50517,22325,104336,17124,27748,70931,26858,118550,80114,17779,47640,40187,233434,205828,163803,9522,91447,45870,85576,87308,487,32686,244627,45444,37094,10371,30263,37708,100048,61011,174186,98247,30541,198823,425277,43101,43477,177323,58960,83354,10639,14794,48614,76723,89862,7677,6456,663,155868,17446,160748,3648,37667,44426,160030,75580,8726,48941,203882,126698,60684,139753,22714,49200,237903,165483,83252,25239,73408,26534,38895,18906,99589,26437,80391,31962,12190,496,115352,1660,38739,25624,25196,314328,97348,164824,64001,40502,3914,11141,3746,80143,13594,164955,149665,13939,2680,66054,20584,29040,149016,20350,30753,3677,13907,48796,31858,191904,30171,5370,40086,3400,28343,12830,135213,25267,23530,168908,4125,25811,115225,31603,26072,36166,61104,83325,117213,11935,35821,85360,2192,24751,147679,4560,76850,115369,14337,33806,25191,101567,4297,2681,88848,31912,244282,37953,201,50311,24085,34402,47251,10729,326976,52264,7804,24341,56428,30572,45401,26493,7851,42287,88129,15527,21303,2927,54360,26880,131620,27105,560415,199310,71446,41999,39217,105002,83253,83065,24673,2975,68692,62597,80790,14068,111870,19347,24015,20919,5224,78599,21870,186584,15813,2869,29987,2229,38197,107855,17170,8632,49026,43883,59246,115190,45057,33719,56476,34016,13660,4646,58901,85953,3306,180651,187566,98029,76345,77891,987,5156,40671,55385,6206,26225,27905,8848,109863,213205,91072,48382,18078,2792,996,28414,213905,5931,68527,112270,20314,69524,62085,20144,88213,73577,91351,41869,10074,4599,122634,53272,97538,11166,55109,35551,37066,49101,168209,72102,82064,21549,2024,9446,465,39252,27560,116621,45956,29498,112707,228850,6346,6775,17352,61942,42228,65657,8306,101094,17714,124595,167115,53195,69704,69894,169921,90173,145431,10207,166958,58767,73284,73047,5031,13824,73684,160378,46020,98056,31999,14582,11844,8113,397,4778,67284,141101,53616,155244,19130,25923,170625,42980,76185,10190,22410,161443,6920,90784,3737,114515,32849,78448,37681,43864,5450,79795,35899,56126,14610,23922,5420,21396,22451,72777,14065,9126,21002,52416,92088,1118,17392,26827,105671,77612,31872,56056,132315,124658,66682,14163,4889,103995,84796,16665,66442,3877,13709,21423,164865,200571,40210,92532,13583,53632,59898,24828,103097,34087,12029,98561,693,181750,8719,55652,72459,64857,53564,30839,32498,14036,21462,17046,22523,14381,91884,124941,10727,52730,21647,3e4,89146,127984,88379,88232,34226,35579,194428,38436,60128,81429,12754,39305,70531,1282,37797,8724,135076,130745,132826,35826,139941,21253,160016,52919,35823,9597,22567,65729,24463,1528,54383,74937,66907,66449,53186,30489,4666,11722,77611,109886,5707,100503,31107,178087,63909,42663,8339,41648,8005,13790,4694,67663,118773,48261,19185,50745,116520,7658,90355,49068,180,69370,23597,3425,108805,81173,17222,9136,45975,93798,140675,20433,37301,145028,28442,25919,19397,66698,23668,7495,6626,1272,55977,23033,63440,185173,9128,176386,222575,17347,61555,20002,35331,148015,28774,22224,32101,95270,155229,119206,28922,125370,17658,61847,307477,5300,9390,116888,3866,54029,24379,64983,6059,113961,69357,18619,44315,7700,15752,90871,72844,35312,127381,68250,248737,128932,239631,59079,34253,144975,62460,30364,34513,135745,93181,50304,215982,80359,55913,6568,31706,56971,45133,253285,65598,43884,140155,103385,51233,124409,18676,15537,161665,3137,25249,53067,54148,94047,33164,89524,31906,32711,29581,75647,98053,70783,82837,31002,153684,118904,67223,110578,329466,139791,22362,2416,53013,8222,29975,285682,15525,40047,7317,13949,37038,37506,52813,5084,19535,108360,1943,92833,2683,39660,29613,47826,43960,34705,20012,41780,29619,22730,207130,29242,83810,88401,49617,41631,13484,27193,49651,48220,16919,66661,5636,12779,78449,38764,15334,19403,26257,42121,36313,84036,57343,3445,29226,117117,1835,68598,28084,20588,21723,125697,95247,24456,23959,82657,72072,191527,20720,69714,19e3,159615,178013,30853,224932,9741,2949,53392,15811,65040,40817,91887,114,34555,104656,35360,32127,29705,5951,48069,38097,8656,40672,7670,37508,58545,33267,101625,88507,8002,107670,43585,37225,107303,21839,889,27359,44829,8538,29418,91626,112730,12807,6084,12193,229,49391,10635,69279,134886,35206,15904,20608,57877,82079,26098,11055,91058,20546,8467,88156,225150,50824,258547,92808,13614,10159,28825,2152,16714,38468,40965,57259,46500,133547,3619,55275,36301,8395,62581,72789,88910,30763,61787,24475,34843,39477,127755,104414,59623,65515,98667,1708,34899,29620,271962,9882,16411,164317,42920,3818,33307,30124,3990,48661,154034,37142,8914,66897,91285,266,18859,1631,20187,18104,18347,34806,41381,28001,36157,227930,227438,205318,151106,85815,19169,188069,52621,87753,7676,18539,52732,18321,344197,32336,25286,250664,72376,6599,95500,72733,207728,65258,4923,25107,38173,18852,277661,206797,10280,68706,18443,50891,10099,26038,10350,8082,230418,91468,2822,196411,40589,33553,83569,92596,11998,44307,17424,96764,12849,152582,141574,152823,25400,29806,23815,65514,99567,54295,22450,22819,8254,3779,78344,387277,116301,84235,146179,62176,111891,75668,115049,51225,54668,119070,90975,40329,139109,42305,58482,15563,96039,231261,608,189,79423,116781,399767,3659,221564,150552,66005,73670,75682,162148,83033,64357,106094,73326,218725,51793,156164,11491,97189,275136,36754,71371,10881,33482,5754,4091,21520,86653,55930,27813,23947,74615,44269,3897,24643,67058,22281,108426,85853,11318,7545,54923,305706,125720,61497,47223,139282,15388,174552,34639,16339,22388,14264,74736,41059,8267,136640,7760,45714,1730,8753,1553,19445,102663,112491,8628,51162,170910,24623,47654,50695,40784,36170,18125,20583,7144,155439,2288,9897,85373,25015,92695,127810,13040,72704,125096,5883,7088,2125,51383,31073,94309,21302,31925,6461,583,47582,18007,56348,44224,929,3859,152766,140424,28867,217612,69471,77439,20336,147072,7793,18496,41996,9932,226194,164026,97199,21473,8913,36578,370703,232366,40298,4722,21848,30276,32613,9151,13631,19868,1123,5824,133353,58605,148488,63365,98514,162970,68898,26510,4366,150983,23673,35199,75476,53507,214063,40500,35220,45220,83826,79277,94220,130368,10107,32495,103453,274743,4302,44614,2713,157,20394,35233,20579,45213,30353,9566,163051,42976,78372,203293,8456,26004,25226,152144,18362,25622,32068,7097,9764,19804,105586,2330,79661,38440,45558,183480,5445,30623,15936,98629,31188,21742,11320,13423,50238,196800,61702,330887,6907,165378,29192,44130,36247,125815,76135,68600,3478,102912,38948,30939,32718,115597,14759,97829,178650,6398,96989,31012,80346,29170,167665,345465,32639,105679,182158,56747,62826,5573,31888,94879,251468,82742,74122,4939,105988,50230,43427,160027,68618,115561,16419,149761,8457,34061,57375,99423,60632,123694,18569,46099,3392,96711,126188,32251,264812,49338,132633,15332,90783,67149,64854,8761,62393,76418,81682,96094,50655,103271,39486,128555,50988,205607,4238,5763,202341,1257,225585,235318,53879,36434,4671,222223,22096,143525,96909,55729,20281,64025,133074,30241,79441,19012,18415,55420,135097,144146,48331,201746,72776,317545,66575,3987,123583,63087,50450,81382,173,71558,23663,8259,7334,32703,83813,49325,14244,94476,64667,23287,26116,23310,52112,7719,44701,18954,2509,24633,12226,87574,88717,251100,14491,4274,63011,92311,24796,10214,29179,18591,35862,3752,140316,110533,16614,111729,140400,64759,105653,88014,99594,170260,100542,4164,21095,393860,1570,11733,2292,7175,53291,7019,12084,21144,53309,55975,40606,132887,54500,21593,18556,3593,69,28773,8032,75346,68243,36013,38871,101277,105666,51660,13332,91109,139335,73372,29329,16387,148050,129561,74071,259187,18882,26921,62561,11627,44409,155193,111945,57459,200411,28094,21626,173829,42067,142855,22469,44694,41492,188424,1317,55780,178410,31665,32476,49797,50096,133424,54045,89192,278490,20313,169877,120443,901,6058,24102,62622,149284,65967,57346,3904,11937,41372,17994,14814,66911,235601,80170,23887,4818,145255,128004,1027,25782,724,207408,112258,39194,29870,74011,64955,219934,119689,118077,99800,207128,83883,66658,11132,62891,83085,25216,66353,9815,11198,16652,36202,13812,128388,227653,48624,40080,23190,29953,18158,102077,62237,3854,88481,9533,51501,68427,96882,27608,35856,58154,43059,186515,64641,36774,11040,20138,41376,37623,2455,47929,25769,20233,7077,19150,180387,26425,21651,71540,74198,49630,181159,39337,47603,10453,99126,357301,22413,127961,100434,22332,3856,103557,61388,149292,137919,5062,68186,8654,8282,23829,19161,9891,41737,115440,110468,4212,22815,35452,120052,148515,40823,61325,8819,4354,51789,12976,55324,24368,77300,8725,41494,7736,73140,57163,7014,42056,13817,48686,37689,9578,13571,104584,3618,3981,2615,22449,87729,68084,20425,146810,92615,53907,63016,17337,207943,48593,10105,121091,9823,47400,75309,56784,128657,106634,43561,70981,12587,51472,92150,54178,15857,121204,6055,42142,6379,144024,8486,145642,67628,94025,8294,117913,51216,150314,153347,1042,71775,2265,3224,68227,157617,10548,144881,33324,63244,38654,28271,8525,1503,958,5778,53723,3864,58302,39847,53240,218754,39512,6285,19507,110864,63755,37263,11172,5769,8998,16662,20146,21492,50772,13346,118643,7243,7129,118273,175534,1192,22122,76882,43114,87921,153196,45106,138465,85529,3075,30600,13487,31512,11916,22411,68282,18537,64660,19916,149911,42698,4415,22126,52393,35350,288666,27537,97849,73510,52941,15929,294,84474,45720,39658,4675,34301,453,57231,29931,8991,192137,112683,33353,21013,82429,32028,9768,35034,2225,27949,96606,566,33483,30858,67296,38832,15545,58085,23327,19838,45987,38289,25368,35586,107553,62141,38448,37216,107939,32602,87203,39413,653,178536,85622,55006,18371,38085,25177,12178,39794,54315,242178,59742,149144,10766,127632,856,10442,37459,12213,84563,16802,59641,26529,6900,63962,37381,10736,25632,95267,29099,16636,17437,23052,153874,11429,49786,45113,58163,65817,30723,19440,8273,176150,13847,87151,4967,13744,70845,25959,93062,22114,4044,73295,41922,20005,7843,56037,104704,125857,23944,178063,113180,671,235976,152556,97222,136235,55530,17906,85124,11074,48942,10651,199,27527,6518,91832,29772,61127,20939,1458,24121,44597,73769,4219,49564,15715,192653,166296,109313,43836,52936,33537,1148,25047,95207,270590,56882,97809,23895,31177,26762,3184,132542,49663,59748,3068,142982,88469,25870,43552,22632,51664,23936,32111,87452,107086,104873,11521,48042,93260,56685,20765,54018,59944,11341,144539,178468,24105,32314,35295,10728,11236,29477,35284,26230,226,165790,42461,23559,117007,118411,290079,363,78533,53121,31307,81269,1905,16159,14155,142012,33360,14799,52790,5718,161126,136815,27111,346258,23627,343,945,31456,9607,277463,25540,84333,314287,2083,110065,246476,16799,92713,55883,51018,19760,17707,24992,66692,259273,23704,9218,101804,59562,16967,86612,120570,10762,23969,43849,39962,166523,272460,8995,30373,16246,141683,23812,70593,83230,21943,323413,2864,2355,100471,19429,60541,82374,42741,35603,19425,290629,43248,33804,54209,7864,21420,71753,104092,2325,5902,24070,7201,62951,120053,14462,31545,99914,13564,113310,48018,103024,129706,25209,25865,23609,5945,17372,15442,45351,49273,3849,46257,44296,17650,6,40443,52796,50158,89987,8328,144410,81530,54477,6451,36594,86466,8893,111782,198927,159705,4360,47527,36893,117496,37320,97754,50697,10204,162372,33046,29631,95221,7160,470,118627,17716,97731,245116,237362,49912,10078,31095,22842,98784,60332,39,19235,8973,120765,91934,111045,58972,128887,87208,67602,46022,29104,73470,5539,281467,182667,36708,176270,59432,31026,36521,1009,33426,52275,12801,73675,38019,38883,70624,9854,44370,2164,36272,3412,81053,50116,8892,86510,11513,257297,79768,14274,40531,33581,12427,106809,39327,15343,55454,3699,118114,30358,103756,3575,184159,130664,5908,82458,120759,58923,52390,273629,62193,75485,62962,34707,223853,87062,22720,170728,85085,23937,141138,3062,19956,33198,94634,43295,14025,57761,41689,20778,135679,19997,128402,22478,95668,1172,126390,47383,9006,96799,6628,94152,175749,12095,106394,149169,112174,23774,35527,95733,7587,79649,134394,37602,25349,151895,82727,41687,20559,85846,254651,19160,594,147220,194502,40954,17422,66352,148064,13518,9302,36919,89549,90619,13212,61499,3202,41426,127530,57213,28359,266732,167478,35161,957,34e3,1394,74891,21954,67533,109988,70343,27906,20087,74943,12177,49840,84890,252007,38133,142747,13270,9011,1956,8307,41129,241047,11967,24206,16598,65926,114801,48978,39444,29569,37783,1186,28611,15878,63609,71728,79096,37857,7905,133038,64595,170871,4983,71474,90251,41794,1133,91306,2347,11977,301891,6333,120429,31567,114536,110959,92026,77401,131107,74600,4947,14258,12464,70387,792,46742,49365,18983,55855,53296,26567,62609,186547,111481,9625,56057,154515,28578,317259,22970,130016,87061,200872,1147,156105,94296,61010,135850,23757,304,68146,1321,101784,28699,41754,28834,26821,22763,34257,3578,58871,46251,42855,59715,38961,106435,68266,102227,100604,165318,2e4,32827,79754,41071,488644,81415,27823,114001,14947,99952,20692,48050,23304,55636,16428,9523,58498,257598,22601,34441,124581,390,131974,174602,248497,22702,5303,93016,7999,35701,16482,87643,40024,85872,13254,27598,5591,402916,332853,161899,167074,39216,53652,3842,15164,189795,61422,24281,156829,14929,126509,20650,40168,19467,70654,8316,5943,10112,63120,121775,4962,144422,66650,69732,29954,61514,18947,174426,19368,5279,6294,146465,101384,63421,46353,14826,52334,134686,24672,129081,113192,41436,46150,14514,94104,8424,94187,87766,25900,51925,128539,30970,101548,10598,4499,46545,283177,132295,66488,16337,205974,124416,16473,174653,64458,4604,27366,56141,24652,194739,122988,146663,6230,210929,11416,14833,244818,57866,80769,9608,46573,31829,126854,41657,44969,51626,23726,29384,7856,50007,53704,180935,69829,9976,25004,73613,77676,91878,46340,96749,1491,61906,71825,107515,42399,56168,45795,84470,28713,81906,14060,29478,12282,60918,152243,2069,14131,61859,62748,45514,41973,40017,51530,81012,35281,23059,3091,91182,40986,16887,215039,49110,48902,40927,4664,22408,2186,62064,38288,20072,39739,12785,46679,137755,83190,32893,3331,21910,59337,32913,69540,19401,3027,21782,89291,9283,160441,93965,2532,14763,2928,20169,41863,117119,29296,44387,196228,25734,37480,79084,56135,111008,23529,38463,12553,65044,45442,11457,157661,136804,196290,93950,78976,90672,49250,27127,21222,172616,123647,157050,84415,40826,176737,2697,48083,49157,116229,337088,109380,128213,191771,5116,6808,21572,57279,54128,114903,1829,16332,48255,41551,56053,69223,33279,27772,38971,152878,8821,42333,270100,30247,27352,31219,62315,48036,25515,5676,64424,6842,124022,67108,75224,26671,65710,5485,81101,180131,28906,35401,41128,7420,38557,103577,27651,76992,33390,277265,119976,16075,1722,4016,8160,16260,104435,28594,108521,42619,72215,13679,41467,25078,38551,17674,12470,98147,12094,238313,103012,94925,30978,17555,9120,57009,25113,302349,310035,87798,6671,70215,168771,51466,37355,11995,27263,18145,175109,36992,46153,119925,42862,41147,72904,29988,98024,78321,120886,98773,65406,84549,46294,207054,221276,28987,23494,87283,59624,116795,91279,21644,118012,30256,26515,54289,64637,18879,2366,48426,78760,113223,59165,22607,86697,2006,87700,5586,21426,221804,43982,42892,1639,18263,97022,7861,40350,35831,74589,15387,12584,16272,2350,34840,67193,166860,62,129059,84144,13945,8872,16116,31396,12848,46665,69587,7863,337732,2021,215090,143011,19774,108067,9097,69629,62086,41087,118595,63112,27350,127724,168612,9454,94824,47240,23536,28666,13015,8075,83300,65798,136675,46387,66592,46372,22200,69177,100328,134721,10046,40569,11636,6314,82208,7888,75928,51402,4086,55946,3983,30837,6098,23497,57256,151922,183027,50022,109927,2847,71736,48147,21198,38676,17208,38494,26901,38008,40243,23664,42890,92823,28712,10052,19450,136245,1296,26037,115524,17540,81959,87998,109947,5504,135131,70356,151584,109295,23619,23856,16295,205242,19398,32059,269066,37606,78075,65249,115008,5211,52062,83105,34423,214892,56403,19696,105923,1586,3982,120399,20581,20670,68532,88135,29281,208711,27405,153585,40,137743,9722,8280,31119,19328,72088,60804,21766,40652,52930,36086,14049,16995,33305,97171,70003,20023,20591,134059,31794,14657,45601,41289,83347,154919,205038,18514,16315,34422,97287,94105,23527,12996,13917,114122,23417,13918,46358,21310,7972,38221,68113,107783,16386,47690,56795,8499,18545,16398,691,133344,34814,2959,20119,119395,59372,37680,79653,29760,7411,89122,12450,10343,56156,6721,9880,13905,42800,198469,177097,106548,82488,91876,24609,10706,76004,172043,23144,14890,62366,83898,12968,38955,44234,101992,9519,85215,71444,26084,100199,129339,314155,94570,5416,9451,23094,3635,8260,19505,102704,76958,35234,26525,2551,22853,44177,13568,15372,76497,42940,8996,82568,38266,73994,25359,100653,176590,44214,60988,126450,168403,88749,20773,72958,44464,16442,108241,43912,142840,28715,26132,62091,79180,335,13854,117482,184594,27524,213171,29588,1984,151855,9907,24196,41806,10248,139515,110653,83147,67906,50005,126920,11985,7146,70966,73392,6546,11571,36898,51082,366068,14298,110969,8480,59732,41291,11948,60798,24533,35525,46894,151863,271505,8978,152334,240030,8736,86988,55120,56449,39084,131143,52149,20472,222992,92098,113905,160942,93429,46821,134338,13359,28962,133572,63437,17720,58985,12668,50951,30088,86665,12598,38135,100049,8432,23582,12520,74142,30028,37676,72636,19758,14548,75515,10553,14518,32439,41532,19021,32738,54424,77334,95984,30113,165029,21959,45058,51094,55175,7821,3808,143697,27458,92493,25546,44547,69046,4809,22393,105573,121277,83916,93708,65917,46168,169086,41887,133671,33732,21296,85711,93384,20661,16850,126144,79900,24581,92813,68853,7556,135574,40156,253,27866,123110,108105,8863,6885,37556,40974,5474,42318,79260,53275,55822,124845,72611,23898,88911,72971,16957,97387,53099,8161,12939,7235,19325,37236,46162,6870,103036,9217,58238,52894,25497,87733,44907,108667,102200,20343,72936,85840,55962,34676,253758,69668,96389,111954,41324,167841,8806,158362,32518,41375,120632,73135,96480,21314,4720,259790,11949,5752,116141,21106,124438,7908,114832,63475,65280,49770,31147,141323,43256,220098,15804,42500,34107,104757,75473,1964,53533,71047,83715,42845,43531,77188,2321,57356,37037,106618,27233,20062,28366,40192,37908,345556,45970,11045,55249,98674,32741,77466,25566,44398,173438,69888,65582,3754,6121,34129,9737,95439,194202,164322,2102,4704,62969,40994,31759,21994,26355,77991,29831,64006,30314,111389,59636,131909,58370,93916,82377,99217,28455,53729,81544,46068,1848,132138,3234,103227,50519,863,34429,22675,82830,85513,87414,12210,90393,3294,143767,94310,21761,100363,279561,80941,295490,75238,72247,3049,10936,2278,38484,33144,256940,101817,33856,75506,133568,39527,156016,262504,44050,98168,25682,41968,20269,88567,37803,5755,4089,36260,33454,69130,27457,129154,52277,26140,21610,15320,67142,111206,219460,45685,70880,105780,36743,123247,83438,52208,14821,80935,29659,180718,101388,45817,3374,57612,52005,6448,72882,184891,13124,12704,30703,25929,30979,69399,15380,74068,140816,117172,5753,5065,167362,3697,123452,43307,26054,54528,105177,21154,18458,72597,72966,61322,60789,5516,142428,84303,34917,14578,112502,12928,40447,8085,94588,23066,26606,8666,27561,98346,33422,14547,68915,108761,9066,161082,19796,27553,3452,27494,15534,23906,83614,19,132782,13705,5761,29605,59087,120796,20263,12290,12851,50370,137238,39286,94500,20667,25038,21628,33990,8981,91310,200127,63967,88268,101,286303,114772,71059,52322,129656,47566,12562,74548,64285,49207,24655,42572,28607,237181,77595,38084,16719,839,81694,214054,17721,4580,98901,186568,121462,138040,42832,31802,161998,197148,18980,17665,152652,24115,15160,30620,99343,9889,87020,141936,7344,42231,98797,37730,129285,120827,160915,14420,2535,155e3,34611,4265,102563,57689,91604,187218,17667,1262,39897,49640,200660,37670,19608,188208,32890,127419,68124,51441,81359,123584,58473,55388,45140,15680,85159,96452,16120,30294,94559,66659,44469,59032,36146,40869,33455,63569,7922,42039,12261,115220,18301,60967,146149,29288,13403,221027,9100,52523,139159,19234,40843,206228,37834,178581,17027,40896,45534,29105,2544,91128,79269,96050,47912,285426,27282,9165,151,46166,7045,196118,46867,66112,143251,157335,55563,96710,8207,3738,72403,61089,157979,40354,156883,40650,178616,117436,102312,20179,41865,2965,21966,28441,168958,34136,38297,9787,20997,59659,36744,60366,114471,15570,25271,29375,258002,50843,37278,68479,43715,230035,5024,2970,91666,31444,117750,16847,112904,71260,12363,55600,48521,43886,46675,13532,57721,18316,20619,56356,4628,5387,78044,11,33577,38500,104616,16018,21088,168508,6053,33669,9683,17406,34961,60264,30468,32174,24071,78408,25436,8828,39141,39373,37714,103373,109235,33475,22349,143806,196511,45872,33957,90367,15839,11624,84305,3560,26149,26619,50807,18719,36474,43129,70576,122310,12311,103752,19102,16508,25987,44388,63236,26719,131892,134604,63602,2541,237340,98802,45539,105429,117394,38028,181798,6645,86186,32830,114213,37998,21792,4332,69153,73190,173015,127914,9801,10591,4848,14686,23714,235916,53231,142998,35580,49737,63998,15639,52103,87112,228066,40885,51065,233941,23415,4046,91775,53188,141652,6728,119152,32193,121081,48378,63940,79154,100136,68457,56982,4544,133512,181089,126816,52905,78546,37550,11149,126477,134049,124361,126465,7580,1593,86300,14758,63501,80748,18813,163792,57314,22986,6141,11406,3216,32494,110332,28452,31337,162136,21024,26738,6541,7188,22430,92369,103083,128099,204997,51873,60846,69568,20383,4773,49,48196,29395,14748,9756,43703,50109,163732,15481,130284,88137,10991,1355,101243,3715,54949,43840,19376,118637,43614,14319,50237,47535,50675,13743,107035,43658,76751,27486,7709,13643,96042,10222,21204,124418,113169,73114,71157,117166,121290,230718,203167,36470,64894,418644,66714,116018,28732,16706,52824,36929,51413,6674,128215,137726,19964,279748,26329,87214,10512,23058,116855,58012,13318,45273,76517,33779,74266,295831,1336,47046,106101,86306,13,79499,18377,2743,123188,92968,51882,5535,6799,86683,1562,88773,138107,96667,11031,21829,4831,30926,76005,35253,174880,61764,219165,120938,41317,25064,15262,31153,216734,168694,126329,3169,7494,80595,54300,16839,27391,60115,17288,42847,68970,16373,61298,8751,32529,67945,20542,80974,71952,139421,42317,33942,21817,38951,12239,36867,67209,48716,1479,35514,105236,52386,100232,16485,31451,46256,39894,26474,60702,20094,10295,77775,1748,117588,48134,56877,51915,11560,224153,5391,3701,26137,58941,48346,80382,15181,131665,3882,7358,42702,14975,108713,6343,80451,72290,31403,4314,32244,5e3,27804,42280,29989,44929,55248,6075,42803,20470,26235,53651,44765,109461,43821,69384,24056,170949,136104,115740,191734,36140,40118,138988,7264,71698,175507,12620,155241,7468,28034,185481,2642,23421,203908,130353,51032,89780,18732,56166,21485,47669,1788,12936,94197,57925,34030,152347,132787,4308,106427,53840,90424,21211,36958,111950,33872,29233,54359,51008,62593,42396,7251,123282,198715,53630,44936,14249,77826,258614,15356,45209,51025,80569,69139,10507,10673,56339,455,43204,39237,14263,157915,72576,100737,58151,22173,51683,197114,28812,140291,15706,153760,89962,50348,37718,108861,24876,43275,55149,227847,109122,82066,68840,83530,39884,49621,18581,228664,30516,54952,16372,8186,29493,15216,129920,30573,45435,36226,109626,22456,7678,96695,109013,34730,57022,66855,100447,13026,32965,6936,272617,48390,49584,1987,61711,3050,110021,8227,8769,96593,27031,196087,22068,19421,11454,4631,39978,242671,88040,68827,46976,54523,87226,99004,37956,109647,20830,47541,918,286374,22872,110265,74675,4723,101851,17953,216583,119919,65609,147605,1909,30855,55924,110242,97095,129683,9370,58520,14221,15934,60347,31312,158125,25989,55743,38724,14896,158699,35678,329975,16243,72941,112881,642,11436,38291,112105,3155,67914,72572,24476,34497,104985,29314,84672,75937,22802,6429,75538,6207,163504,199842,23456,73843,79289,235636,7573,6120,124975,52978,95704,17249,175679,9569,104975,51429,329147,13133,168135,117746,78571,8080,58294,3218,58849,10361,62017,910,33143,555,31814,68961,145868,122784,15453,319671,26077,236592,74939,14938,125306,95117,36290,29555,75543,1445,3405,34700,143718,17140,139460,1649,866,29186,90440,66673,82069,69865,13592,72268,105954,55710,1985,9655,105536,52207,38806,76800,9513,81900,12656,153087,6755,43141,21061,6941,16813,142735,31152,210168,41188,100125,29783,27130,37384,93862,71525,35398,12398,26982,303589,1780,9910,34746,13281,73242,165400,2032,112057,3135,21087,114080,35562,56689,79328,57005,56383,19556,8454,47363,3132,165307,54577,13611,2516,8765,81373,65366,57451,35967,256887,71960,42183,121458,34333,89472,15018,13333,75535,131910,13497,70453,25831,37776,56546,17350,31676,97161,28621,117253,29257,16050,488,22265,48754,128425,182002,13340,90943,70744,33837,44265,92131,45994,1482,39869,27394,57718,13956,441,5487,70995,55529,3742,61617,118889,92005,135025,86222,66571,254704,23581,37646,38231,4846,33309,92236,6134,18657,16543,2124,77619,45274,17731,39418,106157,55973,13291,9746,65544,32616,157637,33791,108671,24882,283005,65971,70349,6146,21408,15989,88659,365,101360,128119,22909,2662,63887,10345,23354,71146,52312,30052,45711,99568,83873,506963,2554,13515,5338,289237,32776,59272,233779,82419,26344,71757,23759,15290,14476,154914,186949,43876,60677,44353,34531,1802,77130,15863,177320,67156,10629,89062,38069,81953,13367,22945,156465,63862,319916,37995,91004,119548,320016,44035,19353,17852,114239,24818,59852,114160,51645,12833,68160,65930,36636,297383,14891,2853,73690,26169,1338,1151,23088,98141,1072,29833,31924,58527,29823,49223,13440,94333,1950,42392,24753,253517,28901,4590,1846,35647,81407,166926,16913,15179,313445,157404,11324,72420,73038,62980,67242,98614,84807,1288,18715,35345,162348,49709,92384,35688,240257,105106,97424,336014,37162,31857,24409,137966,138934,29778,20791,88e3,16111,4596,20363,25650,58013,116702,57820,5668,41253,31169,251377,5377,102951,209713,150400,82980,16457,95615,28341,34104,96056,14290,87446,35563,19541,9842,4673,34998,56402,37494,140987,144287,67217,38738,69684,90560,41638,6371,67553,130177,94381,18943,22304,5556,89674,1540,104069,26091,29481,79348,127520,1738,37456,64314,202862,31135,80815,1319,24743,103040,151579,2886,45671,10020,13937,23292,25393,58266,13683,1161,48094,156120,132537,22049,1682,76886,19699,10385,1058,254528,134545,55004,82397,41659,67020,195747,38970,40798,29816,202866,95435,5414,222341,122682,143053,294222,141235,18722,36979,52903,427578,91648,78453,23736,48868,95317,62318,53265,129557,41511,51444,17062,233342,157429,4110,25190,23077,32496,234890,104393,87871,119604,172405,31296,16213,41034,147157,76,18728,337132,33035,74049,16184,117337,1430,50125,9469,13116,96853,186079,37913,79652,76574,12079,19680,20090,74134,22992,2798,111900,29035,78700,171356,103866,25861,76971,178328,160559,131679,44747,13216,89528,50885,79922,50049,78775,61642,115486,72690,15613,40111,8974,71904,99272,76547,36995,124644,58876,62375,56306,55455,10949,9333,20277,7504,41873,102574,28557,29052,18656,226780,29795,41036,52032,84065,51914,266546,6019,73011,15118,19899,148821,109409,68842,30391,102037,158644,78906,188755,20593,56915,26262,8659,76359,39099,42863,59469,24343,170097,72940,16,31679,33449,44831,104298,168570,329243,12874,112943,10737,81733,10145,53865,30398,84862,90377,76203,66,37651,15508,138226,36312,36084,66979,68857,69503,23486,27392,139953,43251,74333,109079,14125,42935,117495,77115,107625,70706,2266,28248,119795,6372,79378,83196,173133,134246,42289,4799,4398,34848,30176,134351,50273,66466,87051,132965,48808,31554,48150,75235,54390,30193,11461,79397,16466,17661,7427,28480,122086,37993,13959,83801,31835,33998,164771,60458,67035,180999,5256,7006,50971,114665,163017,23336,48859,250788,4340,9613,7508,81510,27383,68480,46427,15448,81334,97899,66477,71,139832,7506,73021,97330,136340,46842,84615,21471,141895,32003,39985,62480,13666,12717,83076,96305,46422,172149,46779,38567,66589,155205,201569,190175,4693,89306,53336,145244,26386,78125,36443,60742,64991,315,60865,22001,34462,3145,168164,7227,45365,52278,143810,15529,219120,21490,51393,22637,26823,15222,25548,102002,40489,96757,169307,3643,119915,68728,32896,113685,70503,18482,24485,209111,5537,41079,38424,97942,125499,59570,21837,20492,31623,9701,29087,11628,19585,9e3,275813,117347,75561,1e4,51674,25141,80217,10734,6714,202302,17083,85695,64883,71665,13202,80751,46169,222686,49498,67783,187369,37577,13134,27844,55186,70471,20101,307605,76192,4390,46641,16931,12852,7169,5321,137488,12018,197662,2595,12702,62134,52236,43904,2706,31067,311914,70629,280345,118303,59493,9152,296895,16542,4127,190174,11204,12125,33624,43704,629,10579,161171,436098,110011,4928,20741,120332,41283,26291,13782,65933,147206,43854,143015,24103,185039,7091,135245,92175,293076,10946,19925,19967,110847,253716,42758,95038,69599,109062,27063,120815,57458,39283,10218,39354,7499,17261,8263,7839,189220,113012,110601,48485,156100,258512,41840,167472,67791,47764,14675,53087,6354,125126,12700,41054,45096,32646,70686,11736,1417,55892,49536,45376,6942,80279,12070,89681,183322,201623,35389,58180,430,149872,18459,444892,19950,3192,82244,305001,83495,385,1258,82408,33652,1208,738,12995,21781,48750,13634,68571,68149,5376,30653,64669,33991,58738,87302,80018,88747,22335,35680,106650,40779,5427,30033,3552,51590,82416,25102,25208,3949,47811,74006,93322,124119,32435,357395,49716,13835,143086,4083,79989,41030,38930,21275,146867,20485,94128,11151,10472,53127,59975,30973,116792,75634,156037,15565,112131,58155,37977,33863,74566,194491,38224,22622,88291,51351,62485,19885,25695,49858,7698,124574,37501,200,50405,11713,287549,195058,71027,14971,39645,70772,16462,27850,51933,19178,21559,27321,3458,43074,136153,7003,195280,149565,34131,52040,1210,6796,107506,11880,278327,23579,162069,86206,10271,126827,63703,27398,13524,13255,3101,29045,7198,55423,215029,1232,15504,168293,40407,14532,80445,19258,4178,203513,68565,70756,3774,260344,5233,163405,9187,46762,107090,26759,80019,11197,524211,114351,17880,91874,35307,46472,97926,12980,2932,75,67579,57528,43925,163283,2600,68602,18775,154886,18405,19085,144161,117918,8351,60026,40557,1844,47924,56160,48862,13071,86638,3171,163462,48967,70820,50635,8327,96197,92206,86504,132,17742,86453,80271,35704,19660,29610,70884,187507,70566,42241,55397,157816,116938,119200,208499,318827,57917,3198,33626,18608,33628,15466,58518,23680,48749,67813,203805,73110,32434,57863,126161,76577,74704,35454,272624,56452,33611,4779,612,20538,20813,99518,12664,37685,51378,4649,48965,52644,7250,104641,90980,25121,20782,144269,136467,25473,109758,33730,23835,64889,3994,38073,175725,263011,73296,65864,7458,91699,99785,6838,11244,30971,22298,109456,24378,14229,234839,193298,16188,31737,116657,154007,1122,41881,49733,5623,164859,73807,45069,45741,8551,143581,9315,30846,98697,126198,189421,182578,54489,24321,45654,25573,17216,24178,85193,157224,15399,12351,94329,1543,110920,86691,20245,58575,21729,399974,64597,138703,15574,33184,95550,146140,2393,2271,17693,44971,124299,48652,114592,49356,244271,56021,82860,18275,26970,11660,198792,59064,6815,87808,78781,20300,104409,662,71033,13122,35626,44961,91041,11848,14525,52226,42701,24453,111637,27557,12927,11973,27925,2467,122935,9797,47887,24976,6515,86843,117e3,127598,39829,2919,138824,43874,110700,25530,13248,168387,43479,49210,1692,1259,64697,1130,20465,27466,19345,161220,120389,31515,56190,76788,22165,29616,5113,75373,17538,30755,22978,85604,112134,45015,68154,34926,7355,114461,64044,36014,70882,20391,30584,17777,8803,13476,33610,17255,352133,26102,24765,51533,55753,68095,21188,11676,21823,21179,271876,92226,107529,94889,47154,51845,43801,5311,105238,119859,268539,2435,55644,21525,37454,162919,79553,5936,143734,13110,3235,18507,21886,124645,8664,28050,67683,58054,52119,1140,3546,35570,180315,31418,49700,27671,84075,14857,30098,18009,21868,34207,42097,9293,74669,47859,50876,49991,60692,10750,72343,7644,83181,36382,115481,14074,68458,32079,110696,30195,6157,106909,22414,134401,11947,59426,71942,7548,142461,87757,25760,55425,47637,38393,117046,33833,33451,110042,21631,15553,31475,15965,52160,30794,68222,97104,44038,134558,22658,33757,7286,148203,73358,35344,42812,2789,141364,97993,325497,95230,62242,53979,114390,187,3414,33651,72017,42725,163469,45407,53268,119350,24322,41884,61527,104655,61374,82515,10912,127557,29939,173089,44405,77727,37217,7177,19015,73371,191300,58371,10601,4287,145829,35365,250779,11615,1861,47543,67388,153424,85556,51927,90651,19359,9654,35587,131677,91637,90460,10670,58134,145964,112159,23544,102870,17599,26304,29306,17111,10277,45092,84233,79517,44634,85065,39976,55740,13294,40340,76076,274931,24696,94204,62097,19765,27791,72755,9007,11276,152590,52634,8668,11381,87423,17757,28119,349,237,60867,78281,91158,140967,248103,120790,33051,142673,247599,19835,85755,184690,18251,143020,164693,4893,85858,54968,19631,20889,110604,18670,132107,13187,1827,64959,187020,16093,2357,20649,24949,120227,112146,34469,22861,29222,20839,42570,12164,72533,58393,33001,67590,100285,77190,136570,1891,29881,176839,87796,169800,46634,42613,120044,544671,35573,33409,1106,23688,8382,40809,58700,21997,89694,32633,63951,5925,91071,83353,127623,193205,8076,91094,12805,5777,59517,20986,83057,34629,28371,28946,40212,16089,140378,2115,31773,3807,48370,178737,49850,322390,73229,7228,7361,34085,72856,162851,54336,3090,10705,24203,347524,3071,11926,15437,101314,38218,37603,25070,23751,18738,10614,30446,19569,34876,34037,143092,48791,17269,13448,181374,29174,22705,11280,8389,49369,33246,4494,15136,20467,189070,24240,21646,7465,86521,109202,104631,75842,73950,26135,39426,38281,58562,87792,10755,623,98319,19283,178647,112457,28075,23224,51865,60210,1572,16872,3984,28849,17199,19586,53164,51003,578756,51498,45446,94720,3831,11364,15400,6426,42807,26765,136732,90047,18712,26660,98061,85560,99889,37338,10153,43761,188463,24546,9883,3579,47095,149286,1544,85105,109163,22065,84228,34607,9802,24403,6597,90410,107034,41249,2151,118528,32433,167290,143308,7224,62473,32534,855,42907,31366,15790,130823,111163,23740,103312,73946,18168,41718,10722,74804,6960,77903,6730,4836,161135,460161,25329,3966,191298,108138,97692,28539,5247,14951,16072,148552,100584,72497,44704,114746,127552,2033,34815,27555,171568,13044,57905,30463,20121,12578,29578,147967,91173,69059,75171,15963,12636,216233,12189,78098,54615,17457,34910,14101,20199,38879,33868,12975,63730,19371,122500,36320,98105,44709,16796,8252,2396,7493,206206,58138,40387,10906,28152,8026,14438,11987,27633,84118,125012,155087,126314,20627,4765,60466,170206,93400,33235,15747,658,8854,12865,30917,688,103792,45299,136720,88015,54331,37728,2913,65993,80667,82098,15958,29994,167188,77872,103575,90590,244435,114037,77901,91272,19428,59253,30651,149287,11214,19675,21663,134751,84839,24838,61313,45844,7512,398016,64823,127529,3133,102561,20453,115896,17344,11446,222828,193,155155,17069,58324,4480,25422,57508,105295,23785,108564,178277,20918,69131,161769,65836,54488,201783,143191,99941,18413,13719,28184,26114,27888,4392,129687,2585,3092,113567,150793,271882,1752,282,15224,136866,70660,67393,235271,50126,30236,5205,12951,11027,106830,33950,26602,155648,159630,116983,47316,118367,77639,2468,20768,14585,66833,4411,197715,8910,308244,4325,25115,123015,105047,174692,661,335383,65622,43950,89084,40434,55523,40872,29093,41016,46235,18304,57207,53021,31025,145373,39883,14439,64867,33271,92303,87098,165627,249075,23882,176860,43613,45825,64126,201543,92448,76394,85896,121888,56679,6043,5600,2358,43170,38186,77345,9286,9851,24013,78703,5739,81394,113639,182825,22666,9031,22509,9570,54270,33648,34339,13164,37884,37579,110690,71903,169381,124661,154669,17643,33984,69534,35747,99083,93859,18986,20872,30989,16124,4894,119685,2601,89364,45420,102352,14665,72207,77064,26614,22336,51639,228,56231,815,76366,85e3,4970,44952,99029,11414,154634,81988,65812,71056,307722,32240,2198,67495,76459,289714,12147,34660,56034,21936,174891,33766,38677,42238,194289,61206,40811,81549,6986,11184,50356,28762,30252,169833,26033,37387,88822,7300,54514,41857,21284,89562,16952,95611,11445,78324,76361,17313,288337,35719,74225,17706,160821,46786,195486,98124,33034,230403,46596,54312,100869,187581,73087,76045,43852,51201,111095,53695,25761,171167,1281,12511,52882,77119,180240,70944,1144,132888,99788,35517,103809,160506,37582,28159,1924,90499,9703,89568,84458,91412,201459,33796,86079,85006,49619,62157,43411,14396,37110,43017,13542,75363,34855,3223,139276,79591,32317,66073,18141,8975,111874,25536,34978,2876,88258,8764,41298,4941,10664,6849,7276,16023,42365,44065,26481,39848,38615,3468,173800,385332,27782,6783,33210,23625,31896,1982,17951,11857,55263,92496,142652,13696,62877,77106,33616,34409,3165,42139,33677,25816,8589,110980,2210,30731,11059,25363,19941,193105,164524,15578,98568,36064,29325,13286,2486,12135,218797,3219,192414,393107,34699,89750,80136,7124,7367,13443,12058,69118,234202,17915,235883,20792,100851,31528,50963,3680,2664,124375,249638,8483,257047,41605,29572,29737,139767,51651,27221,6765,55803,23145,47034,40480,52532,73864,6124,42229,93325,34530,72107,238280,199709,3744,63346,16597,66408,22715,97620,5271,1410,22445,158513,169512,31624,107883,299699,50048,63128,87490,40388,185087,19754,75917,23235,138863,325617,37883,37176,65115,41352,25967,224244,118096,25013,205505,198386,69311,49810,112803,121323,27224,31934,41103,67992,90172,18343,182947,23827,233481,44894,9617,63170,38593,111112,18189,17838,11885,38329,7604,106622,67890,139944,6251,158590,31160,39376,75979,26807,59454,75828,12609,5345,62668,13410,6377,23489,15227,50336,23847,91891,46989,219110,5016,55474,182,169668,41243,74834,37258,81806,25477,37981,32374,29946,8558,13058,27278,55639,110342,5977,7496,7827,224669,72552,8581,18359,28445,34706,45938,138729,19479,26828,4897,199990,7309,145172,26292,10057,2903,19904,3127,7625,8343,21367,5265,8513,8299,34043,7029,6384,111718,960,4780,109654,50272,77092,23412,109010,40059,91381,138810,25275,30422,4733,94279,5863,2603,47446,7973,33416,25502,7680,106096,17414,15137,41697,38583,90939,13115,5170,1287,11657,96186,16960,66479,61042,54454,14741,104736,18646,28260,46101,248526,78951,52606,13656,58251,8482,69402,473,134516,4405,18865,51842,100181,26348,80528,37433,55053,30045,136822,11103,22444,11841,2990,11551,36343,57239,17946,121951,165051,7702,15912,13191,61072,26908,5979,97536,32603,54072,112162,165932,27730,13979,91093,50397,48878,44400,29260,51628,17193,15977,23879,129028,208297,58084,29487,9069,58477,73687,7734,44885,223955,46203,40661,6590,253832,62105,27627,59195,37610,112,160041,47045,121276,9957,89691,32940,13845,859,21447,225472,109616,5172,115309,90345,174021,7312,26518,21833,129351,285466,54661,13303,119359,7473,179961,29407,61141,37403,357673,96615,35776,100714,58390,141951,44340,133721,168376,5198,37474,20461,28860,6028,3028,13118,40061,18395,65200,55843,156099,7181,326625,72811,24544,3861,106507,15886,80513,14966,54808,143914,131660,156358,72569,331,115499,167182,181285,3231,35925,36529,34503,18991,46621,55253,10258,55965,813,25942,89419,48957,177707,173153,46642,4811,91950,30959,57953,55844,6837,27261,33866,171253,83769,50691,10414,5492,45302,150176,127189,25506,98266,162201,46921,47463,25896,38467,46851,18084,3144,48462,72055,57402,19107,80602,38235,64308,11648,42163,101559,80727,54159,118482,153426,60818,128542,168,55184,5394,2574,108756,27110,245250,38029,26011,2085,2189,19738,17166,17187,129874,85131,54149,86936,135307,122042,456538,40725,3718,195077,22512,53925,52733,40639,91374,71487,56427,22962,13816,20316,44904,29393,90358,36347,18997,57794,131615,11502,90717,6758,18132,32540,226257,10712,226707,53602,99511,19231,1824,19111,49236,5491,28139,42348,17387,13741,26860,32136,143030,11826,42253,125128,48221,24174,93877,39491,28952,24227,77351,64398,63400,162461,65575,4012,37187,20132,8980,42178,52118,64518,80574,106352,75873,68981,22020,35576,63767,70957,27948,62633,6166,497,40422,23112,21321,14642,91324,90681,29471,53428,76376,17160,5165,158982,13528,21170,4421,11861,39281,97681,28741,5107,91685,14451,28300,33929,82215,202223,39186,1108,122541,3164,84493,54892,144066,56213,6189,105740,1983,53506,28897,52102,193851,154542,51373,38315,17283,44071,149080,48489,26320,80807,30857,143431,2739,197396,39482,10242,194978,39273,69728,108587,4790,80763,38090,13241,26845,225930,45466,7671,42627,235691,55444,50456,61300,2137,111458,41994,65815,20573,171738,111385,174612,46292,37295,150555,55133,45791,85658,132663,4200,13863,247261,33106,191130,68764,69933,342026,79771,57623,102440,82923,158321,74104,66775,232997,52280,5348,14740,63482,166796,21974,61836,39710,221620,16509,20155,122691,62461,15494,286059,74491,11278,173634,24814,36352,4067,124651,6219,20384,88152,106522,11199,27155,83409,59291,62619,7943,31717,82823,35872,25490,121367,16822,5527,43809,13522,275353,25968,13784,47325,66250,55180,23370,37945,34951,32887,154415,10406,26787,7574,51785,174348,5257,63098,12141,249321,18164,175374,159625,154101,6386,36436,10514,64912,129913,42505,64489,29938,34866,92162,115463,51775,138015,32129,31108,17220,19470,60959,82863,15776,2068,11894,44229,166138,59776,2329,138779,78890,11618,39616,3684,84425,73187,5203,51002,54121,48875,276201,108655,42861,116287,106861,140810,16368,27367,102464,4845,24572,65525,25498,65011,291647,3490,34570,87715,10197,173917,12769,8636,32073,8577,38657,12073,22651,98887,35637,26878,11677,114271,87008,92497,97509,14575,3470,58305,26952,16841,8381,10555,35787,2648,41602,77764,18424,35932,45851,49096,41910,7650,71685,129774,71614,52658,36248,19880,94977,39129,145464,57624,72318,30245,113156,32799,41594,8407,15488,66070,70024,38697,26127,49773,275419,9728,21901,111141,37702,136166,21682,76474,60199,7085,79133,215800,7335,50628,141287,17217,39107,44612,205482,35296,61315,75127,44962,2175,18271,83503,115273,114695,18394,122374,164929,11745,33768,52043,39554,3954,87884,6547,14314,26459,104277,94471,129578,91248,123724,20555,12338,148214,7277,42970,32692,38110,56288,19752,90889,130277,71981,95103,10470,106893,189803,47422,67706,38984,49320,67270,32034,67179,3352,105490,2902,57799,6798,57302,88662,2520,14240,632,64114,111171,8954,67696,178121,64478,69220,98726,78181,52577,94433,48703,92812,106819,57372,970,11507,56315,28620,13927,5879,50384,68863,811,54518,38111,193727,4518,82041,45997,85575,141392,39464,38164,42309,34939,27631,115200,41667,5852,85451,45254,67689,36959,69349,25516,42081,284,1617,24389,22543,92428,55862,39478,44824,158788,112673,24864,12719,95525,421417,153017,28540,12854,40525,3447,114236,119912,41795,7482,101553,14084,90262,98146,27638,309738,63986,26332,27296,73457,26543,61153,4300,19919,75492,157204,5353,16531,61956,47675,4663,113612,136374,222705,19379,3505,93057,31,94098,199552,229445,75586,3758,9803,54043,51022,95888,418251,47815,8325,95144,54354,55865,238684,80344,14773,42431,26078,87320,4173,49174,59477,28447,53727,59450,37425,259518,260604,13221,59388,12718,19200,54560,211,71391,111794,43082,14317,152731,24043,16563,55318,37063,33985,12107,8451,24132,3287,51633,24662,31911,94583,27566,47306,104896,123698,17450,4892,15672,1239,135524,82674,103782,128381,195863,42040,1521,88669,5368,61959,4945,14280,54416,134709,72541,71947,141565,31806,23717,13486,49292,28755,122632,37972,227115,71973,15619,45930,73185,19728,87175,41028,113786,71313,206120,15801,80915,37045,29428,213276,42087,78562,189780,69074,397153,114057,61416,106834,67699,184163,28350,15478,41280,87632,44457,50713,90885,28916,972,63102,58749,38921,1175,182790,133419,33965,47233,11089,17346,24241,198738,99658,3632,15062,95789,46049,55098,80139,41907,66419,62949,77436,21953,25574,115070,31261,97034,86959,15541,120250,59341,34977,37912,95547,22864,57455,27137,114631,53713,28129,16277,219371,16873,48501,25135,20596,32971,2044,70095,43252,20693,70672,5134,139706,20954,18793,5240,51062,31336,1055,9964,20812,21477,94661,40609,21902,16169,19574,74742,44447,38370,72501,159022,27749,16412,12007,11867,64559,9019,60758,6521,41890,3841,1011,208127,23460,24599,115489,30488,57116,21938,126419,279459,210650,17085,29349,117824,4642,6484,24363,70018,30366,81198,51053,57403,18554,76413,87591,130889,12473,5849,12616,44081,17726,72514,20574,39804,77427,12320,153366,63071,43010,65247,12837,49822,119883,276175,48298,17891,55934,37234,15426,536,214834,59796,107143,73492,82284,52642,23860,59584,109240,16312,295305,2881,141523,57349,24996,10169,27023,198507,100921,101928,19612,94148,193262,51722,22594,46134,59320,233123,23163,18958,48350,10418,11573,125552,158579,54776,71219,1747,9488,45024,123446,18725,52331,24040,29879,151873,17176,22311,178292,14901,31482,26423,45056,5490,10022,15757,97024,68287,99243,207125,128979,29470,1325,74812,32791,3689,45845,118509,34820,64794,70223,8344,91384,40814,104345,56330,22095,26018,85129,77063,49913,25692,80443,48676,207462,54450,117644,131820,12098,2703,16863,18276,60530,88278,81796,11213,17129,124886,4875,8932,23106,173087,7396,71377,23220,174e3,24872,76210,196270,24159,83016,95481,92620,179477,142594,74941,14268,24276,115069,15141,25430,46004,119419,64735,171433,201876,166502,13507,2133,209202,8831,250649,58555,445,79606,10547,18957,52876,93525,47741,109879,31948,69285,97122,68070,30206,36316,27294,147592,157610,357846,4949,3838,39180,165668,28395,105564,18439,113339,26143,6254,44124,41027,149595,57880,50469,74956,105797,64751,5774,62996,55064,12300,96278,74378,41632,28378,222758,215455,14905,29733,200216,83974,14267,197651,50290,108173,83523,72906,45486,17894,248112,6668,20435,12354,69859,105672,46986,26269,26119,21735,46276,81332,161990,24229,140133,80736,85948,28342,142326,114859,5246,12288,15569,321372,83346,67317,13363,11347,62559,87384,47522,66304,51125,158071,92583,215430,30981,130176,2182,17025,35860,41627,7135,192109,213,29142,16853,130975,2389,127400,22998,131988,9785,68168,30272,21382,58736,6997,4952,39834,32713,104019,63263,581,147846,14035,35623,7875,177579,12052,39096,112656,33118,37277,53789,60622,157938,185910,44864,30132,308910,81836,20053,20029,111,252367,110392,9585,162293,4213,124213,140484,19392,33595,4630,45380,23884,137937,16087,21464,32146,130095,28221,147475,40847,37757,127787,95424,105555,146520,25839,9169,5255,99477,77481,245575,97240,7618,44693,52011,5049,29327,13464,195851,8615,52596,113146,3124,234482,38343,6983,249017,62799,87690,27069,6892,7757,568,55717,67952,55524,29469,50102,116514,63808,119487,4760,11374,79868,17622,7107,13396,118343,202733,26186,94968,133457,113546,66507,11011,141426,116015,59145,7451,3054,4656,36032,68955,55309,29753,104182,23389,82478,44486,71328,86912,16831,60480,29425,22716,53199,42308,64317,88346,22804,101981,50781,6916,20926,87069,47465,22345,6416,67964,94298,12161,198305,25527,69706,1141,24861,18820,74899,101908,136290,36246,22754,43947,149419,77020,120756,58182,76675,53183,25108,141513,334998,81890,93077,30790,76148,97326,56834,21494,3126,13675,73286,10835,21018,39793,39928,69833,40373,1638,16218,27262,46999,35926,41699,14586,109707,10621,176763,65754,4781,40629,7555,38881,34586,20380,70819,99768,116580,11114,50083,71750,38765,26763,26895,31093,26106,99244,23315,195234,103007,80697,26014,69431,24523,14850,16773,129449,83866,113767,123079,183143,1343,35751,41712,7818,21857,75865,5719,13588,11322,41995,31516,21912,16746,20696,90427,100022,97349,50603,158540,42138,33822,20310,85051,198477,100819,31299,183128,37925,83454,48059,40864,109756,117963,246050,27505,125055,6202,12888,55392,82049,6852,20486,9058,55998,15942,21876,45224,30137,11302,33518,96857,5033,17578,243172,30901,1136,98132,67204,136622,53361,185908,164211,96557,1199,46191,6810,56304,16854,41481,31638,120061,167078,70451,36778,11501,72634,53232,33096,151448,12676,107140,3255,5773,230373,199725,58707,89743,159601,29117,51821,7769,175079,179962,14736,86069,12406,35599,12585,2935,122863,21218,92679,18471,74106,23743,2268,41628,25025,251009,101461,10114,69681,874,844,33660,84276,20996,3116,110170,3629,33273,374091,49479,7043,8134,1695,26745,1439,1061,171360,92846,117704,95171,30559,33221,6627,172996,24530,26731,509,15456,63235,18795,30005,53873,51891,87076,62196,32574,96562,8550,98665,117502,67674,2100,12527,40235,66878,29972,78874,26467,41590,120289,181416,78604,54157,3077,84697,134742,91234,72490,15005,76558,55084,33784,162703,6048,46791,2630,127835,19594,122511,208722,193416,9502,8107,50861,143793,44636,51976,63483,12325,10412,23264,79029,29050,159857,149078,6419,154772,107400,107603,39467,13028,84919,63134,14302,158425,87104,88768,45286,22612,34903,13577,64207,6221,59147,11798,9686,121962,135449,86848,67513,17167,43511,68844,44170,71147,44786,64366,1050,10887,190612,21896,77246,77296,70814,135434,59266,18452,133,55042,17055,1640,13034,42496,53801,5748,52414,66381,7150,144739,6440,74993,11111,2539,50363,23303,42432,27028,66935,13005,4278,7311,46716,3338,94579,8115,26937,50962,362117,30782,3762,141892,36175,73088,50180,37005,42902,253122,113704,91922,41933,43732,105477,3520,39002,3843,42324,258344,98489,29853,56586,11607,22913,43149,12984,35738,74161,6039,61803,269,84773,58569,22403,44259,57036,31666,126796,12483,17556,38761,298166,122446,162288,3950,44945,1370,74485,97973,26528,36641,178760,75233,37361,147382,93867,98504,161890,33435,73635,18503,26688,55952,128860,76113,36649,15218,50362,50874,136633,104263,261,187132,5194,41473,67455,26709,46683,61196,80001,415,103032,77008,46080,63776,21671,45605,35662,12969,32724,41546,4368,25676,78170,10132,25247,21941,10589,88199,19230,36489,23652,71018,74393,15514,33003,61628,22588,82874,278,656,1822,7365,51787,44718,27682,7842,148545,22113,235324,53467,25889,37986,13798,8780,14653,79341,85998,58114,38940,70133,13194,10663,186560,72895,235067,15731,34281,180158,23514,60239,132955,17621,71669,107863,209492,4929,147632,35364,73172,45463,23191,35596,21865,59198,134748,84141,128176,15559,214683,7375,153174,69569,105101,54279,191537,11893,1518,28125,88836,27303,25489,46180,96736,5887,247114,5137,287773,60728,7380,108022,182042,30064,54842,72963,28745,42623,26922,16894,8922,6003,3971,130326,30795,15767,26361,58938,27324,20292,20844,29628,16534,159213,68642,15346,219023,63240,170517,8331,15673,3213,77339,151668,65928,33858,123255,106689,30575,26185,8963,12688,15792,24737,77818,92544,7997,20221,150998,55663,1268,41573,48466,14085,128978,65797,36806,28519,69465,20974,2732,41172,202748,116152,23261,39001,2280,32931,11741,66879,195696,31356,236162,62810,25653,37741,18243,31739,43296,15723,126216,75117,27208,74878,28690,17377,22841,46221,50546,479,9735,5075,16385,17152,9080,33925,92760,24705,35011,52286,197383,118668,24200,32927,246558,83210,49673,39479,201295,11697,23650,58791,88255,2117,58010,136860,67588,5287,34543,6591,71687,95613,48832,64315,176076,18307,105134,12037,172653,140943,36060,3370,169058,87901,2424,35703,33906,68007,83459,86267,63747,78729,15829,39429,24835,60607,1063,942,157621,15510,142744,36875,43338,26941,6283,201368,30050,1294,14144,28874,46152,163373,100423,33959,132741,10200,30369,5793,2770,40793,66426,145294,51371,9412,47667,53918,94835,47111,93658,291281,6614,6818,28373,98899,15112,55868,85946,13126,11749,15201,6184,52292,56936,9994,67564,15398,1250,16480,28355,50093,19027,134101,912,36390,399017,67061,175796,31206,58036,37028,36592,15922,100215,155543,7324,4771,23388,157277,186074,20469,55815,15438,73729,36924,308768,3933,6366,20641,124152,60772,12026,70045,94803,6290,19858,1915,9521,22497,33912,49717,64186,47263,9814,19866,8971,350258,314,10683,28,6135,16425,48283,30427,224788,96210,41227,62163,9112,237935,8329,7616,14660,20925,152205,103838,6480,53909,29003,35079,21715,38510,2096,29203,37569,47676,30859,131235,66331,56052,67144,7743,65717,38496,26265,17389,72433,5984,42527,10882,140995,248537,4e3,37420,43361,72768,79706,61460,44601,88348,120824,228512,92578,101207,2506,85363,72057,112263,74889,41581,61184,59336,124955,131077,388,24445,445574,62822,10339,54594,139384,119647,26960,115230,377822,10130,53380,25507,4582,54445,4045,113722,79437,26925,51571,10619,37744,19968,21756,62099,38841,29016,19474,28660,169417,24446,77906,53823,54729,74028,4315,3444,12379,24176,2062,118391,71991,61448,24221,58190,114666,67185,84137,1932,38777,9254,63804,23453,23502,8563,53758,17591,83661,119129,33378,156031,31341,9771,4905,245,10643,99184,71196,20709,250,37716,19394,203310,82339,39514,27829,5347,68674,10532,102550,189900,41082,221512,57643,21885,60429,258753,28243,26729,38284,218630,266776,74708,10059,55980,59074,26095,4002,23394,34908,56295,38826,32141,56657,44390,129016,61924,77979,141893,16627,66749,173128,78650,84113,32411,36734,83212,22287,3741,109048,15156,33529,36475,217436,48727,82121,26678,67771,256285,2700,77010,79442,5038,3136,44946,56358,46209,4267,91203,9096,96644,19035,128749,10636,6976,205036,116953,56466,63959,18341,20476,42517,7840,100552,49625,4375,77579,19118,53116,3012,35805,64719,13735,124583,30702,85109,102335,116046,63278,101038,29376,131644,18364,4281,51946,89017,31230,164451,83407,14320,34509,23271,67892,72729,37652,77746,59212,14913,6854,43898,34685,72734,50838,3371,21083,24922,49503,29227,1546,61493,17037,10316,112982,4328,38907,93116,32972,99365,223827,37012,74397,3821,103422,35362,1078,29713,94154,55450,190545,68894,29500,75558,16082,49117,103414,107471,86140,770,35589,44869,58591,17981,10817,9420,89611,22016,15994,34959,101531,126914,193257,72721,10061,73572,85338,101867,105104,609,98863,73482,76319,100600,207540,8308,20035,8093,56554,15585,17551,38570,177750,85937,52611,10767,28909,26249,169061,139097,59137,254690,190842,27037,47208,1901,100780,278291,22166,32105,23907,107009,147748,23093,90413,43974,38278,110542,115619,45653,24331,51759,9675,125197,28009,227009,34710,181128,25798,132667,193435,41954,44477,110078,49443,28528,66593,13781,129734,5325,109119,17206,11183,17837,41403,199989,258877,23595,49436,2482,16318,60636,117129,70004,136182,100062,20218,28137,126808,127896,48962,38967,44635,13158,93741,10921,27304,68089,142263,18325,192375,147811,36115,47851,2599,12879,123482,145544,125648,78600,106709,37509,47051,31245,9380,153218,12091,99206,351089,1706,23814,20083,2942,45798,721,22708,105601,201509,58800,153251,16149,130340,40137,47023,45551,84104,66726,85042,67373,116656,97930,21507,18614,49333,60877,118514,56360,10125,74487,128507,90887,17233,7942,46505,12104,513,54326,57737,60599,113700,9841,11073,24431,42281,41428,3734,51341,225984,13762,7257,11599,104571,8211,44012,104316,48008,85383,17867,24242,577,6950,151859,2565,40033,99177,174326,186646,2995,79806,4196,14521,60729,201786,35248,27115,28097,296464,53923,41708,44679,124087,83378,146584,6497,13144,70640,20047,27733,29741,53377,153924,19142,41721,171276,66163,88810,47634,5092,38780,86108,55088,32716,141186,15641,254286,116055,26764,59396,106408,75258,2560,73860,17041,253752,52211,39488,99064,95466,64462,11423,12942,41175,93052,29798,64086,46186,33800,33567,45233,66006,7617,49299,14005,40955,150448,239881,2612,82651,30016,5178,55827,9423,94272,251540,255,30751,103573,11587,7984,28977,4978,95968,13980,47836,58308,50268,38574,77347,20931,57083,12776,22503,10,4635,46654,154112,11869,151047,73499,9650,31746,60983,249951,39416,25878,43811,2101,9653,7416,8737,26676,92346,181430,83072,25996,158181,85015,37325,132326,48445,2731,75518,116415,209483,32511,38210,119062,17333,2785,908,50449,214116,161693,5897,31033,187419,60336,5447,23038,9049,23426,57262,11589,1592,18499,5286,179252,44973,418,77691,20007,18386,42112,52950,14860,1598,187402,62235,129270,92667,2326,100310,21143,53140,34792,111283,17796,65259,194012,97011,144715,35840,20371,15935,60106,189595,22778,41157,70758,50788,46106,29863,69842,86840,30479,14570,34674,67390,15509,71299,282133,2275,35835,109932,44014,100391,67192,15948,16774,13637,53829,16317,57268,94004,20544,25822,38528,40203,28555,97510,24053,21113,6021,47281,46373,2496,116133,176010,201667,28820,53091,166496,28327,26507,34663,247773,471023,17682,2427,24715,51889,11389,166917,3466,102667,63097,164910,47310,21193,150917,3081,121294,114909,56277,57524,64525,84132,17553,63486,76104,69317,55368,502,4853,96723,70125,25212,69051,67969,36687,75249,1403,16134,580,2956,41676,68145,22459,93435,124068,15058,46025,62695,17614,28765,189125,1647,15184,32035,23120,137691,51605,2524,74673,6620,207114,101089,36259,21019,104217,98664,31074,19082,94463,25045,6564,91038,90673,76571,79552,64302,92382,14957,61083,144594,201758,86040,109363,266748,12661,118506,125644,159814,57896,262428,108888,87913,33717,154764,294744,43549,58731,81573,67852,24804,51538,39681,122957,62858,15248,283900,55535,49196,35328,73287,114610,61587,16985,127825,28981,37479,9256,544,41344,20620,91193,80448,170849,59318,7633,52347,121720,45439,11408,38512,20264,4581,36309,175971,26347,10413,16235,15180,35078,30388,152653,45467,29969,183795,49439,33086,1929,164867,88587,46552,130665,18076,34437,48894,15770,53144,83762,81107,66843,19430,136312,43213,23986,22371,51721,36672,73932,85044,11462,54025,63006,70924,28412,76703,388659,28510,37525,8053,29403,351574,243678,7608,105640,74981,222745,13299,69352,22764,32848,56619,140685,29353,106,20752,4501,61795,68153,238099,39552,89245,17454,54164,23662,42008,59724,105133,53821,26404,115768,1444,16209,287358,17881,32942,78671,61192,56974,953,17778,20882,55194,37564,73360,211669,11594,8e3,109829,67377,21481,66316,204718,32898,37701,119463,6868,32788,5503,106817,232653,56662,123157,404,44879,169840,19912,13667,10522,13222,180347,149108,31852,19954,1455,128597,19388,66139,13463,31267,28564,85407,118622,10269,12637,135119,151455,49836,122605,44182,26588,106150,14664,171949,1452,1484,40891,43483,32813,52330,160046,414611,4668,76965,52847,285294,29777,160486,19187,64830,245534,171648,8708,16151,96632,38456,197248,3824,13111,31263,5534,22810,94095,22424,5060,6994,76043,37738,54013,153414,28274,66245,103049,7220,15850,67467,48469,60783,177423,143369,15480,20191,1782,60471,187319,90210,9498,75610,1006,245177,1892,20895,6738,21020,52235,115528,104750,54596,6369,86070,14562,167100,84334,60854,23828,51465,49525,40796,89711,108733,53141,49347,11699,22079,52616,18989,60426,6070,1322,15030,77286,28845,5836,11371,49753,49923,40348,37578,73337,2788,68945,15779,203365,40093,11808,79867,81426,46442,9689,10187,52258,15730,33729,86462,49418,30284,16818,46402,43558,19285,95141,155626,31136,296724,58803,93200,46488,332562,48870,40229,30569,5173,69228,7090,28830,105171,66711,57547,57695,42695,76635,108053,24676,92847,18249,99598,51389,17912,84688,11088,33411,178627,569,47505,18773,121108,7263,41218,129818,35668,32165,206017,146881,10066,21894,2173,12265,27741,23761,20988,8052,179620,44251,30219,107113,49515,5809,22919,43643,10121,20448,80563,119663,169374,59245,57566,90682,12457,225388,42369,203562,11662,128551,93141,84259,24761,94597,41675,122505,212284,48603,2407,9599,7883,24703,182519,107518,90911,22385,120495,22791,32676,56812,27154,24521,13655,41800,16702,262168,63509,14150,29456,135382,45733,66046,14349,2518,233250,50438,7958,21556,8312,32247,16688,7974,4721,4342,117177,13427,43940,123614,140375,20924,42414,505,42467,36757,55097,32118,261919,34892,58385,134010,74916,2566,138977,120089,153569,42388,97409,75482,10836,123,5341,33838,34742,48578,76395,92995,49526,37105,106505,72144,7621,24215,152644,48127,105997,73105,87109,52037,12212,625,111988,112734,2270,76628,35699,44168,392377,67240,91475,67254,7755,119314,9723,6967,17959,185692,25707,36302,25086,109996,7225,112068,232152,122120,101654,13640,138791,16408,39845,8399,33847,12887,152461,34536,13860,12517,180090,169472,35316,3208,52910,286726,5811,60049,6687,6745,1344,108692,23669,20503,71259,58644,186034,23770,50452,17374,5900,712,207539,154425,93220,54448,92635,125802,14285,77361,50359,69288,133264,162621,5821,93205,28457,129771,33674,8402,51971,38768,30255,195827,18512,68308,2086,8475,44179,212,2587,255482,11233,42032,96264,234156,71743,9619,17543,9966,59340,53,42,51576,68365,150251,6029,116729,63303,1303,9580,56310,126033,11299,43007,25304,11348,2202,139248,211176,10147,4290,82831,107660,57933,177074,12917,54254,36738,72091,29607,42295,47993,166376,25786,73979,352922,17657,51467,73749,5917,82140,42137,39138,697,49880,85161,40070,149172,172144,100698,83192,48718,29859,31561,21429,53401,29518,88989,43651,46656,32160,121990,32912,74292,57977,278500,63671,75205,23517,3602,60467,33461,137178,109344,49843,1353,103161,37982,43271,19531,62950,15279,34216,34547,113009,116442,189404,140865,134948,28936,38460,59707,136053,30880,128067,49530,48855,87894,16331,15771,63989,58079,104481,125524,14569,128661,25492,365675,116367,126731,94516,122818,30710,67392,52767,2196,47261,28051,49914,333288,29945,146885,100058,31013,158363,4861,1817,42266,21215,16216,4256,54248,112813,97344,128078,30238,120987,42827,6923,14989,69805,147561,47842,51853,2647,153948,13103,39122,18142,22684,76687,15882,92285,21335,29519,3993,86408,47685,39612,24929,19453,1853,134405,114177,25894,43349,26803,12267,92165,15185,61540,9990,69281,59642,76734,309690,136935,10229,92038,49815,104501,25520,66774,32406,37445,187921,81418,18633,84262,108972,32019,103853,41207,5579,45804,210683,27613,98037,39566,18876,154815,24945,108917,31510,38406,6697,20809,29164,106328,19193,8247,16805,3543,63734,213048,201574,22433,137934,31798,217223,2939,75056,140267,99972,3047,89740,22878,4763,62402,19767,110374,49959,24684,224268,106487,32793,8178,56138,27795,3080,77954,63643,24857,121435,175431,151661,102435,15023,177670,39313,17174,24416,12895,70618,46646,17001,27902,84031,58519,21749,50823,89723,59027,57596,61596,84074,33007,8029,24120,13703,108284,63542,58816,85626,83071,91820,14146,35460,124390,61351,8006,8867,11495,4529,43870,64845,13482,73015,24763,3439,9485,79856,23851,57906,220428,88667,80708,99776,38036,39933,208871,63968,30726,291083,68,49270,106842,112123,27384,81130,110097,118834,241402,34356,13923,23897,40492,16210,71957,62441,58550,23547,13636,20131,42294,36446,81802,1100,142364,34090,61710,9270,107601,140028,39980,1414,320109,72439,66107,14862,134653,2221,1149,9546,36018,22163,35318,143604,19080,57058,48579,2621,55599,363492,110403,14828,57857,113754,25759,29811,61553,18913,107232,5290,75792,95451,70056,214553,3329,48663,24095,11961,96108,54464,155383,53360,112141,54037,49177,57901,67842,176097,123321,6506,228274,68425,4036,160696,23121,3023,30678,64279,90792,34906,65080,9259,58549,29482,27140,216012,23499,117389,49482,25665,100543,341780,54232,60358,235308,80431,37334,14300,53910,58330,29194,117489,59804,16753,37401,37127,35030,92616,62680,44495,8116,60907,43835,168603,37896,94846,842,40856,25319,147486,395164,90387,68791,4498,25599,15543,116574,48646,254235,132631,3917,7773,30355,18277,60008,46801,74243,4222,85032,7778,17592,14912,22293,18946,6094,46,29454,464978,48886,97248,14694,47558,169023,3388,127473,33223,22400,144764,181865,177444,13371,44931,27593,7328,194219,91202,3836,15626,22427,52166,39152,63337,7531,59378,193696,94700,27634,40257,41337,11743,257393,217307,346548,9351,73104,41502,1488,255024,105660,39615,20814,39098,149478,69081,19993,16447,55270,37583,19645,42647,14979,8926,28968,96230,49277,22527,34250,39769,81745,50791,18698,58840,44616,70138,6720,10068,38140,5653,99473,63439,3743,19237,163704,35800,1626,33560,38455,65843,158617,28684,92983,58823,71795,71233,1075,413844,42288,157276,38514,9156,131335,59762,40948,51258,46584,9950,55371,7434,2577,42703,1693,61791,27603,63320,25608,85018,30872,100002,36167,6872,2669,51250,778,3692,10451,28383,163025,28096,44948,19074,128798,7121,36683,2203,17586,33024,70070,348622,5061,6009,23593,42442,28013,75532,94062,64585,284254,31997,89645,102394,31393,192535,48721,71088,128192,9661,61738,34411,50069,3304,16352,53075,45568,9547,42732,1178,93157,14753,88072,51599,88701,31987,23387,63847,44965,25314,47565,7560,2438,55689,1314,346,23289,15896,475529,112925,131467,20430,150168,2504,17375,39472,54601,34817,12e3,31340,27414,5063,41639,99744,6404,117189,259172,25398,35063,46527,96170,115569,8068,179160,161042,54883,97999,36646,8523,28719,11447,6735,26129,205423,83805,44478,94354,23071,9474,27662,132536,57855,155315,195915,61922,64638,69412,89700,153852,149867,22483,25631,4401,25671,191634,58296,7593,82403,23703,17554,61290,37616,211689,4980,2922,20668,148622,109058,2724,39989,54579,389750,94744,77996,131928,41416,77516,74948,105981,7862,49124,140555,58696,4033,57560,175248,201147,43956,80013,64810,82504,14552,11127,36515,10704,23006,45490,46595,111926,16970,31954,4958,113746,35379,27153,248773,34760,166030,69750,24045,70012,121173,53304,28728,9870,156097,134089,136673,71920,25774,2488,168704,5343,127631,74486,20804,188876,26283,102354,114833,476,53497,38795,100325,26879,18226,1066,27135,41772,14104,58513,21205,5221,84659,49948,96151,18525,149506,51579,153134,107909,85993,35590,45992,15182,68394,22750,7093,6602,26954,2528,13992,8645,3748,38754,76047,16039,28854,52143,1980,22387,6152,255879,19432,56677,64082,99361,145001,56506,42169,13125,75159,24500,41901,21053,87462,109469,103771,55888,17710,31989,233429,5318,1013,119131,13220,94790,45556,27216,5013,108338,34297,51598,16968,224489,144882,29596,70103,32634,20648,23171,115640,2381,26061,129018,59090,67066,11319,1052,66080,134106,129567,36464,198632,6394,108555,342064,340,57976,18872,21980,39272,117475,464580,20395,93823,156783,33386,22005,34188,504700,22717,50887,196433,44491,65948,106413,3639,94733,167189,37296,49229,1697,5603,70017,72359,61123,135042,93369,6109,45001,79542,96019,54203,50884,8801,68912,114197,59072,202632,47922,8431,242124,18114,54405,129410,6472,91882,124518,39386,91470,5973,31594,93512,401,5239,5661,24933,37492,67315,15503,24586,447,4431,98481,20358,144946,60916,297453,66825,30645,47819,105167,552,87909,71693,40566,5307,32293,32597,12315,4634,118577,32606,74622,13999,1446,18183,5010,92389,27675,45072,186756,72549,62625,80329,3174,188490,17768,76385,56061,44774,4792,24749,6756,29971,24565,51305,2866,185714,7372,40314,131257,46345,142745,156514,10853,14992,9306,14693,140671,18567,166507,130345,6503,52141,7521,13168,8694,14811,40576,66214,114434,97632,88033,18029,21365,15834,397881,12858,6804,73691,171818,34801,11558,167427,172844,27628,109803,44373,61609,14544,8723,7897,26839,10823,38501,189122,32876,40522,18836,231040,28016,40185,9487,60378,40240,33739,35931,69716,16764,148694,148116,26429,90031,23548,130862,153367,10154,9923,25899,86890,187712,61012,106844,119164,108121,28859,151900,43746,70054,17933,46633,32051,40306,19442,73866,51802,202389,34364,59031,39109,86049,99849,27312,354059,431,164107,160825,29370,26855,141167,209995,47475,25126,30629,112486,16641,31932,21054,13503,62291,8461,6744,25340,5056,190589,36491,1498,102273,136482,8096,46702,98246,56502,42474,9181,111985,43767,41706,30774,3932,26549,155060,66159,102266,53051,30650,208931,3598,31618,10600,67535,135897,87806,163442,104978,10409,139772,1143,40979,7330,98219,96655,131263,25023,114039,61390,192001,15973,35549,52359,902,12202,5580,7559,52829,36364,11107,51568,3787,4394,31819,64256,1505,29813,365608,203854,33802,39839,47786,4467,50956,226690,12884,22453,47648,16676,45252,14504,2855,18627,541,436398,14538,2406,20,7878,60282,10602,109448,6980,70267,22616,27176,8293,85130,294480,30144,63610,187294,289665,163077,293747,55641,995,86282,16167,131142,7732,139426,35763,21669,81048,1053,19627,16183,153848,41955,147603,49219,127527,60498,15419,62976,59946,18598,18032,16576,207,4670,110744,11552,9989,2349,51346,15073,25998,160678,33681,220089,68035,65033,54571,77929,12230,88125,40472,148399,62247,44687,48615,158618,103484,11572,39073,41233,3610,86331,21604,36776,83989,518,13754,34617,179678,35290,173027,43237,66547,59016,92560,12741,157332,29334,11083,67849,24492,90041,47299,109304,10326,20058,63062,46195,31632,9568,11813,949,131768,139099,52007,9458,46429,12293,29883,97116,3732,32343,9734,20328,4732,83588,139722,11257,49471,2051,15953,233007,15439,88041,1550,78033,39910,56576,20651,32790,66091,16869,13616,226368,19098,20124,49306,274210,41089,39818,16113,202390,49166,5280,90089,148031,55043,2264,92326,62595,168341,67080,7584,39228,2679,31454,30712,21771,49469,8092,72424,14892,94819,370101,164858,14108,16628,34424,6831,26672,13360,10293,152871,13708,152221,56275,55746,3003,189905,73541,197721,19461,138468,38166,34167,86972,78519,126458,196442,22647,131900,30322,6022,31039,95120,35519,112107,2704,104049,7805,55215,99039,8898,61822,7538,79147,8674,19781,123381,122030,61080,29510,4920,252926,24948,29594,43539,79504,36116,27926,77165,119791,10396,47075,8939,65089,91291,49470,50392,130812,24665,5396,34192,146915,55,32388,20225,170176,24246,18217,79762,97481,187002,170504,22505,166717,11581,22954,58667,24092,24239,34967,40770,168985,20697,10796,29788,36609,33121,48586,97180,70956,4247,10919,82835,29387,24795,134813,4568,41932,107494,12409,8579,7615,78083,27482,13273,222151,109832,56337,363569,100711,21692,74289,35898,156666,112372,33193,49983,165146,13906,30221,436,23307,161876,16834,36598,80261,40181,489,3237,17307,33708,68069,131691,47411,142213,17996,62418,20656,40859,30297,35591,115572,96762,34638,8101,100105,87872,93118,4073,13106,53663,14555,379438,12544,34665,144134,65218,83887,41458,1700,76072,7062,45362,51519,33887,113928,230002,145590,2968,109731,69584,145887,27573,34080,696,54442,212619,61698,42014,1469,288680,91524,69494,176890,68278,36380,91390,73061,72851,136365,18061,126629,150504,108159,73403,20532,217896,18800,83394,3780,6913,42351,72130,124219,121339,338937,19687,8446,22017,13873,48885,120125,35340,27891,4562,52291,51072,5972,97159,14055,43616,105781,67483,207916,75043,12256,28487,7209,31437,59474,13217,149676,10833,46754,7502,32640,81487,26299,56642,3989,4364,2409,1896,58704,22968,42546,57069,47889,41454,136134,46051,102015,106687,15526,254717,58,85446,14369,99446,71688,19863,126847,291582,51244,109625,70818,1547,189380,149241,28615,6289,179303,524,62440,6853,175754,141850,162709,4217,140213,214404,32835,370939,250072,54376,228761,71916,144701,657,89940,17521,80160,237023,148575,164257,272527,9401,198903,24729,17703,108137,43135,48966,56162,53800,36151,13173,1783,32474,18864,70754,46888,49712,30038,58553,64793,53334,174049,42965,84561,126876,70090,16520,63753,27337,69921,58122,69010,45552,33142,1092,120910,177696,3676,16059,23396,8269,22160,9571,34657,15036,46764,37354,25445,12097,63888,48103,145,42240,80858,105547,28234,2328,51188,12063,12469,125374,98182,171585,129756,119295,23533,25395,181401,99715,107908,42579,37609,2500,59133,67194,46635,19624,31959,24153,277972,39441,105587,56371,24069,27220,18122,50693,3846,102691,55065,140440,293,60957,118436,1340,17314,94543,71522,9010,49481,39101,30757,52442,3349,18566,55681,6148,49861,67362,29473,16424,51773,13975,16105,153263,53902,78230,197042,15803,187130,25017,6214,105388,38599,34017,9107,660,114778,239007,212872,16230,195154,90027,38987,248,60897,39351,34856,31011,21775,41681,1559,85670,6103,35354,83280,187563,5745,43822,13397,20816,140079,1043,6348,13019,188905,916,83185,13921,197369,58587,308353,44852,37817,141983,32764,68581,40892,94818,6526,46289,37353,38799,65245,127045,12280,75459,107508,56307,93576,41114,92631,22742,68224,67432,122795,2131,30261,16195,71686,80872,19067,36606,55415,51055,65943,59568,48358,40947,230410,22272,116297,133612,74166,126769,58783,115647,39171,31424,59980,6420,75687,68659,22219,19662,51609,12287,7887,94526,61885,134302,46006,92537,80123,257977,126663,55154,71071,5756,38621,29511,61768,207285,85526,35878,1517,95637,40711,214057,75041,47248,72951,22699,85378,117689,4729,158936,22518,19583,25056,17451,43230,77451,141822,2028,7801,22373,4034,75301,60991,12200,59589,123234,17449,54993,3264,16430,33128,117118,56124,178609,12642,34244,236200,43665,19313,29386,45091,42098,10042,34562,71330,29635,50068,53819,124237,44714,32804,71267,130300,48998,56578,64172,172768,50075,17351,77665,85602,1594,81728,49368,46606,19775,75183,7716,32889,26648,13436,59301,29561,77044,108652,25749,26512,343982,16328,45426,53772,84254,67097,194789,61224,17035,160685,17297,202215,135406,118341,2650,2712,165122,39668,1766,97847,41583,64750,32501,260547,28864,64103,45198,19516,1158,166912,20403,34027,10963,16141,20984,163663,185362,27299,6600,243594,45496,154199,14171,53891,52940,101642,94604,7963,104592,152606,19037,11118,25808,54515,5402,42084,147184,18390,29896,164225,162873,40466,9938,54801,70146,66759,59935,43540,58676,69171,109708,38543,32207,46591,88081,20140,41767,101298,145182,39899,12204,21085,44844,32313,226062,13138,39167,7649,21294,19544,352626,42947,112978,162137,164173,121993,17813,6102,35374,5269,42206,30800,45982,22982,36251,17144,6122,8671,8084,272404,154,122768,12006,76527,73419,69325,105807,9495,220487,29197,89056,160446,53834,197550,37292,117751,53601,24091,108269,72650,17992,118251,13578,64227,8609,97876,56750,36113,229321,150223,85160,26383,5610,88738,33839,35306,68098,12374,121473,27197,66815,63716,10127,10388,71012,155117,10660,38130,95069,200906,56997,10546,140968,26164,58789,80414,27396,29337,17319,78747,8957,43718,57739,8704,134489,9251,14262,40583,24656,39133,5306,43837,86659,164677,194782,27468,56598,41406,95731,17647,134852,11972,71605,77846,17316,34195,24465,42471,123838,4286,11465,5223,255436,106016,15363,133653,6613,57615,21482,5929,41610,5528,159163,20266,138033,2783,48074,249145,81452,57741,38155,31191,32023,131830,8712,116513,32396,160702,187621,166002,123687,12,62689,145928,63398,18560,86346,150231,8693,5478,54663,56869,29712,20471,322015,164692,30407,52016,160121,22929,19296,52881,60340,71650,121188,31059,10424,72973,3551,30412,44737,172383,36099,243424,5274,49999,20032,79415,43567,95143,111948,20318,17729,101737,56624,96891,161576,14956,16547,135980,59262,77152,27453,6123,35571,43380,35916,62277,21785,53693,15378,108237,63,2276,52039,70272,78694,41537,56849,116796,14411,20761,13489,233058,9422,23296,22214,27805,167552,26532,73177,43781,1976,47479,53097,70358,25233,10202,277349,32720,23465,45782,2157,75011,99414,46797,14029,331188,26634,25912,187886,51411,142415,54672,10260,67364,68176,84898,141743,32203,8882,16414,246460,67826,1065,38386,91880,168610,5162,41010,50869,14162,7962,335266,3788,18011,86185,14140,49486,66814,124474,12893,133566,255655,79151,46849,54950,40987,113502,4653,33120,1563,160382,117713,129337,309186,18171,10889,53768,44858,38544,36763,18333,15858,58971,6477,9525,8535,14726,14096,26902,170756,28405,233366,312251,51708,14127,19199,10297,110312,48460,646,9020,40769,83604,51716,70759,2649,59125,55621,16647,2952,10961,74126,112432,43916,267460,5120,59260,28040,31308,16545,84609,47186,40537,205682,9818,19650,93983,42181,82766,50191,13339,114720,73569,23501,5541,66254,468,17966,5125,81538,46001,88315,134477,4042,75780,17161,37372,9273,55028,52868,48506,197660,52106,1678,131509,88997,11498,229161,99808,17550,43645,124582,219145,8184,108069,70061,175724,99312,17150,2838,7073,156152,17753,49092,16803,1821,29417,92090,23379,66219,16705,25405,141529,27280,31799,6767,12496,46640,9606,10300,33865,90498,289,141972,28645,1755,122254,36574,145200,57778,115975,15433,1941,4099,8620,50560,123303,55676,6133,5443,25678,28512,255357,14348,122676,93720,56908,9978,32758,60073,14456,30325,74179,182377,133464,124701,18020,32177,43554,808,19883,16600,79224,7238,18109,28556,11247,50684,94823,7729,29630,27895,43494,66615,160,75616,204393,4150,12756,120948,108425,9998,25464,61334,213823,15423,65960,63934,87262,84230,350428,96963,99319,27630,62521,82558,7456,70035,321796,22677,117013,180582,100359,79812,34557,287830,67358,14176,80683,114848,35169,90997,1447,22600,46172,146596,10923,103084,113128,53346,226456,59683,48988,21632,90741,80771,88868,89090,59673,44207,31094,81602,72782,32997,33266,124468,127301,33848,6847,2940,167663,1154,60887,4791,68165,51588,98188,27452,53523,3630,49659,31844,716,23618,69117,101601,4697,29366,92977,133129,100459,35256,220228,220740,11194,50122,13947,1305,2379,119210,80181,112061,18955,53969,35103,28242,18281,26482,62170,23125,22627,17903,97351,70139,14931,69751,13475,194213,6823,66651,2440,3123,124201,127058,199768,273513,29218,168746,19498,30628,254726,18151,36597,16458,114447,3813,46971,184066,132731,85793,25234,113561,20977,87033,67806,81570,82077,83128,62881,16590,59929,31721,84717,54839,152353,27946,73648,1152,51494,25166,181966,18536,35859,21096,10488,5434,87296,116782,94149,20100,42748,119284,21550,80954,161142,3281,26655,56068,31234,68973,63436,197146,77802,53836,48375,31390,138097,215755,14405,14690,48482,192674,165650,4356,6779,90318,9621,53563,21892,11380,24439,27988,65408,32100,28043,30121,124,52304,42735,36882,47875,40915,4490,1857,64523,63890,29963,3265,24732,6558,56674,255187,78937,55716,45373,202097,105143,40496,1934,50343,10400,93193,262446,123174,33291,88639,50855,19733,11387,78609,67098,33565,79076,71724,26898,68956,47175,78105,5261,194162,6861,11334,52696,3195,1099,854,40644,42446,51986,165826,33900,14512,8567,107082,9440,96468,48368,15017,180286,38407,11266,27073,87162,25059,1767,90124,22940,50038,4456,79274,19704,269589,3740,24611,26936,118228,122759,44861,69769,8268,21928,1448,10254,25662,37572,15808,101759,47818,56338,32066,27406,61598,102489,68037,12243,45731,6222,13525,48e3,97528,22882,28821,73926,12033,35515,19990,113215,45359,13095,69110,54935,144153,32952,39972,5726,20322,27148,119607,192787,10814,127655,29129,4312,11899,293735,47721,106216,47945,13663,4293,9366,4600,36217,51600,11550,30486,35147,4378,52949,225366,876,56535,23457,10620,14352,63024,212271,53386,55283,2154,277152,6832,58247,34965,133895,60302,8020,17598,108374,41827,77422,41356,6191,78382,44389,79737,96477,57997,36253,168231,29980,58643,13506,77777,218916,163459,37836,70135,58024,40795,89998,95793,54696,46896,3850,14959,40853,50010,53886,103929,91124,21842,109259,112031,65894,24294,11400,75618,91170,52085,77528,106068,65908,36186,196059,70011,252552,674,93814,79169,6793,31343,87518,50063,29212,56507,62602,24490,15389,130371,20806,17839,44516,4956,102925,118742,122515,17602,47643,17175,52617,34827,384,128737,35058,16456,4055,91444,9017,27903,32324,74054,103536,349949,23135,91177,39510,20237,139249,107742,49136,161940,10176,4296,19242,19236,38664,13941,130652,63883,181786,74033,662077,40517,51656,4092,74699,174254,30240,249851,47024,124719,88983,17979,31422,88107,12752,18046,8517,112048,15131,61643,73351,4553,10608,181387,24399,17507,26238,34094,13867,45419,28560,23320,128360,95692,140246,250559,4810,17968,25372,235183,4434,11316,6759,113457,61779,50021,20556,133305,111983,259709,231509,141441,61036,58891,28950,14898,17798,35773,7261,450465,110240,66004,161650,164984,59722,17874,41866,39325,102960,36234,10606,25254,39688,16397,879,188946,10001,46267,109745,88992,23803,12899,109186,223568,23039,16254,20592,126376,176498,68200,93812,5609,56659,71490,16814,75820,44814,26002,31909,11613,134295,51635,17304,5479,17188,72639,166564,60617,77577,9173,51736,125261,74466,141449,33396,52135,226175,206041,16540,2241,102472,15065,11417,44369,154333,39439,21371,35696,63900,86098,215585,10637,111747,26520,35829,5072,18062,38762,86113,33683,41171,51676,206735,11386,79669,104994,174586,84969,32773,6701,65682,16472,408933,62302,88447,143840,42562,29889,168822,199833,28931,31217,94805,6702,30907,53329,73464,80367,107388,92999,83741,56375,43487,94239,54863,13740,2946,15038,117251,65511,240310,36372,2795,110090,23938,154352,180646,13562,24354,38003,14983,27192,319,49724,68544,92943,184983,39339,36199,161825,7927,16738,7599,1393,6488,53031,27832,35812,1422,77769,52152,9393,10790,70529,103117,58677,68809,142754,214789,212425,68209,24340,33236,124155,64775,336,120720,43770,4361,63444,9512,52337,202,37869,58071,28602,17123,124940,64579,79394,59634,16838,71347,33171,51200,72048,194123,84312,44391,184338,30592,49986,18188,72135,53498,57477,17843,74498,12560,37524,2619,153428,26875,24918,74278,49884,44432,39983,3230,39257,81646,26616,9540,23710,69802,52778,47187,280,20102,190963,21702,33112,201384,189730,36274,151103,62470,79614,56894,160976,37846,3819,43907,28142,33980,44483,16310,43780,91255,6410,34790,53414,55594,62493,16866,126630,78730,70800,6150,2638,96447,42805,5561,80903,142508,69107,13587,90093,68310,13770,107545,142426,6310,11281,108873,30379,19476,19039,126867,47619,44321,1557,86986,12174,285300,692,28640,174731,39442,33395,33427,183086,62041,33967,19017,71946,141533,41962,5762,27368,19966,260045,80637,136704,106076,25336,17430,7907,59393,184,46903,143058,51209,156531,2047,28617,58028,3727,131055,2181,190078,104219,25958,39516,25800,76861,13558,64738,31952,28604,5444,142725,28795,87891,47152,833,20563,69475,13900,17091,271888,185043,44563,4833,59908,40623,122857,138131,6213,136826,45348,94359,56641,22196,70863,57354,56451,72278,39593,53647,46234,29708,54332,63721,17639,16420,38068,45645,18971,54437,33637,39722,36484,68634,318,5298,22418,20417,40310,88,18126,44073,143467,137263,71354,82354,18502,189426,11156,72484,24520,27572,28397,1057,11377,43227,61610,141001,62013,3621,2123,25838,28942,106389,138280,139177,27246,10742,1290,24912,28269,40413,12701,122933,83545,3131,5191,33319,17999,208755,75460,44990,59015,14954,33696,180654,90707,63223,87538,51,30065,70087,47405,49098,15161,490862,57902,10363,34720,124013,2826,107593,1263,16539,8297,53595,37008,190173,24783,28381,2012,14817,222228,23569,6060,37405,4132,23773,98575,114011,35293,24317,92933,80389,14038,96901,5721,58820,71786,38355,299,2937,128393,129071,199555,22135,61163,3457,24578,103336,75552,8037,29223,24032,36855,65087,2985,11252,15167,48922,743,16251,113770,51774,115825,202685,4095,133501,109523,3240,22784,51862,136657,17899,114978,57429,47454,8657,11392,32391,26378,35272,1426,34467,53586,83481,40561,57729,3733,111799,328168,6514,174945,20097,14557,18636,93340,171450,639,117760,244456,15998,75359,111774,5693,73895,98142,34182,37386,132752,48186,121074,28782,11866,26615,23940,89767,129357,80551,82029,27545,83711,126798,801,23573,21400,128295,14924,18798,114163,50035,114816,136425,471234,15959,173936,34320,17327,80636,27686,84778,119579,98823,73515,20041,82828,124250,4650,48453,64519,115563,26853,38215,37801,92219,69955,7477,145790,19159,94085,71958,65302,12375,44454,40621,106911,19581,3379,8773,16999,182583,5202,5874,127304,16993,14116,187927,3375,20370,44171,105965,18978,61953,17115,51100,102276,75811,7602,43533,31235,7956,72681,18083,5986,190352,3671,8443,19561,18603,95186,10180,31524,10515,35607,43597,12356,10299,174108,2003,31154,62144,6234,183999,16214,205583,69997,69689,1386,87561,18340,12216,23427,2010,44232,129696,140942,7349,4623,146188,5101,86380,150439,62389,21860,117536,12248,34044,63481,85500,98463,68410,7339,87770,71963,12765,3686,14919,2974,43273,7350,39745,6266,26949,192687,75021,968,266807,27515,15493,5904,3345,21226,90343,14616,34477,13783,5111,69002,79197,20455,25812,125162,5688,23290,86326,151802,47539,53270,120925,57870,213110,15305,23776,142238,21634,69658,179702,13601,22257,9455,35397,86555,50092,17185,21662,47115,32222,159490,66608,20354,42346,75706,11938,55979,39530,138927,7527,13431,63668,92125,206545,83160,98,105744,113739,10666,134978,88373,50980,17237,74022,5974,44855,31946,5152,17761,22091,89954,59088,181724,89377,71648,174145,6081,202459,12825,37220,45669,60029,47529,9934,69759,92928,1003,9545,40944,40882,123191,118937,215977,4632,152290,5724,38351,20824,19010,87240,135102,56782,135053,19875,30902,38714,93406,15784,18212,103460,25829,40143,17780,5626,20039,23263,66779,128772,41751,87513,216438,5230,73516,181654,37997,80801,90214,285152,76150,31873,8348,37881,138317,50195,1565,263241,15964,118491,28092,4966,6035,45147,26418,43934,84355,16241,7487,10433,247295,3172,8129,186657,57,71773,143295,6470,101381,39489,160086,74416,43233,52957,51944,225854,53358,11933,29452,25908,40737,49314,60112,142677,7636,42896,27738,246262,17093,14777,56250,32280,129157,16346,76797,6192,34415,425,120600,75890,191879,176315,63506,45546,161456,5005,46773,143264,38320,150132,134225,135305,182762,55889,102851,29742,44842,129661,64244,47013,53257,4250,50419,77787,123983,24915,12948,11732,36176,80467,160621,126658,56748,175875,78143,8763,54016,205303,6236,37950,84876,66862,80427,21806,125486,21484,35813,57557,14539,213401,86192,113464,36625,64405,27231,89465,4451,75847,20978,108995,205734,68217,94454,164574,18012,255036,16771,23894,158505,7114,43317,22996,11028,52204,124949,23169,226500,10370,46407,15369,14412,60558,218161,23117,18847,313212,60955,17642,82698,38578,289214,130607,42162,81718,82632,40503,951,48442,14289,36239,91499,48742,125633,280990,7266,26286,77911,44666,7534,217478,178981,9981,2833,22818,156155,40427,12913,72539,44825,147487,28272,67343,16061,26869,28878,13104,26717,168452,222284,63772,8001,32886,55288,25367,12083,32991,27965,29014,23535,46798,8822,7448,101081,240839,93683,48095,16054,15111,14427,104643,135450,70502,37385,89619,135605,65697,66256,31643,242955,88548,21883,9676,103291,44145,3863,31735,8400,28701,1387,89573,11921,48767,27191,47327,74488,31139,34928,58382,10630,206777,28582,17378,118639,35659,45393,41374,26204,181164,243974,22596,109998,166262,140883,75323,38999,14554,45944,89326,18593,171445,14273,83848,7094,31786,136223,135153,75926,66523,5050,82214,24940,76607,13068,103875,30264,17956,28575,70190,14699,6507,6918,148803,40975,31279,13140,17326,280841,90476,164678,26191,29026,116611,14717,6030,73654,167918,94589,13531,31467,6560,37936,764,2646,1243,47040,46211,49422,115324,23197,48193,11038,80128,4014,18828,39730,41867,964,138962,14313,55897,4976,27379,30682,187323,81139,45324,19782,37069,15003,3973,32623,32596,5813,218135,46814,189444,1329,15593,67740,145931,8233,95368,52092,13390,126973,24773,78080,105530,127257,27684,75829,65709,23804,30679,23341,26805,39433,72773,79105,6999,9337,78288,91647,55714,45624,31732,25179,41300,62926,8984,56532,22915,82260,13175,111014,68951,8391,237398,27237,22138,159504,224263,75273,21120,32545,81951,75664,22264,44392,981,6782,10058,4181,2250,85033,19945,215931,9376,41673,33635,15417,217394,101669,56123,23340,51752,11920,99085,5011,143610,229235,10032,59585,16698,27704,5818,10883,13785,186415,6016,52857,9702,70336,46649,206034,15092,14481,57476,8081,27610,12151,35264,32218,24641,138702,94413,16922,15037,25736,112522,11746,14172,11310,262288,112160,142819,50926,93686,24209,43747,11953,83038,1813,102643,324202,14341,3919,29176,21127,23204,81844,69984,61119,28807,12474,58355,40271,66084,21889,11758,31845,77987,65881,45978,68177,6101,28932,58051,649,126673,52123,157370,15105,7133,62360,40724,9837,38126,27864,30072,264757,5923,6078,20776,4896,122091,30718,48046,119459,170240,303310,26816,100117,97772,9974,81454,42024,46874,11564,45132,109732,215746,2127,10903,7713,43948,4937,28852,25103,41622,38117,17887,60135,3272,72498,31571,43132,55596,108898,45911,110563,8332,37358,183144,1744,146411,106155,85432,89589,251315,29773,4572,57991,13533,23984,36596,74746,8561,47865,143388,13408,81521,143096,93820,10893,115449,113660,48899,7902,48616,6164,68386,80304,175175,147319,43500,47779,2063,16353,18616,12432,186556,23124,95665,69513,3036,14556,14786,10437,134537,36883,56269,63535,75772,100719,86026,42447,29728,3767,25145,40239,82360,26124,91863,12060,22973,30854,96321,53650,186559,22801,8489,72885,86348,51954,28230,88192,89100,269995,13885,51315,38388,73083,25625,53485,82297,39389,100926,72363,45610,10521,13154,68652,2613,44579,170934,38080,87082,32745,40511,28882,9986,23752,68927,62035,177812,181149,29031,11611,57884,182442,8046,104980,23591,100153,104125,9117,47485,23873,2671,349983,42543,328134,85104,58966,33582,332001,133483,9354,44713,26316,6446,63766,74439,40756,76029,97107,257444,43586,84500,59959,252451,55620,150696,63676,31825,65735,146929,23371,35631,35977,145121,51984,38540,33976,24513,207079,33066,10465,7127,153150,5147,36952,154507,3865,13973,14200,52272,11308,4343,15766,13965,24679,51830,184838,3348,86524,70378,36337,84987,49030,22827,32995,19326,2046,26448,253830,60248,12393,95560,44044,28370,1662,36896,50220,48315,80320,241741,43652,242555,131179,48067,39495,113599,13797,203953,20287,78696,3410,298860,46405,39410,64369,61620,171971,71030,204186,20450,29322,37991,260572,3220,386508,87523,9404,67272,73458,10375,45255,6586,2590,34096,4160,107662,57683,97396,79188,100160,35851,78921,149875,108684,200141,33908,53318,6929,19857,56702,3398,57226,58810,9304,20429,4762,64257,64571,51955,7457,60202,39068,65191,1320,89495,11353,17456,40404,104230,19164,17854,77204,58530,172392,75503,99309,15916,157308,83740,62750,50622,1879,15474,208653,18824,11343,41248,59977,127748,31363,172064,44e3,65018,12188,41891,74315,17651,19590,90710,34332,9615,58267,127126,5819,63902,44975,20415,172217,26030,99297,158027,64904,15382,45953,118417,114077,18724,56092,87313,18147,79997,136198,62361,84012,22885,9665,4621,1791,3009,54017,91348,98456,56262,72712,106254,90930,42901,80747,25508,21446,133798,113357,6097,116669,1181,110413,11032,103938,49121,260341,161282,7422,24145,56140,35654,85140,174230,9633,104905,59713,728,60193,191876,5768,22655,5145,41262,326211,147566,80079,41245,16239,59176,15547,123829,75411,13376,315047,105840,13229,35046,43694,56413,29398,90069,53794,84673,10758,107725,5524,23780,236107,388309,62023,165588,1539,46003,176003,163955,112472,361654,29424,49364,95979,3700,306600,117453,152154,17800,82564,14444,151294,22058,29517,47312,306,266768,196797,94605,21196,107639,225607,18057,38146,50176,69453,50095,10700,216046,17364,47494,6891,29894,48715,14004,84282,21694,7598,82070,109646,6365,16302,27108,56492,142883,77880,27851,40539,187868,189893,289432,6589,19096,22176,166724,119491,38469,38709,163079,51354,26677,199471,115939,30685,126480,79686,66788,140209,95841,256423,20274,136906,108937,4472,99520,29622,157862,29670,35606,73617,56291,14416,1391,49553,41902,66050,23269,70525,139634,148637,11479,51671,3128,65679,40966,166869,116434,159850,7654,139616,20315,65982,116183,74395,50212,88368,27581,37439,11453,97247,212239,49595,3922,25404,51622,45678,120847,23534,2190,11959,15866,21030,7156,33211,32273,16756,51864,86560,62359,37272,150553,52434,48096,52877,35909,9282,150331,56064,3339,62690,77469,38848,312832,112155,50347,133337,6119,130810,19939,40188,198954,5243,178898,39868,142856,108261,286939,44549,159984,99970,197697,81046,134326,265613,8809,13626,21584,72551,29643,102979,213474,80049,198207,20362,229516,6391,82595,72275,12563,33365,2420,161399,254521,90721,10070,61781,32490,66737,212773,229338,7775,69872,54551,80069,13914,87011,91386,134664,33101,1860,15322,69366,97910,9032,31405,11616,221,112544,23414,109925,66229,60905,34215,18312,31402,37371,77552,57720,2026,89015,4380,50369,20157,140351,42001,57692,30433,19076,51739,23715,62058,850,121732,145992,46915,373531,25804,8590,87747,2802,16807,15221,116280,36725,12360,34724,117090,218795,142043,148440,65614,72062,18466,55923,22439,28990,58866,64866,114538,16550,89174,112318,27549,24614,155152,5486,45048,7815,58664,6423,11415,6187,21207,67086,238124,26336,2489,21350,54052,33373,60539,51387,100319,32162,11584,95109,44016,42791,31049,47206,52852,73555,110693,7535,38410,32062,15667,9670,65566,23386,531,44985,2760,10244,123017,50775,39638,56392,170971,54953,18366,49442,134359,57768,10659,27076,77194,62382,113419,136262,150169,22322,207134,12412,139797,55514,2505,14883,65500,22972,15267,1134,64278,37799,235955,33675,43711,22813,276041,97153,48116,34495,6178,199281,32510,95181,5794,15608,76263,19924,230629,100152,10562,76444,119798,74072,219457,36986,12066,47942,54591,35202,23051,254301,155103,68248,13470,36451,42899,93606,121040,16026,27968,10851,17794,10687,100974,49021,10866,65067,10018,39088,10965,56708,897,11410,7452,254030,47692,32629,18771,30290,48037,43471,14347,50490,66808,37049,49968,13864,83559,25801,3591,57941,75692,173303,61385,259331,1969,57685,2094,35588,6233,27697,16717,23485,26772,4734,15135,43486,85019,26988,179071,24869,25026,9295,27083,21620,11383,45847,134822,92971,19856,42005,31e3,22072,2896,21798,125082,88645,561,47297,28868,1048,75739,25425,197147,182050,124782,126886,12162,13343,152665,53046,7557,32452,9893,110355,9538,14825,62686,7879,104424,19509,31568,4996,5559,3325,22164,66618,2476,216938,38862,52182,79198,45740,52776,32070,132672,99716,19543,5515,40777,189082,6051,3103,146615,53740,256827,80531,104166,78245,34550,28933,112044,25609,72638,36640,25629,24311,56326,11524,83163,176777,23393,82414,6106,47340,19377,61707,10698,308354,82475,8066,15310,40669,62347,33738,15955,66085,140789,4852,37500,14102,5845,9813,54656,125339,67825,97677,67735,9225,11506,173536,159289,128709,12613,20379,46259,97207,42699,91068,45947,1271,211146,104284,55003,200933,14250,55082,49995,78439,185897,62876,11600,113451,32229,199030,36486,88975,65343,140167,135960,18324,638,86929,96115,46521,34134,437,7115,11819,80629,96102,12424,18570,81183,15089,30525,141756,201210,66036,47056,72512,98759,18003,68671,170020,14775,7872,86707,52754,279230,82966,13276,63550,101747,103537,30259,118515,110652,15079,51435,103073,104977,76964,5981,93330,91388,21050,56718,32736,2464,36579,80299,50499,49852,67313,130037,14722,2418,7783,76521,31600,78508,133834,49167,68452,47680,2363,25459,398867,67795,165159,68999,29316,33111,23239,12957,172786,66330,3816,4414,18417,12030,30134,7919,104924,9960,36133,26144,2606,105224,32252,42036,5670,72687,493,78524,84818,34715,26322,28439,16288,21908,74255,9962,67106,147542,139191,43764,59580,72920,393509,63136,82929,53980,78657,4543,607401,11665,318088,11366,291,7537,212378,77254,85829,59252,37336,13232,359,43117,65592,71269,15897,112396,53939,40125,35830,56176,59326,11017,50696,114234,276483,22837,65630,17802,22227,18232,52672,51170,100713,92360,22115,91842,43063,195957,356968,3794,166425,56044,29895,163395,11168,56699,40837,67702,27339,20360,231192,89936,103744,1998,34024,32020,3803,117654,38957,94943,70290,85606,26722,43088,170484,36210,406,282841,54770,175134,23335,44094,73528,47037,124952,31360,23208,78534,72068,123285,11398,40458,68804,30009,6939,3499,13268,40221,12223,61566,147101,333845,73905,2372,164740,293468,55614,327574,276569,59394,21940,154180,162596,28918,37039,166169,66943,84556,40144,10616,11569,25337,104847,48420,26654,76526,228642,20116,66358,44381,25600,2578,4777,70479,5757,64766,23229,11688,27998,24560,102127,6006,130766,11689,5848,24290,203474,51926,978,76149,170663,68953,2921,5461,117041,24360,59666,1098,64926,198078,5371,1164,166512,13456,28212,22987,95713,13302,90108,31433,120078,63947,42938,68482,38260,42265,39320,109797,110494,79743,2499,2553,58577,180281,4271,259624,94417,68375,108792,50431,9717,29255,33510,160264,7272,343301,125072,154624,6168,27338,71653,51148,140929,51394,65239,109678,179395,7761,38250,81439,23490,79048,66357,53948,107018,28855,38577,94122,43589,44430,13964,103761,2708,12411,86251,119198,17302,51623,35708,305,95393,8798,50755,41461,203637,19736,36010,8599,54546,13603,29448,118755,50260,10357,12209,86678,39594,88467,3844,173096,17788,39975,38222,14809,54370,53581,206337,67848,23694,2309,100876,41983,276960,18075,67827,14170,117970,89349,137088,75893,70548,20757,14167,10804,5959,67463,252225,44451,87528,36335,84163,175996,66912,69227,195270,25238,167523,96366,1306,7967,27706,52700,5703,285,51677,60197,54198,170697,20548,18244,779,4822,39984,71212,46802,72502,31290,74896,22028,154697,58236,131173,51124,252252,64234,48608,86759,36236,13170,143379,70560,101041,195793,70671,113164,99377,70248,34118,35685,116394,50149,302730,162145,121592,530,30881,45471,162432,6235,49645,34561,40287,58509,43757,422,70918,113036,190344,2611,233661,162936,32114,6464,94933,54217,64327,47486,871,90931,33404,19223,20183,3928,34508,38246,36359,11459,66339,9191,90968,122115,45027,18331,84569,82055,106565,89942,52285,40019,20438,243642,100401,166242,127119,212364,42312,34711,1671,15893,23179,5020,74061,17518,110465,11940,3873,22617,123195,18144,100726,6409,91356,45936,73471,30046,108852,212969,66765,126182,98830,107226,23993,59716,48049,45651,82888,36560,16256,52004,17296,104428,12933,38645,135609,18846,26099,40801,56830,26592,992,156526,79480,19458,91618,39463,7988,50793,54675,156601,19881,147333,1159,50024,77736,30826,64647,13710,115978,1388,51510,5276,207487,27647,59310,5123,271841,10922,2382,11425,17267,14495,244507,2126,492,33545,12138,8818,184454,19269,134769,8528,57017,135828,73552,22221,65808,39727,367870,203492,24483,41601,196988,198,55446,46931,68675,244761,5411,233379,19207,36423,316277,49169,745,204311,317017,131130,150130,101903,260111,182112,30434,25375,59274,16276,109977,54255,20999,82381,135770,2885,31724,118209,21645,119343,36886,142445,81249,42421,43503,128310,66260,92555,94890,19672,1769,178045,35419,28740,2136,226543,24030,82907,124857,54353,157870,33436,38109,85642,96673,3118,112407,1944,31498,102206,135319,205619,160787,28723,91910,50034,79540,24819,28372,80113,173951,41937,15370,19059,55603,38854,100638,70561,519,5157,19218,16617,91793,3881,75012,176191,145596,111491,20452,154738,27981,1142,2054,22256,54130,9776,19737,32399,69945,421673,103058,91031,7281,152241,74595,46116,86993,29309,22846,33982,54529,14961,41775,23014,131668,87854,171036,94711,50319,6054,72531,3482,3581,15424,83151,45387,66155,3796,118067,32026,181774,82656,49811,12569,44671,54996,83240,157346,143069,2108,19813,11164,42601,55367,1359,101577,27699,239450,9023,33206,152235,154525,73472,7296,55929,9643,80206,87554,68722,118103,89632,161537,59640,106041,77231,63719,12373,64601,98305,1056,46674,68549,18960,17748,19013,48707,296146,134285,64092,30266,15379,85084,87899,25772,62788,25525,31250,18740,80665,23101,34025,9462,7075,49746,39284,229669,57834,2626,248569,91798,873,22206,84442,112152,160148,59240,6711,191327,15256,141511,171566,14493,68797,15010,17086,72828,164513,36088,32054,8175,11054,81290,64307,66636,51647,21137,68255,236474,72999,12123,66901,25817,58290,23813,41818,87351,51685,349139,15386,129027,92193,14750,7028,76653,56861,59524,43395,20422,123741,40958,19478,22983,87931,5921,15341,71240,18213,18961,25648,27846,61261,75568,216919,44661,12442,49311,68342,12399,74324,7455,42754,46158,66251,405,72411,77704,58295,15625,4552,53101,50537,30941,37141,35032,18292,98289,17870,11072,115848,60108,70972,17300,13269,63524,140693,109294,93883,56701,69184,33638,4485,36667,26721,24408,5954,28290,80247,1895,82128,40307,96015,11241,5825,45230,255638,760,31698,12512,26145,17584,92444,8948,17954,82479,9085,5850,120208,125877,9751,11265,22102,63150,153550,69826,75885,141075,131001,14419,128804,34259,129918,115229,23808,23274,3580,82265,18942,81698,8545,39913,79933,15732,6741,38339,39271,43577,31006,30604,53478,48340,102062,39630,12695,91584,222,20589,89230,14688,30824,97582,47266,16379,99608,42679,70464,24481,4475,80121,49522,150280,121584,178585,20071,96420,5695,31648,64033,262050,20662,107571,34749,48635,192388,60052,163993,43727,40545,72642,99324,61819,17935,20846,61496,56268,69226,133071,52853,72003,57628,110499,29460,88178,40245,24970,58958,17281,21360,121825,31853,79912,81792,201844,95444,13218,256154,26236,61260,122519,90685,37984,5119,125295,126359,310134,54407,166396,6520,28971,31149,11811,266489,27120,1794,2171,23105,744,2814,118930,46693,140092,4993,67746,27308,66270,97039,17636,6061,69135,4202,178278,7472,32642,40673,174656,26758,204108,44815,95661,95589,192828,73663,173039,77882,43232,71654,83845,55846,26313,21216,79689,31469,85659,11793,17473,17e3,64471,78858,98555,104223,20905,121028,127696,15679,22246,93167,203415,40670,1525,47197,54730,29955,27650,142614,22925,38365,107626,61283,232239,25514,194946,12768,9309,63949,114873,57567,12136,30868,3548,537341,175026,133711,27455,27667,20740,32351,1997,26211,180188,35259,10358,54362,10747,42370,12304,6425,39816,22704,99010,215128,314017,17879,58536,20732,266131,43327,1650,27592,10040,89403,28410,125002,175732,21475,13832,98954,112550,155503,53781,62057,220651,63490,218647,26496,31974,28320,13557,72935,37393,40244,102949,25746,888,15552,12165,23782,23008,37306,182690,178294,86799,19876,69717,10583,4303,116880,7218,92683,64905,100026,340736,142052,148467,8925,2702,63925,75337,81983,220124,89751,251,226035,14097,1808,3284,142418,16036,72819,370102,13289,144922,3996,50264,199033,45199,139880,9835,4702,60405,74816,5438,7368,27687,162954,23655,159039,21280,61851,4481,92865,109762,3285,29851,3021,104939,2905,329,63385,22681,52094,12855,38488,18381,19211,7162,61266,8835,22825,64931,45593,66502,25309,78141,46199,59413,50610,12804,59952,186517,61018,42372,46728,18388,90815,296771,59091,46636,192289,83547,3423,29852,2745,18624,16583,357641,32404,34874,30511,86377,868,86271,59760,81404,39749,3360,74207,15394,156217,48665,41137,72366,52831,77735,59042,22515,6142,88767,22116,68286,40920,11463,78197,68958,24062,63527,100286,139882,65777,28889,12481,28953,8266,22258,3319,99181,17609,29140,179534,30832,42841,194315,120705,27548,161124,113924,42548,41864,56260,25499,42783,177062,105955,6406,14311,23992,86657,31334,225197,24185,39921,1845,104026,301294,95718,4802,8899,157667,77564,49184,6115,80340,47518,43455,6339,54561,39882,35469,115497,123233,68548,127594,20262,97680,60841,92970,5781,28954,4558,61038,45382,35089,49876,115005,15489,27010,91676,38840,12352,20606,19800,87761,12264,9268,146639,106838,47766,91230,8234,8811,48534,107720,27259,20572,34400,108143,52933,55637,28872,61739,77203,11162,21038,66975,30423,96721,31993,45541,7376,132425,71889,178420,446221,108925,260438,102283,4056,2948,77259,83943,38199,125457,36830,123208,391,36356,138390,99456,92051,3502,239674,36201,114068,75270,3160,39536,218269,27622,12173,56780,8501,127192,66434,47097,13635,2561,98519,73258,96646,123095,5710,42788,66384,49394,12035,7389,23253,61155,251141,4195,439,16897,56354,25580,66462,110064,188570,17260,12827,9699,13844,208611,7653,89448,41275,5078,37917,53356,45195,15877,74097,19628,231041,21225,15175,220310,3514,79626,97496,21622,20434,48926,95346,83036,47481,10584,14331,9885,4023,29396,21139,112214,87100,83793,9796,6087,423,60612,11748,26713,29951,132442,40260,17901,55713,5620,88019,161912,177970,3729,49808,91492,35869,138357,40508,3440,61216,56765,68562,68594,2747,88777,43463,9266,44125,1567,2354,92238,29774,47207,47789,8087,20375,191924,3415,6866,22316,82861,233038,150194,13698,143688,29411,72175,16465,14358,220015,80701,53366,59020,22661,13459,20745,8739,76074,31836,46743,45518,51271,43243,19787,114669,18136,239700,15692,105609,60536,95846,27460,7762,225232,44749,11206,14819,1690,50647,170657,224611,139596,21945,134017,15972,174955,230538,2804,25876,121127,120612,18921,14091,435,132371,178953,144326,158152,244604,220898,21478,121856,5193,4031,105823,11008,105637,134379,253591,97747,34661,247232,20987,6949,41341,106816,110210,45958,68775,150399,11104,93886,85393,28015,147749,112829,1874,19994,21402,16367,8771,33037,11041,96701,33718,36354,26705,23369,49672,29673,72422,32419,77403,36496,28454,23255,595452,242129,61562,58092,99507,41978,40275,32822,6490,1688,175006,8864,58895,13716,45499,120546,128742,24764,141091,121483,7704,83412,14149,58968,39239,165272,32855,72184,73217,52628,13081,73279,43816,9383,216195,56823,62824,48448,191659,3540,37804,223316,171995,17606,199976,21733,141024,23939,22361,42786,77686,3523,80005,1542,22284,32365,87514,43833,4665,93155,94832,32683,134693,9494,14089,54921,16128,131782,4574,168587,76247,7989,139975,821,8368,108503,59142,158797,137,205170,75523,18074,13682,91077,100268,65492,54879,15629,43906,38056,45569,40180,53442,24989,20763,24867,15152,30094,129619,140074,2547,23241,27435,7171,186002,4003,5665,192737,17011,57494,230276,241405,19513,27773,95035,92634,204282,5213,32107,87507,3343,10550,3806,71001,60568,10837,23329,144168,128318,1900,47551,4240,119250,50444,64351,85851,4298,169567,1401,13814,51871,3524,75657,25885,41336,136110,12759,77034,71759,22871,604,13904,21921,84968,84920,208954,45074,13960,4204,102255,98169,58850,58448,58879,145889,22357,8919,58428,99427,13803,157733,68068,11350,61811,360594,118202,1237,824,163104,118356,5520,769,31581,20685,28799,181670,40637,38360,7803,8532,69133,37235,53702,86519,85294,62552,21026,8827,142049,30386,136352,11344,158995,19682,38293,242831,103750,55804,128690,108982,27181,18409,12158,167408,120214,132169,90132,134213,7909,28749,44600,10115,55121,16581,10184,82321,25270,21542,26957,2707,106897,145041,39459,145473,48977,26927,126025,157588,249490,64382,78904,11519,1284,9871,82999,78364,173378,109477,59373,50500,2168,30838,39301,154212,66143,91333,150198,28707,45440,20859,120529,33550,21869,80014,153042,19905,153475,81658,20177,158807,120156,38566,50089,6373,63762,19510,14764,26971,108976,72526,271571,84066,18309,66438,30530,98093,65740,53411,123161,23236,24050,64130,38975,177329,37078,133183,101562,89382,51844,19732,22941,26188,51520,22735,5648,43118,130081,12788,124654,200339,25097,48211,109243,196680,216387,69966,69817,55482,6031,5293,71675,18384,137078,73066,49162,68808,11413,25901,106884,643,4412,18355,21241,36413,7382,16629,107795,6893,5332,242,30258,49533,74544,39490,16572,4199,12724,122748,188262,108611,126989,88570,141456,72114,87870,20276,7688,37800,22712,59241,60718,170557,299711,3515,8271,16537,107094,81327,11044,299399,71715,154123,32440,16413,169052,42581,104608,33812,5696,16661,103419,161,39832,179084,236109,71375,67676,75508,93156,21777,80970,58192,43293,31757,51423,41531,128929,182898,12880,113231,42107,61632,45914,4884,67180,4744,128700,2781,25201,36266,194380,87971,115254,341,41014,57871,185488,92043,17835,89050,130954,19517,84683,21380,72813,45915,93851,203411,167547,176973,63085,59916,20537,17002,36711,31276,39969,36726,65357,13243,38432,15644,94063,10719,22582,47135,16038,5381,184022,23165,76012,35198,1139,18638,45545,84452,27199,192134,119684,123811,5655,13706,141932,24822,17767,37181,5142,34476,97412,225589,175180,68777,122606,11285,10611,55686,209377,100096,22340,26689,27070,51760,149649,30372,35871,50512,21058,17439,326617,170142,107982,135181,188954,85308,56136,9593,42680,26872,58659,5746,73512,25617,2549,48114,80911,1733,156604,26196,22629,16115,47515,69763,3011,81888,4772,72580,95021,23422,61841,69210,315242,20699,13055,19951,157737,52563,31431,59838,383,35462,55449,68880,41821,63984,213573,50441,41808,53480,40494,130778,19335,64598,138641,25152,27950,8191,57199,35528,15674,204275,70906,3181,25677,26876,2717,132658,110950,49839,49173,20862,35375,20135,50308,213100,76835,103314,64615,7399,59108,22329,92119,34649,57370,20920,11016,129444,35262,68761,92220,17938,16569,14039,59057,72434,160415,16248,7148,40010,37706,58080,149680,137070,78086,105307,67671,478,32041,27870,179796,13035,49691,26716,81195,147295,137143,13139,168200,45495,9782,24335,30927,557,172080,226060,57625,14169,50148,53124,40398,22321,77917,74830,6334,70846,6323,77024,9517,93307,10110,13831,4136,54992,69172,15584,33047,77148,17711,31085,33621,126215,21795,114268,35065,145060,59511,11859,154026,131303,76184,102024,58089,66420,135114,32471,26586,9983,31046,232116,194394,99288,132319,610,10459,98229,59105,34807,29993,22965,157578,4107,28141,140655,20549,7101,7846,55412,80778,17135,7430,73220,57649,27939,10941,92844,158421,173174,64726,12726,65143,202755,176021,57189,4575,7195,177904,25156,72235,146111,11686,22007,21899,135284,138978,752,10797,65724,5168,151662,92745,109290,75372,160210,34035,17369,97529,60335,106079,2306,2423,4131,80159,158934,136359,59711,4508,40343,250673,65860,78304,17795,104032,148124,25350,58256,33525,20642,75457,81761,183350,24569,46458,63924,58666,8047,32937,81997,33987,7245,25623,17931,5112,122123,47,80630,79317,15250,8531,7845,42854,87493,104751,31479,59823,168974,84953,28434,95840,86398,8138,40995,4860,26024,36508,101200,49636,8174,187199,50053,89152,20854,66310,61067,8004,30413,115274,278866,106773,120445,13253,40328,1516,70360,32461,1703,301530,572,38536,75536,423620,18713,1916,3143,70650,60724,42007,14851,262515,136679,187160,70985,131034,54573,35055,14435,225137,23005,26325,174156,20786,195824,84394,19162,85376,70194,35963,49566,21279,91399,94216,64873,68891,55512,45590,3382,26979,72069,97782,126859,187860,246200];var O5e=L(Dn(),1);var ME=15,UE=class{constructor(e){let{peerRouting:t,routingTable:n,refreshInterval:i,refreshQueryTimeout:o,lan:s}=e;this.log=z(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=t,this.routingTable=n,this.refreshInterval=i??3e5,this.refreshQueryTimeout=o??3e4,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){this.refreshTimeoutId!=null&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");let t=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(t);this.log(`max common prefix length ${t}`),this.log(`tracked CPLs [ ${n.map(i=>i.toISOString()).join(", ")} ]`),Promise.all(n.map(async(i,o)=>{try{if(await this._refreshCommonPrefixLength(o,i,e),this._numPeersForCpl(t)===0){let s=Math.min(2*(o+1),n.length-1);for(let a=o+1;a<s+1;a++)try{await this._refreshCommonPrefixLength(a,i,e)}catch(c){this.log.error(c)}}}catch(s){this.log.error(s)}})).catch(i=>{this.log.error(i)}).then(()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),this.refreshTimeoutId.unref!=null&&this.refreshTimeoutId.unref()}).catch(i=>{this.log.error(i)})}async _refreshCommonPrefixLength(e,t,n){if(!n&&t.getTime()>Date.now()-this.refreshInterval){this.log("not running refresh for cpl %s as time since last refresh not above interval",e);return}let i=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,i,this.routingTable.size);let o=new O5e.TimeoutController(this.refreshQueryTimeout);try{let s=await Ua(this.peerRouting.getClosestPeers(i.toBytes(),{signal:o.signal}));this.log(`found ${s} peers that were close to imaginary peer %p`,i),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,i,this.routingTable.size)}finally{o.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>ME&&(e=ME);let t=[];for(let n=0;n<=e;n++)t[n]=this.commonPrefixLengthRefreshedAt[n]??new Date;return t}async _generateRandomPeerId(e){if(this.routingTable.kb==null)throw new Error("Routing table not started");let t=qi(2),n=(t[1]<<8)+t[0],i=await this._makePeerId(this.routingTable.kb.localNodeId,n,e);return Mr(i)}async _makePeerId(e,t,n){if(n>ME)throw new Error(`Cannot generate peer ID for common prefix length greater than ${ME}`);let s=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>n,a=65535<<16-(n+1),c=s&a|t&~a,u=N5e[c],l=new ArrayBuffer(34),d=new DataView(l,0,l.byteLength);return d.setUint8(0,ot.code),d.setUint8(1,32),d.setUint32(2,u,!1),new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}_maxCommonPrefix(){let e=0;for(let t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(let n of this._prefixLengths())n===e&&t++;return t}*_prefixLengths(){if(this.routingTable.kb!=null)for(let{id:e}of this.routingTable.kb.toIterable()){let t=N0(this.routingTable.kb.localNodeId,e),n=0;for(let i of t)if(i===0)n++;else break;yield n}}};var L5e;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.key!=null&&(n.uint32(10),n.bytes(t.key)),t.value!=null&&(n.uint32(18),n.bytes(t.value)),t.author!=null&&(n.uint32(26),n.bytes(t.author)),t.signature!=null&&(n.uint32(34),n.bytes(t.signature)),t.timeReceived!=null&&(n.uint32(42),n.string(t.timeReceived)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.key=t.bytes();break;case 2:i.value=t.bytes();break;case 3:i.author=t.bytes();break;case 4:i.signature=t.bytes();break;case 5:i.timeReceived=t.string();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(L5e||(L5e={}));var Uu;(function(r){let e;(function(a){a.PUT_VALUE="PUT_VALUE",a.GET_VALUE="GET_VALUE",a.ADD_PROVIDER="ADD_PROVIDER",a.GET_PROVIDERS="GET_PROVIDERS",a.FIND_NODE="FIND_NODE",a.PING="PING"})(e=r.MessageType||(r.MessageType={}));let t;(function(a){a[a.PUT_VALUE=0]="PUT_VALUE",a[a.GET_VALUE=1]="GET_VALUE",a[a.ADD_PROVIDER=2]="ADD_PROVIDER",a[a.GET_PROVIDERS=3]="GET_PROVIDERS",a[a.FIND_NODE=4]="FIND_NODE",a[a.PING=5]="PING"})(t||(t={})),function(a){a.codec=()=>mf(t)}(e=r.MessageType||(r.MessageType={}));let n;(function(a){a.NOT_CONNECTED="NOT_CONNECTED",a.CONNECTED="CONNECTED",a.CAN_CONNECT="CAN_CONNECT",a.CANNOT_CONNECT="CANNOT_CONNECT"})(n=r.ConnectionType||(r.ConnectionType={}));let i;(function(a){a[a.NOT_CONNECTED=0]="NOT_CONNECTED",a[a.CONNECTED=1]="CONNECTED",a[a.CAN_CONNECT=2]="CAN_CONNECT",a[a.CANNOT_CONNECT=3]="CANNOT_CONNECT"})(i||(i={})),function(a){a.codec=()=>mf(i)}(n=r.ConnectionType||(r.ConnectionType={}));let o;(function(a){let c;a.codec=()=>(c==null&&(c=Dt((u,l,d={})=>{if(d.lengthDelimited!==!1&&l.fork(),u.id!=null&&(l.uint32(10),l.bytes(u.id)),u.addrs!=null)for(let h of u.addrs)l.uint32(18),l.bytes(h);u.connection!=null&&(l.uint32(24),r.ConnectionType.codec().encode(u.connection,l)),d.lengthDelimited!==!1&&l.ldelim()},(u,l)=>{let d={addrs:[]},h=l==null?u.len:u.pos+l;for(;u.pos<h;){let f=u.uint32();switch(f>>>3){case 1:d.id=u.bytes();break;case 2:d.addrs.push(u.bytes());break;case 3:d.connection=r.ConnectionType.codec().decode(u);break;default:u.skipType(f&7);break}}return d})),c),a.encode=u=>Pt(u,a.codec()),a.decode=u=>kt(u,a.codec())})(o=r.Peer||(r.Peer={}));let s;r.codec=()=>(s==null&&(s=Dt((a,c,u={})=>{if(u.lengthDelimited!==!1&&c.fork(),a.type!=null&&(c.uint32(8),r.MessageType.codec().encode(a.type,c)),a.clusterLevelRaw!=null&&(c.uint32(80),c.int32(a.clusterLevelRaw)),a.key!=null&&(c.uint32(18),c.bytes(a.key)),a.record!=null&&(c.uint32(26),c.bytes(a.record)),a.closerPeers!=null)for(let l of a.closerPeers)c.uint32(66),r.Peer.codec().encode(l,c);if(a.providerPeers!=null)for(let l of a.providerPeers)c.uint32(74),r.Peer.codec().encode(l,c);u.lengthDelimited!==!1&&c.ldelim()},(a,c)=>{let u={closerPeers:[],providerPeers:[]},l=c==null?a.len:a.pos+c;for(;a.pos<l;){let d=a.uint32();switch(d>>>3){case 1:u.type=r.MessageType.codec().decode(a);break;case 10:u.clusterLevelRaw=a.int32();break;case 2:u.key=a.bytes();break;case 3:u.record=a.bytes();break;case 8:u.closerPeers.push(r.Peer.codec().decode(a,a.uint32()));break;case 9:u.providerPeers.push(r.Peer.codec().decode(a,a.uint32()));break;default:a.skipType(d&7);break}}return u})),s),r.encode=a=>Pt(a,r.codec()),r.decode=a=>kt(a,r.codec())})(Uu||(Uu={}));var wn=Uu.MessageType,VKe=Uu.ConnectionType,U5e=Object.keys(wn),an=class r{constructor(e,t,n){if(!(t instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=t,this.clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let e=this.clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this.clusterLevelRaw=e}serialize(){return Uu.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(B5e),providerPeers:this.providerPeers.map(B5e),record:this.record==null?void 0:this.record.serialize().subarray()})}static deserialize(e){var i;let t=Uu.decode(e),n=new r(t.type??Uu.MessageType.PUT_VALUE,t.key??Uint8Array.from([]),t.clusterLevelRaw??0);return n.closerPeers=t.closerPeers.map(M5e),n.providerPeers=t.providerPeers.map(M5e),((i=t.record)==null?void 0:i.length)!=null&&(n.record=En.deserialize(t.record)),n}};function B5e(r){return{id:r.id.toBytes(),addrs:(r.multiaddrs??[]).map(t=>t.bytes),connection:VKe.CONNECTED}}function M5e(r){if(r.id==null)throw new Error("Invalid peer in message");return{id:Mr(r.id),multiaddrs:(r.addrs??[]).map(e=>Ee(e)),protocols:[]}}function FB(r){return{...r,name:"SENDING_QUERY",type:0,messageName:r.type,messageType:U5e.indexOf(r.type.toString())}}function Rp(r){return{...r,name:"PEER_RESPONSE",type:1,messageName:r.messageType,closer:r.closer!=null?r.closer:[],providers:r.providers!=null?r.providers:[]}}function kp(r){return{...r,name:"FINAL_PEER",type:2}}function to(r){return{...r,name:"QUERY_ERROR",type:3}}function VB(r){return{...r,name:"PROVIDER",type:4}}function Pp(r){return{...r,name:"VALUE",type:5}}function zB(r){return{...r,name:"DIALING_PEER",type:7}}var FE=class extends at{constructor(e,t){super();let{protocol:n,lan:i}=t;this.components=e,this.log=z(`libp2p:kad-dht:${i?"lan":"wan"}:network`),this.running=!1,this.protocol=n}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,t,n={}){if(!this.running)return;this.log("sending %s to %p",t.type,e),yield zB({peer:e}),yield FB({to:e,type:t.type});let i;try{let s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n),a=await this._writeReadMessage(s,t.serialize(),n);yield Rp({from:e,messageType:a.type,closer:a.closerPeers,providers:a.providerPeers,record:a.record})}catch(o){yield to({from:e,error:o})}finally{i!=null&&i.close()}}async*sendMessage(e,t,n={}){if(!this.running)return;this.log("sending %s to %p",t.type,e),yield zB({peer:e}),yield FB({to:e,type:t.type});let i;try{let s=await(await this.components.connectionManager.openConnection(e,n)).newStream(this.protocol,n);await this._writeMessage(s,t.serialize(),n),yield Rp({from:e,messageType:t.type})}catch(o){yield to({from:e,error:o})}finally{i!=null&&i.close()}}async _writeMessage(e,t,n){n.signal!=null&&(e=Ai(e,n.signal)),await Ke([t],Bn(),e,or)}async _writeReadMessage(e,t,n){n.signal!=null&&(e=Ai(e,n.signal));let i=await Ke([t],Bn(),e,gn(),async s=>{let a=await xn(s);if(a!=null)return a;throw new X("No message received","ERR_NO_MESSAGE_RECEIVED")}),o=an.deserialize(i);return o.closerPeers.forEach(s=>{this.dispatchEvent(new be("peer",{detail:s}))}),o.providerPeers.forEach(s=>{this.dispatchEvent(new be("peer",{detail:s}))}),o}};async function z5(r,e){let t=e.key,i=ie(t).split("/");if(i.length<3)return;let o=r[i[1].toString()];if(o==null){let s="Invalid record keytype";throw new X(s,"ERR_INVALID_RECORD_KEY_TYPE")}await o(t,e.value)}var zKe=async(r,e)=>{if(!(r instanceof Uint8Array))throw new X('"key" must be a Uint8Array',"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(r.byteLength<5)throw new X("invalid public key record","ERR_INVALID_RECORD_KEY_TOO_SHORT");if(ie(r.subarray(0,4))!=="/pk/")throw new X("key was not prefixed with /pk/","ERR_INVALID_RECORD_KEY_BAD_PREFIX");let n=r.slice(4),i=await ot.digest(e);if(!ct(n,i.bytes))throw new X("public key does not match passed in key","ERR_INVALID_RECORD_HASH_MISMATCH")},F5e={pk:zKe};function V5e(r,e,t){if(t.length===0){let s="No records given";throw new X(s,"ERR_NO_RECORDS_RECEIVED")}let i=ie(e).split("/");if(i.length<3){let s="Record key does not have a selector function";throw new X(s,"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}let o=r[i[1].toString()];if(o==null){let s=`Unrecognized key prefix: ${i[1]}`;throw new X(s,"ERR_UNRECOGNIZED_KEY_PREFIX")}return t.length===1?0:o(e,t)}function qKe(r,e){return 0}var z5e={pk:qKe};var VE=class{constructor(e,t){let{validators:n,selectors:i,peerRouting:o,queryManager:s,routingTable:a,network:c,lan:u}=t;this.components=e,this.log=z(`libp2p:kad-dht:${u?"lan":"wan"}:content-fetching`),this.validators=n,this.selectors=i,this.peerRouting=o,this.queryManager=s,this.routingTable=a,this.network=c}async putLocal(e,t){let n=D0(e);await this.components.datastore.put(n,t)}async getLocal(e){this.log("getLocal %b",e);let t=D0(e);this.log("fetching record for key %k",t);let n=await this.components.datastore.get(t);this.log("found %k in local datastore",t);let i=En.deserialize(n);return await z5(this.validators,i),i}async*sendCorrectionRecord(e,t,n,i={}){this.log("sendCorrection for %b",e);let o=MB(e,n);for(let{value:s,from:a}of t){if(ct(s,n)){this.log("record was ok");continue}if(this.components.peerId.equals(a)){try{let l=D0(e);this.log(`Storing corrected record for key ${l.toString()}`),await this.components.datastore.put(l,o.subarray())}catch(l){this.log.error("Failed error correcting self",l)}continue}let c=!1,u=new an(wn.PUT_VALUE,e,0);u.record=En.deserialize(o);for await(let l of this.network.sendRequest(a,u,i))l.name==="PEER_RESPONSE"&&l.record!=null&&ct(l.record.value,En.deserialize(o).value)&&(c=!0),yield l;c||(yield to({from:a,error:new X("value not put correctly","ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(e,t,n={}){this.log("put key %b value %b",e,t);let i=MB(e,t),o=D0(e);this.log(`storing record for key ${o.toString()}`),await this.components.datastore.put(o,i.subarray()),yield*Ke(this.peerRouting.getClosestPeers(e,{signal:n.signal}),s=>Ut(s,a=>async()=>{if(a.name!=="FINAL_PEER")return[a];let c=[],u=new an(wn.PUT_VALUE,e,0);u.record=En.deserialize(i),this.log("send put to %p",a.peer.id);for await(let l of this.network.sendRequest(a.peer.id,u,n))c.push(l),l.name==="PEER_RESPONSE"&&(l.record!=null&&ct(l.record.value,En.deserialize(i).value)||c.push(to({from:a.peer.id,error:new X("value not put correctly","ERR_PUT_VALUE_INVALID")})));return c}),s=>Uc(s,{ordered:!1,concurrency:3}),async function*(s){for await(let a of s)yield*a})}async*get(e,t={}){this.log("get %b",e);let n=[];for await(let a of this.getMany(e,t))a.name==="VALUE"&&n.push(a),yield a;if(n.length===0)return;let i=n.map(a=>a.value),o=0;try{o=V5e(this.selectors,e,i)}catch(a){if(a.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw a}let s=i[o];if(this.log("GetValue %b %b",e,s),s==null)throw new X("best value was not found","ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,n,s,t),yield n[o]}async*getMany(e,t={}){this.log("getMany values for %b",e);try{let a=await this.getLocal(e);yield Pp({value:a.value,from:this.components.peerId})}catch(a){this.log("error getting local value for %b",e,a)}let n=await nc(e),i=this.routingTable.closestPeers(n);this.log("found %d peers in routing table",i.length);let o=this,s=async function*({peer:a,signal:c}){for await(let u of o.peerRouting.getValueOrPeers(a,e,{signal:c}))yield u,u.name==="PEER_RESPONSE"&&u.record!=null&&(yield Pp({from:a,value:u.record.value}))};yield*this.queryManager.run(e,i,s,t)}};var zE=class{constructor(e,t){let{network:n,peerRouting:i,queryManager:o,routingTable:s,providers:a,lan:c}=t;this.components=e,this.log=z(`libp2p:kad-dht:${c?"lan":"wan"}:content-routing`),this.network=n,this.peerRouting=i,this.queryManager=o,this.routingTable=s,this.providers=a}async*provide(e,t,n={}){this.log("provide %s",e),await this.providers.addProvider(e,this.components.peerId);let i=new an(wn.ADD_PROVIDER,e.multihash.bytes,0);i.providerPeers=[{id:this.components.peerId,multiaddrs:t,protocols:[]}];let o=0,s=a=>async()=>{if(a.name!=="FINAL_PEER")return[a];let c=[];this.log("putProvider %s to %p",e,a.peer.id);try{this.log("sending provider record for %s to %p",e,a.peer.id);for await(let u of this.network.sendMessage(a.peer.id,i,n))u.name==="PEER_RESPONSE"&&(this.log("sent provider record for %s to %p",e,a.peer.id),o++),c.push(u)}catch(u){this.log.error("error sending provide record to peer %p",a.peer.id,u),c.push(to({from:a.peer.id,error:u}))}return c};yield*Ke(this.peerRouting.getClosestPeers(e.multihash.bytes,n),a=>Ut(a,c=>s(c)),a=>Uc(a,{ordered:!1,concurrency:3}),async function*(a){for await(let c of a)yield*c}),this.log("sent provider records to %d peers",o)}async*findProviders(e,t){let n=this.routingTable.kBucketSize,i=e.multihash.bytes,o=await nc(i),s=this;this.log("findProviders %c",e);let a=await this.providers.getProviders(e);if(a.length>0){let l=[];for(let d of a.slice(0,n))l.push({id:d,multiaddrs:(await this.components.peerStore.addressBook.get(d)??[]).map(h=>h.multiaddr),protocols:[]});yield Rp({from:this.components.peerId,messageType:wn.GET_PROVIDERS,providers:l}),yield VB({from:this.components.peerId,providers:l})}if(a.length>=n)return;let c=async function*({peer:l,signal:d}){let h=new an(wn.GET_PROVIDERS,i,0);yield*s.network.sendRequest(l,h,{signal:d})},u=new Set(a.map(l=>l.toString()));for await(let l of this.queryManager.run(i,this.routingTable.closestPeers(o),c,t))if(yield l,l.name==="PEER_RESPONSE"){this.log("Found %d provider entries for %c and %d closer peers",l.providers.length,e,l.closer.length);let d=[];for(let h of l.providers)u.has(h.id.toString())||(u.add(h.id.toString()),d.push(h));if(d.length>0&&(yield VB({from:l.from,providers:d})),u.size===n)return}}};var qE=class{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}async add(e){if(this.peerDistances.find(i=>i.peerId.equals(e))!=null)return;let t=await ls(e),n={peerId:e,distance:N0(this.originDhtKey,t)};this.peerDistances.push(n),this.peerDistances.sort((i,o)=>_4(i.distance,o.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(e.length===0)return!1;if(this.length===0)return!0;let t=await Promise.all(e.map(ls)),n=this.peerDistances[this.peerDistances.length-1].distance;for(let i of t){let o=N0(this.originDhtKey,i);if(_4(o,n)<0)return!0}return!1}};var $E=class{constructor(e,t){let{routingTable:n,network:i,validators:o,queryManager:s,lan:a}=t;this.components=e,this.routingTable=n,this.network=i,this.validators=o,this.queryManager=s,this.log=z(`libp2p:kad-dht:${a?"lan":"wan"}:peer-routing`)}async findPeerLocal(e){let t,n=await this.routingTable.find(e);if(n!=null){this.log("findPeerLocal found %p in routing table",e);try{t=await this.components.peerStore.get(n)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i}}if(t==null)try{t=await this.components.peerStore.get(e)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i}if(t!=null)return this.log("findPeerLocal found %p in peer store",e),{id:t.id,multiaddrs:t.addresses.map(i=>i.multiaddr),protocols:[]}}async*_getValueSingle(e,t,n={}){let i=new an(wn.GET_VALUE,t,0);yield*this.network.sendRequest(e,i,n)}async*getPublicKeyFromNode(e,t={}){let n=I5e(e);for await(let i of this._getValueSingle(e,n,t))if(yield i,i.name==="PEER_RESPONSE"&&i.record!=null){let o=await Sr(Cl.marshalPublicKey({bytes:i.record.value}));if(!o.equals(e))throw new X("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(o.publicKey==null)throw new X("public key missing","ERR_PUBLIC_KEY_MISSING");yield Pp({from:e,value:o.publicKey})}throw new X(`Node not responding with its public key: ${e.toString()}`,"ERR_INVALID_RECORD")}async*findPeer(e,t={}){this.log("findPeer %p",e);let n=await this.findPeerLocal(e);if(n!=null){this.log("found local"),yield kp({from:this.components.peerId,peer:n});return}let i=await ls(e),o=this.routingTable.closestPeers(i);if(o.find(l=>l.equals(e))!=null)try{let l=await this.components.peerStore.get(e);this.log("found in peerStore"),yield kp({from:this.components.peerId,peer:{id:l.id,multiaddrs:l.addresses.map(d=>d.multiaddr),protocols:[]}});return}catch(l){if(l.code!=="ERR_NOT_FOUND")throw l}let a=this,c=async function*({peer:l,signal:d}){let h=new an(wn.FIND_NODE,e.toBytes(),0);for await(let f of a.network.sendRequest(l,h,{signal:d}))if(yield f,f.name==="PEER_RESPONSE"){let m=f.closer.find(w=>w.id.equals(e));m!=null&&(yield kp({from:f.from,peer:m}))}},u=!1;for await(let l of this.queryManager.run(e.toBytes(),o,c,t))l.name==="FINAL_PEER"&&(u=!0),yield l;u||(yield to({from:this.components.peerId,error:new X("Not found","ERR_NOT_FOUND")}))}async*getClosestPeers(e,t={}){this.log("getClosestPeers to %b",e);let n=await nc(e),i=this.routingTable.closestPeers(n),o=this,s=new qE(n,this.routingTable.kBucketSize);await Promise.all(i.map(async c=>{await s.add(c)}));let a=async function*({peer:c,signal:u}){o.log("closerPeersSingle %s from %p",ie(e,"base32"),c);let l=new an(wn.FIND_NODE,e,0);yield*o.network.sendRequest(c,l,{signal:u})};for await(let c of this.queryManager.run(e,i,a,t))yield c,c.name==="PEER_RESPONSE"&&await Promise.all(c.closer.map(async u=>{await s.add(u.id)}));this.log("found %d peers close to %b",s.length,e);for(let c of s.peers)yield kp({from:this.components.peerId,peer:{id:c,multiaddrs:(await this.components.peerStore.addressBook.get(c)??[]).map(u=>u.multiaddr),protocols:[]}})}async*getValueOrPeers(e,t,n={}){for await(let i of this._getValueSingle(e,t,n)){if(i.name==="PEER_RESPONSE"&&i.record!=null)try{await this._verifyRecordOnline(i.record)}catch{let s="invalid record received, discarded";this.log(s),yield to({from:i.from,error:new X(s,"ERR_INVALID_RECORD")});continue}yield i}}async _verifyRecordOnline(e){if(e.timeReceived==null)throw new X("invalid record received","ERR_INVALID_RECORD");await z5(this.validators,new En(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,t){let n=await nc(e),i=this.routingTable.closestPeers(n),o=[];for(let s of i)if(!s.equals(t))try{let a=await this.components.peerStore.addressBook.get(s),c=await this.components.peerStore.protoBook.get(s);o.push({id:s,multiaddrs:a.map(u=>u.multiaddr),protocols:c})}catch(a){if(a.code!=="ERR_NOT_FOUND")throw a}return o.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",o.length,e,t):this.log("getCloserPeersOffline could not find peer closer to %b than %p",e,t),o}};var q5e=L(E6(),1),qB=L(v1(),1);var O0=z("libp2p:kad-dht:providers"),KE=class{constructor(e,t={}){let{cacheSize:n,cleanupInterval:i,provideValidity:o}=t;this.components=e,this.cleanupInterval=i??36e5,this.provideValidity=o??864e5,this.cache=(0,q5e.default)(n??256),this.syncQueue=new On({concurrency:1}),this.started=!1}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval(()=>{this._cleanup().catch(e=>{O0.error(e)})},this.cleanupInterval))}async stop(){this.started=!1,this.cleaner!=null&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){await this.syncQueue.add(async()=>{let e=Date.now(),t=0,n=0,i=new Map,o=this.components.datastore.batch(),s=this.components.datastore.query({prefix:BB});for await(let a of s)try{let{cid:c,peerId:u}=$5e(a.key),l=K5e(a.value).getTime(),d=Date.now(),h=d-l,f=h>this.provideValidity;if(O0("comparing: %d - %d = %d > %d %s",d,l,h,this.provideValidity,f?"(expired)":""),f){n++,o.delete(a.key);let m=i.get(c)??new Set;m.add(u),i.set(c,m)}t++}catch(c){O0.error(c.message)}i.size>0?(O0("deleting %d / %d entries",n,t),await o.commit()):O0("nothing to delete");for(let[a,c]of i){let u=Dp(a),l=this.cache.get(u);if(l!=null){for(let d of c)l.delete(d);l.size===0?this.cache.remove(u):this.cache.set(u,l)}}O0("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){let t=Dp(e),n=this.cache.get(t);return n==null&&(n=await HKe(this.components.datastore,e),this.cache.set(t,n)),n}async addProvider(e,t){await this.syncQueue.add(async()=>{O0("%p provides %s",t,e);let n=await this._getProvidersMap(e);O0("loaded %s provs",n.size);let i=new Date;n.set(t.toString(),i);let o=Dp(e);this.cache.set(o,n),await GKe(this.components.datastore,e,t,i)})}async getProviders(e){return await this.syncQueue.add(async()=>(O0("get providers for %s",e),[...(await this._getProvidersMap(e)).keys()].map(n=>Be(n))),{throwOnTimeout:!0})}};function Dp(r){let e=typeof r=="string"?r:ie(r.multihash.bytes,"base32");return`${BB}/${e}`}async function GKe(r,e,t,n){let i=[Dp(e),"/",t.toString()].join(""),o=new Re(i),s=Uint8Array.from(qB.default.encode(n.getTime()));await r.put(o,s)}function $5e(r){let e=r.toString().split("/");if(e.length!==5)throw new Error(`incorrectly formatted provider entry key in datastore: ${r.toString()}`);return{cid:e[3],peerId:e[4]}}async function HKe(r,e){let t=new Map,n=r.query({prefix:Dp(e)});for await(let i of n){let{peerId:o}=$5e(i.key);t.set(o,K5e(i.value))}return t}function K5e(r){return new Date(qB.default.decode(r))}var W5e=L(Dn(),1),Y5e=L(va(),1);var j5e=L(Dn(),1),G5e=L(va(),1);var WKe=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*H5e(r){let{key:e,startingPeer:t,ourPeerId:n,signal:i,query:o,alpha:s,pathIndex:a,numPaths:c,cleanUp:u,queryFuncTimeout:l,log:d,peersSeen:h}=r,f=new On({concurrency:s}),m=await nc(e);function w(_,E){if(_==null)return;h.add(_);let S=BigInt("0x"+ie(N0(E,m),"base16"));f.add(async()=>{let p,g=[i];l!=null&&(p=new j5e.TimeoutController(l),g.push(p.signal));let y=(0,G5e.anySignal)(g);try{for await(let b of o({key:e,peer:_,signal:y,pathIndex:a,numPaths:c})){if(y.aborted)return;if(b.name==="PEER_RESPONSE")for(let x of b.closer){if(h.has(x.id)){d("already seen %p in query",x.id);continue}if(n.equals(x.id)){d("not querying ourselves");continue}let v=await ls(x.id);if(BigInt("0x"+ie(N0(v,m),"base16"))>S){d("skipping %p as they are not closer to %b than %p",x.id,e,_);continue}d("querying closer peer %p",x.id),w(x.id,v)}f.emit("completed",b)}p==null||p.clear()}catch(b){i.aborted?f.emit("error",b):f.emit("completed",to({from:_,error:b}))}finally{p==null||p.clear()}},{priority:WKe-S}).catch(p=>{d.error(p)})}w(t,await ls(t)),yield*YKe(f,i,u,d)}async function*YKe(r,e,t,n){let i=jt(),o=!0,s=[],a=()=>{o&&(n("clean up queue, results %d, queue size %d, pending tasks %d",s.length,r.size,r.pending),o=!1,r.clear(),s.splice(0,s.length))};for(r.on("completed",c=>{s.push(c),i.resolve()}),r.on("error",c=>{n("queue error",c),a(),i.reject(c)}),r.on("idle",()=>{n("queue idle"),o=!1,i.resolve()}),e.addEventListener("abort",()=>{n("abort queue");let c=o;a(),c&&i.reject(new X("Query aborted","ERR_QUERY_ABORTED"))}),t.addEventListener("cleanup",()=>{a(),i.resolve()});o;)for(await i.promise,i=jt();s.length>0;){let c=s.shift();c!=null&&(yield c)}yield*s}var Np=require("events");var GE=class{constructor(e,t){let{lan:n=!1,disjointPaths:i=20,alpha:o=3}=t;this.components=e,this.disjointPaths=i??20,this.controllers=new Set,this.running=!1,this.alpha=o??3,this.lan=n,this.queries=0}isStarted(){return this.running}async start(){this.running=!0,this.components.metrics!=null&&this.metrics==null&&(this.metrics={runningQueries:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_running_queries`),queryTime:this.components.metrics.registerMetric(`libp2p_kad_dht_${this.lan?"lan":"wan"}_query_time_seconds`)})}async stop(){this.running=!1;for(let e of this.controllers)e.abort();this.controllers.clear()}async*run(e,t,n,i={}){var m,w,_;if(!this.running)throw new Error("QueryManager not started");let o=(m=this.metrics)==null?void 0:m.queryTime.timer(),s;if(i.signal==null){s=new W5e.TimeoutController(3e4),i.signal=s.signal;try{Np.setMaxListeners!=null&&(0,Np.setMaxListeners)(1/0,s.signal)}catch{}}let a=new AbortController;this.controllers.add(a);let c=[a.signal];i.signal!=null&&c.push(i.signal);let u=(0,Y5e.anySignal)(c);try{Np.setMaxListeners!=null&&(0,Np.setMaxListeners)(1/0,u)}catch{}let l=z(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+ie(e,"base58btc")),d=t.slice(0,Math.min(this.disjointPaths,t.length)),h=Date.now(),f=new at;try{if(l("query:start"),this.queries++,(w=this.metrics)==null||w.runningQueries.update(this.queries),t.length===0){l.error("Running query with no peers");return}let E=new js,S=d.map((p,g)=>H5e({key:e,startingPeer:p,ourPeerId:this.components.peerId,signal:u,query:n,pathIndex:g,numPaths:d.length,alpha:this.alpha,cleanUp:f,queryFuncTimeout:i.queryFuncTimeout,log:l,peersSeen:E}));for await(let p of Or(...S))yield p,p.name==="QUERY_ERROR"&&l("error",p.error)}catch(E){if(!(!this.running&&E.code==="ERR_QUERY_ABORTED"))throw E}finally{this.controllers.delete(a),s!=null&&s.clear(),this.queries--,(_=this.metrics)==null||_.runningQueries.update(this.queries),o!=null&&o(),f.dispatchEvent(new be("cleanup")),l("query:done in %dms",Date.now()-h)}}};var Op=z("libp2p:kad-dht:rpc:handlers:add-provider"),HE=class{constructor(e){let{providers:t}=e;this.providers=t}async handle(e,t){if(Op("start"),t.key==null||t.key.length===0)throw new X("Missing key","ERR_MISSING_KEY");let n;try{n=$.decode(t.key)}catch{throw new X("Invalid CID","ERR_INVALID_CID")}(t.providerPeers==null||t.providerPeers.length===0)&&Op.error("no providers found in message"),await Promise.all(t.providerPeers.map(async i=>{if(!i.id.equals(e)){Op("invalid provider peer %p from %p",i.id,e);return}if(i.multiaddrs.length<1){Op("no valid addresses for provider %p. Ignore",e);return}Op("received provider %p for %s (addrs %s)",e,n,i.multiaddrs.map(o=>o.toString())),await this.providers.addProvider(n,i.id)}))}};var X5e=z("libp2p:kad-dht:rpc:handlers:find-node"),WE=class{constructor(e,t){let{peerRouting:n,lan:i}=t;this.components=e,this.peerRouting=n,this.lan=!!i}async handle(e,t){X5e("incoming request from %p for peers closer to %b",e,t.key);let n=[];ct(this.components.peerId.toBytes(),t.key)?n=[{id:this.components.peerId,multiaddrs:this.components.addressManager.getAddresses().map(o=>o.decapsulateCode(Ht("p2p").code)),protocols:[]}]:n=await this.peerRouting.getCloserPeersOffline(t.key,e),n=n.map(this.lan?V5:F5).filter(({multiaddrs:o})=>o.length);let i=new an(t.type,new Uint8Array(0),t.clusterLevel);return n.length>0?i.closerPeers=n:X5e("could not find any peers closer to %b than %p",t.key,e),i}};var Q5e=z("libp2p:kad-dht:rpc:handlers:get-providers"),YE=class{constructor(e,t){let{peerRouting:n,providers:i,lan:o}=t;this.components=e,this.peerRouting=n,this.providers=i,this.lan=!!o}async handle(e,t){let n;try{n=$.decode(t.key)}catch{throw new X("Invalid CID","ERR_INVALID_CID")}Q5e("%p asking for providers for %s",e,n);let[i,o]=await Promise.all([this.providers.getProviders(n),this.peerRouting.getCloserPeersOffline(t.key,e)]),s=await this._getPeers(i),a=await this._getPeers(o.map(({id:u})=>u)),c=new an(t.type,t.key,t.clusterLevel);return s.length>0&&(c.providerPeers=s),a.length>0&&(c.closerPeers=a),Q5e("got %s providers %s closerPeers",s.length,a.length),c}async _getAddresses(e){return(await this.components.peerStore.addressBook.get(e)).map(n=>n.multiaddr)}async _getPeers(e){let t=[],n=this.lan?V5:F5;for(let i of e){let o=n({id:i,multiaddrs:await this._getAddresses(i),protocols:[]});o.multiaddrs.length>0&&t.push(o)}return t}};var $5=z("libp2p:kad-dht:rpc:handlers:get-value"),XE=class{constructor(e,t){let{peerRouting:n}=t;this.components=e,this.peerRouting=n}async handle(e,t){let n=t.key;if($5("%p asked for key %b",e,n),n==null||n.length===0)throw new X("Invalid key","ERR_INVALID_KEY");let i=new an(wn.GET_VALUE,n,t.clusterLevel);if(A5e(n)){$5("is public key");let a=C5e(n),c;try{let u=await this.components.peerStore.keyBook.get(a);if(u==null)throw new X("No public key found in key book","ERR_NOT_FOUND");c=u}catch(u){if(u.code!=="ERR_NOT_FOUND")throw u}if(c!=null)return $5("returning found public key"),i.record=new En(n,c,new Date),i}let[o,s]=await Promise.all([this._checkLocalDatastore(n),this.peerRouting.getCloserPeersOffline(t.key,e)]);return o!=null&&($5("had record for %b in local datastore",n),i.record=o),s.length>0&&($5("had %s closer peers in routing table",s.length),i.closerPeers=s),i}async _checkLocalDatastore(e){$5("checkLocalDatastore looking for %b",e);let t=D0(e),n;try{n=await this.components.datastore.get(t)}catch(o){if(o.code==="ERR_NOT_FOUND")return;throw o}let i=En.deserialize(n);if(i==null)throw new X("Invalid record","ERR_INVALID_RECORD");if(i.timeReceived==null||Date.now()-i.timeReceived.getTime()>1296e5){await this.components.datastore.delete(t);return}return i}};var ZKe=z("libp2p:kad-dht:rpc:handlers:ping"),QE=class{async handle(e,t){return ZKe("ping from %p",e),t}};var ZE=class{constructor(e,t){let{validators:n}=t;this.components=e,this.log=z("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=n}async handle(e,t){let n=t.key;this.log("%p asked us to store value for key %b",e,n);let i=t.record;if(i==null){let o=`Empty record from: ${e.toString()}`;throw this.log.error(o),new X(o,"ERR_EMPTY_RECORD")}try{await z5(this.validators,i),i.timeReceived=new Date;let o=D0(i.key);await this.components.datastore.put(o,i.serialize().subarray()),this.log("put record for %b into datastore under key %k",n,o)}catch(o){this.log("did not put record for key %b into datastore %o",n,o)}return t}};var JE=class{constructor(e,t){let{providers:n,peerRouting:i,validators:o,lan:s}=t;this.log=z("libp2p:kad-dht:rpc"),this.routingTable=t.routingTable,this.handlers={[wn.GET_VALUE]:new XE(e,{peerRouting:i}),[wn.PUT_VALUE]:new ZE(e,{validators:o}),[wn.FIND_NODE]:new WE(e,{peerRouting:i,lan:s}),[wn.ADD_PROVIDER]:new HE({providers:n}),[wn.GET_PROVIDERS]:new YE(e,{peerRouting:i,providers:n,lan:s}),[wn.PING]:new QE}}async handleMessage(e,t){try{await this.routingTable.add(e)}catch(i){this.log.error("Failed to update the kbucket store",i)}let n=this.handlers[t.type];if(n==null){this.log.error(`no handler found for message type: ${t.type}`);return}return await n.handle(e,t)}onIncomingStream(e){Promise.resolve().then(async()=>{let{stream:t,connection:n}=e,i=n.remotePeer;try{await this.routingTable.add(i)}catch(s){this.log.error(s)}let o=this;await Ke(t,gn(),async function*(s){for await(let a of s){let c=an.deserialize(a);o.log("incoming %s from %p",c.type,i);let u=await o.handleMessage(i,c);u!=null&&(yield u.serialize())}},Bn(),t)}).catch(t=>{this.log.error(t)})}};var ex=class extends at{constructor(e,t){super();let{protocol:n,lan:i}=t;this.components=e,this.log=z(`libp2p:kad-dht:topology-listener:${i?"lan":"wan"}`),this.running=!1,this.protocol=n}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;let e=_u({onConnect:t=>{this.log("observed peer %p with protocol %s",t,this.protocol),this.dispatchEvent(new be("peer",{detail:t}))}});this.registrarId=await this.components.registrar.register(this.protocol,e)}async stop(){this.running=!1,this.registrarId!=null&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}};var $B=require("events");var Z5e=L(Dn(),1),J5e=L(va(),1);var tx=class{constructor(e,t){let{peerRouting:n,lan:i,count:o,interval:s,queryTimeout:a}=t;this.components=e,this.log=z(`libp2p:kad-dht:${i?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=n,this.count=o??20,this.interval=s??3e5,this.queryTimeout=a??3e4}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,this.timeoutId!=null&&clearTimeout(this.timeoutId),this.controller!=null&&this.controller.abort()}_querySelf(){Promise.resolve().then(async()=>{let e=new Z5e.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;let t=(0,J5e.anySignal)([this.controller.signal,e.signal]);try{$B.setMaxListeners!=null&&(0,$B.setMaxListeners)(1/0,t)}catch{}let n=await Ke(this.peerRouting.getClosestPeers(this.components.peerId.toBytes(),{signal:t}),i=>$i(i,this.count),async i=>await Ua(i));this.log("query ran successfully - found %d peers",n)}catch(t){this.log("query error",t)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),e.clear()}}).catch(e=>{this.log("query error",e)})}};var tje=32,rje=64,Lp=class extends at{constructor(e,t){super();let{kBucketSize:n,clientMode:i,validators:o,selectors:s,querySelfInterval:a,lan:c,protocolPrefix:u,pingTimeout:l,pingConcurrency:d,maxInboundStreams:h,maxOutboundStreams:f,providers:m}=t;this.running=!1,this.components=e,this.lan=!!c,this.log=z(`libp2p:kad-dht:${c===!0?"lan":"wan"}`),this.protocol=`${u??x5e}${c===!0?E5e:""}${S5e}`,this.kBucketSize=n??20,this.clientMode=i??!0,this.maxInboundStreams=h??tje,this.maxOutboundStreams=f??rje,this.routingTable=new BE(e,{kBucketSize:n,lan:this.lan,pingTimeout:l,pingConcurrency:d,protocol:this.protocol}),this.providers=new KE(e,m??{}),this.validators={...F5e,...o},this.selectors={...z5e,...s},this.network=new FE(e,{protocol:this.protocol,lan:this.lan}),this.queryManager=new GE(e,{disjointPaths:Math.ceil(this.kBucketSize/2),lan:c}),this.peerRouting=new $E(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new VE(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new zE(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new UE({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new JE(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new ex(e,{protocol:this.protocol,lan:this.lan}),this.querySelf=new tx(e,{peerRouting:this.peerRouting,interval:a,lan:this.lan}),this.network.addEventListener("peer",w=>{let _=w.detail;this.onPeerConnect(_).catch(E=>{this.log.error("could not add %p to routing table",_.id,E)}),this.dispatchEvent(new be("peer",{detail:_}))}),this.topologyListener.addEventListener("peer",w=>{let _=w.detail;Promise.resolve().then(async()=>{let E=await this.components.peerStore.addressBook.get(_),S={id:_,multiaddrs:E.map(p=>p.multiaddr),protocols:[]};await this.onPeerConnect(S)}).catch(E=>{this.log.error("could not add %p to routing table",_,E)})})}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}async onPeerConnect(e){if(this.log("peer %p connected with protocols %s",e.id,e.protocols),this.lan?e=V5(e):e=F5(e),e.multiaddrs.length===0){this.log("ignoring %p as they do not have any %s addresses in %s",e.id,this.lan?"private":"public",e.multiaddrs.map(t=>t.toString()));return}try{await this.routingTable.add(e.id)}catch(t){this.log.error("could not add %p to routing table",e.id,t)}}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.registrar.unhandle(this.protocol),e==="client"?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(e,t,n={}){yield*this.contentFetching.put(e,t,n)}async*get(e,t={}){yield*this.contentFetching.get(e,t)}async*provide(e,t={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),t)}async*findProviders(e,t={}){yield*this.contentRouting.findProviders(e,t)}async*findPeer(e,t={}){yield*this.peerRouting.findPeer(e,t)}async*getClosestPeers(e,t={}){yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}};var nje=z("libp2p:kad-dht"),rx=class extends at{constructor(e,t,n){super(),this.components=e,this.wan=t,this.lan=n,this.wan.addEventListener("peer",i=>{this.dispatchEvent(new be("peer",{detail:i.detail}))}),this.lan.addEventListener("peer",i=>{this.dispatchEvent(new be("peer",{detail:i.detail}))})}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(e){await this.wan.setMode(e)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(e,t,n={}){for await(let i of Or(this.lan.put(e,t,n),this.wan.put(e,t,n)))yield i}async*get(e,t={}){let n=!1,i=!1;for await(let o of Or(this.lan.get(e,t),this.wan.get(e,t)))yield o,o.name==="DIALING_PEER"&&(n=!0),o.name==="VALUE"&&(n=!0,o.value!=null&&(i=!0)),o.name==="SENDING_QUERY"&&(n=!0);if(!n)throw new X("No peers found in routing table!","ERR_NO_PEERS_IN_ROUTING_TABLE");i||(yield to({from:this.components.peerId,error:new X("Not found","ERR_NOT_FOUND")}))}async*provide(e,t={}){let n=0,i=0,o=[],s=[this.lan];await this.wan.getMode()==="server"&&s.push(this.wan);for await(let a of Or(...s.map(c=>c.provide(e,t))))yield a,a.name==="SENDING_QUERY"&&n++,a.name==="QUERY_ERROR"&&o.push(a.error),a.name==="PEER_RESPONSE"&&a.messageName==="ADD_PROVIDER"&&(nje("sent provider record for %s to %p",e,a.from),i++);if(i===0)throw o.length>0?new X(`Failed to provide to ${o.length} of ${n} peers`,"ERR_PROVIDES_FAILED",{errors:o}):new X("Failed to provide - no peers found","ERR_PROVIDES_FAILED")}async*findProviders(e,t={}){yield*Or(this.lan.findProviders(e,t),this.wan.findProviders(e,t))}async*findPeer(e,t={}){let n=!1;for await(let i of Or(this.lan.findPeer(e,t),this.wan.findPeer(e,t)))yield i,(i.name==="SENDING_QUERY"||i.name==="FINAL_PEER")&&(n=!0);if(!n)throw new X("Peer lookup failed","ERR_LOOKUP_FAILED")}async*getClosestPeers(e,t={}){yield*Or(this.lan.getClosestPeers(e,t),this.wan.getClosestPeers(e,t))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}};var KB=class extends rx{constructor(e,t){super(e,new Lp(e,{protocolPrefix:"/ipfs",...t,lan:!1}),new Lp(e,{protocolPrefix:"/ipfs",...t,clientMode:!1,lan:!0}))}};function ehe(r){return e=>new KB(e,r)}var nx=z("libp2p:bootstrap"),ije="bootstrap",oje=50,sje=12e4,aje=1e3,ix=class extends at{constructor(e,t={list:[]}){if(t.list==null||t.list.length===0)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=e,this.timeout=t.timeout??aje,this.list=[];for(let n of t.list){if(!aA.matches(n)){nx.error("Invalid multiaddr");continue}let i=Br(n),o=i.getPeerId();if(o==null){nx.error("Invalid bootstrap multiaddr without peer id");continue}let s={id:Be(o),multiaddrs:[i],protocols:[]};this.list.push(s)}this._init=t}get[vo](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return!!this.timer}start(){this.isStarted()||(nx("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(e=>{nx.error(e)})},this.timeout))}async _discoverBootstrapPeers(){if(this.timer!=null)for(let e of this.list){if(await this.components.peerStore.tagPeer(e.id,this._init.tagName??ije,{value:this._init.tagValue??oje,ttl:this._init.tagTTL??sje}),this.timer==null)return;this.dispatchEvent(new be("peer",{detail:e}))}}stop(){this.timer!=null&&clearTimeout(this.timer),this.timer=void 0}};ix.tag="bootstrap";function the(r){return e=>new ix(e,r)}var IGe=L(ohe(),1),AGe=L(tM(),1),CGe=L(iM(),1),s6e=L(dM(),1),hM=L(o6e(),1);var a6e=s6e.default;var c6e=a6e;var l6e=L(oB(),1);function u6e(r){var e;return r instanceof ArrayBuffer||((e=r==null?void 0:r.constructor)==null?void 0:e.name)==="ArrayBuffer"&&typeof(r==null?void 0:r.byteLength)=="number"}var d6e=r=>{r.binaryType="arraybuffer";let e=async()=>await new Promise((o,s)=>{if(n)return o();if(i!=null)return s(i);let a=l=>{r.removeEventListener("open",c),r.removeEventListener("error",u),l()},c=()=>a(o),u=l=>{a(()=>s(l.error??new Error(`connect ECONNREFUSED ${r.url}`)))};r.addEventListener("open",c),r.addEventListener("error",u)}),t=async function*(){let o=new l6e.EventIterator(({push:s,stop:a,fail:c})=>{let u=d=>{let h=null;typeof d.data=="string"&&(h=oe(d.data)),u6e(d.data)&&(h=new Uint8Array(d.data)),d.data instanceof Uint8Array&&(h=d.data),h!=null&&s(h)},l=d=>c(d.error??new Error("Socket error"));return r.addEventListener("message",u),r.addEventListener("error",l),r.addEventListener("close",a),()=>{r.removeEventListener("message",u),r.removeEventListener("error",l),r.removeEventListener("close",a)}},{highWaterMark:1/0});await e();for await(let s of o)yield u6e(s)?new Uint8Array(s):s}(),n=r.readyState===1,i;return r.addEventListener("open",()=>{n=!0,i=null}),r.addEventListener("close",()=>{n=!1,i=null}),r.addEventListener("error",o=>{n||(i=o.error??new Error(`connect ECONNREFUSED ${r.url}`))}),Object.assign(t,{connected:e})};var f6e=r=>{if(r.readyState>=2)throw new Error("socket closed");if(r.readyState!==1)return new Promise((e,t)=>{function n(){r.removeEventListener("open",i),r.removeEventListener("error",o)}function i(){n(),e()}function o(s){n(),t(s.error??new Error(`connect ECONNREFUSED ${r.url}`))}r.addEventListener("open",i),r.addEventListener("error",o)})};var h6e=(r,e)=>(e=e??{},e.closeOnEnd=e.closeOnEnd!==!1,async n=>{for await(let i of n){try{await f6e(r)}catch(o){if(o.message==="socket closed")break;throw o}r.send(i)}if(e.closeOnEnd!=null&&r.readyState<=1)return await new Promise((i,o)=>{r.addEventListener("close",s=>{if(s.wasClean||s.code===1006)i();else{let a=Object.assign(new Error("ws error"),{event:s});o(a)}}),setTimeout(()=>r.close())})});var wx=(r,e)=>{e=e??{};let t=d6e(r),n=e.remoteAddress,i=e.remotePort;if(r.url!=null)try{let s=new URL(r.url);n=s.hostname,i=parseInt(s.port,10)}catch{}if(n==null||i==null)throw new Error("Remote connection did not have address and/or port");return{sink:h6e(r,e),source:t,connected:async()=>await t.connected(),close:async()=>{(r.readyState===r.CONNECTING||r.readyState===r.OPEN)&&await new Promise(s=>{r.addEventListener("close",()=>{s()}),r.close()})},destroy:()=>{r.terminate!=null?r.terminate():r.close()},remoteAddress:n,remotePort:i,socket:r}};var p6e=L(Em(),1),RGe={http:"ws",https:"wss"},kGe="ws",m6e=(r,e)=>(0,p6e.relative)(r,e,RGe,kGe);function g6e(r,e){let t=typeof window>"u"?"":window.location;e=e??{};let n=m6e(r,t.toString()),i=new c6e(n,e.websocket);return wx(i,e)}var E6e=L(require("os"),1);var y6e=L(require("http"),1),w6e=L(require("https"),1),b6e=require("events"),pM=class extends b6e.EventEmitter{constructor(e,t){super(),t=t??{},this.server=e,this.wsServer=new hM.default({server:e,perMessageDeflate:!1,verifyClient:t.verifyClient}),this.wsServer.on("connection",this.onWsServerConnection.bind(this))}async listen(e){return await new Promise((t,n)=>{this.wsServer.once("error",i=>n(i)),this.wsServer.once("listening",()=>t(this)),this.server.listen(typeof e=="number"?e:e.port)})}async close(){return await new Promise((e,t)=>{this.server.close(n=>{if(n!=null)return t(n);e()})})}address(){return this.server.address()}onWsServerConnection(e,t){let n=this.wsServer.address();if(typeof n=="string"){this.emit("error",new Error("Cannot listen on unix sockets"));return}if(t.socket.remoteAddress==null||t.socket.remotePort==null){this.emit("error",new Error("Remote connection did not have address and/or port"));return}let i={...wx(e,{remoteAddress:t.socket.remoteAddress,remotePort:t.socket.remotePort}),localAddress:n.address,localPort:n.port};this.emit("connection",i,t)}};function _6e(r){r=r??{};let e=r.server??(r.key!=null&&r.cert!=null?w6e.default.createServer(r):y6e.default.createServer()),t=new pM(e);r.onConnection!=null&&t.on("connection",r.onConnection);function n(i,o){return i.on(o,(...s)=>{t.emit(o,...s)})}return n(e,"listening"),n(e,"request"),n(e,"close"),t}var v6e=z("libp2p:websockets:socket");function bx(r,e,t){t=t??{};let n={async sink(i){(t==null?void 0:t.signal)!=null&&(i=Ii(i,t.signal));try{await r.sink(i)}catch(o){o.type!=="aborted"&&v6e.error(o)}},source:t.signal!=null?Ii(r.source,t.signal):r.source,remoteAddr:e,timeline:{open:Date.now()},async close(){let i=Date.now();try{await jc(r.close(),{milliseconds:2e3})}catch{let{host:s,port:a}=n.remoteAddr.toOptions();v6e("timeout closing stream to %s:%s after %dms, destroying it manually",s,a,Date.now()-i),r.destroy()}finally{n.timeline.close=Date.now()}}};return r.socket.addEventListener("close",()=>{n.timeline.close==null&&(n.timeline.close=Date.now())},{once:!0}),n}var Y5=z("libp2p:websockets:listener"),mM=class extends at{constructor(e){super(),this.connections=new Set;let t=this;this.server=_6e({...e,onConnection:n=>{let i=bx(n,S_(n.remoteAddress??"",n.remotePort??0));Y5("new inbound connection %s",i.remoteAddr),this.connections.add(n),n.socket.on("close",function(){t.connections.delete(n)});try{e.upgrader.upgradeInbound(i).then(o=>{Y5("inbound connection %s upgraded",i.remoteAddr),(e==null?void 0:e.handler)!=null&&(e==null||e.handler(o)),t.dispatchEvent(new be("connection",{detail:o}))}).catch(async o=>{Y5.error("inbound connection failed to upgrade",o),await i.close().catch(s=>{Y5.error("inbound connection failed to close after upgrade failed",s)})})}catch(o){Y5.error("inbound connection failed to upgrade",o),i.close().catch(s=>{Y5.error("inbound connection failed to close after upgrade failed",s)})}}}),this.server.on("listening",()=>{this.dispatchEvent(new be("listening"))}),this.server.on("error",n=>{this.dispatchEvent(new be("error",{detail:n}))}),this.server.on("close",()=>{this.dispatchEvent(new be("close"))})}async close(){await Promise.all(Array.from(this.connections).map(async e=>{await e.close()})),this.server.address()!=null&&await this.server.close()}async listen(e){this.listeningMultiaddr=e,await this.server.listen(e.toOptions())}getAddrs(){let e=[],t=this.server.address();if(t==null)throw new Error("Listener is not ready yet");if(typeof t=="string")throw new Error("Wrong address type received - expected AddressInfo, got string - are you trying to listen on a unix socket?");if(this.listeningMultiaddr==null)throw new Error("Listener is not ready yet");let n=this.listeningMultiaddr.getPeerId(),i=this.listeningMultiaddr.protos();if(i.some(o=>o.code===Tt("ip4").code)){let o=i.some(a=>a.code===Tt("ws").code)?"/ws":"/wss",s=this.listeningMultiaddr.decapsulate("tcp");if(s=s.encapsulate(`/tcp/${t.port}${o}`),n!=null&&(s=s.encapsulate(`/p2p/${n}`)),s.toString().includes("0.0.0.0")){let a=E6e.default.networkInterfaces();Object.values(a).forEach(c=>{c!=null&&c.forEach(u=>{u.family==="IPv4"&&e.push(Br(s.toString().replace("0.0.0.0",u.address)))})})}else e.push(s)}return e}};function x6e(r){return new mM(r)}function I6e(r){return r.filter(e=>{if(e.protoCodes().includes(290))return!1;let t=e.decapsulateCode(421);return Jd.matches(t)||sl.matches(t)})}function A6e(r){return r.filter(e=>{if(e.protoCodes().includes(290))return!1;let t=e.decapsulateCode(421);return sl.matches(t)})}var zu=z("libp2p:websockets"),gM=class{constructor(e){this.init=e}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[g5](){return!0}async dial(e,t){zu("dialing %s",e),t=t??{};let n=await this._connect(e,t),i=bx(n,e);zu("new outbound connection %s",i.remoteAddr);let o=await t.upgrader.upgradeOutbound(i);return zu("outbound connection %s upgraded",i.remoteAddr),o}async _connect(e,t){var u,l;if(((u=t==null?void 0:t.signal)==null?void 0:u.aborted)===!0)throw new Rc;let n=e.toOptions();zu("dialing %s:%s",n.host,n.port);let i=jt(),o=d=>{zu.error("connection error:",d),i.reject(d)},s=g6e(s4(e),this.init);if(s.socket.on!=null?s.socket.on("error",o):s.socket.onerror=o,t.signal==null)return await Promise.race([s.connected(),i.promise]),zu("connected %s",e),s;let a,c=new Promise((d,h)=>{var f,m;if(a=()=>{h(new Rc),s.close().catch(w=>{zu.error("error closing raw socket",w)})},((f=t==null?void 0:t.signal)==null?void 0:f.aborted)===!0){a();return}(m=t==null?void 0:t.signal)==null||m.addEventListener("abort",a)});try{await Promise.race([c,i.promise,s.connected()])}finally{a!=null&&((l=t==null?void 0:t.signal)==null||l.removeEventListener("abort",a))}return zu("connected %s",e),s}createListener(e){return x6e({...this.init,...e})}filter(e){var t,n;return e=Array.isArray(e)?e:[e],((t=this.init)==null?void 0:t.filter)!=null?(n=this.init)==null?void 0:n.filter(e):od||fE?A6e(e):I6e(e)}};function C6e(r={}){return()=>new gM(r)}var X5=L(v1(),1);function yM(r){return Buffer.allocUnsafe(r)}var Yt;(function(r){r[r.NEW_STREAM=0]="NEW_STREAM",r[r.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",r[r.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",r[r.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",r[r.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",r[r.RESET_RECEIVER=5]="RESET_RECEIVER",r[r.RESET_INITIATOR=6]="RESET_INITIATOR"})(Yt||(Yt={}));var jp=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),wM=Object.freeze({NEW_STREAM:Yt.NEW_STREAM,MESSAGE:Yt.MESSAGE_INITIATOR,CLOSE:Yt.CLOSE_INITIATOR,RESET:Yt.RESET_INITIATOR}),R6e=Object.freeze({MESSAGE:Yt.MESSAGE_RECEIVER,CLOSE:Yt.CLOSE_RECEIVER,RESET:Yt.RESET_RECEIVER});var k6e=1024*1024,NGe=(r,e)=>{e.append(r)};async function*OGe(r,e={}){let t=new lt,n=!1,i=jt(),o=Number(e.size??k6e);(isNaN(o)||o===0||o<0)&&(o=k6e);let s=e.yieldAfter??0,a=e.serialize??NGe;for(Promise.resolve().then(async()=>{try{let c;for await(let u of r){if(a(u,t),t.byteLength>=o){clearTimeout(c),i.resolve();continue}c=setTimeout(()=>{i.resolve()},s)}clearTimeout(c),i.resolve()}catch(c){i.reject(c)}finally{n=!0}});!n;)if(await i.promise,i=jt(),t.byteLength>0){let c=t;t=new lt,yield c.subarray()}}var P6e=OGe;var bM=10*1024,_M=class{constructor(){this._pool=yM(bM),this._poolOffset=0}write(e,t){let n=this._pool,i=this._poolOffset;X5.default.encode(e.id<<3|e.type,n,i),i+=X5.default.encode.bytes??0,(e.type===Yt.NEW_STREAM||e.type===Yt.MESSAGE_INITIATOR||e.type===Yt.MESSAGE_RECEIVER)&&e.data!=null?X5.default.encode(e.data.length,n,i):X5.default.encode(0,n,i),i+=X5.default.encode.bytes??0;let o=n.subarray(this._poolOffset,i);bM-i<100?(this._pool=yM(bM),this._poolOffset=0):this._poolOffset=i,t.append(o),(e.type===Yt.NEW_STREAM||e.type===Yt.MESSAGE_INITIATOR||e.type===Yt.MESSAGE_RECEIVER)&&e.data!=null&&t.append(e.data)}},D6e=new _M;async function*N6e(r,e=0){if(e==null||e===0){for await(let t of r){let n=new lt;for(let i of t)D6e.write(i,n);yield n.subarray()}return}yield*P6e(r,{size:e,serialize:(t,n)=>{for(let i of t)D6e.write(i,n)}})}var vM=1<<20,LGe=4<<20,_x=class{constructor(e=vM,t=LGe){this._buffer=new lt,this._headerInfo=null,this._maxMessageSize=e,this._maxUnprocessedMessageQueueSize=t}write(e){if(e==null||e.length===0)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});let t=[];for(;this._buffer.length!==0;){if(this._headerInfo==null)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(u){if(u.code==="ERR_MSG_TOO_BIG")throw u;break}let{id:n,type:i,length:o,offset:s}=this._headerInfo;if(this._buffer.length-s<o)break;let c={id:n,type:i};(i===Yt.NEW_STREAM||i===Yt.MESSAGE_INITIATOR||i===Yt.MESSAGE_RECEIVER)&&(c.data=this._buffer.sublist(s,s+o)),t.push(c),this._buffer.consume(s+o),this._headerInfo=null}return t}_decodeHeader(e){let{value:t,offset:n}=L6e(e),{value:i,offset:o}=L6e(e,n),s=t&7;if(jp[s]==null)throw new Error(`Invalid type received: ${s}`);if(i>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:t>>3,type:s,offset:n+o,length:i}}},BGe=128,O6e=127;function L6e(r,e=0){let t=0,n=0,i=e,o,s=r.length;do{if(i>=s||n>49)throw e=0,new RangeError("Could not decode varint");o=r.get(i++),t+=n<28?(o&O6e)<<n:(o&O6e)*Math.pow(2,n),n+=7}while(o>=BGe);return e=i-e,{value:t,offset:e}}var e1=z("libp2p:mplex:stream"),EM="ERR_STREAM_RESET",MGe="ERR_STREAM_ABORT",UGe="ERR_SINK_ENDED",FGe="ERR_DOUBLE_SINK";function B6e(r){let{id:e,name:t,send:n,onEnd:i,type:o="initiator",maxMsgSize:s=vM}=r,a=new AbortController,c=new AbortController,u=new AbortController,l=o==="initiator"?wM:R6e,d=o==="initiator"?`i${e}`:`r${e}`,h=`${t??e}`,f=!1,m=!1,w=!1,_,E={open:Date.now()},S=b=>{f||(f=!0,e1.trace("%s stream %s source end - err: %o",o,h,b),b!=null&&_==null&&(_=b),m&&(y.stat.timeline.close=Date.now(),i!=null&&i(_)))},p=b=>{m||(m=!0,e1.trace("%s stream %s sink end - err: %o",o,h,b),b!=null&&_==null&&(_=b),f&&(E.close=Date.now(),i!=null&&i(_)))},g=Gt({onEnd:S}),y={close:()=>{e1.trace("%s stream %s close",o,h),y.closeRead(),y.closeWrite()},closeRead:()=>{e1.trace("%s stream %s closeRead",o,h),!f&&g.end()},closeWrite:()=>{if(e1.trace("%s stream %s closeWrite",o,h),!m){u.abort();try{n({id:e,type:l.CLOSE})}catch(b){e1.trace("%s stream %s error sending close",o,t,b)}p()}},abort:b=>{e1.trace("%s stream %s abort",o,h,b),g.end(b),a.abort(),p(b)},reset:()=>{let b=new X("stream reset",EM);c.abort(),g.end(b),p(b)},sink:async b=>{if(w)throw new X("sink already called on stream",FGe);if(w=!0,m)throw new X("stream closed for writing",UGe);let x=Gs([a.signal,c.signal,u.signal]);try{b=Ii(b,x),o==="initiator"&&n({id:e,type:wM.NEW_STREAM,data:new lt(oe(h))});for await(let v of b)for(;v.length>0;){if(v.length<=s){n({id:e,type:l.MESSAGE,data:v instanceof Uint8Array?new lt(v):v});break}v=v instanceof Uint8Array?new lt(v):v,n({id:e,type:l.MESSAGE,data:v.sublist(0,s)}),v.consume(s)}}catch(v){if(v.type==="aborted"&&v.message==="The operation was aborted"){if(u.signal.aborted)return;c.signal.aborted&&(v.message="stream reset",v.code=EM),a.signal.aborted&&(v.message="stream aborted",v.code=MGe)}if(v.code===EM)e1.trace("%s stream %s reset",o,t);else{e1.trace("%s stream %s error",o,t,v);try{n({id:e,type:l.RESET})}catch(T){e1.trace("%s stream %s error sending reset",o,t,T)}}g.end(v),p(v);return}finally{x.clear()}try{n({id:e,type:l.CLOSE})}catch(v){e1.trace("%s stream %s error sending close",o,t,v)}p()},source:g,sourcePush:b=>{g.push(b)},sourceReadableLength(){return g.readableLength},stat:{direction:o==="initiator"?"outbound":"inbound",timeline:E},metadata:{},id:d};return y}var U6e=L(CL(),1);var t1=z("libp2p:mplex"),VGe=1024,zGe=1024,qGe=1024*1024*4,$Ge=5;function M6e(r){let e={...r,type:`${jp[r.type]} (${r.type})`};return r.type===Yt.NEW_STREAM&&(e.data=ie(r.data instanceof Uint8Array?r.data:r.data.subarray())),(r.type===Yt.MESSAGE_INITIATOR||r.type===Yt.MESSAGE_RECEIVER)&&(e.data=ie(r.data instanceof Uint8Array?r.data:r.data.subarray(),"base16")),e}var vx=class{constructor(e){this.protocol="/mplex/6.7.0",e=e??{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=e,this.sink=this._createSink();let t=this._createSource();this._source=t,this.source=t,this.closeController=new AbortController,this.rateLimiter=new U6e.RateLimiterMemory({points:e.disconnectThreshold??$Ge,duration:1})}get streams(){let e=[];for(let t of this._streams.initiators.values())e.push(t);for(let t of this._streams.receivers.values())e.push(t);return e}newStream(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");let t=this._streamId++;e=e==null?t.toString():e.toString();let n=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:n})}close(e){this.closeController.signal.aborted||(e!=null?this.streams.forEach(t=>{t.abort(e)}):this.streams.forEach(t=>{t.close()}),this.closeController.abort())}_newReceiverStream(e){let{id:t,name:n}=e,i=this._streams.receivers;return this._newStream({id:t,name:n,type:"receiver",registry:i})}_newStream(e){let{id:t,name:n,type:i,registry:o}=e;if(t1("new %s stream %s",i,t),i==="initiator"&&this._streams.initiators.size===(this._init.maxOutboundStreams??zGe))throw new X("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(t))throw new Error(`${i} stream ${t} already exists!`);let c=B6e({id:t,name:n,send:u=>{t1.enabled&&t1.trace("%s stream %s send",i,t,M6e(u)),this._source.push(u)},type:i,onEnd:()=>{t1("%s stream with id %s and protocol %s ended",i,t,c.stat.protocol),o.delete(t),this._init.onStreamEnd!=null&&this._init.onStreamEnd(c)},maxMsgSize:this._init.maxMsgSize});return o.set(t,c),c}_createSink(){return async t=>{let n=Gs([this.closeController.signal,this._init.signal]);try{t=Ii(t,n);let i=new _x(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(let o of t)for(let s of i.write(o))await this._handleIncoming(s);this._source.end()}catch(i){t1("error in sink",i),this._source.end(i)}finally{n.clear()}}}_createSource(){let t=AW({objectMode:!0,onEnd:n=>{this.close(n)}});return Object.assign(N6e(t,this._init.minSendBytes),{push:t.push,end:t.end,return:t.return})}async _handleIncoming(e){let{id:t,type:n}=e;if(t1.enabled&&t1.trace("incoming message",M6e(e)),e.type===Yt.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??VGe)){t1("too many inbound streams open"),this._source.push({id:t,type:Yt.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{t1("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this._source.end(new Error("Too many open streams"));return}return}let a=this._newReceiverStream({id:t,name:ie(e.data instanceof Uint8Array?e.data:e.data.subarray())});this._init.onIncomingStream!=null&&this._init.onIncomingStream(a);return}let o=((n&1)===1?this._streams.initiators:this._streams.receivers).get(t);if(o==null){t1("missing stream %s for message type %s",t,jp[n]);return}let s=this._init.maxStreamBufferSize??qGe;switch(n){case Yt.MESSAGE_INITIATOR:case Yt.MESSAGE_RECEIVER:if(o.sourceReadableLength()>s){this._source.push({id:e.id,type:n===Yt.MESSAGE_INITIATOR?Yt.RESET_RECEIVER:Yt.RESET_INITIATOR});let a=new X("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");o.abort(a);return}o.sourcePush(e.data);break;case Yt.CLOSE_INITIATOR:case Yt.CLOSE_RECEIVER:o.closeRead();break;case Yt.RESET_INITIATOR:case Yt.RESET_RECEIVER:o.reset();break;default:t1("unknown message type %s",n)}}};var xM=class{constructor(e={}){this.protocol="/mplex/6.7.0",this._init=e}createStreamMuxer(e={}){return new vx({...e,...this._init})}};function F6e(r={}){return()=>new xM(r)}var Ex=L(fe(),1),V6e=r=>Zo.decode(r);V6e.bytes=0;function SM(r,e={}){let t=Gt();r.sink(t).catch(s=>{t.end(s)}),r.sink=async s=>{for await(let a of s)t.push(a)};let n=r.source;r.source[Symbol.iterator]!=null?n=r.source[Symbol.iterator]():r.source[Symbol.asyncIterator]!=null&&(n=r.source[Symbol.asyncIterator]());let i=new lt,o={read:async s=>{if(s==null){let{done:c,value:u}=await n.next();return c===!0?new lt:u}for(;i.byteLength<s;){let{value:c,done:u}=await n.next();if(u===!0)throw(0,Ex.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,s);return i.consume(s),a},readLP:async()=>{let s=-1,a=new lt,c=(e==null?void 0:e.lengthDecoder)??V6e;for(;;){a.append(await o.read(1));try{s=c(a)}catch(u){if(u instanceof RangeError)continue;throw u}if(s>-1)break;if((e==null?void 0:e.maxLengthLength)!=null&&a.byteLength>e.maxLengthLength)throw(0,Ex.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if((e==null?void 0:e.maxDataLength)!=null&&s>e.maxDataLength)throw(0,Ex.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await o.read(s)},readPB:async s=>{let a=await o.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return s.decode(c)},write:s=>{s instanceof Uint8Array?t.push(s):t.push(s.subarray())},writeLP:s=>{o.write(Tu.single(s,e))},writePB:(s,a)=>{o.writeLP(a.encode(s))},pb:s=>({read:async()=>await o.readPB(s),write:a=>{o.writePB(a,s)},unwrap:()=>o}),unwrap:()=>{let s=r.source;return r.source=async function*(){yield*i,yield*s}(),r}};return o}function TM(){let r=jt(),e=!1;return{sink:async t=>{if(e)throw new Error("already piped");e=!0,r.resolve(t)},source:async function*(){yield*await r.promise}()}}function z6e(){let r=TM(),e=TM();return[{source:r.source,sink:e.sink},{source:e.source,sink:r.sink}]}var q6e,$6e,K6e=!!(($6e=(q6e=globalThis.process)==null?void 0:q6e.env)!=null&&$6e.DUMP_SESSION_KEYS);var S8e=L(Q6e(),1),Z5=L(m8e(),1),Bx=L(y8e(),1),qM=L(zM(),1),T8e={hashSHA256(r){return(0,Bx.hash)(r)},getHKDF(r,e){let i=new S8e.HKDF(Bx.SHA256,e,r).expand(96),o=i.subarray(0,32),s=i.subarray(32,64),a=i.subarray(64,96);return[o,s,a]},generateX25519KeyPair(){let r=Z5.generateKeyPair();return{publicKey:r.publicKey,privateKey:r.secretKey}},generateX25519KeyPairFromSeed(r){let e=Z5.generateKeyPairFromSeed(r);return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519SharedKey(r,e){return Z5.sharedKey(r,e)},chaCha20Poly1305Encrypt(r,e,t,n){return new qM.ChaCha20Poly1305(n).seal(e,r,t)},chaCha20Poly1305Decrypt(r,e,t,n,i){return new qM.ChaCha20Poly1305(n).open(e,r,t,i)}};var $M=L(zM(),1);var ZHe=r=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r),J5=r=>{let e=ZHe(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,r,!1),e};J5.bytes=2;var Qp=r=>{if(r.length<2)throw RangeError("Could not decode int16BE");return r instanceof Uint8Array?new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,!1):r.getUint16(0)};Qp.bytes=2;function I8e(r){return Ye([r.ne,r.ciphertext],r.ne.length+r.ciphertext.length)}function A8e(r){return Ye([r.ne,r.ns,r.ciphertext],r.ne.length+r.ns.length+r.ciphertext.length)}function C8e(r){return Ye([r.ns,r.ciphertext],r.ns.length+r.ciphertext.length)}function R8e(r){if(r.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:r.subarray(0,32),ciphertext:r.subarray(32,r.length),ns:new Uint8Array(0)}}function k8e(r){if(r.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:r.subarray(0,32),ns:r.subarray(32,80),ciphertext:r.subarray(80,r.length)}}function P8e(r){if(r.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:r.subarray(0,48),ciphertext:r.subarray(48,r.length)}}function N8e(r,e){return async function*(t){for await(let n of t)for(let i=0;i<n.length;i+=65519){let o=i+65519;o>n.length&&(o=n.length);let s=r.encrypt(n.subarray(i,o),r.session);e==null||e.encryptedPackets.increment(),yield J5(s.byteLength),yield s}}}function O8e(r,e){return async function*(t){for await(let n of t)for(let i=0;i<n.length;i+=65535){let o=i+65535;if(o>n.length&&(o=n.length),o-$M.TAG_LENGTH<i)throw new Error("Invalid chunk");let s=n.subarray(i,o),a=n.subarray(i,o-$M.TAG_LENGTH),{plaintext:c,valid:u}=r.decrypt(s,r.session,a);if(!u)throw e==null||e.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");e==null||e.decryptedPackets.increment(),yield c}}}var Jp=class r extends Error{constructor(e="Unexpected Peer"){super(e),this.code=r.code}static get code(){return"ERR_UNEXPECTED_PEER"}},dd=class r extends Error{constructor(e="Invalid crypto exchange"){super(e),this.code=r.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}};var Mx;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),t.webtransportCerthashes!=null)for(let o of t.webtransportCerthashes)n.uint32(10),n.bytes(o);i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={webtransportCerthashes:[]},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.webtransportCerthashes.push(t.bytes());break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(Mx||(Mx={}));var e9;(function(r){let e;r.codec=()=>(e==null&&(e=Dt((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||t.identityKey!=null&&t.identityKey.byteLength>0)&&(n.uint32(10),n.bytes(t.identityKey??new Uint8Array(0))),(i.writeDefaults===!0||t.identitySig!=null&&t.identitySig.byteLength>0)&&(n.uint32(18),n.bytes(t.identitySig??new Uint8Array(0))),t.extensions!=null&&(n.uint32(34),Mx.codec().encode(t.extensions,n,{writeDefaults:!1})),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.identityKey=t.bytes();break;case 2:i.identitySig=t.bytes();break;case 4:i.extensions=Mx.codec().decode(t,t.uint32());break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>Pt(t,r.codec()),r.decode=t=>kt(t,r.codec())})(e9||(e9={}));async function L8e(r,e,t){let n=await eWe(r,B8e(e));if(r.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return JHe(r.publicKey,n,t)}function JHe(r,e,t){return e9.encode({identityKey:r,identitySig:e,extensions:t??{webtransportCerthashes:[]}}).subarray()}async function eWe(r,e){if(r.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return await(await Xn(r.privateKey)).sign(e)}async function KM(r){return await Sr(r.identityKey)}function jM(r){return e9.decode(r)}function B8e(r){let e=oe("noise-libp2p-static-key:");return Ye([e,r],e.length+r.length)}async function GM(r,e,t){let n=await Sr(e.identityKey);if(!n.equals(t))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${t.toString()}`);let i=B8e(r);if(n.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(e.identitySig==null)throw new Error("Signature was missing from message");if(!await ao(n.publicKey).verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function t9(r){return!(!(r instanceof Uint8Array)||r.length!==32)}var ii=z("libp2p:noise");var ua;K6e?ua=ii:ua=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function M8e(r){ua(`LOCAL_STATIC_PUBLIC_KEY ${ie(r.publicKey,"hex")}`),ua(`LOCAL_STATIC_PRIVATE_KEY ${ie(r.privateKey,"hex")}`)}function HM(r){r?(ua(`LOCAL_PUBLIC_EPHEMERAL_KEY ${ie(r.publicKey,"hex")}`),ua(`LOCAL_PRIVATE_EPHEMERAL_KEY ${ie(r.privateKey,"hex")}`)):ua("Missing local ephemeral keys.")}function U8e(r){ua(`REMOTE_STATIC_PUBLIC_KEY ${ie(r,"hex")}`)}function WM(r){ua(`REMOTE_EPHEMERAL_PUBLIC_KEY ${ie(r,"hex")}`)}function F8e(r){r.cs1&&r.cs2?(ua(`CIPHER_STATE_1 ${r.cs1.n.getUint64()} ${ie(r.cs1.k,"hex")}`),ua(`CIPHER_STATE_2 ${r.cs2.n.getUint64()} ${ie(r.cs2.k,"hex")}`)):ua("Missing cipher state.")}var tWe="Cipherstate has reached maximum n, a new handshake must be performed",Ux=class{constructor(e=0){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error(tWe)}};var Fx=class{constructor(e){this.crypto=e}encryptWithAd(e,t,n){let i=this.encrypt(e.k,e.n,t,n);return e.n.increment(),i}decryptWithAd(e,t,n,i){let{plaintext:o,valid:s}=this.decrypt(e.k,e.n,t,n,i);return s&&e.n.increment(),{plaintext:o,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){let t=this.createEmptyKey();return ct(t,e)}encrypt(e,t,n,i){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(i,t.getBytes(),n,e)}encryptAndHash(e,t){let n;return this.hasKey(e.cs)?n=this.encryptWithAd(e.cs,e.h,t):n=t,this.mixHash(e,n),n}decrypt(e,t,n,i,o){t.assertValue();let s=this.crypto.chaCha20Poly1305Decrypt(i,t.getBytes(),n,e,o);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let n,i=!0;return this.hasKey(e.cs)?{plaintext:n,valid:i}=this.decryptWithAd(e.cs,e.h,t):n=t,this.mixHash(e,t),{plaintext:n,valid:i}}dh(e,t){try{let n=this.crypto.generateX25519SharedKey(e,t);return n.length===32?n:n.subarray(0,32)}catch(n){let i=n;return ii.error(i),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){return this.crypto.hashSHA256(Ye([e,t],e.length+t.length))}mixKey(e,t){let[n,i]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(i),e.ck=n}initializeKey(e){return{k:e,n:new Ux}}initializeSymmetric(e){let t=oe(e,"utf-8"),n=this.hashProtocolName(t),i=n,o=this.createEmptyKey();return{cs:this.initializeKey(o),ck:i,h:n}}hashProtocolName(e){if(e.length<=32){let t=new Uint8Array(32);return t.set(e),t}else return this.getHash(e,new Uint8Array(0))}split(e){let[t,n]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),i=this.initializeKey(t),o=this.initializeKey(n);return{cs1:i,cs2:o}}writeMessageRegular(e,t){let n=this.encryptWithAd(e,new Uint8Array(0),t),i=this.createEmptyKey(),o=new Uint8Array(0);return{ne:i,ns:o,ciphertext:n}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}};var Vx=class extends Fx{initializeInitiator(e,t,n,i){let s=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(s,e);let a=new Uint8Array(32);return{ss:s,s:t,rs:n,psk:i,re:a}}initializeResponder(e,t,n,i){let s=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(s,e);let a=new Uint8Array(32);return{ss:s,s:t,rs:n,psk:i,re:a}}writeMessageA(e,t,n){let i=new Uint8Array(0);n!==void 0?e.e=n:e.e=this.crypto.generateX25519KeyPair();let o=e.e.publicKey;this.mixHash(e.ss,o);let s=this.encryptAndHash(e.ss,t);return{ne:o,ns:i,ciphertext:s}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let i=e.s.publicKey,o=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,t);return{ne:n,ns:o,ciphertext:s}}writeMessageC(e,t){let n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,t),a={ne:this.createEmptyKey(),ns:i,ciphertext:o},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,t){return t9(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(t9(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,t.ns);i&&t9(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:o,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:o,valid:i&&s}}readMessageC(e,t){let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,t.ns);if(i&&t9(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:o,valid:s}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:o,valid:i&&s,cs1:a,cs2:c}}initSession(e,t,n){let i=this.createEmptyKey(),o=new Uint8Array(32),s;return e?s=this.initializeInitiator(t,n,o,i):s=this.initializeResponder(t,n,o,i),{hs:s,i:e,mc:0}}sendMessage(e,t,n){let i;if(e.mc===0)i=this.writeMessageA(e.hs,t,n);else if(e.mc===1)i=this.writeMessageB(e.hs,t);else if(e.mc===2){let{h:o,messageBuffer:s,cs1:a,cs2:c}=this.writeMessageC(e.hs,t);i=s,e.h=o,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,t)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,t){let n=new Uint8Array(0),i=!1;if(e.mc===0)({plaintext:n,valid:i}=this.readMessageA(e.hs,t));else if(e.mc===1)({plaintext:n,valid:i}=this.readMessageB(e.hs,t));else if(e.mc===2){let{h:o,plaintext:s,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,t);n=s,i=a,e.h=o,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:n,valid:i}}};var zx=class{constructor(e,t,n,i,o,s,a,c){this.remoteExtensions={webtransportCerthashes:[]},this.isInitiator=e,this.payload=t,this.prologue=n,this.staticKeypair=o,this.connection=s,a&&(this.remotePeer=a),this.xx=c??new Vx(i),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(M8e(this.session.hs.s),this.isInitiator){ii.trace("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(I8e(e)),ii.trace("Stage 0 - Initiator finished sending first message."),HM(this.session.hs.e)}else{ii.trace("Stage 0 - Responder waiting to receive first message...");let e=R8e((await this.connection.readLP()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new dd("xx handshake stage 0 validation fail");ii.trace("Stage 0 - Responder received first message."),WM(this.session.hs.re)}}async exchange(){if(this.isInitiator){ii.trace("Stage 1 - Initiator waiting to receive first message from responder...");let e=k8e((await this.connection.readLP()).subarray()),{plaintext:t,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new dd("xx handshake stage 1 validation fail");ii.trace("Stage 1 - Initiator received the message."),WM(this.session.hs.re),U8e(this.session.hs.rs),ii.trace("Initiator going to check remote's signature...");try{let i=jM(t);this.remotePeer=this.remotePeer||await KM(i),await GM(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new Jp(`Error occurred while verifying signed payload: ${o.message}`)}ii.trace("All good with the signature!")}else{ii.trace("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(A8e(e)),ii.trace("Stage 1 - Responder sent the second handshake message with signed payload."),HM(this.session.hs.e)}}async finish(){if(this.isInitiator){ii.trace("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(C8e(e)),ii.trace("Stage 2 - Initiator sent message with signed payload.")}else{ii.trace("Stage 2 - Responder waiting for third handshake message...");let e=P8e((await this.connection.readLP()).subarray()),{plaintext:t,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new dd("xx handshake stage 2 validation fail");ii.trace("Stage 2 - Responder received the message, finished handshake.");try{let i=jM(t);this.remotePeer=this.remotePeer||await KM(i),await GM(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new Jp(`Error occurred while verifying signed payload: ${o.message}`)}}F8e(this.session)}encrypt(e,t){let n=this.getCS(t);return this.xx.encryptWithAd(n,new Uint8Array(0),e)}decrypt(e,t,n){let i=this.getCS(t,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),e,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,t=!0){if(!e.cs1||!e.cs2)throw new dd("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}};function V8e(r){return{xxHandshakeSuccesses:r.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:r.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:r.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:r.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:r.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var qx=class{constructor(e={}){this.protocol="/noise";let{staticNoiseKey:t,extensions:n,crypto:i,prologueBytes:o,metrics:s}=e;this.crypto=i??T8e,this.extensions=n,this.metrics=s?V8e(s):void 0,t?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(t):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=o??new Uint8Array(0)}async secureOutbound(e,t,n){let i=SM(t,{lengthEncoder:J5,lengthDecoder:Qp,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!0,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remoteExtensions:o.remoteExtensions,remotePeer:o.remotePeer}}async secureInbound(e,t,n){let i=SM(t,{lengthEncoder:J5,lengthDecoder:Qp,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!1,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remotePeer:o.remotePeer,remoteExtensions:o.remoteExtensions}}async performHandshake(e){let t=await L8e(e.localPeer,this.staticKeys.publicKey,this.extensions);return await this.performXXHandshake(e,t)}async performXXHandshake(e,t){var a,c;let{isInitiator:n,remotePeer:i,connection:o}=e,s=new zx(n,t,this.prologue,this.crypto,this.staticKeys,o,i);try{await s.propose(),await s.exchange(),await s.finish(),(a=this.metrics)==null||a.xxHandshakeSuccesses.increment()}catch(u){if((c=this.metrics)==null||c.xxHandshakeErrors.increment(),u instanceof Error)throw u.message=`Error occurred during XX handshake: ${u.message}`,u}return s}async createSecureConnection(e,t){let[n,i]=z6e(),o=e.unwrap();return await Ke(n,N8e(t,this.metrics),o,gn({lengthDecoder:Qp}),O8e(t,this.metrics),n),i}};function z8e(r={}){return()=>new qx(r)}var rWe=Je.bind({ignoreUndefined:!0,concatArrays:!0});function r9({options:r={},peerId:e,multiaddrs:t=[],repo:n,keychainConfig:i={},config:o={}}){let{datastore:s}=n,a=nWe({options:r,config:o,datastore:s,keychainConfig:i,peerId:e,multiaddrs:t});return typeof r.libp2p=="function"?r.libp2p({libp2pOptions:a,options:r,config:o,datastore:s,peerId:e}):(a.start=!1,g5e(a))}function nWe({options:r,config:e,datastore:t,keychainConfig:n,peerId:i,multiaddrs:o}){var f,m,w,_;let s=()=>{let E=(0,pr.default)(e,"Pubsub.Router")||"gossipsub",S=Use();if(!S[E])throw(0,q8e.default)(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${E} router.`),"ERR_NOT_SUPPORTED");return S[E]},a={datastore:t,peerId:i},c={addresses:{listen:o.map(E=>E.toString()),announce:(0,pr.default)(r,"addresses.announce",(0,pr.default)(e,"Addresses.Announce",[])),noAnnounce:(0,pr.default)(r,"addresses.noAnnounce",(0,pr.default)(e,"Addresses.NoAnnounce",[]))},connectionManager:(0,pr.default)(r,"connectionManager",{maxConnections:(0,pr.default)(r,"config.Swarm.ConnMgr.HighWater",(0,pr.default)(e,"Swarm.ConnMgr.HighWater")),minConnections:(0,pr.default)(r,"config.Swarm.ConnMgr.LowWater",(0,pr.default)(e,"Swarm.ConnMgr.LowWater"))}),keychain:n,identify:{host:{agentVersion:`js-ipfs/${Wl}`}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[F6e({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[z8e()],relay:{enabled:(0,pr.default)(r,"relay.enabled",(0,pr.default)(e,"relay.enabled",!0)),hop:{enabled:(0,pr.default)(r,"relay.hop.enabled",(0,pr.default)(e,"relay.hop.enabled",!1)),active:(0,pr.default)(r,"relay.hop.active",(0,pr.default)(e,"relay.hop.active",!1))}},nat:{enabled:!(0,pr.default)(e,"Swarm.DisableNatPortMap",!1)}};(0,pr.default)(r,"config.Pubsub.Enabled",(0,pr.default)(e,"Pubsub.Enabled",!0))&&(c.pubsub=s()),(0,pr.default)(e,"Routing.Type","dhtclient")!=="none"&&(c.dht=ehe({clientMode:(0,pr.default)(e,"Routing.Type","dht")!=="dhtserver",kBucketSize:(0,pr.default)(r,"dht.kBucketSize",20),validators:{ipns:Of},selectors:{ipns:Ag}}));let u=(0,pr.default)(r,"config.Bootstrap",(0,pr.default)(e,"Bootstrap",[]));u.length>0&&((f=c.peerDiscovery)==null||f.push(the({list:u})));let l=(0,pr.default)(r,"libp2p",void 0);typeof l=="function"&&(l=void 0);let d=rWe(a,ale(),c,l),h=(0,pr.default)(r,"config.Addresses.Delegates",(0,pr.default)(e,"Addresses.Delegates",[]));if(h.length>0){let E=h[Math.floor(Math.random()*h.length)],S=Ee(E).toOptions(),p={host:S.host,protocol:parseInt(S.port)===443?"https":"http",port:S.port},g=h0e(p);(m=d.contentRouters)==null||m.push(Zse(g)),(w=d.peerRouters)==null||w.push(Wse(g))}return(0,pr.default)(r,"config.Discovery.MDNS.Enabled",(0,pr.default)(e,"Discovery.MDNS.Enabled",!0))||(d.peerDiscovery=(_=d.peerDiscovery)==null?void 0:_.filter(E=>{try{if(typeof E=="function")return E({})[Symbol.toStringTag]!=="@libp2p/mdns"}catch{}return!0})),d.transports==null&&(d.transports=[]),d.transports.find(E=>{try{if(typeof E=="function")return E({})[Symbol.toStringTag]==="@libp2p/websockets"}catch{}return!1})==null&&d.transports.push(C6e()),d}var YM=L(fe(),1);var K8e=Je.bind({ignoreUndefined:!0}),n9=z("ipfs:components:peer:storage"),$x=class r{constructor(e,t,n,i,o){this.print=i,this.peerId=e,this.keychain=t,this.repo=n,this.print=i,this.isNew=o}static async start(e,t,n){let{repoAutoMigrate:i,repo:o,onMigrationProgress:s}=n,a=typeof o=="string"||o==null?aoe(e,t,{path:o,autoMigrate:i,onMigrationProgress:s}):o,{peerId:c,keychain:u,isNew:l}=await iWe(e,a,n);return new r(c,u,a,e,l)}},iWe=async(r,e,t)=>{if(!e.closed)return{...await $8e(e,t),isNew:!1};try{return await e.open(),{...await $8e(e,t),isNew:!1}}catch(n){if(n.code!==s3)throw n;if(t.init&&t.init.allowNew===!1)throw new Sc("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await oWe(r,e,t),isNew:!0}}},oWe=async(r,e,t)=>{let n=t.init||{},i=await e.exists();if(n9("repo exists?",i),i===!0)throw new Error("repo already exists");let o=n.privateKey?await sWe(n.privateKey):await aWe(r,n),s=cWe(o);n9("peer identity: %s",s.PeerID);let a={...K8e(j8e(Mc(),n.profiles),t.config),Identity:s};await e.init(a),await e.open(),n9("repo opened");let c={pass:t.pass};try{c.dek=await e.config.get("Keychain.DEK")}catch(l){if(l.code!=="ERR_NOT_FOUND")throw l}let u=await r9({options:void 0,multiaddrs:void 0,peerId:o,repo:e,config:a,keychainConfig:c});return await e.datastore.has(new Re("/info/self"))||await u.keychain.importPeer("self",o),await e.config.set("Keychain",{DEK:u.keychain.init.dek}),{peerId:o,keychain:u.keychain}},sWe=async r=>{if(n9("using user-supplied private-key"),Mi(r))return r;let e=oe(r,"base64pad"),t=await Xn(e);return await Sr(t.public.bytes,t.bytes)},aWe=(r,{algorithm:e="Ed25519",bits:t=2048})=>{if(r("generating %s keypair...",e),e==="Ed25519")return PE();if(e==="RSA")return a5e({bits:t});throw(0,YM.default)(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},cWe=r=>{if(r.privateKey==null)throw(0,YM.default)(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:r.toString(),PrivKey:ie(r.privateKey,"base64pad")}},$8e=async(r,e)=>{let t=e.config,n=e.init&&e.init.profiles||[],i=e.pass,o=await r.config.getAll(),s=uWe(j8e(o,n),t);if(o!==s&&await r.config.replace(s),!s.Identity||!s.Identity.PrivKey)throw new rl("No private key was found in the config, please intialize the repo");let a=oe(s.Identity.PrivKey,"base64pad"),c=await Xn(a),u=await Sr(c.public.bytes,c.bytes),l=await r9({options:void 0,multiaddrs:void 0,peerId:u,repo:r,config:s,keychainConfig:{pass:i,...s.Keychain}});return{peerId:u,keychain:l.keychain}},uWe=(r,e)=>e?K8e(r,e):r,j8e=(r,e)=>(e||[]).reduce((t,n)=>{let i=n4[n];if(!i)throw new Error(`Could not find profile with name '${n}'`);return n9("applying profile %s",n),i.transform(t)},r);var c7e=L(o7e(),1);var i9=L(v1(),1);function xWe(r){let e=new Uint8Array(r.reduce((n,i)=>n+i9.default.encodingLength(i),0)),t=0;for(let n of r)e=i9.encode(n,e,t),t+=i9.default.encodingLength(n);return e}var s7e=xWe;var o9=class{constructor(e,t,n){this._refCounter=1,this.cid=e,this.priority=t||1,this.wantType=n}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(nt)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}};var r1=L(s1(),1),cc=r1.default.Reader,s9=r1.default.Writer,cr=r1.default.util,Jt=r1.default.roots["ipfs-bitswap"]||(r1.default.roots["ipfs-bitswap"]={}),hs=Jt.Message=(()=>{function r(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.wantlist=null,r.prototype.blocks=cr.emptyArray,r.prototype.payload=cr.emptyArray,r.prototype.blockPresences=cr.emptyArray,r.prototype.pendingBytes=0,r.encode=function(t,n){if(n||(n=s9.create()),t.wantlist!=null&&Object.hasOwnProperty.call(t,"wantlist")&&Jt.Message.Wantlist.encode(t.wantlist,n.uint32(10).fork()).ldelim(),t.blocks!=null&&t.blocks.length)for(var i=0;i<t.blocks.length;++i)n.uint32(18).bytes(t.blocks[i]);if(t.payload!=null&&t.payload.length)for(var i=0;i<t.payload.length;++i)Jt.Message.Block.encode(t.payload[i],n.uint32(26).fork()).ldelim();if(t.blockPresences!=null&&t.blockPresences.length)for(var i=0;i<t.blockPresences.length;++i)Jt.Message.BlockPresence.encode(t.blockPresences[i],n.uint32(34).fork()).ldelim();return t.pendingBytes!=null&&Object.hasOwnProperty.call(t,"pendingBytes")&&n.uint32(40).int32(t.pendingBytes),n},r.decode=function(t,n){t instanceof cc||(t=cc.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Jt.Message;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:{o.wantlist=Jt.Message.Wantlist.decode(t,t.uint32());break}case 2:{o.blocks&&o.blocks.length||(o.blocks=[]),o.blocks.push(t.bytes());break}case 3:{o.payload&&o.payload.length||(o.payload=[]),o.payload.push(Jt.Message.Block.decode(t,t.uint32()));break}case 4:{o.blockPresences&&o.blockPresences.length||(o.blockPresences=[]),o.blockPresences.push(Jt.Message.BlockPresence.decode(t,t.uint32()));break}case 5:{o.pendingBytes=t.int32();break}default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Jt.Message)return t;var n=new Jt.Message;if(t.wantlist!=null){if(typeof t.wantlist!="object")throw TypeError(".Message.wantlist: object expected");n.wantlist=Jt.Message.Wantlist.fromObject(t.wantlist)}if(t.blocks){if(!Array.isArray(t.blocks))throw TypeError(".Message.blocks: array expected");n.blocks=[];for(var i=0;i<t.blocks.length;++i)typeof t.blocks[i]=="string"?cr.base64.decode(t.blocks[i],n.blocks[i]=cr.newBuffer(cr.base64.length(t.blocks[i])),0):t.blocks[i].length>=0&&(n.blocks[i]=t.blocks[i])}if(t.payload){if(!Array.isArray(t.payload))throw TypeError(".Message.payload: array expected");n.payload=[];for(var i=0;i<t.payload.length;++i){if(typeof t.payload[i]!="object")throw TypeError(".Message.payload: object expected");n.payload[i]=Jt.Message.Block.fromObject(t.payload[i])}}if(t.blockPresences){if(!Array.isArray(t.blockPresences))throw TypeError(".Message.blockPresences: array expected");n.blockPresences=[];for(var i=0;i<t.blockPresences.length;++i){if(typeof t.blockPresences[i]!="object")throw TypeError(".Message.blockPresences: object expected");n.blockPresences[i]=Jt.Message.BlockPresence.fromObject(t.blockPresences[i])}}return t.pendingBytes!=null&&(n.pendingBytes=t.pendingBytes|0),n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocks=[],i.payload=[],i.blockPresences=[]),n.defaults&&(i.wantlist=null,i.pendingBytes=0),t.wantlist!=null&&t.hasOwnProperty("wantlist")&&(i.wantlist=Jt.Message.Wantlist.toObject(t.wantlist,n)),t.blocks&&t.blocks.length){i.blocks=[];for(var o=0;o<t.blocks.length;++o)i.blocks[o]=n.bytes===String?cr.base64.encode(t.blocks[o],0,t.blocks[o].length):n.bytes===Array?Array.prototype.slice.call(t.blocks[o]):t.blocks[o]}if(t.payload&&t.payload.length){i.payload=[];for(var o=0;o<t.payload.length;++o)i.payload[o]=Jt.Message.Block.toObject(t.payload[o],n)}if(t.blockPresences&&t.blockPresences.length){i.blockPresences=[];for(var o=0;o<t.blockPresences.length;++o)i.blockPresences[o]=Jt.Message.BlockPresence.toObject(t.blockPresences[o],n)}return t.pendingBytes!=null&&t.hasOwnProperty("pendingBytes")&&(i.pendingBytes=t.pendingBytes),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,r1.default.util.toJSONOptions)},r.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/Message"},r.Wantlist=function(){function e(t){if(this.entries=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.entries=cr.emptyArray,e.prototype.full=!1,e.encode=function(n,i){if(i||(i=s9.create()),n.entries!=null&&n.entries.length)for(var o=0;o<n.entries.length;++o)Jt.Message.Wantlist.Entry.encode(n.entries[o],i.uint32(10).fork()).ldelim();return n.full!=null&&Object.hasOwnProperty.call(n,"full")&&i.uint32(16).bool(n.full),i},e.decode=function(n,i){n instanceof cc||(n=cc.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Jt.Message.Wantlist;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:{s.entries&&s.entries.length||(s.entries=[]),s.entries.push(Jt.Message.Wantlist.Entry.decode(n,n.uint32()));break}case 2:{s.full=n.bool();break}default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof Jt.Message.Wantlist)return n;var i=new Jt.Message.Wantlist;if(n.entries){if(!Array.isArray(n.entries))throw TypeError(".Message.Wantlist.entries: array expected");i.entries=[];for(var o=0;o<n.entries.length;++o){if(typeof n.entries[o]!="object")throw TypeError(".Message.Wantlist.entries: object expected");i.entries[o]=Jt.Message.Wantlist.Entry.fromObject(n.entries[o])}}return n.full!=null&&(i.full=!!n.full),i},e.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.entries=[]),i.defaults&&(o.full=!1),n.entries&&n.entries.length){o.entries=[];for(var s=0;s<n.entries.length;++s)o.entries[s]=Jt.Message.Wantlist.Entry.toObject(n.entries[s],i)}return n.full!=null&&n.hasOwnProperty("full")&&(o.full=n.full),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,r1.default.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message.Wantlist"},e.WantType=function(){let t={},n=Object.create(t);return n[t[0]="Block"]=0,n[t[1]="Have"]=1,n}(),e.Entry=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.block=cr.newBuffer([]),t.prototype.priority=0,t.prototype.cancel=!1,t.prototype.wantType=0,t.prototype.sendDontHave=!1,t.encode=function(i,o){return o||(o=s9.create()),i.block!=null&&Object.hasOwnProperty.call(i,"block")&&o.uint32(10).bytes(i.block),i.priority!=null&&Object.hasOwnProperty.call(i,"priority")&&o.uint32(16).int32(i.priority),i.cancel!=null&&Object.hasOwnProperty.call(i,"cancel")&&o.uint32(24).bool(i.cancel),i.wantType!=null&&Object.hasOwnProperty.call(i,"wantType")&&o.uint32(32).int32(i.wantType),i.sendDontHave!=null&&Object.hasOwnProperty.call(i,"sendDontHave")&&o.uint32(40).bool(i.sendDontHave),o},t.decode=function(i,o){i instanceof cc||(i=cc.create(i));for(var s=o===void 0?i.len:i.pos+o,a=new Jt.Message.Wantlist.Entry;i.pos<s;){var c=i.uint32();switch(c>>>3){case 1:{a.block=i.bytes();break}case 2:{a.priority=i.int32();break}case 3:{a.cancel=i.bool();break}case 4:{a.wantType=i.int32();break}case 5:{a.sendDontHave=i.bool();break}default:i.skipType(c&7);break}}return a},t.fromObject=function(i){if(i instanceof Jt.Message.Wantlist.Entry)return i;var o=new Jt.Message.Wantlist.Entry;switch(i.block!=null&&(typeof i.block=="string"?cr.base64.decode(i.block,o.block=cr.newBuffer(cr.base64.length(i.block)),0):i.block.length>=0&&(o.block=i.block)),i.priority!=null&&(o.priority=i.priority|0),i.cancel!=null&&(o.cancel=!!i.cancel),i.wantType){case"Block":case 0:o.wantType=0;break;case"Have":case 1:o.wantType=1;break}return i.sendDontHave!=null&&(o.sendDontHave=!!i.sendDontHave),o},t.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.block="":(s.block=[],o.bytes!==Array&&(s.block=cr.newBuffer(s.block))),s.priority=0,s.cancel=!1,s.wantType=o.enums===String?"Block":0,s.sendDontHave=!1),i.block!=null&&i.hasOwnProperty("block")&&(s.block=o.bytes===String?cr.base64.encode(i.block,0,i.block.length):o.bytes===Array?Array.prototype.slice.call(i.block):i.block),i.priority!=null&&i.hasOwnProperty("priority")&&(s.priority=i.priority),i.cancel!=null&&i.hasOwnProperty("cancel")&&(s.cancel=i.cancel),i.wantType!=null&&i.hasOwnProperty("wantType")&&(s.wantType=o.enums===String?Jt.Message.Wantlist.WantType[i.wantType]:i.wantType),i.sendDontHave!=null&&i.hasOwnProperty("sendDontHave")&&(s.sendDontHave=i.sendDontHave),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,r1.default.util.toJSONOptions)},t.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/Message.Wantlist.Entry"},t}(),e}(),r.Block=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.prefix=cr.newBuffer([]),e.prototype.data=cr.newBuffer([]),e.encode=function(n,i){return i||(i=s9.create()),n.prefix!=null&&Object.hasOwnProperty.call(n,"prefix")&&i.uint32(10).bytes(n.prefix),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&i.uint32(18).bytes(n.data),i},e.decode=function(n,i){n instanceof cc||(n=cc.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Jt.Message.Block;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:{s.prefix=n.bytes();break}case 2:{s.data=n.bytes();break}default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof Jt.Message.Block)return n;var i=new Jt.Message.Block;return n.prefix!=null&&(typeof n.prefix=="string"?cr.base64.decode(n.prefix,i.prefix=cr.newBuffer(cr.base64.length(n.prefix)),0):n.prefix.length>=0&&(i.prefix=n.prefix)),n.data!=null&&(typeof n.data=="string"?cr.base64.decode(n.data,i.data=cr.newBuffer(cr.base64.length(n.data)),0):n.data.length>=0&&(i.data=n.data)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.prefix="":(o.prefix=[],i.bytes!==Array&&(o.prefix=cr.newBuffer(o.prefix))),i.bytes===String?o.data="":(o.data=[],i.bytes!==Array&&(o.data=cr.newBuffer(o.data)))),n.prefix!=null&&n.hasOwnProperty("prefix")&&(o.prefix=i.bytes===String?cr.base64.encode(n.prefix,0,n.prefix.length):i.bytes===Array?Array.prototype.slice.call(n.prefix):n.prefix),n.data!=null&&n.hasOwnProperty("data")&&(o.data=i.bytes===String?cr.base64.encode(n.data,0,n.data.length):i.bytes===Array?Array.prototype.slice.call(n.data):n.data),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,r1.default.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message.Block"},e}(),r.BlockPresenceType=function(){let e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),r.BlockPresence=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.cid=cr.newBuffer([]),e.prototype.type=0,e.encode=function(n,i){return i||(i=s9.create()),n.cid!=null&&Object.hasOwnProperty.call(n,"cid")&&i.uint32(10).bytes(n.cid),n.type!=null&&Object.hasOwnProperty.call(n,"type")&&i.uint32(16).int32(n.type),i},e.decode=function(n,i){n instanceof cc||(n=cc.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new Jt.Message.BlockPresence;n.pos<o;){var a=n.uint32();switch(a>>>3){case 1:{s.cid=n.bytes();break}case 2:{s.type=n.int32();break}default:n.skipType(a&7);break}}return s},e.fromObject=function(n){if(n instanceof Jt.Message.BlockPresence)return n;var i=new Jt.Message.BlockPresence;switch(n.cid!=null&&(typeof n.cid=="string"?cr.base64.decode(n.cid,i.cid=cr.newBuffer(cr.base64.length(n.cid)),0):n.cid.length>=0&&(i.cid=n.cid)),n.type){case"Have":case 0:i.type=0;break;case"DontHave":case 1:i.type=1;break}return i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.cid="":(o.cid=[],i.bytes!==Array&&(o.cid=cr.newBuffer(o.cid))),o.type=i.enums===String?"Have":0),n.cid!=null&&n.hasOwnProperty("cid")&&(o.cid=i.bytes===String?cr.base64.encode(n.cid,0,n.cid.length):i.bytes===Array?Array.prototype.slice.call(n.cid):n.cid),n.type!=null&&n.hasOwnProperty("type")&&(o.type=i.enums===String?Jt.Message.BlockPresenceType[n.type]:n.type),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,r1.default.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message.BlockPresence"},e}(),r})();var a7e={Block:hs.Wantlist.WantType.Block,Have:hs.Wantlist.WantType.Have},SWe=(r,e)=>Array.prototype.slice.call(e,0).sort((t,n)=>{let i=r(t),o=r(n);return i<o?-1:i>o?1:0}),n1=class{constructor(e,t){this.set=t?as({name:"ipfs_bitswap_wantlist",metrics:t.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,t,n){let i=e.toString(nt),o=this.set.get(i);o?(o.inc(),o.priority=t,o.wantType===a7e.Have&&n===a7e.Block&&(o.wantType=n)):(this.set.set(i,new o9(e,t,n)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){let t=e.toString(nt),n=this.set.get(t);n&&(n.dec(),!n.hasRefs()&&(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(SWe(e=>e[1].key,Array.from(this.set.entries())))}contains(e){let t=e.toString(nt);return this.set.has(t)}get(e){let t=e.toString(nt);return this.set.get(t)}};n1.Entry=o9;var TWe=n1.Entry,$u=class{constructor(e,t,n,i,o){this.entry=new TWe(e,t,n),this.cancel=!!i,this.sendDontHave=!!o}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(nt)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}};var la=(r,e)=>{let t=["bitswap"];return e&&t.push(e),r&&t.push(`${r.toString().slice(0,8)}`),z(t.join(":"))};var Kx=(r,e)=>{if(r.size!==e.size)return!1;for(let[t,n]of r){let i=e.get(t);if(i===void 0||n instanceof Uint8Array&&i instanceof Uint8Array&&!ct(n,i)||n instanceof $u&&i instanceof $u&&!n.equals(i))return!1}return!0};var Xr=class r{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return this.blocks.size===0&&this.wantlist.size===0&&this.blockPresences.size===0}addEntry(e,t,n,i,o){n==null&&(n=r.WantType.Block);let s=e.toString(nt),a=this.wantlist.get(s);a?(a.wantType===n&&(a.priority=t),i&&(a.cancel=!!i),o&&(a.sendDontHave=!!o),n===r.WantType.Block&&a.wantType===r.WantType.Have&&(a.wantType=n)):this.wantlist.set(s,new $u(e,t,n,i,o))}addBlock(e,t){let n=e.toString(nt);this.blocks.set(n,t)}addHave(e){let t=e.toString(nt);this.blockPresences.has(t)||this.blockPresences.set(t,r.BlockPresenceType.Have)}addDontHave(e){let t=e.toString(nt);this.blockPresences.has(t)||this.blockPresences.set(t,r.BlockPresenceType.DontHave)}cancel(e){let t=e.toString(nt);this.wantlist.delete(t),this.addEntry(e,0,r.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(t=>({block:t.cid.bytes,priority:Number(t.priority),cancel:!!t.cancel})),full:this.full?!0:void 0},blocks:Array.from(this.blocks.values())};return hs.encode(e).finish()}serializeToBitswap110(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(t=>({block:t.cid.bytes,priority:Number(t.priority),wantType:t.wantType,cancel:!!t.cancel,sendDontHave:!!t.sendDontHave})),full:this.full?!0:void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(let[t,n]of this.blocks.entries()){let i=$.parse(t),o=i.version,s=i.code,a=i.multihash.code,c=i.multihash.digest.length,u=s7e([o,s,a,c]);e.payload.push(new hs.Block({prefix:u,data:n}))}for(let[t,n]of this.blockPresences)e.blockPresences.push(new hs.BlockPresence({cid:$.parse(t).bytes,type:n}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),hs.encode(e).finish()}equals(e){return!(this.full!==e.full||this.pendingBytes!==e.pendingBytes||!Kx(this.wantlist,e.wantlist)||!Kx(this.blocks,e.blocks)||!Kx(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){let e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}};Xr.deserialize=async(r,e)=>{let t=hs.decode(r),n=t.wantlist&&t.wantlist.full||!1,i=new Xr(n);return t.wantlist&&t.wantlist.entries&&t.wantlist.entries.forEach(o=>{if(!o.block)return;let s=$.decode(o.block);i.addEntry(s,o.priority||0,o.wantType,!!o.cancel,!!o.sendDontHave)}),t.blockPresences&&t.blockPresences.forEach(o=>{if(!o.cid)return;let s=$.decode(o.cid);o.type===Xr.BlockPresenceType.Have?i.addHave(s):i.addDontHave(s)}),t.blocks.length>0?(await Promise.all(t.blocks.map(async o=>{let s=await ot.digest(o),a=$.createV0(s);i.addBlock(a,o)})),i):(t.payload.length>0&&(await Promise.all(t.payload.map(async o=>{if(!o.prefix||!o.data)return;let s=(0,c7e.default)(o.prefix),a=s[0],c=s[1],u=s[2],l=u===ot.code?ot:e&&await e.getHasher(u);if(!l)throw new X("Unknown hash algorithm","ERR_UNKNOWN_HASH_ALG");let d=await l.digest(o.data),h=$.create(a,c,d);i.addBlock(h,o.data)})),i.setPendingBytes(t.pendingBytes)),i)};Xr.blockPresenceSize=r=>r.bytes.length+1;Xr.Entry=$u;Xr.WantType={Block:hs.Wantlist.WantType.Block,Have:hs.Wantlist.WantType.Have};Xr.BlockPresenceType={Have:hs.BlockPresenceType.Have,DontHave:hs.BlockPresenceType.DontHave};var u7e=Math.pow(2,31)-1,l7e=1e3,d7e=1;var f7e=IWe;function IWe(r,e,t){var n=null,i=null,o=function(){n&&(clearTimeout(n),i=null,n=null)},s=function(){var c=i;o(),c&&c()},a=function(){if(!e)return r.apply(this,arguments);var c=this,u=arguments,l=t&&!n;if(o(),i=function(){r.apply(c,u)},n=setTimeout(function(){if(n=null,!l){var d=i;return i=null,d()}},e),l)return i()};return a.cancel=o,a.flush=s,a}var jx=class{constructor(e,t,n){this.peerId=t,this.network=n,this.refcnt=1,this._entries=[],this._log=la(e,"msgqueue"),this.sendEntries=f7e(this._sendEntries.bind(this),d7e)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;let e=new Xr(!1);this._entries.forEach(t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(t){this._log.error("cant connect to peer %s: %s",this.peerId.toString(),t.message);return}this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,e).catch(t=>{this._log.error("send error: %s",t.message)})}};var Gx=class{constructor(e,t,n,i){this.peers=as({name:"ipfs_bitswap_want_manager_peers",metrics:i.metrics}),this.wantlist=new n1(n,i),this.network=t,this._stats=n,this._peerId=e,this._log=la(e,"want")}_addEntries(e,t,n){let i=e.map((o,s)=>new Xr.Entry(o,u7e-s,Xr.WantType.Block,t));i.forEach(o=>{o.cancel?n?this.wantlist.removeForce(o.cid.toString(nt)):this.wantlist.remove(o.cid):(this._log("adding to wl"),this.wantlist.add(o.cid,o.priority))});for(let o of this.peers.values())o.addEntries(i)}_startPeerHandler(e){let t=this.peers.get(e.toString());if(t){t.refcnt++;return}t=new jx(this._peerId,e,this.network);let n=new Xr(!0);for(let i of this.wantlist.entries())n.addEntry(i[1].cid,i[1].priority);return t.addMessage(n),this.peers.set(e.toString(),t),t}_stopPeerHandler(e){let t=this.peers.get(e.toString());t&&(t.refcnt--,!(t.refcnt>0)&&this.peers.delete(e.toString()))}wantBlocks(e,t={}){this._addEntries(e,!1),t&&t.signal&&t.signal.addEventListener("abort",()=>{this.cancelWants(e)})}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach(e=>this.disconnected(e.peerId))}};var h7e=L(Dn(),1);var ZM="/ipfs/bitswap/1.0.0",JM="/ipfs/bitswap/1.1.0",eU="/ipfs/bitswap/1.2.0",CWe=32,RWe=128,kWe=3e4,Hx=class{constructor(e,t,n,i={}){this._log=la(e.peerId,"network"),this._libp2p=e,this._bitswap=t,this._protocols=[ZM],i.b100Only||(this._protocols.unshift(JM),this._protocols.unshift(eU)),this._stats=n,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=i.hashLoader,this._maxInboundStreams=i.maxInboundStreams??CWe,this._maxOutboundStreams=i.maxOutboundStreams??RWe,this._incomingStreamTimeout=i.incomingStreamTimeout??kWe}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});let e=_u({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect});this._registrarIds=[];for(let t of this._protocols)this._registrarIds.push(await this._libp2p.register(t,e));this._libp2p.getConnections().forEach(t=>{this._onPeerConnect(t.remotePeer)})}async stop(){if(this._running=!1,await this._libp2p.unhandle(this._protocols),this._registrarIds!=null){for(let e of this._registrarIds)this._libp2p.unregister(e);this._registrarIds=[]}}_onConnection({stream:e,connection:t}){if(!this._running)return;let n=new h7e.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then(async()=>{this._log("incoming new bitswap %s connection from %p",e.stat.protocol,t.remotePeer),await Ke(Ii(e.source,n.signal),gn(),async i=>{for await(let o of i){try{let s=await Xr.deserialize(o.subarray(),this._hashLoader);await this._bitswap._receiveMessage(t.remotePeer,s)}catch(s){this._bitswap._receiveError(s);break}n.reset()}})}).catch(i=>{this._log(i),e.abort(i)}).finally(()=>{n.clear(),e.close()})}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,t={}){return this._libp2p.contentRouting.findProviders(e,t)}async findAndConnect(e,t){let n=[],i=0;for await(let o of this.findProviders(e,t))if(this._log(`connecting to provider ${o.id}`),n.push(this.connectTo(o.id,t).catch(s=>{this._log.error(s)})),i++,i===3)break;await Promise.all(n)}async provide(e,t){await this._libp2p.contentRouting.provide(e,t)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");let n=e.toString();this._log("sendMessage to %s",n,t);let o=await(await this._libp2p.dial(e)).newStream([eU,JM,ZM]);await PWe(o,t,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e,t){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,t)}_updateSentStats(e,t){let n=e.toString();if(this._stats){for(let i of t.values())this._stats.push(n,"dataSent",i.length);this._stats.push(n,"blocksSent",t.size)}}};async function PWe(r,e,t){try{let n;switch(r.stat.protocol){case ZM:n=e.serializeToBitswap100();break;case JM:case eU:n=e.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+r.stat.protocol)}await Ke([n],Bn(),r)}catch(n){t(n)}finally{r.close()}}var Wx=class{constructor(e){this.partner=e,this.wantlist=new n1,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesRecv+=e}wants(e,t,n){this.wantlist.add(e,t,n)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}};var a9=class extends Map{constructor(e,t){super(),this._cmp=t||this._defaultSort,this._keys=[];for(let[n,i]of e||[])this.set(n,i)}update(e){if(e<0||e>=this._keys.length)return;let t=this._keys[e];this._keys.splice(e,1);let n=this._find(t);this._keys.splice(n,0,t)}set(e,t){if(this.has(e)){let i=this.indexOf(e);this._keys.splice(i,1)}super.set(e,t);let n=this._find(e);return this._keys.splice(n,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;let t=this.indexOf(e);return this._keys.splice(t,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;let t=this._find(e);if(this._keys[t]===e)return t;for(let n=1;n<this._keys.length;n++){if(this._keys[t+n]===e)return t+n;if(this._keys[t-n]===e)return t-n}return-1}_find(e){let t=0,n=this._keys.length;for(;t<n;){let i=t+n>>>1,o=this._kCmp(this._keys[i],e);if(o<0)t=i+1;else if(o>0)n=i;else return i}return t}*keys(){for(let e of this._keys)yield e}*values(){for(let e of this._keys)yield this.get(e)}*entries(){for(let e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,t){if(e)for(let n of this._keys)e.apply(t,[[n,this.get(n)]])}_defaultSort(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}_kCmp(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}};var DWe={hasNewInfo(){return!1},merge(){}},Yx=class{constructor(e=DWe){this._taskMerger=e,this._byPeer=new a9([],Xx.compare)}pushTasks(e,t){let n=this._byPeer.get(e.toString());n||(n=new Xx(e,this._taskMerger)),n.pushTasks(t),this._byPeer.set(e.toString(),n)}popTasks(e){let t=this._head();if(t===void 0)return{tasks:[],pendingSize:0};let{tasks:n,pendingSize:i}=t.popTasks(e);if(n.length===0)return{tasks:n,pendingSize:i};let o=t.peerId;return t.isIdle()?this._byPeer.delete(o.toString()):this._byPeer.update(0),{peerId:o,tasks:n,pendingSize:i}}_head(){if(this._byPeer.size!==0)for(let[,e]of this._byPeer)return e}remove(e,t){let n=this._byPeer.get(t.toString());n&&n.remove(e)}tasksDone(e,t){let n=this._byPeer.get(e.toString());if(!n)return;let i=this._byPeer.indexOf(e.toString());for(let o of t)n.taskDone(o);this._byPeer.update(i)}},Xx=class{constructor(e,t){this.peerId=e,this._taskMerger=t,this._activeTotalSize=0,this._pending=new tU,this._active=new Set}pushTasks(e){for(let t of e)this._pushTask(t)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;let t=this._pending.get(e.topic);if(t){e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),this._taskMerger.merge(e,t);return}this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){let t=[];for(let n of this._active)n.topic===e.topic&&t.push(n);return t.length===0?!0:this._taskMerger.hasNewInfo(e,t)}popTasks(e){let t=0,n=[],i=this._pending.tasks();for(let o=0;o<i.length&&t<e;o++){let s=i[o];n.push(s),t+=s.size,this._pending.delete(s.topic),this._activeTotalSize+=s.size,this._active.add(s)}return{tasks:n,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return this._pending.length===0&&this._active.size===0}static compare(e,t){return e[1]._pending.length===0?1:t[1]._pending.length===0?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}},tU=class{constructor(){this._tasks=new a9([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((e,t)=>e+t.task.size,0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map(e=>e.task)}updatePriority(e,t){let n=this._tasks.get(e);if(!n)return;let i=this._tasks.indexOf(e);n.task.priority=t,this._tasks.update(i)}_compare(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}};var p7e={hasNewInfo(r,e){let t=!1,n=!1;for(let i of e)i.data.haveBlock&&(t=!0),i.data.isWantBlock&&(n=!0);return!!(!n&&r.data.isWantBlock||!t&&r.data.haveBlock)},merge(r,e){let t=r.data,n=e.data;!n.haveBlock&&t.haveBlock&&(n.haveBlock=t.haveBlock,n.blockSize=t.blockSize),!n.isWantBlock&&t.isWantBlock&&(n.isWantBlock=!0,(!n.haveBlock||t.haveBlock)&&(n.haveBlock=t.haveBlock,e.size=r.size)),n.isWantBlock&&n.haveBlock&&(e.size=n.blockSize)}};var m7e=Xr.WantType,NWe=16*1024,OWe=1024,Qx=class{constructor(e,t,n,i,o,s={}){this._log=la(e,"engine"),this.blockstore=t,this.network=n,this._stats=i,this._opts=this._processOpts(s),this.ledgerMap=as({name:"ipfs_bitswap_ledger_map",metrics:o.metrics}),this._running=!1,this._requestQueue=new Yx(p7e)}_processOpts(e){return{maxSizeReplaceHasWithBlock:OWe,targetMessageSize:NWe,...e}}_scheduleProcessTasks(){setTimeout(()=>{this._processTasks()})}async _processTasks(){if(!this._running)return;let{peerId:e,tasks:t,pendingSize:n}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(t.length===0)return;let i=new Xr(!1);i.setPendingBytes(n);let o=[],s=new Map;for(let c of t){let u=$.parse(c.topic);c.data.haveBlock?c.data.isWantBlock?(o.push(u),s.set(c.topic,c.data)):i.addHave(u):i.addDontHave(u)}let a=await this._getBlocks(o);for(let[c,u]of s){let l=$.parse(c),d=a.get(c);d?i.addBlock(l,d):u.sendDontHave&&i.addDontHave(l)}if(i.empty){e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks();return}try{e&&await this.network.sendMessage(e,i);for(let[c,u]of a.entries())e&&this.messageSent(e,$.parse(c),u)}catch(c){this._log.error(c)}e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks()}wantlistForPeer(e){let t=e.toString(),n=this.ledgerMap.get(t);return n?n.wantlist.sortedEntries():new Map}ledgerForPeer(e){let t=e.toString(),n=this.ledgerMap.get(t);return n?{peer:n.partner,value:n.debtRatio(),sent:n.accounting.bytesSent,recv:n.accounting.bytesRecv,exchanged:n.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){if(e.length){for(let t of this.ledgerMap.values())for(let n of e){let i=t.wantlistContains(n.cid);if(!i)continue;let o=n.data.length,s=this._sendAsBlock(i.wantType,o),a=o;s||(a=Xr.blockPresenceSize(i.cid)),this._requestQueue.pushTasks(t.partner,[{topic:i.cid.toString(nt),priority:i.priority,size:a,data:{blockSize:o,isWantBlock:s,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,t){let n=this._findOrCreate(e);if(t.empty)return;if(t.full&&(n.wantlist=new n1),this._updateBlockAccounting(t.blocks,n),t.wantlist.size===0){this._scheduleProcessTasks();return}let i=[],o=[];t.wantlist.forEach(s=>{s.cancel?(n.cancelWant(s.cid),i.push(s.cid)):(n.wants(s.cid,s.priority,s.wantType),o.push(s))}),this._cancelWants(e,i),await this._addWants(e,o),this._scheduleProcessTasks()}_cancelWants(e,t){for(let n of t)this._requestQueue.remove(n.toString(nt),e)}async _addWants(e,t){let n=await this._getBlockSizes(t.map(o=>o.cid)),i=[];for(let o of t){let s=o.cid.toString(nt),a=n.get(s);if(a==null)o.sendDontHave&&i.push({topic:s,priority:o.priority,size:Xr.blockPresenceSize(o.cid),data:{isWantBlock:o.wantType===m7e.Block,blockSize:0,haveBlock:!1,sendDontHave:o.sendDontHave}});else{let c=this._sendAsBlock(o.wantType,a),u=a;c||(u=Xr.blockPresenceSize(o.cid)),i.push({topic:s,priority:o.priority,size:u,data:{isWantBlock:c,blockSize:a,haveBlock:!0,sendDontHave:o.sendDontHave}})}this._requestQueue.pushTasks(e,i)}}_sendAsBlock(e,t){return e===m7e.Block||t<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){let t=await this._getBlocks(e);return new Map([...t].map(([n,i])=>[n,i.length]))}async _getBlocks(e){let t=new Map;return await Promise.all(e.map(async n=>{try{let i=await this.blockstore.get(n);t.set(n.toString(nt),i)}catch(i){i.code!=="ERR_NOT_FOUND"&&this._log.error("failed to query blockstore for %s: %s",n,i)}})),t}_updateBlockAccounting(e,t){for(let n of e.values())this._log("got block (%s bytes)",n.length),t.receivedBytes(n.length)}messageSent(e,t,n){let i=this._findOrCreate(e);i.sentBytes(n.length),i.wantlist.remove(t)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toString())}_findOrCreate(e){let t=e.toString(),n=this.ledgerMap.get(t);if(n)return n;let i=new Wx(e);return this.ledgerMap.set(t,i),this._stats&&this._stats.push(t,"peerCount",1),i}start(){this._running=!0}stop(){this._running=!1}};var w7e=require("events");var g7e=r=>`unwant:${ie(r.multihash.bytes,"base64")}`,y7e=r=>`block:${ie(r.multihash.bytes,"base64")}`,Zx=class extends w7e.EventEmitter{constructor(e){super(),this.setMaxListeners(l7e),this._log=la(e,"notif")}hasBlock(e,t){let n=y7e(e);this._log(n),this.emit(n,t)}wantBlock(e,t={}){if(!e)throw new Error("Not a valid cid");let n=y7e(e),i=g7e(e);return this._log(`wantBlock:${e}`),new Promise((o,s)=>{let a=()=>{this.removeListener(n,c),s(new Error(`Block for ${e} unwanted`))},c=u=>{this.removeListener(i,a),o(u)};this.once(i,a),this.once(n,c),t&&t.signal&&t.signal.addEventListener("abort",()=>{this.removeListener(n,c),this.removeListener(i,a),s(new Error(`Want for ${e} aborted`))})})}unwantBlock(e){let t=g7e(e);this._log(t),this.emit(t)}};var S7e=require("events");var E7e=require("events"),rU=L(v7e(),1),c9=class extends E7e.EventEmitter{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(n=>{this._stats[n]=BigInt(0),this._movingAverages[n]={},this._options.movingAverageIntervals.forEach(i=>{(this._movingAverages[n][i]=(0,rU.default)(i)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){let t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let t=e-this._frequencyLastTime;t&&Object.keys(this._stats).forEach(n=>{this._updateFrequencyFor(n,t,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,t,n){let i=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let o=i/t*1e3,s=this._movingAverages[e];s||(s=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(a=>{let c=s[a];c||(c=s[a]=(0,rU.default)(a)),c.push(n,o)})}_applyOp(e){let t=e[0],n=e[1];if(typeof n!="number")throw new Error(`invalid increment number: ${n}`);Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(n),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=n}};var x7e={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3]},Jx=class extends S7e.EventEmitter{constructor(e,t=[],n=x7e){super();let i=Object.assign({},x7e,n);if(typeof i.computeThrottleTimeout!="number")throw new Error("need computeThrottleTimeout");if(typeof i.computeThrottleMaxQueueSize!="number")throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=t,this._options=i,this._enabled=this._options.enabled,this._global=new c9(t,i),this._global.on("update",o=>this.emit("update",o)),this._peers=as({name:"ipfs_bitswap_stats_peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){let t=typeof e!="string"&&e.toString?e.toString():`${e}`;return this._peers.get(t)}push(e,t,n){if(this._enabled&&(this._global.push(t,n),e)){let i=this._peers.get(e);i||(i=new c9(this._initialCounters,this._options),this._peers.set(e,i)),i.push(t,n)}}disconnected(e){let t=e.toString(),n=this._peers.get(t);n&&(n.stop(),this._peers.delete(t))}};var T7e=L(va(),1);var BWe={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},MWe=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],eS=class extends U1{constructor(e,t,n={}){super(),this._libp2p=e,this._log=la(this.peerId),this._options=Object.assign({},BWe,n),this._stats=new Jx(e,MWe,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new Hx(e,this,this._stats,{hashLoader:n.hashLoader,maxInboundStreams:n.maxInboundStreams,maxOutboundStreams:n.maxOutboundStreams,incomingStreamTimeout:n.incomingStreamTimeout}),this.blockstore=t,this.engine=new Qx(this.peerId,t,this.network,this._stats,e),this.wm=new Gx(this.peerId,this.network,this._stats,e),this.notifications=new Zx(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch{this._log("failed to receive message",t)}if(t.blocks.size===0)return;let n=[];for(let[i,o]of t.blocks.entries()){let s=$.parse(i);n.push({wasWanted:this.wm.wantlist.contains(s),cid:s,data:o})}this.wm.cancelWants(n.filter(({wasWanted:i})=>i).map(({cid:i})=>i)),await Promise.all(n.map(({cid:i,wasWanted:o,data:s})=>this._handleReceivedBlock(e,i,s,o)))}async _handleReceivedBlock(e,t,n,i){this._log("received block");let o=await this.blockstore.has(t);this._updateReceiveCounters(e.toString(),t,n,o),i&&await this.put(t,n)}_updateReceiveCounters(e,t,n,i){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",n.length),i&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",n.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,t){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,t={}){let n=(c,u)=>(this.wm.wantBlocks([c],u),this.notifications.wantBlock(c,u)),i=!1,o=async(c,u)=>{try{return await this.blockstore.get(c,u)}catch(l){if(l.code!=="ERR_NOT_FOUND")throw l;return i||(i=!0,this.network.findAndConnect(c,u).catch(d=>this._log.error(d))),n(c,u)}},s=new AbortController,a=t.signal?(0,T7e.anySignal)([t.signal,s.signal]):s.signal;try{return await Promise.race([this.notifications.wantBlock(e,{signal:a}),o(e,{signal:a})])}finally{s.abort()}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}unwant(e){let t=Array.isArray(e)?e:[e];this.wm.unwantBlocks(t),t.forEach(n=>this.notifications.unwantBlock(n))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,t,n){await this.blockstore.put(e,t),this._sendHaveBlockNotifications(e,t)}async*putMany(e,t){for await(let{key:n,value:i}of this.blockstore.putMany(e,t))this._sendHaveBlockNotifications(n,i),yield{key:n,value:i}}_sendHaveBlockNotifications(e,t){this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch(n=>{this._log.error("Failed to provide: %s",n.message)})}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}has(e){return this.blockstore.has(e)}};var I7e=(r,e,t={})=>new eS(r,e,t);var C7e=L(fe(),1);var tS={};it(tS,{abortedError:()=>UWe,notFoundError:()=>A7e});var nU=L(fe(),1);function A7e(r){return r=r||new Error("Not Found"),(0,nU.default)(r,"ERR_NOT_FOUND")}function UWe(r){return r=r||new Error("Aborted"),(0,nU.default)(r,"ERR_ABORTED")}var D1r={...tS};var rS=class extends U1{constructor(e,t){super(),this.child=e,this.bitswap=t}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,t,n={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,t,n):await this.child.put(e,t,n))}async*putMany(e,t={}){let n=vt(e,async({key:i})=>!await this.has(i));this.bitswap.isStarted()?yield*this.bitswap.putMany(n,t):yield*this.child.putMany(n,t)}async get(e,t={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,t):this.child.get(e,t)}async*getMany(e,t={}){let n=Gt({objectMode:!0}),i=Gt({objectMode:!0});Promise.resolve().then(async()=>{for await(let o of e)!await this.has(o)&&this.bitswap.isStarted()?n.push(o):i.push(o);n.end(),i.end()}),yield*Or(this.bitswap.getMany(n,t),this.child.getMany(i,t))}async delete(e,t){await this.child.delete(e,t)}async*deleteMany(e,t){yield*this.child.deleteMany(e,t)}async has(e,t={}){return this.child.has(e,t)}async*query(e,t={}){yield*this.child.query(e,t)}async*queryKeys(e,t={}){yield*this.child.queryKeys(e,t)}};var nS=class r{constructor(e,t,n,i,o){this.peerId=e,this.libp2p=t,this.bitswap=n,this.repo=i,this.blockstore=o}static async start({peerId:e,repo:t,print:n,hashers:i,options:o}){t.closed&&await t.open();let s=await t.config.getAll(),a=await r9({options:o,repo:t,peerId:e,multiaddrs:FWe(e,s),config:s,keychainConfig:void 0});await a.start();for(let l of a.getMultiaddrs())n(`Swarm listening on ${l.toString()}`);let c=I7e(a,t.blocks,{statsEnabled:!0,hashLoader:i,maxInboundStreams:1024,maxOutboundStreams:1024});await c.start();let u=new rS(t.blocks,c);return t.blocks=u,t.pins.blockstore=u,new r(e,a,c,t,u)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await e.bitswap.stop(),await e.libp2p.stop()}},FWe=(r,e)=>{let t=r.toString(),n=[],i=e.Addresses&&e.Addresses.Swarm||[];for(let o of i){let s=Ee(o);if(s.protoCodes().includes(VWe))throw(0,C7e.default)(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");let a=s.getPeerId();a&&a!==t&&(s=s.encapsulate(`/p2p/${t}`)),n.push(s)}return n},VWe=479;function R7e({network:r}){async function e(t={}){let n=[],{libp2p:i}=await r.use(t);return await i.peerStore.forEach(o=>{n.push({id:o.id,addrs:o.addresses.map(s=>s.multiaddr)})}),n}return J(e)}function k7e({network:r}){async function e(t,n={}){let{libp2p:i}=await r.use(n);await i.dial(t,n)}return J(e)}function P7e({network:r}){async function e(t,n={}){let{libp2p:i}=await r.use(n);await i.hangUp(t)}return J(e)}function D7e({network:r}){async function e(t={}){let{libp2p:n}=await r.use(t);return n.getMultiaddrs()}return J(e)}function N7e({network:r}){async function e(t={}){let{libp2p:n}=await r.use(t);if(t.verbose){let o=[];for(let s of n.getConnections()){let a={addr:s.remoteAddr,peer:s.remotePeer};(t.verbose||t.direction)&&(a.direction=s.stat.direction),t.verbose&&(a.muxer=s.stat.multiplexer,a.latency="n/a",a.streams=[]),o.push(a)}return o}let i=new Map;for(let o of n.getConnections()){let s={addr:o.remoteAddr,peer:o.remotePeer};i.set(o.remotePeer.toString(),s)}return Array.from(i.values())}return J(e)}var iS=class{constructor({network:e}){this.addrs=R7e({network:e}),this.connect=k7e({network:e}),this.disconnect=P7e({network:e}),this.localAddrs=D7e({network:e}),this.peers=N7e({network:e})}};var u9={success:!0,time:0,text:""};function O7e({network:r}){async function*e(t,n={}){let{libp2p:i}=await r.use();n.count=n.count||10;let o=await i.peerStore.get(t),s=o&&o.id;if(!s){yield{...u9,text:`Looking up peer ${t}`};let u=await i.peerRouting.findPeer(t);s=u&&u.id}if(!s)throw new Error("Peer was not found");yield{...u9,text:`PING ${s.toString()}`};let a=0,c=0;for(let u=0;u<n.count;u++)try{let l=await i.ping(s);c+=l,a++,yield{...u9,time:l}}catch(l){yield{...u9,success:!1,text:l.toString()}}if(a){let u=c/a;yield{...u9,text:`Average latency: ${u}ms`}}}return J(e)}var q0=L(fe(),1);var iU="/ipns/";function L7e(r){r.startsWith(iU)&&(r=r.substring(iU.length));let e;if((r[0]==="1"||r[0]==="Q")&&(r=`z${r}`),r[0]==="z"&&(e=nt.decode(r)),r[0]==="k"&&(e=$d.decode(r)),!e)throw new Error("Could not parse string");if(e[0]!==1&&e[1]!==114&&(e=Ye([[1,114],e])),e.length!==40)throw new Error("Incorrect length "+e.length);return Ye([oe(iU),e.subarray(2)])}function B7e({network:r,repo:e,peerId:t}){let{get:n,put:i,findProvs:o,findPeer:s,provide:a,query:c}={async*get(u,l={}){let{libp2p:d}=await eh(r,t,l),h=u instanceof Uint8Array?u:L7e(u);if(d.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*d.dht.get(h,l)},async*put(u,l,d){let{libp2p:h}=await eh(r,t,d),f=u instanceof Uint8Array?u:L7e(u);if(h.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*h.dht.put(f,l,d)},async*findProvs(u,l={}){let{libp2p:d}=await eh(r,t,l);if(d.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*d.dht.findProviders(u,{signal:l.signal})},async*findPeer(u,l={}){let{libp2p:d}=await eh(r,t,l);if(d.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*d.dht.findPeer(u,{signal:l.signal})},async*provide(u,l={recursive:!1}){let{libp2p:d}=await eh(r,t,l);if(!await e.blocks.has(u))throw(0,q0.default)(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(l.recursive)throw(0,q0.default)(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");if(d.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*d.dht.provide(u)},async*query(u,l={}){let{libp2p:d}=await eh(r,t,l),h,f=$.asCID(u);if(f!=null?h=f.multihash.bytes:h=Be(u.toString()).toBytes(),d.dht==null)throw(0,q0.default)(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*d.dht.getClosestPeers(h,l)}};return{get:J(n),put:J(i),findProvs:J(o),findPeer:J(s),provide:J(a),query:J(c)}}var eh=async(r,e,t)=>{let n=await r.use(t);if(n.libp2p.dht!=null)return n;{let i=async function*(){yield{from:e,name:"QUERY_ERROR",type:3,error:new Sc("dht not enabled")}};return{libp2p:{dht:{get:i,put:i,findProviders:i,findPeer:i,provide:i,getClosestPeers:i}}}}};var M7e=L(fe(),1);var U7e=L(Ig(),1);function F7e({network:r,config:e}){let t=(0,U7e.default)(e||{},"Pubsub.Enabled",!0),n={},i;return{subscribe:t?J(o):l9,unsubscribe:t?J(s):l9,publish:t?J(a):l9,ls:t?J(c):l9,peers:t?J(u):l9};async function o(l,d,h={}){let{libp2p:f}=await r.use(h);f.pubsub.subscribe(l),i==null&&(i=m=>{let w=m.detail;n[w.topic]&&n[w.topic].forEach(_=>{if(typeof _=="function"){_(w);return}_!=null&&_.handleEvent!=null&&_.handleEvent(w)})},f.pubsub.addEventListener("message",i)),d!=null&&(n[l]==null&&(n[l]=[]),n[l].push(d))}async function s(l,d,h={}){let{libp2p:f}=await r.use(h);d!=null&&n[l]!=null&&(n[l]=n[l].filter(m=>m!==d),n[l].length===0&&delete n[l]),typeof d!="function"&&delete n[l],n[l]==null&&f.pubsub.unsubscribe(l),Object.keys(n).length===0&&(f.pubsub.removeEventListener("message",i),i=void 0)}async function a(l,d,h={}){let{libp2p:f}=await r.use(h);if(!d)throw(0,M7e.default)(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await f.pubsub.publish(l,d)}async function c(l={}){let{libp2p:d}=await r.use(l);return d.pubsub.getTopics()}async function u(l,d={}){let{libp2p:h}=await r.use(d);return h.pubsub.getSubscribers(l)}}var l9=async()=>{throw new Sc("pubsub not enabled")};var zWe=Je.bind({ignoreUndefined:!0}),Ku=z("ipfs"),qWe=3e4,oU=class{constructor({print:e,storage:t,codecs:n,options:i}){let{peerId:o,repo:s,keychain:a}=t,c=y2.create(nS),u=OJ(i.preload),l=yK(),d=wK({network:c}),h=new Dg(i),f=Object.values(cm);(i.ipld&&i.ipld.hashers?i.ipld.hashers:[]).forEach(j=>f.push(j)),this.hashers=new s5({hashers:f,loadHasher:i.ipld&&i.ipld.loadHasher});let m=Object.values(vc);(i.ipld&&i.ipld.bases?i.ipld.bases:[]).forEach(j=>m.push(j)),this.bases=new i5({bases:m,loadBase:i.ipld&&i.ipld.loadBase});let w=new Rm({repo:s,codecs:n}),_=new Hg({codecs:n,hashers:this.hashers,preload:u,repo:s}),E=new Lg({dns:l,ipns:h,repo:s,codecs:n,peerId:o,isOnline:d,keychain:a,options:i}),S=EK({repo:s,codecs:n,bases:this.bases,name:E}),p=new Hy({repo:s,codecs:n,hashers:this.hashers,preload:u}),g=Object.assign(WW({repo:s,codecs:n,resolve:S,preload:u}),{local:YW({repo:t.repo})}),{add:y,addAll:b,cat:x,get:v,ls:T}=new My({preload:u,repo:s,options:i.EXPERIMENTAL,hashers:this.hashers}),I=See({repo:s,preload:u,hashers:this.hashers,options:i}),R=LJ({files:I,preload:u,options:i.preload});this.preload=u,this.name=E,this.ipns=h,this.pin=w,this.resolve=S,this.block=_,this.refs=g,this.start=dK({network:c,peerId:o,repo:s,preload:u,ipns:h,mfsPreload:R,print:e,keychain:a,hashers:this.hashers,options:i}),this.stop=fK({network:c,preload:u,mfsPreload:R,ipns:h,repo:s}),this.dht=B7e({network:c,repo:s,peerId:o}),this.pubsub=F7e({network:c,config:i.config}),this.dns=l,this.isOnline=d,this.id=jZ({network:c,peerId:o}),this.version=KZ({repo:s}),this.bitswap=new Mg({network:c}),this.bootstrap=new Kg({repo:s}),this.config=HZ({repo:s}),this.ping=O7e({network:c}),this.add=y,this.addAll=b,this.cat=x,this.get=v,this.ls=T,this.dag=p,this.files=I,this.key=new sw({keychain:a}),this.object=new cw({preload:u,codecs:n,repo:s}),this.repo=new lw({repo:s,hashers:this.hashers}),this.stats=new dw({repo:s,network:c}),this.swarm=new iS({network:c}),Object.defineProperty(this,"libp2p",{get(){let j=c.try();return j?j.libp2p:void 0}});let M=()=>Promise.reject((0,oS.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),U=async function*(){throw(0,oS.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=M,this.diag={cmds:M,net:M,sys:M},this.log={level:M,ls:M,tail:U},this.mount=M,this.codecs=n}async init(){throw new xc}},$We=async r=>{let e=dt({Data:new gt({type:"directory"}).marshal(),Links:[]}),t=await r.block.put(e,{mhtype:"sha2-256",format:"dag-pb"});return await r.pin.add(t),t},KWe=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!V7e.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function q7e(r={}){r=zWe(KWe(),r);let e=r.init||{},t={name:bn.name,code:bn.code,encode:u=>u,decode:u=>u},n=Object.values(um);[$t,_c,Fd,Rh,t].concat(r.ipld&&r.ipld.codecs||[]).forEach(u=>n.push(u));let i=new o5({codecs:n,loadCodec:r.ipld&&r.ipld.loadCodec}),o=r.silent?Ku:console.log;Ku("creating repo");let s=await $x.start(o,i,r);Ku("getting repo config");let a=await s.repo.config.getAll(),c=new oU({storage:s,print:o,codecs:i,options:{...r,config:a}});if(Ku("starting preload"),await c.preload.start(),Ku("starting storage"),c.ipns.startOffline(s),s.isNew&&!e.emptyRepo){let u=await $We(c);if(Ku("adding default assets"),await i$({addAll:c.addAll,print:o}),Ku("initializing IPNS keyspace"),s.peerId.publicKey==null)throw(0,oS.default)(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");let l=new z7e.TimeoutController(qWe);try{await c.ipns.initializeKeyspace(s.peerId,oe(`/ipfs/${u}`),{signal:l.signal})}finally{l.clear()}}return r.start!==!1&&(Ku("starting node"),await c.start()),c}var jWe=L(DN(),1),GWe=L(NN(),1),$7e=q7e;var K7e={toString:function(r){return r.toV1().toString()},fromString:function(r){return Lt.parse(r)}};var sS=(()=>{let r;return{init:async()=>{r||(r=await $7e({repo:String(Math.random()+Date.now())}))},store:async function(e,t){await this.init();let n={path:e,content:t},i=await r.add(n),{cid:o}=i;return K7e.toString(o)},retrieve:async function(e){await this.init();let t=new TextDecoder,n="";for await(let i of r.cat(e))n+=t.decode(i,{stream:!0});return n}}})();var HWe=()=>{let r=je.get("gistId");return je.get("authToken")?r?"Sync: Notes with my GitHub Gist":"Sync: Pick your Gist to sync with":"Sync: Authorize your GitHub account for synchronisation"},WWe={title:"Share note",icon:xr(MS,"share note"),sortTitle:"Share",call:IF},YWe={title:"Share public link",key:null,icon:xr(MS,"share public link"),sortTitle:"Share public link",call:async()=>{Bt.hide(),await ch(ae(".terminal").getValue());let r=un(),t=(await xU({note:r})).history[0].url,n=await fetch(t).then(l=>l.json()),{files:i}=n,o=Object.values(i),[s]=o,{raw_url:a}=s,c=`${yt.baseUrl}?raw=${a}`;hc(c,"MiroPad public link copied to clipboard \u{1F4CB}!")}},sU=()=>[{title:"New note",icon:xr(SF,"new note"),sortTitle:"New",key:"n",call:T9},{title:"Save",key:"s",icon:xr(cF,"save"),sortTitle:"Save",call:async()=>{Bt.hide(),await ch(ae(".terminal").getValue());let r=un(),{disableSync:e=!1}=r;e||wS([r]),dc()}},...navigator.share?[WWe]:[],{title:"Toggle MarkDown Viewer",icon:xr(yF,"toggle markdown viewer","rotate90"),sortTitle:"Split",key:"m",call:()=>{Y0.toggle(),Bt.hide()}},{title:"Full MarkDown view",icon:xr(wF,"full view"),sortTitle:"Full view",key:"shift m",call:()=>{Y0.toggle("full"),Bt.hide()}},{title:"Save to IPFS",key:"i",icon:xr(EF,"save"),sortTitle:"save->ipfs",call:async()=>{Bt.hide(),await ch(ae(".terminal").getValue());let r=un(),{disableSync:e=!1}=r;if(e||wS([r]),r){let t=await sS.store(r.title,r.text);hc(`${yt.baseUrl}#?cid=${t}`)}}},...jU()?[YWe]:[],{title:"Zen mode",icon:xr(TF,"zen mode"),sortTitle:"Zen mode",key:"shift z",call:()=>{!!yt.getSearchParam("zen")?yt.deleteParam("zen"):yt.set(void 0,{zen:!0}),Bt.hide()}},{title:"List saved notes",icon:xr(aF,"list notes"),sortTitle:"Notes",key:"p",call:()=>Bt.toggle(Bt.getModes().notes)},{title:"Delete note",key:"shift d",icon:xr(lh,"delete note"),sortTitle:"Delete",call:I9},{title:HWe(),icon:xr(uF,"sync with github"),key:null,call:async()=>{let r=je.get("authToken");if(!r)return await YU();if(!je.get("gistId"))return await XU(r);Bt.hide(),await uh()}},{title:"Sync: Reset Gist settings",icon:xr(lF,"reset github settings"),key:null,call:async()=>{localStorage.removeItem("authToken"),localStorage.removeItem("gistId"),localStorage.removeItem("lastLocalUpdate"),localStorage.removeItem("lastSync"),Ze.info("Gist setting have been reset!"),Bt.hide()}},{title:"Toggle sidebar",experimental:!0,key:"shift l",call:()=>{ae("aside").toggle()}},{title:"Save to File System...",experimental:!0,icon:xr(dF,"save file"),key:"shift s",call:async()=>{let{text:r,title:e}=un();ZU(r,e),Bt.hide()}},{title:"Email note to...",experimental:!0,icon:xr(hF,"email"),key:"e",call:()=>{let r=document.querySelector(".terminal").value;iF(r),Bt.hide()}},{title:"Toggle experimental features",experimental:!1,icon:xr(pF,"lab"),key:null,call:()=>{let r=!!je.get("__experimental__");r?je.remove("__experimental__"):je.set("__experimental__",!0),Ze.showNotification(`Experimental features turned ${r?"off":"on"}`),Bt.hide()}},{title:"Toggle Autocompletion",experimental:!1,icon:xr(bF,"autocompletion"),key:null,call:()=>{let r=!!je.get("__autocomplete__");r?je.remove("__autocomplete__"):je.set("__autocomplete__",!0),Ze.showNotification(`Autocomplete feature turned ${r?"off":"on"}`),Bt.hide(),ae(".terminal").focus()}},{title:"Add a cover picture",experimental:!0,icon:xr(mF,"cover picture"),key:null,call:async()=>{let r=prompt("Paste the image URL in here...");Bt.hide(),await sF(200),hc(`<div class="cover" style="background-image: url('${r}')"></div>`,"\u{1F44C}Copied! Paste the code on the MiroPad editor"),ae(".terminal").focus(),Ze.info("Paste the cover picture wherever you prefer on the MirPad editor")}},{title:"Print MarkDown output",experimental:!0,icon:xr(gF,"print"),key:null,call:()=>{ae(".preview").show(),Y0.init(),window.print(),Bt.hide()}},{key:"j",title:"Prettify JSON document",icon:xr(_F,"prettify json"),call:()=>{oF(".terminal"),Bt.hide()}},{title:"Toggle command palette",icon:xr(vF,"toggle command palette"),key:["shift p","k"],call:()=>Bt.toggle(Bt.getModes().commands)},{title:"Find and Replace...",experimental:!0,icon:xr(xF,"find and replace"),key:"shift f",call:()=>{let r=ae(".terminal").getValue().slice(ae(".terminal").el.selectionStart,ae(".terminal").el.selectionEnd),e=prompt("What do you wanna find?",r);if(!e)return Ze.info("Value not found");let t=ae(".terminal").getValue().indexOf(e);ae(".terminal").el.setSelectionRange(t,t+e.length);let n=prompt(`Replace ${e} with...`);n&&ae(".terminal").el.setRangeText(n)}},{title:"Download all notes!",icon:xr(fF,"Download all notes on your local file system"),call:()=>{let r=lc({includeDeleted:!0});JU(r),Bt.hide()}},{title:"Permanently delete ALL notes \u2757",icon:xr(lh,"delete note"),call:()=>{confirm("Are you sure you want do delete ALL your notes?")&&(lc({includeDeleted:!0}).forEach(t=>{je.remove(t.id)}),T9()),Bt.hide()}}];var XWe={events:[],on(r,e){return Array.isArray(r)?(r.forEach(t=>{let n=t.key||t,i=t.call||e;this.on(n,i)}),this):(r&&typeof r=="string"&&e&&typeof e=="function"&&(this.events=[...this.events,{key:r.includes("shift")?r.replace("shift","").trim():r,shift:r.includes("shift"),fn(){e()}}]),this)},listen(){return document.addEventListener("keydown",r=>{this.handleEvent(r)}),this},handleEvent(r){this.events.map(e=>(e.key===r.key&&(r.ctrlKey===!0||r.metaKey===!0)&&r.shiftKey===e.shift&&(r.preventDefault(),e.fn()),!0))}},j7e=XWe;var G7e=(r,e)=>{let t=document.createElement("a");return t.href=e,t.appendChild(pd(r)?r:document.createTextNode(r)),t};var aU=(r,e=new Date)=>{let t=new Date(r).getFullYear(),n=new Date(e).getFullYear();return t===n},Y7e=(r,e=new Date)=>{let t=new Date(r).getMonth(),n=new Date(e).getMonth();return t===n},QWe=(r,e=new Date)=>{let t=new Date(r).getDate(),n=new Date(e).getDate();return t===n},H7e=(r,e=new Date)=>aU(r,e)&&Y7e(r,e)&&QWe(r,e),ZWe=["January","February","March","April","May","June","July","August","September","October","November","December"],JWe=ZWe.map(r=>r.slice(0,3)),W7e=(r=new Date)=>{let e=new Date(r),t=new Date().getDate()-1;return Y7e(e)&&aU(e)&&e.getDate()===t},d9=r=>{let e=new Date(r),t=W7e(r)?"":JWe[e.getMonth()],n=aU(e)?"":e.getFullYear(),i=W7e(e)?"Yesterday":e.getDate();return`${H7e(e)?"":`${i} ${t} ${n}`} ${H7e(e)?e.toLocaleTimeString():""}`};var X7e=r=>r.reduce((t,n)=>{if(t.length===0)return[n];let i=Math.max(...t);return[...t,...n>=i?[n]:[]]},[]).length===r.length;var cU=(r,e)=>{let t=r.split(" ").map(o=>o.toLowerCase()),i=e.split(" ").map(o=>o.toLowerCase()).map(o=>t.map((c,u)=>c.includes(o)?u:-1).reduce((c,u)=>u>-1?u:c,-1));return i.includes(-1)?!1:X7e(i)};var Q7e=async()=>{if(!je.get("__notification-permission__")){let r=await window.Notification.requestPermission();je.set("__notification-permission__",r)}},Z7e=async()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register(`${window.location.pathname}service-worker.js?v=2.15.16`)};var J7e=r=>Array.isArray(r)?r.map(e=>J7e(e)).join(", "):r?`\u2318+${r.toUpperCase()}`:"",eYe=(()=>{let r={off:"off",notes:"notes",revisions:"revisions",commands:"commands",gists:"gists"},e={input:"",mode:r.off,options:{selected:0,length:0}};return{getState:function(){return e},getModes:function(){return r},setState:function(t){return e={...e,...t},e},show:function(t=r.commands){switch(ae("#commander").show(),ae("#commander input").focus(),t){case r.commands:this.generateCommands(),ae("#commander input").setValue("> "),this.setState({mode:r.commands});break;case r.notes:this.generateNotes(),ae("#commander input").setValue(""),this.setState({mode:r.notes});break;case r.revisions:this.generateRevisions(),ae("#commander input").setValue(""),this.setState({mode:r.revisions});break;default:break}return this},hide:function(){return ae("#commander").hide(),e.mode=r.off,this},toggle:function(t){return Q7e(),e.mode===r.off||e.mode!==t?this.show(t):this.hide(),this},commands:function(){return sU()},selectOption:function(t,n){let i=e.options.selected,o=e.options.length-1,u=n==="down"?i===o?0:i+1:i===0?o:i-1;e.options={...e.options,selected:u}},initCommander:function(){return sU().slice(0,5).map(t=>{ae(".mobile-dock").append(R9([t.icon,document.createTextNode(t.sortTitle)],t.call,t.title.toLowerCase().replace(/\s/g,"-")))}),ae("#commander button").listen("click",()=>{this.hide()}),ae("#commander input").listen("keydown",t=>{t.keyCode===40&&(e.mode===r.revisions&&ae("#commands li.selected").click(),this.selectOption(t,"down")),t.keyCode===38&&(e.mode===r.revisions&&ae("#commands li.selected").click(),this.selectOption(t,"up"))}).listen("keyup",t=>{t.keyCode===13&&(e.mode===r.commands?ae("#commands li.selected div").click():ae("#commands li.selected a").click()),t.keyCode===27&&ae(".terminal").focus(),e.input!==t.target.value&&(e.options.selected=0),e.input=t.target.value,this.generateOptions(t.target.value)}),this},init:function(){return this.initCommander(),j7e.listen().on(this.commands()),ae(".menu").listen("click",()=>this.toggle()),ae("#revisions").listen("click",()=>this.generateRevisions()),this},generateRevisions:function(){this.show(),e.mode=r.revisions;let{revisions:t}=un(),n=e.options.selected,i=Object.keys(t).sort((o,s)=>{let{dateCreated:a}=t[o],{dateCreated:c}=t[s];return c-a}).map((o,s)=>({title:fc({content:`...${o.slice(-10)}`}),secondary:`${d9(t[o].dateCreated)}`,onclick:()=>{yt.set(void 0,{v:o}),e.options.selected=s,this.generateRevisions()}})).map((o,s)=>W0(o,s===n));return ae("#commands").html(i),e.options={...e.options,length:i.length},this},generateOptions:function(t){switch(e.mode){case r.commands:case r.notes:t.slice(0,1)===">"?(e.mode=r.commands,this.generateCommands(t.slice(1).trim()),ae("#commander input").placeholder("Search for commands...")):(e.mode=r.notes,this.generateNotes(t));return;case r.revisions:return this.generateRevisions();case r.off:break;default:break}},generateNotes:function(t=""){let n=e.options.selected,i=lc().filter(({title:o})=>cU(o,t)).filter(({id:o,deleted:s})=>!s&&o!==yt.getPageId()).sort((o,s)=>{let a=x9(o.title);return x9(s.title)-a}).map(({id:o,title:s,cid:a},c)=>{let u=x9(s),l=a?`?cid=${a}`:"",d=`${window.location.origin}${window.location.pathname}#${o}${l}`,h=G7e(fc({content:s,highlight:t}),d);return W0({title:h,secondary:d9(u),onclick:()=>{this.hide(),ae(".terminal").focus()}},c===n)});return ae("#commands").html(i),ae("#commander input").placeholder(`Search from ${i.length} saved notes...`),e.options={...e.options,length:i.length},this},generateCommands:async function(t=""){let n=e.options.selected,i=this.commands().filter(({title:o})=>cU(o,t)).filter(({experimental:o=!1})=>je.get("__experimental__")?!0:!o).map(({title:o,key:s,call:a,icon:c},u)=>W0({title:fc({content:o,highlight:t}),icon:c,secondary:J7e(s),onclick:a},u===n));return ae("#commands").html(i),e.options={...e.options,length:i.length},this}}})(),Bt=eYe;var uU=require("crypto");var epe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var tYe=128,fd,th;function rYe(r){!fd||fd.length<r?(fd=Buffer.allocUnsafe(r*tYe),uU.webcrypto.getRandomValues(fd),th=0):th+r>fd.length&&(uU.webcrypto.getRandomValues(fd),th=0),th+=r}function tpe(r=21){rYe(r-=0);let e="";for(let t=th-r;t<th;t++)e+=epe[fd[t]&63];return e}var ope=L(rpe());var npe=(r,e)=>r.split(`
`).reduce((i,o)=>{let{isFound:s}=i;if(s)return i;let a=`${i.text}${o}
`,c=a.length;return e>=c?{text:a,isFound:!1}:{text:o,isFound:!0}},{text:"",isFound:!1}).text;var ipe=r=>{let e=npe(r.target.value,r.target.selectionEnd),t={"* [":`
* [] `,"* ":`
* `," * [":`
 * [] `," * ":`
 * `};for(let[n,i]of Object.entries(t))if(e.startsWith(n)){r.preventDefault(),ae(".terminal").insertAtCaret(i);break}};var nYe=(r,e)=>r[e]===void 0||r[e].trim()==="",iYe=r=>{let e=(0,ope.default)(r,r.selectionEnd),{top:t,left:n}=e,i=ae(".terminal").el.scrollHeight,o=ae("main").el;o.style.height=`${i}px`,ae(".suggestion").el.style.top=`${t}px`,ae(".suggestion").el.style.left=`${n}px`},oYe=(r,e)=>{let t="",n=e-1;do{let i=r[n]||"";n=i.trim()===""?-1:n-1,t=i.trim()!==""?`${i}${t}`:t}while(n>=0);return t},sYe=r=>{let e=r.replace(/[\r\n\t]+/g,"").toLowerCase();return cS.getMatchingWords(e)},Er=(()=>{let r={matches:[],currentWord:null,prediction:null,options:{selected:0,length:0}},e=r;return{el:ae(".terminal"),setState:function(t){return e={...e,...t},e},resetState:function(){Er.setState(r)},selectOption:function(t,n){let i=e.options.selected,o=e.options.length-1,u=n==="down"?i===o?0:i+1:i===0?o:i-1;e.options={...e.options,selected:u},Er.setState({prediction:e.matches[e.options.selected]}),Er.renderInlineSuggestion(),Er.renderOptions()},acceptCompletion:t=>{let n=(s,a)=>{let c=s.replace(a.toLowerCase(),"");c?ae(".terminal").insertAtCaret(`${c} `):ae(".terminal").insertAtCaret("  "),ae(".suggestion").hide(),Er.resetState()},{prediction:i,currentWord:o}=e;if(t)return n(t,o);i&&(n(i,o),cS.insert(i))},renderInlineSuggestion:()=>{let{prediction:t,currentWord:n}=e,i=fc({content:`${t.slice(n.length)}`});i.setAttribute("id","inlineSuggestion"),ae(".suggestion").show().html(i)},renderOptions:()=>{let t=ae(".suggestion .options");t&&t.el&&t.el.remove();let n=e.options.selected,i=e.matches.map((s,a)=>W0({title:fc({content:s}),secondary:xr(lh,"delete word"),onSecondaryClick:()=>{je.removeFromDictionary(s),Er.setState({matches:e.matches.filter(c=>c!==s)}),Er.renderOptions()},onclick:()=>{Er.acceptCompletion(s)}},a===n)),o=document.createElement("ul");o.classList.add("options"),o.classList.add("frost"),i.forEach(s=>o.append(s)),ae(".suggestion").el.append(o)},onFocus:()=>{Bt.hide(),ae(".note-info").hide()},onInput:t=>{if(!!!je.get("__autocomplete__"))return;let i=t.target.selectionEnd,o=Er.el.getValue(),s=o[i-1];if(t.inputType==="deleteContentBackward"||s===" ")return Er.setState({prediction:r.prediction,currentWord:r.currentWord}),ae(".suggestion").hide();if(t.inputType==="insertText"&&nYe(o,i)){iYe(t.target);let c=oYe(o,i),u=sYe(c),[l]=u,d=l||"";Er.setState({prediction:d,currentWord:c,matches:u.slice(0,10),options:{selected:0,length:u.length}}),e.currentWord.length>1&&e.prediction?(Er.renderInlineSuggestion(),Er.renderOptions()):ae(".suggestion").hide()}},onArrowDown:t=>{e.matches.length>0&&(t.preventDefault(),Er.selectOption(t,"down"))},onArrowUp:t=>{e.matches.length>0&&(t.preventDefault(),Er.selectOption(t,"up"))},setValue:()=>{},onEnter:t=>{e.matches.length>0&&(t.preventDefault(),Er.acceptCompletion()),ipe(t)},onEscape:()=>{Er.resetState(),ae(".suggestion").hide()},onTab:t=>{t.preventDefault(),Er.acceptCompletion()},onKeyDown:t=>{t.keyCode===13&&Er.onEnter(t),t.keyCode===40&&Er.onArrowDown(t),t.keyCode===38&&Er.onArrowUp(t),t.keyCode===9&&Er.onTab(t),t.keyCode===32&&Er.setState({prediction:""}),t.keyCode===27&&Er.onEscape(t)},onKeyUp:t=>{let n=un(),i=vd(t.target.value);ae(".title h3").html(i);let{text:o=""}=n||{},s=n&&Er.el.getValue()===o;dc(s)},onPaste:async()=>{var n;let t=await navigator.clipboard.read();for(let i of t){let o=(n=i.types)==null?void 0:n.filter(s=>s.startsWith("image/"));for(let s of o){let a=await i.getType(s),c=je.get("MIROPAD_SECRET_TOKEN");if(c){let[u,l]=s.split("/"),d=`${tpe()}.${l}`;ae("#logo").addClass("loading");try{let{url:h}=await fetch(`${i1.file_service.api}?fileName=${d}`,{method:"POST",headers:{"x-secret-token":c,accept:"application/json","content-type":"application/octet-stream"},body:a}).then(BS).then(f=>f.json());ae(".terminal").insertAtCaret(`![image](${h})`)}catch(h){Ze.error(`Uploading file failed \u{1F4A5}! Error$ ${h.message}`)}ae("#logo").removeClass("loading")}else{let u=URL.createObjectURL(a);ae(".terminal").insertAtCaret(`![image](${u})`)}Y0.update()}}},init:function(){this.el.listen("focus",this.onFocus).listen("input",this.onInput).listen("keydown",this.onKeyDown).listen("keyup",this.onKeyUp).listen("paste",this.onPaste)}}})();var spe=()=>{let{authToken:r,gistId:e}=je.get(["authToken","gistId"]);return!!(r&&e)};var aYe=r=>Object.entries(r).reduce((e,[t,n])=>{let i=e[n]||[];return{...e,[n]:[t,...i]}},{}),ape=()=>({char:null,children:{},frequency:0,hasChildren:function(){return Object.keys(this.children).length>0},isWord:function(){return this.frequency>0},contains:function(r){return Object.keys(this.children).includes(r)},getWords:function(r,e={}){let t=this;if(t.isWord()&&(e={...e,[r]:this.frequency}),t.hasChildren())for(let n of Object.values(t.children))e=n.getWords(`${r}${n.char}`,e);return e},increaseFrequency:function(){this.frequency=this.frequency+1},insert:function(r){let[e,...t]=r;if(e){let n=t.length===0;if(this.contains(e)){let i=this.children[e];return i.char=e,n&&i.increaseFrequency(),i.insert(t)}else return this.insertNode(e,n).insert(t)}},insertNode:function(r,e=!1){let t=ape();return e&&t.increaseFrequency(),t.char=r,this.children={...this.children,[r]:t},t}}),cpe=()=>{let r=ape();return{insert:function(e=[]){return(Array.isArray(e)?e:[e]).forEach(n=>r.insert(n)),this},search:function(e=""){let t=r;return e.split("").forEach(n=>{t&&(t=t.children[n])}),t?t.getWords(e):{}},getMatchingWords:function(e=""){let t=aYe(this.search(e));return Object.keys(t).sort((n,i)=>parseInt(i,10)-parseInt(n,10)).flatMap(n=>t[n].sort())}}};var cYe=r=>{let{message:e="Unexpected error occurred!"}=r;Ze.error(e)},upe=cYe;var lpe=async r=>{ae(".anchor").show(),ae("#logo").addClass("loading");let e=await sS.retrieve(r);ae("#logo").removeClass("loading"),dc(!1),ae(".terminal").setValue(e)};var uYe=async r=>{if(r){let e=await fetch(r).then(t=>{if(t.ok)return t.text();throw new Error(`Remote note could not be retrieved! code: ${t.status}`)});ae(".terminal").setValue(e)}},lYe=async r=>{if(r)try{let e=await w9(r),{files:t}=e,n=Object.values(t),[i]=n,{content:o}=i;ae(".terminal").setValue(o)}catch(e){console.error("setNoteFromGist",e),Ze.error("MiroPad note not found! \u{1F937}\u200D\u2642\uFE0F")}},lU=async(r={})=>{try{let{oldURL:i,newURL:o}=r,s=yt.getPageId(i),a=yt.getPageId(o),c=s!==a,{v:u}=yt.getParamsObject(i),{v:l}=yt.getParamsObject(o);[c,u!==l].some(w=>w)&&S9();let{gistId:f,raw:m}=yt.getParamsObject(o);await lYe(f),await uYe(m)}catch(i){console.error("actOnURLStateChange",i),Ze.error(i.message)}let e=!yt.getPageId();ae("#note-info-button").show(!e),ae("#new-note").disable(e),yt.getSearchParam("md")==="full"?ae(".terminal").hide():ae(".terminal").show(),yt.getSearchParam("zen")==="true"?ae(".header").hide():ae(".header").show(),yt.getSearchParam("cid")?await lpe(yt.getSearchParam("cid")):ae(".anchor").hide(),ae(".note-info").hide();let t=yt.getSearchParam("q"),n=KU(t);n&&ae(".terminal").setValue(n.text)};var dYe=()=>"production"==="development",dpe=()=>{dYe()&&new EventSource("/esbuild").addEventListener("change",()=>location.reload())};var fpe=()=>{ae(".task-list-item").listenAll("click",r=>{r.firstChild.checked=!r.firstChild.checked})};var cS=cpe(),fYe=()=>{ae("#note-info-close").listen("click",()=>{ae(".note-info").hide()}),ae("#note-info-button").listen("click",()=>{let r=un();if(ae(".note-info").show(),ae(".note-info .details").innerHTML(`<p>
      <label>
      Title
      </label>
      ${r.title}
      </p>
      <p>
        <label>
        Modified
        </label>
        ${d9(r.dateCreated)}
      </p>
      <p>
        <label>
        No. of revisions
        </label>
        ${r.numberOfRevisions}
      </p>
      `),spe()&&r){let n=(()=>{let{disableSync:i}=r,o=document.createElement("P");return o.innerHTML=`
          <label>Sync</label>
            <label class="switch" title="Cloud Sync">
              <input id="sync" type="checkbox" ${!i&&"checked"}>
            <span class="slider round"></span>
          </label>
        `,o})();ae(".note-info .details").append(n),ae("#sync").listen("click",i=>{zU(!i.target.checked)})}let t=(()=>{let n=document.createElement("P");return n.innerHTML=`
          <button
            class="icon-button"
            type="button"
            id="delete-note"
          >
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" viewBox="-3 -3 27.5 27.5">
              <path  d="M15.5 2h-3.5v-0.5c0-0.827-0.673-1.5-1.5-1.5h-2c-0.827 0-1.5 0.673-1.5 1.5v0.5h-3.5c-0.827 0-1.5 0.673-1.5 1.5v1c0 0.652 0.418 1.208 1 1.414v12.586c0 0.827 0.673 1.5 1.5 1.5h10c0.827 0 1.5-0.673 1.5-1.5v-12.586c0.582-0.206 1-0.762 1-1.414v-1c0-0.827-0.673-1.5-1.5-1.5zM8 1.5c0-0.276 0.224-0.5 0.5-0.5h2c0.276 0 0.5 0.224 0.5 0.5v0.5h-3v-0.5zM14.5 19h-10c-0.276 0-0.5-0.224-0.5-0.5v-12.5h11v12.5c0 0.276-0.224 0.5-0.5 0.5zM16 4.5c0 0.276-0.224 0.5-0.5 0.5h-12c-0.276 0-0.5-0.224-0.5-0.5v-1c0-0.276 0.224-0.5 0.5-0.5h12c0.276 0 0.5 0.224 0.5 0.5v1z"></path>
              <path  d="M12.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z"></path>
              <path  d="M9.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z"></path>
              <path  d="M6.5 7c-0.276 0-0.5 0.224-0.5 0.5v10c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-10c0-0.276-0.224-0.5-0.5-0.5z"></path>
            </svg>
            Delete
          </button>
        `,n})();ae(".note-info .details").append(t),ae("#delete-note").listen("click",()=>{I9()})})},hYe=async()=>{let r=je.getDictionary();cS.insert(r),window.addEventListener("error",upe),wU(),Bt.init(),fYe(),Er.init(),E9(),S9(yt.getPageId()),ae(".logo").listen("click",()=>{Bt.toggle(Bt.getModes().notes)}),ae("#permalink").listen("click",async()=>{await hc(yt.get())}),Y0.init(),window.addEventListener("hashchange",lU),lU(),Z7e(),fpe(),await uh(),await QU(),dpe()},hpe=hYe;hpe();
/*! Bundled license information:

showdown/dist/showdown.js:
  (*! showdown v 2.1.0 - 21-04-2022 *)

timestamp-nano/timestamp.js:
  (**
   * Timestamp for 64-bit time_t, nanosecond precision and strftime
   *
   * @author Yusuke Kawasaki
   * @license MIT
   * @see https://github.com/kawanet/timestamp-nano
   *)

bytes/index.js:
  (*!
   * bytes
   * Copyright(c) 2012-2014 TJ Holowaychuk
   * Copyright(c) 2015 Jed Watson
   * MIT Licensed
   *)

sax/lib/sax.js:
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=index.js.map
