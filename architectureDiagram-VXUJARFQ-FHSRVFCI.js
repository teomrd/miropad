import{a as Qe}from"./chunk-IK46GUPQ.js";import{a as Je}from"./chunk-ZRRBPBIX.js";import"./chunk-DPYVL4NA.js";import"./chunk-4BK4DWHS.js";import"./chunk-OYA272LE.js";import"./chunk-THOPA6SY.js";import"./chunk-PNCPETUH.js";import"./chunk-Y4YRJLBO.js";import{a as Be}from"./chunk-MKC52KE3.js";import{a as me}from"./chunk-V35JAFZT.js";import{b as ke,c as qe,d as le,g as fe}from"./chunk-BGEFB44P.js";import{l as $e,p as Ze}from"./chunk-C5V5A4EQ.js";import"./chunk-W2UJOOQ7.js";import{D as be,M as Pe,P as Ge,Q as Ue,R as Ye,S as Xe,T as He,U as We,V as Ve,W as he,q as Se,y as Fe}from"./chunk-MBS5FVM4.js";import{b as ct,d as Ee,j as ze}from"./chunk-RKLTPE72.js";import"./chunk-7NP4XUWF.js";import"./chunk-XDPYRWAS.js";import"./chunk-R77GKUCO.js";import"./chunk-EQENVWAF.js";import"./chunk-FFNH7GCV.js";import{a as ye,d as dr}from"./chunk-IPLMSLEG.js";var Ne=ye((ie,Te)=>{(function(A,T){typeof ie=="object"&&typeof Te=="object"?Te.exports=T():typeof define=="function"&&define.amd?define([],T):typeof ie=="object"?ie.layoutBase=T():A.layoutBase=T()})(ie,function(){return function(C){var A={};function T(u){if(A[u])return A[u].exports;var o=A[u]={i:u,l:!1,exports:{}};return C[u].call(o.exports,o,o.exports,T),o.l=!0,o.exports}return T.m=C,T.c=A,T.i=function(u){return u},T.d=function(u,o,a){T.o(u,o)||Object.defineProperty(u,o,{configurable:!1,enumerable:!0,get:a})},T.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return T.d(o,"a",o),o},T.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)},T.p="",T(T.s=28)}([function(C,A,T){"use strict";function u(){}u.QUALITY=1,u.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,u.DEFAULT_INCREMENTAL=!1,u.DEFAULT_ANIMATION_ON_LAYOUT=!0,u.DEFAULT_ANIMATION_DURING_LAYOUT=!1,u.DEFAULT_ANIMATION_PERIOD=50,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,u.DEFAULT_GRAPH_MARGIN=15,u.NODE_DIMENSIONS_INCLUDE_LABELS=!1,u.SIMPLE_NODE_SIZE=40,u.SIMPLE_NODE_HALF_SIZE=u.SIMPLE_NODE_SIZE/2,u.EMPTY_COMPOUND_NODE_SIZE=40,u.MIN_EDGE_LENGTH=1,u.WORLD_BOUNDARY=1e6,u.INITIAL_WORLD_BOUNDARY=u.WORLD_BOUNDARY/1e3,u.WORLD_CENTER_X=1200,u.WORLD_CENTER_Y=900,C.exports=u},function(C,A,T){"use strict";var u=T(2),o=T(8),a=T(9);function r(f,t,g){u.call(this,g),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=g,this.bendpoints=[],this.source=f,this.target=t}r.prototype=Object.create(u.prototype);for(var n in u)r[n]=u[n];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(f,t){for(var g=this.getOtherEnd(f),i=t.getGraphManager().getRoot();;){if(g.getOwner()==t)return g;if(g.getOwner()==i)break;g=g.getOwner().getParent()}return null},r.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=r},function(C,A,T){"use strict";function u(o){this.vGraphObject=o}C.exports=u},function(C,A,T){"use strict";var u=T(2),o=T(10),a=T(13),r=T(0),n=T(16),f=T(5);function t(i,e,s,c){s==null&&c==null&&(c=e),u.call(this,c),i.graphManager!=null&&(i=i.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=c,this.edges=[],this.graphManager=i,s!=null&&e!=null?this.rect=new a(e.x,e.y,s.width,s.height):this.rect=new a}t.prototype=Object.create(u.prototype);for(var g in u)t[g]=u[g];t.prototype.getEdges=function(){return this.edges},t.prototype.getChild=function(){return this.child},t.prototype.getOwner=function(){return this.owner},t.prototype.getWidth=function(){return this.rect.width},t.prototype.setWidth=function(i){this.rect.width=i},t.prototype.getHeight=function(){return this.rect.height},t.prototype.setHeight=function(i){this.rect.height=i},t.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},t.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},t.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},t.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},t.prototype.getRect=function(){return this.rect},t.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},t.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},t.prototype.setRect=function(i,e){this.rect.x=i.x,this.rect.y=i.y,this.rect.width=e.width,this.rect.height=e.height},t.prototype.setCenter=function(i,e){this.rect.x=i-this.rect.width/2,this.rect.y=e-this.rect.height/2},t.prototype.setLocation=function(i,e){this.rect.x=i,this.rect.y=e},t.prototype.moveBy=function(i,e){this.rect.x+=i,this.rect.y+=e},t.prototype.getEdgeListToNode=function(i){var e=[],s,c=this;return c.edges.forEach(function(h){if(h.target==i){if(h.source!=c)throw"Incorrect edge source!";e.push(h)}}),e},t.prototype.getEdgesBetween=function(i){var e=[],s,c=this;return c.edges.forEach(function(h){if(!(h.source==c||h.target==c))throw"Incorrect edge source and/or target";(h.target==i||h.source==i)&&e.push(h)}),e},t.prototype.getNeighborsList=function(){var i=new Set,e=this;return e.edges.forEach(function(s){if(s.source==e)i.add(s.target);else{if(s.target!=e)throw"Incorrect incidency!";i.add(s.source)}}),i},t.prototype.withChildren=function(){var i=new Set,e,s;if(i.add(this),this.child!=null)for(var c=this.child.getNodes(),h=0;h<c.length;h++)e=c[h],s=e.withChildren(),s.forEach(function(N){i.add(N)});return i},t.prototype.getNoOfChildren=function(){var i=0,e;if(this.child==null)i=1;else for(var s=this.child.getNodes(),c=0;c<s.length;c++)e=s[c],i+=e.getNoOfChildren();return i==0&&(i=1),i},t.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},t.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},t.prototype.scatter=function(){var i,e,s=-r.INITIAL_WORLD_BOUNDARY,c=r.INITIAL_WORLD_BOUNDARY;i=r.WORLD_CENTER_X+n.nextDouble()*(c-s)+s;var h=-r.INITIAL_WORLD_BOUNDARY,N=r.INITIAL_WORLD_BOUNDARY;e=r.WORLD_CENTER_Y+n.nextDouble()*(N-h)+h,this.rect.x=i,this.rect.y=e},t.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var i=this.getChild();if(i.updateBounds(!0),this.rect.x=i.getLeft(),this.rect.y=i.getTop(),this.setWidth(i.getRight()-i.getLeft()),this.setHeight(i.getBottom()-i.getTop()),r.NODE_DIMENSIONS_INCLUDE_LABELS){var e=i.getRight()-i.getLeft(),s=i.getBottom()-i.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(e+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(s+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>s?(this.rect.y-=(this.labelHeight-s)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(s+this.labelHeight))}}},t.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},t.prototype.transform=function(i){var e=this.rect.x;e>r.WORLD_BOUNDARY?e=r.WORLD_BOUNDARY:e<-r.WORLD_BOUNDARY&&(e=-r.WORLD_BOUNDARY);var s=this.rect.y;s>r.WORLD_BOUNDARY?s=r.WORLD_BOUNDARY:s<-r.WORLD_BOUNDARY&&(s=-r.WORLD_BOUNDARY);var c=new f(e,s),h=i.inverseTransformPoint(c);this.setLocation(h.x,h.y)},t.prototype.getLeft=function(){return this.rect.x},t.prototype.getRight=function(){return this.rect.x+this.rect.width},t.prototype.getTop=function(){return this.rect.y},t.prototype.getBottom=function(){return this.rect.y+this.rect.height},t.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=t},function(C,A,T){"use strict";var u=T(0);function o(){}for(var a in u)o[a]=u[a];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=o},function(C,A,T){"use strict";function u(o,a){o==null&&a==null?(this.x=0,this.y=0):(this.x=o,this.y=a)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.setX=function(o){this.x=o},u.prototype.setY=function(o){this.y=o},u.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},u.prototype.getCopy=function(){return new u(this.x,this.y)},u.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},C.exports=u},function(C,A,T){"use strict";var u=T(2),o=T(10),a=T(0),r=T(7),n=T(3),f=T(1),t=T(13),g=T(12),i=T(11);function e(c,h,N){u.call(this,N),this.estimatedSize=o.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=c,h!=null&&h instanceof r?this.graphManager=h:h!=null&&h instanceof Layout&&(this.graphManager=h.graphManager)}e.prototype=Object.create(u.prototype);for(var s in u)e[s]=u[s];e.prototype.getNodes=function(){return this.nodes},e.prototype.getEdges=function(){return this.edges},e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getParent=function(){return this.parent},e.prototype.getLeft=function(){return this.left},e.prototype.getRight=function(){return this.right},e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.isConnected=function(){return this.isConnected},e.prototype.add=function(c,h,N){if(h==null&&N==null){var v=c;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}else{var y=c;if(!(this.getNodes().indexOf(h)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(h.owner==N.owner&&h.owner==this))throw"Both owners must be this graph!";return h.owner!=N.owner?null:(y.source=h,y.target=N,y.isInterGraph=!1,this.getEdges().push(y),h.edges.push(y),N!=h&&N.edges.push(y),y)}},e.prototype.remove=function(c){var h=c;if(c instanceof n){if(h==null)throw"Node is null!";if(!(h.owner!=null&&h.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=h.edges.slice(),v,y=N.length,L=0;L<y;L++)v=N[L],v.isInterGraph?this.graphManager.remove(v):v.source.owner.remove(v);var R=this.nodes.indexOf(h);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(c instanceof f){var v=c;if(v==null)throw"Edge is null!";if(!(v.source!=null&&v.target!=null))throw"Source and/or target is null!";if(!(v.source.owner!=null&&v.target.owner!=null&&v.source.owner==this&&v.target.owner==this))throw"Source and/or target owner is invalid!";var M=v.source.edges.indexOf(v),S=v.target.edges.indexOf(v);if(!(M>-1&&S>-1))throw"Source and/or target doesn't know this edge!";v.source.edges.splice(M,1),v.target!=v.source&&v.target.edges.splice(S,1);var R=v.source.owner.getEdges().indexOf(v);if(R==-1)throw"Not in owner's edge list!";v.source.owner.getEdges().splice(R,1)}},e.prototype.updateLeftTop=function(){for(var c=o.MAX_VALUE,h=o.MAX_VALUE,N,v,y,L=this.getNodes(),R=L.length,M=0;M<R;M++){var S=L[M];N=S.getTop(),v=S.getLeft(),c>N&&(c=N),h>v&&(h=v)}return c==o.MAX_VALUE?null:(L[0].getParent().paddingLeft!=null?y=L[0].getParent().paddingLeft:y=this.margin,this.left=h-y,this.top=c-y,new g(this.left,this.top))},e.prototype.updateBounds=function(c){for(var h=o.MAX_VALUE,N=-o.MAX_VALUE,v=o.MAX_VALUE,y=-o.MAX_VALUE,L,R,M,S,V,G=this.nodes,it=G.length,I=0;I<it;I++){var k=G[I];c&&k.child!=null&&k.updateBounds(),L=k.getLeft(),R=k.getRight(),M=k.getTop(),S=k.getBottom(),h>L&&(h=L),N<R&&(N=R),v>M&&(v=M),y<S&&(y=S)}var l=new t(h,v,N-h,y-v);h==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),G[0].getParent().paddingLeft!=null?V=G[0].getParent().paddingLeft:V=this.margin,this.left=l.x-V,this.right=l.x+l.width+V,this.top=l.y-V,this.bottom=l.y+l.height+V},e.calculateBounds=function(c){for(var h=o.MAX_VALUE,N=-o.MAX_VALUE,v=o.MAX_VALUE,y=-o.MAX_VALUE,L,R,M,S,V=c.length,G=0;G<V;G++){var it=c[G];L=it.getLeft(),R=it.getRight(),M=it.getTop(),S=it.getBottom(),h>L&&(h=L),N<R&&(N=R),v>M&&(v=M),y<S&&(y=S)}var I=new t(h,v,N-h,y-v);return I},e.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){for(var c=0,h=this.nodes,N=h.length,v=0;v<N;v++){var y=h[v];c+=y.calcEstimatedSize()}return c==0?this.estimatedSize=a.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=c/Math.sqrt(this.nodes.length),this.estimatedSize},e.prototype.updateConnected=function(){var c=this;if(this.nodes.length==0){this.isConnected=!0;return}var h=new i,N=new Set,v=this.nodes[0],y,L,R=v.withChildren();for(R.forEach(function(I){h.push(I),N.add(I)});h.length!==0;){v=h.shift(),y=v.getEdges();for(var M=y.length,S=0;S<M;S++){var V=y[S];if(L=V.getOtherEndInGraph(v,this),L!=null&&!N.has(L)){var G=L.withChildren();G.forEach(function(I){h.push(I),N.add(I)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var it=0;N.forEach(function(I){I.owner==c&&it++}),it==this.nodes.length&&(this.isConnected=!0)}},C.exports=e},function(C,A,T){"use strict";var u,o=T(1);function a(r){u=T(6),this.layout=r,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var r=this.layout.newGraph(),n=this.layout.newNode(null),f=this.add(r,n);return this.setRootGraph(f),this.rootGraph},a.prototype.add=function(r,n,f,t,g){if(f==null&&t==null&&g==null){if(r==null)throw"Graph is null!";if(n==null)throw"Parent node is null!";if(this.graphs.indexOf(r)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(r),r.parent!=null)throw"Already has a parent!";if(n.child!=null)throw"Already has a child!";return r.parent=n,n.child=r,r}else{g=f,t=n,f=r;var i=t.getOwner(),e=g.getOwner();if(!(i!=null&&i.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(e!=null&&e.getGraphManager()==this))throw"Target not in this graph mgr!";if(i==e)return f.isInterGraph=!1,i.add(f,t,g);if(f.isInterGraph=!0,f.source=t,f.target=g,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},a.prototype.remove=function(r){if(r instanceof u){var n=r;if(n.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(n==this.rootGraph||n.parent!=null&&n.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(n.getEdges());for(var t,g=f.length,i=0;i<g;i++)t=f[i],n.remove(t);var e=[];e=e.concat(n.getNodes());var s;g=e.length;for(var i=0;i<g;i++)s=e[i],n.remove(s);n==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(n);this.graphs.splice(c,1),n.parent=null}else if(r instanceof o){if(t=r,t==null)throw"Edge is null!";if(!t.isInterGraph)throw"Not an inter-graph edge!";if(!(t.source!=null&&t.target!=null))throw"Source and/or target is null!";if(!(t.source.edges.indexOf(t)!=-1&&t.target.edges.indexOf(t)!=-1))throw"Source and/or target doesn't know this edge!";var c=t.source.edges.indexOf(t);if(t.source.edges.splice(c,1),c=t.target.edges.indexOf(t),t.target.edges.splice(c,1),!(t.source.owner!=null&&t.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(t.source.owner.getGraphManager().edges.indexOf(t)==-1)throw"Not in owner graph manager's edge list!";var c=t.source.owner.getGraphManager().edges.indexOf(t);t.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(this.allNodes==null){for(var r=[],n=this.getGraphs(),f=n.length,t=0;t<f;t++)r=r.concat(n[t].getNodes());this.allNodes=r}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(this.allEdges==null){for(var r=[],n=this.getGraphs(),f=n.length,t=0;t<n.length;t++)r=r.concat(n[t].getEdges());r=r.concat(this.edges),this.allEdges=r}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(r){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=r},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(r){if(r.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=r,r.parent==null&&(r.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(r,n){if(!(r!=null&&n!=null))throw"assert failed";if(r==n)return!0;var f=r.getOwner(),t;do{if(t=f.getParent(),t==null)break;if(t==n)return!0;if(f=t.getOwner(),f==null)break}while(!0);f=n.getOwner();do{if(t=f.getParent(),t==null)break;if(t==r)return!0;if(f=t.getOwner(),f==null)break}while(!0);return!1},a.prototype.calcLowestCommonAncestors=function(){for(var r,n,f,t,g,i=this.getAllEdges(),e=i.length,s=0;s<e;s++){if(r=i[s],n=r.source,f=r.target,r.lca=null,r.sourceInLca=n,r.targetInLca=f,n==f){r.lca=n.getOwner();continue}for(t=n.getOwner();r.lca==null;){for(r.targetInLca=f,g=f.getOwner();r.lca==null;){if(g==t){r.lca=g;break}if(g==this.rootGraph)break;if(r.lca!=null)throw"assert failed";r.targetInLca=g.getParent(),g=r.targetInLca.getOwner()}if(t==this.rootGraph)break;r.lca==null&&(r.sourceInLca=t.getParent(),t=r.sourceInLca.getOwner())}if(r.lca==null)throw"assert failed"}},a.prototype.calcLowestCommonAncestor=function(r,n){if(r==n)return r.getOwner();var f=r.getOwner();do{if(f==null)break;var t=n.getOwner();do{if(t==null)break;if(t==f)return t;t=t.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},a.prototype.calcInclusionTreeDepths=function(r,n){r==null&&n==null&&(r=this.rootGraph,n=1);for(var f,t=r.getNodes(),g=t.length,i=0;i<g;i++)f=t[i],f.inclusionTreeDepth=n,f.child!=null&&this.calcInclusionTreeDepths(f.child,n+1)},a.prototype.includesInvalidEdge=function(){for(var r,n=[],f=this.edges.length,t=0;t<f;t++)r=this.edges[t],this.isOneAncestorOfOther(r.source,r.target)&&n.push(r);for(var t=0;t<n.length;t++)this.remove(n[t]);return!1},C.exports=a},function(C,A,T){"use strict";var u=T(12);function o(){}o.calcSeparationAmount=function(a,r,n,f){if(!a.intersects(r))throw"assert failed";var t=new Array(2);this.decideDirectionsForOverlappingNodes(a,r,t),n[0]=Math.min(a.getRight(),r.getRight())-Math.max(a.x,r.x),n[1]=Math.min(a.getBottom(),r.getBottom())-Math.max(a.y,r.y),a.getX()<=r.getX()&&a.getRight()>=r.getRight()?n[0]+=Math.min(r.getX()-a.getX(),a.getRight()-r.getRight()):r.getX()<=a.getX()&&r.getRight()>=a.getRight()&&(n[0]+=Math.min(a.getX()-r.getX(),r.getRight()-a.getRight())),a.getY()<=r.getY()&&a.getBottom()>=r.getBottom()?n[1]+=Math.min(r.getY()-a.getY(),a.getBottom()-r.getBottom()):r.getY()<=a.getY()&&r.getBottom()>=a.getBottom()&&(n[1]+=Math.min(a.getY()-r.getY(),r.getBottom()-a.getBottom()));var g=Math.abs((r.getCenterY()-a.getCenterY())/(r.getCenterX()-a.getCenterX()));r.getCenterY()===a.getCenterY()&&r.getCenterX()===a.getCenterX()&&(g=1);var i=g*n[0],e=n[1]/g;n[0]<e?e=n[0]:i=n[1],n[0]=-1*t[0]*(e/2+f),n[1]=-1*t[1]*(i/2+f)},o.decideDirectionsForOverlappingNodes=function(a,r,n){a.getCenterX()<r.getCenterX()?n[0]=-1:n[0]=1,a.getCenterY()<r.getCenterY()?n[1]=-1:n[1]=1},o.getIntersection2=function(a,r,n){var f=a.getCenterX(),t=a.getCenterY(),g=r.getCenterX(),i=r.getCenterY();if(a.intersects(r))return n[0]=f,n[1]=t,n[2]=g,n[3]=i,!0;var e=a.getX(),s=a.getY(),c=a.getRight(),h=a.getX(),N=a.getBottom(),v=a.getRight(),y=a.getWidthHalf(),L=a.getHeightHalf(),R=r.getX(),M=r.getY(),S=r.getRight(),V=r.getX(),G=r.getBottom(),it=r.getRight(),I=r.getWidthHalf(),k=r.getHeightHalf(),l=!1,E=!1;if(f===g){if(t>i)return n[0]=f,n[1]=s,n[2]=g,n[3]=G,!1;if(t<i)return n[0]=f,n[1]=N,n[2]=g,n[3]=M,!1}else if(t===i){if(f>g)return n[0]=e,n[1]=t,n[2]=S,n[3]=i,!1;if(f<g)return n[0]=c,n[1]=t,n[2]=R,n[3]=i,!1}else{var d=a.height/a.width,m=r.height/r.width,p=(i-t)/(g-f),D=void 0,O=void 0,F=void 0,b=void 0,x=void 0,Z=void 0;if(-d===p?f>g?(n[0]=h,n[1]=N,l=!0):(n[0]=c,n[1]=s,l=!0):d===p&&(f>g?(n[0]=e,n[1]=s,l=!0):(n[0]=v,n[1]=N,l=!0)),-m===p?g>f?(n[2]=V,n[3]=G,E=!0):(n[2]=S,n[3]=M,E=!0):m===p&&(g>f?(n[2]=R,n[3]=M,E=!0):(n[2]=it,n[3]=G,E=!0)),l&&E)return!1;if(f>g?t>i?(D=this.getCardinalDirection(d,p,4),O=this.getCardinalDirection(m,p,2)):(D=this.getCardinalDirection(-d,p,3),O=this.getCardinalDirection(-m,p,1)):t>i?(D=this.getCardinalDirection(-d,p,1),O=this.getCardinalDirection(-m,p,3)):(D=this.getCardinalDirection(d,p,2),O=this.getCardinalDirection(m,p,4)),!l)switch(D){case 1:b=s,F=f+-L/p,n[0]=F,n[1]=b;break;case 2:F=v,b=t+y*p,n[0]=F,n[1]=b;break;case 3:b=N,F=f+L/p,n[0]=F,n[1]=b;break;case 4:F=h,b=t+-y*p,n[0]=F,n[1]=b;break}if(!E)switch(O){case 1:Z=M,x=g+-k/p,n[2]=x,n[3]=Z;break;case 2:x=it,Z=i+I*p,n[2]=x,n[3]=Z;break;case 3:Z=G,x=g+k/p,n[2]=x,n[3]=Z;break;case 4:x=V,Z=i+-I*p,n[2]=x,n[3]=Z;break}}return!1},o.getCardinalDirection=function(a,r,n){return a>r?n:1+n%4},o.getIntersection=function(a,r,n,f){if(f==null)return this.getIntersection2(a,r,n);var t=a.x,g=a.y,i=r.x,e=r.y,s=n.x,c=n.y,h=f.x,N=f.y,v=void 0,y=void 0,L=void 0,R=void 0,M=void 0,S=void 0,V=void 0,G=void 0,it=void 0;return L=e-g,M=t-i,V=i*g-t*e,R=N-c,S=s-h,G=h*c-s*N,it=L*S-R*M,it===0?null:(v=(M*G-S*V)/it,y=(R*V-L*G)/it,new u(v,y))},o.angleOfVector=function(a,r,n,f){var t=void 0;return a!==n?(t=Math.atan((f-r)/(n-a)),n<a?t+=Math.PI:f<r&&(t+=this.TWO_PI)):f<r?t=this.ONE_AND_HALF_PI:t=this.HALF_PI,t},o.doIntersect=function(a,r,n,f){var t=a.x,g=a.y,i=r.x,e=r.y,s=n.x,c=n.y,h=f.x,N=f.y,v=(i-t)*(N-c)-(h-s)*(e-g);if(v===0)return!1;var y=((N-c)*(h-t)+(s-h)*(N-g))/v,L=((g-e)*(h-t)+(i-t)*(N-g))/v;return 0<y&&y<1&&0<L&&L<1},o.findCircleLineIntersections=function(a,r,n,f,t,g,i){var e=(n-a)*(n-a)+(f-r)*(f-r),s=2*((a-t)*(n-a)+(r-g)*(f-r)),c=(a-t)*(a-t)+(r-g)*(r-g)-i*i,h=s*s-4*e*c;if(h>=0){var N=(-s+Math.sqrt(s*s-4*e*c))/(2*e),v=(-s-Math.sqrt(s*s-4*e*c))/(2*e),y=null;return N>=0&&N<=1?[N]:v>=0&&v<=1?[v]:y}else return null},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,C.exports=o},function(C,A,T){"use strict";function u(){}u.sign=function(o){return o>0?1:o<0?-1:0},u.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},u.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},C.exports=u},function(C,A,T){"use strict";function u(){}u.MAX_VALUE=2147483647,u.MIN_VALUE=-2147483648,C.exports=u},function(C,A,T){"use strict";var u=function(){function t(g,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(g,s.key,s)}}return function(g,i,e){return i&&t(g.prototype,i),e&&t(g,e),g}}();function o(t,g){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}var a=function(g){return{value:g,next:null,prev:null}},r=function(g,i,e,s){return g!==null?g.next=i:s.head=i,e!==null?e.prev=i:s.tail=i,i.prev=g,i.next=e,s.length++,i},n=function(g,i){var e=g.prev,s=g.next;return e!==null?e.next=s:i.head=s,s!==null?s.prev=e:i.tail=e,g.prev=g.next=null,i.length--,g},f=function(){function t(g){var i=this;o(this,t),this.length=0,this.head=null,this.tail=null,g!=null&&g.forEach(function(e){return i.push(e)})}return u(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(i,e){return r(e.prev,a(i),e,this)}},{key:"insertAfter",value:function(i,e){return r(e,a(i),e.next,this)}},{key:"insertNodeBefore",value:function(i,e){return r(e.prev,i,e,this)}},{key:"insertNodeAfter",value:function(i,e){return r(e,i,e.next,this)}},{key:"push",value:function(i){return r(this.tail,a(i),null,this)}},{key:"unshift",value:function(i){return r(null,a(i),this.head,this)}},{key:"remove",value:function(i){return n(i,this)}},{key:"pop",value:function(){return n(this.tail,this).value}},{key:"popNode",value:function(){return n(this.tail,this)}},{key:"shift",value:function(){return n(this.head,this).value}},{key:"shiftNode",value:function(){return n(this.head,this)}},{key:"get_object_at",value:function(i){if(i<=this.length()){for(var e=1,s=this.head;e<i;)s=s.next,e++;return s.value}}},{key:"set_object_at",value:function(i,e){if(i<=this.length()){for(var s=1,c=this.head;s<i;)c=c.next,s++;c.value=e}}}]),t}();C.exports=f},function(C,A,T){"use strict";function u(o,a,r){this.x=null,this.y=null,o==null&&a==null&&r==null?(this.x=0,this.y=0):typeof o=="number"&&typeof a=="number"&&r==null?(this.x=o,this.y=a):o.constructor.name=="Point"&&a==null&&r==null&&(r=o,this.x=r.x,this.y=r.y)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.getLocation=function(){return new u(this.x,this.y)},u.prototype.setLocation=function(o,a,r){o.constructor.name=="Point"&&a==null&&r==null?(r=o,this.setLocation(r.x,r.y)):typeof o=="number"&&typeof a=="number"&&r==null&&(parseInt(o)==o&&parseInt(a)==a?this.move(o,a):(this.x=Math.floor(o+.5),this.y=Math.floor(a+.5)))},u.prototype.move=function(o,a){this.x=o,this.y=a},u.prototype.translate=function(o,a){this.x+=o,this.y+=a},u.prototype.equals=function(o){if(o.constructor.name=="Point"){var a=o;return this.x==a.x&&this.y==a.y}return this==o},u.prototype.toString=function(){return new u().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=u},function(C,A,T){"use strict";function u(o,a,r,n){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&a!=null&&r!=null&&n!=null&&(this.x=o,this.y=a,this.width=r,this.height=n)}u.prototype.getX=function(){return this.x},u.prototype.setX=function(o){this.x=o},u.prototype.getY=function(){return this.y},u.prototype.setY=function(o){this.y=o},u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(o){this.width=o},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(o){this.height=o},u.prototype.getRight=function(){return this.x+this.width},u.prototype.getBottom=function(){return this.y+this.height},u.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},u.prototype.getCenterX=function(){return this.x+this.width/2},u.prototype.getMinX=function(){return this.getX()},u.prototype.getMaxX=function(){return this.getX()+this.width},u.prototype.getCenterY=function(){return this.y+this.height/2},u.prototype.getMinY=function(){return this.getY()},u.prototype.getMaxY=function(){return this.getY()+this.height},u.prototype.getWidthHalf=function(){return this.width/2},u.prototype.getHeightHalf=function(){return this.height/2},C.exports=u},function(C,A,T){"use strict";var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function o(){}o.lastID=0,o.createID=function(a){return o.isPrimitive(a)?a:(a.uniqueID!=null||(a.uniqueID=o.getString(),o.lastID++),a.uniqueID)},o.getString=function(a){return a==null&&(a=o.lastID),"Object#"+a},o.isPrimitive=function(a){var r=typeof a>"u"?"undefined":u(a);return a==null||r!="object"&&r!="function"},C.exports=o},function(C,A,T){"use strict";function u(s){if(Array.isArray(s)){for(var c=0,h=Array(s.length);c<s.length;c++)h[c]=s[c];return h}else return Array.from(s)}var o=T(0),a=T(7),r=T(3),n=T(1),f=T(6),t=T(5),g=T(17),i=T(29);function e(s){i.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,s!=null&&(this.isRemoteUse=s)}e.RANDOM_SEED=1,e.prototype=Object.create(i.prototype),e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},e.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},e.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},e.prototype.newGraphManager=function(){var s=new a(this);return this.graphManager=s,s},e.prototype.newGraph=function(s){return new f(null,this.graphManager,s)},e.prototype.newNode=function(s){return new r(this.graphManager,s)},e.prototype.newEdge=function(s){return new n(null,null,s)},e.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},e.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var s;return this.checkLayoutSuccess()?s=!1:s=this.layout(),o.ANIMATE==="during"?!1:(s&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,s)},e.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},e.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var s,c=this.graphManager.getAllEdges(),h=0;h<c.length;h++)s=c[h];for(var N,v=this.graphManager.getRoot().getNodes(),h=0;h<v.length;h++)N=v[h];this.update(this.graphManager.getRoot())}},e.prototype.update=function(s){if(s==null)this.update2();else if(s instanceof r){var c=s;if(c.getChild()!=null)for(var h=c.getChild().getNodes(),N=0;N<h.length;N++)update(h[N]);if(c.vGraphObject!=null){var v=c.vGraphObject;v.update(c)}}else if(s instanceof n){var y=s;if(y.vGraphObject!=null){var L=y.vGraphObject;L.update(y)}}else if(s instanceof f){var R=s;if(R.vGraphObject!=null){var M=R.vGraphObject;M.update(R)}}},e.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},e.prototype.transform=function(s){if(s==null)this.transform(new t(0,0));else{var c=new g,h=this.graphManager.getRoot().updateLeftTop();if(h!=null){c.setWorldOrgX(s.x),c.setWorldOrgY(s.y),c.setDeviceOrgX(h.x),c.setDeviceOrgY(h.y);for(var N=this.getAllNodes(),v,y=0;y<N.length;y++)v=N[y],v.transform(c)}}},e.prototype.positionNodesRandomly=function(s){if(s==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var c,h,N=s.getNodes(),v=0;v<N.length;v++)c=N[v],h=c.getChild(),h==null||h.getNodes().length==0?c.scatter():(this.positionNodesRandomly(h),c.updateBounds())},e.prototype.getFlatForest=function(){for(var s=[],c=!0,h=this.graphManager.getRoot().getNodes(),N=!0,v=0;v<h.length;v++)h[v].getChild()!=null&&(N=!1);if(!N)return s;var y=new Set,L=[],R=new Map,M=[];for(M=M.concat(h);M.length>0&&c;){for(L.push(M[0]);L.length>0&&c;){var S=L[0];L.splice(0,1),y.add(S);for(var V=S.getEdges(),v=0;v<V.length;v++){var G=V[v].getOtherEnd(S);if(R.get(S)!=G)if(!y.has(G))L.push(G),R.set(G,S);else{c=!1;break}}}if(!c)s=[];else{var it=[].concat(u(y));s.push(it);for(var v=0;v<it.length;v++){var I=it[v],k=M.indexOf(I);k>-1&&M.splice(k,1)}y=new Set,R=new Map}}return s},e.prototype.createDummyNodesForBendpoints=function(s){for(var c=[],h=s.source,N=this.graphManager.calcLowestCommonAncestor(s.source,s.target),v=0;v<s.bendpoints.length;v++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),N.add(y);var L=this.newEdge(null);this.graphManager.add(L,h,y),c.add(y),h=y}var L=this.newEdge(null);return this.graphManager.add(L,h,s.target),this.edgeToDummyNodes.set(s,c),s.isInterGraph()?this.graphManager.remove(s):N.remove(s),c},e.prototype.createBendpointsFromDummyNodes=function(){var s=[];s=s.concat(this.graphManager.getAllEdges()),s=[].concat(u(this.edgeToDummyNodes.keys())).concat(s);for(var c=0;c<s.length;c++){var h=s[c];if(h.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(h),v=0;v<N.length;v++){var y=N[v],L=new t(y.getCenterX(),y.getCenterY()),R=h.bendpoints.get(v);R.x=L.x,R.y=L.y,y.getOwner().remove(y)}this.graphManager.add(h,h.source,h.target)}}},e.transform=function(s,c,h,N){if(h!=null&&N!=null){var v=c;if(s<=50){var y=c/h;v-=(c-y)/50*(50-s)}else{var L=c*N;v+=(L-c)/50*(s-50)}return v}else{var R,M;return s<=50?(R=9*c/500,M=c/10):(R=9*c/50,M=-8*c),R*s+M}},e.findCenterOfTree=function(s){var c=[];c=c.concat(s);var h=[],N=new Map,v=!1,y=null;(c.length==1||c.length==2)&&(v=!0,y=c[0]);for(var L=0;L<c.length;L++){var R=c[L],M=R.getNeighborsList().size;N.set(R,R.getNeighborsList().size),M==1&&h.push(R)}var S=[];for(S=S.concat(h);!v;){var V=[];V=V.concat(S),S=[];for(var L=0;L<c.length;L++){var R=c[L],G=c.indexOf(R);G>=0&&c.splice(G,1);var it=R.getNeighborsList();it.forEach(function(l){if(h.indexOf(l)<0){var E=N.get(l),d=E-1;d==1&&S.push(l),N.set(l,d)}})}h=h.concat(S),(c.length==1||c.length==2)&&(v=!0,y=c[0])}return y},e.prototype.setGraphManager=function(s){this.graphManager=s},C.exports=e},function(C,A,T){"use strict";function u(){}u.seed=1,u.x=0,u.nextDouble=function(){return u.x=Math.sin(u.seed++)*1e4,u.x-Math.floor(u.x)},C.exports=u},function(C,A,T){"use strict";var u=T(5);function o(a,r){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(a){this.lworldOrgX=a},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(a){this.lworldOrgY=a},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(a){this.lworldExtX=a},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(a){this.lworldExtY=a},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(a){this.ldeviceOrgX=a},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(a){this.ldeviceOrgY=a},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(a){this.ldeviceExtX=a},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(a){this.ldeviceExtY=a},o.prototype.transformX=function(a){var r=0,n=this.lworldExtX;return n!=0&&(r=this.ldeviceOrgX+(a-this.lworldOrgX)*this.ldeviceExtX/n),r},o.prototype.transformY=function(a){var r=0,n=this.lworldExtY;return n!=0&&(r=this.ldeviceOrgY+(a-this.lworldOrgY)*this.ldeviceExtY/n),r},o.prototype.inverseTransformX=function(a){var r=0,n=this.ldeviceExtX;return n!=0&&(r=this.lworldOrgX+(a-this.ldeviceOrgX)*this.lworldExtX/n),r},o.prototype.inverseTransformY=function(a){var r=0,n=this.ldeviceExtY;return n!=0&&(r=this.lworldOrgY+(a-this.ldeviceOrgY)*this.lworldExtY/n),r},o.prototype.inverseTransformPoint=function(a){var r=new u(this.inverseTransformX(a.x),this.inverseTransformY(a.y));return r},C.exports=o},function(C,A,T){"use strict";function u(i){if(Array.isArray(i)){for(var e=0,s=Array(i.length);e<i.length;e++)s[e]=i[e];return s}else return Array.from(i)}var o=T(15),a=T(4),r=T(0),n=T(8),f=T(9);function t(){o.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}t.prototype=Object.create(o.prototype);for(var g in o)t[g]=o[g];t.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},t.prototype.calcIdealEdgeLengths=function(){for(var i,e,s,c,h,N,v,y=this.getGraphManager().getAllEdges(),L=0;L<y.length;L++)i=y[L],e=i.idealLength,i.isInterGraph&&(c=i.getSource(),h=i.getTarget(),N=i.getSourceInLca().getEstimatedSize(),v=i.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(i.idealLength+=N+v-2*r.SIMPLE_NODE_SIZE),s=i.getLca().getInclusionTreeDepth(),i.idealLength+=e*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+h.getInclusionTreeDepth()-2*s))},t.prototype.initSpringEmbedder=function(){var i=this.getAllNodes().length;this.incremental?(i>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(i-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(i>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(i-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},t.prototype.calcSpringForces=function(){for(var i=this.getAllEdges(),e,s=0;s<i.length;s++)e=i[s],this.calcSpringForce(e,e.idealLength)},t.prototype.calcRepulsionForces=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s,c,h,N,v=this.getAllNodes(),y;if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&i&&this.updateGrid(),y=new Set,s=0;s<v.length;s++)h=v[s],this.calculateRepulsionForceOfANode(h,y,i,e),y.add(h);else for(s=0;s<v.length;s++)for(h=v[s],c=s+1;c<v.length;c++)N=v[c],h.getOwner()==N.getOwner()&&this.calcRepulsionForce(h,N)},t.prototype.calcGravitationalForces=function(){for(var i,e=this.getAllNodesToApplyGravitation(),s=0;s<e.length;s++)i=e[s],this.calcGravitationalForce(i)},t.prototype.moveNodes=function(){for(var i=this.getAllNodes(),e,s=0;s<i.length;s++)e=i[s],e.move()},t.prototype.calcSpringForce=function(i,e){var s=i.getSource(),c=i.getTarget(),h,N,v,y;if(this.uniformLeafNodeSizes&&s.getChild()==null&&c.getChild()==null)i.updateLengthSimple();else if(i.updateLength(),i.isOverlapingSourceAndTarget)return;h=i.getLength(),h!=0&&(N=i.edgeElasticity*(h-e),v=N*(i.lengthX/h),y=N*(i.lengthY/h),s.springForceX+=v,s.springForceY+=y,c.springForceX-=v,c.springForceY-=y)},t.prototype.calcRepulsionForce=function(i,e){var s=i.getRect(),c=e.getRect(),h=new Array(2),N=new Array(4),v,y,L,R,M,S,V;if(s.intersects(c)){n.calcSeparationAmount(s,c,h,a.DEFAULT_EDGE_LENGTH/2),S=2*h[0],V=2*h[1];var G=i.noOfChildren*e.noOfChildren/(i.noOfChildren+e.noOfChildren);i.repulsionForceX-=G*S,i.repulsionForceY-=G*V,e.repulsionForceX+=G*S,e.repulsionForceY+=G*V}else this.uniformLeafNodeSizes&&i.getChild()==null&&e.getChild()==null?(v=c.getCenterX()-s.getCenterX(),y=c.getCenterY()-s.getCenterY()):(n.getIntersection(s,c,N),v=N[2]-N[0],y=N[3]-N[1]),Math.abs(v)<a.MIN_REPULSION_DIST&&(v=f.sign(v)*a.MIN_REPULSION_DIST),Math.abs(y)<a.MIN_REPULSION_DIST&&(y=f.sign(y)*a.MIN_REPULSION_DIST),L=v*v+y*y,R=Math.sqrt(L),M=(i.nodeRepulsion/2+e.nodeRepulsion/2)*i.noOfChildren*e.noOfChildren/L,S=M*v/R,V=M*y/R,i.repulsionForceX-=S,i.repulsionForceY-=V,e.repulsionForceX+=S,e.repulsionForceY+=V},t.prototype.calcGravitationalForce=function(i){var e,s,c,h,N,v,y,L;e=i.getOwner(),s=(e.getRight()+e.getLeft())/2,c=(e.getTop()+e.getBottom())/2,h=i.getCenterX()-s,N=i.getCenterY()-c,v=Math.abs(h)+i.getWidth()/2,y=Math.abs(N)+i.getHeight()/2,i.getOwner()==this.graphManager.getRoot()?(L=e.getEstimatedSize()*this.gravityRangeFactor,(v>L||y>L)&&(i.gravitationForceX=-this.gravityConstant*h,i.gravitationForceY=-this.gravityConstant*N)):(L=e.getEstimatedSize()*this.compoundGravityRangeFactor,(v>L||y>L)&&(i.gravitationForceX=-this.gravityConstant*h*this.compoundGravityConstant,i.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},t.prototype.isConverged=function(){var i,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),i=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,i||e},t.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},t.prototype.calcNoOfChildrenForAllNodes=function(){for(var i,e=this.graphManager.getAllNodes(),s=0;s<e.length;s++)i=e[s],i.noOfChildren=i.getNoOfChildren()},t.prototype.calcGrid=function(i){var e=0,s=0;e=parseInt(Math.ceil((i.getRight()-i.getLeft())/this.repulsionRange)),s=parseInt(Math.ceil((i.getBottom()-i.getTop())/this.repulsionRange));for(var c=new Array(e),h=0;h<e;h++)c[h]=new Array(s);for(var h=0;h<e;h++)for(var N=0;N<s;N++)c[h][N]=new Array;return c},t.prototype.addNodeToGrid=function(i,e,s){var c=0,h=0,N=0,v=0;c=parseInt(Math.floor((i.getRect().x-e)/this.repulsionRange)),h=parseInt(Math.floor((i.getRect().width+i.getRect().x-e)/this.repulsionRange)),N=parseInt(Math.floor((i.getRect().y-s)/this.repulsionRange)),v=parseInt(Math.floor((i.getRect().height+i.getRect().y-s)/this.repulsionRange));for(var y=c;y<=h;y++)for(var L=N;L<=v;L++)this.grid[y][L].push(i),i.setGridCoordinates(c,h,N,v)},t.prototype.updateGrid=function(){var i,e,s=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),i=0;i<s.length;i++)e=s[i],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},t.prototype.calculateRepulsionForceOfANode=function(i,e,s,c){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&s||c){var h=new Set;i.surrounding=new Array;for(var N,v=this.grid,y=i.startX-1;y<i.finishX+2;y++)for(var L=i.startY-1;L<i.finishY+2;L++)if(!(y<0||L<0||y>=v.length||L>=v[0].length)){for(var R=0;R<v[y][L].length;R++)if(N=v[y][L][R],!(i.getOwner()!=N.getOwner()||i==N)&&!e.has(N)&&!h.has(N)){var M=Math.abs(i.getCenterX()-N.getCenterX())-(i.getWidth()/2+N.getWidth()/2),S=Math.abs(i.getCenterY()-N.getCenterY())-(i.getHeight()/2+N.getHeight()/2);M<=this.repulsionRange&&S<=this.repulsionRange&&h.add(N)}}i.surrounding=[].concat(u(h))}for(y=0;y<i.surrounding.length;y++)this.calcRepulsionForce(i,i.surrounding[y])},t.prototype.calcRepulsionRange=function(){return 0},C.exports=t},function(C,A,T){"use strict";var u=T(1),o=T(4);function a(n,f,t){u.call(this,n,f,t),this.idealLength=o.DEFAULT_EDGE_LENGTH,this.edgeElasticity=o.DEFAULT_SPRING_STRENGTH}a.prototype=Object.create(u.prototype);for(var r in u)a[r]=u[r];C.exports=a},function(C,A,T){"use strict";var u=T(3),o=T(4);function a(n,f,t,g){u.call(this,n,f,t,g),this.nodeRepulsion=o.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(u.prototype);for(var r in u)a[r]=u[r];a.prototype.setGridCoordinates=function(n,f,t,g){this.startX=n,this.finishX=f,this.startY=t,this.finishY=g},C.exports=a},function(C,A,T){"use strict";function u(o,a){this.width=0,this.height=0,o!==null&&a!==null&&(this.height=a,this.width=o)}u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(o){this.width=o},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(o){this.height=o},C.exports=u},function(C,A,T){"use strict";var u=T(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(a,r){var n=u.createID(a);this.contains(n)||(this.map[n]=r,this.keys.push(a))},o.prototype.contains=function(a){var r=u.createID(a);return this.map[a]!=null},o.prototype.get=function(a){var r=u.createID(a);return this.map[r]},o.prototype.keySet=function(){return this.keys},C.exports=o},function(C,A,T){"use strict";var u=T(14);function o(){this.set={}}o.prototype.add=function(a){var r=u.createID(a);this.contains(r)||(this.set[r]=a)},o.prototype.remove=function(a){delete this.set[u.createID(a)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(a){return this.set[u.createID(a)]==a},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(a){for(var r=Object.keys(this.set),n=r.length,f=0;f<n;f++)a.push(this.set[r[f]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(a){for(var r=a.length,n=0;n<r;n++){var f=a[n];this.add(f)}},C.exports=o},function(C,A,T){"use strict";function u(){}u.multMat=function(o,a){for(var r=[],n=0;n<o.length;n++){r[n]=[];for(var f=0;f<a[0].length;f++){r[n][f]=0;for(var t=0;t<o[0].length;t++)r[n][f]+=o[n][t]*a[t][f]}}return r},u.transpose=function(o){for(var a=[],r=0;r<o[0].length;r++){a[r]=[];for(var n=0;n<o.length;n++)a[r][n]=o[n][r]}return a},u.multCons=function(o,a){for(var r=[],n=0;n<o.length;n++)r[n]=o[n]*a;return r},u.minusOp=function(o,a){for(var r=[],n=0;n<o.length;n++)r[n]=o[n]-a[n];return r},u.dotProduct=function(o,a){for(var r=0,n=0;n<o.length;n++)r+=o[n]*a[n];return r},u.mag=function(o){return Math.sqrt(this.dotProduct(o,o))},u.normalize=function(o){for(var a=[],r=this.mag(o),n=0;n<o.length;n++)a[n]=o[n]/r;return a},u.multGamma=function(o){for(var a=[],r=0,n=0;n<o.length;n++)r+=o[n];r*=-1/o.length;for(var f=0;f<o.length;f++)a[f]=r+o[f];return a},u.multL=function(o,a,r){for(var n=[],f=[],t=[],g=0;g<a[0].length;g++){for(var i=0,e=0;e<a.length;e++)i+=-.5*a[e][g]*o[e];f[g]=i}for(var s=0;s<r.length;s++){for(var c=0,h=0;h<r.length;h++)c+=r[s][h]*f[h];t[s]=c}for(var N=0;N<a.length;N++){for(var v=0,y=0;y<a[0].length;y++)v+=a[N][y]*t[y];n[N]=v}return n},C.exports=u},function(C,A,T){"use strict";var u=function(){function n(f,t){for(var g=0;g<t.length;g++){var i=t[g];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(f,i.key,i)}}return function(f,t,g){return t&&n(f.prototype,t),g&&n(f,g),f}}();function o(n,f){if(!(n instanceof f))throw new TypeError("Cannot call a class as a function")}var a=T(11),r=function(){function n(f,t){o(this,n),(t!==null||t!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var g=void 0;f instanceof a?g=f.size():g=f.length,this._quicksort(f,0,g-1)}return u(n,[{key:"_quicksort",value:function(t,g,i){if(g<i){var e=this._partition(t,g,i);this._quicksort(t,g,e),this._quicksort(t,e+1,i)}}},{key:"_partition",value:function(t,g,i){for(var e=this._get(t,g),s=g,c=i;;){for(;this.compareFunction(e,this._get(t,c));)c--;for(;this.compareFunction(this._get(t,s),e);)s++;if(s<c)this._swap(t,s,c),s++,c--;else return c}}},{key:"_get",value:function(t,g){return t instanceof a?t.get_object_at(g):t[g]}},{key:"_set",value:function(t,g,i){t instanceof a?t.set_object_at(g,i):t[g]=i}},{key:"_swap",value:function(t,g,i){var e=this._get(t,g);this._set(t,g,this._get(t,i)),this._set(t,i,e)}},{key:"_defaultCompareFunction",value:function(t,g){return g>t}}]),n}();C.exports=r},function(C,A,T){"use strict";function u(){}u.svd=function(o){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=o.length,this.n=o[0].length;var a=Math.min(this.m,this.n);this.s=function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt}(Math.min(this.m+1,this.n)),this.U=function(Dt){var Nt=function $t(Rt){if(Rt.length==0)return 0;for(var Xt=[],zt=0;zt<Rt[0];zt++)Xt.push($t(Rt.slice(1)));return Xt};return Nt(Dt)}([this.m,a]),this.V=function(Dt){var Nt=function $t(Rt){if(Rt.length==0)return 0;for(var Xt=[],zt=0;zt<Rt[0];zt++)Xt.push($t(Rt.slice(1)));return Xt};return Nt(Dt)}([this.n,this.n]);for(var r=function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt}(this.n),n=function(Dt){for(var Nt=[];Dt-- >0;)Nt.push(0);return Nt}(this.m),f=!0,t=!0,g=Math.min(this.m-1,this.n),i=Math.max(0,Math.min(this.n-2,this.m)),e=0;e<Math.max(g,i);e++){if(e<g){this.s[e]=0;for(var s=e;s<this.m;s++)this.s[e]=u.hypot(this.s[e],o[s][e]);if(this.s[e]!==0){o[e][e]<0&&(this.s[e]=-this.s[e]);for(var c=e;c<this.m;c++)o[c][e]/=this.s[e];o[e][e]+=1}this.s[e]=-this.s[e]}for(var h=e+1;h<this.n;h++){if(function(Dt,Nt){return Dt&&Nt}(e<g,this.s[e]!==0)){for(var N=0,v=e;v<this.m;v++)N+=o[v][e]*o[v][h];N=-N/o[e][e];for(var y=e;y<this.m;y++)o[y][h]+=N*o[y][e]}r[h]=o[e][h]}if(function(Dt,Nt){return Dt&&Nt}(f,e<g))for(var L=e;L<this.m;L++)this.U[L][e]=o[L][e];if(e<i){r[e]=0;for(var R=e+1;R<this.n;R++)r[e]=u.hypot(r[e],r[R]);if(r[e]!==0){r[e+1]<0&&(r[e]=-r[e]);for(var M=e+1;M<this.n;M++)r[M]/=r[e];r[e+1]+=1}if(r[e]=-r[e],function(Dt,Nt){return Dt&&Nt}(e+1<this.m,r[e]!==0)){for(var S=e+1;S<this.m;S++)n[S]=0;for(var V=e+1;V<this.n;V++)for(var G=e+1;G<this.m;G++)n[G]+=r[V]*o[G][V];for(var it=e+1;it<this.n;it++)for(var I=-r[it]/r[e+1],k=e+1;k<this.m;k++)o[k][it]+=I*n[k]}if(t)for(var l=e+1;l<this.n;l++)this.V[l][e]=r[l]}}var E=Math.min(this.n,this.m+1);if(g<this.n&&(this.s[g]=o[g][g]),this.m<E&&(this.s[E-1]=0),i+1<E&&(r[i]=o[i][E-1]),r[E-1]=0,f){for(var d=g;d<a;d++){for(var m=0;m<this.m;m++)this.U[m][d]=0;this.U[d][d]=1}for(var p=g-1;p>=0;p--)if(this.s[p]!==0){for(var D=p+1;D<a;D++){for(var O=0,F=p;F<this.m;F++)O+=this.U[F][p]*this.U[F][D];O=-O/this.U[p][p];for(var b=p;b<this.m;b++)this.U[b][D]+=O*this.U[b][p]}for(var x=p;x<this.m;x++)this.U[x][p]=-this.U[x][p];this.U[p][p]=1+this.U[p][p];for(var Z=0;Z<p-1;Z++)this.U[Z][p]=0}else{for(var _=0;_<this.m;_++)this.U[_][p]=0;this.U[p][p]=1}}if(t)for(var P=this.n-1;P>=0;P--){if(function(Dt,Nt){return Dt&&Nt}(P<i,r[P]!==0))for(var j=P+1;j<a;j++){for(var z=0,w=P+1;w<this.n;w++)z+=this.V[w][P]*this.V[w][j];z=-z/this.V[P+1][P];for(var Y=P+1;Y<this.n;Y++)this.V[Y][j]+=z*this.V[Y][P]}for(var X=0;X<this.n;X++)this.V[X][P]=0;this.V[P][P]=1}for(var J=E-1,st=0,Lt=Math.pow(2,-52),St=Math.pow(2,-966);E>0;){var Q=void 0,Ut=void 0;for(Q=E-2;Q>=-1&&Q!==-1;Q--)if(Math.abs(r[Q])<=St+Lt*(Math.abs(this.s[Q])+Math.abs(this.s[Q+1]))){r[Q]=0;break}if(Q===E-2)Ut=4;else{var wt=void 0;for(wt=E-1;wt>=Q&&wt!==Q;wt--){var nt=(wt!==E?Math.abs(r[wt]):0)+(wt!==Q+1?Math.abs(r[wt-1]):0);if(Math.abs(this.s[wt])<=St+Lt*nt){this.s[wt]=0;break}}wt===Q?Ut=3:wt===E-1?Ut=1:(Ut=2,Q=wt)}switch(Q++,Ut){case 1:{var tt=r[E-2];r[E-2]=0;for(var pt=E-2;pt>=Q;pt--){var Et=u.hypot(this.s[pt],tt),Ct=this.s[pt]/Et,mt=tt/Et;if(this.s[pt]=Et,pt!==Q&&(tt=-mt*r[pt-1],r[pt-1]=Ct*r[pt-1]),t)for(var Tt=0;Tt<this.n;Tt++)Et=Ct*this.V[Tt][pt]+mt*this.V[Tt][E-1],this.V[Tt][E-1]=-mt*this.V[Tt][pt]+Ct*this.V[Tt][E-1],this.V[Tt][pt]=Et}}break;case 2:{var Ot=r[Q-1];r[Q-1]=0;for(var It=Q;It<E;It++){var Wt=u.hypot(this.s[It],Ot),Pt=this.s[It]/Wt,Yt=Ot/Wt;if(this.s[It]=Wt,Ot=-Yt*r[It],r[It]=Pt*r[It],f)for(var bt=0;bt<this.m;bt++)Wt=Pt*this.U[bt][It]+Yt*this.U[bt][Q-1],this.U[bt][Q-1]=-Yt*this.U[bt][It]+Pt*this.U[bt][Q-1],this.U[bt][It]=Wt}}break;case 3:{var U=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(r[E-2])),Math.abs(this.s[Q])),Math.abs(r[Q])),H=this.s[E-1]/U,W=this.s[E-2]/U,B=r[E-2]/U,$=this.s[Q]/U,K=r[Q]/U,ut=((W+H)*(W-H)+B*B)/2,ft=H*B*(H*B),q=0;(function(Dt,Nt){return Dt||Nt})(ut!==0,ft!==0)&&(q=Math.sqrt(ut*ut+ft),ut<0&&(q=-q),q=ft/(ut+q));for(var ht=($+H)*($-H)+q,gt=$*K,et=Q;et<E-1;et++){var vt=u.hypot(ht,gt),At=ht/vt,ot=gt/vt;if(et!==Q&&(r[et-1]=vt),ht=At*this.s[et]+ot*r[et],r[et]=At*r[et]-ot*this.s[et],gt=ot*this.s[et+1],this.s[et+1]=At*this.s[et+1],t)for(var rt=0;rt<this.n;rt++)vt=At*this.V[rt][et]+ot*this.V[rt][et+1],this.V[rt][et+1]=-ot*this.V[rt][et]+At*this.V[rt][et+1],this.V[rt][et]=vt;if(vt=u.hypot(ht,gt),At=ht/vt,ot=gt/vt,this.s[et]=vt,ht=At*r[et]+ot*this.s[et+1],this.s[et+1]=-ot*r[et]+At*this.s[et+1],gt=ot*r[et+1],r[et+1]=At*r[et+1],f&&et<this.m-1)for(var dt=0;dt<this.m;dt++)vt=At*this.U[dt][et]+ot*this.U[dt][et+1],this.U[dt][et+1]=-ot*this.U[dt][et]+At*this.U[dt][et+1],this.U[dt][et]=vt}r[E-2]=ht,st=st+1}break;case 4:{if(this.s[Q]<=0&&(this.s[Q]=this.s[Q]<0?-this.s[Q]:0,t))for(var at=0;at<=J;at++)this.V[at][Q]=-this.V[at][Q];for(;Q<J&&!(this.s[Q]>=this.s[Q+1]);){var lt=this.s[Q];if(this.s[Q]=this.s[Q+1],this.s[Q+1]=lt,t&&Q<this.n-1)for(var Ft=0;Ft<this.n;Ft++)lt=this.V[Ft][Q+1],this.V[Ft][Q+1]=this.V[Ft][Q],this.V[Ft][Q]=lt;if(f&&Q<this.m-1)for(var xt=0;xt<this.m;xt++)lt=this.U[xt][Q+1],this.U[xt][Q+1]=this.U[xt][Q],this.U[xt][Q]=lt;Q++}st=0,E--}break}}var Vt={U:this.U,V:this.V,S:this.s};return Vt},u.hypot=function(o,a){var r=void 0;return Math.abs(o)>Math.abs(a)?(r=a/o,r=Math.abs(o)*Math.sqrt(1+r*r)):a!=0?(r=o/a,r=Math.abs(a)*Math.sqrt(1+r*r)):r=0,r},C.exports=u},function(C,A,T){"use strict";var u=function(){function r(n,f){for(var t=0;t<f.length;t++){var g=f[t];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(n,g.key,g)}}return function(n,f,t){return f&&r(n.prototype,f),t&&r(n,t),n}}();function o(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function r(n,f){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,r),this.sequence1=n,this.sequence2=f,this.match_score=t,this.mismatch_penalty=g,this.gap_penalty=i,this.iMax=n.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var e=0;e<this.iMax;e++){this.grid[e]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[e][s]=0}this.tracebackGrid=new Array(this.iMax);for(var c=0;c<this.iMax;c++){this.tracebackGrid[c]=new Array(this.jMax);for(var h=0;h<this.jMax;h++)this.tracebackGrid[c][h]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return u(r,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var g=1;g<this.iMax;g++)for(var i=1;i<this.jMax;i++){var e=void 0;this.sequence1[g-1]===this.sequence2[i-1]?e=this.grid[g-1][i-1]+this.match_score:e=this.grid[g-1][i-1]+this.mismatch_penalty;var s=this.grid[g-1][i]+this.gap_penalty,c=this.grid[g][i-1]+this.gap_penalty,h=[e,s,c],N=this.arrayAllMaxIndexes(h);this.grid[g][i]=h[N[0]],this.tracebackGrid[g][i]=[N.includes(0),N.includes(1),N.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var t=f[0],g=this.tracebackGrid[t.pos[0]][t.pos[1]];g[0]&&f.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),g[1]&&f.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),g[2]&&f.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),t.pos[0]===0&&t.pos[1]===0&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,t){for(var g=[],i=-1;(i=f.indexOf(t,i+1))!==-1;)g.push(i);return g}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),r}();C.exports=a},function(C,A,T){"use strict";var u=function(){};u.FDLayout=T(18),u.FDLayoutConstants=T(4),u.FDLayoutEdge=T(19),u.FDLayoutNode=T(20),u.DimensionD=T(21),u.HashMap=T(22),u.HashSet=T(23),u.IGeometry=T(8),u.IMath=T(9),u.Integer=T(10),u.Point=T(12),u.PointD=T(5),u.RandomSeed=T(16),u.RectangleD=T(13),u.Transform=T(17),u.UniqueIDGeneretor=T(14),u.Quicksort=T(25),u.LinkedList=T(11),u.LGraphObject=T(2),u.LGraph=T(6),u.LEdge=T(1),u.LGraphManager=T(7),u.LNode=T(3),u.Layout=T(15),u.LayoutConstants=T(0),u.NeedlemanWunsch=T(27),u.Matrix=T(24),u.SVD=T(26),C.exports=u},function(C,A,T){"use strict";function u(){this.listeners=[]}var o=u.prototype;o.addListener=function(a,r){this.listeners.push({event:a,callback:r})},o.removeListener=function(a,r){for(var n=this.listeners.length;n>=0;n--){var f=this.listeners[n];f.event===a&&f.callback===r&&this.listeners.splice(n,1)}},o.emit=function(a,r){for(var n=0;n<this.listeners.length;n++){var f=this.listeners[n];a===f.event&&f.callback(r)}},C.exports=u}])})});var Ce=ye((ae,Le)=>{(function(A,T){typeof ae=="object"&&typeof Le=="object"?Le.exports=T(Ne()):typeof define=="function"&&define.amd?define(["layout-base"],T):typeof ae=="object"?ae.coseBase=T(Ne()):A.coseBase=T(A.layoutBase)})(ae,function(C){return(()=>{"use strict";var A={45:(a,r,n)=>{var f={};f.layoutBase=n(551),f.CoSEConstants=n(806),f.CoSEEdge=n(767),f.CoSEGraph=n(880),f.CoSEGraphManager=n(578),f.CoSELayout=n(765),f.CoSENode=n(991),f.ConstraintHandler=n(902),a.exports=f},806:(a,r,n)=>{var f=n(551).FDLayoutConstants;function t(){}for(var g in f)t[g]=f[g];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,a.exports=t},767:(a,r,n)=>{var f=n(551).FDLayoutEdge;function t(i,e,s){f.call(this,i,e,s)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t},880:(a,r,n)=>{var f=n(551).LGraph;function t(i,e,s){f.call(this,i,e,s)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t},578:(a,r,n)=>{var f=n(551).LGraphManager;function t(i){f.call(this,i)}t.prototype=Object.create(f.prototype);for(var g in f)t[g]=f[g];a.exports=t},765:(a,r,n)=>{var f=n(551).FDLayout,t=n(578),g=n(880),i=n(991),e=n(767),s=n(806),c=n(902),h=n(551).FDLayoutConstants,N=n(551).LayoutConstants,v=n(551).Point,y=n(551).PointD,L=n(551).DimensionD,R=n(551).Layout,M=n(551).Integer,S=n(551).IGeometry,V=n(551).LGraph,G=n(551).Transform,it=n(551).LinkedList;function I(){f.call(this),this.toBeTiled={},this.constraints={}}I.prototype=Object.create(f.prototype);for(var k in f)I[k]=f[k];I.prototype.newGraphManager=function(){var l=new t(this);return this.graphManager=l,l},I.prototype.newGraph=function(l){return new g(null,this.graphManager,l)},I.prototype.newNode=function(l){return new i(this.graphManager,l)},I.prototype.newEdge=function(l){return new e(null,null,l)},I.prototype.initParameters=function(){f.prototype.initParameters.call(this,arguments),this.isSubLayout||(s.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},I.prototype.initSpringEmbedder=function(){f.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},I.prototype.layout=function(){var l=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return l&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},I.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(s.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(D){return E.has(D)});this.graphManager.setAllNodesToApplyGravitation(d)}}else{var l=this.getFlatForest();if(l.length>0)this.positionNodesRadially(l);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(m){return E.has(m)});this.graphManager.setAllNodesToApplyGravitation(d),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),s.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},I.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(p){return l.has(p)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),s.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),s.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var d=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(d,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},I.prototype.getPositionsData=function(){for(var l=this.graphManager.getAllNodes(),E={},d=0;d<l.length;d++){var m=l[d].rect,p=l[d].id;E[p]={id:p,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return E},I.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var l=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!l;)l=this.tick();this.graphManager.updateBounds()}},I.prototype.moveNodes=function(){for(var l=this.getAllNodes(),E,d=0;d<l.length;d++)E=l[d],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var d=0;d<l.length;d++)E=l[d],E.move()},I.prototype.initConstraintVariables=function(){var l=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),d=0;d<E.length;d++){var m=E[d];this.idToNodeMap.set(m.id,m)}var p=function w(Y){for(var X=Y.getChild().getNodes(),J,st=0,Lt=0;Lt<X.length;Lt++)J=X[Lt],J.getChild()==null?l.fixedNodeSet.has(J.id)&&(st+=100):st+=w(J);return st};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(X){l.fixedNodeSet.add(X.nodeId)});for(var E=this.graphManager.getAllNodes(),m,d=0;d<E.length;d++)if(m=E[d],m.getChild()!=null){var D=p(m);D>0&&(m.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,F=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(w){l.fixedNodesOnHorizontal.add(w),l.fixedNodesOnVertical.add(w)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var b=this.constraints.alignmentConstraint.vertical,d=0;d<b.length;d++)this.dummyToNodeForVerticalAlignment.set("dummy"+d,[]),b[d].forEach(function(Y){O.set(Y,"dummy"+d),l.dummyToNodeForVerticalAlignment.get("dummy"+d).push(Y),l.fixedNodeSet.has(Y)&&l.fixedNodesOnHorizontal.add("dummy"+d)});if(this.constraints.alignmentConstraint.horizontal)for(var x=this.constraints.alignmentConstraint.horizontal,d=0;d<x.length;d++)this.dummyToNodeForHorizontalAlignment.set("dummy"+d,[]),x[d].forEach(function(Y){F.set(Y,"dummy"+d),l.dummyToNodeForHorizontalAlignment.get("dummy"+d).push(Y),l.fixedNodeSet.has(Y)&&l.fixedNodesOnVertical.add("dummy"+d)})}if(s.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(w){var Y,X,J;for(J=w.length-1;J>=2*w.length/3;J--)Y=Math.floor(Math.random()*(J+1)),X=w[J],w[J]=w[Y],w[Y]=X;return w},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var Y=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;l.nodesInRelativeHorizontal.includes(Y)||(l.nodesInRelativeHorizontal.push(Y),l.nodeToRelativeConstraintMapHorizontal.set(Y,[]),l.dummyToNodeForVerticalAlignment.has(Y)?l.nodeToTempPositionMapHorizontal.set(Y,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(Y)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(Y,l.idToNodeMap.get(Y).getCenterX())),l.nodesInRelativeHorizontal.includes(X)||(l.nodesInRelativeHorizontal.push(X),l.nodeToRelativeConstraintMapHorizontal.set(X,[]),l.dummyToNodeForVerticalAlignment.has(X)?l.nodeToTempPositionMapHorizontal.set(X,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(X)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(X,l.idToNodeMap.get(X).getCenterX())),l.nodeToRelativeConstraintMapHorizontal.get(Y).push({right:X,gap:w.gap}),l.nodeToRelativeConstraintMapHorizontal.get(X).push({left:Y,gap:w.gap})}else{var J=F.has(w.top)?F.get(w.top):w.top,st=F.has(w.bottom)?F.get(w.bottom):w.bottom;l.nodesInRelativeVertical.includes(J)||(l.nodesInRelativeVertical.push(J),l.nodeToRelativeConstraintMapVertical.set(J,[]),l.dummyToNodeForHorizontalAlignment.has(J)?l.nodeToTempPositionMapVertical.set(J,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(J)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(J,l.idToNodeMap.get(J).getCenterY())),l.nodesInRelativeVertical.includes(st)||(l.nodesInRelativeVertical.push(st),l.nodeToRelativeConstraintMapVertical.set(st,[]),l.dummyToNodeForHorizontalAlignment.has(st)?l.nodeToTempPositionMapVertical.set(st,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(st)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(st,l.idToNodeMap.get(st).getCenterY())),l.nodeToRelativeConstraintMapVertical.get(J).push({bottom:st,gap:w.gap}),l.nodeToRelativeConstraintMapVertical.get(st).push({top:J,gap:w.gap})}});else{var Z=new Map,_=new Map;this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var Y=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;Z.has(Y)?Z.get(Y).push(X):Z.set(Y,[X]),Z.has(X)?Z.get(X).push(Y):Z.set(X,[Y])}else{var J=F.has(w.top)?F.get(w.top):w.top,st=F.has(w.bottom)?F.get(w.bottom):w.bottom;_.has(J)?_.get(J).push(st):_.set(J,[st]),_.has(st)?_.get(st).push(J):_.set(st,[J])}});var P=function(Y,X){var J=[],st=[],Lt=new it,St=new Set,Q=0;return Y.forEach(function(Ut,wt){if(!St.has(wt)){J[Q]=[],st[Q]=!1;var nt=wt;for(Lt.push(nt),St.add(nt),J[Q].push(nt);Lt.length!=0;){nt=Lt.shift(),X.has(nt)&&(st[Q]=!0);var tt=Y.get(nt);tt.forEach(function(pt){St.has(pt)||(Lt.push(pt),St.add(pt),J[Q].push(pt))})}Q++}}),{components:J,isFixed:st}},j=P(Z,l.fixedNodesOnHorizontal);this.componentsOnHorizontal=j.components,this.fixedComponentsOnHorizontal=j.isFixed;var z=P(_,l.fixedNodesOnVertical);this.componentsOnVertical=z.components,this.fixedComponentsOnVertical=z.isFixed}}},I.prototype.updateDisplacements=function(){var l=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(z){var w=l.idToNodeMap.get(z.nodeId);w.displacementX=0,w.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,d=0;d<E.length;d++){for(var m=0,p=0;p<E[d].length;p++){if(this.fixedNodeSet.has(E[d][p])){m=0;break}m+=this.idToNodeMap.get(E[d][p]).displacementX}for(var D=m/E[d].length,p=0;p<E[d].length;p++)this.idToNodeMap.get(E[d][p]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,d=0;d<O.length;d++){for(var F=0,p=0;p<O[d].length;p++){if(this.fixedNodeSet.has(O[d][p])){F=0;break}F+=this.idToNodeMap.get(O[d][p]).displacementY}for(var b=F/O[d].length,p=0;p<O[d].length;p++)this.idToNodeMap.get(O[d][p]).displacementY=b}}if(this.constraints.relativePlacementConstraint)if(s.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(z){if(!l.fixedNodesOnHorizontal.has(z)){var w=0;l.dummyToNodeForVerticalAlignment.has(z)?w=l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(z)[0]).displacementX:w=l.idToNodeMap.get(z).displacementX,l.nodeToRelativeConstraintMapHorizontal.get(z).forEach(function(Y){if(Y.right){var X=l.nodeToTempPositionMapHorizontal.get(Y.right)-l.nodeToTempPositionMapHorizontal.get(z)-w;X<Y.gap&&(w-=Y.gap-X)}else{var X=l.nodeToTempPositionMapHorizontal.get(z)-l.nodeToTempPositionMapHorizontal.get(Y.left)+w;X<Y.gap&&(w+=Y.gap-X)}}),l.nodeToTempPositionMapHorizontal.set(z,l.nodeToTempPositionMapHorizontal.get(z)+w),l.dummyToNodeForVerticalAlignment.has(z)?l.dummyToNodeForVerticalAlignment.get(z).forEach(function(Y){l.idToNodeMap.get(Y).displacementX=w}):l.idToNodeMap.get(z).displacementX=w}}),this.nodesInRelativeVertical.forEach(function(z){if(!l.fixedNodesOnHorizontal.has(z)){var w=0;l.dummyToNodeForHorizontalAlignment.has(z)?w=l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(z)[0]).displacementY:w=l.idToNodeMap.get(z).displacementY,l.nodeToRelativeConstraintMapVertical.get(z).forEach(function(Y){if(Y.bottom){var X=l.nodeToTempPositionMapVertical.get(Y.bottom)-l.nodeToTempPositionMapVertical.get(z)-w;X<Y.gap&&(w-=Y.gap-X)}else{var X=l.nodeToTempPositionMapVertical.get(z)-l.nodeToTempPositionMapVertical.get(Y.top)+w;X<Y.gap&&(w+=Y.gap-X)}}),l.nodeToTempPositionMapVertical.set(z,l.nodeToTempPositionMapVertical.get(z)+w),l.dummyToNodeForHorizontalAlignment.has(z)?l.dummyToNodeForHorizontalAlignment.get(z).forEach(function(Y){l.idToNodeMap.get(Y).displacementY=w}):l.idToNodeMap.get(z).displacementY=w}});else{for(var d=0;d<this.componentsOnHorizontal.length;d++){var x=this.componentsOnHorizontal[d];if(this.fixedComponentsOnHorizontal[d])for(var p=0;p<x.length;p++)this.dummyToNodeForVerticalAlignment.has(x[p])?this.dummyToNodeForVerticalAlignment.get(x[p]).forEach(function(Y){l.idToNodeMap.get(Y).displacementX=0}):this.idToNodeMap.get(x[p]).displacementX=0;else{for(var Z=0,_=0,p=0;p<x.length;p++)if(this.dummyToNodeForVerticalAlignment.has(x[p])){var P=this.dummyToNodeForVerticalAlignment.get(x[p]);Z+=P.length*this.idToNodeMap.get(P[0]).displacementX,_+=P.length}else Z+=this.idToNodeMap.get(x[p]).displacementX,_++;for(var j=Z/_,p=0;p<x.length;p++)this.dummyToNodeForVerticalAlignment.has(x[p])?this.dummyToNodeForVerticalAlignment.get(x[p]).forEach(function(Y){l.idToNodeMap.get(Y).displacementX=j}):this.idToNodeMap.get(x[p]).displacementX=j}}for(var d=0;d<this.componentsOnVertical.length;d++){var x=this.componentsOnVertical[d];if(this.fixedComponentsOnVertical[d])for(var p=0;p<x.length;p++)this.dummyToNodeForHorizontalAlignment.has(x[p])?this.dummyToNodeForHorizontalAlignment.get(x[p]).forEach(function(X){l.idToNodeMap.get(X).displacementY=0}):this.idToNodeMap.get(x[p]).displacementY=0;else{for(var Z=0,_=0,p=0;p<x.length;p++)if(this.dummyToNodeForHorizontalAlignment.has(x[p])){var P=this.dummyToNodeForHorizontalAlignment.get(x[p]);Z+=P.length*this.idToNodeMap.get(P[0]).displacementY,_+=P.length}else Z+=this.idToNodeMap.get(x[p]).displacementY,_++;for(var j=Z/_,p=0;p<x.length;p++)this.dummyToNodeForHorizontalAlignment.has(x[p])?this.dummyToNodeForHorizontalAlignment.get(x[p]).forEach(function(Lt){l.idToNodeMap.get(Lt).displacementY=j}):this.idToNodeMap.get(x[p]).displacementY=j}}}},I.prototype.calculateNodesToApplyGravitationTo=function(){var l=[],E,d=this.graphManager.getGraphs(),m=d.length,p;for(p=0;p<m;p++)E=d[p],E.updateConnected(),E.isConnected||(l=l.concat(E.getNodes()));return l},I.prototype.createBendpoints=function(){var l=[];l=l.concat(this.graphManager.getAllEdges());var E=new Set,d;for(d=0;d<l.length;d++){var m=l[d];if(!E.has(m)){var p=m.getSource(),D=m.getTarget();if(p==D)m.getBendpoints().push(new y),m.getBendpoints().push(new y),this.createDummyNodesForBendpoints(m),E.add(m);else{var O=[];if(O=O.concat(p.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(p)),!E.has(O[0])){if(O.length>1){var F;for(F=0;F<O.length;F++){var b=O[F];b.getBendpoints().push(new y),this.createDummyNodesForBendpoints(b)}}O.forEach(function(x){E.add(x)})}}}if(E.size==l.length)break}},I.prototype.positionNodesRadially=function(l){for(var E=new v(0,0),d=Math.ceil(Math.sqrt(l.length)),m=0,p=0,D=0,O=new y(0,0),F=0;F<l.length;F++){F%d==0&&(D=0,p=m,F!=0&&(p+=s.DEFAULT_COMPONENT_SEPERATION),m=0);var b=l[F],x=R.findCenterOfTree(b);E.x=D,E.y=p,O=I.radialLayout(b,x,E),O.y>m&&(m=Math.floor(O.y)),D=Math.floor(O.x+s.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},I.radialLayout=function(l,E,d){var m=Math.max(this.maxDiagonalInTree(l),s.DEFAULT_RADIAL_SEPARATION);I.branchRadialLayout(E,null,0,359,0,m);var p=V.calculateBounds(l),D=new G;D.setDeviceOrgX(p.getMinX()),D.setDeviceOrgY(p.getMinY()),D.setWorldOrgX(d.x),D.setWorldOrgY(d.y);for(var O=0;O<l.length;O++){var F=l[O];F.transform(D)}var b=new y(p.getMaxX(),p.getMaxY());return D.inverseTransformPoint(b)},I.branchRadialLayout=function(l,E,d,m,p,D){var O=(m-d+1)/2;O<0&&(O+=180);var F=(O+d)%360,b=F*S.TWO_PI/360,x=Math.cos(b),Z=p*Math.cos(b),_=p*Math.sin(b);l.setCenter(Z,_);var P=[];P=P.concat(l.getEdges());var j=P.length;E!=null&&j--;for(var z=0,w=P.length,Y,X=l.getEdgesBetween(E);X.length>1;){var J=X[0];X.splice(0,1);var st=P.indexOf(J);st>=0&&P.splice(st,1),w--,j--}E!=null?Y=(P.indexOf(X[0])+1)%w:Y=0;for(var Lt=Math.abs(m-d)/j,St=Y;z!=j;St=++St%w){var Q=P[St].getOtherEnd(l);if(Q!=E){var Ut=(d+z*Lt)%360,wt=(Ut+Lt)%360;I.branchRadialLayout(Q,l,Ut,wt,p+D,D),z++}}},I.maxDiagonalInTree=function(l){for(var E=M.MIN_VALUE,d=0;d<l.length;d++){var m=l[d],p=m.getDiagonal();p>E&&(E=p)}return E},I.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},I.prototype.groupZeroDegreeMembers=function(){var l=this,E={};this.memberGroups={},this.idToDummyNode={};for(var d=[],m=this.graphManager.getAllNodes(),p=0;p<m.length;p++){var D=m[p],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&d.push(D)}for(var p=0;p<d.length;p++){var D=d[p],F=D.getParent().id;typeof E[F]>"u"&&(E[F]=[]),E[F]=E[F].concat(D)}Object.keys(E).forEach(function(b){if(E[b].length>1){var x="DummyCompound_"+b;l.memberGroups[x]=E[b];var Z=E[b][0].getParent(),_=new i(l.graphManager);_.id=x,_.paddingLeft=Z.paddingLeft||0,_.paddingRight=Z.paddingRight||0,_.paddingBottom=Z.paddingBottom||0,_.paddingTop=Z.paddingTop||0,l.idToDummyNode[x]=_;var P=l.getGraphManager().add(l.newGraph(),_),j=Z.getChild();j.add(_);for(var z=0;z<E[b].length;z++){var w=E[b][z];j.remove(w),P.add(w)}}})},I.prototype.clearCompounds=function(){var l={},E={};this.performDFSOnCompounds();for(var d=0;d<this.compoundOrder.length;d++)E[this.compoundOrder[d].id]=this.compoundOrder[d],l[this.compoundOrder[d].id]=[].concat(this.compoundOrder[d].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[d].getChild()),this.compoundOrder[d].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(l,E)},I.prototype.clearZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(d){var m=l.idToDummyNode[d];if(E[d]=l.tileNodes(l.memberGroups[d],m.paddingLeft+m.paddingRight),m.rect.width=E[d].width,m.rect.height=E[d].height,m.setCenter(E[d].centerX,E[d].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,s.NODE_DIMENSIONS_INCLUDE_LABELS){var p=m.rect.width,D=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(p+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>p?(m.rect.x-=(m.labelWidth-p)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-p)/2):m.labelPosHorizontal=="right"&&m.setWidth(p+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(D+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>D?(m.rect.y-=(m.labelHeight-D)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-D)/2):m.labelPosVertical=="bottom"&&m.setHeight(D+m.labelHeight))}})},I.prototype.repopulateCompounds=function(){for(var l=this.compoundOrder.length-1;l>=0;l--){var E=this.compoundOrder[l],d=E.id,m=E.paddingLeft,p=E.paddingTop,D=E.labelMarginLeft,O=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[d],E.rect.x,E.rect.y,m,p,D,O)}},I.prototype.repopulateZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(d){var m=l.idToDummyNode[d],p=m.paddingLeft,D=m.paddingTop,O=m.labelMarginLeft,F=m.labelMarginTop;l.adjustLocations(E[d],m.rect.x,m.rect.y,p,D,O,F)})},I.prototype.getToBeTiled=function(l){var E=l.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var d=l.getChild();if(d==null)return this.toBeTiled[E]=!1,!1;for(var m=d.getNodes(),p=0;p<m.length;p++){var D=m[p];if(this.getNodeDegree(D)>0)return this.toBeTiled[E]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},I.prototype.getNodeDegree=function(l){for(var E=l.id,d=l.getEdges(),m=0,p=0;p<d.length;p++){var D=d[p];D.getSource().id!==D.getTarget().id&&(m=m+1)}return m},I.prototype.getNodeDegreeWithChildren=function(l){var E=this.getNodeDegree(l);if(l.getChild()==null)return E;for(var d=l.getChild().getNodes(),m=0;m<d.length;m++){var p=d[m];E+=this.getNodeDegreeWithChildren(p)}return E},I.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},I.prototype.fillCompexOrderByDFS=function(l){for(var E=0;E<l.length;E++){var d=l[E];d.getChild()!=null&&this.fillCompexOrderByDFS(d.getChild().getNodes()),this.getToBeTiled(d)&&this.compoundOrder.push(d)}},I.prototype.adjustLocations=function(l,E,d,m,p,D,O){E+=m+D,d+=p+O;for(var F=E,b=0;b<l.rows.length;b++){var x=l.rows[b];E=F;for(var Z=0,_=0;_<x.length;_++){var P=x[_];P.rect.x=E,P.rect.y=d,E+=P.rect.width+l.horizontalPadding,P.rect.height>Z&&(Z=P.rect.height)}d+=Z+l.verticalPadding}},I.prototype.tileCompoundMembers=function(l,E){var d=this;this.tiledMemberPack=[],Object.keys(l).forEach(function(m){var p=E[m];if(d.tiledMemberPack[m]=d.tileNodes(l[m],p.paddingLeft+p.paddingRight),p.rect.width=d.tiledMemberPack[m].width,p.rect.height=d.tiledMemberPack[m].height,p.setCenter(d.tiledMemberPack[m].centerX,d.tiledMemberPack[m].centerY),p.labelMarginLeft=0,p.labelMarginTop=0,s.NODE_DIMENSIONS_INCLUDE_LABELS){var D=p.rect.width,O=p.rect.height;p.labelWidth&&(p.labelPosHorizontal=="left"?(p.rect.x-=p.labelWidth,p.setWidth(D+p.labelWidth),p.labelMarginLeft=p.labelWidth):p.labelPosHorizontal=="center"&&p.labelWidth>D?(p.rect.x-=(p.labelWidth-D)/2,p.setWidth(p.labelWidth),p.labelMarginLeft=(p.labelWidth-D)/2):p.labelPosHorizontal=="right"&&p.setWidth(D+p.labelWidth)),p.labelHeight&&(p.labelPosVertical=="top"?(p.rect.y-=p.labelHeight,p.setHeight(O+p.labelHeight),p.labelMarginTop=p.labelHeight):p.labelPosVertical=="center"&&p.labelHeight>O?(p.rect.y-=(p.labelHeight-O)/2,p.setHeight(p.labelHeight),p.labelMarginTop=(p.labelHeight-O)/2):p.labelPosVertical=="bottom"&&p.setHeight(O+p.labelHeight))}})},I.prototype.tileNodes=function(l,E){var d=this.tileNodesByFavoringDim(l,E,!0),m=this.tileNodesByFavoringDim(l,E,!1),p=this.getOrgRatio(d),D=this.getOrgRatio(m),O;return D<p?O=m:O=d,O},I.prototype.getOrgRatio=function(l){var E=l.width,d=l.height,m=E/d;return m<1&&(m=1/m),m},I.prototype.calcIdealRowWidth=function(l,E){var d=s.TILING_PADDING_VERTICAL,m=s.TILING_PADDING_HORIZONTAL,p=l.length,D=0,O=0,F=0;l.forEach(function(z){D+=z.getWidth(),O+=z.getHeight(),z.getWidth()>F&&(F=z.getWidth())});var b=D/p,x=O/p,Z=Math.pow(d-m,2)+4*(b+m)*(x+d)*p,_=(m-d+Math.sqrt(Z))/(2*(b+m)),P;E?(P=Math.ceil(_),P==_&&P++):P=Math.floor(_);var j=P*(b+m)-m;return F>j&&(j=F),j+=m*2,j},I.prototype.tileNodesByFavoringDim=function(l,E,d){var m=s.TILING_PADDING_VERTICAL,p=s.TILING_PADDING_HORIZONTAL,D=s.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:m,horizontalPadding:p,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(l,d));var F=function(w){return w.rect.width*w.rect.height},b=function(w,Y){return F(Y)-F(w)};l.sort(function(z,w){var Y=b;return O.idealRowWidth?(Y=D,Y(z.id,w.id)):Y(z,w)});for(var x=0,Z=0,_=0;_<l.length;_++){var P=l[_];x+=P.getCenterX(),Z+=P.getCenterY()}O.centerX=x/l.length,O.centerY=Z/l.length;for(var _=0;_<l.length;_++){var P=l[_];if(O.rows.length==0)this.insertNodeToRow(O,P,0,E);else if(this.canAddHorizontal(O,P.rect.width,P.rect.height)){var j=O.rows.length-1;O.idealRowWidth||(j=this.getShortestRowIndex(O)),this.insertNodeToRow(O,P,j,E)}else this.insertNodeToRow(O,P,O.rows.length,E);this.shiftToLastRow(O)}return O},I.prototype.insertNodeToRow=function(l,E,d,m){var p=m;if(d==l.rows.length){var D=[];l.rows.push(D),l.rowWidth.push(p),l.rowHeight.push(0)}var O=l.rowWidth[d]+E.rect.width;l.rows[d].length>0&&(O+=l.horizontalPadding),l.rowWidth[d]=O,l.width<O&&(l.width=O);var F=E.rect.height;d>0&&(F+=l.verticalPadding);var b=0;F>l.rowHeight[d]&&(b=l.rowHeight[d],l.rowHeight[d]=F,b=l.rowHeight[d]-b),l.height+=b,l.rows[d].push(E)},I.prototype.getShortestRowIndex=function(l){for(var E=-1,d=Number.MAX_VALUE,m=0;m<l.rows.length;m++)l.rowWidth[m]<d&&(E=m,d=l.rowWidth[m]);return E},I.prototype.getLongestRowIndex=function(l){for(var E=-1,d=Number.MIN_VALUE,m=0;m<l.rows.length;m++)l.rowWidth[m]>d&&(E=m,d=l.rowWidth[m]);return E},I.prototype.canAddHorizontal=function(l,E,d){if(l.idealRowWidth){var m=l.rows.length-1,p=l.rowWidth[m];return p+E+l.horizontalPadding<=l.idealRowWidth}var D=this.getShortestRowIndex(l);if(D<0)return!0;var O=l.rowWidth[D];if(O+l.horizontalPadding+E<=l.width)return!0;var F=0;l.rowHeight[D]<d&&D>0&&(F=d+l.verticalPadding-l.rowHeight[D]);var b;l.width-O>=E+l.horizontalPadding?b=(l.height+F)/(O+E+l.horizontalPadding):b=(l.height+F)/l.width,F=d+l.verticalPadding;var x;return l.width<E?x=(l.height+F)/E:x=(l.height+F)/l.width,x<1&&(x=1/x),b<1&&(b=1/b),b<x},I.prototype.shiftToLastRow=function(l){var E=this.getLongestRowIndex(l),d=l.rowWidth.length-1,m=l.rows[E],p=m[m.length-1],D=p.width+l.horizontalPadding;if(l.width-l.rowWidth[d]>D&&E!=d){m.splice(-1,1),l.rows[d].push(p),l.rowWidth[E]=l.rowWidth[E]-D,l.rowWidth[d]=l.rowWidth[d]+D,l.width=l.rowWidth[instance.getLongestRowIndex(l)];for(var O=Number.MIN_VALUE,F=0;F<m.length;F++)m[F].height>O&&(O=m[F].height);E>0&&(O+=l.verticalPadding);var b=l.rowHeight[E]+l.rowHeight[d];l.rowHeight[E]=O,l.rowHeight[d]<p.height+l.verticalPadding&&(l.rowHeight[d]=p.height+l.verticalPadding);var x=l.rowHeight[E]+l.rowHeight[d];l.height+=x-b,this.shiftToLastRow(l)}},I.prototype.tilingPreLayout=function(){s.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},I.prototype.tilingPostLayout=function(){s.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},I.prototype.reduceTrees=function(){for(var l=[],E=!0,d;E;){var m=this.graphManager.getAllNodes(),p=[];E=!1;for(var D=0;D<m.length;D++)if(d=m[D],d.getEdges().length==1&&!d.getEdges()[0].isInterGraph&&d.getChild()==null){if(s.PURE_INCREMENTAL){var O=d.getEdges()[0].getOtherEnd(d),F=new L(d.getCenterX()-O.getCenterX(),d.getCenterY()-O.getCenterY());p.push([d,d.getEdges()[0],d.getOwner(),F])}else p.push([d,d.getEdges()[0],d.getOwner()]);E=!0}if(E==!0){for(var b=[],x=0;x<p.length;x++)p[x][0].getEdges().length==1&&(b.push(p[x]),p[x][0].getOwner().remove(p[x][0]));l.push(b),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=l},I.prototype.growTree=function(l){for(var E=l.length,d=l[E-1],m,p=0;p<d.length;p++)m=d[p],this.findPlaceforPrunedNode(m),m[2].add(m[0]),m[2].add(m[1],m[1].source,m[1].target);l.splice(l.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},I.prototype.findPlaceforPrunedNode=function(l){var E,d,m=l[0];if(m==l[1].source?d=l[1].target:d=l[1].source,s.PURE_INCREMENTAL)m.setCenter(d.getCenterX()+l[3].getWidth(),d.getCenterY()+l[3].getHeight());else{var p=d.startX,D=d.finishX,O=d.startY,F=d.finishY,b=0,x=0,Z=0,_=0,P=[b,Z,x,_];if(O>0)for(var j=p;j<=D;j++)P[0]+=this.grid[j][O-1].length+this.grid[j][O].length-1;if(D<this.grid.length-1)for(var j=O;j<=F;j++)P[1]+=this.grid[D+1][j].length+this.grid[D][j].length-1;if(F<this.grid[0].length-1)for(var j=p;j<=D;j++)P[2]+=this.grid[j][F+1].length+this.grid[j][F].length-1;if(p>0)for(var j=O;j<=F;j++)P[3]+=this.grid[p-1][j].length+this.grid[p][j].length-1;for(var z=M.MAX_VALUE,w,Y,X=0;X<P.length;X++)P[X]<z?(z=P[X],w=1,Y=X):P[X]==z&&w++;if(w==3&&z==0)P[0]==0&&P[1]==0&&P[2]==0?E=1:P[0]==0&&P[1]==0&&P[3]==0?E=0:P[0]==0&&P[2]==0&&P[3]==0?E=3:P[1]==0&&P[2]==0&&P[3]==0&&(E=2);else if(w==2&&z==0){var J=Math.floor(Math.random()*2);P[0]==0&&P[1]==0?J==0?E=0:E=1:P[0]==0&&P[2]==0?J==0?E=0:E=2:P[0]==0&&P[3]==0?J==0?E=0:E=3:P[1]==0&&P[2]==0?J==0?E=1:E=2:P[1]==0&&P[3]==0?J==0?E=1:E=3:J==0?E=2:E=3}else if(w==4&&z==0){var J=Math.floor(Math.random()*4);E=J}else E=Y;E==0?m.setCenter(d.getCenterX(),d.getCenterY()-d.getHeight()/2-h.DEFAULT_EDGE_LENGTH-m.getHeight()/2):E==1?m.setCenter(d.getCenterX()+d.getWidth()/2+h.DEFAULT_EDGE_LENGTH+m.getWidth()/2,d.getCenterY()):E==2?m.setCenter(d.getCenterX(),d.getCenterY()+d.getHeight()/2+h.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(d.getCenterX()-d.getWidth()/2-h.DEFAULT_EDGE_LENGTH-m.getWidth()/2,d.getCenterY())}},a.exports=I},991:(a,r,n)=>{var f=n(551).FDLayoutNode,t=n(551).IMath;function g(e,s,c,h){f.call(this,e,s,c,h)}g.prototype=Object.create(f.prototype);for(var i in f)g[i]=f[i];g.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},g.prototype.propogateDisplacementToChildren=function(e,s){for(var c=this.getChild().getNodes(),h,N=0;N<c.length;N++)h=c[N],h.getChild()==null?(h.displacementX+=e,h.displacementY+=s):h.propogateDisplacementToChildren(e,s)},g.prototype.move=function(){var e=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},g.prototype.setPred1=function(e){this.pred1=e},g.prototype.getPred1=function(){return pred1},g.prototype.getPred2=function(){return pred2},g.prototype.setNext=function(e){this.next=e},g.prototype.getNext=function(){return next},g.prototype.setProcessed=function(e){this.processed=e},g.prototype.isProcessed=function(){return processed},a.exports=g},902:(a,r,n)=>{function f(c){if(Array.isArray(c)){for(var h=0,N=Array(c.length);h<c.length;h++)N[h]=c[h];return N}else return Array.from(c)}var t=n(806),g=n(551).LinkedList,i=n(551).Matrix,e=n(551).SVD;function s(){}s.handleConstraints=function(c){var h={};h.fixedNodeConstraint=c.constraints.fixedNodeConstraint,h.alignmentConstraint=c.constraints.alignmentConstraint,h.relativePlacementConstraint=c.constraints.relativePlacementConstraint;for(var N=new Map,v=new Map,y=[],L=[],R=c.getAllNodes(),M=0,S=0;S<R.length;S++){var V=R[S];V.getChild()==null&&(v.set(V.id,M++),y.push(V.getCenterX()),L.push(V.getCenterY()),N.set(V.id,V))}h.relativePlacementConstraint&&h.relativePlacementConstraint.forEach(function(U){!U.gap&&U.gap!=0&&(U.left?U.gap=t.DEFAULT_EDGE_LENGTH+N.get(U.left).getWidth()/2+N.get(U.right).getWidth()/2:U.gap=t.DEFAULT_EDGE_LENGTH+N.get(U.top).getHeight()/2+N.get(U.bottom).getHeight()/2)});var G=function(H,W){return{x:H.x-W.x,y:H.y-W.y}},it=function(H){var W=0,B=0;return H.forEach(function($){W+=y[v.get($)],B+=L[v.get($)]}),{x:W/H.size,y:B/H.size}},I=function(H,W,B,$,K){function ut(ot,rt){var dt=new Set(ot),at=!0,lt=!1,Ft=void 0;try{for(var xt=rt[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;dt.add(Dt)}}catch(Nt){lt=!0,Ft=Nt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}return dt}var ft=new Map;H.forEach(function(ot,rt){ft.set(rt,0)}),H.forEach(function(ot,rt){ot.forEach(function(dt){ft.set(dt.id,ft.get(dt.id)+1)})});var q=new Map,ht=new Map,gt=new g;ft.forEach(function(ot,rt){ot==0?(gt.push(rt),B||(W=="horizontal"?q.set(rt,v.has(rt)?y[v.get(rt)]:$.get(rt)):q.set(rt,v.has(rt)?L[v.get(rt)]:$.get(rt)))):q.set(rt,Number.NEGATIVE_INFINITY),B&&ht.set(rt,new Set([rt]))}),B&&K.forEach(function(ot){var rt=[];if(ot.forEach(function(lt){B.has(lt)&&rt.push(lt)}),rt.length>0){var dt=0;rt.forEach(function(lt){W=="horizontal"?(q.set(lt,v.has(lt)?y[v.get(lt)]:$.get(lt)),dt+=q.get(lt)):(q.set(lt,v.has(lt)?L[v.get(lt)]:$.get(lt)),dt+=q.get(lt))}),dt=dt/rt.length,ot.forEach(function(lt){B.has(lt)||q.set(lt,dt)})}else{var at=0;ot.forEach(function(lt){W=="horizontal"?at+=v.has(lt)?y[v.get(lt)]:$.get(lt):at+=v.has(lt)?L[v.get(lt)]:$.get(lt)}),at=at/ot.length,ot.forEach(function(lt){q.set(lt,at)})}});for(var et=function(){var rt=gt.shift(),dt=H.get(rt);dt.forEach(function(at){if(q.get(at.id)<q.get(rt)+at.gap)if(B&&B.has(at.id)){var lt=void 0;if(W=="horizontal"?lt=v.has(at.id)?y[v.get(at.id)]:$.get(at.id):lt=v.has(at.id)?L[v.get(at.id)]:$.get(at.id),q.set(at.id,lt),lt<q.get(rt)+at.gap){var Ft=q.get(rt)+at.gap-lt;ht.get(rt).forEach(function(xt){q.set(xt,q.get(xt)-Ft)})}}else q.set(at.id,q.get(rt)+at.gap);ft.set(at.id,ft.get(at.id)-1),ft.get(at.id)==0&&gt.push(at.id),B&&ht.set(at.id,ut(ht.get(rt),ht.get(at.id)))})};gt.length!=0;)et();if(B){var vt=new Set;H.forEach(function(ot,rt){ot.length==0&&vt.add(rt)});var At=[];ht.forEach(function(ot,rt){if(vt.has(rt)){var dt=!1,at=!0,lt=!1,Ft=void 0;try{for(var xt=ot[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;B.has(Dt)&&(dt=!0)}}catch(Rt){lt=!0,Ft=Rt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}if(!dt){var Nt=!1,$t=void 0;At.forEach(function(Rt,Xt){Rt.has([].concat(f(ot))[0])&&(Nt=!0,$t=Xt)}),Nt?ot.forEach(function(Rt){At[$t].add(Rt)}):At.push(new Set(ot))}}}),At.forEach(function(ot,rt){var dt=Number.POSITIVE_INFINITY,at=Number.POSITIVE_INFINITY,lt=Number.NEGATIVE_INFINITY,Ft=Number.NEGATIVE_INFINITY,xt=!0,Vt=!1,Dt=void 0;try{for(var Nt=ot[Symbol.iterator](),$t;!(xt=($t=Nt.next()).done);xt=!0){var Rt=$t.value,Xt=void 0;W=="horizontal"?Xt=v.has(Rt)?y[v.get(Rt)]:$.get(Rt):Xt=v.has(Rt)?L[v.get(Rt)]:$.get(Rt);var zt=q.get(Rt);Xt<dt&&(dt=Xt),Xt>lt&&(lt=Xt),zt<at&&(at=zt),zt>Ft&&(Ft=zt)}}catch(_t){Vt=!0,Dt=_t}finally{try{!xt&&Nt.return&&Nt.return()}finally{if(Vt)throw Dt}}var ge=(dt+lt)/2-(at+Ft)/2,qt=!0,Jt=!1,Kt=void 0;try{for(var Qt=ot[Symbol.iterator](),se;!(qt=(se=Qt.next()).done);qt=!0){var jt=se.value;q.set(jt,q.get(jt)+ge)}}catch(_t){Jt=!0,Kt=_t}finally{try{!qt&&Qt.return&&Qt.return()}finally{if(Jt)throw Kt}}})}return q},k=function(H){var W=0,B=0,$=0,K=0;if(H.forEach(function(ht){ht.left?y[v.get(ht.left)]-y[v.get(ht.right)]>=0?W++:B++:L[v.get(ht.top)]-L[v.get(ht.bottom)]>=0?$++:K++}),W>B&&$>K)for(var ut=0;ut<v.size;ut++)y[ut]=-1*y[ut],L[ut]=-1*L[ut];else if(W>B)for(var ft=0;ft<v.size;ft++)y[ft]=-1*y[ft];else if($>K)for(var q=0;q<v.size;q++)L[q]=-1*L[q]},l=function(H){var W=[],B=new g,$=new Set,K=0;return H.forEach(function(ut,ft){if(!$.has(ft)){W[K]=[];var q=ft;for(B.push(q),$.add(q),W[K].push(q);B.length!=0;){q=B.shift();var ht=H.get(q);ht.forEach(function(gt){$.has(gt.id)||(B.push(gt.id),$.add(gt.id),W[K].push(gt.id))})}K++}}),W},E=function(H){var W=new Map;return H.forEach(function(B,$){W.set($,[])}),H.forEach(function(B,$){B.forEach(function(K){W.get($).push(K),W.get(K.id).push({id:$,gap:K.gap,direction:K.direction})})}),W},d=function(H){var W=new Map;return H.forEach(function(B,$){W.set($,[])}),H.forEach(function(B,$){B.forEach(function(K){W.get(K.id).push({id:$,gap:K.gap,direction:K.direction})})}),W},m=[],p=[],D=!1,O=!1,F=new Set,b=new Map,x=new Map,Z=[];if(h.fixedNodeConstraint&&h.fixedNodeConstraint.forEach(function(U){F.add(U.nodeId)}),h.relativePlacementConstraint&&(h.relativePlacementConstraint.forEach(function(U){U.left?(b.has(U.left)?b.get(U.left).push({id:U.right,gap:U.gap,direction:"horizontal"}):b.set(U.left,[{id:U.right,gap:U.gap,direction:"horizontal"}]),b.has(U.right)||b.set(U.right,[])):(b.has(U.top)?b.get(U.top).push({id:U.bottom,gap:U.gap,direction:"vertical"}):b.set(U.top,[{id:U.bottom,gap:U.gap,direction:"vertical"}]),b.has(U.bottom)||b.set(U.bottom,[]))}),x=E(b),Z=l(x)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(h.fixedNodeConstraint&&h.fixedNodeConstraint.length>1)h.fixedNodeConstraint.forEach(function(U,H){m[H]=[U.position.x,U.position.y],p[H]=[y[v.get(U.nodeId)],L[v.get(U.nodeId)]]}),D=!0;else if(h.alignmentConstraint)(function(){var U=0;if(h.alignmentConstraint.vertical){for(var H=h.alignmentConstraint.vertical,W=function(q){var ht=new Set;H[q].forEach(function(vt){ht.add(vt)});var gt=new Set([].concat(f(ht)).filter(function(vt){return F.has(vt)})),et=void 0;gt.size>0?et=y[v.get(gt.values().next().value)]:et=it(ht).x,H[q].forEach(function(vt){m[U]=[et,L[v.get(vt)]],p[U]=[y[v.get(vt)],L[v.get(vt)]],U++})},B=0;B<H.length;B++)W(B);D=!0}if(h.alignmentConstraint.horizontal){for(var $=h.alignmentConstraint.horizontal,K=function(q){var ht=new Set;$[q].forEach(function(vt){ht.add(vt)});var gt=new Set([].concat(f(ht)).filter(function(vt){return F.has(vt)})),et=void 0;gt.size>0?et=y[v.get(gt.values().next().value)]:et=it(ht).y,$[q].forEach(function(vt){m[U]=[y[v.get(vt)],et],p[U]=[y[v.get(vt)],L[v.get(vt)]],U++})},ut=0;ut<$.length;ut++)K(ut);D=!0}h.relativePlacementConstraint&&(O=!0)})();else if(h.relativePlacementConstraint){for(var _=0,P=0,j=0;j<Z.length;j++)Z[j].length>_&&(_=Z[j].length,P=j);if(_<x.size/2)k(h.relativePlacementConstraint),D=!1,O=!1;else{var z=new Map,w=new Map,Y=[];Z[P].forEach(function(U){b.get(U).forEach(function(H){H.direction=="horizontal"?(z.has(U)?z.get(U).push(H):z.set(U,[H]),z.has(H.id)||z.set(H.id,[]),Y.push({left:U,right:H.id})):(w.has(U)?w.get(U).push(H):w.set(U,[H]),w.has(H.id)||w.set(H.id,[]),Y.push({top:U,bottom:H.id}))})}),k(Y),O=!1;var X=I(z,"horizontal"),J=I(w,"vertical");Z[P].forEach(function(U,H){p[H]=[y[v.get(U)],L[v.get(U)]],m[H]=[],X.has(U)?m[H][0]=X.get(U):m[H][0]=y[v.get(U)],J.has(U)?m[H][1]=J.get(U):m[H][1]=L[v.get(U)]}),D=!0}}if(D){for(var st=void 0,Lt=i.transpose(m),St=i.transpose(p),Q=0;Q<Lt.length;Q++)Lt[Q]=i.multGamma(Lt[Q]),St[Q]=i.multGamma(St[Q]);var Ut=i.multMat(Lt,i.transpose(St)),wt=e.svd(Ut);st=i.multMat(wt.V,i.transpose(wt.U));for(var nt=0;nt<v.size;nt++){var tt=[y[nt],L[nt]],pt=[st[0][0],st[1][0]],Et=[st[0][1],st[1][1]];y[nt]=i.dotProduct(tt,pt),L[nt]=i.dotProduct(tt,Et)}O&&k(h.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(h.fixedNodeConstraint&&h.fixedNodeConstraint.length>0){var Ct={x:0,y:0};h.fixedNodeConstraint.forEach(function(U,H){var W={x:y[v.get(U.nodeId)],y:L[v.get(U.nodeId)]},B=U.position,$=G(B,W);Ct.x+=$.x,Ct.y+=$.y}),Ct.x/=h.fixedNodeConstraint.length,Ct.y/=h.fixedNodeConstraint.length,y.forEach(function(U,H){y[H]+=Ct.x}),L.forEach(function(U,H){L[H]+=Ct.y}),h.fixedNodeConstraint.forEach(function(U){y[v.get(U.nodeId)]=U.position.x,L[v.get(U.nodeId)]=U.position.y})}if(h.alignmentConstraint){if(h.alignmentConstraint.vertical)for(var mt=h.alignmentConstraint.vertical,Tt=function(H){var W=new Set;mt[H].forEach(function(K){W.add(K)});var B=new Set([].concat(f(W)).filter(function(K){return F.has(K)})),$=void 0;B.size>0?$=y[v.get(B.values().next().value)]:$=it(W).x,W.forEach(function(K){F.has(K)||(y[v.get(K)]=$)})},Ot=0;Ot<mt.length;Ot++)Tt(Ot);if(h.alignmentConstraint.horizontal)for(var It=h.alignmentConstraint.horizontal,Wt=function(H){var W=new Set;It[H].forEach(function(K){W.add(K)});var B=new Set([].concat(f(W)).filter(function(K){return F.has(K)})),$=void 0;B.size>0?$=L[v.get(B.values().next().value)]:$=it(W).y,W.forEach(function(K){F.has(K)||(L[v.get(K)]=$)})},Pt=0;Pt<It.length;Pt++)Wt(Pt)}h.relativePlacementConstraint&&function(){var U=new Map,H=new Map,W=new Map,B=new Map,$=new Map,K=new Map,ut=new Set,ft=new Set;if(F.forEach(function(Gt){ut.add(Gt),ft.add(Gt)}),h.alignmentConstraint){if(h.alignmentConstraint.vertical)for(var q=h.alignmentConstraint.vertical,ht=function(yt){W.set("dummy"+yt,[]),q[yt].forEach(function(Mt){U.set(Mt,"dummy"+yt),W.get("dummy"+yt).push(Mt),F.has(Mt)&&ut.add("dummy"+yt)}),$.set("dummy"+yt,y[v.get(q[yt][0])])},gt=0;gt<q.length;gt++)ht(gt);if(h.alignmentConstraint.horizontal)for(var et=h.alignmentConstraint.horizontal,vt=function(yt){B.set("dummy"+yt,[]),et[yt].forEach(function(Mt){H.set(Mt,"dummy"+yt),B.get("dummy"+yt).push(Mt),F.has(Mt)&&ft.add("dummy"+yt)}),K.set("dummy"+yt,L[v.get(et[yt][0])])},At=0;At<et.length;At++)vt(At)}var ot=new Map,rt=new Map,dt=function(yt){b.get(yt).forEach(function(Mt){var Zt=void 0,Bt=void 0;Mt.direction=="horizontal"?(Zt=U.get(yt)?U.get(yt):yt,U.get(Mt.id)?Bt={id:U.get(Mt.id),gap:Mt.gap,direction:Mt.direction}:Bt=Mt,ot.has(Zt)?ot.get(Zt).push(Bt):ot.set(Zt,[Bt]),ot.has(Bt.id)||ot.set(Bt.id,[])):(Zt=H.get(yt)?H.get(yt):yt,H.get(Mt.id)?Bt={id:H.get(Mt.id),gap:Mt.gap,direction:Mt.direction}:Bt=Mt,rt.has(Zt)?rt.get(Zt).push(Bt):rt.set(Zt,[Bt]),rt.has(Bt.id)||rt.set(Bt.id,[]))})},at=!0,lt=!1,Ft=void 0;try{for(var xt=b.keys()[Symbol.iterator](),Vt;!(at=(Vt=xt.next()).done);at=!0){var Dt=Vt.value;dt(Dt)}}catch(Gt){lt=!0,Ft=Gt}finally{try{!at&&xt.return&&xt.return()}finally{if(lt)throw Ft}}var Nt=E(ot),$t=E(rt),Rt=l(Nt),Xt=l($t),zt=d(ot),ge=d(rt),qt=[],Jt=[];Rt.forEach(function(Gt,yt){qt[yt]=[],Gt.forEach(function(Mt){zt.get(Mt).length==0&&qt[yt].push(Mt)})}),Xt.forEach(function(Gt,yt){Jt[yt]=[],Gt.forEach(function(Mt){ge.get(Mt).length==0&&Jt[yt].push(Mt)})});var Kt=I(ot,"horizontal",ut,$,qt),Qt=I(rt,"vertical",ft,K,Jt),se=function(yt){W.get(yt)?W.get(yt).forEach(function(Mt){y[v.get(Mt)]=Kt.get(yt)}):y[v.get(yt)]=Kt.get(yt)},jt=!0,_t=!1,Oe=void 0;try{for(var ue=Kt.keys()[Symbol.iterator](),De;!(jt=(De=ue.next()).done);jt=!0){var de=De.value;se(de)}}catch(Gt){_t=!0,Oe=Gt}finally{try{!jt&&ue.return&&ue.return()}finally{if(_t)throw Oe}}var ur=function(yt){B.get(yt)?B.get(yt).forEach(function(Mt){L[v.get(Mt)]=Qt.get(yt)}):L[v.get(yt)]=Qt.get(yt)},ve=!0,xe=!1,Ie=void 0;try{for(var pe=Qt.keys()[Symbol.iterator](),Re;!(ve=(Re=pe.next()).done);ve=!0){var de=Re.value;ur(de)}}catch(Gt){xe=!0,Ie=Gt}finally{try{!ve&&pe.return&&pe.return()}finally{if(xe)throw Ie}}}()}for(var Yt=0;Yt<R.length;Yt++){var bt=R[Yt];bt.getChild()==null&&bt.setCenter(y[v.get(bt.id)],L[v.get(bt.id)])}},a.exports=s},551:a=>{a.exports=C}},T={};function u(a){var r=T[a];if(r!==void 0)return r.exports;var n=T[a]={exports:{}};return A[a](n,n.exports,u),n.exports}var o=u(45);return o})()})});var Ke=ye((ne,Ae)=>{(function(A,T){typeof ne=="object"&&typeof Ae=="object"?Ae.exports=T(Ce()):typeof define=="function"&&define.amd?define(["cose-base"],T):typeof ne=="object"?ne.cytoscapeFcose=T(Ce()):A.cytoscapeFcose=T(A.coseBase)})(ne,function(C){return(()=>{"use strict";var A={658:a=>{a.exports=Object.assign!=null?Object.assign.bind(Object):function(r){for(var n=arguments.length,f=Array(n>1?n-1:0),t=1;t<n;t++)f[t-1]=arguments[t];return f.forEach(function(g){Object.keys(g).forEach(function(i){return r[i]=g[i]})}),r}},548:(a,r,n)=>{var f=function(){function i(e,s){var c=[],h=!0,N=!1,v=void 0;try{for(var y=e[Symbol.iterator](),L;!(h=(L=y.next()).done)&&(c.push(L.value),!(s&&c.length===s));h=!0);}catch(R){N=!0,v=R}finally{try{!h&&y.return&&y.return()}finally{if(N)throw v}}return c}return function(e,s){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return i(e,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=n(140).layoutBase.LinkedList,g={};g.getTopMostNodes=function(i){for(var e={},s=0;s<i.length;s++)e[i[s].id()]=!0;var c=i.filter(function(h,N){typeof h=="number"&&(h=N);for(var v=h.parent()[0];v!=null;){if(e[v.id()])return!1;v=v.parent()[0]}return!0});return c},g.connectComponents=function(i,e,s,c){var h=new t,N=new Set,v=[],y=void 0,L=void 0,R=void 0,M=!1,S=1,V=[],G=[],it=function(){var k=i.collection();G.push(k);var l=s[0],E=i.collection();E.merge(l).merge(l.descendants().intersection(e)),v.push(l),E.forEach(function(p){h.push(p),N.add(p),k.merge(p)});for(var d=function(){l=h.shift();var D=i.collection();l.neighborhood().nodes().forEach(function(x){e.intersection(l.edgesWith(x)).length>0&&D.merge(x)});for(var O=0;O<D.length;O++){var F=D[O];if(y=s.intersection(F.union(F.ancestors())),y!=null&&!N.has(y[0])){var b=y.union(y.descendants());b.forEach(function(x){h.push(x),N.add(x),k.merge(x),s.has(x)&&v.push(x)})}}};h.length!=0;)d();if(k.forEach(function(p){e.intersection(p.connectedEdges()).forEach(function(D){k.has(D.source())&&k.has(D.target())&&k.merge(D)})}),v.length==s.length&&(M=!0),!M||M&&S>1){L=v[0],R=L.connectedEdges().length,v.forEach(function(p){p.connectedEdges().length<R&&(R=p.connectedEdges().length,L=p)}),V.push(L.id());var m=i.collection();m.merge(v[0]),v.forEach(function(p){m.merge(p)}),v=[],s=s.difference(m),S++}};do it();while(!M);return c&&V.length>0&&c.set("dummy"+(c.size+1),V),G},g.relocateComponent=function(i,e,s){if(!s.fixedNodeConstraint){var c=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;if(s.quality=="draft"){var y=!0,L=!1,R=void 0;try{for(var M=e.nodeIndexes[Symbol.iterator](),S;!(y=(S=M.next()).done);y=!0){var V=S.value,G=f(V,2),it=G[0],I=G[1],k=s.cy.getElementById(it);if(k){var l=k.boundingBox(),E=e.xCoords[I]-l.w/2,d=e.xCoords[I]+l.w/2,m=e.yCoords[I]-l.h/2,p=e.yCoords[I]+l.h/2;E<c&&(c=E),d>h&&(h=d),m<N&&(N=m),p>v&&(v=p)}}}catch(x){L=!0,R=x}finally{try{!y&&M.return&&M.return()}finally{if(L)throw R}}var D=i.x-(h+c)/2,O=i.y-(v+N)/2;e.xCoords=e.xCoords.map(function(x){return x+D}),e.yCoords=e.yCoords.map(function(x){return x+O})}else{Object.keys(e).forEach(function(x){var Z=e[x],_=Z.getRect().x,P=Z.getRect().x+Z.getRect().width,j=Z.getRect().y,z=Z.getRect().y+Z.getRect().height;_<c&&(c=_),P>h&&(h=P),j<N&&(N=j),z>v&&(v=z)});var F=i.x-(h+c)/2,b=i.y-(v+N)/2;Object.keys(e).forEach(function(x){var Z=e[x];Z.setCenter(Z.getCenterX()+F,Z.getCenterY()+b)})}}},g.calcBoundingBox=function(i,e,s,c){for(var h=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,v=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,L=void 0,R=void 0,M=void 0,S=void 0,V=i.descendants().not(":parent"),G=V.length,it=0;it<G;it++){var I=V[it];L=e[c.get(I.id())]-I.width()/2,R=e[c.get(I.id())]+I.width()/2,M=s[c.get(I.id())]-I.height()/2,S=s[c.get(I.id())]+I.height()/2,h>L&&(h=L),N<R&&(N=R),v>M&&(v=M),y<S&&(y=S)}var k={};return k.topLeftX=h,k.topLeftY=v,k.width=N-h,k.height=y-v,k},g.calcParentsWithoutChildren=function(i,e){var s=i.collection();return e.nodes(":parent").forEach(function(c){var h=!1;c.children().forEach(function(N){N.css("display")!="none"&&(h=!0)}),h||s.merge(c)}),s},a.exports=g},816:(a,r,n)=>{var f=n(548),t=n(140).CoSELayout,g=n(140).CoSENode,i=n(140).layoutBase.PointD,e=n(140).layoutBase.DimensionD,s=n(140).layoutBase.LayoutConstants,c=n(140).layoutBase.FDLayoutConstants,h=n(140).CoSEConstants,N=function(y,L){var R=y.cy,M=y.eles,S=M.nodes(),V=M.edges(),G=void 0,it=void 0,I=void 0,k={};y.randomize&&(G=L.nodeIndexes,it=L.xCoords,I=L.yCoords);var l=function(x){return typeof x=="function"},E=function(x,Z){return l(x)?x(Z):x},d=f.calcParentsWithoutChildren(R,M),m=function b(x,Z,_,P){for(var j=Z.length,z=0;z<j;z++){var w=Z[z],Y=null;w.intersection(d).length==0&&(Y=w.children());var X=void 0,J=w.layoutDimensions({nodeDimensionsIncludeLabels:P.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null)if(P.randomize)if(!w.isParent())X=x.add(new g(_.graphManager,new i(it[G.get(w.id())]-J.w/2,I[G.get(w.id())]-J.h/2),new e(parseFloat(J.w),parseFloat(J.h))));else{var st=f.calcBoundingBox(w,it,I,G);w.intersection(d).length==0?X=x.add(new g(_.graphManager,new i(st.topLeftX,st.topLeftY),new e(st.width,st.height))):X=x.add(new g(_.graphManager,new i(st.topLeftX,st.topLeftY),new e(parseFloat(J.w),parseFloat(J.h))))}else X=x.add(new g(_.graphManager,new i(w.position("x")-J.w/2,w.position("y")-J.h/2),new e(parseFloat(J.w),parseFloat(J.h))));else X=x.add(new g(this.graphManager));if(X.id=w.data("id"),X.nodeRepulsion=E(P.nodeRepulsion,w),X.paddingLeft=parseInt(w.css("padding")),X.paddingTop=parseInt(w.css("padding")),X.paddingRight=parseInt(w.css("padding")),X.paddingBottom=parseInt(w.css("padding")),P.nodeDimensionsIncludeLabels&&(X.labelWidth=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,X.labelHeight=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,X.labelPosVertical=w.css("text-valign"),X.labelPosHorizontal=w.css("text-halign")),k[w.data("id")]=X,isNaN(X.rect.x)&&(X.rect.x=0),isNaN(X.rect.y)&&(X.rect.y=0),Y!=null&&Y.length>0){var Lt=void 0;Lt=_.getGraphManager().add(_.newGraph(),X),b(Lt,Y,_,P)}}},p=function(x,Z,_){for(var P=0,j=0,z=0;z<_.length;z++){var w=_[z],Y=k[w.data("source")],X=k[w.data("target")];if(Y&&X&&Y!==X&&Y.getEdgesBetween(X).length==0){var J=Z.add(x.newEdge(),Y,X);J.id=w.id(),J.idealLength=E(y.idealEdgeLength,w),J.edgeElasticity=E(y.edgeElasticity,w),P+=J.idealLength,j++}}y.idealEdgeLength!=null&&(j>0?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=P/j:l(y.idealEdgeLength)?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=y.idealEdgeLength,h.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)},D=function(x,Z){Z.fixedNodeConstraint&&(x.constraints.fixedNodeConstraint=Z.fixedNodeConstraint),Z.alignmentConstraint&&(x.constraints.alignmentConstraint=Z.alignmentConstraint),Z.relativePlacementConstraint&&(x.constraints.relativePlacementConstraint=Z.relativePlacementConstraint)};y.nestingFactor!=null&&(h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=y.nestingFactor),y.gravity!=null&&(h.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=y.gravity),y.numIter!=null&&(h.MAX_ITERATIONS=c.MAX_ITERATIONS=y.numIter),y.gravityRange!=null&&(h.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=y.gravityRange),y.gravityCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=y.gravityCompound),y.gravityRangeCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=y.gravityRangeCompound),y.initialEnergyOnIncremental!=null&&(h.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=y.initialEnergyOnIncremental),y.tilingCompareBy!=null&&(h.TILING_COMPARE_BY=y.tilingCompareBy),y.quality=="proof"?s.QUALITY=2:s.QUALITY=0,h.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=y.nodeDimensionsIncludeLabels,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!y.randomize,h.ANIMATE=c.ANIMATE=s.ANIMATE=y.animate,h.TILE=y.tile,h.TILING_PADDING_VERTICAL=typeof y.tilingPaddingVertical=="function"?y.tilingPaddingVertical.call():y.tilingPaddingVertical,h.TILING_PADDING_HORIZONTAL=typeof y.tilingPaddingHorizontal=="function"?y.tilingPaddingHorizontal.call():y.tilingPaddingHorizontal,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!0,h.PURE_INCREMENTAL=!y.randomize,s.DEFAULT_UNIFORM_LEAF_NODE_SIZES=y.uniformNodeDimensions,y.step=="transformed"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!1),y.step=="enforced"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!1),y.step=="cose"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!0),y.step=="all"&&(y.randomize?h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0),y.fixedNodeConstraint||y.alignmentConstraint||y.relativePlacementConstraint?h.TREE_REDUCTION_ON_INCREMENTAL=!1:h.TREE_REDUCTION_ON_INCREMENTAL=!0;var O=new t,F=O.newGraphManager();return m(F.addRoot(),f.getTopMostNodes(S),O,y),p(O,F,V),D(O,y),O.runLayout(),k};a.exports={coseLayout:N}},212:(a,r,n)=>{var f=function(){function y(L,R){for(var M=0;M<R.length;M++){var S=R[M];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,S.key,S)}}return function(L,R,M){return R&&y(L.prototype,R),M&&y(L,M),L}}();function t(y,L){if(!(y instanceof L))throw new TypeError("Cannot call a class as a function")}var g=n(658),i=n(548),e=n(657),s=e.spectralLayout,c=n(816),h=c.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(L){return 4500},idealEdgeLength:function(L){return 50},edgeElasticity:function(L){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),v=function(){function y(L){t(this,y),this.options=g({},N,L)}return f(y,[{key:"run",value:function(){var R=this,M=this.options,S=M.cy,V=M.eles,G=[],it=void 0,I=void 0,k=[],l=void 0,E=[];M.fixedNodeConstraint&&(!Array.isArray(M.fixedNodeConstraint)||M.fixedNodeConstraint.length==0)&&(M.fixedNodeConstraint=void 0),M.alignmentConstraint&&(M.alignmentConstraint.vertical&&(!Array.isArray(M.alignmentConstraint.vertical)||M.alignmentConstraint.vertical.length==0)&&(M.alignmentConstraint.vertical=void 0),M.alignmentConstraint.horizontal&&(!Array.isArray(M.alignmentConstraint.horizontal)||M.alignmentConstraint.horizontal.length==0)&&(M.alignmentConstraint.horizontal=void 0)),M.relativePlacementConstraint&&(!Array.isArray(M.relativePlacementConstraint)||M.relativePlacementConstraint.length==0)&&(M.relativePlacementConstraint=void 0);var d=M.fixedNodeConstraint||M.alignmentConstraint||M.relativePlacementConstraint;d&&(M.tile=!1,M.packComponents=!1);var m=void 0,p=!1;if(S.layoutUtilities&&M.packComponents&&(m=S.layoutUtilities("get"),m||(m=S.layoutUtilities()),p=!0),V.nodes().length>0)if(p){var F=i.getTopMostNodes(M.eles.nodes());if(l=i.connectComponents(S,M.eles,F),l.forEach(function(nt){var tt=nt.boundingBox();E.push({x:tt.x1+tt.w/2,y:tt.y1+tt.h/2})}),M.randomize&&l.forEach(function(nt){M.eles=nt,G.push(s(M))}),M.quality=="default"||M.quality=="proof"){var b=S.collection();if(M.tile){var x=new Map,Z=[],_=[],P=0,j={nodeIndexes:x,xCoords:Z,yCoords:_},z=[];if(l.forEach(function(nt,tt){nt.edges().length==0&&(nt.nodes().forEach(function(pt,Et){b.merge(nt.nodes()[Et]),pt.isParent()||(j.nodeIndexes.set(nt.nodes()[Et].id(),P++),j.xCoords.push(nt.nodes()[0].position().x),j.yCoords.push(nt.nodes()[0].position().y))}),z.push(tt))}),b.length>1){var w=b.boundingBox();E.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),l.push(b),G.push(j);for(var Y=z.length-1;Y>=0;Y--)l.splice(z[Y],1),G.splice(z[Y],1),E.splice(z[Y],1)}}l.forEach(function(nt,tt){M.eles=nt,k.push(h(M,G[tt])),i.relocateComponent(E[tt],k[tt],M)})}else l.forEach(function(nt,tt){i.relocateComponent(E[tt],G[tt],M)});var X=new Set;if(l.length>1){var J=[],st=V.filter(function(nt){return nt.css("display")=="none"});l.forEach(function(nt,tt){var pt=void 0;if(M.quality=="draft"&&(pt=G[tt].nodeIndexes),nt.nodes().not(st).length>0){var Et={};Et.edges=[],Et.nodes=[];var Ct=void 0;nt.nodes().not(st).forEach(function(mt){if(M.quality=="draft")if(!mt.isParent())Ct=pt.get(mt.id()),Et.nodes.push({x:G[tt].xCoords[Ct]-mt.boundingbox().w/2,y:G[tt].yCoords[Ct]-mt.boundingbox().h/2,width:mt.boundingbox().w,height:mt.boundingbox().h});else{var Tt=i.calcBoundingBox(mt,G[tt].xCoords,G[tt].yCoords,pt);Et.nodes.push({x:Tt.topLeftX,y:Tt.topLeftY,width:Tt.width,height:Tt.height})}else k[tt][mt.id()]&&Et.nodes.push({x:k[tt][mt.id()].getLeft(),y:k[tt][mt.id()].getTop(),width:k[tt][mt.id()].getWidth(),height:k[tt][mt.id()].getHeight()})}),nt.edges().forEach(function(mt){var Tt=mt.source(),Ot=mt.target();if(Tt.css("display")!="none"&&Ot.css("display")!="none")if(M.quality=="draft"){var It=pt.get(Tt.id()),Wt=pt.get(Ot.id()),Pt=[],Yt=[];if(Tt.isParent()){var bt=i.calcBoundingBox(Tt,G[tt].xCoords,G[tt].yCoords,pt);Pt.push(bt.topLeftX+bt.width/2),Pt.push(bt.topLeftY+bt.height/2)}else Pt.push(G[tt].xCoords[It]),Pt.push(G[tt].yCoords[It]);if(Ot.isParent()){var U=i.calcBoundingBox(Ot,G[tt].xCoords,G[tt].yCoords,pt);Yt.push(U.topLeftX+U.width/2),Yt.push(U.topLeftY+U.height/2)}else Yt.push(G[tt].xCoords[Wt]),Yt.push(G[tt].yCoords[Wt]);Et.edges.push({startX:Pt[0],startY:Pt[1],endX:Yt[0],endY:Yt[1]})}else k[tt][Tt.id()]&&k[tt][Ot.id()]&&Et.edges.push({startX:k[tt][Tt.id()].getCenterX(),startY:k[tt][Tt.id()].getCenterY(),endX:k[tt][Ot.id()].getCenterX(),endY:k[tt][Ot.id()].getCenterY()})}),Et.nodes.length>0&&(J.push(Et),X.add(tt))}});var Lt=m.packComponents(J,M.randomize).shifts;if(M.quality=="draft")G.forEach(function(nt,tt){var pt=nt.xCoords.map(function(Ct){return Ct+Lt[tt].dx}),Et=nt.yCoords.map(function(Ct){return Ct+Lt[tt].dy});nt.xCoords=pt,nt.yCoords=Et});else{var St=0;X.forEach(function(nt){Object.keys(k[nt]).forEach(function(tt){var pt=k[nt][tt];pt.setCenter(pt.getCenterX()+Lt[St].dx,pt.getCenterY()+Lt[St].dy)}),St++})}}}else{var D=M.eles.boundingBox();if(E.push({x:D.x1+D.w/2,y:D.y1+D.h/2}),M.randomize){var O=s(M);G.push(O)}M.quality=="default"||M.quality=="proof"?(k.push(h(M,G[0])),i.relocateComponent(E[0],k[0],M)):i.relocateComponent(E[0],G[0],M)}var Q=function(tt,pt){if(M.quality=="default"||M.quality=="proof"){typeof tt=="number"&&(tt=pt);var Et=void 0,Ct=void 0,mt=tt.data("id");return k.forEach(function(Ot){mt in Ot&&(Et={x:Ot[mt].getRect().getCenterX(),y:Ot[mt].getRect().getCenterY()},Ct=Ot[mt])}),M.nodeDimensionsIncludeLabels&&(Ct.labelWidth&&(Ct.labelPosHorizontal=="left"?Et.x+=Ct.labelWidth/2:Ct.labelPosHorizontal=="right"&&(Et.x-=Ct.labelWidth/2)),Ct.labelHeight&&(Ct.labelPosVertical=="top"?Et.y+=Ct.labelHeight/2:Ct.labelPosVertical=="bottom"&&(Et.y-=Ct.labelHeight/2))),Et==null&&(Et={x:tt.position("x"),y:tt.position("y")}),{x:Et.x,y:Et.y}}else{var Tt=void 0;return G.forEach(function(Ot){var It=Ot.nodeIndexes.get(tt.id());It!=null&&(Tt={x:Ot.xCoords[It],y:Ot.yCoords[It]})}),Tt==null&&(Tt={x:tt.position("x"),y:tt.position("y")}),{x:Tt.x,y:Tt.y}}};if(M.quality=="default"||M.quality=="proof"||M.randomize){var Ut=i.calcParentsWithoutChildren(S,V),wt=V.filter(function(nt){return nt.css("display")=="none"});M.eles=V.not(wt),V.nodes().not(":parent").not(wt).layoutPositions(R,M,Q),Ut.length>0&&Ut.forEach(function(nt){nt.position(Q(nt))})}}}]),y}();a.exports=v},657:(a,r,n)=>{var f=n(548),t=n(140).layoutBase.Matrix,g=n(140).layoutBase.SVD,i=function(s){var c=s.cy,h=s.eles,N=h.nodes(),v=h.nodes(":parent"),y=new Map,L=new Map,R=new Map,M=[],S=[],V=[],G=[],it=[],I=[],k=[],l=[],E=void 0,d=void 0,m=1e8,p=1e-9,D=s.piTol,O=s.samplingType,F=s.nodeSeparation,b=void 0,x=function(){for(var W=0,B=0,$=!1;B<b;){W=Math.floor(Math.random()*d),$=!1;for(var K=0;K<B;K++)if(G[K]==W){$=!0;break}if(!$)G[B]=W,B++;else continue}},Z=function(W,B,$){for(var K=[],ut=0,ft=0,q=0,ht=void 0,gt=[],et=0,vt=1,At=0;At<d;At++)gt[At]=m;for(K[ft]=W,gt[W]=0;ft>=ut;){q=K[ut++];for(var ot=M[q],rt=0;rt<ot.length;rt++)ht=L.get(ot[rt]),gt[ht]==m&&(gt[ht]=gt[q]+1,K[++ft]=ht);I[q][B]=gt[q]*F}if($){for(var dt=0;dt<d;dt++)I[dt][B]<it[dt]&&(it[dt]=I[dt][B]);for(var at=0;at<d;at++)it[at]>et&&(et=it[at],vt=at)}return vt},_=function(W){var B=void 0;if(W){B=Math.floor(Math.random()*d),E=B;for(var K=0;K<d;K++)it[K]=m;for(var ut=0;ut<b;ut++)G[ut]=B,B=Z(B,ut,W)}else{x();for(var $=0;$<b;$++)Z(G[$],$,W,!1)}for(var ft=0;ft<d;ft++)for(var q=0;q<b;q++)I[ft][q]*=I[ft][q];for(var ht=0;ht<b;ht++)k[ht]=[];for(var gt=0;gt<b;gt++)for(var et=0;et<b;et++)k[gt][et]=I[G[et]][gt]},P=function(){for(var W=g.svd(k),B=W.S,$=W.U,K=W.V,ut=B[0]*B[0]*B[0],ft=[],q=0;q<b;q++){ft[q]=[];for(var ht=0;ht<b;ht++)ft[q][ht]=0,q==ht&&(ft[q][ht]=B[q]/(B[q]*B[q]+ut/(B[q]*B[q])))}l=t.multMat(t.multMat(K,ft),t.transpose($))},j=function(){for(var W=void 0,B=void 0,$=[],K=[],ut=[],ft=[],q=0;q<d;q++)$[q]=Math.random(),K[q]=Math.random();$=t.normalize($),K=t.normalize(K);for(var ht=0,gt=p,et=p,vt=void 0;;){ht++;for(var At=0;At<d;At++)ut[At]=$[At];if($=t.multGamma(t.multL(t.multGamma(ut),I,l)),W=t.dotProduct(ut,$),$=t.normalize($),gt=t.dotProduct(ut,$),vt=Math.abs(gt/et),vt<=1+D&&vt>=1)break;et=gt}for(var ot=0;ot<d;ot++)ut[ot]=$[ot];for(ht=0,et=p;;){ht++;for(var rt=0;rt<d;rt++)ft[rt]=K[rt];if(ft=t.minusOp(ft,t.multCons(ut,t.dotProduct(ut,ft))),K=t.multGamma(t.multL(t.multGamma(ft),I,l)),B=t.dotProduct(ft,K),K=t.normalize(K),gt=t.dotProduct(ft,K),vt=Math.abs(gt/et),vt<=1+D&&vt>=1)break;et=gt}for(var dt=0;dt<d;dt++)ft[dt]=K[dt];S=t.multCons(ut,Math.sqrt(Math.abs(W))),V=t.multCons(ft,Math.sqrt(Math.abs(B)))};f.connectComponents(c,h,f.getTopMostNodes(N),y),v.forEach(function(H){f.connectComponents(c,h,f.getTopMostNodes(H.descendants().intersection(h)),y)});for(var z=0,w=0;w<N.length;w++)N[w].isParent()||L.set(N[w].id(),z++);var Y=!0,X=!1,J=void 0;try{for(var st=y.keys()[Symbol.iterator](),Lt;!(Y=(Lt=st.next()).done);Y=!0){var St=Lt.value;L.set(St,z++)}}catch(H){X=!0,J=H}finally{try{!Y&&st.return&&st.return()}finally{if(X)throw J}}for(var Q=0;Q<L.size;Q++)M[Q]=[];v.forEach(function(H){for(var W=H.children().intersection(h);W.nodes(":childless").length==0;)W=W.nodes()[0].children().intersection(h);var B=0,$=W.nodes(":childless")[0].connectedEdges().length;W.nodes(":childless").forEach(function(K,ut){K.connectedEdges().length<$&&($=K.connectedEdges().length,B=ut)}),R.set(H.id(),W.nodes(":childless")[B].id())}),N.forEach(function(H){var W=void 0;H.isParent()?W=L.get(R.get(H.id())):W=L.get(H.id()),H.neighborhood().nodes().forEach(function(B){h.intersection(H.edgesWith(B)).length>0&&(B.isParent()?M[W].push(R.get(B.id())):M[W].push(B.id()))})});var Ut=function(W){var B=L.get(W),$=void 0;y.get(W).forEach(function(K){c.getElementById(K).isParent()?$=R.get(K):$=K,M[B].push($),M[L.get($)].push(W)})},wt=!0,nt=!1,tt=void 0;try{for(var pt=y.keys()[Symbol.iterator](),Et;!(wt=(Et=pt.next()).done);wt=!0){var Ct=Et.value;Ut(Ct)}}catch(H){nt=!0,tt=H}finally{try{!wt&&pt.return&&pt.return()}finally{if(nt)throw tt}}d=L.size;var mt=void 0;if(d>2){b=d<s.sampleSize?d:s.sampleSize;for(var Tt=0;Tt<d;Tt++)I[Tt]=[];for(var Ot=0;Ot<b;Ot++)l[Ot]=[];return s.quality=="draft"||s.step=="all"?(_(O),P(),j(),mt={nodeIndexes:L,xCoords:S,yCoords:V}):(L.forEach(function(H,W){S.push(c.getElementById(W).position("x")),V.push(c.getElementById(W).position("y"))}),mt={nodeIndexes:L,xCoords:S,yCoords:V}),mt}else{var It=L.keys(),Wt=c.getElementById(It.next().value),Pt=Wt.position(),Yt=Wt.outerWidth();if(S.push(Pt.x),V.push(Pt.y),d==2){var bt=c.getElementById(It.next().value),U=bt.outerWidth();S.push(Pt.x+Yt/2+U/2+s.idealEdgeLength),V.push(Pt.y)}return mt={nodeIndexes:L,xCoords:S,yCoords:V},mt}};a.exports={spectralLayout:i}},579:(a,r,n)=>{var f=n(212),t=function(i){i&&i("layout","fcose",f)};typeof cytoscape<"u"&&t(cytoscape),a.exports=t},140:a=>{a.exports=C}},T={};function u(a){var r=T[a];if(r!==void 0)return r.exports;var n=T[a]={exports:{}};return A[a](n,n.exports,u),n.exports}var o=u(579);return o})()})});var ar=dr(Ke(),1);var je={L:"left",R:"right",T:"top",B:"bottom"},_e={L:ct(C=>`${C},${C/2} 0,${C} 0,0`,"L"),R:ct(C=>`0,${C/2} ${C},0 ${C},${C}`,"R"),T:ct(C=>`0,0 ${C},0 ${C/2},${C}`,"T"),B:ct(C=>`${C/2},0 ${C},${C} 0,${C}`,"B")},ce={L:ct((C,A)=>C-A+2,"L"),R:ct((C,A)=>C-2,"R"),T:ct((C,A)=>C-A+2,"T"),B:ct((C,A)=>C-2,"B")},vr=ct(function(C){return Ht(C)?C==="L"?"R":"L":C==="T"?"B":"T"},"getOppositeArchitectureDirection"),tr=ct(function(C){let A=C;return A==="L"||A==="R"||A==="T"||A==="B"},"isArchitectureDirection"),Ht=ct(function(C){let A=C;return A==="L"||A==="R"},"isArchitectureDirectionX"),kt=ct(function(C){let A=C;return A==="T"||A==="B"},"isArchitectureDirectionY"),we=ct(function(C,A){let T=Ht(C)&&kt(A),u=kt(C)&&Ht(A);return T||u},"isArchitectureDirectionXY"),pr=ct(function(C){let A=C[0],T=C[1],u=Ht(A)&&kt(T),o=kt(A)&&Ht(T);return u||o},"isArchitecturePairXY"),yr=ct(function(C){return C!=="LL"&&C!=="RR"&&C!=="TT"&&C!=="BB"},"isValidArchitectureDirectionPair"),Me=ct(function(C,A){let T=`${C}${A}`;return yr(T)?T:void 0},"getArchitectureDirectionPair"),Er=ct(function([C,A],T){let u=T[0],o=T[1];return Ht(u)?kt(o)?[C+(u==="L"?-1:1),A+(o==="T"?1:-1)]:[C+(u==="L"?-1:1),A]:Ht(o)?[C+(o==="L"?1:-1),A+(u==="T"?1:-1)]:[C,A+(u==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),mr=ct(function(C){return C==="LT"||C==="TL"?[1,1]:C==="BL"||C==="LB"?[1,-1]:C==="BR"||C==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),Tr=ct(function(C,A){return we(C,A)?"bend":Ht(C)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),Nr=ct(function(C){return C.type==="service"},"isArchitectureService"),Lr=ct(function(C){return C.type==="junction"},"isArchitectureJunction"),er=ct(C=>C.data(),"edgeData"),ee=ct(C=>C.data(),"nodeData"),Cr=Se.architecture,re,rr=(re=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=Ue,this.getAccTitle=Ye,this.setDiagramTitle=We,this.getDiagramTitle=Ve,this.getAccDescription=He,this.setAccDescription=Xe,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},Ge()}addService({id:A,icon:T,in:u,title:o,iconText:a}){if(this.registeredIds[A]!==void 0)throw new Error(`The service id [${A}] is already in use by another ${this.registeredIds[A]}`);if(u!==void 0){if(A===u)throw new Error(`The service [${A}] cannot be placed within itself`);if(this.registeredIds[u]===void 0)throw new Error(`The service [${A}]'s parent does not exist. Please make sure the parent is created before this service`);if(this.registeredIds[u]==="node")throw new Error(`The service [${A}]'s parent is not a group`)}this.registeredIds[A]="node",this.nodes[A]={id:A,type:"service",icon:T,iconText:a,title:o,edges:[],in:u}}getServices(){return Object.values(this.nodes).filter(Nr)}addJunction({id:A,in:T}){this.registeredIds[A]="node",this.nodes[A]={id:A,type:"junction",edges:[],in:T}}getJunctions(){return Object.values(this.nodes).filter(Lr)}getNodes(){return Object.values(this.nodes)}getNode(A){return this.nodes[A]??null}addGroup({id:A,icon:T,in:u,title:o}){var a,r,n;if(((a=this.registeredIds)==null?void 0:a[A])!==void 0)throw new Error(`The group id [${A}] is already in use by another ${this.registeredIds[A]}`);if(u!==void 0){if(A===u)throw new Error(`The group [${A}] cannot be placed within itself`);if(((r=this.registeredIds)==null?void 0:r[u])===void 0)throw new Error(`The group [${A}]'s parent does not exist. Please make sure the parent is created before this group`);if(((n=this.registeredIds)==null?void 0:n[u])==="node")throw new Error(`The group [${A}]'s parent is not a group`)}this.registeredIds[A]="group",this.groups[A]={id:A,icon:T,title:o,in:u}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:A,rhsId:T,lhsDir:u,rhsDir:o,lhsInto:a,rhsInto:r,lhsGroup:n,rhsGroup:f,title:t}){if(!tr(u))throw new Error(`Invalid direction given for left hand side of edge ${A}--${T}. Expected (L,R,T,B) got ${String(u)}`);if(!tr(o))throw new Error(`Invalid direction given for right hand side of edge ${A}--${T}. Expected (L,R,T,B) got ${String(o)}`);if(this.nodes[A]===void 0&&this.groups[A]===void 0)throw new Error(`The left-hand id [${A}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(this.nodes[T]===void 0&&this.groups[T]===void 0)throw new Error(`The right-hand id [${T}] does not yet exist. Please create the service/group before declaring an edge to it.`);let g=this.nodes[A].in,i=this.nodes[T].in;if(n&&g&&i&&g==i)throw new Error(`The left-hand id [${A}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(f&&g&&i&&g==i)throw new Error(`The right-hand id [${T}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let e={lhsId:A,lhsDir:u,lhsInto:a,lhsGroup:n,rhsId:T,rhsDir:o,rhsInto:r,rhsGroup:f,title:t};this.edges.push(e),this.nodes[A]&&this.nodes[T]&&(this.nodes[A].edges.push(this.edges[this.edges.length-1]),this.nodes[T].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(this.dataStructures===void 0){let A={},T=Object.entries(this.nodes).reduce((f,[t,g])=>(f[t]=g.edges.reduce((i,e)=>{var h,N;let s=(h=this.getNode(e.lhsId))==null?void 0:h.in,c=(N=this.getNode(e.rhsId))==null?void 0:N.in;if(s&&c&&s!==c){let v=Tr(e.lhsDir,e.rhsDir);v!=="bend"&&(A[s]??(A[s]={}),A[s][c]=v,A[c]??(A[c]={}),A[c][s]=v)}if(e.lhsId===t){let v=Me(e.lhsDir,e.rhsDir);v&&(i[v]=e.rhsId)}else{let v=Me(e.rhsDir,e.lhsDir);v&&(i[v]=e.lhsId)}return i},{}),f),{}),u=Object.keys(T)[0],o={[u]:1},a=Object.keys(T).reduce((f,t)=>t===u?f:{...f,[t]:1},{}),r=ct(f=>{let t={[f]:[0,0]},g=[f];for(;g.length>0;){let i=g.shift();if(i){o[i]=1,delete a[i];let e=T[i],[s,c]=t[i];Object.entries(e).forEach(([h,N])=>{o[N]||(t[N]=Er([s,c],h),g.push(N))})}}return t},"BFS"),n=[r(u)];for(;Object.keys(a).length>0;)n.push(r(Object.keys(a)[0]));this.dataStructures={adjList:T,spatialMaps:n,groupAlignments:A}}return this.dataStructures}setElementForId(A,T){this.elements[A]=T}getElementById(A){return this.elements[A]}getConfig(){return $e({...Cr,...Fe().architecture})}getConfigField(A){return this.getConfig()[A]}},ct(re,"ArchitectureDB"),re),Ar=ct((C,A)=>{Qe(C,A),C.groups.map(T=>A.addGroup(T)),C.services.map(T=>A.addService({...T,type:"service"})),C.junctions.map(T=>A.addJunction({...T,type:"junction"})),C.edges.map(T=>A.addEdge(T))},"populateDb"),ir={parser:{yy:void 0},parse:ct(async C=>{var u;let A=await Je("architecture",C);Ee.debug(A);let T=(u=ir.parser)==null?void 0:u.yy;if(!(T instanceof rr))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");Ar(A,T)},"parse")},Mr=ct(C=>`
  .edge {
    stroke-width: ${C.archEdgeWidth};
    stroke: ${C.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${C.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${C.archGroupBorderColor};
    stroke-width: ${C.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),wr=Mr,te=ct(C=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${C}</g>`,"wrapIcon"),oe={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:te('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:te('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:te('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:te('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:te('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:ke,blank:{body:te("")}}},Or=ct(async function(C,A,T){let u=T.getConfigField("padding"),o=T.getConfigField("iconSize"),a=o/2,r=o/6,n=r/2;await Promise.all(A.edges().map(async f=>{var it,I;let{source:t,sourceDir:g,sourceArrow:i,sourceGroup:e,target:s,targetDir:c,targetArrow:h,targetGroup:N,label:v}=er(f),{x:y,y:L}=f[0].sourceEndpoint(),{x:R,y:M}=f[0].midpoint(),{x:S,y:V}=f[0].targetEndpoint(),G=u+4;if(e&&(Ht(g)?y+=g==="L"?-G:G:L+=g==="T"?-G:G+18),N&&(Ht(c)?S+=c==="L"?-G:G:V+=c==="T"?-G:G+18),!e&&((it=T.getNode(t))==null?void 0:it.type)==="junction"&&(Ht(g)?y+=g==="L"?a:-a:L+=g==="T"?a:-a),!N&&((I=T.getNode(s))==null?void 0:I.type)==="junction"&&(Ht(c)?S+=c==="L"?a:-a:V+=c==="T"?a:-a),f[0]._private.rscratch){let k=C.insert("g");if(k.insert("path").attr("d",`M ${y},${L} L ${R},${M} L${S},${V} `).attr("class","edge").attr("id",Ze(t,s,{prefix:"L"})),i){let l=Ht(g)?ce[g](y,r):y-n,E=kt(g)?ce[g](L,r):L-n;k.insert("polygon").attr("points",_e[g](r)).attr("transform",`translate(${l},${E})`).attr("class","arrow")}if(h){let l=Ht(c)?ce[c](S,r):S-n,E=kt(c)?ce[c](V,r):V-n;k.insert("polygon").attr("points",_e[c](r)).attr("transform",`translate(${l},${E})`).attr("class","arrow")}if(v){let l=we(g,c)?"XY":Ht(g)?"X":"Y",E=0;l==="X"?E=Math.abs(y-S):l==="Y"?E=Math.abs(L-V)/1.5:E=Math.abs(y-S)/2;let d=k.append("g");if(await fe(d,v,{useHtmlLabels:!1,width:E,classes:"architecture-service-label"},he()),d.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),l==="X")d.attr("transform","translate("+R+", "+M+")");else if(l==="Y")d.attr("transform","translate("+R+", "+M+") rotate(-90)");else if(l==="XY"){let m=Me(g,c);if(m&&pr(m)){let p=d.node().getBoundingClientRect(),[D,O]=mr(m);d.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*D*O*45})`);let F=d.node().getBoundingClientRect();d.attr("transform",`
                translate(${R}, ${M-p.height/2})
                translate(${D*F.width/2}, ${O*F.height/2})
                rotate(${-1*D*O*45}, 0, ${p.height/2})
              `)}}}}}))},"drawEdges"),Dr=ct(async function(C,A,T){let o=T.getConfigField("padding")*.75,a=T.getConfigField("fontSize"),n=T.getConfigField("iconSize")/2;await Promise.all(A.nodes().map(async f=>{let t=ee(f);if(t.type==="group"){let{h:g,w:i,x1:e,y1:s}=f.boundingBox(),c=C.append("rect");c.attr("id",`group-${t.id}`).attr("x",e+n).attr("y",s+n).attr("width",i).attr("height",g).attr("class","node-bkg");let h=C.append("g"),N=e,v=s;if(t.icon){let y=h.append("g");y.html(`<g>${await le(t.icon,{height:o,width:o,fallbackPrefix:oe.prefix})}</g>`),y.attr("transform","translate("+(N+n+1)+", "+(v+n+1)+")"),N+=o,v+=a/2-1-2}if(t.label){let y=h.append("g");await fe(y,t.label,{useHtmlLabels:!1,width:i,classes:"architecture-service-label"},he()),y.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),y.attr("transform","translate("+(N+n+4)+", "+(v+n+2)+")")}T.setElementForId(t.id,c)}}))},"drawGroups"),xr=ct(async function(C,A,T){let u=he();for(let o of T){let a=A.append("g"),r=C.getConfigField("iconSize");if(o.title){let g=a.append("g");await fe(g,o.title,{useHtmlLabels:!1,width:r*1.5,classes:"architecture-service-label"},u),g.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),g.attr("transform","translate("+r/2+", "+r+")")}let n=a.append("g");if(o.icon)n.html(`<g>${await le(o.icon,{height:r,width:r,fallbackPrefix:oe.prefix})}</g>`);else if(o.iconText){n.html(`<g>${await le("blank",{height:r,width:r,fallbackPrefix:oe.prefix})}</g>`);let e=n.append("g").append("foreignObject").attr("width",r).attr("height",r).append("div").attr("class","node-icon-text").attr("style",`height: ${r}px;`).append("div").html(be(o.iconText,u)),s=parseInt(window.getComputedStyle(e.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;e.attr("style",`-webkit-line-clamp: ${Math.floor((r-2)/s)};`)}else n.append("path").attr("class","node-bkg").attr("id","node-"+o.id).attr("d",`M0 ${r} v${-r} q0,-5 5,-5 h${r} q5,0 5,5 v${r} H0 Z`);a.attr("id",`service-${o.id}`).attr("class","architecture-service");let{width:f,height:t}=a.node().getBBox();o.width=f,o.height=t,C.setElementForId(o.id,a)}return 0},"drawServices"),Ir=ct(function(C,A,T){T.forEach(u=>{let o=A.append("g"),a=C.getConfigField("iconSize");o.append("g").append("rect").attr("id","node-"+u.id).attr("fill-opacity","0").attr("width",a).attr("height",a),o.attr("class","architecture-junction");let{width:n,height:f}=o._groups[0][0].getBBox();o.width=n,o.height=f,C.setElementForId(u.id,o)})},"drawJunctions");qe([{name:oe.prefix,icons:oe}]);me.use(ar.default);function nr(C,A,T){C.forEach(u=>{A.add({group:"nodes",data:{type:"service",id:u.id,icon:u.icon,label:u.title,parent:u.in,width:T.getConfigField("iconSize"),height:T.getConfigField("iconSize")},classes:"node-service"})})}ct(nr,"addServices");function or(C,A,T){C.forEach(u=>{A.add({group:"nodes",data:{type:"junction",id:u.id,parent:u.in,width:T.getConfigField("iconSize"),height:T.getConfigField("iconSize")},classes:"node-junction"})})}ct(or,"addJunctions");function sr(C,A){A.nodes().map(T=>{let u=ee(T);if(u.type==="group")return;u.x=T.position().x,u.y=T.position().y,C.getElementById(u.id).attr("transform","translate("+(u.x||0)+","+(u.y||0)+")")})}ct(sr,"positionNodes");function hr(C,A){C.forEach(T=>{A.add({group:"nodes",data:{type:"group",id:T.id,icon:T.icon,label:T.title,parent:T.in},classes:"node-group"})})}ct(hr,"addGroups");function lr(C,A){C.forEach(T=>{let{lhsId:u,rhsId:o,lhsInto:a,lhsGroup:r,rhsInto:n,lhsDir:f,rhsDir:t,rhsGroup:g,title:i}=T,e=we(T.lhsDir,T.rhsDir)?"segments":"straight",s={id:`${u}-${o}`,label:i,source:u,sourceDir:f,sourceArrow:a,sourceGroup:r,sourceEndpoint:f==="L"?"0 50%":f==="R"?"100% 50%":f==="T"?"50% 0":"50% 100%",target:o,targetDir:t,targetArrow:n,targetGroup:g,targetEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%"};A.add({group:"edges",data:s,classes:e})})}ct(lr,"addEdges");function fr(C,A,T){let u=ct((n,f)=>Object.entries(n).reduce((t,[g,i])=>{var c;let e=0,s=Object.entries(i);if(s.length===1)return t[g]=s[0][1],t;for(let h=0;h<s.length-1;h++)for(let N=h+1;N<s.length;N++){let[v,y]=s[h],[L,R]=s[N];if(((c=T[v])==null?void 0:c[L])===f)t[g]??(t[g]=[]),t[g]=[...t[g],...y,...R];else if(v==="default"||L==="default")t[g]??(t[g]=[]),t[g]=[...t[g],...y,...R];else{let S=`${g}-${e++}`;t[S]=y;let V=`${g}-${e++}`;t[V]=R}}return t},{}),"flattenAlignments"),o=A.map(n=>{let f={},t={};return Object.entries(n).forEach(([g,[i,e]])=>{var c,h,N;let s=((c=C.getNode(g))==null?void 0:c.in)??"default";f[e]??(f[e]={}),(h=f[e])[s]??(h[s]=[]),f[e][s].push(g),t[i]??(t[i]={}),(N=t[i])[s]??(N[s]=[]),t[i][s].push(g)}),{horiz:Object.values(u(f,"horizontal")).filter(g=>g.length>1),vert:Object.values(u(t,"vertical")).filter(g=>g.length>1)}}),[a,r]=o.reduce(([n,f],{horiz:t,vert:g})=>[[...n,...t],[...f,...g]],[[],[]]);return{horizontal:a,vertical:r}}ct(fr,"getAlignments");function cr(C,A){let T=[],u=ct(a=>`${a[0]},${a[1]}`,"posToStr"),o=ct(a=>a.split(",").map(r=>parseInt(r)),"strToPos");return C.forEach(a=>{let r=Object.fromEntries(Object.entries(a).map(([g,i])=>[u(i),g])),n=[u([0,0])],f={},t={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;n.length>0;){let g=n.shift();if(g){f[g]=1;let i=r[g];if(i){let e=o(g);Object.entries(t).forEach(([s,c])=>{let h=u([e[0]+c[0],e[1]+c[1]]),N=r[h];N&&!f[h]&&(n.push(h),T.push({[je[s]]:N,[je[vr(s)]]:i,gap:1.5*A.getConfigField("iconSize")}))})}}}}),T}ct(cr,"getRelativeConstraints");function gr(C,A,T,u,o,{spatialMaps:a,groupAlignments:r}){return new Promise(n=>{let f=ze("body").append("div").attr("id","cy").attr("style","display:none"),t=me({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${o.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${o.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});f.remove(),hr(T,t),nr(C,t,o),or(A,t,o),lr(u,t);let g=fr(o,a,r),i=cr(a,o),e=t.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(s){let[c,h]=s.connectedNodes(),{parent:N}=ee(c),{parent:v}=ee(h);return N===v?1.5*o.getConfigField("iconSize"):.5*o.getConfigField("iconSize")},edgeElasticity(s){let[c,h]=s.connectedNodes(),{parent:N}=ee(c),{parent:v}=ee(h);return N===v?.45:.001},alignmentConstraint:g,relativePlacementConstraint:i});e.one("layoutstop",()=>{var c;function s(h,N,v,y){let L,R,{x:M,y:S}=h,{x:V,y:G}=N;R=(y-S+(M-v)*(S-G)/(M-V))/Math.sqrt(1+Math.pow((S-G)/(M-V),2)),L=Math.sqrt(Math.pow(y-S,2)+Math.pow(v-M,2)-Math.pow(R,2));let it=Math.sqrt(Math.pow(V-M,2)+Math.pow(G-S,2));L=L/it;let I=(V-M)*(y-S)-(G-S)*(v-M);switch(!0){case I>=0:I=1;break;case I<0:I=-1;break}let k=(V-M)*(v-M)+(G-S)*(y-S);switch(!0){case k>=0:k=1;break;case k<0:k=-1;break}return R=Math.abs(R)*I,L=L*k,{distances:R,weights:L}}ct(s,"getSegmentWeights"),t.startBatch();for(let h of Object.values(t.edges()))if((c=h.data)!=null&&c.call(h)){let{x:N,y:v}=h.source().position(),{x:y,y:L}=h.target().position();if(N!==y&&v!==L){let R=h.sourceEndpoint(),M=h.targetEndpoint(),{sourceDir:S}=er(h),[V,G]=kt(S)?[R.x,M.y]:[M.x,R.y],{weights:it,distances:I}=s(R,M,V,G);h.style("segment-distances",I),h.style("segment-weights",it)}}t.endBatch(),e.run()}),e.run(),t.ready(s=>{Ee.info("Ready",s),n(t)})})}ct(gr,"layoutArchitecture");var Rr=ct(async(C,A,T,u)=>{let o=u.db,a=o.getServices(),r=o.getJunctions(),n=o.getGroups(),f=o.getEdges(),t=o.getDataStructures(),g=Be(A),i=g.append("g");i.attr("class","architecture-edges");let e=g.append("g");e.attr("class","architecture-services");let s=g.append("g");s.attr("class","architecture-groups"),await xr(o,e,a),Ir(o,e,r);let c=await gr(a,r,n,f,o,t);await Or(i,c,o),await Dr(s,c,o),sr(o,c),Pe(void 0,g,o.getConfigField("padding"),o.getConfigField("useMaxWidth"))},"draw"),Sr={draw:Rr},Vr={parser:ir,get db(){return new rr},renderer:Sr,styles:wr};export{Vr as diagram};
