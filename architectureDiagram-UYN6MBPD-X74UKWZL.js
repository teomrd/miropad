import{a as Ne}from"./chunk-OW7XWWRY.js";import{a as ke}from"./chunk-QI5656UK.js";import{a as Ze}from"./chunk-PWSVZSPK.js";import{a as qe}from"./chunk-QTRW4TAT.js";import"./chunk-E4JS2JSG.js";import"./chunk-WZ327HTW.js";import"./chunk-BXVLC2RA.js";import{a as $e}from"./chunk-SFY74CKZ.js";import{a as Ve,b as ze,c as fe}from"./chunk-YW5DPG3L.js";import{d as ce}from"./chunk-SO7LSWKM.js";import"./chunk-MGXIVZEI.js";import"./chunk-TSL5KNHW.js";import{P as be,S as Pe,T as Ge,U as Ue,V as Ye,W as Xe,X as He,Y as We,Z as ae,h as at,ia as Be,j as Te,v as Fe}from"./chunk-HJPNRYHP.js";import"./chunk-ZD24GIZA.js";import"./chunk-RW2WCYL6.js";import"./chunk-MYATPW36.js";import"./chunk-R77GKUCO.js";import"./chunk-EQENVWAF.js";import"./chunk-FFNH7GCV.js";import{a as me,d as ur}from"./chunk-OHVK2FCB.js";var Ce=me((ne,Le)=>{(function(A,N){typeof ne=="object"&&typeof Le=="object"?Le.exports=N():typeof define=="function"&&define.amd?define([],N):typeof ne=="object"?ne.layoutBase=N():A.layoutBase=N()})(ne,function(){return function(m){var A={};function N(u){if(A[u])return A[u].exports;var h=A[u]={i:u,l:!1,exports:{}};return m[u].call(h.exports,h,h.exports,N),h.l=!0,h.exports}return N.m=m,N.c=A,N.i=function(u){return u},N.d=function(u,h,n){N.o(u,h)||Object.defineProperty(u,h,{configurable:!1,enumerable:!0,get:n})},N.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return N.d(h,"a",h),h},N.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},N.p="",N(N.s=28)}([function(m,A,N){"use strict";function u(){}u.QUALITY=1,u.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,u.DEFAULT_INCREMENTAL=!1,u.DEFAULT_ANIMATION_ON_LAYOUT=!0,u.DEFAULT_ANIMATION_DURING_LAYOUT=!1,u.DEFAULT_ANIMATION_PERIOD=50,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,u.DEFAULT_GRAPH_MARGIN=15,u.NODE_DIMENSIONS_INCLUDE_LABELS=!1,u.SIMPLE_NODE_SIZE=40,u.SIMPLE_NODE_HALF_SIZE=u.SIMPLE_NODE_SIZE/2,u.EMPTY_COMPOUND_NODE_SIZE=40,u.MIN_EDGE_LENGTH=1,u.WORLD_BOUNDARY=1e6,u.INITIAL_WORLD_BOUNDARY=u.WORLD_BOUNDARY/1e3,u.WORLD_CENTER_X=1200,u.WORLD_CENTER_Y=900,m.exports=u},function(m,A,N){"use strict";var u=N(2),h=N(8),n=N(9);function t(f,e,v){u.call(this,v),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=v,this.bendpoints=[],this.source=f,this.target=e}t.prototype=Object.create(u.prototype);for(var i in u)t[i]=u[i];t.prototype.getSource=function(){return this.source},t.prototype.getTarget=function(){return this.target},t.prototype.isInterGraph=function(){return this.isInterGraph},t.prototype.getLength=function(){return this.length},t.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},t.prototype.getBendpoints=function(){return this.bendpoints},t.prototype.getLca=function(){return this.lca},t.prototype.getSourceInLca=function(){return this.sourceInLca},t.prototype.getTargetInLca=function(){return this.targetInLca},t.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},t.prototype.getOtherEndInGraph=function(f,e){for(var v=this.getOtherEnd(f),r=e.getGraphManager().getRoot();;){if(v.getOwner()==e)return v;if(v.getOwner()==r)break;v=v.getOwner().getParent()}return null},t.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=h.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=n.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=n.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},t.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=n.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=n.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},m.exports=t},function(m,A,N){"use strict";function u(h){this.vGraphObject=h}m.exports=u},function(m,A,N){"use strict";var u=N(2),h=N(10),n=N(13),t=N(0),i=N(16),f=N(5);function e(r,a,s,c){s==null&&c==null&&(c=a),u.call(this,c),r.graphManager!=null&&(r=r.graphManager),this.estimatedSize=h.MIN_VALUE,this.inclusionTreeDepth=h.MAX_VALUE,this.vGraphObject=c,this.edges=[],this.graphManager=r,s!=null&&a!=null?this.rect=new n(a.x,a.y,s.width,s.height):this.rect=new n}e.prototype=Object.create(u.prototype);for(var v in u)e[v]=u[v];e.prototype.getEdges=function(){return this.edges},e.prototype.getChild=function(){return this.child},e.prototype.getOwner=function(){return this.owner},e.prototype.getWidth=function(){return this.rect.width},e.prototype.setWidth=function(r){this.rect.width=r},e.prototype.getHeight=function(){return this.rect.height},e.prototype.setHeight=function(r){this.rect.height=r},e.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},e.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},e.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},e.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},e.prototype.getRect=function(){return this.rect},e.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},e.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},e.prototype.setRect=function(r,a){this.rect.x=r.x,this.rect.y=r.y,this.rect.width=a.width,this.rect.height=a.height},e.prototype.setCenter=function(r,a){this.rect.x=r-this.rect.width/2,this.rect.y=a-this.rect.height/2},e.prototype.setLocation=function(r,a){this.rect.x=r,this.rect.y=a},e.prototype.moveBy=function(r,a){this.rect.x+=r,this.rect.y+=a},e.prototype.getEdgeListToNode=function(r){var a=[],s,c=this;return c.edges.forEach(function(l){if(l.target==r){if(l.source!=c)throw"Incorrect edge source!";a.push(l)}}),a},e.prototype.getEdgesBetween=function(r){var a=[],s,c=this;return c.edges.forEach(function(l){if(!(l.source==c||l.target==c))throw"Incorrect edge source and/or target";(l.target==r||l.source==r)&&a.push(l)}),a},e.prototype.getNeighborsList=function(){var r=new Set,a=this;return a.edges.forEach(function(s){if(s.source==a)r.add(s.target);else{if(s.target!=a)throw"Incorrect incidency!";r.add(s.source)}}),r},e.prototype.withChildren=function(){var r=new Set,a,s;if(r.add(this),this.child!=null)for(var c=this.child.getNodes(),l=0;l<c.length;l++)a=c[l],s=a.withChildren(),s.forEach(function(L){r.add(L)});return r},e.prototype.getNoOfChildren=function(){var r=0,a;if(this.child==null)r=1;else for(var s=this.child.getNodes(),c=0;c<s.length;c++)a=s[c],r+=a.getNoOfChildren();return r==0&&(r=1),r},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==h.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},e.prototype.scatter=function(){var r,a,s=-t.INITIAL_WORLD_BOUNDARY,c=t.INITIAL_WORLD_BOUNDARY;r=t.WORLD_CENTER_X+i.nextDouble()*(c-s)+s;var l=-t.INITIAL_WORLD_BOUNDARY,L=t.INITIAL_WORLD_BOUNDARY;a=t.WORLD_CENTER_Y+i.nextDouble()*(L-l)+l,this.rect.x=r,this.rect.y=a},e.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var r=this.getChild();if(r.updateBounds(!0),this.rect.x=r.getLeft(),this.rect.y=r.getTop(),this.setWidth(r.getRight()-r.getLeft()),this.setHeight(r.getBottom()-r.getTop()),t.NODE_DIMENSIONS_INCLUDE_LABELS){var a=r.getRight()-r.getLeft(),s=r.getBottom()-r.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(a+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>a?(this.rect.x-=(this.labelWidth-a)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(a+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(s+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>s?(this.rect.y-=(this.labelHeight-s)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(s+this.labelHeight))}}},e.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==h.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},e.prototype.transform=function(r){var a=this.rect.x;a>t.WORLD_BOUNDARY?a=t.WORLD_BOUNDARY:a<-t.WORLD_BOUNDARY&&(a=-t.WORLD_BOUNDARY);var s=this.rect.y;s>t.WORLD_BOUNDARY?s=t.WORLD_BOUNDARY:s<-t.WORLD_BOUNDARY&&(s=-t.WORLD_BOUNDARY);var c=new f(a,s),l=r.inverseTransformPoint(c);this.setLocation(l.x,l.y)},e.prototype.getLeft=function(){return this.rect.x},e.prototype.getRight=function(){return this.rect.x+this.rect.width},e.prototype.getTop=function(){return this.rect.y},e.prototype.getBottom=function(){return this.rect.y+this.rect.height},e.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},m.exports=e},function(m,A,N){"use strict";var u=N(0);function h(){}for(var n in u)h[n]=u[n];h.MAX_ITERATIONS=2500,h.DEFAULT_EDGE_LENGTH=50,h.DEFAULT_SPRING_STRENGTH=.45,h.DEFAULT_REPULSION_STRENGTH=4500,h.DEFAULT_GRAVITY_STRENGTH=.4,h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,h.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,h.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,h.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,h.COOLING_ADAPTATION_FACTOR=.33,h.ADAPTATION_LOWER_NODE_LIMIT=1e3,h.ADAPTATION_UPPER_NODE_LIMIT=5e3,h.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,h.MAX_NODE_DISPLACEMENT=h.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,h.MIN_REPULSION_DIST=h.DEFAULT_EDGE_LENGTH/10,h.CONVERGENCE_CHECK_PERIOD=100,h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,h.MIN_EDGE_LENGTH=1,h.GRID_CALCULATION_CHECK_PERIOD=10,m.exports=h},function(m,A,N){"use strict";function u(h,n){h==null&&n==null?(this.x=0,this.y=0):(this.x=h,this.y=n)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.setX=function(h){this.x=h},u.prototype.setY=function(h){this.y=h},u.prototype.getDifference=function(h){return new DimensionD(this.x-h.x,this.y-h.y)},u.prototype.getCopy=function(){return new u(this.x,this.y)},u.prototype.translate=function(h){return this.x+=h.width,this.y+=h.height,this},m.exports=u},function(m,A,N){"use strict";var u=N(2),h=N(10),n=N(0),t=N(7),i=N(3),f=N(1),e=N(13),v=N(12),r=N(11);function a(c,l,L){u.call(this,L),this.estimatedSize=h.MIN_VALUE,this.margin=n.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=c,l!=null&&l instanceof t?this.graphManager=l:l!=null&&l instanceof Layout&&(this.graphManager=l.graphManager)}a.prototype=Object.create(u.prototype);for(var s in u)a[s]=u[s];a.prototype.getNodes=function(){return this.nodes},a.prototype.getEdges=function(){return this.edges},a.prototype.getGraphManager=function(){return this.graphManager},a.prototype.getParent=function(){return this.parent},a.prototype.getLeft=function(){return this.left},a.prototype.getRight=function(){return this.right},a.prototype.getTop=function(){return this.top},a.prototype.getBottom=function(){return this.bottom},a.prototype.isConnected=function(){return this.isConnected},a.prototype.add=function(c,l,L){if(l==null&&L==null){var p=c;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(p)>-1)throw"Node already in graph!";return p.owner=this,this.getNodes().push(p),p}else{var y=c;if(!(this.getNodes().indexOf(l)>-1&&this.getNodes().indexOf(L)>-1))throw"Source or target not in graph!";if(!(l.owner==L.owner&&l.owner==this))throw"Both owners must be this graph!";return l.owner!=L.owner?null:(y.source=l,y.target=L,y.isInterGraph=!1,this.getEdges().push(y),l.edges.push(y),L!=l&&L.edges.push(y),y)}},a.prototype.remove=function(c){var l=c;if(c instanceof i){if(l==null)throw"Node is null!";if(!(l.owner!=null&&l.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var L=l.edges.slice(),p,y=L.length,C=0;C<y;C++)p=L[C],p.isInterGraph?this.graphManager.remove(p):p.source.owner.remove(p);var R=this.nodes.indexOf(l);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(c instanceof f){var p=c;if(p==null)throw"Edge is null!";if(!(p.source!=null&&p.target!=null))throw"Source and/or target is null!";if(!(p.source.owner!=null&&p.target.owner!=null&&p.source.owner==this&&p.target.owner==this))throw"Source and/or target owner is invalid!";var M=p.source.edges.indexOf(p),b=p.target.edges.indexOf(p);if(!(M>-1&&b>-1))throw"Source and/or target doesn't know this edge!";p.source.edges.splice(M,1),p.target!=p.source&&p.target.edges.splice(b,1);var R=p.source.owner.getEdges().indexOf(p);if(R==-1)throw"Not in owner's edge list!";p.source.owner.getEdges().splice(R,1)}},a.prototype.updateLeftTop=function(){for(var c=h.MAX_VALUE,l=h.MAX_VALUE,L,p,y,C=this.getNodes(),R=C.length,M=0;M<R;M++){var b=C[M];L=b.getTop(),p=b.getLeft(),c>L&&(c=L),l>p&&(l=p)}return c==h.MAX_VALUE?null:(C[0].getParent().paddingLeft!=null?y=C[0].getParent().paddingLeft:y=this.margin,this.left=l-y,this.top=c-y,new v(this.left,this.top))},a.prototype.updateBounds=function(c){for(var l=h.MAX_VALUE,L=-h.MAX_VALUE,p=h.MAX_VALUE,y=-h.MAX_VALUE,C,R,M,b,Z,Y=this.nodes,et=Y.length,I=0;I<et;I++){var k=Y[I];c&&k.child!=null&&k.updateBounds(),C=k.getLeft(),R=k.getRight(),M=k.getTop(),b=k.getBottom(),l>C&&(l=C),L<R&&(L=R),p>M&&(p=M),y<b&&(y=b)}var o=new e(l,p,L-l,y-p);l==h.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),Y[0].getParent().paddingLeft!=null?Z=Y[0].getParent().paddingLeft:Z=this.margin,this.left=o.x-Z,this.right=o.x+o.width+Z,this.top=o.y-Z,this.bottom=o.y+o.height+Z},a.calculateBounds=function(c){for(var l=h.MAX_VALUE,L=-h.MAX_VALUE,p=h.MAX_VALUE,y=-h.MAX_VALUE,C,R,M,b,Z=c.length,Y=0;Y<Z;Y++){var et=c[Y];C=et.getLeft(),R=et.getRight(),M=et.getTop(),b=et.getBottom(),l>C&&(l=C),L<R&&(L=R),p>M&&(p=M),y<b&&(y=b)}var I=new e(l,p,L-l,y-p);return I},a.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},a.prototype.getEstimatedSize=function(){if(this.estimatedSize==h.MIN_VALUE)throw"assert failed";return this.estimatedSize},a.prototype.calcEstimatedSize=function(){for(var c=0,l=this.nodes,L=l.length,p=0;p<L;p++){var y=l[p];c+=y.calcEstimatedSize()}return c==0?this.estimatedSize=n.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=c/Math.sqrt(this.nodes.length),this.estimatedSize},a.prototype.updateConnected=function(){var c=this;if(this.nodes.length==0){this.isConnected=!0;return}var l=new r,L=new Set,p=this.nodes[0],y,C,R=p.withChildren();for(R.forEach(function(I){l.push(I),L.add(I)});l.length!==0;){p=l.shift(),y=p.getEdges();for(var M=y.length,b=0;b<M;b++){var Z=y[b];if(C=Z.getOtherEndInGraph(p,this),C!=null&&!L.has(C)){var Y=C.withChildren();Y.forEach(function(I){l.push(I),L.add(I)})}}}if(this.isConnected=!1,L.size>=this.nodes.length){var et=0;L.forEach(function(I){I.owner==c&&et++}),et==this.nodes.length&&(this.isConnected=!0)}},m.exports=a},function(m,A,N){"use strict";var u,h=N(1);function n(t){u=N(6),this.layout=t,this.graphs=[],this.edges=[]}n.prototype.addRoot=function(){var t=this.layout.newGraph(),i=this.layout.newNode(null),f=this.add(t,i);return this.setRootGraph(f),this.rootGraph},n.prototype.add=function(t,i,f,e,v){if(f==null&&e==null&&v==null){if(t==null)throw"Graph is null!";if(i==null)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),t.parent!=null)throw"Already has a parent!";if(i.child!=null)throw"Already has a child!";return t.parent=i,i.child=t,t}else{v=f,e=i,f=t;var r=e.getOwner(),a=v.getOwner();if(!(r!=null&&r.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(a!=null&&a.getGraphManager()==this))throw"Target not in this graph mgr!";if(r==a)return f.isInterGraph=!1,r.add(f,e,v);if(f.isInterGraph=!0,f.source=e,f.target=v,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},n.prototype.remove=function(t){if(t instanceof u){var i=t;if(i.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(i==this.rootGraph||i.parent!=null&&i.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(i.getEdges());for(var e,v=f.length,r=0;r<v;r++)e=f[r],i.remove(e);var a=[];a=a.concat(i.getNodes());var s;v=a.length;for(var r=0;r<v;r++)s=a[r],i.remove(s);i==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(i);this.graphs.splice(c,1),i.parent=null}else if(t instanceof h){if(e=t,e==null)throw"Edge is null!";if(!e.isInterGraph)throw"Not an inter-graph edge!";if(!(e.source!=null&&e.target!=null))throw"Source and/or target is null!";if(!(e.source.edges.indexOf(e)!=-1&&e.target.edges.indexOf(e)!=-1))throw"Source and/or target doesn't know this edge!";var c=e.source.edges.indexOf(e);if(e.source.edges.splice(c,1),c=e.target.edges.indexOf(e),e.target.edges.splice(c,1),!(e.source.owner!=null&&e.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(e.source.owner.getGraphManager().edges.indexOf(e)==-1)throw"Not in owner graph manager's edge list!";var c=e.source.owner.getGraphManager().edges.indexOf(e);e.source.owner.getGraphManager().edges.splice(c,1)}},n.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},n.prototype.getGraphs=function(){return this.graphs},n.prototype.getAllNodes=function(){if(this.allNodes==null){for(var t=[],i=this.getGraphs(),f=i.length,e=0;e<f;e++)t=t.concat(i[e].getNodes());this.allNodes=t}return this.allNodes},n.prototype.resetAllNodes=function(){this.allNodes=null},n.prototype.resetAllEdges=function(){this.allEdges=null},n.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},n.prototype.getAllEdges=function(){if(this.allEdges==null){for(var t=[],i=this.getGraphs(),f=i.length,e=0;e<i.length;e++)t=t.concat(i[e].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},n.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},n.prototype.setAllNodesToApplyGravitation=function(t){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=t},n.prototype.getRoot=function(){return this.rootGraph},n.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,t.parent==null&&(t.parent=this.layout.newNode("Root node"))},n.prototype.getLayout=function(){return this.layout},n.prototype.isOneAncestorOfOther=function(t,i){if(!(t!=null&&i!=null))throw"assert failed";if(t==i)return!0;var f=t.getOwner(),e;do{if(e=f.getParent(),e==null)break;if(e==i)return!0;if(f=e.getOwner(),f==null)break}while(!0);f=i.getOwner();do{if(e=f.getParent(),e==null)break;if(e==t)return!0;if(f=e.getOwner(),f==null)break}while(!0);return!1},n.prototype.calcLowestCommonAncestors=function(){for(var t,i,f,e,v,r=this.getAllEdges(),a=r.length,s=0;s<a;s++){if(t=r[s],i=t.source,f=t.target,t.lca=null,t.sourceInLca=i,t.targetInLca=f,i==f){t.lca=i.getOwner();continue}for(e=i.getOwner();t.lca==null;){for(t.targetInLca=f,v=f.getOwner();t.lca==null;){if(v==e){t.lca=v;break}if(v==this.rootGraph)break;if(t.lca!=null)throw"assert failed";t.targetInLca=v.getParent(),v=t.targetInLca.getOwner()}if(e==this.rootGraph)break;t.lca==null&&(t.sourceInLca=e.getParent(),e=t.sourceInLca.getOwner())}if(t.lca==null)throw"assert failed"}},n.prototype.calcLowestCommonAncestor=function(t,i){if(t==i)return t.getOwner();var f=t.getOwner();do{if(f==null)break;var e=i.getOwner();do{if(e==null)break;if(e==f)return e;e=e.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},n.prototype.calcInclusionTreeDepths=function(t,i){t==null&&i==null&&(t=this.rootGraph,i=1);for(var f,e=t.getNodes(),v=e.length,r=0;r<v;r++)f=e[r],f.inclusionTreeDepth=i,f.child!=null&&this.calcInclusionTreeDepths(f.child,i+1)},n.prototype.includesInvalidEdge=function(){for(var t,i=[],f=this.edges.length,e=0;e<f;e++)t=this.edges[e],this.isOneAncestorOfOther(t.source,t.target)&&i.push(t);for(var e=0;e<i.length;e++)this.remove(i[e]);return!1},m.exports=n},function(m,A,N){"use strict";var u=N(12);function h(){}h.calcSeparationAmount=function(n,t,i,f){if(!n.intersects(t))throw"assert failed";var e=new Array(2);this.decideDirectionsForOverlappingNodes(n,t,e),i[0]=Math.min(n.getRight(),t.getRight())-Math.max(n.x,t.x),i[1]=Math.min(n.getBottom(),t.getBottom())-Math.max(n.y,t.y),n.getX()<=t.getX()&&n.getRight()>=t.getRight()?i[0]+=Math.min(t.getX()-n.getX(),n.getRight()-t.getRight()):t.getX()<=n.getX()&&t.getRight()>=n.getRight()&&(i[0]+=Math.min(n.getX()-t.getX(),t.getRight()-n.getRight())),n.getY()<=t.getY()&&n.getBottom()>=t.getBottom()?i[1]+=Math.min(t.getY()-n.getY(),n.getBottom()-t.getBottom()):t.getY()<=n.getY()&&t.getBottom()>=n.getBottom()&&(i[1]+=Math.min(n.getY()-t.getY(),t.getBottom()-n.getBottom()));var v=Math.abs((t.getCenterY()-n.getCenterY())/(t.getCenterX()-n.getCenterX()));t.getCenterY()===n.getCenterY()&&t.getCenterX()===n.getCenterX()&&(v=1);var r=v*i[0],a=i[1]/v;i[0]<a?a=i[0]:r=i[1],i[0]=-1*e[0]*(a/2+f),i[1]=-1*e[1]*(r/2+f)},h.decideDirectionsForOverlappingNodes=function(n,t,i){n.getCenterX()<t.getCenterX()?i[0]=-1:i[0]=1,n.getCenterY()<t.getCenterY()?i[1]=-1:i[1]=1},h.getIntersection2=function(n,t,i){var f=n.getCenterX(),e=n.getCenterY(),v=t.getCenterX(),r=t.getCenterY();if(n.intersects(t))return i[0]=f,i[1]=e,i[2]=v,i[3]=r,!0;var a=n.getX(),s=n.getY(),c=n.getRight(),l=n.getX(),L=n.getBottom(),p=n.getRight(),y=n.getWidthHalf(),C=n.getHeightHalf(),R=t.getX(),M=t.getY(),b=t.getRight(),Z=t.getX(),Y=t.getBottom(),et=t.getRight(),I=t.getWidthHalf(),k=t.getHeightHalf(),o=!1,E=!1;if(f===v){if(e>r)return i[0]=f,i[1]=s,i[2]=v,i[3]=Y,!1;if(e<r)return i[0]=f,i[1]=L,i[2]=v,i[3]=M,!1}else if(e===r){if(f>v)return i[0]=a,i[1]=e,i[2]=b,i[3]=r,!1;if(f<v)return i[0]=c,i[1]=e,i[2]=R,i[3]=r,!1}else{var d=n.height/n.width,T=t.height/t.width,g=(r-e)/(v-f),D=void 0,O=void 0,P=void 0,S=void 0,x=void 0,$=void 0;if(-d===g?f>v?(i[0]=l,i[1]=L,o=!0):(i[0]=c,i[1]=s,o=!0):d===g&&(f>v?(i[0]=a,i[1]=s,o=!0):(i[0]=p,i[1]=L,o=!0)),-T===g?v>f?(i[2]=Z,i[3]=Y,E=!0):(i[2]=b,i[3]=M,E=!0):T===g&&(v>f?(i[2]=R,i[3]=M,E=!0):(i[2]=et,i[3]=Y,E=!0)),o&&E)return!1;if(f>v?e>r?(D=this.getCardinalDirection(d,g,4),O=this.getCardinalDirection(T,g,2)):(D=this.getCardinalDirection(-d,g,3),O=this.getCardinalDirection(-T,g,1)):e>r?(D=this.getCardinalDirection(-d,g,1),O=this.getCardinalDirection(-T,g,3)):(D=this.getCardinalDirection(d,g,2),O=this.getCardinalDirection(T,g,4)),!o)switch(D){case 1:S=s,P=f+-C/g,i[0]=P,i[1]=S;break;case 2:P=p,S=e+y*g,i[0]=P,i[1]=S;break;case 3:S=L,P=f+C/g,i[0]=P,i[1]=S;break;case 4:P=l,S=e+-y*g,i[0]=P,i[1]=S;break}if(!E)switch(O){case 1:$=M,x=v+-k/g,i[2]=x,i[3]=$;break;case 2:x=et,$=r+I*g,i[2]=x,i[3]=$;break;case 3:$=Y,x=v+k/g,i[2]=x,i[3]=$;break;case 4:x=Z,$=r+-I*g,i[2]=x,i[3]=$;break}}return!1},h.getCardinalDirection=function(n,t,i){return n>t?i:1+i%4},h.getIntersection=function(n,t,i,f){if(f==null)return this.getIntersection2(n,t,i);var e=n.x,v=n.y,r=t.x,a=t.y,s=i.x,c=i.y,l=f.x,L=f.y,p=void 0,y=void 0,C=void 0,R=void 0,M=void 0,b=void 0,Z=void 0,Y=void 0,et=void 0;return C=a-v,M=e-r,Z=r*v-e*a,R=L-c,b=s-l,Y=l*c-s*L,et=C*b-R*M,et===0?null:(p=(M*Y-b*Z)/et,y=(R*Z-C*Y)/et,new u(p,y))},h.angleOfVector=function(n,t,i,f){var e=void 0;return n!==i?(e=Math.atan((f-t)/(i-n)),i<n?e+=Math.PI:f<t&&(e+=this.TWO_PI)):f<t?e=this.ONE_AND_HALF_PI:e=this.HALF_PI,e},h.doIntersect=function(n,t,i,f){var e=n.x,v=n.y,r=t.x,a=t.y,s=i.x,c=i.y,l=f.x,L=f.y,p=(r-e)*(L-c)-(l-s)*(a-v);if(p===0)return!1;var y=((L-c)*(l-e)+(s-l)*(L-v))/p,C=((v-a)*(l-e)+(r-e)*(L-v))/p;return 0<y&&y<1&&0<C&&C<1},h.findCircleLineIntersections=function(n,t,i,f,e,v,r){var a=(i-n)*(i-n)+(f-t)*(f-t),s=2*((n-e)*(i-n)+(t-v)*(f-t)),c=(n-e)*(n-e)+(t-v)*(t-v)-r*r,l=s*s-4*a*c;if(l>=0){var L=(-s+Math.sqrt(s*s-4*a*c))/(2*a),p=(-s-Math.sqrt(s*s-4*a*c))/(2*a),y=null;return L>=0&&L<=1?[L]:p>=0&&p<=1?[p]:y}else return null},h.HALF_PI=.5*Math.PI,h.ONE_AND_HALF_PI=1.5*Math.PI,h.TWO_PI=2*Math.PI,h.THREE_PI=3*Math.PI,m.exports=h},function(m,A,N){"use strict";function u(){}u.sign=function(h){return h>0?1:h<0?-1:0},u.floor=function(h){return h<0?Math.ceil(h):Math.floor(h)},u.ceil=function(h){return h<0?Math.floor(h):Math.ceil(h)},m.exports=u},function(m,A,N){"use strict";function u(){}u.MAX_VALUE=2147483647,u.MIN_VALUE=-2147483648,m.exports=u},function(m,A,N){"use strict";var u=function(){function e(v,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(v,s.key,s)}}return function(v,r,a){return r&&e(v.prototype,r),a&&e(v,a),v}}();function h(e,v){if(!(e instanceof v))throw new TypeError("Cannot call a class as a function")}var n=function(v){return{value:v,next:null,prev:null}},t=function(v,r,a,s){return v!==null?v.next=r:s.head=r,a!==null?a.prev=r:s.tail=r,r.prev=v,r.next=a,s.length++,r},i=function(v,r){var a=v.prev,s=v.next;return a!==null?a.next=s:r.head=s,s!==null?s.prev=a:r.tail=a,v.prev=v.next=null,r.length--,v},f=function(){function e(v){var r=this;h(this,e),this.length=0,this.head=null,this.tail=null,v!=null&&v.forEach(function(a){return r.push(a)})}return u(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(r,a){return t(a.prev,n(r),a,this)}},{key:"insertAfter",value:function(r,a){return t(a,n(r),a.next,this)}},{key:"insertNodeBefore",value:function(r,a){return t(a.prev,r,a,this)}},{key:"insertNodeAfter",value:function(r,a){return t(a,r,a.next,this)}},{key:"push",value:function(r){return t(this.tail,n(r),null,this)}},{key:"unshift",value:function(r){return t(null,n(r),this.head,this)}},{key:"remove",value:function(r){return i(r,this)}},{key:"pop",value:function(){return i(this.tail,this).value}},{key:"popNode",value:function(){return i(this.tail,this)}},{key:"shift",value:function(){return i(this.head,this).value}},{key:"shiftNode",value:function(){return i(this.head,this)}},{key:"get_object_at",value:function(r){if(r<=this.length()){for(var a=1,s=this.head;a<r;)s=s.next,a++;return s.value}}},{key:"set_object_at",value:function(r,a){if(r<=this.length()){for(var s=1,c=this.head;s<r;)c=c.next,s++;c.value=a}}}]),e}();m.exports=f},function(m,A,N){"use strict";function u(h,n,t){this.x=null,this.y=null,h==null&&n==null&&t==null?(this.x=0,this.y=0):typeof h=="number"&&typeof n=="number"&&t==null?(this.x=h,this.y=n):h.constructor.name=="Point"&&n==null&&t==null&&(t=h,this.x=t.x,this.y=t.y)}u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.getLocation=function(){return new u(this.x,this.y)},u.prototype.setLocation=function(h,n,t){h.constructor.name=="Point"&&n==null&&t==null?(t=h,this.setLocation(t.x,t.y)):typeof h=="number"&&typeof n=="number"&&t==null&&(parseInt(h)==h&&parseInt(n)==n?this.move(h,n):(this.x=Math.floor(h+.5),this.y=Math.floor(n+.5)))},u.prototype.move=function(h,n){this.x=h,this.y=n},u.prototype.translate=function(h,n){this.x+=h,this.y+=n},u.prototype.equals=function(h){if(h.constructor.name=="Point"){var n=h;return this.x==n.x&&this.y==n.y}return this==h},u.prototype.toString=function(){return new u().constructor.name+"[x="+this.x+",y="+this.y+"]"},m.exports=u},function(m,A,N){"use strict";function u(h,n,t,i){this.x=0,this.y=0,this.width=0,this.height=0,h!=null&&n!=null&&t!=null&&i!=null&&(this.x=h,this.y=n,this.width=t,this.height=i)}u.prototype.getX=function(){return this.x},u.prototype.setX=function(h){this.x=h},u.prototype.getY=function(){return this.y},u.prototype.setY=function(h){this.y=h},u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(h){this.width=h},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(h){this.height=h},u.prototype.getRight=function(){return this.x+this.width},u.prototype.getBottom=function(){return this.y+this.height},u.prototype.intersects=function(h){return!(this.getRight()<h.x||this.getBottom()<h.y||h.getRight()<this.x||h.getBottom()<this.y)},u.prototype.getCenterX=function(){return this.x+this.width/2},u.prototype.getMinX=function(){return this.getX()},u.prototype.getMaxX=function(){return this.getX()+this.width},u.prototype.getCenterY=function(){return this.y+this.height/2},u.prototype.getMinY=function(){return this.getY()},u.prototype.getMaxY=function(){return this.getY()+this.height},u.prototype.getWidthHalf=function(){return this.width/2},u.prototype.getHeightHalf=function(){return this.height/2},m.exports=u},function(m,A,N){"use strict";var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function h(){}h.lastID=0,h.createID=function(n){return h.isPrimitive(n)?n:(n.uniqueID!=null||(n.uniqueID=h.getString(),h.lastID++),n.uniqueID)},h.getString=function(n){return n==null&&(n=h.lastID),"Object#"+n},h.isPrimitive=function(n){var t=typeof n>"u"?"undefined":u(n);return n==null||t!="object"&&t!="function"},m.exports=h},function(m,A,N){"use strict";function u(s){if(Array.isArray(s)){for(var c=0,l=Array(s.length);c<s.length;c++)l[c]=s[c];return l}else return Array.from(s)}var h=N(0),n=N(7),t=N(3),i=N(1),f=N(6),e=N(5),v=N(17),r=N(29);function a(s){r.call(this),this.layoutQuality=h.QUALITY,this.createBendsAsNeeded=h.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=h.DEFAULT_INCREMENTAL,this.animationOnLayout=h.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=h.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=h.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=h.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new n(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,s!=null&&(this.isRemoteUse=s)}a.RANDOM_SEED=1,a.prototype=Object.create(r.prototype),a.prototype.getGraphManager=function(){return this.graphManager},a.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},a.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},a.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},a.prototype.newGraphManager=function(){var s=new n(this);return this.graphManager=s,s},a.prototype.newGraph=function(s){return new f(null,this.graphManager,s)},a.prototype.newNode=function(s){return new t(this.graphManager,s)},a.prototype.newEdge=function(s){return new i(null,null,s)},a.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},a.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var s;return this.checkLayoutSuccess()?s=!1:s=this.layout(),h.ANIMATE==="during"?!1:(s&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,s)},a.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},a.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var s,c=this.graphManager.getAllEdges(),l=0;l<c.length;l++)s=c[l];for(var L,p=this.graphManager.getRoot().getNodes(),l=0;l<p.length;l++)L=p[l];this.update(this.graphManager.getRoot())}},a.prototype.update=function(s){if(s==null)this.update2();else if(s instanceof t){var c=s;if(c.getChild()!=null)for(var l=c.getChild().getNodes(),L=0;L<l.length;L++)update(l[L]);if(c.vGraphObject!=null){var p=c.vGraphObject;p.update(c)}}else if(s instanceof i){var y=s;if(y.vGraphObject!=null){var C=y.vGraphObject;C.update(y)}}else if(s instanceof f){var R=s;if(R.vGraphObject!=null){var M=R.vGraphObject;M.update(R)}}},a.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=h.QUALITY,this.animationDuringLayout=h.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=h.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=h.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=h.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=h.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=h.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},a.prototype.transform=function(s){if(s==null)this.transform(new e(0,0));else{var c=new v,l=this.graphManager.getRoot().updateLeftTop();if(l!=null){c.setWorldOrgX(s.x),c.setWorldOrgY(s.y),c.setDeviceOrgX(l.x),c.setDeviceOrgY(l.y);for(var L=this.getAllNodes(),p,y=0;y<L.length;y++)p=L[y],p.transform(c)}}},a.prototype.positionNodesRandomly=function(s){if(s==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var c,l,L=s.getNodes(),p=0;p<L.length;p++)c=L[p],l=c.getChild(),l==null||l.getNodes().length==0?c.scatter():(this.positionNodesRandomly(l),c.updateBounds())},a.prototype.getFlatForest=function(){for(var s=[],c=!0,l=this.graphManager.getRoot().getNodes(),L=!0,p=0;p<l.length;p++)l[p].getChild()!=null&&(L=!1);if(!L)return s;var y=new Set,C=[],R=new Map,M=[];for(M=M.concat(l);M.length>0&&c;){for(C.push(M[0]);C.length>0&&c;){var b=C[0];C.splice(0,1),y.add(b);for(var Z=b.getEdges(),p=0;p<Z.length;p++){var Y=Z[p].getOtherEnd(b);if(R.get(b)!=Y)if(!y.has(Y))C.push(Y),R.set(Y,b);else{c=!1;break}}}if(!c)s=[];else{var et=[].concat(u(y));s.push(et);for(var p=0;p<et.length;p++){var I=et[p],k=M.indexOf(I);k>-1&&M.splice(k,1)}y=new Set,R=new Map}}return s},a.prototype.createDummyNodesForBendpoints=function(s){for(var c=[],l=s.source,L=this.graphManager.calcLowestCommonAncestor(s.source,s.target),p=0;p<s.bendpoints.length;p++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),L.add(y);var C=this.newEdge(null);this.graphManager.add(C,l,y),c.add(y),l=y}var C=this.newEdge(null);return this.graphManager.add(C,l,s.target),this.edgeToDummyNodes.set(s,c),s.isInterGraph()?this.graphManager.remove(s):L.remove(s),c},a.prototype.createBendpointsFromDummyNodes=function(){var s=[];s=s.concat(this.graphManager.getAllEdges()),s=[].concat(u(this.edgeToDummyNodes.keys())).concat(s);for(var c=0;c<s.length;c++){var l=s[c];if(l.bendpoints.length>0){for(var L=this.edgeToDummyNodes.get(l),p=0;p<L.length;p++){var y=L[p],C=new e(y.getCenterX(),y.getCenterY()),R=l.bendpoints.get(p);R.x=C.x,R.y=C.y,y.getOwner().remove(y)}this.graphManager.add(l,l.source,l.target)}}},a.transform=function(s,c,l,L){if(l!=null&&L!=null){var p=c;if(s<=50){var y=c/l;p-=(c-y)/50*(50-s)}else{var C=c*L;p+=(C-c)/50*(s-50)}return p}else{var R,M;return s<=50?(R=9*c/500,M=c/10):(R=9*c/50,M=-8*c),R*s+M}},a.findCenterOfTree=function(s){var c=[];c=c.concat(s);var l=[],L=new Map,p=!1,y=null;(c.length==1||c.length==2)&&(p=!0,y=c[0]);for(var C=0;C<c.length;C++){var R=c[C],M=R.getNeighborsList().size;L.set(R,R.getNeighborsList().size),M==1&&l.push(R)}var b=[];for(b=b.concat(l);!p;){var Z=[];Z=Z.concat(b),b=[];for(var C=0;C<c.length;C++){var R=c[C],Y=c.indexOf(R);Y>=0&&c.splice(Y,1);var et=R.getNeighborsList();et.forEach(function(o){if(l.indexOf(o)<0){var E=L.get(o),d=E-1;d==1&&b.push(o),L.set(o,d)}})}l=l.concat(b),(c.length==1||c.length==2)&&(p=!0,y=c[0])}return y},a.prototype.setGraphManager=function(s){this.graphManager=s},m.exports=a},function(m,A,N){"use strict";function u(){}u.seed=1,u.x=0,u.nextDouble=function(){return u.x=Math.sin(u.seed++)*1e4,u.x-Math.floor(u.x)},m.exports=u},function(m,A,N){"use strict";var u=N(5);function h(n,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}h.prototype.getWorldOrgX=function(){return this.lworldOrgX},h.prototype.setWorldOrgX=function(n){this.lworldOrgX=n},h.prototype.getWorldOrgY=function(){return this.lworldOrgY},h.prototype.setWorldOrgY=function(n){this.lworldOrgY=n},h.prototype.getWorldExtX=function(){return this.lworldExtX},h.prototype.setWorldExtX=function(n){this.lworldExtX=n},h.prototype.getWorldExtY=function(){return this.lworldExtY},h.prototype.setWorldExtY=function(n){this.lworldExtY=n},h.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},h.prototype.setDeviceOrgX=function(n){this.ldeviceOrgX=n},h.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},h.prototype.setDeviceOrgY=function(n){this.ldeviceOrgY=n},h.prototype.getDeviceExtX=function(){return this.ldeviceExtX},h.prototype.setDeviceExtX=function(n){this.ldeviceExtX=n},h.prototype.getDeviceExtY=function(){return this.ldeviceExtY},h.prototype.setDeviceExtY=function(n){this.ldeviceExtY=n},h.prototype.transformX=function(n){var t=0,i=this.lworldExtX;return i!=0&&(t=this.ldeviceOrgX+(n-this.lworldOrgX)*this.ldeviceExtX/i),t},h.prototype.transformY=function(n){var t=0,i=this.lworldExtY;return i!=0&&(t=this.ldeviceOrgY+(n-this.lworldOrgY)*this.ldeviceExtY/i),t},h.prototype.inverseTransformX=function(n){var t=0,i=this.ldeviceExtX;return i!=0&&(t=this.lworldOrgX+(n-this.ldeviceOrgX)*this.lworldExtX/i),t},h.prototype.inverseTransformY=function(n){var t=0,i=this.ldeviceExtY;return i!=0&&(t=this.lworldOrgY+(n-this.ldeviceOrgY)*this.lworldExtY/i),t},h.prototype.inverseTransformPoint=function(n){var t=new u(this.inverseTransformX(n.x),this.inverseTransformY(n.y));return t},m.exports=h},function(m,A,N){"use strict";function u(r){if(Array.isArray(r)){for(var a=0,s=Array(r.length);a<r.length;a++)s[a]=r[a];return s}else return Array.from(r)}var h=N(15),n=N(4),t=N(0),i=N(8),f=N(9);function e(){h.call(this),this.useSmartIdealEdgeLengthCalculation=n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=n.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=n.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=n.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=n.MAX_ITERATIONS}e.prototype=Object.create(h.prototype);for(var v in h)e[v]=h[v];e.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},e.prototype.calcIdealEdgeLengths=function(){for(var r,a,s,c,l,L,p,y=this.getGraphManager().getAllEdges(),C=0;C<y.length;C++)r=y[C],a=r.idealLength,r.isInterGraph&&(c=r.getSource(),l=r.getTarget(),L=r.getSourceInLca().getEstimatedSize(),p=r.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(r.idealLength+=L+p-2*t.SIMPLE_NODE_SIZE),s=r.getLca().getInclusionTreeDepth(),r.idealLength+=a*n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*s))},e.prototype.initSpringEmbedder=function(){var r=this.getAllNodes().length;this.incremental?(r>n.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*n.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(r-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-n.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT_INCREMENTAL):(r>n.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(n.COOLING_ADAPTATION_FACTOR,1-(r-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*(1-n.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},e.prototype.calcSpringForces=function(){for(var r=this.getAllEdges(),a,s=0;s<r.length;s++)a=r[s],this.calcSpringForce(a,a.idealLength)},e.prototype.calcRepulsionForces=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s,c,l,L,p=this.getAllNodes(),y;if(this.useFRGridVariant)for(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&r&&this.updateGrid(),y=new Set,s=0;s<p.length;s++)l=p[s],this.calculateRepulsionForceOfANode(l,y,r,a),y.add(l);else for(s=0;s<p.length;s++)for(l=p[s],c=s+1;c<p.length;c++)L=p[c],l.getOwner()==L.getOwner()&&this.calcRepulsionForce(l,L)},e.prototype.calcGravitationalForces=function(){for(var r,a=this.getAllNodesToApplyGravitation(),s=0;s<a.length;s++)r=a[s],this.calcGravitationalForce(r)},e.prototype.moveNodes=function(){for(var r=this.getAllNodes(),a,s=0;s<r.length;s++)a=r[s],a.move()},e.prototype.calcSpringForce=function(r,a){var s=r.getSource(),c=r.getTarget(),l,L,p,y;if(this.uniformLeafNodeSizes&&s.getChild()==null&&c.getChild()==null)r.updateLengthSimple();else if(r.updateLength(),r.isOverlapingSourceAndTarget)return;l=r.getLength(),l!=0&&(L=r.edgeElasticity*(l-a),p=L*(r.lengthX/l),y=L*(r.lengthY/l),s.springForceX+=p,s.springForceY+=y,c.springForceX-=p,c.springForceY-=y)},e.prototype.calcRepulsionForce=function(r,a){var s=r.getRect(),c=a.getRect(),l=new Array(2),L=new Array(4),p,y,C,R,M,b,Z;if(s.intersects(c)){i.calcSeparationAmount(s,c,l,n.DEFAULT_EDGE_LENGTH/2),b=2*l[0],Z=2*l[1];var Y=r.noOfChildren*a.noOfChildren/(r.noOfChildren+a.noOfChildren);r.repulsionForceX-=Y*b,r.repulsionForceY-=Y*Z,a.repulsionForceX+=Y*b,a.repulsionForceY+=Y*Z}else this.uniformLeafNodeSizes&&r.getChild()==null&&a.getChild()==null?(p=c.getCenterX()-s.getCenterX(),y=c.getCenterY()-s.getCenterY()):(i.getIntersection(s,c,L),p=L[2]-L[0],y=L[3]-L[1]),Math.abs(p)<n.MIN_REPULSION_DIST&&(p=f.sign(p)*n.MIN_REPULSION_DIST),Math.abs(y)<n.MIN_REPULSION_DIST&&(y=f.sign(y)*n.MIN_REPULSION_DIST),C=p*p+y*y,R=Math.sqrt(C),M=(r.nodeRepulsion/2+a.nodeRepulsion/2)*r.noOfChildren*a.noOfChildren/C,b=M*p/R,Z=M*y/R,r.repulsionForceX-=b,r.repulsionForceY-=Z,a.repulsionForceX+=b,a.repulsionForceY+=Z},e.prototype.calcGravitationalForce=function(r){var a,s,c,l,L,p,y,C;a=r.getOwner(),s=(a.getRight()+a.getLeft())/2,c=(a.getTop()+a.getBottom())/2,l=r.getCenterX()-s,L=r.getCenterY()-c,p=Math.abs(l)+r.getWidth()/2,y=Math.abs(L)+r.getHeight()/2,r.getOwner()==this.graphManager.getRoot()?(C=a.getEstimatedSize()*this.gravityRangeFactor,(p>C||y>C)&&(r.gravitationForceX=-this.gravityConstant*l,r.gravitationForceY=-this.gravityConstant*L)):(C=a.getEstimatedSize()*this.compoundGravityRangeFactor,(p>C||y>C)&&(r.gravitationForceX=-this.gravityConstant*l*this.compoundGravityConstant,r.gravitationForceY=-this.gravityConstant*L*this.compoundGravityConstant))},e.prototype.isConverged=function(){var r,a=!1;return this.totalIterations>this.maxIterations/3&&(a=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),r=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,r||a},e.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},e.prototype.calcNoOfChildrenForAllNodes=function(){for(var r,a=this.graphManager.getAllNodes(),s=0;s<a.length;s++)r=a[s],r.noOfChildren=r.getNoOfChildren()},e.prototype.calcGrid=function(r){var a=0,s=0;a=parseInt(Math.ceil((r.getRight()-r.getLeft())/this.repulsionRange)),s=parseInt(Math.ceil((r.getBottom()-r.getTop())/this.repulsionRange));for(var c=new Array(a),l=0;l<a;l++)c[l]=new Array(s);for(var l=0;l<a;l++)for(var L=0;L<s;L++)c[l][L]=new Array;return c},e.prototype.addNodeToGrid=function(r,a,s){var c=0,l=0,L=0,p=0;c=parseInt(Math.floor((r.getRect().x-a)/this.repulsionRange)),l=parseInt(Math.floor((r.getRect().width+r.getRect().x-a)/this.repulsionRange)),L=parseInt(Math.floor((r.getRect().y-s)/this.repulsionRange)),p=parseInt(Math.floor((r.getRect().height+r.getRect().y-s)/this.repulsionRange));for(var y=c;y<=l;y++)for(var C=L;C<=p;C++)this.grid[y][C].push(r),r.setGridCoordinates(c,l,L,p)},e.prototype.updateGrid=function(){var r,a,s=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),r=0;r<s.length;r++)a=s[r],this.addNodeToGrid(a,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},e.prototype.calculateRepulsionForceOfANode=function(r,a,s,c){if(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&s||c){var l=new Set;r.surrounding=new Array;for(var L,p=this.grid,y=r.startX-1;y<r.finishX+2;y++)for(var C=r.startY-1;C<r.finishY+2;C++)if(!(y<0||C<0||y>=p.length||C>=p[0].length)){for(var R=0;R<p[y][C].length;R++)if(L=p[y][C][R],!(r.getOwner()!=L.getOwner()||r==L)&&!a.has(L)&&!l.has(L)){var M=Math.abs(r.getCenterX()-L.getCenterX())-(r.getWidth()/2+L.getWidth()/2),b=Math.abs(r.getCenterY()-L.getCenterY())-(r.getHeight()/2+L.getHeight()/2);M<=this.repulsionRange&&b<=this.repulsionRange&&l.add(L)}}r.surrounding=[].concat(u(l))}for(y=0;y<r.surrounding.length;y++)this.calcRepulsionForce(r,r.surrounding[y])},e.prototype.calcRepulsionRange=function(){return 0},m.exports=e},function(m,A,N){"use strict";var u=N(1),h=N(4);function n(i,f,e){u.call(this,i,f,e),this.idealLength=h.DEFAULT_EDGE_LENGTH,this.edgeElasticity=h.DEFAULT_SPRING_STRENGTH}n.prototype=Object.create(u.prototype);for(var t in u)n[t]=u[t];m.exports=n},function(m,A,N){"use strict";var u=N(3),h=N(4);function n(i,f,e,v){u.call(this,i,f,e,v),this.nodeRepulsion=h.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}n.prototype=Object.create(u.prototype);for(var t in u)n[t]=u[t];n.prototype.setGridCoordinates=function(i,f,e,v){this.startX=i,this.finishX=f,this.startY=e,this.finishY=v},m.exports=n},function(m,A,N){"use strict";function u(h,n){this.width=0,this.height=0,h!==null&&n!==null&&(this.height=n,this.width=h)}u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(h){this.width=h},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(h){this.height=h},m.exports=u},function(m,A,N){"use strict";var u=N(14);function h(){this.map={},this.keys=[]}h.prototype.put=function(n,t){var i=u.createID(n);this.contains(i)||(this.map[i]=t,this.keys.push(n))},h.prototype.contains=function(n){var t=u.createID(n);return this.map[n]!=null},h.prototype.get=function(n){var t=u.createID(n);return this.map[t]},h.prototype.keySet=function(){return this.keys},m.exports=h},function(m,A,N){"use strict";var u=N(14);function h(){this.set={}}h.prototype.add=function(n){var t=u.createID(n);this.contains(t)||(this.set[t]=n)},h.prototype.remove=function(n){delete this.set[u.createID(n)]},h.prototype.clear=function(){this.set={}},h.prototype.contains=function(n){return this.set[u.createID(n)]==n},h.prototype.isEmpty=function(){return this.size()===0},h.prototype.size=function(){return Object.keys(this.set).length},h.prototype.addAllTo=function(n){for(var t=Object.keys(this.set),i=t.length,f=0;f<i;f++)n.push(this.set[t[f]])},h.prototype.size=function(){return Object.keys(this.set).length},h.prototype.addAll=function(n){for(var t=n.length,i=0;i<t;i++){var f=n[i];this.add(f)}},m.exports=h},function(m,A,N){"use strict";function u(){}u.multMat=function(h,n){for(var t=[],i=0;i<h.length;i++){t[i]=[];for(var f=0;f<n[0].length;f++){t[i][f]=0;for(var e=0;e<h[0].length;e++)t[i][f]+=h[i][e]*n[e][f]}}return t},u.transpose=function(h){for(var n=[],t=0;t<h[0].length;t++){n[t]=[];for(var i=0;i<h.length;i++)n[t][i]=h[i][t]}return n},u.multCons=function(h,n){for(var t=[],i=0;i<h.length;i++)t[i]=h[i]*n;return t},u.minusOp=function(h,n){for(var t=[],i=0;i<h.length;i++)t[i]=h[i]-n[i];return t},u.dotProduct=function(h,n){for(var t=0,i=0;i<h.length;i++)t+=h[i]*n[i];return t},u.mag=function(h){return Math.sqrt(this.dotProduct(h,h))},u.normalize=function(h){for(var n=[],t=this.mag(h),i=0;i<h.length;i++)n[i]=h[i]/t;return n},u.multGamma=function(h){for(var n=[],t=0,i=0;i<h.length;i++)t+=h[i];t*=-1/h.length;for(var f=0;f<h.length;f++)n[f]=t+h[f];return n},u.multL=function(h,n,t){for(var i=[],f=[],e=[],v=0;v<n[0].length;v++){for(var r=0,a=0;a<n.length;a++)r+=-.5*n[a][v]*h[a];f[v]=r}for(var s=0;s<t.length;s++){for(var c=0,l=0;l<t.length;l++)c+=t[s][l]*f[l];e[s]=c}for(var L=0;L<n.length;L++){for(var p=0,y=0;y<n[0].length;y++)p+=n[L][y]*e[y];i[L]=p}return i},m.exports=u},function(m,A,N){"use strict";var u=function(){function i(f,e){for(var v=0;v<e.length;v++){var r=e[v];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(f,r.key,r)}}return function(f,e,v){return e&&i(f.prototype,e),v&&i(f,v),f}}();function h(i,f){if(!(i instanceof f))throw new TypeError("Cannot call a class as a function")}var n=N(11),t=function(){function i(f,e){h(this,i),(e!==null||e!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var v=void 0;f instanceof n?v=f.size():v=f.length,this._quicksort(f,0,v-1)}return u(i,[{key:"_quicksort",value:function(e,v,r){if(v<r){var a=this._partition(e,v,r);this._quicksort(e,v,a),this._quicksort(e,a+1,r)}}},{key:"_partition",value:function(e,v,r){for(var a=this._get(e,v),s=v,c=r;;){for(;this.compareFunction(a,this._get(e,c));)c--;for(;this.compareFunction(this._get(e,s),a);)s++;if(s<c)this._swap(e,s,c),s++,c--;else return c}}},{key:"_get",value:function(e,v){return e instanceof n?e.get_object_at(v):e[v]}},{key:"_set",value:function(e,v,r){e instanceof n?e.set_object_at(v,r):e[v]=r}},{key:"_swap",value:function(e,v,r){var a=this._get(e,v);this._set(e,v,this._get(e,r)),this._set(e,r,a)}},{key:"_defaultCompareFunction",value:function(e,v){return v>e}}]),i}();m.exports=t},function(m,A,N){"use strict";function u(){}u.svd=function(h){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=h.length,this.n=h[0].length;var n=Math.min(this.m,this.n);this.s=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(Math.min(this.m+1,this.n)),this.U=function(xt){var Lt=function kt(St){if(St.length==0)return 0;for(var Wt=[],$t=0;$t<St[0];$t++)Wt.push(kt(St.slice(1)));return Wt};return Lt(xt)}([this.m,n]),this.V=function(xt){var Lt=function kt(St){if(St.length==0)return 0;for(var Wt=[],$t=0;$t<St[0];$t++)Wt.push(kt(St.slice(1)));return Wt};return Lt(xt)}([this.n,this.n]);for(var t=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(this.n),i=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(this.m),f=!0,e=!0,v=Math.min(this.m-1,this.n),r=Math.max(0,Math.min(this.n-2,this.m)),a=0;a<Math.max(v,r);a++){if(a<v){this.s[a]=0;for(var s=a;s<this.m;s++)this.s[a]=u.hypot(this.s[a],h[s][a]);if(this.s[a]!==0){h[a][a]<0&&(this.s[a]=-this.s[a]);for(var c=a;c<this.m;c++)h[c][a]/=this.s[a];h[a][a]+=1}this.s[a]=-this.s[a]}for(var l=a+1;l<this.n;l++){if(function(xt,Lt){return xt&&Lt}(a<v,this.s[a]!==0)){for(var L=0,p=a;p<this.m;p++)L+=h[p][a]*h[p][l];L=-L/h[a][a];for(var y=a;y<this.m;y++)h[y][l]+=L*h[y][a]}t[l]=h[a][l]}if(function(xt,Lt){return xt&&Lt}(f,a<v))for(var C=a;C<this.m;C++)this.U[C][a]=h[C][a];if(a<r){t[a]=0;for(var R=a+1;R<this.n;R++)t[a]=u.hypot(t[a],t[R]);if(t[a]!==0){t[a+1]<0&&(t[a]=-t[a]);for(var M=a+1;M<this.n;M++)t[M]/=t[a];t[a+1]+=1}if(t[a]=-t[a],function(xt,Lt){return xt&&Lt}(a+1<this.m,t[a]!==0)){for(var b=a+1;b<this.m;b++)i[b]=0;for(var Z=a+1;Z<this.n;Z++)for(var Y=a+1;Y<this.m;Y++)i[Y]+=t[Z]*h[Y][Z];for(var et=a+1;et<this.n;et++)for(var I=-t[et]/t[a+1],k=a+1;k<this.m;k++)h[k][et]+=I*i[k]}if(e)for(var o=a+1;o<this.n;o++)this.V[o][a]=t[o]}}var E=Math.min(this.n,this.m+1);if(v<this.n&&(this.s[v]=h[v][v]),this.m<E&&(this.s[E-1]=0),r+1<E&&(t[r]=h[r][E-1]),t[E-1]=0,f){for(var d=v;d<n;d++){for(var T=0;T<this.m;T++)this.U[T][d]=0;this.U[d][d]=1}for(var g=v-1;g>=0;g--)if(this.s[g]!==0){for(var D=g+1;D<n;D++){for(var O=0,P=g;P<this.m;P++)O+=this.U[P][g]*this.U[P][D];O=-O/this.U[g][g];for(var S=g;S<this.m;S++)this.U[S][D]+=O*this.U[S][g]}for(var x=g;x<this.m;x++)this.U[x][g]=-this.U[x][g];this.U[g][g]=1+this.U[g][g];for(var $=0;$<g-1;$++)this.U[$][g]=0}else{for(var _=0;_<this.m;_++)this.U[_][g]=0;this.U[g][g]=1}}if(e)for(var F=this.n-1;F>=0;F--){if(function(xt,Lt){return xt&&Lt}(F<r,t[F]!==0))for(var j=F+1;j<n;j++){for(var V=0,w=F+1;w<this.n;w++)V+=this.V[w][F]*this.V[w][j];V=-V/this.V[F+1][F];for(var U=F+1;U<this.n;U++)this.V[U][j]+=V*this.V[U][F]}for(var X=0;X<this.n;X++)this.V[X][F]=0;this.V[F][F]=1}for(var Q=E-1,ht=0,Ct=Math.pow(2,-52),Ft=Math.pow(2,-966);E>0;){var J=void 0,Xt=void 0;for(J=E-2;J>=-1&&J!==-1;J--)if(Math.abs(t[J])<=Ft+Ct*(Math.abs(this.s[J])+Math.abs(this.s[J+1]))){t[J]=0;break}if(J===E-2)Xt=4;else{var Ot=void 0;for(Ot=E-1;Ot>=J&&Ot!==J;Ot--){var ot=(Ot!==E?Math.abs(t[Ot]):0)+(Ot!==J+1?Math.abs(t[Ot-1]):0);if(Math.abs(this.s[Ot])<=Ft+Ct*ot){this.s[Ot]=0;break}}Ot===J?Xt=3:Ot===E-1?Xt=1:(Xt=2,J=Ot)}switch(J++,Xt){case 1:{var tt=t[E-2];t[E-2]=0;for(var yt=E-2;yt>=J;yt--){var mt=u.hypot(this.s[yt],tt),Mt=this.s[yt]/mt,Tt=tt/mt;if(this.s[yt]=mt,yt!==J&&(tt=-Tt*t[yt-1],t[yt-1]=Mt*t[yt-1]),e)for(var Nt=0;Nt<this.n;Nt++)mt=Mt*this.V[Nt][yt]+Tt*this.V[Nt][E-1],this.V[Nt][E-1]=-Tt*this.V[Nt][yt]+Mt*this.V[Nt][E-1],this.V[Nt][yt]=mt}}break;case 2:{var Dt=t[J-1];t[J-1]=0;for(var Rt=J;Rt<E;Rt++){var zt=u.hypot(this.s[Rt],Dt),Gt=this.s[Rt]/zt,Ht=Dt/zt;if(this.s[Rt]=zt,Dt=-Ht*t[Rt],t[Rt]=Gt*t[Rt],f)for(var Pt=0;Pt<this.m;Pt++)zt=Gt*this.U[Pt][Rt]+Ht*this.U[Pt][J-1],this.U[Pt][J-1]=-Ht*this.U[Pt][Rt]+Gt*this.U[Pt][J-1],this.U[Pt][Rt]=zt}}break;case 3:{var G=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(t[E-2])),Math.abs(this.s[J])),Math.abs(t[J])),H=this.s[E-1]/G,W=this.s[E-2]/G,z=t[E-2]/G,B=this.s[J]/G,K=t[J]/G,gt=((W+H)*(W-H)+z*z)/2,ct=H*z*(H*z),q=0;(function(xt,Lt){return xt||Lt})(gt!==0,ct!==0)&&(q=Math.sqrt(gt*gt+ct),gt<0&&(q=-q),q=ct/(gt+q));for(var lt=(B+H)*(B-H)+q,ut=B*K,rt=J;rt<E-1;rt++){var vt=u.hypot(lt,ut),At=lt/vt,st=ut/vt;if(rt!==J&&(t[rt-1]=vt),lt=At*this.s[rt]+st*t[rt],t[rt]=At*t[rt]-st*this.s[rt],ut=st*this.s[rt+1],this.s[rt+1]=At*this.s[rt+1],e)for(var it=0;it<this.n;it++)vt=At*this.V[it][rt]+st*this.V[it][rt+1],this.V[it][rt+1]=-st*this.V[it][rt]+At*this.V[it][rt+1],this.V[it][rt]=vt;if(vt=u.hypot(lt,ut),At=lt/vt,st=ut/vt,this.s[rt]=vt,lt=At*t[rt]+st*this.s[rt+1],this.s[rt+1]=-st*t[rt]+At*this.s[rt+1],ut=st*t[rt+1],t[rt+1]=At*t[rt+1],f&&rt<this.m-1)for(var dt=0;dt<this.m;dt++)vt=At*this.U[dt][rt]+st*this.U[dt][rt+1],this.U[dt][rt+1]=-st*this.U[dt][rt]+At*this.U[dt][rt+1],this.U[dt][rt]=vt}t[E-2]=lt,ht=ht+1}break;case 4:{if(this.s[J]<=0&&(this.s[J]=this.s[J]<0?-this.s[J]:0,e))for(var nt=0;nt<=Q;nt++)this.V[nt][J]=-this.V[nt][J];for(;J<Q&&!(this.s[J]>=this.s[J+1]);){var ft=this.s[J];if(this.s[J]=this.s[J+1],this.s[J+1]=ft,e&&J<this.n-1)for(var bt=0;bt<this.n;bt++)ft=this.V[bt][J+1],this.V[bt][J+1]=this.V[bt][J],this.V[bt][J]=ft;if(f&&J<this.m-1)for(var It=0;It<this.m;It++)ft=this.U[It][J+1],this.U[It][J+1]=this.U[It][J],this.U[It][J]=ft;J++}ht=0,E--}break}}var Bt={U:this.U,V:this.V,S:this.s};return Bt},u.hypot=function(h,n){var t=void 0;return Math.abs(h)>Math.abs(n)?(t=n/h,t=Math.abs(h)*Math.sqrt(1+t*t)):n!=0?(t=h/n,t=Math.abs(n)*Math.sqrt(1+t*t)):t=0,t},m.exports=u},function(m,A,N){"use strict";var u=function(){function t(i,f){for(var e=0;e<f.length;e++){var v=f[e];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(i,v.key,v)}}return function(i,f,e){return f&&t(i.prototype,f),e&&t(i,e),i}}();function h(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(i,f){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;h(this,t),this.sequence1=i,this.sequence2=f,this.match_score=e,this.mismatch_penalty=v,this.gap_penalty=r,this.iMax=i.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var a=0;a<this.iMax;a++){this.grid[a]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.grid[a][s]=0}this.tracebackGrid=new Array(this.iMax);for(var c=0;c<this.iMax;c++){this.tracebackGrid[c]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[c][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return u(t,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var v=1;v<this.iMax;v++)for(var r=1;r<this.jMax;r++){var a=void 0;this.sequence1[v-1]===this.sequence2[r-1]?a=this.grid[v-1][r-1]+this.match_score:a=this.grid[v-1][r-1]+this.mismatch_penalty;var s=this.grid[v-1][r]+this.gap_penalty,c=this.grid[v][r-1]+this.gap_penalty,l=[a,s,c],L=this.arrayAllMaxIndexes(l);this.grid[v][r]=l[L[0]],this.tracebackGrid[v][r]=[L.includes(0),L.includes(1),L.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var e=f[0],v=this.tracebackGrid[e.pos[0]][e.pos[1]];v[0]&&f.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),v[1]&&f.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),v[2]&&f.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),e.pos[0]===0&&e.pos[1]===0&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,e){for(var v=[],r=-1;(r=f.indexOf(e,r+1))!==-1;)v.push(r);return v}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),t}();m.exports=n},function(m,A,N){"use strict";var u=function(){};u.FDLayout=N(18),u.FDLayoutConstants=N(4),u.FDLayoutEdge=N(19),u.FDLayoutNode=N(20),u.DimensionD=N(21),u.HashMap=N(22),u.HashSet=N(23),u.IGeometry=N(8),u.IMath=N(9),u.Integer=N(10),u.Point=N(12),u.PointD=N(5),u.RandomSeed=N(16),u.RectangleD=N(13),u.Transform=N(17),u.UniqueIDGeneretor=N(14),u.Quicksort=N(25),u.LinkedList=N(11),u.LGraphObject=N(2),u.LGraph=N(6),u.LEdge=N(1),u.LGraphManager=N(7),u.LNode=N(3),u.Layout=N(15),u.LayoutConstants=N(0),u.NeedlemanWunsch=N(27),u.Matrix=N(24),u.SVD=N(26),m.exports=u},function(m,A,N){"use strict";function u(){this.listeners=[]}var h=u.prototype;h.addListener=function(n,t){this.listeners.push({event:n,callback:t})},h.removeListener=function(n,t){for(var i=this.listeners.length;i>=0;i--){var f=this.listeners[i];f.event===n&&f.callback===t&&this.listeners.splice(i,1)}},h.emit=function(n,t){for(var i=0;i<this.listeners.length;i++){var f=this.listeners[i];n===f.event&&f.callback(t)}},m.exports=u}])})});var Ae=me((oe,Me)=>{(function(A,N){typeof oe=="object"&&typeof Me=="object"?Me.exports=N(Ce()):typeof define=="function"&&define.amd?define(["layout-base"],N):typeof oe=="object"?oe.coseBase=N(Ce()):A.coseBase=N(A.layoutBase)})(oe,function(m){return(()=>{"use strict";var A={45:(n,t,i)=>{var f={};f.layoutBase=i(551),f.CoSEConstants=i(806),f.CoSEEdge=i(767),f.CoSEGraph=i(880),f.CoSEGraphManager=i(578),f.CoSELayout=i(765),f.CoSENode=i(991),f.ConstraintHandler=i(902),n.exports=f},806:(n,t,i)=>{var f=i(551).FDLayoutConstants;function e(){}for(var v in f)e[v]=f[v];e.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,e.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH,e.DEFAULT_COMPONENT_SEPERATION=60,e.TILE=!0,e.TILING_PADDING_VERTICAL=10,e.TILING_PADDING_HORIZONTAL=10,e.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,e.ENFORCE_CONSTRAINTS=!0,e.APPLY_LAYOUT=!0,e.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,e.TREE_REDUCTION_ON_INCREMENTAL=!0,e.PURE_INCREMENTAL=e.DEFAULT_INCREMENTAL,n.exports=e},767:(n,t,i)=>{var f=i(551).FDLayoutEdge;function e(r,a,s){f.call(this,r,a,s)}e.prototype=Object.create(f.prototype);for(var v in f)e[v]=f[v];n.exports=e},880:(n,t,i)=>{var f=i(551).LGraph;function e(r,a,s){f.call(this,r,a,s)}e.prototype=Object.create(f.prototype);for(var v in f)e[v]=f[v];n.exports=e},578:(n,t,i)=>{var f=i(551).LGraphManager;function e(r){f.call(this,r)}e.prototype=Object.create(f.prototype);for(var v in f)e[v]=f[v];n.exports=e},765:(n,t,i)=>{var f=i(551).FDLayout,e=i(578),v=i(880),r=i(991),a=i(767),s=i(806),c=i(902),l=i(551).FDLayoutConstants,L=i(551).LayoutConstants,p=i(551).Point,y=i(551).PointD,C=i(551).DimensionD,R=i(551).Layout,M=i(551).Integer,b=i(551).IGeometry,Z=i(551).LGraph,Y=i(551).Transform,et=i(551).LinkedList;function I(){f.call(this),this.toBeTiled={},this.constraints={}}I.prototype=Object.create(f.prototype);for(var k in f)I[k]=f[k];I.prototype.newGraphManager=function(){var o=new e(this);return this.graphManager=o,o},I.prototype.newGraph=function(o){return new v(null,this.graphManager,o)},I.prototype.newNode=function(o){return new r(this.graphManager,o)},I.prototype.newEdge=function(o){return new a(null,null,o)},I.prototype.initParameters=function(){f.prototype.initParameters.call(this,arguments),this.isSubLayout||(s.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},I.prototype.initSpringEmbedder=function(){f.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},I.prototype.layout=function(){var o=L.DEFAULT_CREATE_BENDS_AS_NEEDED;return o&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},I.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(s.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(D){return E.has(D)});this.graphManager.setAllNodesToApplyGravitation(d)}}else{var o=this.getFlatForest();if(o.length>0)this.positionNodesRadially(o);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(T){return E.has(T)});this.graphManager.setAllNodesToApplyGravitation(d),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),s.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},I.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var o=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(g){return o.has(g)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),s.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),s.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var d=!this.isTreeGrowing&&!this.isGrowthFinished,T=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(d,T),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},I.prototype.getPositionsData=function(){for(var o=this.graphManager.getAllNodes(),E={},d=0;d<o.length;d++){var T=o[d].rect,g=o[d].id;E[g]={id:g,x:T.getCenterX(),y:T.getCenterY(),w:T.width,h:T.height}}return E},I.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var o=!1;if(l.ANIMATE==="during")this.emit("layoutstarted");else{for(;!o;)o=this.tick();this.graphManager.updateBounds()}},I.prototype.moveNodes=function(){for(var o=this.getAllNodes(),E,d=0;d<o.length;d++)E=o[d],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var d=0;d<o.length;d++)E=o[d],E.move()},I.prototype.initConstraintVariables=function(){var o=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),d=0;d<E.length;d++){var T=E[d];this.idToNodeMap.set(T.id,T)}var g=function w(U){for(var X=U.getChild().getNodes(),Q,ht=0,Ct=0;Ct<X.length;Ct++)Q=X[Ct],Q.getChild()==null?o.fixedNodeSet.has(Q.id)&&(ht+=100):ht+=w(Q);return ht};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(X){o.fixedNodeSet.add(X.nodeId)});for(var E=this.graphManager.getAllNodes(),T,d=0;d<E.length;d++)if(T=E[d],T.getChild()!=null){var D=g(T);D>0&&(T.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,P=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(w){o.fixedNodesOnHorizontal.add(w),o.fixedNodesOnVertical.add(w)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var S=this.constraints.alignmentConstraint.vertical,d=0;d<S.length;d++)this.dummyToNodeForVerticalAlignment.set("dummy"+d,[]),S[d].forEach(function(U){O.set(U,"dummy"+d),o.dummyToNodeForVerticalAlignment.get("dummy"+d).push(U),o.fixedNodeSet.has(U)&&o.fixedNodesOnHorizontal.add("dummy"+d)});if(this.constraints.alignmentConstraint.horizontal)for(var x=this.constraints.alignmentConstraint.horizontal,d=0;d<x.length;d++)this.dummyToNodeForHorizontalAlignment.set("dummy"+d,[]),x[d].forEach(function(U){P.set(U,"dummy"+d),o.dummyToNodeForHorizontalAlignment.get("dummy"+d).push(U),o.fixedNodeSet.has(U)&&o.fixedNodesOnVertical.add("dummy"+d)})}if(s.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(w){var U,X,Q;for(Q=w.length-1;Q>=2*w.length/3;Q--)U=Math.floor(Math.random()*(Q+1)),X=w[Q],w[Q]=w[U],w[U]=X;return w},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;o.nodesInRelativeHorizontal.includes(U)||(o.nodesInRelativeHorizontal.push(U),o.nodeToRelativeConstraintMapHorizontal.set(U,[]),o.dummyToNodeForVerticalAlignment.has(U)?o.nodeToTempPositionMapHorizontal.set(U,o.idToNodeMap.get(o.dummyToNodeForVerticalAlignment.get(U)[0]).getCenterX()):o.nodeToTempPositionMapHorizontal.set(U,o.idToNodeMap.get(U).getCenterX())),o.nodesInRelativeHorizontal.includes(X)||(o.nodesInRelativeHorizontal.push(X),o.nodeToRelativeConstraintMapHorizontal.set(X,[]),o.dummyToNodeForVerticalAlignment.has(X)?o.nodeToTempPositionMapHorizontal.set(X,o.idToNodeMap.get(o.dummyToNodeForVerticalAlignment.get(X)[0]).getCenterX()):o.nodeToTempPositionMapHorizontal.set(X,o.idToNodeMap.get(X).getCenterX())),o.nodeToRelativeConstraintMapHorizontal.get(U).push({right:X,gap:w.gap}),o.nodeToRelativeConstraintMapHorizontal.get(X).push({left:U,gap:w.gap})}else{var Q=P.has(w.top)?P.get(w.top):w.top,ht=P.has(w.bottom)?P.get(w.bottom):w.bottom;o.nodesInRelativeVertical.includes(Q)||(o.nodesInRelativeVertical.push(Q),o.nodeToRelativeConstraintMapVertical.set(Q,[]),o.dummyToNodeForHorizontalAlignment.has(Q)?o.nodeToTempPositionMapVertical.set(Q,o.idToNodeMap.get(o.dummyToNodeForHorizontalAlignment.get(Q)[0]).getCenterY()):o.nodeToTempPositionMapVertical.set(Q,o.idToNodeMap.get(Q).getCenterY())),o.nodesInRelativeVertical.includes(ht)||(o.nodesInRelativeVertical.push(ht),o.nodeToRelativeConstraintMapVertical.set(ht,[]),o.dummyToNodeForHorizontalAlignment.has(ht)?o.nodeToTempPositionMapVertical.set(ht,o.idToNodeMap.get(o.dummyToNodeForHorizontalAlignment.get(ht)[0]).getCenterY()):o.nodeToTempPositionMapVertical.set(ht,o.idToNodeMap.get(ht).getCenterY())),o.nodeToRelativeConstraintMapVertical.get(Q).push({bottom:ht,gap:w.gap}),o.nodeToRelativeConstraintMapVertical.get(ht).push({top:Q,gap:w.gap})}});else{var $=new Map,_=new Map;this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;$.has(U)?$.get(U).push(X):$.set(U,[X]),$.has(X)?$.get(X).push(U):$.set(X,[U])}else{var Q=P.has(w.top)?P.get(w.top):w.top,ht=P.has(w.bottom)?P.get(w.bottom):w.bottom;_.has(Q)?_.get(Q).push(ht):_.set(Q,[ht]),_.has(ht)?_.get(ht).push(Q):_.set(ht,[Q])}});var F=function(U,X){var Q=[],ht=[],Ct=new et,Ft=new Set,J=0;return U.forEach(function(Xt,Ot){if(!Ft.has(Ot)){Q[J]=[],ht[J]=!1;var ot=Ot;for(Ct.push(ot),Ft.add(ot),Q[J].push(ot);Ct.length!=0;){ot=Ct.shift(),X.has(ot)&&(ht[J]=!0);var tt=U.get(ot);tt.forEach(function(yt){Ft.has(yt)||(Ct.push(yt),Ft.add(yt),Q[J].push(yt))})}J++}}),{components:Q,isFixed:ht}},j=F($,o.fixedNodesOnHorizontal);this.componentsOnHorizontal=j.components,this.fixedComponentsOnHorizontal=j.isFixed;var V=F(_,o.fixedNodesOnVertical);this.componentsOnVertical=V.components,this.fixedComponentsOnVertical=V.isFixed}}},I.prototype.updateDisplacements=function(){var o=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(V){var w=o.idToNodeMap.get(V.nodeId);w.displacementX=0,w.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,d=0;d<E.length;d++){for(var T=0,g=0;g<E[d].length;g++){if(this.fixedNodeSet.has(E[d][g])){T=0;break}T+=this.idToNodeMap.get(E[d][g]).displacementX}for(var D=T/E[d].length,g=0;g<E[d].length;g++)this.idToNodeMap.get(E[d][g]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,d=0;d<O.length;d++){for(var P=0,g=0;g<O[d].length;g++){if(this.fixedNodeSet.has(O[d][g])){P=0;break}P+=this.idToNodeMap.get(O[d][g]).displacementY}for(var S=P/O[d].length,g=0;g<O[d].length;g++)this.idToNodeMap.get(O[d][g]).displacementY=S}}if(this.constraints.relativePlacementConstraint)if(s.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(V){if(!o.fixedNodesOnHorizontal.has(V)){var w=0;o.dummyToNodeForVerticalAlignment.has(V)?w=o.idToNodeMap.get(o.dummyToNodeForVerticalAlignment.get(V)[0]).displacementX:w=o.idToNodeMap.get(V).displacementX,o.nodeToRelativeConstraintMapHorizontal.get(V).forEach(function(U){if(U.right){var X=o.nodeToTempPositionMapHorizontal.get(U.right)-o.nodeToTempPositionMapHorizontal.get(V)-w;X<U.gap&&(w-=U.gap-X)}else{var X=o.nodeToTempPositionMapHorizontal.get(V)-o.nodeToTempPositionMapHorizontal.get(U.left)+w;X<U.gap&&(w+=U.gap-X)}}),o.nodeToTempPositionMapHorizontal.set(V,o.nodeToTempPositionMapHorizontal.get(V)+w),o.dummyToNodeForVerticalAlignment.has(V)?o.dummyToNodeForVerticalAlignment.get(V).forEach(function(U){o.idToNodeMap.get(U).displacementX=w}):o.idToNodeMap.get(V).displacementX=w}}),this.nodesInRelativeVertical.forEach(function(V){if(!o.fixedNodesOnHorizontal.has(V)){var w=0;o.dummyToNodeForHorizontalAlignment.has(V)?w=o.idToNodeMap.get(o.dummyToNodeForHorizontalAlignment.get(V)[0]).displacementY:w=o.idToNodeMap.get(V).displacementY,o.nodeToRelativeConstraintMapVertical.get(V).forEach(function(U){if(U.bottom){var X=o.nodeToTempPositionMapVertical.get(U.bottom)-o.nodeToTempPositionMapVertical.get(V)-w;X<U.gap&&(w-=U.gap-X)}else{var X=o.nodeToTempPositionMapVertical.get(V)-o.nodeToTempPositionMapVertical.get(U.top)+w;X<U.gap&&(w+=U.gap-X)}}),o.nodeToTempPositionMapVertical.set(V,o.nodeToTempPositionMapVertical.get(V)+w),o.dummyToNodeForHorizontalAlignment.has(V)?o.dummyToNodeForHorizontalAlignment.get(V).forEach(function(U){o.idToNodeMap.get(U).displacementY=w}):o.idToNodeMap.get(V).displacementY=w}});else{for(var d=0;d<this.componentsOnHorizontal.length;d++){var x=this.componentsOnHorizontal[d];if(this.fixedComponentsOnHorizontal[d])for(var g=0;g<x.length;g++)this.dummyToNodeForVerticalAlignment.has(x[g])?this.dummyToNodeForVerticalAlignment.get(x[g]).forEach(function(U){o.idToNodeMap.get(U).displacementX=0}):this.idToNodeMap.get(x[g]).displacementX=0;else{for(var $=0,_=0,g=0;g<x.length;g++)if(this.dummyToNodeForVerticalAlignment.has(x[g])){var F=this.dummyToNodeForVerticalAlignment.get(x[g]);$+=F.length*this.idToNodeMap.get(F[0]).displacementX,_+=F.length}else $+=this.idToNodeMap.get(x[g]).displacementX,_++;for(var j=$/_,g=0;g<x.length;g++)this.dummyToNodeForVerticalAlignment.has(x[g])?this.dummyToNodeForVerticalAlignment.get(x[g]).forEach(function(U){o.idToNodeMap.get(U).displacementX=j}):this.idToNodeMap.get(x[g]).displacementX=j}}for(var d=0;d<this.componentsOnVertical.length;d++){var x=this.componentsOnVertical[d];if(this.fixedComponentsOnVertical[d])for(var g=0;g<x.length;g++)this.dummyToNodeForHorizontalAlignment.has(x[g])?this.dummyToNodeForHorizontalAlignment.get(x[g]).forEach(function(X){o.idToNodeMap.get(X).displacementY=0}):this.idToNodeMap.get(x[g]).displacementY=0;else{for(var $=0,_=0,g=0;g<x.length;g++)if(this.dummyToNodeForHorizontalAlignment.has(x[g])){var F=this.dummyToNodeForHorizontalAlignment.get(x[g]);$+=F.length*this.idToNodeMap.get(F[0]).displacementY,_+=F.length}else $+=this.idToNodeMap.get(x[g]).displacementY,_++;for(var j=$/_,g=0;g<x.length;g++)this.dummyToNodeForHorizontalAlignment.has(x[g])?this.dummyToNodeForHorizontalAlignment.get(x[g]).forEach(function(Ct){o.idToNodeMap.get(Ct).displacementY=j}):this.idToNodeMap.get(x[g]).displacementY=j}}}},I.prototype.calculateNodesToApplyGravitationTo=function(){var o=[],E,d=this.graphManager.getGraphs(),T=d.length,g;for(g=0;g<T;g++)E=d[g],E.updateConnected(),E.isConnected||(o=o.concat(E.getNodes()));return o},I.prototype.createBendpoints=function(){var o=[];o=o.concat(this.graphManager.getAllEdges());var E=new Set,d;for(d=0;d<o.length;d++){var T=o[d];if(!E.has(T)){var g=T.getSource(),D=T.getTarget();if(g==D)T.getBendpoints().push(new y),T.getBendpoints().push(new y),this.createDummyNodesForBendpoints(T),E.add(T);else{var O=[];if(O=O.concat(g.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(g)),!E.has(O[0])){if(O.length>1){var P;for(P=0;P<O.length;P++){var S=O[P];S.getBendpoints().push(new y),this.createDummyNodesForBendpoints(S)}}O.forEach(function(x){E.add(x)})}}}if(E.size==o.length)break}},I.prototype.positionNodesRadially=function(o){for(var E=new p(0,0),d=Math.ceil(Math.sqrt(o.length)),T=0,g=0,D=0,O=new y(0,0),P=0;P<o.length;P++){P%d==0&&(D=0,g=T,P!=0&&(g+=s.DEFAULT_COMPONENT_SEPERATION),T=0);var S=o[P],x=R.findCenterOfTree(S);E.x=D,E.y=g,O=I.radialLayout(S,x,E),O.y>T&&(T=Math.floor(O.y)),D=Math.floor(O.x+s.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(L.WORLD_CENTER_X-O.x/2,L.WORLD_CENTER_Y-O.y/2))},I.radialLayout=function(o,E,d){var T=Math.max(this.maxDiagonalInTree(o),s.DEFAULT_RADIAL_SEPARATION);I.branchRadialLayout(E,null,0,359,0,T);var g=Z.calculateBounds(o),D=new Y;D.setDeviceOrgX(g.getMinX()),D.setDeviceOrgY(g.getMinY()),D.setWorldOrgX(d.x),D.setWorldOrgY(d.y);for(var O=0;O<o.length;O++){var P=o[O];P.transform(D)}var S=new y(g.getMaxX(),g.getMaxY());return D.inverseTransformPoint(S)},I.branchRadialLayout=function(o,E,d,T,g,D){var O=(T-d+1)/2;O<0&&(O+=180);var P=(O+d)%360,S=P*b.TWO_PI/360,x=Math.cos(S),$=g*Math.cos(S),_=g*Math.sin(S);o.setCenter($,_);var F=[];F=F.concat(o.getEdges());var j=F.length;E!=null&&j--;for(var V=0,w=F.length,U,X=o.getEdgesBetween(E);X.length>1;){var Q=X[0];X.splice(0,1);var ht=F.indexOf(Q);ht>=0&&F.splice(ht,1),w--,j--}E!=null?U=(F.indexOf(X[0])+1)%w:U=0;for(var Ct=Math.abs(T-d)/j,Ft=U;V!=j;Ft=++Ft%w){var J=F[Ft].getOtherEnd(o);if(J!=E){var Xt=(d+V*Ct)%360,Ot=(Xt+Ct)%360;I.branchRadialLayout(J,o,Xt,Ot,g+D,D),V++}}},I.maxDiagonalInTree=function(o){for(var E=M.MIN_VALUE,d=0;d<o.length;d++){var T=o[d],g=T.getDiagonal();g>E&&(E=g)}return E},I.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},I.prototype.groupZeroDegreeMembers=function(){var o=this,E={};this.memberGroups={},this.idToDummyNode={};for(var d=[],T=this.graphManager.getAllNodes(),g=0;g<T.length;g++){var D=T[g],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&d.push(D)}for(var g=0;g<d.length;g++){var D=d[g],P=D.getParent().id;typeof E[P]>"u"&&(E[P]=[]),E[P]=E[P].concat(D)}Object.keys(E).forEach(function(S){if(E[S].length>1){var x="DummyCompound_"+S;o.memberGroups[x]=E[S];var $=E[S][0].getParent(),_=new r(o.graphManager);_.id=x,_.paddingLeft=$.paddingLeft||0,_.paddingRight=$.paddingRight||0,_.paddingBottom=$.paddingBottom||0,_.paddingTop=$.paddingTop||0,o.idToDummyNode[x]=_;var F=o.getGraphManager().add(o.newGraph(),_),j=$.getChild();j.add(_);for(var V=0;V<E[S].length;V++){var w=E[S][V];j.remove(w),F.add(w)}}})},I.prototype.clearCompounds=function(){var o={},E={};this.performDFSOnCompounds();for(var d=0;d<this.compoundOrder.length;d++)E[this.compoundOrder[d].id]=this.compoundOrder[d],o[this.compoundOrder[d].id]=[].concat(this.compoundOrder[d].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[d].getChild()),this.compoundOrder[d].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(o,E)},I.prototype.clearZeroDegreeMembers=function(){var o=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(d){var T=o.idToDummyNode[d];if(E[d]=o.tileNodes(o.memberGroups[d],T.paddingLeft+T.paddingRight),T.rect.width=E[d].width,T.rect.height=E[d].height,T.setCenter(E[d].centerX,E[d].centerY),T.labelMarginLeft=0,T.labelMarginTop=0,s.NODE_DIMENSIONS_INCLUDE_LABELS){var g=T.rect.width,D=T.rect.height;T.labelWidth&&(T.labelPosHorizontal=="left"?(T.rect.x-=T.labelWidth,T.setWidth(g+T.labelWidth),T.labelMarginLeft=T.labelWidth):T.labelPosHorizontal=="center"&&T.labelWidth>g?(T.rect.x-=(T.labelWidth-g)/2,T.setWidth(T.labelWidth),T.labelMarginLeft=(T.labelWidth-g)/2):T.labelPosHorizontal=="right"&&T.setWidth(g+T.labelWidth)),T.labelHeight&&(T.labelPosVertical=="top"?(T.rect.y-=T.labelHeight,T.setHeight(D+T.labelHeight),T.labelMarginTop=T.labelHeight):T.labelPosVertical=="center"&&T.labelHeight>D?(T.rect.y-=(T.labelHeight-D)/2,T.setHeight(T.labelHeight),T.labelMarginTop=(T.labelHeight-D)/2):T.labelPosVertical=="bottom"&&T.setHeight(D+T.labelHeight))}})},I.prototype.repopulateCompounds=function(){for(var o=this.compoundOrder.length-1;o>=0;o--){var E=this.compoundOrder[o],d=E.id,T=E.paddingLeft,g=E.paddingTop,D=E.labelMarginLeft,O=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[d],E.rect.x,E.rect.y,T,g,D,O)}},I.prototype.repopulateZeroDegreeMembers=function(){var o=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(d){var T=o.idToDummyNode[d],g=T.paddingLeft,D=T.paddingTop,O=T.labelMarginLeft,P=T.labelMarginTop;o.adjustLocations(E[d],T.rect.x,T.rect.y,g,D,O,P)})},I.prototype.getToBeTiled=function(o){var E=o.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var d=o.getChild();if(d==null)return this.toBeTiled[E]=!1,!1;for(var T=d.getNodes(),g=0;g<T.length;g++){var D=T[g];if(this.getNodeDegree(D)>0)return this.toBeTiled[E]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},I.prototype.getNodeDegree=function(o){for(var E=o.id,d=o.getEdges(),T=0,g=0;g<d.length;g++){var D=d[g];D.getSource().id!==D.getTarget().id&&(T=T+1)}return T},I.prototype.getNodeDegreeWithChildren=function(o){var E=this.getNodeDegree(o);if(o.getChild()==null)return E;for(var d=o.getChild().getNodes(),T=0;T<d.length;T++){var g=d[T];E+=this.getNodeDegreeWithChildren(g)}return E},I.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},I.prototype.fillCompexOrderByDFS=function(o){for(var E=0;E<o.length;E++){var d=o[E];d.getChild()!=null&&this.fillCompexOrderByDFS(d.getChild().getNodes()),this.getToBeTiled(d)&&this.compoundOrder.push(d)}},I.prototype.adjustLocations=function(o,E,d,T,g,D,O){E+=T+D,d+=g+O;for(var P=E,S=0;S<o.rows.length;S++){var x=o.rows[S];E=P;for(var $=0,_=0;_<x.length;_++){var F=x[_];F.rect.x=E,F.rect.y=d,E+=F.rect.width+o.horizontalPadding,F.rect.height>$&&($=F.rect.height)}d+=$+o.verticalPadding}},I.prototype.tileCompoundMembers=function(o,E){var d=this;this.tiledMemberPack=[],Object.keys(o).forEach(function(T){var g=E[T];if(d.tiledMemberPack[T]=d.tileNodes(o[T],g.paddingLeft+g.paddingRight),g.rect.width=d.tiledMemberPack[T].width,g.rect.height=d.tiledMemberPack[T].height,g.setCenter(d.tiledMemberPack[T].centerX,d.tiledMemberPack[T].centerY),g.labelMarginLeft=0,g.labelMarginTop=0,s.NODE_DIMENSIONS_INCLUDE_LABELS){var D=g.rect.width,O=g.rect.height;g.labelWidth&&(g.labelPosHorizontal=="left"?(g.rect.x-=g.labelWidth,g.setWidth(D+g.labelWidth),g.labelMarginLeft=g.labelWidth):g.labelPosHorizontal=="center"&&g.labelWidth>D?(g.rect.x-=(g.labelWidth-D)/2,g.setWidth(g.labelWidth),g.labelMarginLeft=(g.labelWidth-D)/2):g.labelPosHorizontal=="right"&&g.setWidth(D+g.labelWidth)),g.labelHeight&&(g.labelPosVertical=="top"?(g.rect.y-=g.labelHeight,g.setHeight(O+g.labelHeight),g.labelMarginTop=g.labelHeight):g.labelPosVertical=="center"&&g.labelHeight>O?(g.rect.y-=(g.labelHeight-O)/2,g.setHeight(g.labelHeight),g.labelMarginTop=(g.labelHeight-O)/2):g.labelPosVertical=="bottom"&&g.setHeight(O+g.labelHeight))}})},I.prototype.tileNodes=function(o,E){var d=this.tileNodesByFavoringDim(o,E,!0),T=this.tileNodesByFavoringDim(o,E,!1),g=this.getOrgRatio(d),D=this.getOrgRatio(T),O;return D<g?O=T:O=d,O},I.prototype.getOrgRatio=function(o){var E=o.width,d=o.height,T=E/d;return T<1&&(T=1/T),T},I.prototype.calcIdealRowWidth=function(o,E){var d=s.TILING_PADDING_VERTICAL,T=s.TILING_PADDING_HORIZONTAL,g=o.length,D=0,O=0,P=0;o.forEach(function(V){D+=V.getWidth(),O+=V.getHeight(),V.getWidth()>P&&(P=V.getWidth())});var S=D/g,x=O/g,$=Math.pow(d-T,2)+4*(S+T)*(x+d)*g,_=(T-d+Math.sqrt($))/(2*(S+T)),F;E?(F=Math.ceil(_),F==_&&F++):F=Math.floor(_);var j=F*(S+T)-T;return P>j&&(j=P),j+=T*2,j},I.prototype.tileNodesByFavoringDim=function(o,E,d){var T=s.TILING_PADDING_VERTICAL,g=s.TILING_PADDING_HORIZONTAL,D=s.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:T,horizontalPadding:g,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(o,d));var P=function(w){return w.rect.width*w.rect.height},S=function(w,U){return P(U)-P(w)};o.sort(function(V,w){var U=S;return O.idealRowWidth?(U=D,U(V.id,w.id)):U(V,w)});for(var x=0,$=0,_=0;_<o.length;_++){var F=o[_];x+=F.getCenterX(),$+=F.getCenterY()}O.centerX=x/o.length,O.centerY=$/o.length;for(var _=0;_<o.length;_++){var F=o[_];if(O.rows.length==0)this.insertNodeToRow(O,F,0,E);else if(this.canAddHorizontal(O,F.rect.width,F.rect.height)){var j=O.rows.length-1;O.idealRowWidth||(j=this.getShortestRowIndex(O)),this.insertNodeToRow(O,F,j,E)}else this.insertNodeToRow(O,F,O.rows.length,E);this.shiftToLastRow(O)}return O},I.prototype.insertNodeToRow=function(o,E,d,T){var g=T;if(d==o.rows.length){var D=[];o.rows.push(D),o.rowWidth.push(g),o.rowHeight.push(0)}var O=o.rowWidth[d]+E.rect.width;o.rows[d].length>0&&(O+=o.horizontalPadding),o.rowWidth[d]=O,o.width<O&&(o.width=O);var P=E.rect.height;d>0&&(P+=o.verticalPadding);var S=0;P>o.rowHeight[d]&&(S=o.rowHeight[d],o.rowHeight[d]=P,S=o.rowHeight[d]-S),o.height+=S,o.rows[d].push(E)},I.prototype.getShortestRowIndex=function(o){for(var E=-1,d=Number.MAX_VALUE,T=0;T<o.rows.length;T++)o.rowWidth[T]<d&&(E=T,d=o.rowWidth[T]);return E},I.prototype.getLongestRowIndex=function(o){for(var E=-1,d=Number.MIN_VALUE,T=0;T<o.rows.length;T++)o.rowWidth[T]>d&&(E=T,d=o.rowWidth[T]);return E},I.prototype.canAddHorizontal=function(o,E,d){if(o.idealRowWidth){var T=o.rows.length-1,g=o.rowWidth[T];return g+E+o.horizontalPadding<=o.idealRowWidth}var D=this.getShortestRowIndex(o);if(D<0)return!0;var O=o.rowWidth[D];if(O+o.horizontalPadding+E<=o.width)return!0;var P=0;o.rowHeight[D]<d&&D>0&&(P=d+o.verticalPadding-o.rowHeight[D]);var S;o.width-O>=E+o.horizontalPadding?S=(o.height+P)/(O+E+o.horizontalPadding):S=(o.height+P)/o.width,P=d+o.verticalPadding;var x;return o.width<E?x=(o.height+P)/E:x=(o.height+P)/o.width,x<1&&(x=1/x),S<1&&(S=1/S),S<x},I.prototype.shiftToLastRow=function(o){var E=this.getLongestRowIndex(o),d=o.rowWidth.length-1,T=o.rows[E],g=T[T.length-1],D=g.width+o.horizontalPadding;if(o.width-o.rowWidth[d]>D&&E!=d){T.splice(-1,1),o.rows[d].push(g),o.rowWidth[E]=o.rowWidth[E]-D,o.rowWidth[d]=o.rowWidth[d]+D,o.width=o.rowWidth[instance.getLongestRowIndex(o)];for(var O=Number.MIN_VALUE,P=0;P<T.length;P++)T[P].height>O&&(O=T[P].height);E>0&&(O+=o.verticalPadding);var S=o.rowHeight[E]+o.rowHeight[d];o.rowHeight[E]=O,o.rowHeight[d]<g.height+o.verticalPadding&&(o.rowHeight[d]=g.height+o.verticalPadding);var x=o.rowHeight[E]+o.rowHeight[d];o.height+=x-S,this.shiftToLastRow(o)}},I.prototype.tilingPreLayout=function(){s.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},I.prototype.tilingPostLayout=function(){s.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},I.prototype.reduceTrees=function(){for(var o=[],E=!0,d;E;){var T=this.graphManager.getAllNodes(),g=[];E=!1;for(var D=0;D<T.length;D++)if(d=T[D],d.getEdges().length==1&&!d.getEdges()[0].isInterGraph&&d.getChild()==null){if(s.PURE_INCREMENTAL){var O=d.getEdges()[0].getOtherEnd(d),P=new C(d.getCenterX()-O.getCenterX(),d.getCenterY()-O.getCenterY());g.push([d,d.getEdges()[0],d.getOwner(),P])}else g.push([d,d.getEdges()[0],d.getOwner()]);E=!0}if(E==!0){for(var S=[],x=0;x<g.length;x++)g[x][0].getEdges().length==1&&(S.push(g[x]),g[x][0].getOwner().remove(g[x][0]));o.push(S),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=o},I.prototype.growTree=function(o){for(var E=o.length,d=o[E-1],T,g=0;g<d.length;g++)T=d[g],this.findPlaceforPrunedNode(T),T[2].add(T[0]),T[2].add(T[1],T[1].source,T[1].target);o.splice(o.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},I.prototype.findPlaceforPrunedNode=function(o){var E,d,T=o[0];if(T==o[1].source?d=o[1].target:d=o[1].source,s.PURE_INCREMENTAL)T.setCenter(d.getCenterX()+o[3].getWidth(),d.getCenterY()+o[3].getHeight());else{var g=d.startX,D=d.finishX,O=d.startY,P=d.finishY,S=0,x=0,$=0,_=0,F=[S,$,x,_];if(O>0)for(var j=g;j<=D;j++)F[0]+=this.grid[j][O-1].length+this.grid[j][O].length-1;if(D<this.grid.length-1)for(var j=O;j<=P;j++)F[1]+=this.grid[D+1][j].length+this.grid[D][j].length-1;if(P<this.grid[0].length-1)for(var j=g;j<=D;j++)F[2]+=this.grid[j][P+1].length+this.grid[j][P].length-1;if(g>0)for(var j=O;j<=P;j++)F[3]+=this.grid[g-1][j].length+this.grid[g][j].length-1;for(var V=M.MAX_VALUE,w,U,X=0;X<F.length;X++)F[X]<V?(V=F[X],w=1,U=X):F[X]==V&&w++;if(w==3&&V==0)F[0]==0&&F[1]==0&&F[2]==0?E=1:F[0]==0&&F[1]==0&&F[3]==0?E=0:F[0]==0&&F[2]==0&&F[3]==0?E=3:F[1]==0&&F[2]==0&&F[3]==0&&(E=2);else if(w==2&&V==0){var Q=Math.floor(Math.random()*2);F[0]==0&&F[1]==0?Q==0?E=0:E=1:F[0]==0&&F[2]==0?Q==0?E=0:E=2:F[0]==0&&F[3]==0?Q==0?E=0:E=3:F[1]==0&&F[2]==0?Q==0?E=1:E=2:F[1]==0&&F[3]==0?Q==0?E=1:E=3:Q==0?E=2:E=3}else if(w==4&&V==0){var Q=Math.floor(Math.random()*4);E=Q}else E=U;E==0?T.setCenter(d.getCenterX(),d.getCenterY()-d.getHeight()/2-l.DEFAULT_EDGE_LENGTH-T.getHeight()/2):E==1?T.setCenter(d.getCenterX()+d.getWidth()/2+l.DEFAULT_EDGE_LENGTH+T.getWidth()/2,d.getCenterY()):E==2?T.setCenter(d.getCenterX(),d.getCenterY()+d.getHeight()/2+l.DEFAULT_EDGE_LENGTH+T.getHeight()/2):T.setCenter(d.getCenterX()-d.getWidth()/2-l.DEFAULT_EDGE_LENGTH-T.getWidth()/2,d.getCenterY())}},n.exports=I},991:(n,t,i)=>{var f=i(551).FDLayoutNode,e=i(551).IMath;function v(a,s,c,l){f.call(this,a,s,c,l)}v.prototype=Object.create(f.prototype);for(var r in f)v[r]=f[r];v.prototype.calculateDisplacement=function(){var a=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=a.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=a.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=a.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=a.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>a.coolingFactor*a.maxNodeDisplacement&&(this.displacementX=a.coolingFactor*a.maxNodeDisplacement*e.sign(this.displacementX)),Math.abs(this.displacementY)>a.coolingFactor*a.maxNodeDisplacement&&(this.displacementY=a.coolingFactor*a.maxNodeDisplacement*e.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},v.prototype.propogateDisplacementToChildren=function(a,s){for(var c=this.getChild().getNodes(),l,L=0;L<c.length;L++)l=c[L],l.getChild()==null?(l.displacementX+=a,l.displacementY+=s):l.propogateDisplacementToChildren(a,s)},v.prototype.move=function(){var a=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),a.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},v.prototype.setPred1=function(a){this.pred1=a},v.prototype.getPred1=function(){return pred1},v.prototype.getPred2=function(){return pred2},v.prototype.setNext=function(a){this.next=a},v.prototype.getNext=function(){return next},v.prototype.setProcessed=function(a){this.processed=a},v.prototype.isProcessed=function(){return processed},n.exports=v},902:(n,t,i)=>{function f(c){if(Array.isArray(c)){for(var l=0,L=Array(c.length);l<c.length;l++)L[l]=c[l];return L}else return Array.from(c)}var e=i(806),v=i(551).LinkedList,r=i(551).Matrix,a=i(551).SVD;function s(){}s.handleConstraints=function(c){var l={};l.fixedNodeConstraint=c.constraints.fixedNodeConstraint,l.alignmentConstraint=c.constraints.alignmentConstraint,l.relativePlacementConstraint=c.constraints.relativePlacementConstraint;for(var L=new Map,p=new Map,y=[],C=[],R=c.getAllNodes(),M=0,b=0;b<R.length;b++){var Z=R[b];Z.getChild()==null&&(p.set(Z.id,M++),y.push(Z.getCenterX()),C.push(Z.getCenterY()),L.set(Z.id,Z))}l.relativePlacementConstraint&&l.relativePlacementConstraint.forEach(function(G){!G.gap&&G.gap!=0&&(G.left?G.gap=e.DEFAULT_EDGE_LENGTH+L.get(G.left).getWidth()/2+L.get(G.right).getWidth()/2:G.gap=e.DEFAULT_EDGE_LENGTH+L.get(G.top).getHeight()/2+L.get(G.bottom).getHeight()/2)});var Y=function(H,W){return{x:H.x-W.x,y:H.y-W.y}},et=function(H){var W=0,z=0;return H.forEach(function(B){W+=y[p.get(B)],z+=C[p.get(B)]}),{x:W/H.size,y:z/H.size}},I=function(H,W,z,B,K){function gt(st,it){var dt=new Set(st),nt=!0,ft=!1,bt=void 0;try{for(var It=it[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;dt.add(xt)}}catch(Lt){ft=!0,bt=Lt}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}return dt}var ct=new Map;H.forEach(function(st,it){ct.set(it,0)}),H.forEach(function(st,it){st.forEach(function(dt){ct.set(dt.id,ct.get(dt.id)+1)})});var q=new Map,lt=new Map,ut=new v;ct.forEach(function(st,it){st==0?(ut.push(it),z||(W=="horizontal"?q.set(it,p.has(it)?y[p.get(it)]:B.get(it)):q.set(it,p.has(it)?C[p.get(it)]:B.get(it)))):q.set(it,Number.NEGATIVE_INFINITY),z&&lt.set(it,new Set([it]))}),z&&K.forEach(function(st){var it=[];if(st.forEach(function(ft){z.has(ft)&&it.push(ft)}),it.length>0){var dt=0;it.forEach(function(ft){W=="horizontal"?(q.set(ft,p.has(ft)?y[p.get(ft)]:B.get(ft)),dt+=q.get(ft)):(q.set(ft,p.has(ft)?C[p.get(ft)]:B.get(ft)),dt+=q.get(ft))}),dt=dt/it.length,st.forEach(function(ft){z.has(ft)||q.set(ft,dt)})}else{var nt=0;st.forEach(function(ft){W=="horizontal"?nt+=p.has(ft)?y[p.get(ft)]:B.get(ft):nt+=p.has(ft)?C[p.get(ft)]:B.get(ft)}),nt=nt/st.length,st.forEach(function(ft){q.set(ft,nt)})}});for(var rt=function(){var it=ut.shift(),dt=H.get(it);dt.forEach(function(nt){if(q.get(nt.id)<q.get(it)+nt.gap)if(z&&z.has(nt.id)){var ft=void 0;if(W=="horizontal"?ft=p.has(nt.id)?y[p.get(nt.id)]:B.get(nt.id):ft=p.has(nt.id)?C[p.get(nt.id)]:B.get(nt.id),q.set(nt.id,ft),ft<q.get(it)+nt.gap){var bt=q.get(it)+nt.gap-ft;lt.get(it).forEach(function(It){q.set(It,q.get(It)-bt)})}}else q.set(nt.id,q.get(it)+nt.gap);ct.set(nt.id,ct.get(nt.id)-1),ct.get(nt.id)==0&&ut.push(nt.id),z&&lt.set(nt.id,gt(lt.get(it),lt.get(nt.id)))})};ut.length!=0;)rt();if(z){var vt=new Set;H.forEach(function(st,it){st.length==0&&vt.add(it)});var At=[];lt.forEach(function(st,it){if(vt.has(it)){var dt=!1,nt=!0,ft=!1,bt=void 0;try{for(var It=st[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;z.has(xt)&&(dt=!0)}}catch(St){ft=!0,bt=St}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}if(!dt){var Lt=!1,kt=void 0;At.forEach(function(St,Wt){St.has([].concat(f(st))[0])&&(Lt=!0,kt=Wt)}),Lt?st.forEach(function(St){At[kt].add(St)}):At.push(new Set(st))}}}),At.forEach(function(st,it){var dt=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY,ft=Number.NEGATIVE_INFINITY,bt=Number.NEGATIVE_INFINITY,It=!0,Bt=!1,xt=void 0;try{for(var Lt=st[Symbol.iterator](),kt;!(It=(kt=Lt.next()).done);It=!0){var St=kt.value,Wt=void 0;W=="horizontal"?Wt=p.has(St)?y[p.get(St)]:B.get(St):Wt=p.has(St)?C[p.get(St)]:B.get(St);var $t=q.get(St);Wt<dt&&(dt=Wt),Wt>ft&&(ft=Wt),$t<nt&&(nt=$t),$t>bt&&(bt=$t)}}catch(ee){Bt=!0,xt=ee}finally{try{!It&&Lt.return&&Lt.return()}finally{if(Bt)throw xt}}var de=(dt+ft)/2-(nt+bt)/2,Qt=!0,jt=!1,_t=void 0;try{for(var Kt=st[Symbol.iterator](),le;!(Qt=(le=Kt.next()).done);Qt=!0){var te=le.value;q.set(te,q.get(te)+de)}}catch(ee){jt=!0,_t=ee}finally{try{!Qt&&Kt.return&&Kt.return()}finally{if(jt)throw _t}}})}return q},k=function(H){var W=0,z=0,B=0,K=0;if(H.forEach(function(lt){lt.left?y[p.get(lt.left)]-y[p.get(lt.right)]>=0?W++:z++:C[p.get(lt.top)]-C[p.get(lt.bottom)]>=0?B++:K++}),W>z&&B>K)for(var gt=0;gt<p.size;gt++)y[gt]=-1*y[gt],C[gt]=-1*C[gt];else if(W>z)for(var ct=0;ct<p.size;ct++)y[ct]=-1*y[ct];else if(B>K)for(var q=0;q<p.size;q++)C[q]=-1*C[q]},o=function(H){var W=[],z=new v,B=new Set,K=0;return H.forEach(function(gt,ct){if(!B.has(ct)){W[K]=[];var q=ct;for(z.push(q),B.add(q),W[K].push(q);z.length!=0;){q=z.shift();var lt=H.get(q);lt.forEach(function(ut){B.has(ut.id)||(z.push(ut.id),B.add(ut.id),W[K].push(ut.id))})}K++}}),W},E=function(H){var W=new Map;return H.forEach(function(z,B){W.set(B,[])}),H.forEach(function(z,B){z.forEach(function(K){W.get(B).push(K),W.get(K.id).push({id:B,gap:K.gap,direction:K.direction})})}),W},d=function(H){var W=new Map;return H.forEach(function(z,B){W.set(B,[])}),H.forEach(function(z,B){z.forEach(function(K){W.get(K.id).push({id:B,gap:K.gap,direction:K.direction})})}),W},T=[],g=[],D=!1,O=!1,P=new Set,S=new Map,x=new Map,$=[];if(l.fixedNodeConstraint&&l.fixedNodeConstraint.forEach(function(G){P.add(G.nodeId)}),l.relativePlacementConstraint&&(l.relativePlacementConstraint.forEach(function(G){G.left?(S.has(G.left)?S.get(G.left).push({id:G.right,gap:G.gap,direction:"horizontal"}):S.set(G.left,[{id:G.right,gap:G.gap,direction:"horizontal"}]),S.has(G.right)||S.set(G.right,[])):(S.has(G.top)?S.get(G.top).push({id:G.bottom,gap:G.gap,direction:"vertical"}):S.set(G.top,[{id:G.bottom,gap:G.gap,direction:"vertical"}]),S.has(G.bottom)||S.set(G.bottom,[]))}),x=E(S),$=o(x)),e.TRANSFORM_ON_CONSTRAINT_HANDLING){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>1)l.fixedNodeConstraint.forEach(function(G,H){T[H]=[G.position.x,G.position.y],g[H]=[y[p.get(G.nodeId)],C[p.get(G.nodeId)]]}),D=!0;else if(l.alignmentConstraint)(function(){var G=0;if(l.alignmentConstraint.vertical){for(var H=l.alignmentConstraint.vertical,W=function(q){var lt=new Set;H[q].forEach(function(vt){lt.add(vt)});var ut=new Set([].concat(f(lt)).filter(function(vt){return P.has(vt)})),rt=void 0;ut.size>0?rt=y[p.get(ut.values().next().value)]:rt=et(lt).x,H[q].forEach(function(vt){T[G]=[rt,C[p.get(vt)]],g[G]=[y[p.get(vt)],C[p.get(vt)]],G++})},z=0;z<H.length;z++)W(z);D=!0}if(l.alignmentConstraint.horizontal){for(var B=l.alignmentConstraint.horizontal,K=function(q){var lt=new Set;B[q].forEach(function(vt){lt.add(vt)});var ut=new Set([].concat(f(lt)).filter(function(vt){return P.has(vt)})),rt=void 0;ut.size>0?rt=y[p.get(ut.values().next().value)]:rt=et(lt).y,B[q].forEach(function(vt){T[G]=[y[p.get(vt)],rt],g[G]=[y[p.get(vt)],C[p.get(vt)]],G++})},gt=0;gt<B.length;gt++)K(gt);D=!0}l.relativePlacementConstraint&&(O=!0)})();else if(l.relativePlacementConstraint){for(var _=0,F=0,j=0;j<$.length;j++)$[j].length>_&&(_=$[j].length,F=j);if(_<x.size/2)k(l.relativePlacementConstraint),D=!1,O=!1;else{var V=new Map,w=new Map,U=[];$[F].forEach(function(G){S.get(G).forEach(function(H){H.direction=="horizontal"?(V.has(G)?V.get(G).push(H):V.set(G,[H]),V.has(H.id)||V.set(H.id,[]),U.push({left:G,right:H.id})):(w.has(G)?w.get(G).push(H):w.set(G,[H]),w.has(H.id)||w.set(H.id,[]),U.push({top:G,bottom:H.id}))})}),k(U),O=!1;var X=I(V,"horizontal"),Q=I(w,"vertical");$[F].forEach(function(G,H){g[H]=[y[p.get(G)],C[p.get(G)]],T[H]=[],X.has(G)?T[H][0]=X.get(G):T[H][0]=y[p.get(G)],Q.has(G)?T[H][1]=Q.get(G):T[H][1]=C[p.get(G)]}),D=!0}}if(D){for(var ht=void 0,Ct=r.transpose(T),Ft=r.transpose(g),J=0;J<Ct.length;J++)Ct[J]=r.multGamma(Ct[J]),Ft[J]=r.multGamma(Ft[J]);var Xt=r.multMat(Ct,r.transpose(Ft)),Ot=a.svd(Xt);ht=r.multMat(Ot.V,r.transpose(Ot.U));for(var ot=0;ot<p.size;ot++){var tt=[y[ot],C[ot]],yt=[ht[0][0],ht[1][0]],mt=[ht[0][1],ht[1][1]];y[ot]=r.dotProduct(tt,yt),C[ot]=r.dotProduct(tt,mt)}O&&k(l.relativePlacementConstraint)}}if(e.ENFORCE_CONSTRAINTS){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>0){var Mt={x:0,y:0};l.fixedNodeConstraint.forEach(function(G,H){var W={x:y[p.get(G.nodeId)],y:C[p.get(G.nodeId)]},z=G.position,B=Y(z,W);Mt.x+=B.x,Mt.y+=B.y}),Mt.x/=l.fixedNodeConstraint.length,Mt.y/=l.fixedNodeConstraint.length,y.forEach(function(G,H){y[H]+=Mt.x}),C.forEach(function(G,H){C[H]+=Mt.y}),l.fixedNodeConstraint.forEach(function(G){y[p.get(G.nodeId)]=G.position.x,C[p.get(G.nodeId)]=G.position.y})}if(l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var Tt=l.alignmentConstraint.vertical,Nt=function(H){var W=new Set;Tt[H].forEach(function(K){W.add(K)});var z=new Set([].concat(f(W)).filter(function(K){return P.has(K)})),B=void 0;z.size>0?B=y[p.get(z.values().next().value)]:B=et(W).x,W.forEach(function(K){P.has(K)||(y[p.get(K)]=B)})},Dt=0;Dt<Tt.length;Dt++)Nt(Dt);if(l.alignmentConstraint.horizontal)for(var Rt=l.alignmentConstraint.horizontal,zt=function(H){var W=new Set;Rt[H].forEach(function(K){W.add(K)});var z=new Set([].concat(f(W)).filter(function(K){return P.has(K)})),B=void 0;z.size>0?B=C[p.get(z.values().next().value)]:B=et(W).y,W.forEach(function(K){P.has(K)||(C[p.get(K)]=B)})},Gt=0;Gt<Rt.length;Gt++)zt(Gt)}l.relativePlacementConstraint&&function(){var G=new Map,H=new Map,W=new Map,z=new Map,B=new Map,K=new Map,gt=new Set,ct=new Set;if(P.forEach(function(Yt){gt.add(Yt),ct.add(Yt)}),l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var q=l.alignmentConstraint.vertical,lt=function(Et){W.set("dummy"+Et,[]),q[Et].forEach(function(wt){G.set(wt,"dummy"+Et),W.get("dummy"+Et).push(wt),P.has(wt)&&gt.add("dummy"+Et)}),B.set("dummy"+Et,y[p.get(q[Et][0])])},ut=0;ut<q.length;ut++)lt(ut);if(l.alignmentConstraint.horizontal)for(var rt=l.alignmentConstraint.horizontal,vt=function(Et){z.set("dummy"+Et,[]),rt[Et].forEach(function(wt){H.set(wt,"dummy"+Et),z.get("dummy"+Et).push(wt),P.has(wt)&&ct.add("dummy"+Et)}),K.set("dummy"+Et,C[p.get(rt[Et][0])])},At=0;At<rt.length;At++)vt(At)}var st=new Map,it=new Map,dt=function(Et){S.get(Et).forEach(function(wt){var qt=void 0,Zt=void 0;wt.direction=="horizontal"?(qt=G.get(Et)?G.get(Et):Et,G.get(wt.id)?Zt={id:G.get(wt.id),gap:wt.gap,direction:wt.direction}:Zt=wt,st.has(qt)?st.get(qt).push(Zt):st.set(qt,[Zt]),st.has(Zt.id)||st.set(Zt.id,[])):(qt=H.get(Et)?H.get(Et):Et,H.get(wt.id)?Zt={id:H.get(wt.id),gap:wt.gap,direction:wt.direction}:Zt=wt,it.has(qt)?it.get(qt).push(Zt):it.set(qt,[Zt]),it.has(Zt.id)||it.set(Zt.id,[]))})},nt=!0,ft=!1,bt=void 0;try{for(var It=S.keys()[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;dt(xt)}}catch(Yt){ft=!0,bt=Yt}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}var Lt=E(st),kt=E(it),St=o(Lt),Wt=o(kt),$t=d(st),de=d(it),Qt=[],jt=[];St.forEach(function(Yt,Et){Qt[Et]=[],Yt.forEach(function(wt){$t.get(wt).length==0&&Qt[Et].push(wt)})}),Wt.forEach(function(Yt,Et){jt[Et]=[],Yt.forEach(function(wt){de.get(wt).length==0&&jt[Et].push(wt)})});var _t=I(st,"horizontal",gt,B,Qt),Kt=I(it,"vertical",ct,K,jt),le=function(Et){W.get(Et)?W.get(Et).forEach(function(wt){y[p.get(wt)]=_t.get(Et)}):y[p.get(Et)]=_t.get(Et)},te=!0,ee=!1,De=void 0;try{for(var ve=_t.keys()[Symbol.iterator](),xe;!(te=(xe=ve.next()).done);te=!0){var pe=xe.value;le(pe)}}catch(Yt){ee=!0,De=Yt}finally{try{!te&&ve.return&&ve.return()}finally{if(ee)throw De}}var cr=function(Et){z.get(Et)?z.get(Et).forEach(function(wt){C[p.get(wt)]=Kt.get(Et)}):C[p.get(Et)]=Kt.get(Et)},ye=!0,Ie=!1,Re=void 0;try{for(var Ee=Kt.keys()[Symbol.iterator](),Se;!(ye=(Se=Ee.next()).done);ye=!0){var pe=Se.value;cr(pe)}}catch(Yt){Ie=!0,Re=Yt}finally{try{!ye&&Ee.return&&Ee.return()}finally{if(Ie)throw Re}}}()}for(var Ht=0;Ht<R.length;Ht++){var Pt=R[Ht];Pt.getChild()==null&&Pt.setCenter(y[p.get(Pt.id)],C[p.get(Pt.id)])}},n.exports=s},551:n=>{n.exports=m}},N={};function u(n){var t=N[n];if(t!==void 0)return t.exports;var i=N[n]={exports:{}};return A[n](i,i.exports,u),i.exports}var h=u(45);return h})()})});var Je=me((se,we)=>{(function(A,N){typeof se=="object"&&typeof we=="object"?we.exports=N(Ae()):typeof define=="function"&&define.amd?define(["cose-base"],N):typeof se=="object"?se.cytoscapeFcose=N(Ae()):A.cytoscapeFcose=N(A.coseBase)})(se,function(m){return(()=>{"use strict";var A={658:n=>{n.exports=Object.assign!=null?Object.assign.bind(Object):function(t){for(var i=arguments.length,f=Array(i>1?i-1:0),e=1;e<i;e++)f[e-1]=arguments[e];return f.forEach(function(v){Object.keys(v).forEach(function(r){return t[r]=v[r]})}),t}},548:(n,t,i)=>{var f=function(){function r(a,s){var c=[],l=!0,L=!1,p=void 0;try{for(var y=a[Symbol.iterator](),C;!(l=(C=y.next()).done)&&(c.push(C.value),!(s&&c.length===s));l=!0);}catch(R){L=!0,p=R}finally{try{!l&&y.return&&y.return()}finally{if(L)throw p}}return c}return function(a,s){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return r(a,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=i(140).layoutBase.LinkedList,v={};v.getTopMostNodes=function(r){for(var a={},s=0;s<r.length;s++)a[r[s].id()]=!0;var c=r.filter(function(l,L){typeof l=="number"&&(l=L);for(var p=l.parent()[0];p!=null;){if(a[p.id()])return!1;p=p.parent()[0]}return!0});return c},v.connectComponents=function(r,a,s,c){var l=new e,L=new Set,p=[],y=void 0,C=void 0,R=void 0,M=!1,b=1,Z=[],Y=[],et=function(){var k=r.collection();Y.push(k);var o=s[0],E=r.collection();E.merge(o).merge(o.descendants().intersection(a)),p.push(o),E.forEach(function(g){l.push(g),L.add(g),k.merge(g)});for(var d=function(){o=l.shift();var D=r.collection();o.neighborhood().nodes().forEach(function(x){a.intersection(o.edgesWith(x)).length>0&&D.merge(x)});for(var O=0;O<D.length;O++){var P=D[O];if(y=s.intersection(P.union(P.ancestors())),y!=null&&!L.has(y[0])){var S=y.union(y.descendants());S.forEach(function(x){l.push(x),L.add(x),k.merge(x),s.has(x)&&p.push(x)})}}};l.length!=0;)d();if(k.forEach(function(g){a.intersection(g.connectedEdges()).forEach(function(D){k.has(D.source())&&k.has(D.target())&&k.merge(D)})}),p.length==s.length&&(M=!0),!M||M&&b>1){C=p[0],R=C.connectedEdges().length,p.forEach(function(g){g.connectedEdges().length<R&&(R=g.connectedEdges().length,C=g)}),Z.push(C.id());var T=r.collection();T.merge(p[0]),p.forEach(function(g){T.merge(g)}),p=[],s=s.difference(T),b++}};do et();while(!M);return c&&Z.length>0&&c.set("dummy"+(c.size+1),Z),Y},v.relocateComponent=function(r,a,s){if(!s.fixedNodeConstraint){var c=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(s.quality=="draft"){var y=!0,C=!1,R=void 0;try{for(var M=a.nodeIndexes[Symbol.iterator](),b;!(y=(b=M.next()).done);y=!0){var Z=b.value,Y=f(Z,2),et=Y[0],I=Y[1],k=s.cy.getElementById(et);if(k){var o=k.boundingBox(),E=a.xCoords[I]-o.w/2,d=a.xCoords[I]+o.w/2,T=a.yCoords[I]-o.h/2,g=a.yCoords[I]+o.h/2;E<c&&(c=E),d>l&&(l=d),T<L&&(L=T),g>p&&(p=g)}}}catch(x){C=!0,R=x}finally{try{!y&&M.return&&M.return()}finally{if(C)throw R}}var D=r.x-(l+c)/2,O=r.y-(p+L)/2;a.xCoords=a.xCoords.map(function(x){return x+D}),a.yCoords=a.yCoords.map(function(x){return x+O})}else{Object.keys(a).forEach(function(x){var $=a[x],_=$.getRect().x,F=$.getRect().x+$.getRect().width,j=$.getRect().y,V=$.getRect().y+$.getRect().height;_<c&&(c=_),F>l&&(l=F),j<L&&(L=j),V>p&&(p=V)});var P=r.x-(l+c)/2,S=r.y-(p+L)/2;Object.keys(a).forEach(function(x){var $=a[x];$.setCenter($.getCenterX()+P,$.getCenterY()+S)})}}},v.calcBoundingBox=function(r,a,s,c){for(var l=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,C=void 0,R=void 0,M=void 0,b=void 0,Z=r.descendants().not(":parent"),Y=Z.length,et=0;et<Y;et++){var I=Z[et];C=a[c.get(I.id())]-I.width()/2,R=a[c.get(I.id())]+I.width()/2,M=s[c.get(I.id())]-I.height()/2,b=s[c.get(I.id())]+I.height()/2,l>C&&(l=C),L<R&&(L=R),p>M&&(p=M),y<b&&(y=b)}var k={};return k.topLeftX=l,k.topLeftY=p,k.width=L-l,k.height=y-p,k},v.calcParentsWithoutChildren=function(r,a){var s=r.collection();return a.nodes(":parent").forEach(function(c){var l=!1;c.children().forEach(function(L){L.css("display")!="none"&&(l=!0)}),l||s.merge(c)}),s},n.exports=v},816:(n,t,i)=>{var f=i(548),e=i(140).CoSELayout,v=i(140).CoSENode,r=i(140).layoutBase.PointD,a=i(140).layoutBase.DimensionD,s=i(140).layoutBase.LayoutConstants,c=i(140).layoutBase.FDLayoutConstants,l=i(140).CoSEConstants,L=function(y,C){var R=y.cy,M=y.eles,b=M.nodes(),Z=M.edges(),Y=void 0,et=void 0,I=void 0,k={};y.randomize&&(Y=C.nodeIndexes,et=C.xCoords,I=C.yCoords);var o=function(x){return typeof x=="function"},E=function(x,$){return o(x)?x($):x},d=f.calcParentsWithoutChildren(R,M),T=function S(x,$,_,F){for(var j=$.length,V=0;V<j;V++){var w=$[V],U=null;w.intersection(d).length==0&&(U=w.children());var X=void 0,Q=w.layoutDimensions({nodeDimensionsIncludeLabels:F.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null)if(F.randomize)if(!w.isParent())X=x.add(new v(_.graphManager,new r(et[Y.get(w.id())]-Q.w/2,I[Y.get(w.id())]-Q.h/2),new a(parseFloat(Q.w),parseFloat(Q.h))));else{var ht=f.calcBoundingBox(w,et,I,Y);w.intersection(d).length==0?X=x.add(new v(_.graphManager,new r(ht.topLeftX,ht.topLeftY),new a(ht.width,ht.height))):X=x.add(new v(_.graphManager,new r(ht.topLeftX,ht.topLeftY),new a(parseFloat(Q.w),parseFloat(Q.h))))}else X=x.add(new v(_.graphManager,new r(w.position("x")-Q.w/2,w.position("y")-Q.h/2),new a(parseFloat(Q.w),parseFloat(Q.h))));else X=x.add(new v(this.graphManager));if(X.id=w.data("id"),X.nodeRepulsion=E(F.nodeRepulsion,w),X.paddingLeft=parseInt(w.css("padding")),X.paddingTop=parseInt(w.css("padding")),X.paddingRight=parseInt(w.css("padding")),X.paddingBottom=parseInt(w.css("padding")),F.nodeDimensionsIncludeLabels&&(X.labelWidth=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,X.labelHeight=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,X.labelPosVertical=w.css("text-valign"),X.labelPosHorizontal=w.css("text-halign")),k[w.data("id")]=X,isNaN(X.rect.x)&&(X.rect.x=0),isNaN(X.rect.y)&&(X.rect.y=0),U!=null&&U.length>0){var Ct=void 0;Ct=_.getGraphManager().add(_.newGraph(),X),S(Ct,U,_,F)}}},g=function(x,$,_){for(var F=0,j=0,V=0;V<_.length;V++){var w=_[V],U=k[w.data("source")],X=k[w.data("target")];if(U&&X&&U!==X&&U.getEdgesBetween(X).length==0){var Q=$.add(x.newEdge(),U,X);Q.id=w.id(),Q.idealLength=E(y.idealEdgeLength,w),Q.edgeElasticity=E(y.edgeElasticity,w),F+=Q.idealLength,j++}}y.idealEdgeLength!=null&&(j>0?l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=F/j:o(y.idealEdgeLength)?l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:l.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=y.idealEdgeLength,l.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,l.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)},D=function(x,$){$.fixedNodeConstraint&&(x.constraints.fixedNodeConstraint=$.fixedNodeConstraint),$.alignmentConstraint&&(x.constraints.alignmentConstraint=$.alignmentConstraint),$.relativePlacementConstraint&&(x.constraints.relativePlacementConstraint=$.relativePlacementConstraint)};y.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=y.nestingFactor),y.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=y.gravity),y.numIter!=null&&(l.MAX_ITERATIONS=c.MAX_ITERATIONS=y.numIter),y.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=y.gravityRange),y.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=y.gravityCompound),y.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=y.gravityRangeCompound),y.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=y.initialEnergyOnIncremental),y.tilingCompareBy!=null&&(l.TILING_COMPARE_BY=y.tilingCompareBy),y.quality=="proof"?s.QUALITY=2:s.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=y.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!y.randomize,l.ANIMATE=c.ANIMATE=s.ANIMATE=y.animate,l.TILE=y.tile,l.TILING_PADDING_VERTICAL=typeof y.tilingPaddingVertical=="function"?y.tilingPaddingVertical.call():y.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof y.tilingPaddingHorizontal=="function"?y.tilingPaddingHorizontal.call():y.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!0,l.PURE_INCREMENTAL=!y.randomize,s.DEFAULT_UNIFORM_LEAF_NODE_SIZES=y.uniformNodeDimensions,y.step=="transformed"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!1),y.step=="enforced"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!1),y.step=="cose"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!0),y.step=="all"&&(y.randomize?l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!0),y.fixedNodeConstraint||y.alignmentConstraint||y.relativePlacementConstraint?l.TREE_REDUCTION_ON_INCREMENTAL=!1:l.TREE_REDUCTION_ON_INCREMENTAL=!0;var O=new e,P=O.newGraphManager();return T(P.addRoot(),f.getTopMostNodes(b),O,y),g(O,P,Z),D(O,y),O.runLayout(),k};n.exports={coseLayout:L}},212:(n,t,i)=>{var f=function(){function y(C,R){for(var M=0;M<R.length;M++){var b=R[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(C,b.key,b)}}return function(C,R,M){return R&&y(C.prototype,R),M&&y(C,M),C}}();function e(y,C){if(!(y instanceof C))throw new TypeError("Cannot call a class as a function")}var v=i(658),r=i(548),a=i(657),s=a.spectralLayout,c=i(816),l=c.coseLayout,L=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(C){return 4500},idealEdgeLength:function(C){return 50},edgeElasticity:function(C){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),p=function(){function y(C){e(this,y),this.options=v({},L,C)}return f(y,[{key:"run",value:function(){var R=this,M=this.options,b=M.cy,Z=M.eles,Y=[],et=void 0,I=void 0,k=[],o=void 0,E=[];M.fixedNodeConstraint&&(!Array.isArray(M.fixedNodeConstraint)||M.fixedNodeConstraint.length==0)&&(M.fixedNodeConstraint=void 0),M.alignmentConstraint&&(M.alignmentConstraint.vertical&&(!Array.isArray(M.alignmentConstraint.vertical)||M.alignmentConstraint.vertical.length==0)&&(M.alignmentConstraint.vertical=void 0),M.alignmentConstraint.horizontal&&(!Array.isArray(M.alignmentConstraint.horizontal)||M.alignmentConstraint.horizontal.length==0)&&(M.alignmentConstraint.horizontal=void 0)),M.relativePlacementConstraint&&(!Array.isArray(M.relativePlacementConstraint)||M.relativePlacementConstraint.length==0)&&(M.relativePlacementConstraint=void 0);var d=M.fixedNodeConstraint||M.alignmentConstraint||M.relativePlacementConstraint;d&&(M.tile=!1,M.packComponents=!1);var T=void 0,g=!1;if(b.layoutUtilities&&M.packComponents&&(T=b.layoutUtilities("get"),T||(T=b.layoutUtilities()),g=!0),Z.nodes().length>0)if(g){var P=r.getTopMostNodes(M.eles.nodes());if(o=r.connectComponents(b,M.eles,P),o.forEach(function(ot){var tt=ot.boundingBox();E.push({x:tt.x1+tt.w/2,y:tt.y1+tt.h/2})}),M.randomize&&o.forEach(function(ot){M.eles=ot,Y.push(s(M))}),M.quality=="default"||M.quality=="proof"){var S=b.collection();if(M.tile){var x=new Map,$=[],_=[],F=0,j={nodeIndexes:x,xCoords:$,yCoords:_},V=[];if(o.forEach(function(ot,tt){ot.edges().length==0&&(ot.nodes().forEach(function(yt,mt){S.merge(ot.nodes()[mt]),yt.isParent()||(j.nodeIndexes.set(ot.nodes()[mt].id(),F++),j.xCoords.push(ot.nodes()[0].position().x),j.yCoords.push(ot.nodes()[0].position().y))}),V.push(tt))}),S.length>1){var w=S.boundingBox();E.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),o.push(S),Y.push(j);for(var U=V.length-1;U>=0;U--)o.splice(V[U],1),Y.splice(V[U],1),E.splice(V[U],1)}}o.forEach(function(ot,tt){M.eles=ot,k.push(l(M,Y[tt])),r.relocateComponent(E[tt],k[tt],M)})}else o.forEach(function(ot,tt){r.relocateComponent(E[tt],Y[tt],M)});var X=new Set;if(o.length>1){var Q=[],ht=Z.filter(function(ot){return ot.css("display")=="none"});o.forEach(function(ot,tt){var yt=void 0;if(M.quality=="draft"&&(yt=Y[tt].nodeIndexes),ot.nodes().not(ht).length>0){var mt={};mt.edges=[],mt.nodes=[];var Mt=void 0;ot.nodes().not(ht).forEach(function(Tt){if(M.quality=="draft")if(!Tt.isParent())Mt=yt.get(Tt.id()),mt.nodes.push({x:Y[tt].xCoords[Mt]-Tt.boundingbox().w/2,y:Y[tt].yCoords[Mt]-Tt.boundingbox().h/2,width:Tt.boundingbox().w,height:Tt.boundingbox().h});else{var Nt=r.calcBoundingBox(Tt,Y[tt].xCoords,Y[tt].yCoords,yt);mt.nodes.push({x:Nt.topLeftX,y:Nt.topLeftY,width:Nt.width,height:Nt.height})}else k[tt][Tt.id()]&&mt.nodes.push({x:k[tt][Tt.id()].getLeft(),y:k[tt][Tt.id()].getTop(),width:k[tt][Tt.id()].getWidth(),height:k[tt][Tt.id()].getHeight()})}),ot.edges().forEach(function(Tt){var Nt=Tt.source(),Dt=Tt.target();if(Nt.css("display")!="none"&&Dt.css("display")!="none")if(M.quality=="draft"){var Rt=yt.get(Nt.id()),zt=yt.get(Dt.id()),Gt=[],Ht=[];if(Nt.isParent()){var Pt=r.calcBoundingBox(Nt,Y[tt].xCoords,Y[tt].yCoords,yt);Gt.push(Pt.topLeftX+Pt.width/2),Gt.push(Pt.topLeftY+Pt.height/2)}else Gt.push(Y[tt].xCoords[Rt]),Gt.push(Y[tt].yCoords[Rt]);if(Dt.isParent()){var G=r.calcBoundingBox(Dt,Y[tt].xCoords,Y[tt].yCoords,yt);Ht.push(G.topLeftX+G.width/2),Ht.push(G.topLeftY+G.height/2)}else Ht.push(Y[tt].xCoords[zt]),Ht.push(Y[tt].yCoords[zt]);mt.edges.push({startX:Gt[0],startY:Gt[1],endX:Ht[0],endY:Ht[1]})}else k[tt][Nt.id()]&&k[tt][Dt.id()]&&mt.edges.push({startX:k[tt][Nt.id()].getCenterX(),startY:k[tt][Nt.id()].getCenterY(),endX:k[tt][Dt.id()].getCenterX(),endY:k[tt][Dt.id()].getCenterY()})}),mt.nodes.length>0&&(Q.push(mt),X.add(tt))}});var Ct=T.packComponents(Q,M.randomize).shifts;if(M.quality=="draft")Y.forEach(function(ot,tt){var yt=ot.xCoords.map(function(Mt){return Mt+Ct[tt].dx}),mt=ot.yCoords.map(function(Mt){return Mt+Ct[tt].dy});ot.xCoords=yt,ot.yCoords=mt});else{var Ft=0;X.forEach(function(ot){Object.keys(k[ot]).forEach(function(tt){var yt=k[ot][tt];yt.setCenter(yt.getCenterX()+Ct[Ft].dx,yt.getCenterY()+Ct[Ft].dy)}),Ft++})}}}else{var D=M.eles.boundingBox();if(E.push({x:D.x1+D.w/2,y:D.y1+D.h/2}),M.randomize){var O=s(M);Y.push(O)}M.quality=="default"||M.quality=="proof"?(k.push(l(M,Y[0])),r.relocateComponent(E[0],k[0],M)):r.relocateComponent(E[0],Y[0],M)}var J=function(tt,yt){if(M.quality=="default"||M.quality=="proof"){typeof tt=="number"&&(tt=yt);var mt=void 0,Mt=void 0,Tt=tt.data("id");return k.forEach(function(Dt){Tt in Dt&&(mt={x:Dt[Tt].getRect().getCenterX(),y:Dt[Tt].getRect().getCenterY()},Mt=Dt[Tt])}),M.nodeDimensionsIncludeLabels&&(Mt.labelWidth&&(Mt.labelPosHorizontal=="left"?mt.x+=Mt.labelWidth/2:Mt.labelPosHorizontal=="right"&&(mt.x-=Mt.labelWidth/2)),Mt.labelHeight&&(Mt.labelPosVertical=="top"?mt.y+=Mt.labelHeight/2:Mt.labelPosVertical=="bottom"&&(mt.y-=Mt.labelHeight/2))),mt==null&&(mt={x:tt.position("x"),y:tt.position("y")}),{x:mt.x,y:mt.y}}else{var Nt=void 0;return Y.forEach(function(Dt){var Rt=Dt.nodeIndexes.get(tt.id());Rt!=null&&(Nt={x:Dt.xCoords[Rt],y:Dt.yCoords[Rt]})}),Nt==null&&(Nt={x:tt.position("x"),y:tt.position("y")}),{x:Nt.x,y:Nt.y}}};if(M.quality=="default"||M.quality=="proof"||M.randomize){var Xt=r.calcParentsWithoutChildren(b,Z),Ot=Z.filter(function(ot){return ot.css("display")=="none"});M.eles=Z.not(Ot),Z.nodes().not(":parent").not(Ot).layoutPositions(R,M,J),Xt.length>0&&Xt.forEach(function(ot){ot.position(J(ot))})}}}]),y}();n.exports=p},657:(n,t,i)=>{var f=i(548),e=i(140).layoutBase.Matrix,v=i(140).layoutBase.SVD,r=function(s){var c=s.cy,l=s.eles,L=l.nodes(),p=l.nodes(":parent"),y=new Map,C=new Map,R=new Map,M=[],b=[],Z=[],Y=[],et=[],I=[],k=[],o=[],E=void 0,d=void 0,T=1e8,g=1e-9,D=s.piTol,O=s.samplingType,P=s.nodeSeparation,S=void 0,x=function(){for(var W=0,z=0,B=!1;z<S;){W=Math.floor(Math.random()*d),B=!1;for(var K=0;K<z;K++)if(Y[K]==W){B=!0;break}if(!B)Y[z]=W,z++;else continue}},$=function(W,z,B){for(var K=[],gt=0,ct=0,q=0,lt=void 0,ut=[],rt=0,vt=1,At=0;At<d;At++)ut[At]=T;for(K[ct]=W,ut[W]=0;ct>=gt;){q=K[gt++];for(var st=M[q],it=0;it<st.length;it++)lt=C.get(st[it]),ut[lt]==T&&(ut[lt]=ut[q]+1,K[++ct]=lt);I[q][z]=ut[q]*P}if(B){for(var dt=0;dt<d;dt++)I[dt][z]<et[dt]&&(et[dt]=I[dt][z]);for(var nt=0;nt<d;nt++)et[nt]>rt&&(rt=et[nt],vt=nt)}return vt},_=function(W){var z=void 0;if(W){z=Math.floor(Math.random()*d),E=z;for(var K=0;K<d;K++)et[K]=T;for(var gt=0;gt<S;gt++)Y[gt]=z,z=$(z,gt,W)}else{x();for(var B=0;B<S;B++)$(Y[B],B,W,!1)}for(var ct=0;ct<d;ct++)for(var q=0;q<S;q++)I[ct][q]*=I[ct][q];for(var lt=0;lt<S;lt++)k[lt]=[];for(var ut=0;ut<S;ut++)for(var rt=0;rt<S;rt++)k[ut][rt]=I[Y[rt]][ut]},F=function(){for(var W=v.svd(k),z=W.S,B=W.U,K=W.V,gt=z[0]*z[0]*z[0],ct=[],q=0;q<S;q++){ct[q]=[];for(var lt=0;lt<S;lt++)ct[q][lt]=0,q==lt&&(ct[q][lt]=z[q]/(z[q]*z[q]+gt/(z[q]*z[q])))}o=e.multMat(e.multMat(K,ct),e.transpose(B))},j=function(){for(var W=void 0,z=void 0,B=[],K=[],gt=[],ct=[],q=0;q<d;q++)B[q]=Math.random(),K[q]=Math.random();B=e.normalize(B),K=e.normalize(K);for(var lt=0,ut=g,rt=g,vt=void 0;;){lt++;for(var At=0;At<d;At++)gt[At]=B[At];if(B=e.multGamma(e.multL(e.multGamma(gt),I,o)),W=e.dotProduct(gt,B),B=e.normalize(B),ut=e.dotProduct(gt,B),vt=Math.abs(ut/rt),vt<=1+D&&vt>=1)break;rt=ut}for(var st=0;st<d;st++)gt[st]=B[st];for(lt=0,rt=g;;){lt++;for(var it=0;it<d;it++)ct[it]=K[it];if(ct=e.minusOp(ct,e.multCons(gt,e.dotProduct(gt,ct))),K=e.multGamma(e.multL(e.multGamma(ct),I,o)),z=e.dotProduct(ct,K),K=e.normalize(K),ut=e.dotProduct(ct,K),vt=Math.abs(ut/rt),vt<=1+D&&vt>=1)break;rt=ut}for(var dt=0;dt<d;dt++)ct[dt]=K[dt];b=e.multCons(gt,Math.sqrt(Math.abs(W))),Z=e.multCons(ct,Math.sqrt(Math.abs(z)))};f.connectComponents(c,l,f.getTopMostNodes(L),y),p.forEach(function(H){f.connectComponents(c,l,f.getTopMostNodes(H.descendants().intersection(l)),y)});for(var V=0,w=0;w<L.length;w++)L[w].isParent()||C.set(L[w].id(),V++);var U=!0,X=!1,Q=void 0;try{for(var ht=y.keys()[Symbol.iterator](),Ct;!(U=(Ct=ht.next()).done);U=!0){var Ft=Ct.value;C.set(Ft,V++)}}catch(H){X=!0,Q=H}finally{try{!U&&ht.return&&ht.return()}finally{if(X)throw Q}}for(var J=0;J<C.size;J++)M[J]=[];p.forEach(function(H){for(var W=H.children().intersection(l);W.nodes(":childless").length==0;)W=W.nodes()[0].children().intersection(l);var z=0,B=W.nodes(":childless")[0].connectedEdges().length;W.nodes(":childless").forEach(function(K,gt){K.connectedEdges().length<B&&(B=K.connectedEdges().length,z=gt)}),R.set(H.id(),W.nodes(":childless")[z].id())}),L.forEach(function(H){var W=void 0;H.isParent()?W=C.get(R.get(H.id())):W=C.get(H.id()),H.neighborhood().nodes().forEach(function(z){l.intersection(H.edgesWith(z)).length>0&&(z.isParent()?M[W].push(R.get(z.id())):M[W].push(z.id()))})});var Xt=function(W){var z=C.get(W),B=void 0;y.get(W).forEach(function(K){c.getElementById(K).isParent()?B=R.get(K):B=K,M[z].push(B),M[C.get(B)].push(W)})},Ot=!0,ot=!1,tt=void 0;try{for(var yt=y.keys()[Symbol.iterator](),mt;!(Ot=(mt=yt.next()).done);Ot=!0){var Mt=mt.value;Xt(Mt)}}catch(H){ot=!0,tt=H}finally{try{!Ot&&yt.return&&yt.return()}finally{if(ot)throw tt}}d=C.size;var Tt=void 0;if(d>2){S=d<s.sampleSize?d:s.sampleSize;for(var Nt=0;Nt<d;Nt++)I[Nt]=[];for(var Dt=0;Dt<S;Dt++)o[Dt]=[];return s.quality=="draft"||s.step=="all"?(_(O),F(),j(),Tt={nodeIndexes:C,xCoords:b,yCoords:Z}):(C.forEach(function(H,W){b.push(c.getElementById(W).position("x")),Z.push(c.getElementById(W).position("y"))}),Tt={nodeIndexes:C,xCoords:b,yCoords:Z}),Tt}else{var Rt=C.keys(),zt=c.getElementById(Rt.next().value),Gt=zt.position(),Ht=zt.outerWidth();if(b.push(Gt.x),Z.push(Gt.y),d==2){var Pt=c.getElementById(Rt.next().value),G=Pt.outerWidth();b.push(Gt.x+Ht/2+G/2+s.idealEdgeLength),Z.push(Gt.y)}return Tt={nodeIndexes:C,xCoords:b,yCoords:Z},Tt}};n.exports={spectralLayout:r}},579:(n,t,i)=>{var f=i(212),e=function(r){r&&r("layout","fcose",f)};typeof cytoscape<"u"&&e(cytoscape),n.exports=e},140:n=>{n.exports=m}},N={};function u(n){var t=N[n];if(t!==void 0)return t.exports;var i=N[n]={exports:{}};return A[n](i,i.exports,u),i.exports}var h=u(579);return h})()})});var rr=ur(Je(),1);var Qe={L:"left",R:"right",T:"top",B:"bottom"},Ke={L:at(m=>`${m},${m/2} 0,${m} 0,0`,"L"),R:at(m=>`0,${m/2} ${m},0 ${m},${m}`,"R"),T:at(m=>`0,0 ${m},0 ${m/2},${m}`,"T"),B:at(m=>`${m/2},0 ${m},${m} 0,${m}`,"B")},ue={L:at((m,A)=>m-A+2,"L"),R:at((m,A)=>m-2,"R"),T:at((m,A)=>m-A+2,"T"),B:at((m,A)=>m-2,"B")},gr=at(function(m){return Vt(m)?m==="L"?"R":"L":m==="T"?"B":"T"},"getOppositeArchitectureDirection"),je=at(function(m){let A=m;return A==="L"||A==="R"||A==="T"||A==="B"},"isArchitectureDirection"),Vt=at(function(m){let A=m;return A==="L"||A==="R"},"isArchitectureDirectionX"),Jt=at(function(m){let A=m;return A==="T"||A==="B"},"isArchitectureDirectionY"),_e=at(function(m,A){let N=Vt(m)&&Jt(A),u=Jt(m)&&Vt(A);return N||u},"isArchitectureDirectionXY"),dr=at(function(m){let A=m[0],N=m[1],u=Vt(A)&&Jt(N),h=Jt(A)&&Vt(N);return u||h},"isArchitecturePairXY"),vr=at(function(m){return m!=="LL"&&m!=="RR"&&m!=="TT"&&m!=="BB"},"isValidArchitectureDirectionPair"),Oe=at(function(m,A){let N=`${m}${A}`;return vr(N)?N:void 0},"getArchitectureDirectionPair"),pr=at(function([m,A],N){let u=N[0],h=N[1];return Vt(u)?Jt(h)?[m+(u==="L"?-1:1),A+(h==="T"?1:-1)]:[m+(u==="L"?-1:1),A]:Vt(h)?[m+(h==="L"?1:-1),A+(u==="T"?1:-1)]:[m,A+(u==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),yr=at(function(m){return m==="LT"||m==="TL"?[1,1]:m==="BL"||m==="LB"?[1,-1]:m==="BR"||m==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),Er=at(function(m){return m.type==="service"},"isArchitectureService"),mr=at(function(m){return m.type==="junction"},"isArchitectureJunction"),tr=at(m=>m.data(),"edgeData"),ie=at(m=>m.data(),"nodeData"),er=Fe.architecture,pt=new ke(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:er,dataStructures:void 0,elements:{}})),Tr=at(()=>{pt.reset(),Pe()},"clear"),Nr=at(function({id:m,icon:A,in:N,title:u,iconText:h}){if(pt.records.registeredIds[m]!==void 0)throw new Error(`The service id [${m}] is already in use by another ${pt.records.registeredIds[m]}`);if(N!==void 0){if(m===N)throw new Error(`The service [${m}] cannot be placed within itself`);if(pt.records.registeredIds[N]===void 0)throw new Error(`The service [${m}]'s parent does not exist. Please make sure the parent is created before this service`);if(pt.records.registeredIds[N]==="node")throw new Error(`The service [${m}]'s parent is not a group`)}pt.records.registeredIds[m]="node",pt.records.nodes[m]={id:m,type:"service",icon:A,iconText:h,title:u,edges:[],in:N}},"addService"),Lr=at(()=>Object.values(pt.records.nodes).filter(Er),"getServices"),Cr=at(function({id:m,in:A}){pt.records.registeredIds[m]="node",pt.records.nodes[m]={id:m,type:"junction",edges:[],in:A}},"addJunction"),Mr=at(()=>Object.values(pt.records.nodes).filter(mr),"getJunctions"),Ar=at(()=>Object.values(pt.records.nodes),"getNodes"),wr=at(m=>pt.records.nodes[m],"getNode"),Or=at(function({id:m,icon:A,in:N,title:u}){if(pt.records.registeredIds[m]!==void 0)throw new Error(`The group id [${m}] is already in use by another ${pt.records.registeredIds[m]}`);if(N!==void 0){if(m===N)throw new Error(`The group [${m}] cannot be placed within itself`);if(pt.records.registeredIds[N]===void 0)throw new Error(`The group [${m}]'s parent does not exist. Please make sure the parent is created before this group`);if(pt.records.registeredIds[N]==="node")throw new Error(`The group [${m}]'s parent is not a group`)}pt.records.registeredIds[m]="group",pt.records.groups[m]={id:m,icon:A,title:u,in:N}},"addGroup"),Dr=at(()=>Object.values(pt.records.groups),"getGroups"),xr=at(function({lhsId:m,rhsId:A,lhsDir:N,rhsDir:u,lhsInto:h,rhsInto:n,lhsGroup:t,rhsGroup:i,title:f}){if(!je(N))throw new Error(`Invalid direction given for left hand side of edge ${m}--${A}. Expected (L,R,T,B) got ${N}`);if(!je(u))throw new Error(`Invalid direction given for right hand side of edge ${m}--${A}. Expected (L,R,T,B) got ${u}`);if(pt.records.nodes[m]===void 0&&pt.records.groups[m]===void 0)throw new Error(`The left-hand id [${m}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(pt.records.nodes[A]===void 0&&pt.records.groups[m]===void 0)throw new Error(`The right-hand id [${A}] does not yet exist. Please create the service/group before declaring an edge to it.`);let e=pt.records.nodes[m].in,v=pt.records.nodes[A].in;if(t&&e&&v&&e==v)throw new Error(`The left-hand id [${m}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(i&&e&&v&&e==v)throw new Error(`The right-hand id [${A}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let r={lhsId:m,lhsDir:N,lhsInto:h,lhsGroup:t,rhsId:A,rhsDir:u,rhsInto:n,rhsGroup:i,title:f};pt.records.edges.push(r),pt.records.nodes[m]&&pt.records.nodes[A]&&(pt.records.nodes[m].edges.push(pt.records.edges[pt.records.edges.length-1]),pt.records.nodes[A].edges.push(pt.records.edges[pt.records.edges.length-1]))},"addEdge"),Ir=at(()=>pt.records.edges,"getEdges"),Rr=at(()=>{if(pt.records.dataStructures===void 0){let m=Object.entries(pt.records.nodes).reduce((t,[i,f])=>(t[i]=f.edges.reduce((e,v)=>{if(v.lhsId===i){let r=Oe(v.lhsDir,v.rhsDir);r&&(e[r]=v.rhsId)}else{let r=Oe(v.rhsDir,v.lhsDir);r&&(e[r]=v.lhsId)}return e},{}),t),{}),A=Object.keys(m)[0],N={[A]:1},u=Object.keys(m).reduce((t,i)=>i===A?t:{...t,[i]:1},{}),h=at(t=>{let i={[t]:[0,0]},f=[t];for(;f.length>0;){let e=f.shift();if(e){N[e]=1,delete u[e];let v=m[e],[r,a]=i[e];Object.entries(v).forEach(([s,c])=>{N[c]||(i[c]=pr([r,a],s),f.push(c))})}}return i},"BFS"),n=[h(A)];for(;Object.keys(u).length>0;)n.push(h(Object.keys(u)[0]));pt.records.dataStructures={adjList:m,spatialMaps:n}}return pt.records.dataStructures},"getDataStructures"),Sr=at((m,A)=>{pt.records.elements[m]=A},"setElementForId"),Fr=at(m=>pt.records.elements[m],"getElementById"),ge={clear:Tr,setDiagramTitle:He,getDiagramTitle:We,setAccTitle:Ge,getAccTitle:Ue,setAccDescription:Ye,getAccDescription:Xe,addService:Nr,getServices:Lr,addJunction:Cr,getJunctions:Mr,getNodes:Ar,getNode:wr,addGroup:Or,getGroups:Dr,addEdge:xr,getEdges:Ir,setElementForId:Sr,getElementById:Fr,getDataStructures:Rr};function Ut(m){let A=ae().architecture;return A!=null&&A[m]?A[m]:er[m]}at(Ut,"getConfigField");var br=at((m,A)=>{Ze(m,A),m.groups.map(A.addGroup),m.services.map(N=>A.addService({...N,type:"service"})),m.junctions.map(N=>A.addJunction({...N,type:"junction"})),m.edges.map(A.addEdge)},"populateDb"),Pr={parse:at(async m=>{let A=await qe("architecture",m);Te.debug(A),br(A,ge)},"parse")},Gr=at(m=>`
  .edge {
    stroke-width: ${m.archEdgeWidth};
    stroke: ${m.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${m.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${m.archGroupBorderColor};
    stroke-width: ${m.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Ur=Gr,re=at(m=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${m}</g>`,"wrapIcon"),he={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:re('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:re('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:re('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:re('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:re('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Ve,blank:{body:re("")}}},Yr=at(async function(m,A){let N=Ut("padding"),u=Ut("iconSize"),h=u/2,n=u/6,t=n/2;await Promise.all(A.edges().map(async i=>{var Y,et;let{source:f,sourceDir:e,sourceArrow:v,sourceGroup:r,target:a,targetDir:s,targetArrow:c,targetGroup:l,label:L}=tr(i),{x:p,y}=i[0].sourceEndpoint(),{x:C,y:R}=i[0].midpoint(),{x:M,y:b}=i[0].targetEndpoint(),Z=N+4;if(r&&(Vt(e)?p+=e==="L"?-Z:Z:y+=e==="T"?-Z:Z+18),l&&(Vt(s)?M+=s==="L"?-Z:Z:b+=s==="T"?-Z:Z+18),!r&&((Y=ge.getNode(f))==null?void 0:Y.type)==="junction"&&(Vt(e)?p+=e==="L"?h:-h:y+=e==="T"?h:-h),!l&&((et=ge.getNode(a))==null?void 0:et.type)==="junction"&&(Vt(s)?M+=s==="L"?h:-h:b+=s==="T"?h:-h),i[0]._private.rscratch){let I=m.insert("g");if(I.insert("path").attr("d",`M ${p},${y} L ${C},${R} L${M},${b} `).attr("class","edge"),v){let k=Vt(e)?ue[e](p,n):p-t,o=Jt(e)?ue[e](y,n):y-t;I.insert("polygon").attr("points",Ke[e](n)).attr("transform",`translate(${k},${o})`).attr("class","arrow")}if(c){let k=Vt(s)?ue[s](M,n):M-t,o=Jt(s)?ue[s](b,n):b-t;I.insert("polygon").attr("points",Ke[s](n)).attr("transform",`translate(${k},${o})`).attr("class","arrow")}if(L){let k=_e(e,s)?"XY":Vt(e)?"X":"Y",o=0;k==="X"?o=Math.abs(p-M):k==="Y"?o=Math.abs(y-b)/1.5:o=Math.abs(p-M)/2;let E=I.append("g");if(await ce(E,L,{useHtmlLabels:!1,width:o,classes:"architecture-service-label"},ae()),E.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),k==="X")E.attr("transform","translate("+C+", "+R+")");else if(k==="Y")E.attr("transform","translate("+C+", "+R+") rotate(-90)");else if(k==="XY"){let d=Oe(e,s);if(d&&dr(d)){let T=E.node().getBoundingClientRect(),[g,D]=yr(d);E.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*g*D*45})`);let O=E.node().getBoundingClientRect();E.attr("transform",`
                translate(${C}, ${R-T.height/2})
                translate(${g*O.width/2}, ${D*O.height/2})
                rotate(${-1*g*D*45}, 0, ${T.height/2})
              `)}}}}}))},"drawEdges"),Xr=at(async function(m,A){let u=Ut("padding")*.75,h=Ut("fontSize"),t=Ut("iconSize")/2;await Promise.all(A.nodes().map(async i=>{let f=ie(i);if(f.type==="group"){let{h:e,w:v,x1:r,y1:a}=i.boundingBox();m.append("rect").attr("x",r+t).attr("y",a+t).attr("width",v).attr("height",e).attr("class","node-bkg");let s=m.append("g"),c=r,l=a;if(f.icon){let L=s.append("g");L.html(`<g>${await fe(f.icon,{height:u,width:u,fallbackPrefix:he.prefix})}</g>`),L.attr("transform","translate("+(c+t+1)+", "+(l+t+1)+")"),c+=u,l+=h/2-1-2}if(f.label){let L=s.append("g");await ce(L,f.label,{useHtmlLabels:!1,width:v,classes:"architecture-service-label"},ae()),L.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),L.attr("transform","translate("+(c+t+4)+", "+(l+t+2)+")")}}}))},"drawGroups"),Hr=at(async function(m,A,N){for(let u of N){let h=A.append("g"),n=Ut("iconSize");if(u.title){let e=h.append("g");await ce(e,u.title,{useHtmlLabels:!1,width:n*1.5,classes:"architecture-service-label"},ae()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),e.attr("transform","translate("+n/2+", "+n+")")}let t=h.append("g");if(u.icon)t.html(`<g>${await fe(u.icon,{height:n,width:n,fallbackPrefix:he.prefix})}</g>`);else if(u.iconText){t.html(`<g>${await fe("blank",{height:n,width:n,fallbackPrefix:he.prefix})}</g>`);let r=t.append("g").append("foreignObject").attr("width",n).attr("height",n).append("div").attr("class","node-icon-text").attr("style",`height: ${n}px;`).append("div").html(u.iconText),a=parseInt(window.getComputedStyle(r.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;r.attr("style",`-webkit-line-clamp: ${Math.floor((n-2)/a)};`)}else t.append("path").attr("class","node-bkg").attr("id","node-"+u.id).attr("d",`M0 ${n} v${-n} q0,-5 5,-5 h${n} q5,0 5,5 v${n} H0 Z`);h.attr("class","architecture-service");let{width:i,height:f}=h._groups[0][0].getBBox();u.width=i,u.height=f,m.setElementForId(u.id,h)}return 0},"drawServices"),Wr=at(function(m,A,N){N.forEach(u=>{let h=A.append("g"),n=Ut("iconSize");h.append("g").append("rect").attr("id","node-"+u.id).attr("fill-opacity","0").attr("width",n).attr("height",n),h.attr("class","architecture-junction");let{width:i,height:f}=h._groups[0][0].getBBox();h.width=i,h.height=f,m.setElementForId(u.id,h)})},"drawJunctions");ze([{name:he.prefix,icons:he}]);Ne.use(rr.default);function ir(m,A){m.forEach(N=>{A.add({group:"nodes",data:{type:"service",id:N.id,icon:N.icon,label:N.title,parent:N.in,width:Ut("iconSize"),height:Ut("iconSize")},classes:"node-service"})})}at(ir,"addServices");function ar(m,A){m.forEach(N=>{A.add({group:"nodes",data:{type:"junction",id:N.id,parent:N.in,width:Ut("iconSize"),height:Ut("iconSize")},classes:"node-junction"})})}at(ar,"addJunctions");function nr(m,A){A.nodes().map(N=>{let u=ie(N);if(u.type==="group")return;u.x=N.position().x,u.y=N.position().y,m.getElementById(u.id).attr("transform","translate("+(u.x||0)+","+(u.y||0)+")")})}at(nr,"positionNodes");function or(m,A){m.forEach(N=>{A.add({group:"nodes",data:{type:"group",id:N.id,icon:N.icon,label:N.title,parent:N.in},classes:"node-group"})})}at(or,"addGroups");function sr(m,A){m.forEach(N=>{let{lhsId:u,rhsId:h,lhsInto:n,lhsGroup:t,rhsInto:i,lhsDir:f,rhsDir:e,rhsGroup:v,title:r}=N,a=_e(N.lhsDir,N.rhsDir)?"segments":"straight",s={id:`${u}-${h}`,label:r,source:u,sourceDir:f,sourceArrow:n,sourceGroup:t,sourceEndpoint:f==="L"?"0 50%":f==="R"?"100% 50%":f==="T"?"50% 0":"50% 100%",target:h,targetDir:e,targetArrow:i,targetGroup:v,targetEndpoint:e==="L"?"0 50%":e==="R"?"100% 50%":e==="T"?"50% 0":"50% 100%"};A.add({group:"edges",data:s,classes:a})})}at(sr,"addEdges");function hr(m){let A=m.map(h=>{let n={},t={};return Object.entries(h).forEach(([i,[f,e]])=>{n[e]||(n[e]=[]),t[f]||(t[f]=[]),n[e].push(i),t[f].push(i)}),{horiz:Object.values(n).filter(i=>i.length>1),vert:Object.values(t).filter(i=>i.length>1)}}),[N,u]=A.reduce(([h,n],{horiz:t,vert:i})=>[[...h,...t],[...n,...i]],[[],[]]);return{horizontal:N,vertical:u}}at(hr,"getAlignments");function lr(m){let A=[],N=at(h=>`${h[0]},${h[1]}`,"posToStr"),u=at(h=>h.split(",").map(n=>parseInt(n)),"strToPos");return m.forEach(h=>{let n=Object.fromEntries(Object.entries(h).map(([e,v])=>[N(v),e])),t=[N([0,0])],i={},f={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;t.length>0;){let e=t.shift();if(e){i[e]=1;let v=n[e];if(v){let r=u(e);Object.entries(f).forEach(([a,s])=>{let c=N([r[0]+s[0],r[1]+s[1]]),l=n[c];l&&!i[c]&&(t.push(c),A.push({[Qe[a]]:l,[Qe[gr(a)]]:v,gap:1.5*Ut("iconSize")}))})}}}}),A}at(lr,"getRelativeConstraints");function fr(m,A,N,u,{spatialMaps:h}){return new Promise(n=>{let t=Be("body").append("div").attr("id","cy").attr("style","display:none"),i=Ne({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Ut("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Ut("padding")}px`}}]});t.remove(),or(N,i),ir(m,i),ar(A,i),sr(u,i);let f=hr(h),e=lr(h),v=i.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(r){let[a,s]=r.connectedNodes(),{parent:c}=ie(a),{parent:l}=ie(s);return c===l?1.5*Ut("iconSize"):.5*Ut("iconSize")},edgeElasticity(r){let[a,s]=r.connectedNodes(),{parent:c}=ie(a),{parent:l}=ie(s);return c===l?.45:.001},alignmentConstraint:f,relativePlacementConstraint:e});v.one("layoutstop",()=>{var a;function r(s,c,l,L){let p,y,{x:C,y:R}=s,{x:M,y:b}=c;y=(L-R+(C-l)*(R-b)/(C-M))/Math.sqrt(1+Math.pow((R-b)/(C-M),2)),p=Math.sqrt(Math.pow(L-R,2)+Math.pow(l-C,2)-Math.pow(y,2));let Z=Math.sqrt(Math.pow(M-C,2)+Math.pow(b-R,2));p=p/Z;let Y=(M-C)*(L-R)-(b-R)*(l-C);switch(!0){case Y>=0:Y=1;break;case Y<0:Y=-1;break}let et=(M-C)*(l-C)+(b-R)*(L-R);switch(!0){case et>=0:et=1;break;case et<0:et=-1;break}return y=Math.abs(y)*Y,p=p*et,{distances:y,weights:p}}at(r,"getSegmentWeights"),i.startBatch();for(let s of Object.values(i.edges()))if((a=s.data)!=null&&a.call(s)){let{x:c,y:l}=s.source().position(),{x:L,y:p}=s.target().position();if(c!==L&&l!==p){let y=s.sourceEndpoint(),C=s.targetEndpoint(),{sourceDir:R}=tr(s),[M,b]=Jt(R)?[y.x,C.y]:[C.x,y.y],{weights:Z,distances:Y}=r(y,C,M,b);s.style("segment-distances",Y),s.style("segment-weights",Z)}}i.endBatch(),v.run()}),v.run(),i.ready(r=>{Te.info("Ready",r),n(i)})})}at(fr,"layoutArchitecture");var Vr=at(async(m,A,N,u)=>{let h=u.db,n=h.getServices(),t=h.getJunctions(),i=h.getGroups(),f=h.getEdges(),e=h.getDataStructures(),v=$e(A),r=v.append("g");r.attr("class","architecture-edges");let a=v.append("g");a.attr("class","architecture-services");let s=v.append("g");s.attr("class","architecture-groups"),await Hr(h,a,n),Wr(h,a,t);let c=await fr(n,t,i,f,e);await Yr(r,c),await Xr(s,c),nr(h,c),be(void 0,v,Ut("padding"),Ut("useMaxWidth"))},"draw"),zr={draw:Vr},ti={parser:Pr,db:ge,renderer:zr,styles:Ur};export{ti as diagram};
